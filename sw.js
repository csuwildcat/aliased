try{self["workbox:core:7.0.0"]&&_()}catch{}const HC=(t,...e)=>{let r=t;return e.length>0&&(r+=` :: ${JSON.stringify(e)}`),r},GC=HC;class zi extends Error{constructor(e,r){const n=GC(e,r);super(n),this.name=e,this.details=r}}const Ba={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},vb=t=>[Ba.prefix,t,Ba.suffix].filter(e=>e&&e.length>0).join("-"),WC=t=>{for(const e of Object.keys(Ba))t(e)},H0={updateDetails:t=>{WC(e=>{typeof t[e]=="string"&&(Ba[e]=t[e])})},getGoogleAnalyticsName:t=>t||vb(Ba.googleAnalytics),getPrecacheName:t=>t||vb(Ba.precache),getPrefix:()=>Ba.prefix,getRuntimeName:t=>t||vb(Ba.runtime),getSuffix:()=>Ba.suffix};function Z$(t,e){const r=e();return t.waitUntil(r),r}try{self["workbox:precaching:7.0.0"]&&_()}catch{}const YC="__WB_REVISION__";function ZC(t){if(!t)throw new zi("add-to-cache-list-unexpected-type",{entry:t});if(typeof t=="string"){const a=new URL(t,location.href);return{cacheKey:a.href,url:a.href}}const{revision:e,url:r}=t;if(!r)throw new zi("add-to-cache-list-unexpected-type",{entry:t});if(!e){const a=new URL(r,location.href);return{cacheKey:a.href,url:a.href}}const n=new URL(r,location.href),i=new URL(r,location.href);return n.searchParams.set(YC,e),{cacheKey:n.href,url:i.href}}class XC{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:r})=>{r&&(r.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:r,cachedResponse:n})=>{if(e.type==="install"&&r&&r.originalRequest&&r.originalRequest instanceof Request){const i=r.originalRequest.url;n?this.notUpdatedURLs.push(i):this.updatedURLs.push(i)}return n}}}class QC{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:r,params:n})=>{const i=n?.cacheKey||this._precacheController.getCacheKeyForURL(r.url);return i?new Request(i,{headers:r.headers}):r},this._precacheController=e}}let Ih;function JC(){if(Ih===void 0){const t=new Response("");if("body"in t)try{new Response(t.body),Ih=!0}catch{Ih=!1}Ih=!1}return Ih}async function e4(t,e){let r=null;if(t.url&&(r=new URL(t.url).origin),r!==self.location.origin)throw new zi("cross-origin-copy-response",{origin:r});const n=t.clone(),a={headers:new Headers(n.headers),status:n.status,statusText:n.statusText},o=JC()?n.body:await n.blob();return new Response(o,a)}const t4=t=>new URL(String(t),location.href).href.replace(new RegExp(`^${location.origin}`),"");function X$(t,e){const r=new URL(t);for(const n of e)r.searchParams.delete(n);return r.href}async function r4(t,e,r,n){const i=X$(e.url,r);if(e.url===i)return t.match(e,n);const a=Object.assign(Object.assign({},n),{ignoreSearch:!0}),o=await t.keys(e,a);for(const s of o){const d=X$(s.url,r);if(i===d)return t.match(s,n)}}class n4{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}const i4=new Set;async function o4(){for(const t of i4)await t()}function s4(t){return new Promise(e=>setTimeout(e,t))}try{self["workbox:strategies:7.0.0"]&&_()}catch{}function am(t){return typeof t=="string"?new Request(t):t}class a4{constructor(e,r){this._cacheKeys={},Object.assign(this,r),this.event=r.event,this._strategy=e,this._handlerDeferred=new n4,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const n of this._plugins)this._pluginStateMap.set(n,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:r}=this;let n=am(e);if(n.mode==="navigate"&&r instanceof FetchEvent&&r.preloadResponse){const o=await r.preloadResponse;if(o)return o}const i=this.hasCallback("fetchDidFail")?n.clone():null;try{for(const o of this.iterateCallbacks("requestWillFetch"))n=await o({request:n.clone(),event:r})}catch(o){if(o instanceof Error)throw new zi("plugin-error-request-will-fetch",{thrownErrorMessage:o.message})}const a=n.clone();try{let o;o=await fetch(n,n.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const s of this.iterateCallbacks("fetchDidSucceed"))o=await s({event:r,request:a,response:o});return o}catch(o){throw i&&await this.runCallbacks("fetchDidFail",{error:o,event:r,originalRequest:i.clone(),request:a.clone()}),o}}async fetchAndCachePut(e){const r=await this.fetch(e),n=r.clone();return this.waitUntil(this.cachePut(e,n)),r}async cacheMatch(e){const r=am(e);let n;const{cacheName:i,matchOptions:a}=this._strategy,o=await this.getCacheKey(r,"read"),s=Object.assign(Object.assign({},a),{cacheName:i});n=await caches.match(o,s);for(const d of this.iterateCallbacks("cachedResponseWillBeUsed"))n=await d({cacheName:i,matchOptions:a,cachedResponse:n,request:o,event:this.event})||void 0;return n}async cachePut(e,r){const n=am(e);await s4(0);const i=await this.getCacheKey(n,"write");if(!r)throw new zi("cache-put-with-no-response",{url:t4(i.url)});const a=await this._ensureResponseSafeToCache(r);if(!a)return!1;const{cacheName:o,matchOptions:s}=this._strategy,d=await self.caches.open(o),l=this.hasCallback("cacheDidUpdate"),c=l?await r4(d,i.clone(),["__WB_REVISION__"],s):null;try{await d.put(i,l?a.clone():a)}catch(u){if(u instanceof Error)throw u.name==="QuotaExceededError"&&await o4(),u}for(const u of this.iterateCallbacks("cacheDidUpdate"))await u({cacheName:o,oldResponse:c,newResponse:a.clone(),request:i,event:this.event});return!0}async getCacheKey(e,r){const n=`${e.url} | ${r}`;if(!this._cacheKeys[n]){let i=e;for(const a of this.iterateCallbacks("cacheKeyWillBeUsed"))i=am(await a({mode:r,request:i,event:this.event,params:this.params}));this._cacheKeys[n]=i}return this._cacheKeys[n]}hasCallback(e){for(const r of this._strategy.plugins)if(e in r)return!0;return!1}async runCallbacks(e,r){for(const n of this.iterateCallbacks(e))await n(r)}*iterateCallbacks(e){for(const r of this._strategy.plugins)if(typeof r[e]=="function"){const n=this._pluginStateMap.get(r);yield a=>{const o=Object.assign(Object.assign({},a),{state:n});return r[e](o)}}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let r=e,n=!1;for(const i of this.iterateCallbacks("cacheWillUpdate"))if(r=await i({request:this.request,response:r,event:this.event})||void 0,n=!0,!r)break;return n||r&&r.status!==200&&(r=void 0),r}}class c4{constructor(e={}){this.cacheName=H0.getRuntimeName(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[r]=this.handleAll(e);return r}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const r=e.event,n=typeof e.request=="string"?new Request(e.request):e.request,i="params"in e?e.params:void 0,a=new a4(this,{event:r,request:n,params:i}),o=this._getResponse(a,n,r),s=this._awaitComplete(o,a,n,r);return[o,s]}async _getResponse(e,r,n){await e.runCallbacks("handlerWillStart",{event:n,request:r});let i;try{if(i=await this._handle(r,e),!i||i.type==="error")throw new zi("no-response",{url:r.url})}catch(a){if(a instanceof Error){for(const o of e.iterateCallbacks("handlerDidError"))if(i=await o({error:a,event:n,request:r}),i)break}if(!i)throw a}for(const a of e.iterateCallbacks("handlerWillRespond"))i=await a({event:n,request:r,response:i});return i}async _awaitComplete(e,r,n,i){let a,o;try{a=await e}catch{}try{await r.runCallbacks("handlerDidRespond",{event:i,request:n,response:a}),await r.doneWaiting()}catch(s){s instanceof Error&&(o=s)}if(await r.runCallbacks("handlerDidComplete",{event:i,request:n,response:a,error:o}),r.destroy(),o)throw o}}class ld extends c4{constructor(e={}){e.cacheName=H0.getPrecacheName(e.cacheName),super(e),this._fallbackToNetwork=e.fallbackToNetwork!==!1,this.plugins.push(ld.copyRedirectedCacheableResponsesPlugin)}async _handle(e,r){const n=await r.cacheMatch(e);return n||(r.event&&r.event.type==="install"?await this._handleInstall(e,r):await this._handleFetch(e,r))}async _handleFetch(e,r){let n;const i=r.params||{};if(this._fallbackToNetwork){const a=i.integrity,o=e.integrity,s=!o||o===a;n=await r.fetch(new Request(e,{integrity:e.mode!=="no-cors"?o||a:void 0})),a&&s&&e.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await r.cachePut(e,n.clone()))}else throw new zi("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return n}async _handleInstall(e,r){this._useDefaultCacheabilityPluginIfNeeded();const n=await r.fetch(e);if(!await r.cachePut(e,n.clone()))throw new zi("bad-precaching-response",{url:e.url,status:n.status});return n}_useDefaultCacheabilityPluginIfNeeded(){let e=null,r=0;for(const[n,i]of this.plugins.entries())i!==ld.copyRedirectedCacheableResponsesPlugin&&(i===ld.defaultPrecacheCacheabilityPlugin&&(e=n),i.cacheWillUpdate&&r++);r===0?this.plugins.push(ld.defaultPrecacheCacheabilityPlugin):r>1&&e!==null&&this.plugins.splice(e,1)}}ld.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:t}){return!t||t.status>=400?null:t}};ld.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:t}){return t.redirected?await e4(t):t}};class d4{constructor({cacheName:e,plugins:r=[],fallbackToNetwork:n=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new ld({cacheName:H0.getPrecacheName(e),plugins:[...r,new QC({precacheController:this})],fallbackToNetwork:n}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){const r=[];for(const n of e){typeof n=="string"?r.push(n):n&&n.revision===void 0&&r.push(n.url);const{cacheKey:i,url:a}=ZC(n),o=typeof n!="string"&&n.revision?"reload":"default";if(this._urlsToCacheKeys.has(a)&&this._urlsToCacheKeys.get(a)!==i)throw new zi("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(a),secondEntry:i});if(typeof n!="string"&&n.integrity){if(this._cacheKeysToIntegrities.has(i)&&this._cacheKeysToIntegrities.get(i)!==n.integrity)throw new zi("add-to-cache-list-conflicting-integrities",{url:a});this._cacheKeysToIntegrities.set(i,n.integrity)}if(this._urlsToCacheKeys.set(a,i),this._urlsToCacheModes.set(a,o),r.length>0){const s=`Workbox is precaching URLs without revision info: ${r.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(s)}}}install(e){return Z$(e,async()=>{const r=new XC;this.strategy.plugins.push(r);for(const[a,o]of this._urlsToCacheKeys){const s=this._cacheKeysToIntegrities.get(o),d=this._urlsToCacheModes.get(a),l=new Request(a,{integrity:s,cache:d,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:o},request:l,event:e}))}const{updatedURLs:n,notUpdatedURLs:i}=r;return{updatedURLs:n,notUpdatedURLs:i}})}activate(e){return Z$(e,async()=>{const r=await self.caches.open(this.strategy.cacheName),n=await r.keys(),i=new Set(this._urlsToCacheKeys.values()),a=[];for(const o of n)i.has(o.url)||(await r.delete(o),a.push(o.url));return{deletedURLs:a}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){const r=new URL(e,location.href);return this._urlsToCacheKeys.get(r.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){const r=e instanceof Request?e.url:e,n=this.getCacheKeyForURL(r);if(n)return(await self.caches.open(this.strategy.cacheName)).match(n)}createHandlerBoundToURL(e){const r=this.getCacheKeyForURL(e);if(!r)throw new zi("non-precached-url",{url:e});return n=>(n.request=new Request(e),n.params=Object.assign({cacheKey:r},n.params),this.strategy.handle(n))}}let _b;const m2=()=>(_b||(_b=new d4),_b);try{self["workbox:routing:7.0.0"]&&_()}catch{}const e3="GET",Dg=t=>t&&typeof t=="object"?t:{handle:t};class lf{constructor(e,r,n=e3){this.handler=Dg(r),this.match=e,this.method=n}setCatchHandler(e){this.catchHandler=Dg(e)}}class l4 extends lf{constructor(e,r,n){const i=({url:a})=>{const o=e.exec(a.href);if(o&&!(a.origin!==location.origin&&o.index!==0))return o.slice(1)};super(i,r,n)}}class u4{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{const{request:r}=e,n=this.handleRequest({request:r,event:e});n&&e.respondWith(n)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&e.data.type==="CACHE_URLS"){const{payload:r}=e.data,n=Promise.all(r.urlsToCache.map(i=>{typeof i=="string"&&(i=[i]);const a=new Request(...i);return this.handleRequest({request:a,event:e})}));e.waitUntil(n),e.ports&&e.ports[0]&&n.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:r}){const n=new URL(e.url,location.href);if(!n.protocol.startsWith("http"))return;const i=n.origin===location.origin,{params:a,route:o}=this.findMatchingRoute({event:r,request:e,sameOrigin:i,url:n});let s=o&&o.handler;const d=e.method;if(!s&&this._defaultHandlerMap.has(d)&&(s=this._defaultHandlerMap.get(d)),!s)return;let l;try{l=s.handle({url:n,request:e,event:r,params:a})}catch(u){l=Promise.reject(u)}const c=o&&o.catchHandler;return l instanceof Promise&&(this._catchHandler||c)&&(l=l.catch(async u=>{if(c)try{return await c.handle({url:n,request:e,event:r,params:a})}catch(h){h instanceof Error&&(u=h)}if(this._catchHandler)return this._catchHandler.handle({url:n,request:e,event:r});throw u})),l}findMatchingRoute({url:e,sameOrigin:r,request:n,event:i}){const a=this._routes.get(n.method)||[];for(const o of a){let s;const d=o.match({url:e,sameOrigin:r,request:n,event:i});if(d)return s=d,(Array.isArray(s)&&s.length===0||d.constructor===Object&&Object.keys(d).length===0||typeof d=="boolean")&&(s=void 0),{route:o,params:s}}return{}}setDefaultHandler(e,r=e3){this._defaultHandlerMap.set(r,Dg(e))}setCatchHandler(e){this._catchHandler=Dg(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new zi("unregister-route-but-not-found-with-method",{method:e.method});const r=this._routes.get(e.method).indexOf(e);if(r>-1)this._routes.get(e.method).splice(r,1);else throw new zi("unregister-route-route-not-registered")}}let kh;const f4=()=>(kh||(kh=new u4,kh.addFetchListener(),kh.addCacheListener()),kh);function t3(t,e,r){let n;if(typeof t=="string"){const a=new URL(t,location.href),o=({url:s})=>s.href===a.href;n=new lf(o,e,r)}else if(t instanceof RegExp)n=new l4(t,e,r);else if(typeof t=="function")n=new lf(t,e,r);else if(t instanceof lf)n=t;else throw new zi("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return f4().registerRoute(n),n}function h4(t,e=[]){for(const r of[...t.searchParams.keys()])e.some(n=>n.test(r))&&t.searchParams.delete(r);return t}function*p4(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:r="index.html",cleanURLs:n=!0,urlManipulation:i}={}){const a=new URL(t,location.href);a.hash="",yield a.href;const o=h4(a,e);if(yield o.href,r&&o.pathname.endsWith("/")){const s=new URL(o.href);s.pathname+=r,yield s.href}if(n){const s=new URL(o.href);s.pathname+=".html",yield s.href}if(i){const s=i({url:a});for(const d of s)yield d.href}}class y4 extends lf{constructor(e,r){const n=({request:i})=>{const a=e.getURLsToCacheKeys();for(const o of p4(i.url,r)){const s=a.get(o);if(s){const d=e.getIntegrityForCacheKey(s);return{cacheKey:s,integrity:d}}}};super(n,e.strategy)}}function m4(t){const e=m2(),r=new y4(e,t);t3(r)}const g4="-precache-",w4=async(t,e=g4)=>{const n=(await self.caches.keys()).filter(i=>i.includes(e)&&i.includes(self.registration.scope)&&i!==t);return await Promise.all(n.map(i=>self.caches.delete(i))),n};function b4(){self.addEventListener("activate",t=>{const e=H0.getPrecacheName();t.waitUntil(w4(e).then(r=>{}))})}function v4(t){return m2().createHandlerBoundToURL(t)}function _4(t){m2().precache(t)}function E4(t,e){_4(t),m4(e)}function S4(){self.addEventListener("activate",()=>self.clients.claim())}class $4 extends lf{constructor(e,{allowlist:r=[/./],denylist:n=[]}={}){super(i=>this._match(i),e),this._allowlist=r,this._denylist=n}_match({url:e,request:r}){if(r&&r.mode!=="navigate")return!1;const n=e.pathname+e.search;for(const i of this._denylist)if(i.test(n))return!1;return!!this._allowlist.some(i=>i.test(n))}}var ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function th(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var T4=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,A4=T4,P4=A4,x4=typeof self=="object"&&self&&self.Object===Object&&self,I4=P4||x4||Function("return this")(),k4=I4,O4=k4,R4=O4.Symbol,r3=R4,Q$=r3,n3=Object.prototype,j4=n3.hasOwnProperty,C4=n3.toString,Oh=Q$?Q$.toStringTag:void 0;function N4(t){var e=j4.call(t,Oh),r=t[Oh];try{t[Oh]=void 0;var n=!0}catch{}var i=C4.call(t);return n&&(e?t[Oh]=r:delete t[Oh]),i}var B4=N4,D4=Object.prototype,M4=D4.toString;function L4(t){return M4.call(t)}var U4=L4,J$=r3,F4=B4,z4=U4,q4="[object Null]",K4="[object Undefined]",eT=J$?J$.toStringTag:void 0;function V4(t){return t==null?t===void 0?K4:q4:eT&&eT in Object(t)?F4(t):z4(t)}var H4=V4;function G4(t,e){return function(r){return t(e(r))}}var W4=G4,Y4=W4,Z4=Y4(Object.getPrototypeOf,Object),X4=Z4;function Q4(t){return t!=null&&typeof t=="object"}var J4=Q4,eN=H4,tN=X4,rN=J4,nN="[object Object]",iN=Function.prototype,oN=Object.prototype,i3=iN.toString,sN=oN.hasOwnProperty,aN=i3.call(Object);function cN(t){if(!rN(t)||eN(t)!=nN)return!1;var e=tN(t);if(e===null)return!0;var r=sN.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&i3.call(r)==aN}var dN=cN;const lN=th(dN);function uN(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),o=a.charCodeAt(0);if(r[o]!==255)throw new TypeError(a+" is ambiguous");r[o]=i}var s=t.length,d=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var f=0,g=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,f++;for(var m=(b-v)*c+1>>>0,w=new Uint8Array(m);v!==b;){for(var S=p[v],T=0,x=m-1;(S!==0||T<g)&&x!==-1;x--,T++)S+=256*w[x]>>>0,w[x]=S%s>>>0,S=S/s>>>0;if(S!==0)throw new Error("Non-zero carry");g=T,v++}for(var I=m-g;I!==m&&w[I]===0;)I++;for(var M=d.repeat(f);I<m;++I)M+=t.charAt(w[I]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var f=0;if(p[f]!==" "){for(var g=0,v=0;p[f]===d;)g++,f++;for(var b=(p.length-f)*l+1>>>0,m=new Uint8Array(b);p[f];){var w=r[p.charCodeAt(f)];if(w===255)return;for(var S=0,T=b-1;(w!==0||S<v)&&T!==-1;T--,S++)w+=s*m[T]>>>0,m[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=S,f++}if(p[f]!==" "){for(var x=b-v;x!==b&&m[x]===0;)x++;for(var I=new Uint8Array(g+(b-x)),M=g;x!==b;)I[M++]=m[x++];return I}}}function y(p){var f=h(p);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:h,decode:y}}var fN=uN,hN=fN;const pN=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},uy=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let yN=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},mN=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return o3(this,e)}},gN=class{constructor(e){this.decoders=e}or(e){return o3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const o3=(t,e)=>new gN({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let wN=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new yN(e,r,n),this.decoder=new mN(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const s3=({name:t,prefix:e,encode:r,decode:n})=>new wN(t,e,r,n),a3=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=hN(r,e);return s3({prefix:t,name:e,encode:n,decode:a=>uy(i(a))})},bN=(t,e,r,n)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;const o=new Uint8Array(a*r/8|0);let s=0,d=0,l=0;for(let c=0;c<a;++c){const u=i[t[c]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|u,s+=r,s>=8&&(s-=8,o[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return o},vN=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let a="",o=0,s=0;for(let d=0;d<t.length;++d)for(s=s<<8|t[d],o+=8;o>r;)o-=r,a+=e[i&s>>o];if(o&&(a+=e[i&s<<r-o]),n)for(;a.length*r&7;)a+="=";return a},bo=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>s3({prefix:e,name:t,encode(i){return vN(i,n,r)},decode(i){return bN(i,n,r,t)}});bo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});bo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const no=bo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});bo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const Eb=new TextEncoder,_N=new TextDecoder;let ft=class P1{static base64UrlToBytes(e){return no.baseDecode(e)}static base64UrlToObject(e){const r=no.baseDecode(e);return P1.bytesToObject(r)}static bytesToBase64Url(e){return no.baseEncode(e)}static bytesToString(e){return _N.decode(e)}static bytesToObject(e){const r=P1.bytesToString(e);return JSON.parse(r)}static objectToBytes(e){const r=JSON.stringify(e);return Eb.encode(r)}static stringToBase64Url(e){const r=Eb.encode(e);return no.baseEncode(r)}static stringToBytes(e){return Eb.encode(e)}};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const Bn=2n**255n-19n,uf=2n**252n+27742317777372353535851937790883648493n,x1=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,I1=0x6666666666666666666666666666666666666666666666666666666666666658n,cm={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:Bn,n:uf,h:8,Gx:x1,Gy:I1},Ii=(t="")=>{throw new Error(t)},c3=t=>typeof t=="string",W0=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Ii("Uint8Array expected"):t,Af=t=>new Uint8Array(t),Pf=(t,e)=>W0(c3(t)?w2(t):Af(t),e),et=(t,e=Bn)=>{let r=t%e;return r>=0n?r:e+r},tT=t=>t instanceof Sd?t:Ii("Point expected");let rT,Sd=class Yu{constructor(e,r,n,i){this.ex=e,this.ey=r,this.ez=n,this.et=i}static fromAffine(e){return new Yu(e.x,e.y,1n,et(e.x*e.y))}static fromHex(e,r=!0){const{d:n}=cm;e=Pf(e,32);const i=e.slice();i[31]=e[31]&-129;const a=b2(i);a===0n||(r&&!(0n<a&&a<Bn)&&Ii("bad y coord 1"),!r&&!(0n<a&&a<2n**256n)&&Ii("bad y coord 2"));const o=et(a*a),s=et(o-1n),d=et(n*o+1n);let{isValid:l,value:c}=SN(s,d);l||Ii("bad y coordinate 3");const u=(c&1n)===1n;return(e[31]&128)!==0!==u&&(c=et(-c)),new Yu(c,a,1n,et(c*a))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:r,ey:n,ez:i}=this,{ex:a,ey:o,ez:s}=tT(e),d=et(r*s),l=et(a*i),c=et(n*s),u=et(o*i);return d===l&&c===u}is0(){return this.equals(sg)}negate(){return new Yu(et(-this.ex),this.ey,this.ez,et(-this.et))}double(){const{ex:e,ey:r,ez:n}=this,{a:i}=cm,a=et(e*e),o=et(r*r),s=et(2n*et(n*n)),d=et(i*a),l=e+r,c=et(et(l*l)-a-o),u=d+o,h=u-s,y=d-o,p=et(c*h),f=et(u*y),g=et(c*y),v=et(h*u);return new Yu(p,f,v,g)}add(e){const{ex:r,ey:n,ez:i,et:a}=this,{ex:o,ey:s,ez:d,et:l}=tT(e),{a:c,d:u}=cm,h=et(r*o),y=et(n*s),p=et(a*u*l),f=et(i*d),g=et((r+n)*(o+s)-h-y),v=et(f-p),b=et(f+p),m=et(y-c*h),w=et(g*v),S=et(b*m),T=et(g*m),x=et(v*b);return new Yu(w,S,x,T)}mul(e,r=!0){if(e===0n)return r===!0?Ii("cannot multiply by 0"):sg;if(typeof e=="bigint"&&0n<e&&e<uf||Ii("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals($d))return jN(e).p;let n=sg,i=$d;for(let a=this;e>0n;a=a.double(),e>>=1n)e&1n?n=n.add(a):r&&(i=i.add(a));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(cm.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(uf/2n,!1).double();return uf%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};const i=u3(n);return et(n*i)!==1n&&Ii("invalid inverse"),{x:et(e*i),y:et(r*i)}}toRawBytes(){const{x:e,y:r}=this.toAffine(),n=l3(r);return n[31]|=e&1n?128:0,n}toHex(){return g2(this.toRawBytes())}};Sd.BASE=new Sd(x1,I1,1n,et(x1*I1));Sd.ZERO=new Sd(0n,1n,1n,0n);const{BASE:$d,ZERO:sg}=Sd,d3=(t,e)=>t.toString(16).padStart(e,"0"),g2=t=>Array.from(t).map(e=>d3(e,2)).join(""),w2=t=>{const e=t.length;(!c3(t)||e%2)&&Ii("hex invalid 1");const r=Af(e/2);for(let n=0;n<r.length;n++){const i=n*2,a=t.slice(i,i+2),o=Number.parseInt(a,16);(Number.isNaN(o)||o<0)&&Ii("hex invalid 2"),r[n]=o}return r},l3=t=>w2(d3(t,32*2)).reverse(),b2=t=>BigInt("0x"+g2(Af(W0(t)).reverse())),Fp=(...t)=>{const e=Af(t.reduce((n,i)=>n+W0(i).length,0));let r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},u3=(t,e=Bn)=>{(t===0n||e<=0n)&&Ii("no inverse n="+t+" mod="+e);let r=et(t,e),n=e,i=0n,a=1n;for(;r!==0n;){const o=n/r,s=n%r,d=i-a*o;n=r,r=s,i=a,a=d}return n===1n?et(i,e):Ii("no inverse")},Ts=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=Bn;return r},EN=t=>{const r=t*t%Bn*t%Bn,n=Ts(r,2n)*r%Bn,i=Ts(n,1n)*t%Bn,a=Ts(i,5n)*i%Bn,o=Ts(a,10n)*a%Bn,s=Ts(o,20n)*o%Bn,d=Ts(s,40n)*s%Bn,l=Ts(d,80n)*d%Bn,c=Ts(l,80n)*d%Bn,u=Ts(c,10n)*a%Bn;return{pow_p_5_8:Ts(u,2n)*t%Bn,b2:r}},nT=19681161376707505956807079304988542015446066515923890162744021073123829784752n,SN=(t,e)=>{const r=et(e*e*e),n=et(r*r*e),i=EN(t*n).pow_p_5_8;let a=et(t*r*i);const o=et(e*a*a),s=a,d=et(a*nT),l=o===t,c=o===et(-t),u=o===et(-t*nT);return l&&(a=s),(c||u)&&(a=d),(et(a)&1n)===1n&&(a=et(-a)),{isValid:l||c,value:a}},Mg=t=>et(b2(t),uf);let vp;const v2=(...t)=>E2.sha512Async(...t),$N=(...t)=>typeof vp=="function"?vp(...t):Ii("etc.sha512Sync not set"),f3=t=>{const e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const r=t.slice(32,64),n=Mg(e),i=$d.mul(n),a=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:a}},_2=t=>v2(Pf(t,32)).then(f3),TN=t=>f3($N(Pf(t,32))),AN=t=>_2(t).then(e=>e.pointBytes);function h3(t,e){return v2(e.hashable).then(e.finish)}const PN=(t,e,r)=>{const{pointBytes:n,scalar:i}=t,a=Mg(e),o=$d.mul(a).toRawBytes();return{hashable:Fp(o,n,r),finish:l=>{const c=et(a+Mg(l)*i,uf);return W0(Fp(o,l3(c)),64)}}},xN=async(t,e)=>{const r=Pf(t),n=await _2(e),i=await v2(n.prefix,r);return h3(!0,PN(n,i,r))},IN=(t,e,r)=>{e=Pf(e),t=Pf(t,64);const n=Sd.fromHex(r,!1),i=Sd.fromHex(t.slice(0,32),!1),a=b2(t.slice(32,64)),o=$d.mul(a,!1);return{hashable:Fp(i.toRawBytes(),n.toRawBytes(),e),finish:l=>{const c=Mg(l);return i.add(n.mul(c,!1)).add(o.negate()).clearCofactor().is0()}}},kN=async(t,e,r)=>h3(!0,IN(t,e,r)),iT=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,E2={bytesToHex:g2,hexToBytes:w2,concatBytes:Fp,mod:et,invert:u3,randomBytes:t=>{const e=iT();return e||Ii("crypto.getRandomValues must be defined"),e.getRandomValues(Af(t))},sha512Async:async(...t)=>{const e=iT();e||Ii("crypto.subtle or etc.sha512Async must be defined");const r=Fp(...t);return Af(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(E2,{sha512Sync:{configurable:!1,get(){return vp},set(t){vp||(vp=t)}}});const ON={getExtendedPublicKeyAsync:_2,getExtendedPublicKey:TN,randomPrivateKey:()=>E2.randomBytes(32),precompute(t=8,e=$d){return e.multiply(3n),e}},pl=8,RN=()=>{const t=[],e=256/pl+1;let r=$d,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let a=1;a<2**(pl-1);a++)n=n.add(r),t.push(n);r=n.double()}return t},jN=t=>{const e=rT||(rT=RN()),r=(c,u)=>{let h=u.negate();return c?h:u};let n=sg,i=$d;const a=1+256/pl,o=2**(pl-1),s=BigInt(2**pl-1),d=2**pl,l=BigInt(pl);for(let c=0;c<a;c++){const u=c*o;let h=Number(t&s);t>>=l,h>o&&(h-=d,t+=1n);const y=u,p=u+Math.abs(h)-1,f=c%2!==0,g=h<0;h===0?i=i.add(r(f,e[y])):n=n.add(r(g,e[p]))}return{p:n,f:i}};class Pe extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DwnError"}}var Te;(function(t){t.AuthenticateJwsMissing="AuthenticateJwsMissing",t.AuthenticateDescriptorCidMismatch="AuthenticateDescriptorCidMismatch",t.AuthenticationMoreThanOneSignatureNotSupported="AuthenticationMoreThanOneSignatureNotSupported",t.AuthorizationNotGrantedToAuthor="AuthorizationNotGrantedToAuthor",t.ComputeCidCodecNotSupported="ComputeCidCodecNotSupported",t.ComputeCidMultihashNotSupported="ComputeCidMultihashNotSupported",t.Ed25519InvalidJwk="Ed25519InvalidJwk",t.EventEmitterStreamNotOpenError="EventEmitterStreamNotOpenError",t.MessagesGrantAuthorizationMismatchedProtocol="EventsGrantAuthorizationMismatchedProtocol",t.MessagesSubscribeAuthorizationFailed="MessagesSubscribeAuthorizationFailed",t.MessagesSubscribeEventStreamUnimplemented="MessagesSubscribeEventStreamUnimplemented",t.GeneralJwsVerifierGetPublicKeyNotFound="GeneralJwsVerifierGetPublicKeyNotFound",t.GeneralJwsVerifierInvalidSignature="GeneralJwsVerifierInvalidSignature",t.GrantAuthorizationGrantExpired="GrantAuthorizationGrantExpired",t.GrantAuthorizationGrantMissing="GrantAuthorizationGrantMissing",t.GrantAuthorizationGrantRevoked="GrantAuthorizationGrantRevoked",t.GrantAuthorizationInterfaceMismatch="GrantAuthorizationInterfaceMismatch",t.GrantAuthorizationMethodMismatch="GrantAuthorizationMethodMismatch",t.GrantAuthorizationNotGrantedForTenant="GrantAuthorizationNotGrantedForTenant",t.GrantAuthorizationNotGrantedToAuthor="GrantAuthorizationNotGrantedToAuthor",t.GrantAuthorizationGrantNotYetActive="GrantAuthorizationGrantNotYetActive",t.HdKeyDerivationPathInvalid="HdKeyDerivationPathInvalid",t.JwsVerifySignatureUnsupportedCrv="JwsVerifySignatureUnsupportedCrv",t.IndexInvalidCursorValueType="IndexInvalidCursorValueType",t.IndexInvalidCursorSortProperty="IndexInvalidCursorSortProperty",t.IndexInvalidSortPropertyInMemory="IndexInvalidSortPropertyInMemory",t.IndexMissingIndexableProperty="IndexMissingIndexableProperty",t.JwsDecodePlainObjectPayloadInvalid="JwsDecodePlainObjectPayloadInvalid",t.MessagesReadInvalidCid="MessagesReadInvalidCid",t.MessagesReadAuthorizationFailed="MessagesReadAuthorizationFailed",t.MessageGetInvalidCid="MessageGetInvalidCid",t.MessagesQueryAuthorizationFailed="MessagesQueryAuthorizationFailed",t.MessagesReadVerifyScopeFailed="MessagesReadVerifyScopeFailed",t.ParseCidCodecNotSupported="ParseCidCodecNotSupported",t.ParseCidMultihashNotSupported="ParseCidMultihashNotSupported",t.PermissionsProtocolCreateGrantRecordsScopeMissingProtocol="PermissionsProtocolCreateGrantRecordsScopeMissingProtocol",t.PermissionsProtocolCreateRequestRecordsScopeMissingProtocol="PermissionsProtocolCreateRequestRecordsScopeMissingProtocol",t.PermissionsProtocolGetScopeInvalidProtocol="PermissionsProtocolGetScopeInvalidProtocol",t.PermissionsProtocolValidateSchemaUnexpectedRecord="PermissionsProtocolValidateSchemaUnexpectedRecord",t.PermissionsProtocolValidateScopeContextIdProhibitedProperties="PermissionsProtocolValidateScopeContextIdProhibitedProperties",t.PermissionsProtocolValidateScopeProtocolMismatch="PermissionsProtocolValidateScopeProtocolMismatch",t.PermissionsProtocolValidateScopeMissingProtocolTag="PermissionsProtocolValidateScopeMissingProtocolTag",t.PermissionsProtocolValidateRevocationProtocolTagMismatch="PermissionsProtocolValidateRevocationProtocolTagMismatch",t.PrivateKeySignerUnableToDeduceAlgorithm="PrivateKeySignerUnableToDeduceAlgorithm",t.PrivateKeySignerUnableToDeduceKeyId="PrivateKeySignerUnableToDeduceKeyId",t.PrivateKeySignerUnsupportedCurve="PrivateKeySignerUnsupportedCurve",t.ProtocolAuthorizationActionNotAllowed="ProtocolAuthorizationActionNotAllowed",t.ProtocolAuthorizationActionRulesNotFound="ProtocolAuthorizationActionRulesNotFound",t.ProtocolAuthorizationIncorrectDataFormat="ProtocolAuthorizationIncorrectDataFormat",t.ProtocolAuthorizationIncorrectContextId="ProtocolAuthorizationIncorrectContextId",t.ProtocolAuthorizationIncorrectProtocolPath="ProtocolAuthorizationIncorrectProtocolPath",t.ProtocolAuthorizationDuplicateRoleRecipient="ProtocolAuthorizationDuplicateRoleRecipient",t.ProtocolAuthorizationInvalidSchema="ProtocolAuthorizationInvalidSchema",t.ProtocolAuthorizationInvalidType="ProtocolAuthorizationInvalidType",t.ProtocolAuthorizationMatchingRoleRecordNotFound="ProtocolAuthorizationMatchingRoleRecordNotFound",t.ProtocolAuthorizationMaxSizeInvalid="ProtocolAuthorizationMaxSizeInvalid",t.ProtocolAuthorizationMinSizeInvalid="ProtocolAuthorizationMinSizeInvalid",t.ProtocolAuthorizationMissingContextId="ProtocolAuthorizationMissingContextId",t.ProtocolAuthorizationMissingRuleSet="ProtocolAuthorizationMissingRuleSet",t.ProtocolAuthorizationParentlessIncorrectProtocolPath="ProtocolAuthorizationParentlessIncorrectProtocolPath",t.ProtocolAuthorizationNotARole="ProtocolAuthorizationNotARole",t.ProtocolAuthorizationParentNotFoundConstructingRecordChain="ProtocolAuthorizationParentNotFoundConstructingRecordChain",t.ProtocolAuthorizationProtocolNotFound="ProtocolAuthorizationProtocolNotFound",t.ProtocolAuthorizationRoleMissingRecipient="ProtocolAuthorizationRoleMissingRecipient",t.ProtocolAuthorizationTagsInvalidSchema="ProtocolAuthorizationTagsInvalidSchema",t.ProtocolsConfigureAuthorizationFailed="ProtocolsConfigureAuthorizationFailed",t.ProtocolsConfigureDuplicateActorInRuleSet="ProtocolsConfigureDuplicateActorInRuleSet",t.ProtocolsConfigureDuplicateRoleInRuleSet="ProtocolsConfigureDuplicateRoleInRuleSet",t.ProtocolsConfigureInvalidSize="ProtocolsConfigureInvalidSize",t.ProtocolsConfigureInvalidActionMissingOf="ProtocolsConfigureInvalidActionMissingOf",t.ProtocolsConfigureInvalidActionOfNotAllowed="ProtocolsConfigureInvalidActionOfNotAllowed",t.ProtocolsConfigureInvalidActionDeleteWithoutCreate="ProtocolsConfigureInvalidActionDeleteWithoutCreate",t.ProtocolsConfigureInvalidActionUpdateWithoutCreate="ProtocolsConfigureInvalidActionUpdateWithoutCreate",t.ProtocolsConfigureInvalidRecipientOfAction="ProtocolsConfigureInvalidRecipientOfAction",t.ProtocolsConfigureInvalidRuleSetRecordType="ProtocolsConfigureInvalidRuleSetRecordType",t.ProtocolsConfigureInvalidTagSchema="ProtocolsConfigureInvalidTagSchema",t.ProtocolsConfigureRecordNestingDepthExceeded="ProtocolsConfigureRecordNestingDepthExceeded",t.ProtocolsConfigureRoleDoesNotExistAtGivenPath="ProtocolsConfigureRoleDoesNotExistAtGivenPath",t.ProtocolsGrantAuthorizationQueryProtocolScopeMismatch="ProtocolsGrantAuthorizationQueryProtocolScopeMismatch",t.ProtocolsGrantAuthorizationScopeProtocolMismatch="ProtocolsGrantAuthorizationScopeProtocolMismatch",t.ProtocolsQueryUnauthorized="ProtocolsQueryUnauthorized",t.RecordsAuthorDelegatedGrantAndIdExistenceMismatch="RecordsAuthorDelegatedGrantAndIdExistenceMismatch",t.RecordsAuthorDelegatedGrantCidMismatch="RecordsAuthorDelegatedGrantCidMismatch",t.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",t.RecordsAuthorDelegatedGrantNotADelegatedGrant="RecordsAuthorDelegatedGrantNotADelegatedGrant",t.RecordsDecryptNoMatchingKeyEncryptedFound="RecordsDecryptNoMatchingKeyEncryptedFound",t.RecordsDeleteAuthorizationFailed="RecordsDeleteAuthorizationFailed",t.RecordsQueryCreateFilterPublishedSortInvalid="RecordsQueryCreateFilterPublishedSortInvalid",t.RecordsQueryParseFilterPublishedSortInvalid="RecordsQueryParseFilterPublishedSortInvalid",t.RecordsGrantAuthorizationConditionPublicationProhibited="RecordsGrantAuthorizationConditionPublicationProhibited",t.RecordsGrantAuthorizationConditionPublicationRequired="RecordsGrantAuthorizationConditionPublicationRequired",t.RecordsGrantAuthorizationDeleteProtocolScopeMismatch="RecordsGrantAuthorizationDeleteProtocolScopeMismatch",t.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch="RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",t.RecordsGrantAuthorizationScopeContextIdMismatch="RecordsGrantAuthorizationScopeContextIdMismatch",t.RecordsGrantAuthorizationScopeProtocolMismatch="RecordsGrantAuthorizationScopeProtocolMismatch",t.RecordsGrantAuthorizationScopeProtocolPathMismatch="RecordsGrantAuthorizationScopeProtocolPathMismatch",t.RecordsDerivePrivateKeyUnSupportedCurve="RecordsDerivePrivateKeyUnSupportedCurve",t.RecordsInvalidAncestorKeyDerivationSegment="RecordsInvalidAncestorKeyDerivationSegment",t.RecordsOwnerDelegatedGrantAndIdExistenceMismatch="RecordsOwnerDelegatedGrantAndIdExistenceMismatch",t.RecordsOwnerDelegatedGrantCidMismatch="RecordsOwnerDelegatedGrantCidMismatch",t.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",t.RecordsOwnerDelegatedGrantNotADelegatedGrant="RecordsOwnerDelegatedGrantNotADelegatedGrant",t.RecordsProtocolContextDerivationSchemeMissingContextId="RecordsProtocolContextDerivationSchemeMissingContextId",t.RecordsProtocolPathDerivationSchemeMissingProtocol="RecordsProtocolPathDerivationSchemeMissingProtocol",t.RecordsQueryFilterMissingRequiredProperties="RecordsQueryFilterMissingRequiredProperties",t.RecordsReadReturnedMultiple="RecordsReadReturnedMultiple",t.RecordsReadAuthorizationFailed="RecordsReadAuthorizationFailed",t.RecordsSubscribeEventStreamUnimplemented="RecordsSubscribeEventStreamUnimplemented",t.RecordsSubscribeFilterMissingRequiredProperties="RecordsSubscribeFilterMissingRequiredProperties",t.RecordsSchemasDerivationSchemeMissingSchema="RecordsSchemasDerivationSchemeMissingSchema",t.RecordsWriteAttestationIntegrityMoreThanOneSignature="RecordsWriteAttestationIntegrityMoreThanOneSignature",t.RecordsWriteAttestationIntegrityDescriptorCidMismatch="RecordsWriteAttestationIntegrityDescriptorCidMismatch",t.RecordsWriteAttestationIntegrityInvalidPayloadProperty="RecordsWriteAttestationIntegrityInvalidPayloadProperty",t.RecordsWriteAuthorizationFailed="RecordsWriteAuthorizationFailed",t.RecordsWriteCreateMissingSigner="RecordsWriteCreateMissingSigner",t.RecordsWriteCreateDataAndDataCidMutuallyExclusive="RecordsWriteCreateDataAndDataCidMutuallyExclusive",t.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive="RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive",t.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive="RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive",t.RecordsWriteDataCidMismatch="RecordsWriteDataCidMismatch",t.RecordsWriteDataSizeMismatch="RecordsWriteDataSizeMismatch",t.RecordsWriteGetEntryIdUndefinedAuthor="RecordsWriteGetEntryIdUndefinedAuthor",t.RecordsWriteGetNewestWriteRecordNotFound="RecordsWriteGetNewestWriteRecordNotFound",t.RecordsWriteGetInitialWriteNotFound="RecordsWriteGetInitialWriteNotFound",t.RecordsWriteImmutablePropertyChanged="RecordsWriteImmutablePropertyChanged",t.RecordsWriteMissingSigner="RecordsWriteMissingSigner",t.RecordsWriteMissingDataInPrevious="RecordsWriteMissingDataInPrevious",t.RecordsWriteMissingEncodedDataInPrevious="RecordsWriteMissingEncodedDataInPrevious",t.RecordsWriteMissingProtocol="RecordsWriteMissingProtocol",t.RecordsWriteMissingSchema="RecordsWriteMissingSchema",t.RecordsWriteNotAllowedAfterDelete="RecordsWriteNotAllowedAfterDelete",t.RecordsWriteOwnerAndTenantMismatch="RecordsWriteOwnerAndTenantMismatch",t.RecordsWriteSignAsOwnerDelegateUnknownAuthor="RecordsWriteSignAsOwnerDelegateUnknownAuthor",t.RecordsWriteSignAsOwnerUnknownAuthor="RecordsWriteSignAsOwnerUnknownAuthor",t.RecordsWriteValidateIntegrityAttestationMismatch="RecordsWriteValidateIntegrityAttestationMismatch",t.RecordsWriteValidateIntegrityContextIdMismatch="RecordsWriteValidateIntegrityContextIdMismatch",t.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload="RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",t.RecordsWriteValidateIntegrityDateCreatedMismatch="RecordsWriteValidateIntegrityDateCreatedMismatch",t.RecordsWriteValidateIntegrityEncryptionCidMismatch="RecordsWriteValidateIntegrityEncryptionCidMismatch",t.RecordsWriteValidateIntegrityRecordIdUnauthorized="RecordsWriteValidateIntegrityRecordIdUnauthorized",t.SchemaValidatorAdditionalPropertyNotAllowed="SchemaValidatorAdditionalPropertyNotAllowed",t.SchemaValidatorFailure="SchemaValidatorFailure",t.SchemaValidatorSchemaNotFound="SchemaValidatorSchemaNotFound",t.SchemaValidatorUnevaluatedPropertyNotAllowed="SchemaValidatorUnevaluatedPropertyNotAllowed",t.Secp256k1KeyNotValid="Secp256k1KeyNotValid",t.Secp256r1KeyNotValid="Secp256r1KeyNotValid",t.TimestampInvalid="TimestampInvalid",t.UrlProtocolNotNormalized="UrlProtocolNotNormalized",t.UrlProtocolNotNormalizable="UrlProtocolNotNormalizable",t.UrlSchemaNotNormalized="UrlSchemaNotNormalized"})(Te||(Te={}));var dm=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};function oT(t){if(t.kty!=="OKP"||t.crv!=="Ed25519")throw new Pe(Te.Ed25519InvalidJwk,"invalid jwk. kty MUST be OKP. crv MUST be Ed25519")}function sT(t){return{alg:"EdDSA",kty:"OKP",crv:"Ed25519",x:ft.bytesToBase64Url(t)}}const CN={sign:(t,e)=>dm(void 0,void 0,void 0,function*(){oT(e);const r=ft.base64UrlToBytes(e.d);return xN(t,r)}),verify:(t,e,r)=>dm(void 0,void 0,void 0,function*(){oT(r);const n=ft.base64UrlToBytes(r.x);return kN(e,t,n)}),generateKeyPair:()=>dm(void 0,void 0,void 0,function*(){const t=ON.randomPrivateKey(),e=yield AN(t),r=ft.bytesToBase64Url(t),n=sT(e),i=Object.assign(Object.assign({},n),{d:r});return{publicJwk:n,privateJwk:i}}),publicKeyToJwk:t=>dm(void 0,void 0,void 0,function*(){return sT(t)})};/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const S2=2n**256n,gd=S2-0x1000003d1n,dn=S2-0x14551231950b75fc4402da1732fc9bebfn,p3=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,y3=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,m3={p:gd,n:dn,a:0n,b:7n,Gx:p3,Gy:y3},wi=32,aT=t=>Me(Me(t*t)*t+m3.b),yr=(t="")=>{throw new Error(t)},Y0=t=>typeof t=="bigint",g3=t=>typeof t=="string",Sb=t=>Y0(t)&&0n<t&&t<gd,zp=t=>Y0(t)&&0n<t&&t<dn,w3=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?yr("Uint8Array expected"):t,zs=t=>new Uint8Array(t),nc=(t,e)=>w3(g3(t)?fy(t):zs(t),e),Me=(t,e=gd)=>{let r=t%e;return r>=0n?r:e+r},cT=t=>t instanceof En?t:yr("Point expected");let dT;class En{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new En(e.x,e.y,1n)}static fromHex(e){e=nc(e);let r;const n=e[0],i=e.subarray(1),a=Lg(i,0,wi),o=e.length;if(o===33&&[2,3].includes(n)){Sb(a)||yr("Point hex invalid: x not FE");let s=NN(aT(a));const d=(s&1n)===1n;(n&1)===1!==d&&(s=Me(-s)),r=new En(a,s,1n)}return o===65&&n===4&&(r=new En(a,Lg(i,wi,2*wi),1n)),r?r.ok():yr("Point is not on curve")}static fromPrivateKey(e){return Ya.mul(Ug(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){const{px:r,py:n,pz:i}=this,{px:a,py:o,pz:s}=cT(e),d=Me(r*s),l=Me(a*i),c=Me(n*s),u=Me(o*i);return d===l&&c===u}negate(){return new En(this.px,Me(-this.py),this.pz)}double(){return this.add(this)}add(e){const{px:r,py:n,pz:i}=this,{px:a,py:o,pz:s}=cT(e),{a:d,b:l}=m3;let c=0n,u=0n,h=0n;const y=Me(l*3n);let p=Me(r*a),f=Me(n*o),g=Me(i*s),v=Me(r+n),b=Me(a+o);v=Me(v*b),b=Me(p+f),v=Me(v-b),b=Me(r+i);let m=Me(a+s);return b=Me(b*m),m=Me(p+g),b=Me(b-m),m=Me(n+i),c=Me(o+s),m=Me(m*c),c=Me(f+g),m=Me(m-c),h=Me(d*b),c=Me(y*g),h=Me(c+h),c=Me(f-h),h=Me(f+h),u=Me(c*h),f=Me(p+p),f=Me(f+p),g=Me(d*g),b=Me(y*b),f=Me(f+g),g=Me(p-g),g=Me(d*g),b=Me(b+g),p=Me(f*b),u=Me(u+p),p=Me(m*b),c=Me(v*c),c=Me(c-p),p=Me(v*f),h=Me(m*h),h=Me(h+p),new En(c,u,h)}mul(e,r=!0){if(!r&&e===0n)return ag;if(zp(e)||yr("invalid scalar"),this.equals(Ya))return zN(e).p;let n=ag,i=Ya;for(let a=this;e>0n;a=a.double(),e>>=1n)e&1n?n=n.add(a):r&&(i=i.add(a));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){const{px:e,py:r,pz:n}=this;if(this.equals(ag))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};const i=py(n);return Me(n*i)!==1n&&yr("invalid inverse"),{x:Me(e*i),y:Me(r*i)}}assertValidity(){const{x:e,y:r}=this.aff();return(!Sb(e)||!Sb(r))&&yr("Point invalid: x or y"),Me(r*r)===aT(e)?this:yr("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){const{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+_p(r)+(e?"":_p(n))}toRawBytes(e=!0){return fy(this.toHex(e))}}En.BASE=new En(p3,y3,1n);En.ZERO=new En(0n,1n,0n);const{BASE:Ya,ZERO:ag}=En,b3=(t,e)=>t.toString(16).padStart(e,"0"),$2=t=>Array.from(t).map(e=>b3(e,2)).join(""),fy=t=>{const e=t.length;(!g3(t)||e%2)&&yr("hex invalid 1");const r=zs(e/2);for(let n=0;n<r.length;n++){const i=n*2,a=t.slice(i,i+2),o=Number.parseInt(a,16);(Number.isNaN(o)||o<0)&&yr("hex invalid 2"),r[n]=o}return r},hy=t=>BigInt("0x"+($2(t)||"0")),Lg=(t,e,r)=>hy(t.slice(e,r)),Z0=t=>Y0(t)&&t>=0n&&t<S2?fy(b3(t,2*wi)):yr("bigint expected"),_p=t=>$2(Z0(t)),k1=(...t)=>{const e=zs(t.reduce((n,i)=>n+w3(i).length,0));let r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},py=(t,e=gd)=>{(t===0n||e<=0n)&&yr("no inverse n="+t+" mod="+e);let r=Me(t,e),n=e,i=0n,a=1n;for(;r!==0n;){const o=n/r,s=n%r,d=i-a*o;n=r,r=s,i=a,a=d}return n===1n?Me(i,e):yr("no inverse")},NN=t=>{let e=1n;for(let r=t,n=(gd+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%gd),r=r*r%gd;return Me(e*e)===t?e:yr("sqrt invalid")},Ug=t=>(Y0(t)||(t=hy(nc(t,wi))),zp(t)?t:yr("private key out of range")),T2=t=>t>dn>>1n;function $b(t,e=!0){return En.fromPrivateKey(t).toRawBytes(e)}class xf{constructor(e,r,n){this.r=e,this.s=r,this.recovery=n,this.assertValidity()}static fromCompact(e){return e=nc(e,64),new xf(Lg(e,0,wi),Lg(e,wi,2*wi))}assertValidity(){return zp(this.r)&&zp(this.s)?this:yr()}addRecoveryBit(e){return new xf(this.r,this.s,e)}hasHighS(){return T2(this.s)}recoverPublicKey(e){const{r,s:n,recovery:i}=this;[0,1,2,3].includes(i)||yr("recovery id invalid");const a=A2(nc(e,32)),o=i===2||i===3?r+dn:r;o>=gd&&yr("q.x invalid");const s=i&1?"03":"02",d=En.fromHex(s+_p(o)),l=py(o,dn),c=Me(-a*l,dn),u=Me(n*l,dn);return Ya.mulAddQUns(d,c,u)}toCompactRawBytes(){return fy(this.toCompactHex())}toCompactHex(){return _p(this.r)+_p(this.s)}}const v3=t=>{const e=t.length*8-256,r=hy(t);return e>0?r>>BigInt(e):r},A2=t=>Me(v3(t),dn),lT=t=>Z0(t),uT=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let cg;const _3={lowS:!0},BN={lowS:!0};function DN(t,e,r=_3){["der","recovered","canonical"].some(u=>u in r)&&yr("sign() legacy options not supported");let{lowS:n}=r;n==null&&(n=!0);const i=A2(nc(t)),a=lT(i),o=Ug(e),s=[lT(o),a];let d=r.extraEntropy;if(d){d===!0&&(d=If.randomBytes(wi));const u=nc(d);u.length!==wi&&yr(),s.push(u)}const l=i,c=u=>{const h=v3(u);if(!zp(h))return;const y=py(h,dn),p=Ya.mul(h).aff(),f=Me(p.x,dn);if(f===0n)return;const g=Me(y*Me(l+Me(o*f,dn),dn),dn);if(g===0n)return;let v=g,b=(p.x===f?0:2)|Number(p.y&1n);return n&&T2(g)&&(v=Me(-g,dn),b^=1),new xf(f,v,b)};return{seed:k1(...s),k2sig:c}}function MN(t){let e=zs(wi),r=zs(wi),n=0;const i=()=>{e.fill(1),r.fill(0),n=0},a="drbg: tried 1000 values";{const o=(...l)=>If.hmacSha256Async(r,e,...l),s=async(l=zs())=>{r=await o(zs([0]),l),e=await o(),l.length!==0&&(r=await o(zs([1]),l),e=await o())},d=async()=>(n++>=1e3&&yr(a),e=await o(),e);return async(l,c)=>{i(),await s(l);let u;for(;!(u=c(await d()));)await s();return i(),u}}}async function LN(t,e,r=_3){const{seed:n,k2sig:i}=DN(t,e,r);return MN()(n,i)}function UN(t,e,r,n=BN){let{lowS:i}=n;i==null&&(i=!0),"strict"in n&&yr("verify() legacy options not supported");let a,o,s;const d=t&&typeof t=="object"&&"r"in t;!d&&nc(t).length!==2*wi&&yr("signature must be 64 bytes");try{a=d?new xf(t.r,t.s).assertValidity():xf.fromCompact(t),o=A2(nc(e,wi)),s=r instanceof En?r.ok():En.fromHex(r)}catch{return!1}if(!a)return!1;const{r:l,s:c}=a;if(i&&T2(c))return!1;let u;try{const y=py(c,dn),p=Me(o*y,dn),f=Me(l*y,dn);u=Ya.mulAddQUns(s,p,f).aff()}catch{return!1}return u?Me(u.x,dn)===l:!1}function E3(t){t=nc(t);const e=wi+8;(t.length<e||t.length>1024)&&yr("expected proper params");const r=Me(hy(t),dn-1n)+1n;return Z0(r)}const If={hexToBytes:fy,bytesToHex:$2,concatBytes:k1,bytesToNumberBE:hy,numberToBytesBE:Z0,mod:Me,invert:py,hmacSha256Async:async(t,...e)=>{const r=uT();if(!r)return yr("etc.hmacSha256Async not set");const n=r.subtle,i=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return zs(await n.sign("HMAC",i,k1(...e)))},hmacSha256Sync:cg,hashToPrivateKey:E3,randomBytes:t=>{const e=uT();return e||yr("crypto.getRandomValues must be defined"),e.getRandomValues(zs(t))}},fT={normPrivateKeyToScalar:Ug,isValidPrivateKey:t=>{try{return!!Ug(t)}catch{return!1}},randomPrivateKey:()=>E3(If.randomBytes(wi+8)),precompute(t=8,e=Ya){return e.multiply(3n),e}};Object.defineProperties(If,{hmacSha256Sync:{configurable:!1,get(){return cg},set(t){cg||(cg=t)}}});const yl=8,FN=()=>{const t=[],e=256/yl+1;let r=Ya,n=r;for(let i=0;i<e;i++){n=r,t.push(n);for(let a=1;a<2**(yl-1);a++)n=n.add(r),t.push(n);r=n.double()}return t},zN=t=>{const e=dT||(dT=FN()),r=(c,u)=>{let h=u.negate();return c?h:u};let n=ag,i=Ya;const a=1+256/yl,o=2**(yl-1),s=BigInt(2**yl-1),d=2**yl,l=BigInt(yl);for(let c=0;c<a;c++){const u=c*o;let h=Number(t&s);t>>=l,h>o&&(h-=d,t+=1n);const y=u,p=u+Math.abs(h)-1,f=c%2!==0,g=h<0;h===0?i=i.add(r(f,e[y])):n=n.add(r(g,e[p]))}return{p:n,f:i}};var qN=S3,hT=128,KN=127,VN=~KN,HN=Math.pow(2,31);function S3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=HN;)e[r++]=t&255|hT,t/=128;for(;t&VN;)e[r++]=t&255|hT,t>>>=7;return e[r]=t|0,S3.bytes=r-n+1,e}var GN=O1,WN=128,pT=127;function O1(t,n){var r=0,n=n||0,i=0,a=n,o,s=t.length;do{if(a>=s)throw O1.bytes=0,new RangeError("Could not decode varint");o=t[a++],r+=i<28?(o&pT)<<i:(o&pT)*Math.pow(2,i),i+=7}while(o>=WN);return O1.bytes=a-n,r}var YN=Math.pow(2,7),ZN=Math.pow(2,14),XN=Math.pow(2,21),QN=Math.pow(2,28),JN=Math.pow(2,35),eB=Math.pow(2,42),tB=Math.pow(2,49),rB=Math.pow(2,56),nB=Math.pow(2,63),iB=function(t){return t<YN?1:t<ZN?2:t<XN?3:t<QN?4:t<JN?5:t<eB?6:t<tB?7:t<rB?8:t<nB?9:10},oB={encode:qN,decode:GN,encodingLength:iB},Fg=oB;const qp=(t,e=0)=>[Fg.decode(t,e),Fg.decode.bytes],Kp=(t,e,r=0)=>(Fg.encode(t,e,r),e),Vp=t=>Fg.encodingLength(t),R1=(t,e)=>{const r=e.byteLength,n=Vp(t),i=n+Vp(r),a=new Uint8Array(i+r);return Kp(t,a,0),Kp(r,a,n),a.set(e,i),new P2(t,r,e,a)},sB=t=>{const e=uy(t),[r,n]=qp(e),[i,a]=qp(e.subarray(n)),o=e.subarray(n+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new P2(r,i,o,e)},aB=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&pN(t.bytes,r.bytes)}};let P2=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const cB=({name:t,code:e,encode:r})=>new dB(t,e,r);let dB=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?R1(this.code,r):r.then(n=>R1(this.code,n))}else throw Error("Unknown type, must be binary type")}};const lB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Td=cB({name:"sha2-256",code:18,encode:lB("SHA-256")});var Tc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},uB=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};let hs=class Zc{static validateKey(e){if(e.kty!=="EC"||e.crv!=="secp256k1")throw new Pe(Te.Secp256k1KeyNotValid,"Invalid SECP256K1 JWK: `kty` MUST be `EC`. `crv` MUST be `secp256k1`")}static publicKeyToJwk(e){return Tc(this,void 0,void 0,function*(){let r;e.byteLength===33?r=En.fromHex(e).toRawBytes(!1):r=e;const n=ft.bytesToBase64Url(r.subarray(1,33)),i=ft.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256K",kty:"EC",crv:"secp256k1",x:n,y:i}})}static privateKeyToJwk(e){return Tc(this,void 0,void 0,function*(){const r=yield Zc.getPublicKey(e),n=yield Zc.publicKeyToJwk(r);return n.d=ft.bytesToBase64Url(e),n})}static publicJwkToBytes(e){const r=ft.base64UrlToBytes(e.x),n=ft.base64UrlToBytes(e.y);return En.fromAffine({x:If.bytesToNumberBE(r),y:If.bytesToNumberBE(n)}).toRawBytes(!0)}static privateJwkToBytes(e){return ft.base64UrlToBytes(e.d)}static sign(e,r){return Tc(this,void 0,void 0,function*(){Zc.validateKey(r);const n=yield Td.encode(e),i=Zc.privateJwkToBytes(r);return(yield LN(n,i)).toCompactRawBytes()})}static verify(e,r,n){return Tc(this,void 0,void 0,function*(){Zc.validateKey(n);const i=Zc.publicJwkToBytes(n),a=yield Td.encode(e);return UN(r,a,i)})}static generateKeyPair(){return Tc(this,void 0,void 0,function*(){const e=fT.randomPrivateKey(),r=$b(e,!1),n=ft.bytesToBase64Url(e),i=yield Zc.publicKeyToJwk(r),a=Object.assign(Object.assign({},i),{d:n});return{publicJwk:i,privateJwk:a}})}static generateKeyPairRaw(){return Tc(this,void 0,void 0,function*(){const e=fT.randomPrivateKey();return{publicKey:$b(e,!0),privateKey:e}})}static getPublicKey(e){return Tc(this,void 0,void 0,function*(){return $b(e,!0)})}static getPublicJwk(e){return Tc(this,void 0,void 0,function*(){return uB(e,["d"])})}};function yT(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function fB(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function yy(t,...e){if(!fB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function hB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yT(t.outputLen),yT(t.blockLen)}function zg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pB(t,e){yy(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const Tb=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yB(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const mB=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),gB=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),dg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),es=(t,e)=>t<<32-e|t>>>e,wB=(t,e)=>t<<e|t>>>32-e>>>0,$3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,x2=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,bB=$3?t=>t:t=>x2(t);function vB(t){for(let e=0;e<t.length;e++)t[e]=x2(t[e])}const _B=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function EB(t){yy(t);let e="";for(let r=0;r<t.length;r++)e+=_B[t[r]];return e}const _a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function mT(t){if(t>=_a._0&&t<=_a._9)return t-_a._0;if(t>=_a._A&&t<=_a._F)return t-(_a._A-10);if(t>=_a._a&&t<=_a._f)return t-(_a._a-10)}function SB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const o=mT(t.charCodeAt(a)),s=mT(t.charCodeAt(a+1));if(o===void 0||s===void 0){const d=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}n[i]=o*16+s}return n}const T3=async()=>{};async function $B(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);const a=Date.now()-n;a>=0&&a<e||(await T3(),n+=a)}}function A3(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function rh(t){return typeof t=="string"&&(t=A3(t)),yy(t),t}function P3(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];yy(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const a=t[n];r.set(a,i),i+=a.length}return r}let I2=class{clone(){return this._cloneInto()}};const TB={}.toString;function AB(t,e){if(e!==void 0&&TB.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function k2(t){const e=n=>t().update(rh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function PB(t){const e=(n,i)=>t(i).update(rh(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function xB(t){const e=(n,i)=>t(i).update(rh(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function x3(t=32){if(Tb&&typeof Tb.getRandomValues=="function")return Tb.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const IB=Object.freeze(Object.defineProperty({__proto__:null,Hash:I2,asyncLoop:$B,byteSwap:x2,byteSwap32:vB,byteSwapIfBE:bB,bytesToHex:EB,checkOpts:AB,concatBytes:P3,createView:dg,hexToBytes:SB,isBytes:yB,isLE:$3,nextTick:T3,randomBytes:x3,rotl:wB,rotr:es,toBytes:rh,u32:gB,u8:mB,utf8ToBytes:A3,wrapConstructor:k2,wrapConstructorWithOpts:PB,wrapXOFConstructorWithOpts:xB},Symbol.toStringTag,{value:"Module"}));function kB(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),d=n?4:0,l=n?0:4;t.setUint32(e+d,o,n),t.setUint32(e+l,s,n)}const OB=(t,e,r)=>t&e^~t&r,RB=(t,e,r)=>t&e^t&r^e&r;let jB=class extends I2{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=dg(this.buffer)}update(e){zg(this);const{view:r,buffer:n,blockLen:i}=this;e=rh(e);const a=e.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const d=dg(e);for(;i<=a-o;o+=i)this.process(d,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zg(this),pB(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let u=o;u<i;u++)r[u]=0;kB(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=dg(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=d/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)s.setUint32(4*u,c[u],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(n),e}};const CB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ac=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pc=new Uint32Array(64);let I3=class extends jB{constructor(){super(64,32,8,!1),this.A=Ac[0]|0,this.B=Ac[1]|0,this.C=Ac[2]|0,this.D=Ac[3]|0,this.E=Ac[4]|0,this.F=Ac[5]|0,this.G=Ac[6]|0,this.H=Ac[7]|0}get(){const{A:e,B:r,C:n,D:i,E:a,F:o,G:s,H:d}=this;return[e,r,n,i,a,o,s,d]}set(e,r,n,i,a,o,s,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=d|0}process(e,r){for(let u=0;u<16;u++,r+=4)Pc[u]=e.getUint32(r,!1);for(let u=16;u<64;u++){const h=Pc[u-15],y=Pc[u-2],p=es(h,7)^es(h,18)^h>>>3,f=es(y,17)^es(y,19)^y>>>10;Pc[u]=f+Pc[u-7]+p+Pc[u-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:d,G:l,H:c}=this;for(let u=0;u<64;u++){const h=es(s,6)^es(s,11)^es(s,25),y=c+h+OB(s,d,l)+CB[u]+Pc[u]|0,f=(es(n,2)^es(n,13)^es(n,22))+RB(n,i,a)|0;c=l,l=d,d=s,s=o+y|0,o=a,a=i,i=n,n=y+f|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,d=d+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,i,a,o,s,d,l,c)}roundClean(){Pc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},NB=class extends I3{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const k3=k2(()=>new I3),BB=k2(()=>new NB),DB=Object.freeze(Object.defineProperty({__proto__:null,sha224:BB,sha256:k3},Symbol.toStringTag,{value:"Module"}));let O2=class extends I2{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,hB(e);const n=rh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(e){return zg(this),this.iHash.update(e),this}digestInto(e){zg(this),yy(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=o,e.outputLen=s,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const R2=(t,e,r)=>new O2(t,e).update(r).digest();R2.create=(t,e)=>new O2(t,e);const MB=Object.freeze(Object.defineProperty({__proto__:null,HMAC:O2,hmac:R2},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O3=BigInt(0),X0=BigInt(1),LB=BigInt(2);function Xl(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function my(t){if(!Xl(t))throw new Error("Uint8Array expected")}const UB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kf(t){my(t);let e="";for(let r=0;r<t.length;r++)e+=UB[t[r]];return e}function R3(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function j2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ea={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function gT(t){if(t>=Ea._0&&t<=Ea._9)return t-Ea._0;if(t>=Ea._A&&t<=Ea._F)return t-(Ea._A-10);if(t>=Ea._a&&t<=Ea._f)return t-(Ea._a-10)}function Of(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const o=gT(t.charCodeAt(a)),s=gT(t.charCodeAt(a+1));if(o===void 0||s===void 0){const d=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}n[i]=o*16+s}return n}function Dl(t){return j2(kf(t))}function C2(t){return my(t),j2(kf(Uint8Array.from(t).reverse()))}function Rf(t,e){return Of(t.toString(16).padStart(e*2,"0"))}function N2(t,e){return Rf(t,e).reverse()}function FB(t){return Of(R3(t))}function ss(t,e,r){let n;if(typeof e=="string")try{n=Of(e)}catch(a){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${a}`)}else if(Xl(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function Hp(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];my(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const a=t[n];r.set(a,i),i+=a.length}return r}function zB(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function qB(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function KB(t){let e;for(e=0;t>O3;t>>=X0,e+=1);return e}function VB(t,e){return t>>BigInt(e)&X0}function HB(t,e,r){return t|(r?X0:O3)<<BigInt(e)}const B2=t=>(LB<<BigInt(t-1))-X0,Ab=t=>new Uint8Array(t),wT=t=>Uint8Array.from(t);function j3(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ab(t),i=Ab(t),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=(...u)=>r(i,n,...u),d=(u=Ab())=>{i=s(wT([0]),u),n=s(),u.length!==0&&(i=s(wT([1]),u),n=s())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<e;){n=s();const y=n.slice();h.push(y),u+=n.length}return Hp(...h)};return(u,h)=>{o(),d(u);let y;for(;!(y=h(l()));)d();return o(),y}}const GB={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Xl(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gy(t,e,r={}){const n=(i,a,o)=>{const s=GB[a];if(typeof s!="function")throw new Error(`Invalid validator "${a}", expected function`);const d=t[i];if(!(o&&d===void 0)&&!s(d,t))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(r))n(i,a,!0);return t}const WB=Object.freeze(Object.defineProperty({__proto__:null,abytes:my,bitGet:VB,bitLen:KB,bitMask:B2,bitSet:HB,bytesToHex:kf,bytesToNumberBE:Dl,bytesToNumberLE:C2,concatBytes:Hp,createHmacDrbg:j3,ensureBytes:ss,equalBytes:zB,hexToBytes:Of,hexToNumber:j2,isBytes:Xl,numberToBytesBE:Rf,numberToBytesLE:N2,numberToHexUnpadded:R3,numberToVarBytesBE:FB,utf8ToBytes:qB,validateObject:gy},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yn=BigInt(0),Gr=BigInt(1),ml=BigInt(2),YB=BigInt(3),j1=BigInt(4),bT=BigInt(5),vT=BigInt(8);BigInt(9);BigInt(16);function Bo(t,e){const r=t%e;return r>=Yn?r:e+r}function ZB(t,e,r){if(r<=Yn||e<Yn)throw new Error("Expected power/modulo > 0");if(r===Gr)return Yn;let n=Gr;for(;e>Yn;)e&Gr&&(n=n*t%r),t=t*t%r,e>>=Gr;return n}function C1(t,e){if(t===Yn||e<=Yn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Bo(t,e),n=e,i=Yn,a=Gr;for(;r!==Yn;){const s=n/r,d=n%r,l=i-a*s;n=r,r=d,i=a,a=l}if(n!==Gr)throw new Error("invert: does not exist");return Bo(i,e)}function XB(t){const e=(t-Gr)/ml;let r,n,i;for(r=t-Gr,n=0;r%ml===Yn;r/=ml,n++);for(i=ml;i<t&&ZB(i,e,t)!==t-Gr;i++);if(n===1){const o=(t+Gr)/j1;return function(d,l){const c=d.pow(l,o);if(!d.eql(d.sqr(c),l))throw new Error("Cannot find square root");return c}}const a=(r+Gr)/ml;return function(s,d){if(s.pow(d,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let l=n,c=s.pow(s.mul(s.ONE,i),r),u=s.pow(d,a),h=s.pow(d,r);for(;!s.eql(h,s.ONE);){if(s.eql(h,s.ZERO))return s.ZERO;let y=1;for(let f=s.sqr(h);y<l&&!s.eql(f,s.ONE);y++)f=s.sqr(f);const p=s.pow(c,Gr<<BigInt(l-y-1));c=s.sqr(p),u=s.mul(u,p),h=s.mul(h,c),l=y}return u}}function QB(t){if(t%j1===YB){const e=(t+Gr)/j1;return function(n,i){const a=n.pow(i,e);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%vT===bT){const e=(t-bT)/vT;return function(n,i){const a=n.mul(i,ml),o=n.pow(a,e),s=n.mul(i,o),d=n.mul(n.mul(s,ml),o),l=n.mul(s,n.sub(d,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return XB(t)}const JB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eD(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=JB.reduce((n,i)=>(n[i]="function",n),e);return gy(t,r)}function tD(t,e,r){if(r<Yn)throw new Error("Expected power > 0");if(r===Yn)return t.ONE;if(r===Gr)return e;let n=t.ONE,i=e;for(;r>Yn;)r&Gr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Gr;return n}function rD(t,e){const r=new Array(e.length),n=e.reduce((a,o,s)=>t.is0(o)?a:(r[s]=a,t.mul(a,o)),t.ONE),i=t.inv(n);return e.reduceRight((a,o,s)=>t.is0(o)?a:(r[s]=t.mul(a,r[s]),t.mul(a,o)),i),r}function C3(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function nD(t,e,r=!1,n={}){if(t<=Yn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:a}=C3(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=QB(t),s=Object.freeze({ORDER:t,BITS:i,BYTES:a,MASK:B2(i),ZERO:Yn,ONE:Gr,create:d=>Bo(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return Yn<=d&&d<t},is0:d=>d===Yn,isOdd:d=>(d&Gr)===Gr,neg:d=>Bo(-d,t),eql:(d,l)=>d===l,sqr:d=>Bo(d*d,t),add:(d,l)=>Bo(d+l,t),sub:(d,l)=>Bo(d-l,t),mul:(d,l)=>Bo(d*l,t),pow:(d,l)=>tD(s,d,l),div:(d,l)=>Bo(d*C1(l,t),t),sqrN:d=>d*d,addN:(d,l)=>d+l,subN:(d,l)=>d-l,mulN:(d,l)=>d*l,inv:d=>C1(d,t),sqrt:n.sqrt||(d=>o(s,d)),invertBatch:d=>rD(s,d),cmov:(d,l,c)=>c?l:d,toBytes:d=>r?N2(d,a):Rf(d,a),fromBytes:d=>{if(d.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${d.length}`);return r?C2(d):Dl(d)}});return Object.freeze(s)}function N3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function B3(t){const e=N3(t);return e+Math.ceil(e/2)}function iD(t,e,r=!1){const n=t.length,i=N3(e),a=B3(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=r?Dl(t):C2(t),s=Bo(o,e-Gr)+Gr;return r?N2(s,i):Rf(s,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oD=BigInt(0),Pb=BigInt(1);function sD(t,e){const r=(i,a)=>{const o=a.negate();return i?o:a},n=i=>{const a=Math.ceil(e/i)+1,o=2**(i-1);return{windows:a,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,a){let o=t.ZERO,s=i;for(;a>oD;)a&Pb&&(o=o.add(s)),s=s.double(),a>>=Pb;return o},precomputeWindow(i,a){const{windows:o,windowSize:s}=n(a),d=[];let l=i,c=l;for(let u=0;u<o;u++){c=l,d.push(c);for(let h=1;h<s;h++)c=c.add(l),d.push(c);l=c.double()}return d},wNAF(i,a,o){const{windows:s,windowSize:d}=n(i);let l=t.ZERO,c=t.BASE;const u=BigInt(2**i-1),h=2**i,y=BigInt(i);for(let p=0;p<s;p++){const f=p*d;let g=Number(o&u);o>>=y,g>d&&(g-=h,o+=Pb);const v=f,b=f+Math.abs(g)-1,m=p%2!==0,w=g<0;g===0?c=c.add(r(m,a[v])):l=l.add(r(w,a[b]))}return{p:l,f:c}},wNAFCached(i,a,o,s){const d=i._WINDOW_SIZE||1;let l=a.get(i);return l||(l=this.precomputeWindow(i,d),d!==1&&a.set(i,s(l))),this.wNAF(d,l,o)}}}function D3(t){return eD(t.Fp),gy(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...C3(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aD(t){const e=D3(t);gy(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:cD,hexToBytes:dD}=WB,xl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=xl;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:cD(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=xl,r=typeof t=="string"?dD(t):t;my(r);let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=xl._parseInt(r.subarray(2)),{d:o,l:s}=xl._parseInt(a);if(s.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const c=l.toString(16);return c.length&1?`0${c}`:c},n=e(r(t.s)),i=e(r(t.r)),a=n.length/2,o=i.length/2,s=r(a),d=r(o);return`30${r(o+a+4)}02${d}${i}02${s}${n}`}},qa=BigInt(0),jo=BigInt(1);BigInt(2);const _T=BigInt(3);BigInt(4);function lD(t){const e=aD(t),{Fp:r}=e,n=e.toBytes||((p,f,g)=>{const v=f.toAffine();return Hp(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),i=e.fromBytes||(p=>{const f=p.subarray(1),g=r.fromBytes(f.subarray(0,r.BYTES)),v=r.fromBytes(f.subarray(r.BYTES,2*r.BYTES));return{x:g,y:v}});function a(p){const{a:f,b:g}=e,v=r.sqr(p),b=r.mul(v,p);return r.add(r.add(b,r.mul(p,f)),g)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&qa<p&&p<e.n}function s(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(p){const{allowedPrivateKeyLengths:f,nByteLength:g,wrapPrivateKey:v,n:b}=e;if(f&&typeof p!="bigint"){if(Xl(p)&&(p=kf(p)),typeof p!="string"||!f.includes(p.length))throw new Error("Invalid key");p=p.padStart(g*2,"0")}let m;try{m=typeof p=="bigint"?p:Dl(ss("private key",p,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof p}`)}return v&&(m=Bo(m,b)),s(m),m}const l=new Map;function c(p){if(!(p instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(f,g,v){if(this.px=f,this.py=g,this.pz=v,f==null||!r.isValid(f))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required")}static fromAffine(f){const{x:g,y:v}=f||{};if(!f||!r.isValid(g)||!r.isValid(v))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");const b=m=>r.eql(m,r.ZERO);return b(g)&&b(v)?u.ZERO:new u(g,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){const g=r.invertBatch(f.map(v=>v.pz));return f.map((v,b)=>v.toAffine(g[b])).map(u.fromAffine)}static fromHex(f){const g=u.fromAffine(i(ss("pointHex",f)));return g.assertValidity(),g}static fromPrivateKey(f){return u.BASE.multiply(d(f))}_setWindowSize(f){this._WINDOW_SIZE=f,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:f,y:g}=this.toAffine();if(!r.isValid(f)||!r.isValid(g))throw new Error("bad point: x or y not FE");const v=r.sqr(g),b=a(f);if(!r.eql(v,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:f}=this.toAffine();if(r.isOdd)return!r.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);const{px:g,py:v,pz:b}=this,{px:m,py:w,pz:S}=f,T=r.eql(r.mul(g,S),r.mul(m,b)),x=r.eql(r.mul(v,S),r.mul(w,b));return T&&x}negate(){return new u(this.px,r.neg(this.py),this.pz)}double(){const{a:f,b:g}=e,v=r.mul(g,_T),{px:b,py:m,pz:w}=this;let S=r.ZERO,T=r.ZERO,x=r.ZERO,I=r.mul(b,b),M=r.mul(m,m),H=r.mul(w,w),re=r.mul(b,m);return re=r.add(re,re),x=r.mul(b,w),x=r.add(x,x),S=r.mul(f,x),T=r.mul(v,H),T=r.add(S,T),S=r.sub(M,T),T=r.add(M,T),T=r.mul(S,T),S=r.mul(re,S),x=r.mul(v,x),H=r.mul(f,H),re=r.sub(I,H),re=r.mul(f,re),re=r.add(re,x),x=r.add(I,I),I=r.add(x,I),I=r.add(I,H),I=r.mul(I,re),T=r.add(T,I),H=r.mul(m,w),H=r.add(H,H),I=r.mul(H,re),S=r.sub(S,I),x=r.mul(H,M),x=r.add(x,x),x=r.add(x,x),new u(S,T,x)}add(f){c(f);const{px:g,py:v,pz:b}=this,{px:m,py:w,pz:S}=f;let T=r.ZERO,x=r.ZERO,I=r.ZERO;const M=e.a,H=r.mul(e.b,_T);let re=r.mul(g,m),J=r.mul(v,w),z=r.mul(b,S),oe=r.add(g,v),C=r.add(m,w);oe=r.mul(oe,C),C=r.add(re,J),oe=r.sub(oe,C),C=r.add(g,b);let V=r.add(m,S);return C=r.mul(C,V),V=r.add(re,z),C=r.sub(C,V),V=r.add(v,b),T=r.add(w,S),V=r.mul(V,T),T=r.add(J,z),V=r.sub(V,T),I=r.mul(M,C),T=r.mul(H,z),I=r.add(T,I),T=r.sub(J,I),I=r.add(J,I),x=r.mul(T,I),J=r.add(re,re),J=r.add(J,re),z=r.mul(M,z),C=r.mul(H,C),J=r.add(J,z),z=r.sub(re,z),z=r.mul(M,z),C=r.add(C,z),re=r.mul(J,C),x=r.add(x,re),re=r.mul(V,C),T=r.mul(oe,T),T=r.sub(T,re),re=r.mul(oe,J),I=r.mul(V,I),I=r.add(I,re),new u(T,x,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return y.wNAFCached(this,l,f,g=>{const v=r.invertBatch(g.map(b=>b.pz));return g.map((b,m)=>b.toAffine(v[m])).map(u.fromAffine)})}multiplyUnsafe(f){const g=u.ZERO;if(f===qa)return g;if(s(f),f===jo)return this;const{endo:v}=e;if(!v)return y.unsafeLadder(this,f);let{k1neg:b,k1:m,k2neg:w,k2:S}=v.splitScalar(f),T=g,x=g,I=this;for(;m>qa||S>qa;)m&jo&&(T=T.add(I)),S&jo&&(x=x.add(I)),I=I.double(),m>>=jo,S>>=jo;return b&&(T=T.negate()),w&&(x=x.negate()),x=new u(r.mul(x.px,v.beta),x.py,x.pz),T.add(x)}multiply(f){s(f);let g=f,v,b;const{endo:m}=e;if(m){const{k1neg:w,k1:S,k2neg:T,k2:x}=m.splitScalar(g);let{p:I,f:M}=this.wNAF(S),{p:H,f:re}=this.wNAF(x);I=y.constTimeNegate(w,I),H=y.constTimeNegate(T,H),H=new u(r.mul(H.px,m.beta),H.py,H.pz),v=I.add(H),b=M.add(re)}else{const{p:w,f:S}=this.wNAF(g);v=w,b=S}return u.normalizeZ([v,b])[0]}multiplyAndAddUnsafe(f,g,v){const b=u.BASE,m=(S,T)=>T===qa||T===jo||!S.equals(b)?S.multiplyUnsafe(T):S.multiply(T),w=m(this,g).add(m(f,v));return w.is0()?void 0:w}toAffine(f){const{px:g,py:v,pz:b}=this,m=this.is0();f==null&&(f=m?r.ONE:r.inv(b));const w=r.mul(g,f),S=r.mul(v,f),T=r.mul(b,f);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:w,y:S}}isTorsionFree(){const{h:f,isTorsionFree:g}=e;if(f===jo)return!0;if(g)return g(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:f,clearCofactor:g}=e;return f===jo?this:g?g(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),n(u,this,f)}toHex(f=!0){return kf(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,r.ONE),u.ZERO=new u(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,y=sD(u,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:o}}function uD(t){const e=D3(t);return gy(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function fD(t){const e=uD(t),{Fp:r,n}=e,i=r.BYTES+1,a=2*r.BYTES+1;function o(C){return qa<C&&C<r.ORDER}function s(C){return Bo(C,n)}function d(C){return C1(C,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=lD({...e,toBytes(C,V,q){const Q=V.toAffine(),R=r.toBytes(Q.x),B=Hp;return q?B(Uint8Array.from([V.hasEvenY()?2:3]),R):B(Uint8Array.from([4]),R,r.toBytes(Q.y))},fromBytes(C){const V=C.length,q=C[0],Q=C.subarray(1);if(V===i&&(q===2||q===3)){const R=Dl(Q);if(!o(R))throw new Error("Point is not on curve");const B=u(R);let D;try{D=r.sqrt(B)}catch(N){const W=N instanceof Error?": "+N.message:"";throw new Error("Point is not on curve"+W)}const G=(D&jo)===jo;return(q&1)===1!==G&&(D=r.neg(D)),{x:R,y:D}}else if(V===a&&q===4){const R=r.fromBytes(Q.subarray(0,r.BYTES)),B=r.fromBytes(Q.subarray(r.BYTES,2*r.BYTES));return{x:R,y:B}}else throw new Error(`Point of length ${V} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),y=C=>kf(Rf(C,e.nByteLength));function p(C){const V=n>>jo;return C>V}function f(C){return p(C)?s(-C):C}const g=(C,V,q)=>Dl(C.slice(V,q));class v{constructor(V,q,Q){this.r=V,this.s=q,this.recovery=Q,this.assertValidity()}static fromCompact(V){const q=e.nByteLength;return V=ss("compactSignature",V,q*2),new v(g(V,0,q),g(V,q,2*q))}static fromDER(V){const{r:q,s:Q}=xl.toSig(ss("DER",V));return new v(q,Q)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new v(this.r,this.s,V)}recoverPublicKey(V){const{r:q,s:Q,recovery:R}=this,B=x(ss("msgHash",V));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const D=R===2||R===3?q+e.n:q;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const G=R&1?"03":"02",Z=l.fromHex(G+y(D)),N=d(D),W=s(-B*N),O=s(Q*N),F=l.BASE.multiplyAndAddUnsafe(Z,W,O);if(!F)throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Of(this.toDERHex())}toDERHex(){return xl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Of(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const b={isValidPrivateKey(C){try{return c(C),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const C=B3(e.n);return iD(e.randomBytes(C),e.n)},precompute(C=8,V=l.BASE){return V._setWindowSize(C),V.multiply(BigInt(3)),V}};function m(C,V=!0){return l.fromPrivateKey(C).toRawBytes(V)}function w(C){const V=Xl(C),q=typeof C=="string",Q=(V||q)&&C.length;return V?Q===i||Q===a:q?Q===2*i||Q===2*a:C instanceof l}function S(C,V,q=!0){if(w(C))throw new Error("first arg must be private key");if(!w(V))throw new Error("second arg must be public key");return l.fromHex(V).multiply(c(C)).toRawBytes(q)}const T=e.bits2int||function(C){const V=Dl(C),q=C.length*8-e.nBitLength;return q>0?V>>BigInt(q):V},x=e.bits2int_modN||function(C){return s(T(C))},I=B2(e.nBitLength);function M(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(qa<=C&&C<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Rf(C,e.nByteLength)}function H(C,V,q=re){if(["recovered","canonical"].some(ee=>ee in q))throw new Error("sign() legacy options not supported");const{hash:Q,randomBytes:R}=e;let{lowS:B,prehash:D,extraEntropy:G}=q;B==null&&(B=!0),C=ss("msgHash",C),D&&(C=ss("prehashed msgHash",Q(C)));const Z=x(C),N=c(V),W=[M(N),M(Z)];if(G!=null&&G!==!1){const ee=G===!0?R(r.BYTES):G;W.push(ss("extraEntropy",ee))}const O=Hp(...W),F=Z;function Y(ee){const te=T(ee);if(!h(te))return;const U=d(te),L=l.BASE.multiply(te).toAffine(),P=s(L.x);if(P===qa)return;const j=s(U*s(F+P*N));if(j===qa)return;let X=(L.x===P?0:2)|Number(L.y&jo),ne=j;return B&&p(j)&&(ne=f(j),X^=1),new v(P,ne,X)}return{seed:O,k2sig:Y}}const re={lowS:e.lowS,prehash:!1},J={lowS:e.lowS,prehash:!1};function z(C,V,q=re){const{seed:Q,k2sig:R}=H(C,V,q),B=e;return j3(B.hash.outputLen,B.nByteLength,B.hmac)(Q,R)}l.BASE._setWindowSize(8);function oe(C,V,q,Q=J){const R=C;if(V=ss("msgHash",V),q=ss("publicKey",q),"strict"in Q)throw new Error("options.strict was renamed to lowS");const{lowS:B,prehash:D}=Q;let G,Z;try{if(typeof R=="string"||Xl(R))try{G=v.fromDER(R)}catch(L){if(!(L instanceof xl.Err))throw L;G=v.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){const{r:L,s:P}=R;G=new v(L,P)}else throw new Error("PARSE");Z=l.fromHex(q)}catch(L){if(L.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&G.hasHighS())return!1;D&&(V=e.hash(V));const{r:N,s:W}=G,O=x(V),F=d(W),Y=s(O*F),ee=s(N*F),te=l.BASE.multiplyAndAddUnsafe(Z,Y,ee)?.toAffine();return te?s(te.x)===N:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:S,sign:z,verify:oe,ProjectivePoint:l,Signature:v,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hD(t){return{hash:t,hmac:(e,...r)=>R2(t,e,P3(...r)),randomBytes:x3}}function pD(t,e){const r=n=>fD({...t,...hD(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M3=nD(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),yD=M3.create(BigInt("-3")),mD=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Xc=pD({a:yD,b:mD,Fp:M3,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},k3),gD=Xc;function wD(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function xc(t=0){return new Uint8Array(t)}function Ql(t=0){return new Uint8Array(t)}function N1(t,e){e==null&&(e=t.reduce((i,a)=>i+a.length,0));const r=Ql(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}const bD=new Uint8Array(0);function vD(t){const e=t.match(/../g);return e!=null?new Uint8Array(e.map(r=>parseInt(r,16))):bD}function _D(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function D2(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function ED(t){return new TextEncoder().encode(t)}function SD(t){return new TextDecoder().decode(t)}function $D(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),o=a.charCodeAt(0);if(r[o]!==255)throw new TypeError(a+" is ambiguous");r[o]=i}var s=t.length,d=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var f=0,g=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,f++;for(var m=(b-v)*c+1>>>0,w=new Uint8Array(m);v!==b;){for(var S=p[v],T=0,x=m-1;(S!==0||T<g)&&x!==-1;x--,T++)S+=256*w[x]>>>0,w[x]=S%s>>>0,S=S/s>>>0;if(S!==0)throw new Error("Non-zero carry");g=T,v++}for(var I=m-g;I!==m&&w[I]===0;)I++;for(var M=d.repeat(f);I<m;++I)M+=t.charAt(w[I]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var f=0;if(p[f]!==" "){for(var g=0,v=0;p[f]===d;)g++,f++;for(var b=(p.length-f)*l+1>>>0,m=new Uint8Array(b);p[f];){var w=r[p.charCodeAt(f)];if(w===255)return;for(var S=0,T=b-1;(w!==0||S<v)&&T!==-1;T--,S++)w+=s*m[T]>>>0,m[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=S,f++}if(p[f]!==" "){for(var x=b-v;x!==b&&m[x]===0;)x++;for(var I=new Uint8Array(g+(b-x)),M=g;x!==b;)I[M++]=m[x++];return I}}}function y(p){var f=h(p);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:h,decode:y}}var TD=$D,AD=TD;let PD=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},xD=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return L3(this,e)}},ID=class{decoders;constructor(e){this.decoders=e}or(e){return L3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function L3(t,e){return new ID({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let kD=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new PD(e,r,n),this.decoder=new xD(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Q0({name:t,prefix:e,encode:r,decode:n}){return new kD(t,e,r,n)}function wy({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=AD(r,t);return Q0({prefix:e,name:t,encode:n,decode:a=>D2(i(a))})}function OD(t,e,r,n){const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;const o=new Uint8Array(a*r/8|0);let s=0,d=0,l=0;for(let c=0;c<a;++c){const u=i[t[c]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|u,s+=r,s>=8&&(s-=8,o[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return o}function RD(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let a="",o=0,s=0;for(let d=0;d<t.length;++d)for(s=s<<8|t[d],o+=8;o>r;)o-=r,a+=e[i&s>>o];if(o!==0&&(a+=e[i&s<<r-o]),n)for(;a.length*r&7;)a+="=";return a}function Jn({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Q0({prefix:e,name:t,encode(i){return RD(i,n,r)},decode(i){return OD(i,n,r,t)}})}const jD=wy({prefix:"9",name:"base10",alphabet:"0123456789"}),CD=Object.freeze(Object.defineProperty({__proto__:null,base10:jD},Symbol.toStringTag,{value:"Module"})),ND=Jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),BD=Jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),DD=Object.freeze(Object.defineProperty({__proto__:null,base16:ND,base16upper:BD},Symbol.toStringTag,{value:"Module"})),MD=Jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),LD=Object.freeze(Object.defineProperty({__proto__:null,base2:MD},Symbol.toStringTag,{value:"Module"})),U3=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),UD=U3.reduce((t,e,r)=>(t[r]=e,t),[]),FD=U3.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function zD(t){return t.reduce((e,r)=>(e+=UD[r],e),"")}function qD(t){const e=[];for(const r of t){const n=FD[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const KD=Q0({prefix:"🚀",name:"base256emoji",encode:zD,decode:qD}),VD=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:KD},Symbol.toStringTag,{value:"Module"})),Ep=Jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),HD=Jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GD=Jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),WD=Jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),YD=Jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ZD=Jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),XD=Jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QD=Jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),JD=Jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eM=Object.freeze(Object.defineProperty({__proto__:null,base32:Ep,base32hex:YD,base32hexpad:XD,base32hexpadupper:QD,base32hexupper:ZD,base32pad:GD,base32padupper:WD,base32upper:HD,base32z:JD},Symbol.toStringTag,{value:"Module"})),tM=wy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rM=wy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nM=Object.freeze(Object.defineProperty({__proto__:null,base36:tM,base36upper:rM},Symbol.toStringTag,{value:"Module"})),Da=wy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),iM=wy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),oM=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Da,base58flickr:iM},Symbol.toStringTag,{value:"Module"})),sM=Jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),aM=Jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cM=Jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dM=Jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lM=Object.freeze(Object.defineProperty({__proto__:null,base64:sM,base64pad:aM,base64url:cM,base64urlpad:dM},Symbol.toStringTag,{value:"Module"})),uM=Jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),fM=Object.freeze(Object.defineProperty({__proto__:null,base8:uM},Symbol.toStringTag,{value:"Module"})),hM=Q0({prefix:"\0",name:"identity",encode:t=>SD(t),decode:t=>ED(t)}),pM=Object.freeze(Object.defineProperty({__proto__:null,identity:hM},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;var yM=F3,ET=128,mM=127,gM=~mM,wM=Math.pow(2,31);function F3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=wM;)e[r++]=t&255|ET,t/=128;for(;t&gM;)e[r++]=t&255|ET,t>>>=7;return e[r]=t|0,F3.bytes=r-n+1,e}var bM=B1,vM=128,ST=127;function B1(t,n){var r=0,n=n||0,i=0,a=n,o,s=t.length;do{if(a>=s)throw B1.bytes=0,new RangeError("Could not decode varint");o=t[a++],r+=i<28?(o&ST)<<i:(o&ST)*Math.pow(2,i),i+=7}while(o>=vM);return B1.bytes=a-n,r}var _M=Math.pow(2,7),EM=Math.pow(2,14),SM=Math.pow(2,21),$M=Math.pow(2,28),TM=Math.pow(2,35),AM=Math.pow(2,42),PM=Math.pow(2,49),xM=Math.pow(2,56),IM=Math.pow(2,63),kM=function(t){return t<_M?1:t<EM?2:t<SM?3:t<$M?4:t<TM?5:t<AM?6:t<PM?7:t<xM?8:t<IM?9:10},OM={encode:yM,decode:bM,encodingLength:kM},qg=OM;function D1(t,e=0){return[qg.decode(t,e),qg.decode.bytes]}function Kg(t,e,r=0){return qg.encode(t,e,r),e}function Vg(t){return qg.encodingLength(t)}function M1(t,e){const r=e.byteLength,n=Vg(t),i=n+Vg(r),a=new Uint8Array(i+r);return Kg(t,a,0),Kg(r,a,n),a.set(e,i),new M2(t,r,e,a)}function RM(t){const e=D2(t),[r,n]=D1(e),[i,a]=D1(e.subarray(n)),o=e.subarray(n+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new M2(r,i,o,e)}function jM(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&_D(t.bytes,r.bytes)}}let M2=class{code;size;digest;bytes;constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};function CM({name:t,code:e,encode:r}){return new NM(t,e,r)}let NM=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?M1(this.code,r):r.then(n=>M1(this.code,n))}else throw Error("Unknown type, must be binary type")}};function $T(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return DM(r,L1(t),e??Da.encoder);default:return MM(r,L1(t),e??Ep.encoder)}}const TT=new WeakMap;function L1(t){const e=TT.get(t);if(e==null){const r=new Map;return TT.set(t,r),r}return e}let op=class ii{code;version;multihash;bytes;"/";constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Rh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==LM)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ii.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=M1(e,r);return ii.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return ii.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&jM(e.multihash,n.multihash)}toString(e){return $T(this,e)}toJSON(){return{"/":$T(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof ii)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:a,bytes:o}=r;return new ii(n,i,a,o??AT(n,i,a.bytes))}else if(r[UM]===!0){const{version:n,multihash:i,code:a}=r,o=RM(i);return ii.create(n,a,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Rh)throw new Error(`Version 0 CID must use dag-pb (code: ${Rh}) block encoding`);return new ii(e,r,n,n.bytes)}case 1:{const i=AT(e,r,n.bytes);return new ii(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return ii.create(0,Rh,e)}static createV1(e,r){return ii.create(1,e,r)}static decode(e){const[r,n]=ii.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=ii.inspectBytes(e),n=r.size-r.multihashSize,i=D2(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=i.subarray(r.multihashSize-r.digestSize),o=new M2(r.multihashCode,r.digestSize,a,i);return[r.version===0?ii.createV0(o):ii.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[u,h]=D1(e.subarray(r));return r+=h,u};let i=n(),a=Rh;if(i===18?(i=0,r=0):a=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,s=n(),d=n(),l=r+d,c=l-o;return{version:i,codec:a,multihashCode:s,digestSize:d,multihashSize:c,size:l}}static parse(e,r){const[n,i]=BM(e,r),a=ii.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return L1(a).set(n,e),a}};function BM(t,e){switch(t[0]){case"Q":{const r=e??Da;return[Da.prefix,r.decode(`${Da.prefix}${t}`)]}case Da.prefix:{const r=e??Da;return[Da.prefix,r.decode(t)]}case Ep.prefix:{const r=e??Ep;return[Ep.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function DM(t,e,r){const{prefix:n}=r;if(n!==Da.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return i}function MM(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const a=r.encode(t);return e.set(n,a),a}else return i}const Rh=112,LM=18;function AT(t,e,r){const n=Vg(t),i=n+Vg(e),a=new Uint8Array(i+r.byteLength);return Kg(t,a,0),Kg(e,a,n),a.set(r,i),a}const UM=Symbol.for("@ipld/js-cid/CID"),PT={...pM,...LD,...fM,...CD,...DD,...eM,...nM,...oM,...lM,...VD};function z3(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xT=z3("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),xb=z3("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ql(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),q3={utf8:xT,"utf-8":xT,hex:PT.base16,latin1:xb,ascii:xb,binary:xb,...PT};function L2(t,e="utf8"){const r=q3[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function FM(t,e="utf8"){const r=q3[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var lm=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};const zM={toString:FM,fromString:L2};let um=class dl{static validateKey(e){if(e.kty!=="EC"||e.crv!=="P-256")throw new Pe(Te.Secp256r1KeyNotValid,"Invalid SECP256R1 JWK: `kty` MUST be `EC`. `crv` MUST be `P-256`")}static publicKeyToJwk(e){return lm(this,void 0,void 0,function*(){let r;e.byteLength===33?r=Xc.ProjectivePoint.fromHex(e).toRawBytes(!1):r=e;const n=ft.bytesToBase64Url(r.subarray(1,33)),i=ft.bytesToBase64Url(r.subarray(33,65));return{alg:"ES256",kty:"EC",crv:"P-256",x:n,y:i}})}static privateJwkToBytes(e){return ft.base64UrlToBytes(e.d)}static sign(e,r){return lm(this,void 0,void 0,function*(){dl.validateKey(r);const n=yield Td.encode(e),i=dl.privateJwkToBytes(r);return Promise.resolve(Xc.sign(n,i).toCompactRawBytes())})}static verify(e,r,n){return lm(this,void 0,void 0,function*(){dl.validateKey(n);let i;r.length===64?i=Xc.Signature.fromCompact(r):i=Xc.Signature.fromDER(r);const a=yield Td.encode(e),o=Xc.ProjectivePoint.fromAffine({x:dl.bytesToBigInt(ft.base64UrlToBytes(n.x)),y:dl.bytesToBigInt(ft.base64UrlToBytes(n.y))}).toRawBytes(!1);return Xc.verify(i,a,o)})}static generateKeyPair(){return lm(this,void 0,void 0,function*(){const e=Xc.utils.randomPrivateKey(),r=gD.getPublicKey(e,!1),n=ft.bytesToBase64Url(e),i=yield dl.publicKeyToJwk(r),a=Object.assign(Object.assign({},i),{d:n});return{publicJwk:i,privateJwk:a}})}static bytesToBigInt(e){return BigInt("0x"+zM.toString(e,"base16"))}};const Hg={Ed25519:CN,secp256k1:{sign:hs.sign,verify:hs.verify,generateKeyPair:hs.generateKeyPair,publicKeyToJwk:hs.publicKeyToJwk},"P-256":{sign:um.sign,verify:um.verify,generateKeyPair:um.generateKeyPair,publicKeyToJwk:um.publicKeyToJwk}};var qM=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class KM{constructor(e){var r,n;if(e.keyId===void 0&&e.privateJwk.kid===void 0)throw new Pe(Te.PrivateKeySignerUnableToDeduceKeyId,"Unable to deduce the key ID");if(e.algorithm===void 0&&e.privateJwk.alg===void 0)throw new Pe(Te.PrivateKeySignerUnableToDeduceAlgorithm,"Unable to deduce the signature algorithm");if(this.keyId=(r=e.keyId)!==null&&r!==void 0?r:e.privateJwk.kid,this.algorithm=(n=e.algorithm)!==null&&n!==void 0?n:e.privateJwk.alg,this.privateJwk=e.privateJwk,this.signatureAlgorithm=Hg[e.privateJwk.crv],!this.signatureAlgorithm)throw new Pe(Te.PrivateKeySignerUnsupportedCurve,`Unsupported crv ${e.privateJwk.crv}, crv must be one of ${Object.keys(Hg)}`)}sign(e){return qM(this,void 0,void 0,function*(){return yield this.signatureAlgorithm.sign(e,this.privateJwk)})}}var VM=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Fr{static getKid(e){const{kid:r}=ft.base64UrlToObject(e.protected);return r}static getSignerDid(e){const r=Fr.getKid(e);return Fr.extractDid(r)}static verifySignature(e,r,n){return VM(this,void 0,void 0,function*(){const i=Hg[n.crv];if(!i)throw new Pe(Te.JwsVerifySignatureUnsupportedCrv,`unsupported crv. crv must be one of ${Object.keys(Hg)}`);const a=ft.stringToBytes(`${r.protected}.${e}`),o=ft.base64UrlToBytes(r.signature);return yield i.verify(a,o,n)})}static decodePlainObjectPayload(e){let r;try{r=ft.base64UrlToObject(e.payload)}catch{throw new Pe(Te.JwsDecodePlainObjectPayloadInvalid,"payload is not a JSON object")}if(!lN(r))throw new Pe(Te.JwsDecodePlainObjectPayloadInvalid,"signed payload must be a plain object");return r}static extractDid(e){const[r]=e.split("#");return r}static createSigners(e){return e.map(n=>Fr.createSigner(n))}static createSigner(e){const r=e.keyPair.privateJwk,n=e.keyId;return new KM({privateJwk:r,keyId:n})}}const HM=$n,Il=new RegExp("^[A-Za-z0-9_-]+$","u");function Gt(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Gt.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){for(const h in t)if(!(h==="payload"||h==="signatures"))return Gt.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"}],!1;{if(t.payload!==void 0){let h=t.payload;const y=s;if(typeof h=="string"){if(!Il.test(h))return Gt.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Gt.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=y===s}else var l=!0;if(l)if(t.signatures!==void 0){let h=t.signatures;const y=s;if(Array.isArray(h)){if(h.length<1)return Gt.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var c=!0;const f=h.length;for(let g=0;g<f;g++){let v=h[g];const b=s;if(v&&typeof v=="object"&&!Array.isArray(v)){if(v.protected!==void 0){let w=v.protected;const S=s;if(typeof w=="string"){if(!Il.test(w))return Gt.errors=[{instancePath:e+"/signatures/"+g+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Gt.errors=[{instancePath:e+"/signatures/"+g+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=S===s}else var u=!0;if(u)if(v.signature!==void 0){let w=v.signature;const S=s;if(typeof w=="string"){if(!Il.test(w))return Gt.errors=[{instancePath:e+"/signatures/"+g+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return Gt.errors=[{instancePath:e+"/signatures/"+g+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=S===s}else var u=!0}else return Gt.errors=[{instancePath:e+"/signatures/"+g,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=b===s;if(!c)break}}}else return Gt.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var l=y===s}else var l=!0}}else return Gt.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Gt.errors=o,s===0}Gt.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function $n(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=$n.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){const l=s;for(const c in t)if(c!=="signature")return $n.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;l===s&&t.signature!==void 0&&(Gt(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:a})||(o=o===null?Gt.errors:o.concat(Gt.errors),s=o.length))}else return $n.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $n.errors=o,s===0}$n.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const GM=Wr,Ic={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-write-unidentified.json",type:"object",required:["descriptor"],properties:{recordId:{type:"string"},contextId:{type:"string",pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},tags:{type:"object",minProperties:1,maxProperties:10,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"array",minItems:1,maxItems:10,items:{type:"string"}},{type:"array",minItems:1,maxItems:10,items:{type:"number"}}]}},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}},$comment:"rule defining `protocol` and `contextId` relationship",anyOf:[{properties:{descriptor:{type:"object",required:["protocol","protocolPath"]}},required:["contextId"]},{allOf:[{not:{required:["contextId"]}},{properties:{descriptor:{type:"object",not:{required:["protocol"]}}}},{properties:{descriptor:{type:"object",not:{required:["protocolPath"]}}}}]}]},WM=new RegExp("^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$","u"),sd=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u"),YM=new RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u"),nn=new RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u"),ju={validate:Mo};function qs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=qs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){const c=s;for(const u in t)if(!(u==="signature"||u==="authorDelegatedGrant"||u==="ownerSignature"||u==="ownerDelegatedGrant"))return qs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;if(c===s){let u;if(t.ownerSignature!==void 0&&t.signature===void 0&&(u="signature"))return qs.errors=[{instancePath:e,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:u,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(t.signature!==void 0){const h=s;Gt(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:a})||(o=o===null?Gt.errors:o.concat(Gt.errors),s=o.length);var l=h===s}else var l=!0;if(l){if(t.authorDelegatedGrant!==void 0){const h=s;ju.validate(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:a})||(o=o===null?ju.validate.errors:o.concat(ju.validate.errors),s=o.length);var l=h===s}else var l=!0;if(l){if(t.ownerSignature!==void 0){const h=s;Gt(t.ownerSignature,{instancePath:e+"/ownerSignature",parentData:t,parentDataProperty:"ownerSignature",rootData:i,dynamicAnchors:a})||(o=o===null?Gt.errors:o.concat(Gt.errors),s=o.length);var l=h===s}else var l=!0;if(l)if(t.ownerDelegatedGrant!==void 0){const h=s;ju.validate(t.ownerDelegatedGrant,{instancePath:e+"/ownerDelegatedGrant",parentData:t,parentDataProperty:"ownerDelegatedGrant",rootData:i,dynamicAnchors:a})||(o=o===null?ju.validate.errors:o.concat(ju.validate.errors),s=o.length);var l=h===s}else var l=!0}}}}else return qs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return qs.errors=o,s===0}qs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const K3={$id:"https://identity.foundation/dwn/json-schemas/general-jwk.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",required:["kty"],properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}},oneOf:[{properties:{kty:{const:"EC"},crv:{type:"string"},x:{type:"string"},y:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"OKP"},crv:{type:"string"},x:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"RSA"},n:{type:"string"},e:{type:"string"},d:{type:"string"},p:{type:"string"},q:{type:"string"},dp:{type:"string"},dq:{type:"string"},qi:{type:"string"},oth:{type:"object"}},required:["n","e"]},{properties:{kty:{const:"oct"},k:{type:"string"}},required:["k"]}]};function Ht(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ht.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);const l=s,c=s;let u=!1,h=null;const y=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let oe;if(t.crv===void 0&&(oe="crv")||t.x===void 0&&(oe="x")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:oe},message:"must have required property '"+oe+"'"};o===null?o=[C]:o.push(C),s++}else{if(t.kty!==void 0){const C=s;if(t.kty!=="EC"){const V={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var p=C===s}else var p=!0;if(p){if(t.crv!==void 0){const C=s;if(typeof t.crv!="string"){const q={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var p=C===s}else var p=!0;if(p){if(t.x!==void 0){const C=s;if(typeof t.x!="string"){const q={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var p=C===s}else var p=!0;if(p){if(t.y!==void 0){const C=s;if(typeof t.y!="string"){const q={instancePath:e+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var p=C===s}else var p=!0;if(p)if(t.d!==void 0){const C=s;if(typeof t.d!="string"){const q={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var p=C===s}else var p=!0}}}}}var b=y===s;if(b){u=!0,h=0;var f={};f.kty=!0,f.crv=!0,f.x=!0,f.y=!0,f.d=!0}const g=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let oe;if(t.crv===void 0&&(oe="crv")||t.x===void 0&&(oe="x")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:oe},message:"must have required property '"+oe+"'"};o===null?o=[C]:o.push(C),s++}else{if(t.kty!==void 0){const C=s;if(t.kty!=="OKP"){const V={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var v=C===s}else var v=!0;if(v){if(t.crv!==void 0){const C=s;if(typeof t.crv!="string"){const q={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var v=C===s}else var v=!0;if(v){if(t.x!==void 0){const C=s;if(typeof t.x!="string"){const q={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var v=C===s}else var v=!0;if(v)if(t.d!==void 0){const C=s;if(typeof t.d!="string"){const q={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[q]:o.push(q),s++}var v=C===s}else var v=!0}}}}var b=g===s;if(b&&u)u=!1,h=[h,1];else{b&&(u=!0,h=1,f!==!0&&(f=f||{},f.kty=!0,f.crv=!0,f.x=!0,f.d=!0));const oe=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let V;if(t.n===void 0&&(V="n")||t.e===void 0&&(V="e")){const q={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"};o===null?o=[q]:o.push(q),s++}else{if(t.kty!==void 0){const q=s;if(t.kty!=="RSA"){const Q={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};o===null?o=[Q]:o.push(Q),s++}var m=q===s}else var m=!0;if(m){if(t.n!==void 0){const q=s;if(typeof t.n!="string"){const R={instancePath:e+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.e!==void 0){const q=s;if(typeof t.e!="string"){const R={instancePath:e+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.d!==void 0){const q=s;if(typeof t.d!="string"){const R={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.p!==void 0){const q=s;if(typeof t.p!="string"){const R={instancePath:e+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.q!==void 0){const q=s;if(typeof t.q!="string"){const R={instancePath:e+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.dp!==void 0){const q=s;if(typeof t.dp!="string"){const R={instancePath:e+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.dq!==void 0){const q=s;if(typeof t.dq!="string"){const R={instancePath:e+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m){if(t.qi!==void 0){const q=s;if(typeof t.qi!="string"){const R={instancePath:e+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var m=q===s}else var m=!0;if(m)if(t.oth!==void 0){let q=t.oth;const Q=s;if(!(q&&typeof q=="object"&&!Array.isArray(q))){const B={instancePath:e+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[B]:o.push(B),s++}var m=Q===s}else var m=!0}}}}}}}}}}var b=oe===s;if(b&&u)u=!1,h=[h,2];else{b&&(u=!0,h=2,f!==!0&&(f=f||{},f.kty=!0,f.n=!0,f.e=!0,f.d=!0,f.p=!0,f.q=!0,f.dp=!0,f.dq=!0,f.qi=!0,f.oth=!0));const V=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let Q;if(t.k===void 0&&(Q="k")){const R={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:Q},message:"must have required property '"+Q+"'"};o===null?o=[R]:o.push(R),s++}else{if(t.kty!==void 0){const R=s;if(t.kty!=="oct"){const B={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};o===null?o=[B]:o.push(B),s++}var w=R===s}else var w=!0;if(w)if(t.k!==void 0){const R=s;if(typeof t.k!="string"){const D={instancePath:e+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[D]:o.push(D),s++}var w=R===s}else var w=!0}}var b=V===s;b&&u?(u=!1,h=[h,3]):b&&(u=!0,h=3,f!==!0&&(f=f||{},f.kty=!0,f.k=!0))}}if(u)s=c,o!==null&&(c?o.length=c:o=null);else{const oe={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:h},message:"must match exactly one schema in oneOf"};return o===null?o=[oe]:o.push(oe),s++,Ht.errors=o,!1}if(s===l)if(t&&typeof t=="object"&&!Array.isArray(t)){let oe;if(t.kty===void 0&&(oe="kty"))return Ht.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:oe},message:"must have required property '"+oe+"'"}],!1;if(f!==!0&&(f=f||{},f.alg=!0,f.kid=!0,f.kty=!0,f.crv=!0,f.use=!0,f.key_ops=!0,f.x5u=!0,f.x5c=!0,f.x5t=!0,f["x5t#S256"]=!0),t.alg!==void 0){const C=s;if(typeof t.alg!="string")return Ht.errors=[{instancePath:e+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.kid!==void 0){const C=s;if(typeof t.kid!="string")return Ht.errors=[{instancePath:e+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.kty!==void 0){let C=t.kty;const V=s;if(!(C==="EC"||C==="RSA"||C==="oct"||C==="OKP"))return Ht.errors=[{instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:K3.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var S=V===s}else var S=!0;if(S){if(t.crv!==void 0){const C=s;if(typeof t.crv!="string")return Ht.errors=[{instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.use!==void 0){const C=s;if(typeof t.use!="string")return Ht.errors=[{instancePath:e+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.key_ops!==void 0){const C=s;if(typeof t.key_ops!="string")return Ht.errors=[{instancePath:e+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.x5u!==void 0){const C=s;if(typeof t.x5u!="string")return Ht.errors=[{instancePath:e+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.x5c!==void 0){const C=s;if(typeof t.x5c!="string")return Ht.errors=[{instancePath:e+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S){if(t.x5t!==void 0){const C=s;if(typeof t.x5t!="string")return Ht.errors=[{instancePath:e+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0;if(S)if(t["x5t#S256"]!==void 0){const C=s;if(typeof t["x5t#S256"]!="string")return Ht.errors=[{instancePath:e+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=C===s}else var S=!0}}}}}}}}}else return Ht.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=l===s;if(T){const oe=s,C=s,V=s;let q=!1;const Q=s,R=s;let B=!1;const D=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.d===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var x=D===s;if(B=B||x,B)s=R,o!==null&&(R?o.length=R:o=null);else{const ne={};o===null?o=[ne]:o.push(ne),s++}if(s===Q)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="EC"){const ne={};o===null?o=[ne]:o.push(ne),s++}}else{const ne={};o===null?o=[ne]:o.push(ne),s++}var J=Q===s;if(q=q||J,J){var I={};I.kty=!0}const G=s,Z=s;let N=!1;const W=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.d===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var M=W===s;if(N=N||M,N)s=Z,o!==null&&(Z?o.length=Z:o=null);else{const ne={};o===null?o=[ne]:o.push(ne),s++}if(s===G)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0&&t.kty!=="OKP"){const ne={};o===null?o=[ne]:o.push(ne),s++}}else{const ne={};o===null?o=[ne]:o.push(ne),s++}var J=G===s;q=q||J,J&&I!==!0&&(I=I||{},I.kty=!0);const O=s,F=s;let Y=!1;const ee=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.d===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=ee===s;Y=Y||H;const te=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.p===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=te===s;Y=Y||H;const U=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.q===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=U===s;Y=Y||H;const L=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.dp===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=L===s;Y=Y||H;const P=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.dq===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=P===s;Y=Y||H;const j=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.qi===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=j===s;Y=Y||H;const X=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.oth===void 0){const ne={};o===null?o=[ne]:o.push(ne),s++}var H=X===s;if(Y=Y||H,Y)s=F,o!==null&&(F?o.length=F:o=null);else{const ne={};o===null?o=[ne]:o.push(ne),s++}if(s===O)if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.kty!==void 0){const ne=s;if(t.kty!=="RSA"){const ae={};o===null?o=[ae]:o.push(ae),s++}var re=ne===s}else var re=!0;if(re)if(t.oth!==void 0){let ne=t.oth;const ae=s;if(!(ne&&typeof ne=="object"&&!Array.isArray(ne))){const we={};o===null?o=[we]:o.push(we),s++}var re=ae===s}else var re=!0}else{const ne={};o===null?o=[ne]:o.push(ne),s++}var J=O===s;if(q=q||J,J&&I!==!0&&(I=I||{},I.kty=!0,I.d=!0,I.p=!0,I.q=!0,I.dp=!0,I.dq=!0,I.qi=!0,I.oth=!0),q)s=V,o!==null&&(V?o.length=V:o=null);else{const ne={};o===null?o=[ne]:o.push(ne),s++}var z=C===s;if(z)return Ht.errors=[{instancePath:e,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=oe,o!==null&&(oe?o.length=oe:o=null)}return Ht.errors=o,d.props=f,s===0}Ht.evaluated={dynamicProps:!0,dynamicItems:!1};const V3=Object.prototype.hasOwnProperty;function De(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=De.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);const l=s;let c=!1;const u=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.contextId===void 0&&(D="contextId")){const G={instancePath:e,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};o===null?o=[G]:o.push(G),s++}else if(t.descriptor!==void 0){let G=t.descriptor;if(s===s)if(G&&typeof G=="object"&&!Array.isArray(G)){let N;if(G.protocol===void 0&&(N="protocol")||G.protocolPath===void 0&&(N="protocolPath")){const W={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};o===null?o=[W]:o.push(W),s++}}else{const N={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[N]:o.push(N),s++}}}var S=u===s;if(c=c||S,S){var h={};h.descriptor=!0}const y=s,p=s,f=s,g=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.contextId===void 0){const D={};o===null?o=[D]:o.push(D),s++}var v=g===s;if(v){const D={instancePath:e,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[D]:o.push(D),s++}else s=f,o!==null&&(f?o.length=f:o=null);var b=p===s;if(b){const D=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let Z=t.descriptor;if(!(Z&&typeof Z=="object"&&!Array.isArray(Z))){const O={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[O]:o.push(O),s++}const N=s,W=s;if(Z&&typeof Z=="object"&&!Array.isArray(Z)&&Z.protocol===void 0){const O={};o===null?o=[O]:o.push(O),s++}var m=W===s;if(m){const O={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[O]:o.push(O),s++}else s=N,o!==null&&(N?o.length=N:o=null)}var b=D===s;if(b){const Z=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.descriptor!==void 0){let W=t.descriptor;if(!(W&&typeof W=="object"&&!Array.isArray(W))){const Y={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[Y]:o.push(Y),s++}const O=s,F=s;if(W&&typeof W=="object"&&!Array.isArray(W)&&W.protocolPath===void 0){const Y={};o===null?o=[Y]:o.push(Y),s++}var w=F===s;if(w){const Y={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[Y]:o.push(Y),s++}else s=O,o!==null&&(O?o.length=O:o=null)}var b=Z===s}}var S=y===s;if(c=c||S,S&&h!==!0&&(h=h||{},h.descriptor=!0),c)s=l,o!==null&&(l?o.length=l:o=null);else{const D={instancePath:e,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return o===null?o=[D]:o.push(D),s++,De.errors=o,!1}if(s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.descriptor===void 0&&(D="descriptor"))return De.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"}],!1;if(h!==!0&&(h=h||{},h.recordId=!0,h.contextId=!0,h.attestation=!0,h.authorization=!0,h.encryption=!0,h.descriptor=!0),t.recordId!==void 0){const G=s;if(typeof t.recordId!="string")return De.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=G===s}else var T=!0;if(T){if(t.contextId!==void 0){let G=t.contextId;const Z=s;if(s===Z)if(typeof G=="string"){if(!WM.test(G))return De.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},message:'must match pattern "^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"'}],!1}else return De.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=Z===s}else var T=!0;if(T){if(t.attestation!==void 0){const G=s;Gt(t.attestation,{instancePath:e+"/attestation",parentData:t,parentDataProperty:"attestation",rootData:i,dynamicAnchors:a})||(o=o===null?Gt.errors:o.concat(Gt.errors),s=o.length);var T=G===s}else var T=!0;if(T){if(t.authorization!==void 0){const G=s;qs(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?qs.errors:o.concat(qs.errors),s=o.length);var T=G===s}else var T=!0;if(T){if(t.encryption!==void 0){let G=t.encryption;const Z=s;if(s===Z)if(G&&typeof G=="object"&&!Array.isArray(G)){let W;if(G.algorithm===void 0&&(W="algorithm")||G.initializationVector===void 0&&(W="initializationVector")||G.keyEncryption===void 0&&(W="keyEncryption"))return De.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:W},message:"must have required property '"+W+"'"}],!1;{const O=s;for(const F in G)if(!(F==="algorithm"||F==="initializationVector"||F==="keyEncryption"))return De.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"}],!1;if(O===s){if(G.algorithm!==void 0){let F=G.algorithm;const Y=s;if(typeof F!="string")return De.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(F!=="A256CTR")return De.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:Ic.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var x=Y===s}else var x=!0;if(x){if(G.initializationVector!==void 0){let F=G.initializationVector;const Y=s;if(s===s)if(typeof F=="string"){if(!Il.test(F))return De.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return De.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var x=Y===s}else var x=!0;if(x)if(G.keyEncryption!==void 0){let F=G.keyEncryption;const Y=s;if(s===Y)if(Array.isArray(F)){if(F.length<1)return De.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var I=!0;const te=F.length;for(let U=0;U<te;U++){let L=F[U];const P=s;if(s===P)if(L&&typeof L=="object"&&!Array.isArray(L)){let X;if(L.rootKeyId===void 0&&(X="rootKeyId")||L.derivationScheme===void 0&&(X="derivationScheme")||L.algorithm===void 0&&(X="algorithm")||L.encryptedKey===void 0&&(X="encryptedKey")||L.initializationVector===void 0&&(X="initializationVector")||L.ephemeralPublicKey===void 0&&(X="ephemeralPublicKey")||L.messageAuthenticationCode===void 0&&(X="messageAuthenticationCode"))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"}],!1;{const ne=s;for(const ae in L)if(!(ae==="rootKeyId"||ae==="derivationScheme"||ae==="derivedPublicKey"||ae==="algorithm"||ae==="encryptedKey"||ae==="initializationVector"||ae==="ephemeralPublicKey"||ae==="messageAuthenticationCode"))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ne===s){if(L.rootKeyId!==void 0){const ae=s;if(typeof L.rootKeyId!="string")return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=ae===s}else var M=!0;if(M){if(L.derivationScheme!==void 0){let ae=L.derivationScheme;const pe=s;if(typeof ae!="string")return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(ae==="dataFormats"||ae==="protocolContext"||ae==="protocolPath"||ae==="schemas"))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:Ic.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;var M=pe===s}else var M=!0;if(M){if(L.derivedPublicKey!==void 0){const ae=s;Ht(L.derivedPublicKey,{instancePath:e+"/encryption/keyEncryption/"+U+"/derivedPublicKey",parentData:L,parentDataProperty:"derivedPublicKey",rootData:i,dynamicAnchors:a})||(o=o===null?Ht.errors:o.concat(Ht.errors),s=o.length);var M=ae===s}else var M=!0;if(M){if(L.algorithm!==void 0){let ae=L.algorithm;const pe=s;if(typeof ae!="string")return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(ae!=="ECIES-ES256K")return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:Ic.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var M=pe===s}else var M=!0;if(M){if(L.encryptedKey!==void 0){let ae=L.encryptedKey;const pe=s;if(s===s)if(typeof ae=="string"){if(!Il.test(ae))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=pe===s}else var M=!0;if(M){if(L.initializationVector!==void 0){let ae=L.initializationVector;const pe=s;if(s===s)if(typeof ae=="string"){if(!Il.test(ae))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=pe===s}else var M=!0;if(M){if(L.ephemeralPublicKey!==void 0){const ae=s;Ht(L.ephemeralPublicKey,{instancePath:e+"/encryption/keyEncryption/"+U+"/ephemeralPublicKey",parentData:L,parentDataProperty:"ephemeralPublicKey",rootData:i,dynamicAnchors:a})||(o=o===null?Ht.errors:o.concat(Ht.errors),s=o.length);var M=ae===s}else var M=!0;if(M)if(L.messageAuthenticationCode!==void 0){let ae=L.messageAuthenticationCode;const pe=s;if(s===s)if(typeof ae=="string"){if(!Il.test(ae))return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=pe===s}else var M=!0}}}}}}}}}else return De.errors=[{instancePath:e+"/encryption/keyEncryption/"+U,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var I=P===s;if(!I)break}}}else return De.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var x=Y===s}else var x=!0}}}}else return De.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=Z===s}else var T=!0;if(T)if(t.descriptor!==void 0){let G=t.descriptor;const Z=s,N=s;let W=!1;const O=s;if(G&&typeof G=="object"&&!Array.isArray(G)){let X;if(G.published===void 0&&(X="published")||G.datePublished===void 0&&(X="datePublished")){const ne={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"};o===null?o=[ne]:o.push(ne),s++}else if(G.published!==void 0){let ne=G.published;if(typeof ne!="boolean"){const ae={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};o===null?o=[ae]:o.push(ae),s++}if(ne!==!0){const ae={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:Ic.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};o===null?o=[ae]:o.push(ae),s++}}}var C=O===s;if(W=W||C,C){var H={};H.published=!0}const F=s,Y=s,ee=s;if(G&&typeof G=="object"&&!Array.isArray(G)&&G.datePublished===void 0){const X={};o===null?o=[X]:o.push(X),s++}var re=ee===s;if(re){const X={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[X]:o.push(X),s++}else s=Y,o!==null&&(Y?o.length=Y:o=null);if(s===F&&G&&typeof G=="object"&&!Array.isArray(G)&&G.published!==void 0){let X=G.published;if(typeof X!="boolean"){const ne={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};o===null?o=[ne]:o.push(ne),s++}if(X!==!1){const ne={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:Ic.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};o===null?o=[ne]:o.push(ne),s++}}var C=F===s;W=W||C,C&&H!==!0&&(H=H||{},H.published=!0);const te=s,U=s,L=s,P=s;if(G&&typeof G=="object"&&!Array.isArray(G)&&G.published===void 0){const X={};o===null?o=[X]:o.push(X),s++}var J=P===s;if(J){const X={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[X]:o.push(X),s++}else s=L,o!==null&&(L?o.length=L:o=null);var z=U===s;if(z){const X=s,ne=s,ae=s;if(G&&typeof G=="object"&&!Array.isArray(G)&&G.datePublished===void 0){const we={};o===null?o=[we]:o.push(we),s++}var oe=ae===s;if(oe){const we={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[we]:o.push(we),s++}else s=ne,o!==null&&(ne?o.length=ne:o=null);var z=X===s}var C=te===s;if(W=W||C,W)s=N,o!==null&&(N?o.length=N:o=null);else{const X={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return o===null?o=[X]:o.push(X),s++,De.errors=o,!1}if(s===Z)if(G&&typeof G=="object"&&!Array.isArray(G)){let X;if(G.interface===void 0&&(X="interface")||G.method===void 0&&(X="method")||G.dataCid===void 0&&(X="dataCid")||G.dataSize===void 0&&(X="dataSize")||G.dateCreated===void 0&&(X="dateCreated")||G.messageTimestamp===void 0&&(X="messageTimestamp")||G.dataFormat===void 0&&(X="dataFormat"))return De.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"}],!1;{const ne=s;for(const ae in G)if(!V3.call(Ic.properties.descriptor.properties,ae))return De.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ne===s){let ae;if(G.parentId!==void 0&&G.protocol===void 0&&(ae="protocol"))return De.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:ae,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(G.interface!==void 0){let pe=G.interface;const we=s;if(typeof pe!="string")return De.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(pe!=="Records")return De.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:Ic.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var V=we===s}else var V=!0;if(V){if(G.method!==void 0){let pe=G.method;const we=s;if(typeof pe!="string")return De.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(pe!=="Write")return De.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:Ic.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var V=we===s}else var V=!0;if(V){if(G.recipient!==void 0){let pe=G.recipient;const we=s;if(s===s)if(typeof pe=="string"){if(!sd.test(pe))return De.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return De.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=we===s}else var V=!0;if(V){if(G.protocol!==void 0){const pe=s;if(typeof G.protocol!="string")return De.errors=[{instancePath:e+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=pe===s}else var V=!0;if(V){if(G.protocolPath!==void 0){let pe=G.protocolPath;const we=s;if(s===we)if(typeof pe=="string"){if(!YM.test(pe))return De.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}else return De.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=we===s}else var V=!0;if(V){if(G.schema!==void 0){const pe=s;if(typeof G.schema!="string")return De.errors=[{instancePath:e+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=pe===s}else var V=!0;if(V){if(G.tags!==void 0){let pe=G.tags;const we=s;if(s===we)if(pe&&typeof pe=="object"&&!Array.isArray(pe)){if(Object.keys(pe).length>10)return De.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/maxProperties",keyword:"maxProperties",params:{limit:10},message:"must NOT have more than 10 properties"}],!1;if(Object.keys(pe).length<1)return De.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const xe in pe){let Ee=pe[xe];const Ne=s,Qe=s;let ie=!1,ce=null;const K=s;if(typeof Ee!="string"){const k={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[k]:o.push(k),s++}var q=K===s;q&&(ie=!0,ce=0);const A=s;if(!(typeof Ee=="number"&&isFinite(Ee))){const k={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[k]:o.push(k),s++}var q=A===s;if(q&&ie)ie=!1,ce=[ce,1];else{q&&(ie=!0,ce=1);const k=s;if(typeof Ee!="boolean"){const fe={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};o===null?o=[fe]:o.push(fe),s++}var q=k===s;if(q&&ie)ie=!1,ce=[ce,2];else{q&&(ie=!0,ce=2);const fe=s;if(s===fe)if(Array.isArray(Ee))if(Ee.length>10){const be={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};o===null?o=[be]:o.push(be),s++}else if(Ee.length<1){const be={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};o===null?o=[be]:o.push(be),s++}else{var Q=!0;const be=Ee.length;for(let Je=0;Je<be;Je++){const _t=s;if(typeof Ee[Je]!="string"){const yt={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Je,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/items/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[yt]:o.push(yt),s++}var Q=_t===s;if(!Q)break}}else{const be={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[be]:o.push(be),s++}var q=fe===s;if(q&&ie)ie=!1,ce=[ce,3];else{q&&(ie=!0,ce=3);const be=s;if(s===be)if(Array.isArray(Ee))if(Ee.length>10){const _t={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};o===null?o=[_t]:o.push(_t),s++}else if(Ee.length<1){const _t={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};o===null?o=[_t]:o.push(_t),s++}else{var R=!0;const _t=Ee.length;for(let Rt=0;Rt<_t;Rt++){let yt=Ee[Rt];const Pt=s;if(!(typeof yt=="number"&&isFinite(yt))){const vs={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Rt,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/items/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[vs]:o.push(vs),s++}var R=Pt===s;if(!R)break}}else{const _t={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[_t]:o.push(_t),s++}var q=be===s;q&&ie?(ie=!1,ce=[ce,4]):q&&(ie=!0,ce=4)}}}if(ie)s=Qe,o!==null&&(Qe?o.length=Qe:o=null);else{const k={instancePath:e+"/descriptor/tags/"+xe.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:ce},message:"must match exactly one schema in oneOf"};return o===null?o=[k]:o.push(k),s++,De.errors=o,!1}var B=Ne===s;if(!B)break}}else return De.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var V=we===s}else var V=!0;if(V){if(G.parentId!==void 0){const pe=s;if(typeof G.parentId!="string")return De.errors=[{instancePath:e+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=pe===s}else var V=!0;if(V){if(G.dataCid!==void 0){const pe=s;if(typeof G.dataCid!="string")return De.errors=[{instancePath:e+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=pe===s}else var V=!0;if(V){if(G.dataSize!==void 0){let pe=G.dataSize;const we=s;if(!(typeof pe=="number"&&isFinite(pe)))return De.errors=[{instancePath:e+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var V=we===s}else var V=!0;if(V){if(G.dateCreated!==void 0){let pe=G.dateCreated;const we=s;if(s===s)if(typeof pe=="string"){if(!nn.test(pe))return De.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return De.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=we===s}else var V=!0;if(V){if(G.messageTimestamp!==void 0){let pe=G.messageTimestamp;const we=s;if(s===s)if(typeof pe=="string"){if(!nn.test(pe))return De.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return De.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=we===s}else var V=!0;if(V){if(G.published!==void 0){const pe=s;if(typeof G.published!="boolean")return De.errors=[{instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var V=pe===s}else var V=!0;if(V){if(G.datePublished!==void 0){let pe=G.datePublished;const we=s;if(s===s)if(typeof pe=="string"){if(!nn.test(pe))return De.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return De.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=we===s}else var V=!0;if(V)if(G.dataFormat!==void 0){const pe=s;if(typeof G.dataFormat!="string")return De.errors=[{instancePath:e+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=pe===s}else var V=!0}}}}}}}}}}}}}}}}else return De.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=Z===s}else var T=!0}}}}}else return De.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return De.errors=o,d.props=h,s===0}De.evaluated={dynamicProps:!0,dynamicItems:!1};function Mo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Mo.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),!De(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:a}))o=o===null?De.errors:o.concat(De.errors),s=o.length;else var l=De.evaluated.props;if(s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.recordId===void 0&&(u="recordId")||t.authorization===void 0&&(u="authorization")||t.encodedData===void 0&&(u="encodedData"))return Mo.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;if(l!==!0&&(l=l||{},l.encodedData=!0),t.encodedData!==void 0){const h=s;if(typeof t.encodedData!="string")return Mo.errors=[{instancePath:e+"/encodedData",schemaPath:"#/properties/encodedData/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=h===s}else var c=!0;if(c&&l!==!0){for(const h in t)if(!l||!l[h])return Mo.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:h},message:"must NOT have unevaluated properties"}],!1}}else return Mo.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Mo.errors=o,s===0}Mo.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Wr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Wr.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){const c=s;for(const u in t)if(!(u==="signature"||u==="authorDelegatedGrant"))return Wr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;if(c===s){if(t.signature!==void 0){const u=s;Gt(t.signature,{instancePath:e+"/signature",parentData:t,parentDataProperty:"signature",rootData:i,dynamicAnchors:a})||(o=o===null?Gt.errors:o.concat(Gt.errors),s=o.length);var l=u===s}else var l=!0;if(l)if(t.authorDelegatedGrant!==void 0){const u=s;Mo(t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:t,parentDataProperty:"authorDelegatedGrant",rootData:i,dynamicAnchors:a})||(o=o===null?Mo.errors:o.concat(Mo.errors),s=o.length);var l=u===s}else var l=!0}}else return Wr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Wr.errors=o,s===0}Wr.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const ZM=qs,XM=yn,IT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-delete.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId","prune"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},recordId:{type:"string"},prune:{type:"boolean"}}}}};function yn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=yn.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.authorization===void 0&&(u="authorization")||t.descriptor===void 0&&(u="descriptor"))return yn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const h=s;for(const y in t)if(!(y==="authorization"||y==="descriptor"))return yn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(h===s){if(t.authorization!==void 0){const y=s;Wr(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?Wr.errors:o.concat(Wr.errors),s=o.length);var l=y===s}else var l=!0;if(l)if(t.descriptor!==void 0){let y=t.descriptor;const p=s;if(s===p)if(y&&typeof y=="object"&&!Array.isArray(y)){let g;if(y.interface===void 0&&(g="interface")||y.method===void 0&&(g="method")||y.messageTimestamp===void 0&&(g="messageTimestamp")||y.recordId===void 0&&(g="recordId")||y.prune===void 0&&(g="prune"))return yn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{const v=s;for(const b in y)if(!(b==="interface"||b==="method"||b==="messageTimestamp"||b==="recordId"||b==="prune"))return yn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(v===s){if(y.interface!==void 0){let b=y.interface;const m=s;if(typeof b!="string")return yn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Records")return yn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:IT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.method!==void 0){let b=y.method;const m=s;if(typeof b!="string")return yn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Delete")return yn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:IT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.messageTimestamp!==void 0){let b=y.messageTimestamp;const m=s;if(s===s)if(typeof b=="string"){if(!nn.test(b))return yn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return yn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c){if(y.recordId!==void 0){const b=s;if(typeof y.recordId!="string")return yn.errors=[{instancePath:e+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=b===s}else var c=!0;if(c)if(y.prune!==void 0){const b=s;if(typeof y.prune!="boolean")return yn.errors=[{instancePath:e+"/descriptor/prune",schemaPath:"#/properties/descriptor/properties/prune/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var c=b===s}else var c=!0}}}}}}else return yn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=p===s}else var l=!0}}}else return yn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return yn.errors=o,s===0}yn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const QM=Qt,Ib={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},U2={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json",type:"object",minProperties:1,additionalProperties:!1,required:["messageCid","value"],properties:{messageCid:{type:"string"},value:{type:["string","number"]}}},kT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-filter.json",type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},recipient:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},contextId:{type:"string"},schema:{type:"string"},tags:{type:"object",minProperties:1,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"object",minProperties:1,additionalProperties:!1,properties:{startsWith:{type:"string"}}},{$ref:"https://identity.foundation/dwn/json-schemas/string-range-filter.json"},{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"}]}},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function Ue(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ue.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Ue.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const W=s;for(const O in t)if(!V3.call(kT.properties,O))return Ue.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"}],!1;if(W===s){if(t.datePublished!==void 0){const O=s,F=s;let Y=!1,ee=null;const te=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let j;if(t.published===void 0&&(j="published")){const X={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};o===null?o=[X]:o.push(X),s++}else if(t.published!==void 0&&t.published!==!0){const X={instancePath:e+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:kT.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};o===null?o=[X]:o.push(X),s++}}var u=te===s;if(u){Y=!0,ee=0;var l={};l.published=!0}const U=s,L=s,P=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.published===void 0){const j={};o===null?o=[j]:o.push(j),s++}var c=P===s;if(c){const j={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[j]:o.push(j),s++}else s=L,o!==null&&(L?o.length=L:o=null);var u=U===s;if(u&&Y?(Y=!1,ee=[ee,1]):u&&(Y=!0,ee=1),Y)s=F,o!==null&&(F?o.length=F:o=null);else{const j={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:ee},message:"must match exactly one schema in oneOf"};return o===null?o=[j]:o.push(j),s++,Ue.errors=o,!1}var h=O===s}else var h=!0;if(h){if(t.protocol!==void 0){const O=s;if(typeof t.protocol!="string")return Ue.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.protocolPath!==void 0){const O=s;if(typeof t.protocolPath!="string")return Ue.errors=[{instancePath:e+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.author!==void 0){let O=t.author;const F=s,Y=s;let ee=!1,te=null;const U=s;if(s===s)if(typeof O=="string"){if(!sd.test(O)){const X={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};o===null?o=[X]:o.push(X),s++}}else{const X={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[X]:o.push(X),s++}var f=U===s;f&&(ee=!0,te=0);const P=s;if(s===P)if(Array.isArray(O)){var p=!0;const X=O.length;for(let ne=0;ne<X;ne++){let ae=O[ne];const pe=s;if(s===s)if(typeof ae=="string"){if(!sd.test(ae)){const xe={instancePath:e+"/author/"+ne,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};o===null?o=[xe]:o.push(xe),s++}}else{const xe={instancePath:e+"/author/"+ne,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[xe]:o.push(xe),s++}var p=pe===s;if(!p)break}}else{const X={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[X]:o.push(X),s++}var f=P===s;if(f&&ee?(ee=!1,te=[te,1]):f&&(ee=!0,te=1),ee)s=Y,o!==null&&(Y?o.length=Y:o=null);else{const X={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf",keyword:"oneOf",params:{passingSchemas:te},message:"must match exactly one schema in oneOf"};return o===null?o=[X]:o.push(X),s++,Ue.errors=o,!1}var y=F===s}else var y=!0;if(y){if(t.attester!==void 0){let O=t.attester;const F=s;if(s===s)if(typeof O=="string"){if(!sd.test(O))return Ue.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Ue.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=F===s}else var y=!0;if(y){if(t.recipient!==void 0){let O=t.recipient;const F=s,Y=s;let ee=!1,te=null;const U=s;if(s===s)if(typeof O=="string"){if(!sd.test(O)){const X={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};o===null?o=[X]:o.push(X),s++}}else{const X={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[X]:o.push(X),s++}var v=U===s;v&&(ee=!0,te=0);const P=s;if(s===P)if(Array.isArray(O)){var g=!0;const X=O.length;for(let ne=0;ne<X;ne++){let ae=O[ne];const pe=s;if(s===s)if(typeof ae=="string"){if(!sd.test(ae)){const xe={instancePath:e+"/recipient/"+ne,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};o===null?o=[xe]:o.push(xe),s++}}else{const xe={instancePath:e+"/recipient/"+ne,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[xe]:o.push(xe),s++}var g=pe===s;if(!g)break}}else{const X={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[X]:o.push(X),s++}var v=P===s;if(v&&ee?(ee=!1,te=[te,1]):v&&(ee=!0,te=1),ee)s=Y,o!==null&&(Y?o.length=Y:o=null);else{const X={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf",keyword:"oneOf",params:{passingSchemas:te},message:"must match exactly one schema in oneOf"};return o===null?o=[X]:o.push(X),s++,Ue.errors=o,!1}var y=F===s}else var y=!0;if(y){if(t.contextId!==void 0){const O=s;if(typeof t.contextId!="string")return Ue.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.schema!==void 0){const O=s;if(typeof t.schema!="string")return Ue.errors=[{instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.tags!==void 0){let O=t.tags;const F=s;if(s===F)if(O&&typeof O=="object"&&!Array.isArray(O)){if(Object.keys(O).length<1)return Ue.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const ee in O){let te=O[ee];const U=s,L=s;let P=!1,j=null;const X=s;if(typeof te!="string"){const ae={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var b=X===s;b&&(P=!0,j=0);const ne=s;if(!(typeof te=="number"&&isFinite(te))){const ae={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[ae]:o.push(ae),s++}var b=ne===s;if(b&&P)P=!1,j=[j,1];else{b&&(P=!0,j=1);const ae=s;if(typeof te!="boolean"){const we={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};o===null?o=[we]:o.push(we),s++}var b=ae===s;if(b&&P)P=!1,j=[j,2];else{b&&(P=!0,j=2);const we=s;if(s===we)if(te&&typeof te=="object"&&!Array.isArray(te))if(Object.keys(te).length<1){const xe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};o===null?o=[xe]:o.push(xe),s++}else{const xe=s;for(const Ee in te)if(Ee!=="startsWith"){const Ne={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ee},message:"must NOT have additional properties"};o===null?o=[Ne]:o.push(Ne),s++;break}if(xe===s&&te.startsWith!==void 0&&typeof te.startsWith!="string"){const Ee={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/startsWith",schemaPath:"#/properties/tags/additionalProperties/oneOf/3/properties/startsWith/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Ee]:o.push(Ee),s++}}else{const xe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[xe]:o.push(xe),s++}var b=we===s;if(b&&P)P=!1,j=[j,3];else{b&&(P=!0,j=3);const xe=s;if(s===s)if(te&&typeof te=="object"&&!Array.isArray(te))if(Object.keys(te).length<1){const Qe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};o===null?o=[Qe]:o.push(Qe),s++}else{const Qe=s;for(const ie in te)if(!(ie==="gt"||ie==="gte"||ie==="lt"||ie==="lte")){const ce={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ie},message:"must NOT have additional properties"};o===null?o=[ce]:o.push(ce),s++;break}if(Qe===s){if(te.gt!==void 0){const ie=s,ce=s,K=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.gte===void 0){const A={};o===null?o=[A]:o.push(A),s++}var m=K===s;if(m){const A={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[A]:o.push(A),s++}else s=ce,o!==null&&(ce?o.length=ce:o=null);var w=ie===s}else var w=!0;if(w){if(te.gte!==void 0){const ie=s,ce=s,K=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.gt===void 0){const k={};o===null?o=[k]:o.push(k),s++}var S=K===s;if(S){const k={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[k]:o.push(k),s++}else s=ce,o!==null&&(ce?o.length=ce:o=null);var w=ie===s}else var w=!0;if(w){if(te.lt!==void 0){const ie=s,ce=s,K=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.lte===void 0){const k={};o===null?o=[k]:o.push(k),s++}var T=K===s;if(T){const k={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[k]:o.push(k),s++}else s=ce,o!==null&&(ce?o.length=ce:o=null);var w=ie===s}else var w=!0;if(w){if(te.lte!==void 0){const ie=s,ce=s,K=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.lt===void 0){const k={};o===null?o=[k]:o.push(k),s++}var x=K===s;if(x){const k={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[k]:o.push(k),s++}else s=ce,o!==null&&(ce?o.length=ce:o=null);var w=ie===s}else var w=!0;if(w){if(te.gt!==void 0){const ie=s;if(typeof te.gt!="string"){const ce={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ce]:o.push(ce),s++}var I=ie===s}else var I=!0;if(I){if(te.gte!==void 0){const ie=s;if(typeof te.gte!="string"){const K={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[K]:o.push(K),s++}var I=ie===s}else var I=!0;if(I){if(te.lt!==void 0){const ie=s;if(typeof te.lt!="string"){const K={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[K]:o.push(K),s++}var I=ie===s}else var I=!0;if(I)if(te.lte!==void 0){const ie=s;if(typeof te.lte!="string"){const K={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[K]:o.push(K),s++}var I=ie===s}else var I=!0}}}}}}}}else{const Qe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[Qe]:o.push(Qe),s++}var b=xe===s;if(b&&P)P=!1,j=[j,4];else{b&&(P=!0,j=4);const Qe=s;if(s===s)if(te&&typeof te=="object"&&!Array.isArray(te))if(Object.keys(te).length<1){const K={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};o===null?o=[K]:o.push(K),s++}else{const K=s;for(const A in te)if(!(A==="gt"||A==="gte"||A==="lt"||A==="lte")){const k={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:A},message:"must NOT have additional properties"};o===null?o=[k]:o.push(k),s++;break}if(K===s){if(te.gt!==void 0){const A=s,k=s,se=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.gte===void 0){const fe={};o===null?o=[fe]:o.push(fe),s++}var M=se===s;if(M){const fe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[fe]:o.push(fe),s++}else s=k,o!==null&&(k?o.length=k:o=null);var H=A===s}else var H=!0;if(H){if(te.gte!==void 0){const A=s,k=s,se=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.gt===void 0){const me={};o===null?o=[me]:o.push(me),s++}var re=se===s;if(re){const me={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[me]:o.push(me),s++}else s=k,o!==null&&(k?o.length=k:o=null);var H=A===s}else var H=!0;if(H){if(te.lt!==void 0){const A=s,k=s,se=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.lte===void 0){const me={};o===null?o=[me]:o.push(me),s++}var J=se===s;if(J){const me={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[me]:o.push(me),s++}else s=k,o!==null&&(k?o.length=k:o=null);var H=A===s}else var H=!0;if(H){if(te.lte!==void 0){const A=s,k=s,se=s;if(te&&typeof te=="object"&&!Array.isArray(te)&&te.lt===void 0){const me={};o===null?o=[me]:o.push(me),s++}var z=se===s;if(z){const me={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};o===null?o=[me]:o.push(me),s++}else s=k,o!==null&&(k?o.length=k:o=null);var H=A===s}else var H=!0;if(H){if(te.gt!==void 0){let A=te.gt;const k=s;if(!(typeof A=="number"&&isFinite(A))){const se={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[se]:o.push(se),s++}var oe=k===s}else var oe=!0;if(oe){if(te.gte!==void 0){let A=te.gte;const k=s;if(!(typeof A=="number"&&isFinite(A))){const fe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[fe]:o.push(fe),s++}var oe=k===s}else var oe=!0;if(oe){if(te.lt!==void 0){let A=te.lt;const k=s;if(!(typeof A=="number"&&isFinite(A))){const fe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[fe]:o.push(fe),s++}var oe=k===s}else var oe=!0;if(oe)if(te.lte!==void 0){let A=te.lte;const k=s;if(!(typeof A=="number"&&isFinite(A))){const fe={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[fe]:o.push(fe),s++}var oe=k===s}else var oe=!0}}}}}}}}else{const K={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[K]:o.push(K),s++}var b=Qe===s;b&&P?(P=!1,j=[j,5]):b&&(P=!0,j=5)}}}}if(P)s=L,o!==null&&(L?o.length=L:o=null);else{const ae={instancePath:e+"/tags/"+ee.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:j},message:"must match exactly one schema in oneOf"};return o===null?o=[ae]:o.push(ae),s++,Ue.errors=o,!1}var C=U===s;if(!C)break}}else return Ue.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=F===s}else var y=!0;if(y){if(t.recordId!==void 0){const O=s;if(typeof t.recordId!="string")return Ue.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.parentId!==void 0){const O=s;if(typeof t.parentId!="string")return Ue.errors=[{instancePath:e+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.published!==void 0){const O=s;if(typeof t.published!="boolean")return Ue.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var y=O===s}else var y=!0;if(y){if(t.dataFormat!==void 0){const O=s;if(typeof t.dataFormat!="string")return Ue.errors=[{instancePath:e+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.dataSize!==void 0){let O=t.dataSize;const F=s;if(s===s)if(O&&typeof O=="object"&&!Array.isArray(O)){if(Object.keys(O).length<1)return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const te=s;for(const U in O)if(!(U==="gt"||U==="gte"||U==="lt"||U==="lte"))return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:U},message:"must NOT have additional properties"}],!1;if(te===s){if(O.gt!==void 0){const U=s,L=s,P=s;if(O&&typeof O=="object"&&!Array.isArray(O)&&O.gte===void 0){const j={};o===null?o=[j]:o.push(j),s++}var V=P===s;if(V)return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=L,o!==null&&(L?o.length=L:o=null);var q=U===s}else var q=!0;if(q){if(O.gte!==void 0){const U=s,L=s,P=s;if(O&&typeof O=="object"&&!Array.isArray(O)&&O.gt===void 0){const X={};o===null?o=[X]:o.push(X),s++}var Q=P===s;if(Q)return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=L,o!==null&&(L?o.length=L:o=null);var q=U===s}else var q=!0;if(q){if(O.lt!==void 0){const U=s,L=s,P=s;if(O&&typeof O=="object"&&!Array.isArray(O)&&O.lte===void 0){const X={};o===null?o=[X]:o.push(X),s++}var R=P===s;if(R)return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=L,o!==null&&(L?o.length=L:o=null);var q=U===s}else var q=!0;if(q){if(O.lte!==void 0){const U=s,L=s,P=s;if(O&&typeof O=="object"&&!Array.isArray(O)&&O.lt===void 0){const X={};o===null?o=[X]:o.push(X),s++}var B=P===s;if(B)return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=L,o!==null&&(L?o.length=L:o=null);var q=U===s}else var q=!0;if(q){if(O.gt!==void 0){let U=O.gt;const L=s;if(!(typeof U=="number"&&isFinite(U)))return Ue.errors=[{instancePath:e+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var D=L===s}else var D=!0;if(D){if(O.gte!==void 0){let U=O.gte;const L=s;if(!(typeof U=="number"&&isFinite(U)))return Ue.errors=[{instancePath:e+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var D=L===s}else var D=!0;if(D){if(O.lt!==void 0){let U=O.lt;const L=s;if(!(typeof U=="number"&&isFinite(U)))return Ue.errors=[{instancePath:e+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var D=L===s}else var D=!0;if(D)if(O.lte!==void 0){let U=O.lte;const L=s;if(!(typeof U=="number"&&isFinite(U)))return Ue.errors=[{instancePath:e+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var D=L===s}else var D=!0}}}}}}}}}else return Ue.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=F===s}else var y=!0;if(y){if(t.dataCid!==void 0){const O=s;if(typeof t.dataCid!="string")return Ue.errors=[{instancePath:e+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=O===s}else var y=!0;if(y){if(t.dateCreated!==void 0){let O=t.dateCreated;const F=s;if(s===F)if(O&&typeof O=="object"&&!Array.isArray(O)){if(Object.keys(O).length<1)return Ue.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ee=s;for(const te in O)if(!(te==="from"||te==="to"))return Ue.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ee===s){if(O.from!==void 0){let te=O.from;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=U===s}else var G=!0;if(G)if(O.to!==void 0){let te=O.to;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=U===s}else var G=!0}}}else return Ue.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=F===s}else var y=!0;if(y){if(t.datePublished!==void 0){let O=t.datePublished;const F=s;if(s===F)if(O&&typeof O=="object"&&!Array.isArray(O)){if(Object.keys(O).length<1)return Ue.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ee=s;for(const te in O)if(!(te==="from"||te==="to"))return Ue.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ee===s){if(O.from!==void 0){let te=O.from;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Z=U===s}else var Z=!0;if(Z)if(O.to!==void 0){let te=O.to;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Z=U===s}else var Z=!0}}}else return Ue.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=F===s}else var y=!0;if(y)if(t.dateUpdated!==void 0){let O=t.dateUpdated;const F=s;if(s===F)if(O&&typeof O=="object"&&!Array.isArray(O)){if(Object.keys(O).length<1)return Ue.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ee=s;for(const te in O)if(!(te==="from"||te==="to"))return Ue.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ee===s){if(O.from!==void 0){let te=O.from;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=U===s}else var N=!0;if(N)if(O.to!==void 0){let te=O.to;const U=s;if(s===s)if(typeof te=="string"){if(!nn.test(te))return Ue.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Ue.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=U===s}else var N=!0}}}else return Ue.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=F===s}else var y=!0}}}}}}}}}}}}}}}}}}}else return Ue.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ue.errors=o,s===0}Ue.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Qt(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Qt.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.descriptor===void 0&&(y="descriptor"))return Qt.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const p=s;for(const f in t)if(!(f==="authorization"||f==="descriptor"))return Qt.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(p===s){if(t.authorization!==void 0){const f=s;Wr(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?Wr.errors:o.concat(Wr.errors),s=o.length);var l=f===s}else var l=!0;if(l)if(t.descriptor!==void 0){let f=t.descriptor;const g=s;if(s===g)if(f&&typeof f=="object"&&!Array.isArray(f)){let b;if(f.interface===void 0&&(b="interface")||f.method===void 0&&(b="method")||f.messageTimestamp===void 0&&(b="messageTimestamp")||f.filter===void 0&&(b="filter"))return Qt.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{const m=s;for(const w in f)if(!(w==="interface"||w==="method"||w==="messageTimestamp"||w==="filter"||w==="pagination"||w==="dateSort"))return Qt.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"}],!1;if(m===s){if(f.interface!==void 0){let w=f.interface;const S=s;if(typeof w!="string")return Qt.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(w!=="Records")return Qt.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:Ib.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=S===s}else var c=!0;if(c){if(f.method!==void 0){let w=f.method;const S=s;if(typeof w!="string")return Qt.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(w!=="Query")return Qt.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:Ib.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=S===s}else var c=!0;if(c){if(f.messageTimestamp!==void 0){let w=f.messageTimestamp;const S=s;if(s===s)if(typeof w=="string"){if(!nn.test(w))return Qt.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Qt.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=S===s}else var c=!0;if(c){if(f.filter!==void 0){const w=s;Ue(f.filter,{instancePath:e+"/descriptor/filter",parentData:f,parentDataProperty:"filter",rootData:i,dynamicAnchors:a})||(o=o===null?Ue.errors:o.concat(Ue.errors),s=o.length);var c=w===s}else var c=!0;if(c){if(f.pagination!==void 0){let w=f.pagination;const S=s;if(s===S)if(w&&typeof w=="object"&&!Array.isArray(w)){const x=s;for(const I in w)if(!(I==="limit"||I==="cursor"))return Qt.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;if(x===s){if(w.limit!==void 0){let I=w.limit;const M=s;if(s===M)if(typeof I=="number"&&isFinite(I)){if(I<1||isNaN(I))return Qt.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}else return Qt.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var u=M===s}else var u=!0;if(u)if(w.cursor!==void 0){let I=w.cursor;const M=s;if(s===s)if(I&&typeof I=="object"&&!Array.isArray(I)){if(Object.keys(I).length<1)return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let J;if(I.messageCid===void 0&&(J="messageCid")||I.value===void 0&&(J="value"))return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"}],!1;{const z=s;for(const oe in I)if(!(oe==="messageCid"||oe==="value"))return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:oe},message:"must NOT have additional properties"}],!1;if(z===s){if(I.messageCid!==void 0){const oe=s;if(typeof I.messageCid!="string")return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=oe===s}else var h=!0;if(h)if(I.value!==void 0){let oe=I.value;const C=s;if(typeof oe!="string"&&!(typeof oe=="number"&&isFinite(oe)))return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:U2.properties.value.type},message:"must be string,number"}],!1;var h=C===s}else var h=!0}}}}else return Qt.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=M===s}else var u=!0}}else return Qt.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=S===s}else var c=!0;if(c)if(f.dateSort!==void 0){let w=f.dateSort;const S=s;if(typeof w!="string")return Qt.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(w==="createdAscending"||w==="createdDescending"||w==="publishedAscending"||w==="publishedDescending"))return Qt.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:Ib.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;var c=S===s}else var c=!0}}}}}}}else return Qt.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=g===s}else var l=!0}}}else return Qt.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Qt.errors=o,s===0}Qt.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const JM=si,OT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function si(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=si.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.descriptor===void 0&&(u="descriptor"))return si.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const h=s;for(const y in t)if(!(y==="authorization"||y==="descriptor"))return si.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(h===s){if(t.authorization!==void 0){const y=s;Wr(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?Wr.errors:o.concat(Wr.errors),s=o.length);var l=y===s}else var l=!0;if(l)if(t.descriptor!==void 0){let y=t.descriptor;const p=s;if(s===p)if(y&&typeof y=="object"&&!Array.isArray(y)){let g;if(y.interface===void 0&&(g="interface")||y.method===void 0&&(g="method")||y.messageTimestamp===void 0&&(g="messageTimestamp")||y.filter===void 0&&(g="filter"))return si.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{const v=s;for(const b in y)if(!(b==="interface"||b==="method"||b==="messageTimestamp"||b==="filter"))return si.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(v===s){if(y.interface!==void 0){let b=y.interface;const m=s;if(typeof b!="string")return si.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Records")return si.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:OT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.method!==void 0){let b=y.method;const m=s;if(typeof b!="string")return si.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Subscribe")return si.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:OT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.messageTimestamp!==void 0){let b=y.messageTimestamp;const m=s;if(s===s)if(typeof b=="string"){if(!nn.test(b))return si.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return si.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c)if(y.filter!==void 0){const b=s;Ue(y.filter,{instancePath:e+"/descriptor/filter",parentData:y,parentDataProperty:"filter",rootData:i,dynamicAnchors:a})||(o=o===null?Ue.errors:o.concat(Ue.errors),s=o.length);var c=b===s}else var c=!0}}}}}else return si.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=p===s}else var l=!0}}}else return si.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return si.errors=o,s===0}si.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const eL=gl;function gl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=gl.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),!De(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:i,dynamicAnchors:a}))o=o===null?De.errors:o.concat(De.errors),s=o.length;else var l=De.evaluated.props;if(s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.recordId===void 0&&(c="recordId")||t.authorization===void 0&&(c="authorization"))return gl.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(l!==!0){for(const u in t)if(!l||!l[u])return gl.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:u},message:"must NOT have unevaluated properties"}],!1}}else return gl.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return gl.errors=o,s===0}gl.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const tL=Mo,rL=De,nL=Sp;function Sp(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Sp.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(Sp.errors=o,s===0):(Sp.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}Sp.evaluated={dynamicProps:!1,dynamicItems:!1};const iL=jn;function jn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=jn.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);const l=s;let c=!1,u=null;const h=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let S;if(t.crv===void 0&&(S="crv")||t.x===void 0&&(S="x")){const T={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};o===null?o=[T]:o.push(T),s++}else{if(t.kty!==void 0){const T=s;if(t.kty!=="EC"){const x={instancePath:e+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};o===null?o=[x]:o.push(x),s++}var y=T===s}else var y=!0;if(y){if(t.crv!==void 0){const T=s;if(typeof t.crv!="string"){const I={instancePath:e+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var y=T===s}else var y=!0;if(y){if(t.x!==void 0){const T=s;if(typeof t.x!="string"){const I={instancePath:e+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var y=T===s}else var y=!0;if(y){if(t.y!==void 0){const T=s;if(typeof t.y!="string"){const I={instancePath:e+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var y=T===s}else var y=!0;if(y)if(t.d!==void 0){const T=s;if(typeof t.d!="string"){const I={instancePath:e+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var y=T===s}else var y=!0}}}}}var v=h===s;if(v){c=!0,u=0;var p={};p.kty=!0,p.crv=!0,p.x=!0,p.y=!0,p.d=!0}const f=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let S;if(t.crv===void 0&&(S="crv")||t.x===void 0&&(S="x")){const T={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};o===null?o=[T]:o.push(T),s++}else{if(t.kty!==void 0){const T=s;if(t.kty!=="OKP"){const x={instancePath:e+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};o===null?o=[x]:o.push(x),s++}var g=T===s}else var g=!0;if(g){if(t.crv!==void 0){const T=s;if(typeof t.crv!="string"){const I={instancePath:e+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var g=T===s}else var g=!0;if(g){if(t.x!==void 0){const T=s;if(typeof t.x!="string"){const I={instancePath:e+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var g=T===s}else var g=!0;if(g)if(t.d!==void 0){const T=s;if(typeof t.d!="string"){const I={instancePath:e+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[I]:o.push(I),s++}var g=T===s}else var g=!0}}}}var v=f===s;if(v&&c)c=!1,u=[u,1];else{v&&(c=!0,u=1,p!==!0&&(p=p||{},p.kty=!0,p.crv=!0,p.x=!0,p.d=!0));const S=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let x;if(t.n===void 0&&(x="n")||t.e===void 0&&(x="e")){const I={instancePath:e,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"};o===null?o=[I]:o.push(I),s++}else{if(t.kty!==void 0){const I=s;if(t.kty!=="RSA"){const M={instancePath:e+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};o===null?o=[M]:o.push(M),s++}var b=I===s}else var b=!0;if(b){if(t.n!==void 0){const I=s;if(typeof t.n!="string"){const H={instancePath:e+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.e!==void 0){const I=s;if(typeof t.e!="string"){const H={instancePath:e+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.d!==void 0){const I=s;if(typeof t.d!="string"){const H={instancePath:e+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.p!==void 0){const I=s;if(typeof t.p!="string"){const H={instancePath:e+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.q!==void 0){const I=s;if(typeof t.q!="string"){const H={instancePath:e+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.dp!==void 0){const I=s;if(typeof t.dp!="string"){const H={instancePath:e+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.dq!==void 0){const I=s;if(typeof t.dq!="string"){const H={instancePath:e+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b){if(t.qi!==void 0){const I=s;if(typeof t.qi!="string"){const H={instancePath:e+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[H]:o.push(H),s++}var b=I===s}else var b=!0;if(b)if(t.oth!==void 0){let I=t.oth;const M=s;if(!(I&&typeof I=="object"&&!Array.isArray(I))){const re={instancePath:e+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[re]:o.push(re),s++}var b=M===s}else var b=!0}}}}}}}}}}var v=S===s;if(v&&c)c=!1,u=[u,2];else{v&&(c=!0,u=2,p!==!0&&(p=p||{},p.kty=!0,p.n=!0,p.e=!0,p.d=!0,p.p=!0,p.q=!0,p.dp=!0,p.dq=!0,p.qi=!0,p.oth=!0));const x=s;if(t&&typeof t=="object"&&!Array.isArray(t)){let M;if(t.k===void 0&&(M="k")){const H={instancePath:e,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:M},message:"must have required property '"+M+"'"};o===null?o=[H]:o.push(H),s++}else{if(t.kty!==void 0){const H=s;if(t.kty!=="oct"){const re={instancePath:e+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};o===null?o=[re]:o.push(re),s++}var m=H===s}else var m=!0;if(m)if(t.k!==void 0){const H=s;if(typeof t.k!="string"){const J={instancePath:e+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[J]:o.push(J),s++}var m=H===s}else var m=!0}}var v=x===s;v&&c?(c=!1,u=[u,3]):v&&(c=!0,u=3,p!==!0&&(p=p||{},p.kty=!0,p.k=!0))}}if(c)s=l,o!==null&&(l?o.length=l:o=null);else{const S={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return o===null?o=[S]:o.push(S),s++,jn.errors=o,!1}if(s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let S;if(t.kty===void 0&&(S="kty"))return jn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;if(p!==!0&&(p=p||{},p.alg=!0,p.kid=!0,p.kty=!0,p.crv=!0,p.use=!0,p.key_ops=!0,p.x5u=!0,p.x5c=!0,p.x5t=!0,p["x5t#S256"]=!0),t.alg!==void 0){const T=s;if(typeof t.alg!="string")return jn.errors=[{instancePath:e+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.kid!==void 0){const T=s;if(typeof t.kid!="string")return jn.errors=[{instancePath:e+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.kty!==void 0){let T=t.kty;const x=s;if(!(T==="EC"||T==="RSA"||T==="oct"||T==="OKP"))return jn.errors=[{instancePath:e+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:K3.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var w=x===s}else var w=!0;if(w){if(t.crv!==void 0){const T=s;if(typeof t.crv!="string")return jn.errors=[{instancePath:e+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.use!==void 0){const T=s;if(typeof t.use!="string")return jn.errors=[{instancePath:e+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.key_ops!==void 0){const T=s;if(typeof t.key_ops!="string")return jn.errors=[{instancePath:e+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.x5u!==void 0){const T=s;if(typeof t.x5u!="string")return jn.errors=[{instancePath:e+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.x5c!==void 0){const T=s;if(typeof t.x5c!="string")return jn.errors=[{instancePath:e+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w){if(t.x5t!==void 0){const T=s;if(typeof t.x5t!="string")return jn.errors=[{instancePath:e+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0;if(w)if(t["x5t#S256"]!==void 0){const T=s;if(typeof t["x5t#S256"]!="string")return jn.errors=[{instancePath:e+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=T===s}else var w=!0}}}}}}}}}else return jn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return jn.errors=o,d.props=p,s===0}jn.evaluated={dynamicProps:!0,dynamicItems:!1};const oL=Gt,sL=ns,aL={$id:"https://identity.foundation/dwn/json-schemas/jwk-verification-method.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,required:["id","type","controller","publicKeyJwk"],properties:{id:{type:"string"},type:{enum:["JsonWebKey","JsonWebKey2020"]},controller:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}};function ns(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=ns.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.id===void 0&&(c="id")||t.type===void 0&&(c="type")||t.controller===void 0&&(c="controller")||t.publicKeyJwk===void 0&&(c="publicKeyJwk"))return ns.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{const u=s;for(const h in t)if(!(h==="id"||h==="type"||h==="controller"||h==="publicKeyJwk"))return ns.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"}],!1;if(u===s){if(t.id!==void 0){const h=s;if(typeof t.id!="string")return ns.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=h===s}else var l=!0;if(l){if(t.type!==void 0){let h=t.type;const y=s;if(!(h==="JsonWebKey"||h==="JsonWebKey2020"))return ns.errors=[{instancePath:e+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:aL.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var l=y===s}else var l=!0;if(l){if(t.controller!==void 0){let h=t.controller;const y=s;if(s===s)if(typeof h=="string"){if(!sd.test(h))return ns.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return ns.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=y===s}else var l=!0;if(l)if(t.publicKeyJwk!==void 0){const h=s;Ht(t.publicKeyJwk,{instancePath:e+"/publicKeyJwk",parentData:t,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:a})||(o=o===null?Ht.errors:o.concat(Ht.errors),s=o.length);var l=h===s}else var l=!0}}}}}else return ns.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ns.errors=o,s===0}ns.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const cL=gr,RT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-filter.json",type:"object",additionalProperties:!1,minProperties:1,properties:{interface:{enum:["Protocols","Records"],type:"string"},method:{enum:["Configure","Delete","Write"],type:"string"},protocol:{type:"string"},messageTimestamp:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}}};function gr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=gr.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return gr.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const u in t)if(!(u==="interface"||u==="method"||u==="protocol"||u==="messageTimestamp"))return gr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(t.interface!==void 0){let u=t.interface;const h=s;if(typeof u!="string")return gr.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(u==="Protocols"||u==="Records"))return gr.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/enum",keyword:"enum",params:{allowedValues:RT.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var l=h===s}else var l=!0;if(l){if(t.method!==void 0){let u=t.method;const h=s;if(typeof u!="string")return gr.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(u==="Configure"||u==="Delete"||u==="Write"))return gr.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:RT.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var l=h===s}else var l=!0;if(l){if(t.protocol!==void 0){const u=s;if(typeof t.protocol!="string")return gr.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l)if(t.messageTimestamp!==void 0){let u=t.messageTimestamp;const h=s;if(u&&typeof u=="object"&&!Array.isArray(u)){if(Object.keys(u).length<1)return gr.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const p in u)if(!(p==="from"||p==="to"))return gr.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;{if(u.from!==void 0){let p=u.from;const f=s;if(typeof p=="string"){if(!nn.test(p))return gr.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return gr.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=f===s}else var c=!0;if(c)if(u.to!==void 0){let p=u.to;const f=s;if(typeof p=="string"){if(!nn.test(p))return gr.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return gr.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=f===s}else var c=!0}}else return gr.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=h===s}else var l=!0}}}}else return gr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return gr.errors=o,s===0}gr.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const dL=$r,jT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-query.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function $r(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=$r.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let y;if(t.authorization===void 0&&(y="authorization")||t.descriptor===void 0&&(y="descriptor"))return $r.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const p=s;for(const f in t)if(!(f==="authorization"||f==="descriptor"))return $r.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"}],!1;if(p===s){if(t.authorization!==void 0){const f=s;$n(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?$n.errors:o.concat($n.errors),s=o.length);var l=f===s}else var l=!0;if(l)if(t.descriptor!==void 0){let f=t.descriptor;const g=s;if(s===g)if(f&&typeof f=="object"&&!Array.isArray(f)){let b;if(f.interface===void 0&&(b="interface")||f.method===void 0&&(b="method")||f.messageTimestamp===void 0&&(b="messageTimestamp")||f.filters===void 0&&(b="filters"))return $r.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;{const m=s;for(const w in f)if(!(w==="interface"||w==="method"||w==="messageTimestamp"||w==="filters"||w==="cursor"))return $r.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"}],!1;if(m===s){if(f.interface!==void 0){let w=f.interface;const S=s;if(typeof w!="string")return $r.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(w!=="Messages")return $r.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:jT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=S===s}else var c=!0;if(c){if(f.method!==void 0){let w=f.method;const S=s;if(typeof w!="string")return $r.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(w!=="Query")return $r.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:jT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=S===s}else var c=!0;if(c){if(f.messageTimestamp!==void 0){let w=f.messageTimestamp;const S=s;if(s===s)if(typeof w=="string"){if(!nn.test(w))return $r.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return $r.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=S===s}else var c=!0;if(c){if(f.filters!==void 0){let w=f.filters;const S=s;if(s===S)if(Array.isArray(w)){var u=!0;const x=w.length;for(let I=0;I<x;I++){const M=s;gr(w[I],{instancePath:e+"/descriptor/filters/"+I,parentData:w,parentDataProperty:I,rootData:i,dynamicAnchors:a})||(o=o===null?gr.errors:o.concat(gr.errors),s=o.length);var u=M===s;if(!u)break}}else return $r.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=S===s}else var c=!0;if(c)if(f.cursor!==void 0){let w=f.cursor;const S=s;if(s===s)if(w&&typeof w=="object"&&!Array.isArray(w)){if(Object.keys(w).length<1)return $r.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let I;if(w.messageCid===void 0&&(I="messageCid")||w.value===void 0&&(I="value"))return $r.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:I},message:"must have required property '"+I+"'"}],!1;{const M=s;for(const H in w)if(!(H==="messageCid"||H==="value"))return $r.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:H},message:"must NOT have additional properties"}],!1;if(M===s){if(w.messageCid!==void 0){const H=s;if(typeof w.messageCid!="string")return $r.errors=[{instancePath:e+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=H===s}else var h=!0;if(h)if(w.value!==void 0){let H=w.value;const re=s;if(typeof H!="string"&&!(typeof H=="number"&&isFinite(H)))return $r.errors=[{instancePath:e+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:U2.properties.value.type},message:"must be string,number"}],!1;var h=re===s}else var h=!0}}}}else return $r.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=S===s}else var c=!0}}}}}}else return $r.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=g===s}else var l=!0}}}else return $r.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $r.errors=o,s===0}$r.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const lL=Cn,CT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-read.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageCid:{type:"string"}}}}};function Cn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Cn.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.authorization===void 0&&(u="authorization")||t.descriptor===void 0&&(u="descriptor"))return Cn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const h=s;for(const y in t)if(!(y==="authorization"||y==="descriptor"))return Cn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(h===s){if(t.authorization!==void 0){const y=s;$n(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?$n.errors:o.concat($n.errors),s=o.length);var l=y===s}else var l=!0;if(l)if(t.descriptor!==void 0){let y=t.descriptor;const p=s;if(s===p)if(y&&typeof y=="object"&&!Array.isArray(y)){let g;if(y.interface===void 0&&(g="interface")||y.method===void 0&&(g="method")||y.messageTimestamp===void 0&&(g="messageTimestamp"))return Cn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{const v=s;for(const b in y)if(!(b==="interface"||b==="method"||b==="messageTimestamp"||b==="messageCid"))return Cn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(v===s){if(y.interface!==void 0){let b=y.interface;const m=s;if(typeof b!="string")return Cn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Messages")return Cn.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:CT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.method!==void 0){let b=y.method;const m=s;if(typeof b!="string")return Cn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Read")return Cn.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:CT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.messageTimestamp!==void 0){let b=y.messageTimestamp;const m=s;if(s===s)if(typeof b=="string"){if(!nn.test(b))return Cn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Cn.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c)if(y.messageCid!==void 0){const b=s;if(typeof y.messageCid!="string")return Cn.errors=[{instancePath:e+"/descriptor/messageCid",schemaPath:"#/properties/descriptor/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=b===s}else var c=!0}}}}}else return Cn.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=p===s}else var l=!0}}}else return Cn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Cn.errors=o,s===0}Cn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const uL=ai,NT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor","authorization"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{type:"string"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}}}}}};function ai(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=ai.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let h;if(t.descriptor===void 0&&(h="descriptor")||t.authorization===void 0&&(h="authorization"))return ai.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;{const y=s;for(const p in t)if(!(p==="authorization"||p==="descriptor"))return ai.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;if(y===s){if(t.authorization!==void 0){const p=s;$n(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?$n.errors:o.concat($n.errors),s=o.length);var l=p===s}else var l=!0;if(l)if(t.descriptor!==void 0){let p=t.descriptor;const f=s;if(s===f)if(p&&typeof p=="object"&&!Array.isArray(p)){let v;if(p.interface===void 0&&(v="interface")||p.method===void 0&&(v="method")||p.messageTimestamp===void 0&&(v="messageTimestamp")||p.filters===void 0&&(v="filters"))return ai.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;{const b=s;for(const m in p)if(!(m==="interface"||m==="method"||m==="messageTimestamp"||m==="filters"))return ai.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(b===s){if(p.interface!==void 0){let m=p.interface;const w=s;if(typeof m!="string")return ai.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(m!=="Messages")return ai.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:NT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=w===s}else var c=!0;if(c){if(p.method!==void 0){let m=p.method;const w=s;if(typeof m!="string")return ai.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(m!=="Subscribe")return ai.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:NT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=w===s}else var c=!0;if(c){if(p.messageTimestamp!==void 0){const m=s;if(typeof p.messageTimestamp!="string")return ai.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c)if(p.filters!==void 0){let m=p.filters;const w=s;if(s===w)if(Array.isArray(m)){var u=!0;const T=m.length;for(let x=0;x<T;x++){const I=s;gr(m[x],{instancePath:e+"/descriptor/filters/"+x,parentData:m,parentDataProperty:x,rootData:i,dynamicAnchors:a})||(o=o===null?gr.errors:o.concat(gr.errors),s=o.length);var u=I===s;if(!u)break}}else return ai.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=w===s}else var c=!0}}}}}else return ai.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=f===s}else var l=!0}}}else return ai.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ai.errors=o,s===0}ai.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const fL=Si;function Si(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Si.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Si.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const f=s;for(const g in t)if(!(g==="gt"||g==="gte"||g==="lt"||g==="lte"))return Si.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;if(f===s){if(t.gt!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.gte===void 0){const m={};o===null?o=[m]:o.push(m),s++}var l=b===s;if(l)return Si.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.gte!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.gt===void 0){const w={};o===null?o=[w]:o.push(w),s++}var u=b===s;if(u)return Si.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.lt!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.lte===void 0){const w={};o===null?o=[w]:o.push(w),s++}var h=b===s;if(h)return Si.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.lte!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.lt===void 0){const w={};o===null?o=[w]:o.push(w),s++}var y=b===s;if(y)return Si.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.gt!==void 0){let g=t.gt;const v=s;if(!(typeof g=="number"&&isFinite(g)))return Si.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var p=v===s}else var p=!0;if(p){if(t.gte!==void 0){let g=t.gte;const v=s;if(!(typeof g=="number"&&isFinite(g)))return Si.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var p=v===s}else var p=!0;if(p){if(t.lt!==void 0){let g=t.lt;const v=s;if(!(typeof g=="number"&&isFinite(g)))return Si.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var p=v===s}else var p=!0;if(p)if(t.lte!==void 0){let g=t.lte;const v=s;if(!(typeof g=="number"&&isFinite(g)))return Si.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var p=v===s}else var p=!0}}}}}}}}}else return Si.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Si.errors=o,s===0}Si.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const hL=Rs;function Rs(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Rs.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Rs.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let c;if(t.messageCid===void 0&&(c="messageCid")||t.value===void 0&&(c="value"))return Rs.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;for(const u in t)if(!(u==="messageCid"||u==="value"))return Rs.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(t.messageCid!==void 0){const u=s;if(typeof t.messageCid!="string")return Rs.errors=[{instancePath:e+"/messageCid",schemaPath:"#/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l)if(t.value!==void 0){let u=t.value;const h=s;if(typeof u!="string"&&!(typeof u=="number"&&isFinite(u)))return Rs.errors=[{instancePath:e+"/value",schemaPath:"#/properties/value/type",keyword:"type",params:{type:U2.properties.value.type},message:"must be string,number"}],!1;var l=h===s}else var l=!0}}}else return Rs.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Rs.errors=o,s===0}Rs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const pL=ci,H3={type:"object",additionalProperties:!1,properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function Ml(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ml.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);const l=s;let c=!1,u=null;const h=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let J;if(t.interface===void 0&&(J="interface")||t.method===void 0&&(J="method")){const z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};o===null?o=[z]:o.push(z),s++}else{const z=s;for(const oe in t)if(!(oe==="interface"||oe==="method"||oe==="protocol")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:oe},message:"must NOT have additional properties"};o===null?o=[C]:o.push(C),s++;break}if(z===s){if(t.interface!==void 0){const oe=s;if(t.interface!=="Messages"){const C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[C]:o.push(C),s++}var p=oe===s}else var p=!0;if(p){if(t.method!==void 0){const oe=s;if(t.method!=="Query"){const V={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var p=oe===s}else var p=!0;if(p)if(t.protocol!==void 0){const oe=s;if(typeof t.protocol!="string"){const V={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[V]:o.push(V),s++}var p=oe===s}else var p=!0}}}}else{const J={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[J]:o.push(J),s++}var m=h===s;if(m){c=!0,u=0;var f=!0}const g=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let J;if(t.interface===void 0&&(J="interface")||t.method===void 0&&(J="method")){const z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};o===null?o=[z]:o.push(z),s++}else{const z=s;for(const oe in t)if(!(oe==="interface"||oe==="method"||oe==="protocol")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:oe},message:"must NOT have additional properties"};o===null?o=[C]:o.push(C),s++;break}if(z===s){if(t.interface!==void 0){const oe=s;if(t.interface!=="Messages"){const C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[C]:o.push(C),s++}var b=oe===s}else var b=!0;if(b){if(t.method!==void 0){const oe=s;if(t.method!=="Read"){const V={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var b=oe===s}else var b=!0;if(b)if(t.protocol!==void 0){const oe=s;if(typeof t.protocol!="string"){const V={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[V]:o.push(V),s++}var b=oe===s}else var b=!0}}}}else{const J={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[J]:o.push(J),s++}var m=g===s;if(m&&c)c=!1,u=[u,1];else{m&&(c=!0,u=1,f!==!0&&(f=!0));const J=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let C;if(t.interface===void 0&&(C="interface")||t.method===void 0&&(C="method")){const V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"};o===null?o=[V]:o.push(V),s++}else{const V=s;for(const q in t)if(!(q==="interface"||q==="method"||q==="protocol")){const Q={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"};o===null?o=[Q]:o.push(Q),s++;break}if(V===s){if(t.interface!==void 0){const q=s;if(t.interface!=="Messages"){const Q={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[Q]:o.push(Q),s++}var w=q===s}else var w=!0;if(w){if(t.method!==void 0){const q=s;if(t.method!=="Subscribe"){const R={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};o===null?o=[R]:o.push(R),s++}var w=q===s}else var w=!0;if(w)if(t.protocol!==void 0){const q=s;if(typeof t.protocol!="string"){const R={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var w=q===s}else var w=!0}}}}else{const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[C]:o.push(C),s++}var m=J===s;if(m&&c)c=!1,u=[u,2];else{m&&(c=!0,u=2,f!==!0&&(f=!0));const C=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let Q;if(t.interface===void 0&&(Q="interface")||t.method===void 0&&(Q="method")){const R={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/required",keyword:"required",params:{missingProperty:Q},message:"must have required property '"+Q+"'"};o===null?o=[R]:o.push(R),s++}else{const R=s;for(const B in t)if(!(B==="interface"||B==="method"||B==="protocol")){const D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"};o===null?o=[D]:o.push(D),s++;break}if(R===s){if(t.interface!==void 0){const B=s;if(t.interface!=="Protocols"){const D={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};o===null?o=[D]:o.push(D),s++}var S=B===s}else var S=!0;if(S){if(t.method!==void 0){const B=s;if(t.method!=="Configure"){const G={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/method/const",keyword:"const",params:{allowedValue:"Configure"},message:"must be equal to constant"};o===null?o=[G]:o.push(G),s++}var S=B===s}else var S=!0;if(S)if(t.protocol!==void 0){const B=s;if(typeof t.protocol!="string"){const G={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[G]:o.push(G),s++}var S=B===s}else var S=!0}}}}else{const Q={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[Q]:o.push(Q),s++}var m=C===s;if(m&&c)c=!1,u=[u,3];else{m&&(c=!0,u=3,f!==!0&&(f=!0));const Q=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.interface===void 0&&(D="interface")||t.method===void 0&&(D="method")){const G={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};o===null?o=[G]:o.push(G),s++}else{const G=s;for(const Z in t)if(!(Z==="interface"||Z==="method"||Z==="protocol")){const N={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Z},message:"must NOT have additional properties"};o===null?o=[N]:o.push(N),s++;break}if(G===s){if(t.interface!==void 0){const Z=s;if(t.interface!=="Protocols"){const N={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};o===null?o=[N]:o.push(N),s++}var T=Z===s}else var T=!0;if(T){if(t.method!==void 0){const Z=s;if(t.method!=="Query"){const W={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[W]:o.push(W),s++}var T=Z===s}else var T=!0;if(T)if(t.protocol!==void 0){const Z=s;if(typeof t.protocol!="string"){const W={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[W]:o.push(W),s++}var T=Z===s}else var T=!0}}}}else{const D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[D]:o.push(D),s++}var m=Q===s;if(m&&c)c=!1,u=[u,4];else{m&&(c=!0,u=4,f!==!0&&(f=!0));const D=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let N;if(t.interface===void 0&&(N="interface")||t.method===void 0&&(N="method")){const W={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};o===null?o=[W]:o.push(W),s++}else{const W=s;for(const O in t)if(!(O==="interface"||O==="method"||O==="protocol"||O==="contextId"||O==="protocolPath")){const F={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"};o===null?o=[F]:o.push(F),s++;break}if(W===s){if(t.interface!==void 0){const O=s;if(t.interface!=="Records"){const F={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[F]:o.push(F),s++}var x=O===s}else var x=!0;if(x){if(t.method!==void 0){const O=s;if(t.method!=="Read"){const Y={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x){if(t.protocol!==void 0){const O=s;if(typeof t.protocol!="string"){const Y={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x){if(t.contextId!==void 0){const O=s;if(typeof t.contextId!="string"){const Y={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x)if(t.protocolPath!==void 0){const O=s;if(typeof t.protocolPath!="string"){const Y={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0}}}}}}else{const N={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[N]:o.push(N),s++}var m=D===s;if(m&&c)c=!1,u=[u,5];else{m&&(c=!0,u=5,f!==!0&&(f=!0));const N=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let F;if(t.interface===void 0&&(F="interface")||t.method===void 0&&(F="method")){const Y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"};o===null?o=[Y]:o.push(Y),s++}else{const Y=s;for(const ee in t)if(!(ee==="interface"||ee==="method"||ee==="protocol"||ee==="contextId"||ee==="protocolPath")){const te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"};o===null?o=[te]:o.push(te),s++;break}if(Y===s){if(t.interface!==void 0){const ee=s;if(t.interface!=="Records"){const te={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[te]:o.push(te),s++}var I=ee===s}else var I=!0;if(I){if(t.method!==void 0){const ee=s;if(t.method!=="Delete"){const U={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I){if(t.protocol!==void 0){const ee=s;if(typeof t.protocol!="string"){const U={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I){if(t.contextId!==void 0){const ee=s;if(typeof t.contextId!="string"){const U={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I)if(t.protocolPath!==void 0){const ee=s;if(typeof t.protocolPath!="string"){const U={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0}}}}}}else{const F={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[F]:o.push(F),s++}var m=N===s;if(m&&c)c=!1,u=[u,6];else{m&&(c=!0,u=6,f!==!0&&(f=!0));const F=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let te;if(t.interface===void 0&&(te="interface")||t.method===void 0&&(te="method")){const U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"};o===null?o=[U]:o.push(U),s++}else{const U=s;for(const L in t)if(!(L==="interface"||L==="method"||L==="protocol"||L==="contextId"||L==="protocolPath")){const P={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"};o===null?o=[P]:o.push(P),s++;break}if(U===s){if(t.interface!==void 0){const L=s;if(t.interface!=="Records"){const P={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[P]:o.push(P),s++}var M=L===s}else var M=!0;if(M){if(t.method!==void 0){const L=s;if(t.method!=="Write"){const j={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M){if(t.protocol!==void 0){const L=s;if(typeof t.protocol!="string"){const j={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M){if(t.contextId!==void 0){const L=s;if(typeof t.contextId!="string"){const j={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M)if(t.protocolPath!==void 0){const L=s;if(typeof t.protocolPath!="string"){const j={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0}}}}}}else{const te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[te]:o.push(te),s++}var m=F===s;if(m&&c)c=!1,u=[u,7];else{m&&(c=!0,u=7,f!==!0&&(f=!0));const te=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let P;if(t.interface===void 0&&(P="interface")||t.method===void 0&&(P="method")){const j={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:P},message:"must have required property '"+P+"'"};o===null?o=[j]:o.push(j),s++}else{const j=s;for(const X in t)if(!(X==="interface"||X==="method"||X==="protocol"||X==="contextId"||X==="protocolPath")){const ne={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"};o===null?o=[ne]:o.push(ne),s++;break}if(j===s){if(t.interface!==void 0){const X=s;if(t.interface!=="Records"){const ne={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[ne]:o.push(ne),s++}var H=X===s}else var H=!0;if(H){if(t.method!==void 0){const X=s;if(t.method!=="Query"){const ae={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H){if(t.protocol!==void 0){const X=s;if(typeof t.protocol!="string"){const ae={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H){if(t.contextId!==void 0){const X=s;if(typeof t.contextId!="string"){const ae={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H)if(t.protocolPath!==void 0){const X=s;if(typeof t.protocolPath!="string"){const ae={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0}}}}}}else{const P={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[P]:o.push(P),s++}var m=te===s;if(m&&c)c=!1,u=[u,8];else{m&&(c=!0,u=8,f!==!0&&(f=!0));const P=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let ne;if(t.interface===void 0&&(ne="interface")||t.method===void 0&&(ne="method")){const ae={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:ne},message:"must have required property '"+ne+"'"};o===null?o=[ae]:o.push(ae),s++}else{const ae=s;for(const pe in t)if(!(pe==="interface"||pe==="method"||pe==="protocol"||pe==="contextId"||pe==="protocolPath")){const we={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:pe},message:"must NOT have additional properties"};o===null?o=[we]:o.push(we),s++;break}if(ae===s){if(t.interface!==void 0){const pe=s;if(t.interface!=="Records"){const we={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[we]:o.push(we),s++}var re=pe===s}else var re=!0;if(re){if(t.method!==void 0){const pe=s;if(t.method!=="Subscribe"){const Se={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re){if(t.protocol!==void 0){const pe=s;if(typeof t.protocol!="string"){const Se={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re){if(t.contextId!==void 0){const pe=s;if(typeof t.contextId!="string"){const Se={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re)if(t.protocolPath!==void 0){const pe=s;if(typeof t.protocolPath!="string"){const Se={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0}}}}}}else{const ne={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[ne]:o.push(ne),s++}var m=P===s;m&&c?(c=!1,u=[u,9]):m&&(c=!0,u=9,f!==!0&&(f=!0))}}}}}}}}if(c)s=l,o!==null&&(l?o.length=l:o=null);else{const J={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return o===null?o=[J]:o.push(J),s++,Ml.errors=o,!1}return Ml.errors=o,d.props=f,s===0}Ml.evaluated={dynamicProps:!0,dynamicItems:!1};function ci(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=ci.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.dateExpires===void 0&&(c="dateExpires")||t.scope===void 0&&(c="scope"))return ci.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{const u=s;for(const h in t)if(!(h==="description"||h==="dateExpires"||h==="requestId"||h==="delegated"||h==="scope"||h==="conditions"))return ci.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"}],!1;if(u===s){if(t.description!==void 0){const h=s;if(typeof t.description!="string")return ci.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=h===s}else var l=!0;if(l){if(t.dateExpires!==void 0){let h=t.dateExpires;const y=s;if(s===s)if(typeof h=="string"){if(!nn.test(h))return ci.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return ci.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=y===s}else var l=!0;if(l){if(t.requestId!==void 0){const h=s;if(typeof t.requestId!="string")return ci.errors=[{instancePath:e+"/requestId",schemaPath:"#/properties/requestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=h===s}else var l=!0;if(l){if(t.delegated!==void 0){const h=s;if(typeof t.delegated!="boolean")return ci.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var l=h===s}else var l=!0;if(l){if(t.scope!==void 0){const h=s;Ml(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:a})||(o=o===null?Ml.errors:o.concat(Ml.errors),s=o.length);var l=h===s}else var l=!0;if(l)if(t.conditions!==void 0){let h=t.conditions;const y=s;if(s===s)if(h&&typeof h=="object"&&!Array.isArray(h)){const g=s;for(const v in h)if(v!=="publication")return ci.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"}],!1;if(g===s&&h.publication!==void 0){let v=h.publication;if(typeof v!="string")return ci.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v==="Required"||v==="Prohibited"))return ci.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:H3.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return ci.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=y===s}else var l=!0}}}}}}}else return ci.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ci.errors=o,s===0}ci.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const yL=to;function Ll(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ll.evaluated;d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0);const l=s;let c=!1,u=null;const h=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let J;if(t.interface===void 0&&(J="interface")||t.method===void 0&&(J="method")){const z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};o===null?o=[z]:o.push(z),s++}else{const z=s;for(const oe in t)if(!(oe==="interface"||oe==="method"||oe==="protocol")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:oe},message:"must NOT have additional properties"};o===null?o=[C]:o.push(C),s++;break}if(z===s){if(t.interface!==void 0){const oe=s;if(t.interface!=="Messages"){const C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[C]:o.push(C),s++}var p=oe===s}else var p=!0;if(p){if(t.method!==void 0){const oe=s;if(t.method!=="Query"){const V={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var p=oe===s}else var p=!0;if(p)if(t.protocol!==void 0){const oe=s;if(typeof t.protocol!="string"){const V={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[V]:o.push(V),s++}var p=oe===s}else var p=!0}}}}else{const J={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[J]:o.push(J),s++}var m=h===s;if(m){c=!0,u=0;var f=!0}const g=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let J;if(t.interface===void 0&&(J="interface")||t.method===void 0&&(J="method")){const z={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};o===null?o=[z]:o.push(z),s++}else{const z=s;for(const oe in t)if(!(oe==="interface"||oe==="method"||oe==="protocol")){const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:oe},message:"must NOT have additional properties"};o===null?o=[C]:o.push(C),s++;break}if(z===s){if(t.interface!==void 0){const oe=s;if(t.interface!=="Messages"){const C={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[C]:o.push(C),s++}var b=oe===s}else var b=!0;if(b){if(t.method!==void 0){const oe=s;if(t.method!=="Read"){const V={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};o===null?o=[V]:o.push(V),s++}var b=oe===s}else var b=!0;if(b)if(t.protocol!==void 0){const oe=s;if(typeof t.protocol!="string"){const V={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[V]:o.push(V),s++}var b=oe===s}else var b=!0}}}}else{const J={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[J]:o.push(J),s++}var m=g===s;if(m&&c)c=!1,u=[u,1];else{m&&(c=!0,u=1,f!==!0&&(f=!0));const J=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let C;if(t.interface===void 0&&(C="interface")||t.method===void 0&&(C="method")){const V={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"};o===null?o=[V]:o.push(V),s++}else{const V=s;for(const q in t)if(!(q==="interface"||q==="method"||q==="protocol")){const Q={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"};o===null?o=[Q]:o.push(Q),s++;break}if(V===s){if(t.interface!==void 0){const q=s;if(t.interface!=="Messages"){const Q={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};o===null?o=[Q]:o.push(Q),s++}var w=q===s}else var w=!0;if(w){if(t.method!==void 0){const q=s;if(t.method!=="Subscribe"){const R={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};o===null?o=[R]:o.push(R),s++}var w=q===s}else var w=!0;if(w)if(t.protocol!==void 0){const q=s;if(typeof t.protocol!="string"){const R={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[R]:o.push(R),s++}var w=q===s}else var w=!0}}}}else{const C={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[C]:o.push(C),s++}var m=J===s;if(m&&c)c=!1,u=[u,2];else{m&&(c=!0,u=2,f!==!0&&(f=!0));const C=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let Q;if(t.interface===void 0&&(Q="interface")||t.method===void 0&&(Q="method")){const R={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/required",keyword:"required",params:{missingProperty:Q},message:"must have required property '"+Q+"'"};o===null?o=[R]:o.push(R),s++}else{const R=s;for(const B in t)if(!(B==="interface"||B==="method"||B==="protocol")){const D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"};o===null?o=[D]:o.push(D),s++;break}if(R===s){if(t.interface!==void 0){const B=s;if(t.interface!=="Protocols"){const D={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};o===null?o=[D]:o.push(D),s++}var S=B===s}else var S=!0;if(S){if(t.method!==void 0){const B=s;if(t.method!=="Configure"){const G={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/method/const",keyword:"const",params:{allowedValue:"Configure"},message:"must be equal to constant"};o===null?o=[G]:o.push(G),s++}var S=B===s}else var S=!0;if(S)if(t.protocol!==void 0){const B=s;if(typeof t.protocol!="string"){const G={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[G]:o.push(G),s++}var S=B===s}else var S=!0}}}}else{const Q={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[Q]:o.push(Q),s++}var m=C===s;if(m&&c)c=!1,u=[u,3];else{m&&(c=!0,u=3,f!==!0&&(f=!0));const Q=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let D;if(t.interface===void 0&&(D="interface")||t.method===void 0&&(D="method")){const G={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};o===null?o=[G]:o.push(G),s++}else{const G=s;for(const Z in t)if(!(Z==="interface"||Z==="method"||Z==="protocol")){const N={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Z},message:"must NOT have additional properties"};o===null?o=[N]:o.push(N),s++;break}if(G===s){if(t.interface!==void 0){const Z=s;if(t.interface!=="Protocols"){const N={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};o===null?o=[N]:o.push(N),s++}var T=Z===s}else var T=!0;if(T){if(t.method!==void 0){const Z=s;if(t.method!=="Query"){const W={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[W]:o.push(W),s++}var T=Z===s}else var T=!0;if(T)if(t.protocol!==void 0){const Z=s;if(typeof t.protocol!="string"){const W={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[W]:o.push(W),s++}var T=Z===s}else var T=!0}}}}else{const D={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[D]:o.push(D),s++}var m=Q===s;if(m&&c)c=!1,u=[u,4];else{m&&(c=!0,u=4,f!==!0&&(f=!0));const D=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let N;if(t.interface===void 0&&(N="interface")||t.method===void 0&&(N="method")){const W={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};o===null?o=[W]:o.push(W),s++}else{const W=s;for(const O in t)if(!(O==="interface"||O==="method"||O==="protocol"||O==="contextId"||O==="protocolPath")){const F={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"};o===null?o=[F]:o.push(F),s++;break}if(W===s){if(t.interface!==void 0){const O=s;if(t.interface!=="Records"){const F={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[F]:o.push(F),s++}var x=O===s}else var x=!0;if(x){if(t.method!==void 0){const O=s;if(t.method!=="Read"){const Y={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x){if(t.protocol!==void 0){const O=s;if(typeof t.protocol!="string"){const Y={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x){if(t.contextId!==void 0){const O=s;if(typeof t.contextId!="string"){const Y={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0;if(x)if(t.protocolPath!==void 0){const O=s;if(typeof t.protocolPath!="string"){const Y={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var x=O===s}else var x=!0}}}}}}else{const N={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[N]:o.push(N),s++}var m=D===s;if(m&&c)c=!1,u=[u,5];else{m&&(c=!0,u=5,f!==!0&&(f=!0));const N=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let F;if(t.interface===void 0&&(F="interface")||t.method===void 0&&(F="method")){const Y={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"};o===null?o=[Y]:o.push(Y),s++}else{const Y=s;for(const ee in t)if(!(ee==="interface"||ee==="method"||ee==="protocol"||ee==="contextId"||ee==="protocolPath")){const te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"};o===null?o=[te]:o.push(te),s++;break}if(Y===s){if(t.interface!==void 0){const ee=s;if(t.interface!=="Records"){const te={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[te]:o.push(te),s++}var I=ee===s}else var I=!0;if(I){if(t.method!==void 0){const ee=s;if(t.method!=="Delete"){const U={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I){if(t.protocol!==void 0){const ee=s;if(typeof t.protocol!="string"){const U={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I){if(t.contextId!==void 0){const ee=s;if(typeof t.contextId!="string"){const U={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0;if(I)if(t.protocolPath!==void 0){const ee=s;if(typeof t.protocolPath!="string"){const U={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[U]:o.push(U),s++}var I=ee===s}else var I=!0}}}}}}else{const F={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[F]:o.push(F),s++}var m=N===s;if(m&&c)c=!1,u=[u,6];else{m&&(c=!0,u=6,f!==!0&&(f=!0));const F=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let te;if(t.interface===void 0&&(te="interface")||t.method===void 0&&(te="method")){const U={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"};o===null?o=[U]:o.push(U),s++}else{const U=s;for(const L in t)if(!(L==="interface"||L==="method"||L==="protocol"||L==="contextId"||L==="protocolPath")){const P={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"};o===null?o=[P]:o.push(P),s++;break}if(U===s){if(t.interface!==void 0){const L=s;if(t.interface!=="Records"){const P={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[P]:o.push(P),s++}var M=L===s}else var M=!0;if(M){if(t.method!==void 0){const L=s;if(t.method!=="Write"){const j={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M){if(t.protocol!==void 0){const L=s;if(typeof t.protocol!="string"){const j={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M){if(t.contextId!==void 0){const L=s;if(typeof t.contextId!="string"){const j={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0;if(M)if(t.protocolPath!==void 0){const L=s;if(typeof t.protocolPath!="string"){const j={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[j]:o.push(j),s++}var M=L===s}else var M=!0}}}}}}else{const te={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[te]:o.push(te),s++}var m=F===s;if(m&&c)c=!1,u=[u,7];else{m&&(c=!0,u=7,f!==!0&&(f=!0));const te=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let P;if(t.interface===void 0&&(P="interface")||t.method===void 0&&(P="method")){const j={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:P},message:"must have required property '"+P+"'"};o===null?o=[j]:o.push(j),s++}else{const j=s;for(const X in t)if(!(X==="interface"||X==="method"||X==="protocol"||X==="contextId"||X==="protocolPath")){const ne={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"};o===null?o=[ne]:o.push(ne),s++;break}if(j===s){if(t.interface!==void 0){const X=s;if(t.interface!=="Records"){const ne={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[ne]:o.push(ne),s++}var H=X===s}else var H=!0;if(H){if(t.method!==void 0){const X=s;if(t.method!=="Query"){const ae={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H){if(t.protocol!==void 0){const X=s;if(typeof t.protocol!="string"){const ae={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H){if(t.contextId!==void 0){const X=s;if(typeof t.contextId!="string"){const ae={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0;if(H)if(t.protocolPath!==void 0){const X=s;if(typeof t.protocolPath!="string"){const ae={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ae]:o.push(ae),s++}var H=X===s}else var H=!0}}}}}}else{const P={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[P]:o.push(P),s++}var m=te===s;if(m&&c)c=!1,u=[u,8];else{m&&(c=!0,u=8,f!==!0&&(f=!0));const P=s;if(s===s)if(t&&typeof t=="object"&&!Array.isArray(t)){let ne;if(t.interface===void 0&&(ne="interface")||t.method===void 0&&(ne="method")){const ae={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:ne},message:"must have required property '"+ne+"'"};o===null?o=[ae]:o.push(ae),s++}else{const ae=s;for(const pe in t)if(!(pe==="interface"||pe==="method"||pe==="protocol"||pe==="contextId"||pe==="protocolPath")){const we={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:pe},message:"must NOT have additional properties"};o===null?o=[we]:o.push(we),s++;break}if(ae===s){if(t.interface!==void 0){const pe=s;if(t.interface!=="Records"){const we={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};o===null?o=[we]:o.push(we),s++}var re=pe===s}else var re=!0;if(re){if(t.method!==void 0){const pe=s;if(t.method!=="Subscribe"){const Se={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re){if(t.protocol!==void 0){const pe=s;if(typeof t.protocol!="string"){const Se={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re){if(t.contextId!==void 0){const pe=s;if(typeof t.contextId!="string"){const Se={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0;if(re)if(t.protocolPath!==void 0){const pe=s;if(typeof t.protocolPath!="string"){const Se={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Se]:o.push(Se),s++}var re=pe===s}else var re=!0}}}}}}else{const ne={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[ne]:o.push(ne),s++}var m=P===s;m&&c?(c=!1,u=[u,9]):m&&(c=!0,u=9,f!==!0&&(f=!0))}}}}}}}}if(c)s=l,o!==null&&(l?o.length=l:o=null);else{const J={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf"};return o===null?o=[J]:o.push(J),s++,Ll.errors=o,!1}return Ll.errors=o,d.props=f,s===0}Ll.evaluated={dynamicProps:!0,dynamicItems:!1};function to(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=to.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.delegated===void 0&&(c="delegated")||t.scope===void 0&&(c="scope"))return to.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{const u=s;for(const h in t)if(!(h==="description"||h==="delegated"||h==="scope"||h==="conditions"))return to.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"}],!1;if(u===s){if(t.description!==void 0){const h=s;if(typeof t.description!="string")return to.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=h===s}else var l=!0;if(l){if(t.delegated!==void 0){const h=s;if(typeof t.delegated!="boolean")return to.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var l=h===s}else var l=!0;if(l){if(t.scope!==void 0){const h=s;Ll(t.scope,{instancePath:e+"/scope",parentData:t,parentDataProperty:"scope",rootData:i,dynamicAnchors:a})||(o=o===null?Ll.errors:o.concat(Ll.errors),s=o.length);var l=h===s}else var l=!0;if(l)if(t.conditions!==void 0){let h=t.conditions;const y=s;if(s===s)if(h&&typeof h=="object"&&!Array.isArray(h)){const g=s;for(const v in h)if(v!=="publication")return to.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:v},message:"must NOT have additional properties"}],!1;if(g===s&&h.publication!==void 0){let v=h.publication;if(typeof v!="string")return to.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(v==="Required"||v==="Prohibited"))return to.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:H3.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return to.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=y===s}else var l=!0}}}}}else return to.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return to.errors=o,s===0}to.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const mL=wl;function wl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=wl.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){for(const l in t)if(l!=="description")return wl.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;if(t.description!==void 0&&typeof t.description!="string")return wl.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return wl.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return wl.errors=o,s===0}wl.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const gL=$p;function $p(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=$p.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?($p.errors=o,s===0):($p.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}$p.evaluated={dynamicProps:!1,dynamicItems:!1};const wL=Tp;function Tp(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Tp.evaluated;return d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)?(Tp.errors=o,s===0):(Tp.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}Tp.evaluated={dynamicProps:!1,dynamicItems:!1};const bL=Qr,BT=new RegExp(".*","u"),Cu={$id:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}},required:["rootKeyId","publicKeyJwk"]},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-prune","co-update","create","delete","prune","read","update"]}}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a role record type",type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-update","create","delete","query","subscribe","read","update"]}}}}]}},$role:{$comment:"When `true`, this turns a record into `role` that may be used within a context/sub-context",type:"boolean"},$size:{type:"object",additionalProperties:!1,properties:{min:{type:"number",minimum:0},max:{type:"number",minimum:0}}},$tags:{type:"object",minProperties:1,properties:{$requiredTags:{type:"array",items:{type:"string"}},$allowUndefinedTags:{type:"boolean"}},patternProperties:{"^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$":{type:"object",additionalProperties:!1,properties:{type:{enum:["string","number","integer","boolean","array"]},items:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}},contains:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$":{}}}}}},patternProperties:{"^[^$].*$":{$ref:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json"}}},DT=new RegExp("^[^$].*$","u"),vL=new RegExp("^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$","u"),_L=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$","u"),MT=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$","u"),kb={validate:Ct};function Ct(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ct.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){const J=s;for(const z in t)if(!(z==="$encryption"||z==="$actions"||z==="$role"||z==="$size"||z==="$tags"||DT.test(z)))return Ct.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:z},message:"must NOT have additional properties"}],!1;if(J===s){if(t.$encryption!==void 0){let z=t.$encryption;const oe=s;if(s===oe)if(z&&typeof z=="object"&&!Array.isArray(z)){let C;if(z.rootKeyId===void 0&&(C="rootKeyId")||z.publicKeyJwk===void 0&&(C="publicKeyJwk"))return Ct.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{const V=s;for(const q in z)if(!(q==="rootKeyId"||q==="publicKeyJwk"))return Ct.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"}],!1;if(V===s){if(z.rootKeyId!==void 0){const q=s;if(typeof z.rootKeyId!="string")return Ct.errors=[{instancePath:e+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=q===s}else var l=!0;if(l)if(z.publicKeyJwk!==void 0){const q=s;Ht(z.publicKeyJwk,{instancePath:e+"/$encryption/publicKeyJwk",parentData:z,parentDataProperty:"publicKeyJwk",rootData:i,dynamicAnchors:a})||(o=o===null?Ht.errors:o.concat(Ht.errors),s=o.length);var l=q===s}else var l=!0}}}else return Ct.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=oe===s}else var c=!0;if(c){if(t.$actions!==void 0){let z=t.$actions;const oe=s;if(s===oe)if(Array.isArray(z)){if(z.length<1)return Ct.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var u=!0;const V=z.length;for(let q=0;q<V;q++){let Q=z[q];const R=s;if(!(Q&&typeof Q=="object"&&!Array.isArray(Q)))return Ct.errors=[{instancePath:e+"/$actions/"+q,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;const B=s;let D=!1,G=null;const Z=s;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let O;if(Q.who===void 0&&(O="who")||Q.can===void 0&&(O="can")){const F={instancePath:e+"/$actions/"+q,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"};o===null?o=[F]:o.push(F),s++}else{const F=s;for(const Y in Q)if(!(Y==="who"||Y==="of"||Y==="can")){const ee={instancePath:e+"/$actions/"+q,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Y},message:"must NOT have additional properties"};o===null?o=[ee]:o.push(ee),s++;break}if(F===s){if(Q.who!==void 0){let Y=Q.who;const ee=s;if(typeof Y!="string"){const te={instancePath:e+"/$actions/"+q+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[te]:o.push(te),s++}if(!(Y==="anyone"||Y==="author"||Y==="recipient")){const te={instancePath:e+"/$actions/"+q+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:Cu.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};o===null?o=[te]:o.push(te),s++}var h=ee===s}else var h=!0;if(h){if(Q.of!==void 0){const Y=s;if(typeof Q.of!="string"){const te={instancePath:e+"/$actions/"+q+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[te]:o.push(te),s++}var h=Y===s}else var h=!0;if(h)if(Q.can!==void 0){let Y=Q.can;const ee=s;if(s===ee)if(Array.isArray(Y))if(Y.length<1){const U={instancePath:e+"/$actions/"+q+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};o===null?o=[U]:o.push(U),s++}else{var y=!0;const U=Y.length;for(let L=0;L<U;L++){let P=Y[L];const j=s;if(typeof P!="string"){const ne={instancePath:e+"/$actions/"+q+"/can/"+L,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[ne]:o.push(ne),s++}if(!(P==="co-delete"||P==="co-prune"||P==="co-update"||P==="create"||P==="delete"||P==="prune"||P==="read"||P==="update")){const ne={instancePath:e+"/$actions/"+q+"/can/"+L,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/enum",keyword:"enum",params:{allowedValues:Cu.properties.$actions.items.oneOf[0].properties.can.items.enum},message:"must be equal to one of the allowed values"};o===null?o=[ne]:o.push(ne),s++}var y=j===s;if(!y)break}}else{const U={instancePath:e+"/$actions/"+q+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[U]:o.push(U),s++}var h=ee===s}else var h=!0}}}}var v=Z===s;if(v){D=!0,G=0;var p=!0}const N=s;if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let O;if(Q.role===void 0&&(O="role")||Q.can===void 0&&(O="can")){const F={instancePath:e+"/$actions/"+q,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"};o===null?o=[F]:o.push(F),s++}else{if(Q.role!==void 0){const F=s;if(typeof Q.role!="string"){const Y={instancePath:e+"/$actions/"+q+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[Y]:o.push(Y),s++}var f=F===s}else var f=!0;if(f)if(Q.can!==void 0){let F=Q.can;const Y=s;if(s===Y)if(Array.isArray(F))if(F.length<1){const te={instancePath:e+"/$actions/"+q+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};o===null?o=[te]:o.push(te),s++}else{var g=!0;const te=F.length;for(let U=0;U<te;U++){let L=F[U];const P=s;if(typeof L!="string"){const X={instancePath:e+"/$actions/"+q+"/can/"+U,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[X]:o.push(X),s++}if(!(L==="co-delete"||L==="co-update"||L==="create"||L==="delete"||L==="query"||L==="subscribe"||L==="read"||L==="update")){const X={instancePath:e+"/$actions/"+q+"/can/"+U,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/enum",keyword:"enum",params:{allowedValues:Cu.properties.$actions.items.oneOf[1].properties.can.items.enum},message:"must be equal to one of the allowed values"};o===null?o=[X]:o.push(X),s++}var g=P===s;if(!g)break}}else{const te={instancePath:e+"/$actions/"+q+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};o===null?o=[te]:o.push(te),s++}var f=Y===s}else var f=!0}}var v=N===s;if(v&&D?(D=!1,G=[G,1]):v&&(D=!0,G=1,p!==!0&&(p=p||{},p.role=!0,p.can=!0)),D)s=B,o!==null&&(B?o.length=B:o=null);else{const O={instancePath:e+"/$actions/"+q,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:G},message:"must match exactly one schema in oneOf"};return o===null?o=[O]:o.push(O),s++,Ct.errors=o,!1}var u=R===s;if(!u)break}}}else return Ct.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=oe===s}else var c=!0;if(c){if(t.$role!==void 0){const z=s;if(typeof t.$role!="boolean")return Ct.errors=[{instancePath:e+"/$role",schemaPath:"#/properties/%24role/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var c=z===s}else var c=!0;if(c){if(t.$size!==void 0){let z=t.$size;const oe=s;if(s===oe)if(z&&typeof z=="object"&&!Array.isArray(z)){const V=s;for(const q in z)if(!(q==="min"||q==="max"))return Ct.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:q},message:"must NOT have additional properties"}],!1;if(V===s){if(z.min!==void 0){let q=z.min;const Q=s;if(s===Q)if(typeof q=="number"&&isFinite(q)){if(q<0||isNaN(q))return Ct.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Ct.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=Q===s}else var b=!0;if(b)if(z.max!==void 0){let q=z.max;const Q=s;if(s===Q)if(typeof q=="number"&&isFinite(q)){if(q<0||isNaN(q))return Ct.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Ct.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=Q===s}else var b=!0}}else return Ct.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=oe===s}else var c=!0;if(c){if(t.$tags!==void 0){let z=t.$tags;const oe=s;if(s===oe)if(z&&typeof z=="object"&&!Array.isArray(z)){if(Object.keys(z).length<1)return Ct.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;if(z.$requiredTags!==void 0){let V=z.$requiredTags;const q=s;if(s===q)if(Array.isArray(V)){var m=!0;const Q=V.length;for(let R=0;R<Q;R++){const B=s;if(typeof V[R]!="string")return Ct.errors=[{instancePath:e+"/$tags/$requiredTags/"+R,schemaPath:"#/properties/%24tags/properties/%24requiredTags/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=B===s;if(!m)break}}else return Ct.errors=[{instancePath:e+"/$tags/$requiredTags",schemaPath:"#/properties/%24tags/properties/%24requiredTags/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var w=q===s}else var w=!0;if(w){if(z.$allowUndefinedTags!==void 0){const V=s;if(typeof z.$allowUndefinedTags!="boolean")return Ct.errors=[{instancePath:e+"/$tags/$allowUndefinedTags",schemaPath:"#/properties/%24tags/properties/%24allowUndefinedTags/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var w=V===s}else var w=!0;if(w){var S={};S.$requiredTags=!0,S.$allowUndefinedTags=!0;for(const V in z)if(vL.test(V)){let q=z[V];if(s===s)if(q&&typeof q=="object"&&!Array.isArray(q)){const R=s;for(const B in q)if(!(B==="type"||B==="items"||B==="contains"||_L.test(B)))return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:B},message:"must NOT have additional properties"}],!1;if(R===s){if(q.type!==void 0){let B=q.type;const D=s;if(!(B==="string"||B==="number"||B==="integer"||B==="boolean"||B==="array"))return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/type/enum",keyword:"enum",params:{allowedValues:Cu.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var T=D===s}else var T=!0;if(T){if(q.items!==void 0){let B=q.items;const D=s;if(s===D)if(B&&typeof B=="object"&&!Array.isArray(B)){if(B.type!==void 0){let Z=B.type;const N=s;if(!(Z==="string"||Z==="number"||Z==="integer"))return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/items/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/properties/type/enum",keyword:"enum",params:{allowedValues:Cu.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var x=N===s}else var x=!0;if(x){var I={};I.type=!0;for(const Z in B)MT.test(Z)&&(I[Z]=!0)}}else return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/items",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=D===s}else var T=!0;if(T)if(q.contains!==void 0){let B=q.contains;const D=s;if(s===D)if(B&&typeof B=="object"&&!Array.isArray(B)){if(B.type!==void 0){let Z=B.type;const N=s;if(!(Z==="string"||Z==="number"||Z==="integer"))return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/properties/type/enum",keyword:"enum",params:{allowedValues:Cu.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.contains.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var M=N===s}else var M=!0;if(M){var H={};H.type=!0;for(const Z in B)MT.test(Z)&&(H[Z]=!0)}}else return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=D===s}else var T=!0}}}else return Ct.errors=[{instancePath:e+"/$tags/"+V.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;S[V]=!0}}}}else return Ct.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=oe===s}else var c=!0;if(c){var re=!0;for(const z in t)if(DT.test(z)){const oe=s;kb.validate(t[z],{instancePath:e+"/"+z.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:t,parentDataProperty:z,rootData:i,dynamicAnchors:a})||(o=o===null?kb.validate.errors:o.concat(kb.validate.errors),s=o.length);var re=oe===s;if(!re)break}}}}}}}}else return Ct.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ct.errors=o,s===0}Ct.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function Qr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Qr.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.protocol===void 0&&(p="protocol")||t.published===void 0&&(p="published")||t.types===void 0&&(p="types")||t.structure===void 0&&(p="structure"))return Qr.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const f=s;for(const g in t)if(!(g==="protocol"||g==="published"||g==="types"||g==="structure"))return Qr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;if(f===s){if(t.protocol!==void 0){const g=s;if(typeof t.protocol!="string")return Qr.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=g===s}else var l=!0;if(l){if(t.published!==void 0){const g=s;if(typeof t.published!="boolean")return Qr.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var l=g===s}else var l=!0;if(l){if(t.types!==void 0){let g=t.types;const v=s;if(s===v)if(g&&typeof g=="object"&&!Array.isArray(g)){var c={};for(const m in g)if(BT.test(m)){let w=g[m];if(s===s)if(w&&typeof w=="object"&&!Array.isArray(w)){const T=s;for(const x in w)if(!(x==="schema"||x==="dataFormats"))return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"}],!1;if(T===s){if(w.schema!==void 0){const x=s;if(typeof w.schema!="string")return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=x===s}else var u=!0;if(u)if(w.dataFormats!==void 0){let x=w.dataFormats;const I=s;if(s===I)if(Array.isArray(x)){if(x.length<1)return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var h=!0;const H=x.length;for(let re=0;re<H;re++){const J=s;if(typeof x[re]!="string")return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+re,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=J===s;if(!h)break}}}else return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=I===s}else var u=!0}}else return Qr.errors=[{instancePath:e+"/types/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;c[m]=!0}}else return Qr.errors=[{instancePath:e+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=v===s}else var l=!0;if(l)if(t.structure!==void 0){let g=t.structure;const v=s;if(s===v)if(g&&typeof g=="object"&&!Array.isArray(g)){var y={};for(const m in g)BT.test(m)&&(Ct(g[m],{instancePath:e+"/structure/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:m,rootData:i,dynamicAnchors:a})||(o=o===null?Ct.errors:o.concat(Ct.errors),s=o.length),y[m]=!0)}else return Qr.errors=[{instancePath:e+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=v===s}else var l=!0}}}}}else return Qr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Qr.errors=o,s===0}Qr.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const EL=Ct,SL=di,LT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-configure.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}};function di(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=di.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.authorization===void 0&&(u="authorization")||t.descriptor===void 0&&(u="descriptor"))return di.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const h=s;for(const y in t)if(!(y==="authorization"||y==="descriptor"))return di.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(h===s){if(t.authorization!==void 0){const y=s;Wr(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?Wr.errors:o.concat(Wr.errors),s=o.length);var l=y===s}else var l=!0;if(l)if(t.descriptor!==void 0){let y=t.descriptor;const p=s;if(s===p)if(y&&typeof y=="object"&&!Array.isArray(y)){let g;if(y.interface===void 0&&(g="interface")||y.method===void 0&&(g="method")||y.messageTimestamp===void 0&&(g="messageTimestamp")||y.definition===void 0&&(g="definition"))return di.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{const v=s;for(const b in y)if(!(b==="interface"||b==="method"||b==="messageTimestamp"||b==="definition"))return di.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(v===s){if(y.interface!==void 0){let b=y.interface;const m=s;if(typeof b!="string")return di.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Protocols")return di.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:LT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.method!==void 0){let b=y.method;const m=s;if(typeof b!="string")return di.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Configure")return di.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:LT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.messageTimestamp!==void 0){let b=y.messageTimestamp;const m=s;if(s===s)if(typeof b=="string"){if(!nn.test(b))return di.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return di.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c)if(y.definition!==void 0){const b=s;Qr(y.definition,{instancePath:e+"/descriptor/definition",parentData:y,parentDataProperty:"definition",rootData:i,dynamicAnchors:a})||(o=o===null?Qr.errors:o.concat(Qr.errors),s=o.length);var c=b===s}else var c=!0}}}}}else return di.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=p===s}else var l=!0}}}else return di.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return di.errors=o,s===0}di.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const $L=Or,UT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}}}}}};function Or(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Or.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let h;if(t.descriptor===void 0&&(h="descriptor"))return Or.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;{const y=s;for(const p in t)if(!(p==="authorization"||p==="descriptor"))return Or.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;if(y===s){if(t.authorization!==void 0){const p=s;$n(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?$n.errors:o.concat($n.errors),s=o.length);var l=p===s}else var l=!0;if(l)if(t.descriptor!==void 0){let p=t.descriptor;const f=s;if(s===f)if(p&&typeof p=="object"&&!Array.isArray(p)){let v;if(p.interface===void 0&&(v="interface")||p.method===void 0&&(v="method")||p.messageTimestamp===void 0&&(v="messageTimestamp"))return Or.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;{const b=s;for(const m in p)if(!(m==="interface"||m==="method"||m==="messageTimestamp"||m==="filter"))return Or.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(b===s){if(p.interface!==void 0){let m=p.interface;const w=s;if(typeof m!="string")return Or.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(m!=="Protocols")return Or.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:UT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=w===s}else var c=!0;if(c){if(p.method!==void 0){let m=p.method;const w=s;if(typeof m!="string")return Or.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(m!=="Query")return Or.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:UT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=w===s}else var c=!0;if(c){if(p.messageTimestamp!==void 0){let m=p.messageTimestamp;const w=s;if(s===s)if(typeof m=="string"){if(!nn.test(m))return Or.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return Or.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=w===s}else var c=!0;if(c)if(p.filter!==void 0){let m=p.filter;const w=s;if(s===w)if(m&&typeof m=="object"&&!Array.isArray(m)){if(Object.keys(m).length<1)return Or.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const T=s;for(const x in m)if(!(x==="protocol"||x==="recipient"))return Or.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"}],!1;if(T===s){if(m.protocol!==void 0){const x=s;if(typeof m.protocol!="string")return Or.errors=[{instancePath:e+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=x===s}else var u=!0;if(u)if(m.recipient!==void 0){let x=m.recipient;const I=s;if(s===s)if(typeof x=="string"){if(!sd.test(x))return Or.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Or.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=I===s}else var u=!0}}}else return Or.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=w===s}else var c=!0}}}}}else return Or.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=f===s}else var l=!0}}}else return Or.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Or.errors=o,s===0}Or.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const TL=li,FT={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-read.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function li(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=li.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.descriptor===void 0&&(u="descriptor"))return li.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{const h=s;for(const y in t)if(!(y==="authorization"||y==="descriptor"))return li.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(h===s){if(t.authorization!==void 0){const y=s;Wr(t.authorization,{instancePath:e+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i,dynamicAnchors:a})||(o=o===null?Wr.errors:o.concat(Wr.errors),s=o.length);var l=y===s}else var l=!0;if(l)if(t.descriptor!==void 0){let y=t.descriptor;const p=s;if(s===p)if(y&&typeof y=="object"&&!Array.isArray(y)){let g;if(y.interface===void 0&&(g="interface")||y.method===void 0&&(g="method")||y.messageTimestamp===void 0&&(g="messageTimestamp")||y.filter===void 0&&(g="filter"))return li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"}],!1;{const v=s;for(const b in y)if(!(b==="interface"||b==="method"||b==="messageTimestamp"||b==="filter"))return li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(v===s){if(y.interface!==void 0){let b=y.interface;const m=s;if(typeof b!="string")return li.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Records")return li.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:FT.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.method!==void 0){let b=y.method;const m=s;if(typeof b!="string")return li.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(b!=="Read")return li.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:FT.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var c=m===s}else var c=!0;if(c){if(y.messageTimestamp!==void 0){let b=y.messageTimestamp;const m=s;if(s===s)if(typeof b=="string"){if(!nn.test(b))return li.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return li.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=m===s}else var c=!0;if(c)if(y.filter!==void 0){const b=s;Ue(y.filter,{instancePath:e+"/descriptor/filter",parentData:y,parentDataProperty:"filter",rootData:i,dynamicAnchors:a})||(o=o===null?Ue.errors:o.concat(Ue.errors),s=o.length);var c=b===s}else var c=!0}}}}}else return li.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var l=p===s}else var l=!0}}}else return li.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return li.errors=o,s===0}li.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const AL=Ue,PL=Ht,xL=is;function is(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=is.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.descriptorCid===void 0&&(c="descriptorCid"))return is.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;for(const u in t)if(!(u==="descriptorCid"||u==="delegatedGrantId"||u==="permissionGrantId"||u==="protocolRole"))return is.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(t.descriptorCid!==void 0){const u=s;if(typeof t.descriptorCid!="string")return is.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.delegatedGrantId!==void 0){const u=s;if(typeof t.delegatedGrantId!="string")return is.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.permissionGrantId!==void 0){const u=s;if(typeof t.permissionGrantId!="string")return is.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l)if(t.protocolRole!==void 0){const u=s;if(typeof t.protocolRole!="string")return is.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0}}}}else return is.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return is.errors=o,s===0}is.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const IL=$i;function $i(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=$i.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.descriptorCid===void 0&&(c="descriptorCid")||t.recordId===void 0&&(c="recordId"))return $i.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;for(const u in t)if(!(u==="descriptorCid"||u==="recordId"||u==="contextId"||u==="attestationCid"||u==="encryptionCid"||u==="delegatedGrantId"||u==="permissionGrantId"||u==="protocolRole"))return $i.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties"}],!1;{if(t.descriptorCid!==void 0){const u=s;if(typeof t.descriptorCid!="string")return $i.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.recordId!==void 0){const u=s;if(typeof t.recordId!="string")return $i.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.contextId!==void 0){const u=s;if(typeof t.contextId!="string")return $i.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.attestationCid!==void 0){const u=s;if(typeof t.attestationCid!="string")return $i.errors=[{instancePath:e+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.encryptionCid!==void 0){const u=s;if(typeof t.encryptionCid!="string")return $i.errors=[{instancePath:e+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.delegatedGrantId!==void 0){const u=s;if(typeof t.delegatedGrantId!="string")return $i.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l){if(t.permissionGrantId!==void 0){const u=s;if(typeof t.permissionGrantId!="string")return $i.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0;if(l)if(t.protocolRole!==void 0){const u=s;if(typeof t.protocolRole!="string")return $i.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=u===s}else var l=!0}}}}}}}}else return $i.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return $i.errors=o,s===0}$i.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const kL=Ti;function Ti(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:i=t,dynamicAnchors:a={}}={}){let o=null,s=0;const d=Ti.evaluated;if(d.dynamicProps&&(d.props=void 0),d.dynamicItems&&(d.items=void 0),s===0)if(t&&typeof t=="object"&&!Array.isArray(t)){if(Object.keys(t).length<1)return Ti.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const f=s;for(const g in t)if(!(g==="gt"||g==="gte"||g==="lt"||g==="lte"))return Ti.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;if(f===s){if(t.gt!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.gte===void 0){const m={};o===null?o=[m]:o.push(m),s++}var l=b===s;if(l)return Ti.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.gte!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.gt===void 0){const w={};o===null?o=[w]:o.push(w),s++}var u=b===s;if(u)return Ti.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.lt!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.lte===void 0){const w={};o===null?o=[w]:o.push(w),s++}var h=b===s;if(h)return Ti.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.lte!==void 0){const g=s,v=s,b=s;if(t&&typeof t=="object"&&!Array.isArray(t)&&t.lt===void 0){const w={};o===null?o=[w]:o.push(w),s++}var y=b===s;if(y)return Ti.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;s=v,o!==null&&(v?o.length=v:o=null);var c=g===s}else var c=!0;if(c){if(t.gt!==void 0){const g=s;if(typeof t.gt!="string")return Ti.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=g===s}else var p=!0;if(p){if(t.gte!==void 0){const g=s;if(typeof t.gte!="string")return Ti.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=g===s}else var p=!0;if(p){if(t.lt!==void 0){const g=s;if(typeof t.lt!="string")return Ti.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=g===s}else var p=!0;if(p)if(t.lte!==void 0){const g=s;if(typeof t.lte!="string")return Ti.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=g===s}else var p=!0}}}}}}}}}else return Ti.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ti.errors=o,s===0}Ti.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const OL=Object.freeze(Object.defineProperty({__proto__:null,Authorization:HM,AuthorizationDelegatedGrant:GM,AuthorizationOwner:ZM,Definitions:nL,GeneralJwk:iL,GeneralJws:oL,GenericSignaturePayload:xL,JwkVerificationMethod:sL,MessagesFilter:cL,MessagesQuery:dL,MessagesRead:lL,MessagesSubscribe:uL,NumberRangeFilter:fL,PaginationCursor:hL,PermissionGrantData:pL,PermissionRequestData:yL,PermissionRevocationData:mL,PermissionsDefinitions:gL,PermissionsScopes:wL,ProtocolDefinition:bL,ProtocolRuleSet:EL,ProtocolsConfigure:SL,ProtocolsQuery:$L,PublicJwk:PL,RecordsDelete:XM,RecordsFilter:AL,RecordsQuery:QM,RecordsRead:TL,RecordsSubscribe:JM,RecordsWrite:eL,RecordsWriteDataEncoded:tL,RecordsWriteSignaturePayload:IL,RecordsWriteUnidentified:rL,StringRangeFilter:kL},Symbol.toStringTag,{value:"Module"}));function Ap(t,e){const r=OL[t];if(!r)throw new Pe(Te.SchemaValidatorSchemaNotFound,`schema for ${t} not found.`);if(r(e),!r.errors)return;const[n]=r.errors;let{instancePath:i,message:a,keyword:o}=n;if(i||(i=t),o==="additionalProperties"){const s=n.params.additionalProperty;throw new Pe(Te.SchemaValidatorAdditionalPropertyNotAllowed,`${a}: ${i}: ${s}`)}if(o==="unevaluatedProperties"){const s=n.params.unevaluatedProperty;throw new Pe(Te.SchemaValidatorUnevaluatedPropertyNotAllowed,`${a}: ${i}: ${s}`)}throw new Pe(Te.SchemaValidatorFailure,`${i}: ${a}`)}const RL=["string","number","bigint","symbol"],jL=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function CL(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(RL.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(NL(t))return"Buffer";const r=BL(t);return r||"Object"}function NL(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function BL(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(jL.includes(e))return e}class $e{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}$e.uint=new $e(0,"uint",!0);$e.negint=new $e(1,"negint",!0);$e.bytes=new $e(2,"bytes",!0);$e.string=new $e(3,"string",!0);$e.array=new $e(4,"array",!1);$e.map=new $e(5,"map",!1);$e.tag=new $e(6,"tag",!1);$e.float=new $e(7,"float",!0);$e.false=new $e(7,"false",!0);$e.true=new $e(7,"true",!0);$e.null=new $e(7,"null",!0);$e.undefined=new $e(7,"undefined",!0);$e.break=new $e(7,"break",!0);class Ze{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const nh=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",DL=new TextDecoder,ML=new TextEncoder;function Gg(t){return nh&&globalThis.Buffer.isBuffer(t)}function G3(t){return t instanceof Uint8Array?Gg(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const LL=nh?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):qT(t,e,r):(t,e,r)=>r-e>64?DL.decode(t.subarray(e,r)):qT(t,e,r),UL=nh?t=>t.length>64?globalThis.Buffer.from(t):zT(t):t=>t.length>64?ML.encode(t):zT(t),Sa=t=>Uint8Array.from(t),F2=nh?(t,e,r)=>Gg(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),FL=nh?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),G3(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},zL=nh?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function qL(t,e){if(Gg(t)&&Gg(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function zT(t,e=1/0){let r;const n=t.length;let i=null;const a=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function qT(t,e,r){const n=[];for(;e<r;){const i=t[e];let a=null,o=i>239?4:i>223?3:i>191?2:1;if(e+o<=r){let s,d,l,c;switch(o){case 1:i<128&&(a=i);break;case 2:s=t[e+1],(s&192)===128&&(c=(i&31)<<6|s&63,c>127&&(a=c));break;case 3:s=t[e+1],d=t[e+2],(s&192)===128&&(d&192)===128&&(c=(i&15)<<12|(s&63)<<6|d&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:s=t[e+1],d=t[e+2],l=t[e+3],(s&192)===128&&(d&192)===128&&(l&192)===128&&(c=(i&15)<<18|(s&63)<<12|(d&63)<<6|l&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),e+=o}return KL(n)}const KT=4096;function KL(t){const e=t.length;if(e<=KT)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=KT));return r}const VL=256;class W3{constructor(e=VL){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){const i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=zL(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=F2(n,0,this.cursor)}else r=FL(this.chunks,this.cursor);return e&&this.reset(),r}}const Mt="CBOR decode error:",Y3="CBOR encode error:";function ih(t,e,r){if(t.length-e<r)throw new Error(`${Mt} not enough data for type`)}const Wn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function gu(t,e,r){ih(t,e,1);const n=t[e];if(r.strict===!0&&n<Wn[0])throw new Error(`${Mt} integer encoded in more bytes than necessary (strict decode)`);return n}function wu(t,e,r){ih(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Wn[1])throw new Error(`${Mt} integer encoded in more bytes than necessary (strict decode)`);return n}function bu(t,e,r){ih(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Wn[2])throw new Error(`${Mt} integer encoded in more bytes than necessary (strict decode)`);return n}function vu(t,e,r){ih(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],a=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&a<Wn[3])throw new Error(`${Mt} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(r.allowBigInt===!0)return a;throw new Error(`${Mt} integers outside of the safe integer range are not supported`)}function HL(t,e,r,n){return new Ze($e.uint,gu(t,e+1,n),2)}function GL(t,e,r,n){return new Ze($e.uint,wu(t,e+1,n),3)}function WL(t,e,r,n){return new Ze($e.uint,bu(t,e+1,n),5)}function YL(t,e,r,n){return new Ze($e.uint,vu(t,e+1,n),9)}function _u(t,e){return Ho(t,0,e.value)}function Ho(t,e,r){if(r<Wn[0]){const n=Number(r);t.push([e|n])}else if(r<Wn[1]){const n=Number(r);t.push([e|24,n])}else if(r<Wn[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Wn[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<Wn[4]){const i=[e|27,0,0,0,0,0,0,0];let a=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=a&255,a=a>>8,i[7]=a&255,a=a>>8,i[6]=a&255,a=a>>8,i[5]=a&255,i[4]=o&255,o=o>>8,i[3]=o&255,o=o>>8,i[2]=o&255,o=o>>8,i[1]=o&255,t.push(i)}else throw new Error(`${Mt} encountered BigInt larger than allowable range`)}}_u.encodedSize=function(e){return Ho.encodedSize(e.value)};Ho.encodedSize=function(e){return e<Wn[0]?1:e<Wn[1]?2:e<Wn[2]?3:e<Wn[3]?5:9};_u.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function ZL(t,e,r,n){return new Ze($e.negint,-1-gu(t,e+1,n),2)}function XL(t,e,r,n){return new Ze($e.negint,-1-wu(t,e+1,n),3)}function QL(t,e,r,n){return new Ze($e.negint,-1-bu(t,e+1,n),5)}const z2=BigInt(-1),Z3=BigInt(1);function JL(t,e,r,n){const i=vu(t,e+1,n);if(typeof i!="bigint"){const a=-1-i;if(a>=Number.MIN_SAFE_INTEGER)return new Ze($e.negint,a,9)}if(n.allowBigInt!==!0)throw new Error(`${Mt} integers outside of the safe integer range are not supported`);return new Ze($e.negint,z2-BigInt(i),9)}function q2(t,e){const r=e.value,n=typeof r=="bigint"?r*z2-Z3:r*-1-1;Ho(t,e.type.majorEncoded,n)}q2.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*z2-Z3:r*-1-1;return n<Wn[0]?1:n<Wn[1]?2:n<Wn[2]?3:n<Wn[3]?5:9};q2.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function by(t,e,r,n){ih(t,e,r+n);const i=F2(t,e+r,e+r+n);return new Ze($e.bytes,i,r+n)}function eU(t,e,r,n){return by(t,e,1,r)}function tU(t,e,r,n){return by(t,e,2,gu(t,e+1,n))}function rU(t,e,r,n){return by(t,e,3,wu(t,e+1,n))}function nU(t,e,r,n){return by(t,e,5,bu(t,e+1,n))}function iU(t,e,r,n){const i=vu(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Mt} 64-bit integer bytes lengths not supported`);return by(t,e,9,i)}function Wg(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===$e.string?UL(t.value):t.value),t.encodedBytes}function J0(t,e){const r=Wg(e);Ho(t,e.type.majorEncoded,r.length),t.push(r)}J0.encodedSize=function(e){const r=Wg(e);return Ho.encodedSize(r.length)+r.length};J0.compareTokens=function(e,r){return oU(Wg(e),Wg(r))};function oU(t,e){return t.length<e.length?-1:t.length>e.length?1:qL(t,e)}function vy(t,e,r,n,i){const a=r+n;ih(t,e,a);const o=new Ze($e.string,LL(t,e+r,e+a),a);return i.retainStringBytes===!0&&(o.byteValue=F2(t,e+r,e+a)),o}function sU(t,e,r,n){return vy(t,e,1,r,n)}function aU(t,e,r,n){return vy(t,e,2,gu(t,e+1,n),n)}function cU(t,e,r,n){return vy(t,e,3,wu(t,e+1,n),n)}function dU(t,e,r,n){return vy(t,e,5,bu(t,e+1,n),n)}function lU(t,e,r,n){const i=vu(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Mt} 64-bit integer string lengths not supported`);return vy(t,e,9,i,n)}const uU=J0;function oh(t,e,r,n){return new Ze($e.array,n,r)}function fU(t,e,r,n){return oh(t,e,1,r)}function hU(t,e,r,n){return oh(t,e,2,gu(t,e+1,n))}function pU(t,e,r,n){return oh(t,e,3,wu(t,e+1,n))}function yU(t,e,r,n){return oh(t,e,5,bu(t,e+1,n))}function mU(t,e,r,n){const i=vu(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Mt} 64-bit integer array lengths not supported`);return oh(t,e,9,i)}function gU(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Mt} indefinite length items not allowed`);return oh(t,e,1,1/0)}function K2(t,e){Ho(t,$e.array.majorEncoded,e.value)}K2.compareTokens=_u.compareTokens;K2.encodedSize=function(e){return Ho.encodedSize(e.value)};function sh(t,e,r,n){return new Ze($e.map,n,r)}function wU(t,e,r,n){return sh(t,e,1,r)}function bU(t,e,r,n){return sh(t,e,2,gu(t,e+1,n))}function vU(t,e,r,n){return sh(t,e,3,wu(t,e+1,n))}function _U(t,e,r,n){return sh(t,e,5,bu(t,e+1,n))}function EU(t,e,r,n){const i=vu(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Mt} 64-bit integer map lengths not supported`);return sh(t,e,9,i)}function SU(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Mt} indefinite length items not allowed`);return sh(t,e,1,1/0)}function V2(t,e){Ho(t,$e.map.majorEncoded,e.value)}V2.compareTokens=_u.compareTokens;V2.encodedSize=function(e){return Ho.encodedSize(e.value)};function $U(t,e,r,n){return new Ze($e.tag,r,1)}function TU(t,e,r,n){return new Ze($e.tag,gu(t,e+1,n),2)}function AU(t,e,r,n){return new Ze($e.tag,wu(t,e+1,n),3)}function PU(t,e,r,n){return new Ze($e.tag,bu(t,e+1,n),5)}function xU(t,e,r,n){return new Ze($e.tag,vu(t,e+1,n),9)}function H2(t,e){Ho(t,$e.tag.majorEncoded,e.value)}H2.compareTokens=_u.compareTokens;H2.encodedSize=function(e){return Ho.encodedSize(e.value)};const IU=20,kU=21,OU=22,RU=23;function jU(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Mt} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Ze($e.null,null,1):new Ze($e.undefined,void 0,1)}function CU(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Mt} indefinite length items not allowed`);return new Ze($e.break,void 0,1)}function G2(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Mt} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Mt} Infinity values are not supported`)}return new Ze($e.float,t,e)}function NU(t,e,r,n){return G2(Y2(t,e+1),3,n)}function BU(t,e,r,n){return G2(Z2(t,e+1),5,n)}function DU(t,e,r,n){return G2(eO(t,e+1),9,n)}function W2(t,e,r){const n=e.value;if(n===!1)t.push([$e.float.majorEncoded|IU]);else if(n===!0)t.push([$e.float.majorEncoded|kU]);else if(n===null)t.push([$e.float.majorEncoded|OU]);else if(n===void 0)t.push([$e.float.majorEncoded|RU]);else{let i,a=!1;(!r||r.float64!==!0)&&(Q3(n),i=Y2(os,1),n===i||Number.isNaN(n)?(os[0]=249,t.push(os.slice(0,3)),a=!0):(J3(n),i=Z2(os,1),n===i&&(os[0]=250,t.push(os.slice(0,5)),a=!0))),a||(MU(n),i=eO(os,1),os[0]=251,t.push(os.slice(0,9)))}}W2.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Q3(n);let i=Y2(os,1);if(n===i||Number.isNaN(n))return 3;if(J3(n),i=Z2(os,1),n===i)return 5}return 9};const X3=new ArrayBuffer(9),Po=new DataView(X3,1),os=new Uint8Array(X3,0);function Q3(t){if(t===1/0)Po.setUint16(0,31744,!1);else if(t===-1/0)Po.setUint16(0,64512,!1);else if(Number.isNaN(t))Po.setUint16(0,32256,!1);else{Po.setFloat32(0,t);const e=Po.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Po.setUint16(0,31744,!1);else if(r===0)Po.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const i=r-127;i<-24?Po.setUint16(0,0):i<-14?Po.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Po.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Y2(t,e){if(t.length-e<2)throw new Error(`${Mt} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,i=r&1023;let a;return n===0?a=i*2**-24:n!==31?a=(i+1024)*2**(n-25):a=i===0?1/0:NaN,r&32768?-a:a}function J3(t){Po.setFloat32(0,t,!1)}function Z2(t,e){if(t.length-e<4)throw new Error(`${Mt} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function MU(t){Po.setFloat64(0,t,!1)}function eO(t,e){if(t.length-e<8)throw new Error(`${Mt} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}W2.compareTokens=_u.compareTokens;function qt(t,e,r){throw new Error(`${Mt} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function ew(t){return()=>{throw new Error(`${Mt} ${t}`)}}const Ce=[];for(let t=0;t<=23;t++)Ce[t]=qt;Ce[24]=HL;Ce[25]=GL;Ce[26]=WL;Ce[27]=YL;Ce[28]=qt;Ce[29]=qt;Ce[30]=qt;Ce[31]=qt;for(let t=32;t<=55;t++)Ce[t]=qt;Ce[56]=ZL;Ce[57]=XL;Ce[58]=QL;Ce[59]=JL;Ce[60]=qt;Ce[61]=qt;Ce[62]=qt;Ce[63]=qt;for(let t=64;t<=87;t++)Ce[t]=eU;Ce[88]=tU;Ce[89]=rU;Ce[90]=nU;Ce[91]=iU;Ce[92]=qt;Ce[93]=qt;Ce[94]=qt;Ce[95]=ew("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)Ce[t]=sU;Ce[120]=aU;Ce[121]=cU;Ce[122]=dU;Ce[123]=lU;Ce[124]=qt;Ce[125]=qt;Ce[126]=qt;Ce[127]=ew("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)Ce[t]=fU;Ce[152]=hU;Ce[153]=pU;Ce[154]=yU;Ce[155]=mU;Ce[156]=qt;Ce[157]=qt;Ce[158]=qt;Ce[159]=gU;for(let t=160;t<=183;t++)Ce[t]=wU;Ce[184]=bU;Ce[185]=vU;Ce[186]=_U;Ce[187]=EU;Ce[188]=qt;Ce[189]=qt;Ce[190]=qt;Ce[191]=SU;for(let t=192;t<=215;t++)Ce[t]=$U;Ce[216]=TU;Ce[217]=AU;Ce[218]=PU;Ce[219]=xU;Ce[220]=qt;Ce[221]=qt;Ce[222]=qt;Ce[223]=qt;for(let t=224;t<=243;t++)Ce[t]=ew("simple values are not supported");Ce[244]=qt;Ce[245]=qt;Ce[246]=qt;Ce[247]=jU;Ce[248]=ew("simple values are not supported");Ce[249]=NU;Ce[250]=BU;Ce[251]=DU;Ce[252]=qt;Ce[253]=qt;Ce[254]=qt;Ce[255]=CU;const ua=[];for(let t=0;t<24;t++)ua[t]=new Ze($e.uint,t,1);for(let t=-1;t>=-24;t--)ua[31-t]=new Ze($e.negint,t,1);ua[64]=new Ze($e.bytes,new Uint8Array(0),1);ua[96]=new Ze($e.string,"",1);ua[128]=new Ze($e.array,0,1);ua[160]=new Ze($e.map,0,1);ua[244]=new Ze($e.false,!1,1);ua[245]=new Ze($e.true,!0,1);ua[246]=new Ze($e.null,null,1);function LU(t){switch(t.type){case $e.false:return Sa([244]);case $e.true:return Sa([245]);case $e.null:return Sa([246]);case $e.bytes:return t.value.length?void 0:Sa([64]);case $e.string:return t.value===""?Sa([96]):void 0;case $e.array:return t.value===0?Sa([128]):void 0;case $e.map:return t.value===0?Sa([160]):void 0;case $e.uint:return t.value<24?Sa([Number(t.value)]):void 0;case $e.negint:if(t.value>=-24)return Sa([31-Number(t.value)])}}const UU={float64:!1,mapSorter:qU,quickEncodeToken:LU};function FU(){const t=[];return t[$e.uint.major]=_u,t[$e.negint.major]=q2,t[$e.bytes.major]=J0,t[$e.string.major]=uU,t[$e.array.major]=K2,t[$e.map.major]=V2,t[$e.tag.major]=H2,t[$e.float.major]=W2,t}const tO=FU(),Ob=new W3;class Yg{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Y3} object contains circular references`);return new Yg(r,e)}}const kc={null:new Ze($e.null,null),undefined:new Ze($e.undefined,void 0),true:new Ze($e.true,!0),false:new Ze($e.false,!1),emptyArray:new Ze($e.array,0),emptyMap:new Ze($e.map,0)},Ad={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Ze($e.float,t):t>=0?new Ze($e.uint,t):new Ze($e.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Ze($e.uint,t):new Ze($e.negint,t)},Uint8Array(t,e,r,n){return new Ze($e.bytes,t)},string(t,e,r,n){return new Ze($e.string,t)},boolean(t,e,r,n){return t?kc.true:kc.false},null(t,e,r,n){return kc.null},undefined(t,e,r,n){return kc.undefined},ArrayBuffer(t,e,r,n){return new Ze($e.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Ze($e.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[kc.emptyArray,new Ze($e.break)]:kc.emptyArray;n=Yg.createCheck(n,t);const i=[];let a=0;for(const o of t)i[a++]=lg(o,r,n);return r.addBreakTokens?[new Ze($e.array,t.length),i,new Ze($e.break)]:[new Ze($e.array,t.length),i]},Object(t,e,r,n){const i=e!=="Object",a=i?t.keys():Object.keys(t),o=i?t.size:a.length;if(!o)return r.addBreakTokens===!0?[kc.emptyMap,new Ze($e.break)]:kc.emptyMap;n=Yg.createCheck(n,t);const s=[];let d=0;for(const l of a)s[d++]=[lg(l,r,n),lg(i?t.get(l):t[l],r,n)];return zU(s,r),r.addBreakTokens?[new Ze($e.map,o),s,new Ze($e.break)]:[new Ze($e.map,o),s]}};Ad.Map=Ad.Object;Ad.Buffer=Ad.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ad[`${t}Array`]=Ad.DataView;function lg(t,e={},r){const n=CL(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ad[n];if(typeof i=="function"){const o=i(t,n,e,r);if(o!=null)return o}const a=Ad[n];if(!a)throw new Error(`${Y3} unsupported type: ${n}`);return a(t,n,e,r)}function zU(t,e){e.mapSorter&&t.sort(e.mapSorter)}function qU(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,a=tO[i].compareTokens(r,n);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function rO(t,e,r,n){if(Array.isArray(e))for(const i of e)rO(t,i,r,n);else r[e.type.major](t,e,n)}function KU(t,e,r){const n=lg(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const i=r.quickEncodeToken(n);if(i)return i;const a=e[n.type.major];if(a.encodedSize){const o=a.encodedSize(n,r),s=new W3(o);if(a(s,n,r),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return G3(s.chunks[0])}}return Ob.reset(),rO(Ob,n,e,r),Ob.toBytes(!0)}function VU(t,e){return e=Object.assign({},UU,e),KU(t,tO,e)}const HU={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class GU{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let r=ua[e];if(r===void 0){const n=Ce[e];if(!n)throw new Error(`${Mt} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;r=n(this.data,this.pos,i,this.options)}return this.pos+=r.encodedLength,r}}const Gp=Symbol.for("DONE"),tw=Symbol.for("BREAK");function WU(t,e,r){const n=[];for(let i=0;i<t.value;i++){const a=Wp(e,r);if(a===tw){if(t.value===1/0)break;throw new Error(`${Mt} got unexpected break to lengthed array`)}if(a===Gp)throw new Error(`${Mt} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=a}return n}function YU(t,e,r){const n=r.useMaps===!0,i=n?void 0:{},a=n?new Map:void 0;for(let o=0;o<t.value;o++){const s=Wp(e,r);if(s===tw){if(t.value===1/0)break;throw new Error(`${Mt} got unexpected break to lengthed map`)}if(s===Gp)throw new Error(`${Mt} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${Mt} non-string keys not supported (got ${typeof s})`);if(r.rejectDuplicateMapKeys===!0&&(n&&a.has(s)||!n&&s in i))throw new Error(`${Mt} found repeat map key "${s}"`);const d=Wp(e,r);if(d===Gp)throw new Error(`${Mt} found map but not enough entries (got ${o} [no value], expected ${t.value})`);n?a.set(s,d):i[s]=d}return n?a:i}function Wp(t,e){if(t.done())return Gp;const r=t.next();if(r.type===$e.break)return tw;if(r.type.terminal)return r.value;if(r.type===$e.array)return WU(r,t,e);if(r.type===$e.map)return YU(r,t,e);if(r.type===$e.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=Wp(t,e);return e.tags[r.value](n)}throw new Error(`${Mt} tag not supported (${r.value})`)}throw new Error("unsupported")}function ZU(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Mt} data to decode must be a Uint8Array`);e=Object.assign({},HU,e);const r=e.tokenizer||new GU(t,e),n=Wp(r,e);if(n===Gp)throw new Error(`${Mt} did not find any content to decode`);if(n===tw)throw new Error(`${Mt} got unexpected break`);if(!r.done())throw new Error(`${Mt} too many terminals, data makes no sense`);return n}function XU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),o=a.charCodeAt(0);if(r[o]!==255)throw new TypeError(a+" is ambiguous");r[o]=i}var s=t.length,d=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var f=0,g=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,f++;for(var m=(b-v)*c+1>>>0,w=new Uint8Array(m);v!==b;){for(var S=p[v],T=0,x=m-1;(S!==0||T<g)&&x!==-1;x--,T++)S+=256*w[x]>>>0,w[x]=S%s>>>0,S=S/s>>>0;if(S!==0)throw new Error("Non-zero carry");g=T,v++}for(var I=m-g;I!==m&&w[I]===0;)I++;for(var M=d.repeat(f);I<m;++I)M+=t.charAt(w[I]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var f=0;if(p[f]!==" "){for(var g=0,v=0;p[f]===d;)g++,f++;for(var b=(p.length-f)*l+1>>>0,m=new Uint8Array(b);p[f];){var w=r[p.charCodeAt(f)];if(w===255)return;for(var S=0,T=b-1;(w!==0||S<v)&&T!==-1;T--,S++)w+=s*m[T]>>>0,m[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=S,f++}if(p[f]!==" "){for(var x=b-v;x!==b&&m[x]===0;)x++;for(var I=new Uint8Array(g+(b-x)),M=g;x!==b;)I[M++]=m[x++];return I}}}function y(p){var f=h(p);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:h,decode:y}}var QU=XU,JU=QU;const e9=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},X2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},t9=t=>new TextEncoder().encode(t),r9=t=>new TextDecoder().decode(t);let n9=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},i9=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nO(this,e)}},o9=class{constructor(e){this.decoders=e}or(e){return nO(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const nO=(t,e)=>new o9({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let s9=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new n9(e,r,n),this.decoder=new i9(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const rw=({name:t,prefix:e,encode:r,decode:n})=>new s9(t,e,r,n),_y=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=JU(r,e);return rw({prefix:t,name:e,encode:n,decode:a=>X2(i(a))})},a9=(t,e,r,n)=>{const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;const o=new Uint8Array(a*r/8|0);let s=0,d=0,l=0;for(let c=0;c<a;++c){const u=i[t[c]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|u,s+=r,s>=8&&(s-=8,o[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return o},c9=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let a="",o=0,s=0;for(let d=0;d<t.length;++d)for(s=s<<8|t[d],o+=8;o>r;)o-=r,a+=e[i&s>>o];if(o&&(a+=e[i&s<<r-o]),n)for(;a.length*r&7;)a+="=";return a},ei=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>rw({prefix:e,name:t,encode(i){return c9(i,n,r)},decode(i){return a9(i,n,r,t)}}),Pp=ei({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d9=ei({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),l9=ei({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),u9=ei({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f9=ei({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h9=ei({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),p9=ei({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),y9=ei({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),m9=ei({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),g9=Object.freeze(Object.defineProperty({__proto__:null,base32:Pp,base32hex:f9,base32hexpad:p9,base32hexpadupper:y9,base32hexupper:h9,base32pad:l9,base32padupper:u9,base32upper:d9,base32z:m9},Symbol.toStringTag,{value:"Module"})),Ma=_y({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w9=_y({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),b9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Ma,base58flickr:w9},Symbol.toStringTag,{value:"Module"}));var v9=iO,VT=128,_9=127,E9=~_9,S9=Math.pow(2,31);function iO(t,e,r){e=e||[],r=r||0;for(var n=r;t>=S9;)e[r++]=t&255|VT,t/=128;for(;t&E9;)e[r++]=t&255|VT,t>>>=7;return e[r]=t|0,iO.bytes=r-n+1,e}var $9=U1,T9=128,HT=127;function U1(t,n){var r=0,n=n||0,i=0,a=n,o,s=t.length;do{if(a>=s)throw U1.bytes=0,new RangeError("Could not decode varint");o=t[a++],r+=i<28?(o&HT)<<i:(o&HT)*Math.pow(2,i),i+=7}while(o>=T9);return U1.bytes=a-n,r}var A9=Math.pow(2,7),P9=Math.pow(2,14),x9=Math.pow(2,21),I9=Math.pow(2,28),k9=Math.pow(2,35),O9=Math.pow(2,42),R9=Math.pow(2,49),j9=Math.pow(2,56),C9=Math.pow(2,63),N9=function(t){return t<A9?1:t<P9?2:t<x9?3:t<I9?4:t<k9?5:t<O9?6:t<R9?7:t<j9?8:t<C9?9:10},B9={encode:v9,decode:$9,encodingLength:N9},Zg=B9;const F1=(t,e=0)=>[Zg.decode(t,e),Zg.decode.bytes],Xg=(t,e,r=0)=>(Zg.encode(t,e,r),e),Qg=t=>Zg.encodingLength(t),z1=(t,e)=>{const r=e.byteLength,n=Qg(t),i=n+Qg(r),a=new Uint8Array(i+r);return Xg(t,a,0),Xg(r,a,n),a.set(e,i),new Q2(t,r,e,a)},oO=t=>{const e=X2(t),[r,n]=F1(e),[i,a]=F1(e.subarray(n)),o=e.subarray(n+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new Q2(r,i,o,e)},D9=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&e9(t.bytes,r.bytes)}};class Q2{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const GT=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return L9(r,q1(t),e||Ma.encoder);default:return U9(r,q1(t),e||Pp.encoder)}},WT=new WeakMap,q1=t=>{const e=WT.get(t);if(e==null){const r=new Map;return WT.set(t,r),r}return e};let sO=class oi{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==jh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==F9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return oi.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=z1(e,r);return oi.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return oi.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&D9(e.multihash,n.multihash)}toString(e){return GT(this,e)}toJSON(){return{"/":GT(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof oi)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:a,bytes:o}=r;return new oi(n,i,a,o||YT(n,i,a.bytes))}else if(r[z9]===!0){const{version:n,multihash:i,code:a}=r,o=oO(i);return oi.create(n,a,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==jh)throw new Error(`Version 0 CID must use dag-pb (code: ${jh}) block encoding`);return new oi(e,r,n,n.bytes)}case 1:{const i=YT(e,r,n.bytes);return new oi(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return oi.create(0,jh,e)}static createV1(e,r){return oi.create(1,e,r)}static decode(e){const[r,n]=oi.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=oi.inspectBytes(e),n=r.size-r.multihashSize,i=X2(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=i.subarray(r.multihashSize-r.digestSize),o=new Q2(r.multihashCode,r.digestSize,a,i);return[r.version===0?oi.createV0(o):oi.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[u,h]=F1(e.subarray(r));return r+=h,u};let i=n(),a=jh;if(i===18?(i=0,r=0):a=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,s=n(),d=n(),l=r+d,c=l-o;return{version:i,codec:a,multihashCode:s,digestSize:d,multihashSize:c,size:l}}static parse(e,r){const[n,i]=M9(e,r),a=oi.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return q1(a).set(n,e),a}};const M9=(t,e)=>{switch(t[0]){case"Q":{const r=e||Ma;return[Ma.prefix,r.decode(`${Ma.prefix}${t}`)]}case Ma.prefix:{const r=e||Ma;return[Ma.prefix,r.decode(t)]}case Pp.prefix:{const r=e||Pp;return[Pp.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},L9=(t,e,r)=>{const{prefix:n}=r;if(n!==Ma.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return i},U9=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(i==null){const a=r.encode(t);return e.set(n,a),a}else return i},jh=112,F9=18,YT=(t,e,r)=>{const n=Qg(t),i=n+Qg(e),a=new Uint8Array(i+r.byteLength);return Xg(t,a,0),Xg(e,a,n),a.set(r,i),a},z9=Symbol.for("@ipld/js-cid/CID"),aO=42;function q9(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=sO.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Ze($e.tag,aO),new Ze($e.bytes,r)]}function K9(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function V9(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const H9={float64:!0,typeEncoders:{Object:q9,undefined:K9,number:V9}};function G9(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return sO.decode(t.subarray(1))}const cO={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};cO.tags[aO]=G9;const W9="dag-cbor",J2=113,Y9=t=>VU(t,H9),Z9=t=>ZU(t,cO),X9=Object.freeze(Object.defineProperty({__proto__:null,code:J2,decode:Z9,encode:Y9,name:W9},Symbol.toStringTag,{value:"Module"})),Lo=a3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});a3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const ug=bo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});bo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});bo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});bo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});bo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});bo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});bo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});bo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const ZT=bo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),XT=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return J9(r,K1(t),e||Lo.encoder);default:return e7(r,K1(t),e||ug.encoder)}},QT=new WeakMap,K1=t=>{const e=QT.get(t);if(e==null){const r=new Map;return QT.set(t,r),r}return e};class Cr{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Ch)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==t7)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Cr.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=R1(e,r);return Cr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Cr.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&aB(e.multihash,n.multihash)}toString(e){return XT(this,e)}toJSON(){return{"/":XT(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Cr)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:a,bytes:o}=r;return new Cr(n,i,a,o||JT(n,i,a.bytes))}else if(r[r7]===!0){const{version:n,multihash:i,code:a}=r,o=sB(i);return Cr.create(n,a,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Ch)throw new Error(`Version 0 CID must use dag-pb (code: ${Ch}) block encoding`);return new Cr(e,r,n,n.bytes)}case 1:{const i=JT(e,r,n.bytes);return new Cr(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Cr.create(0,Ch,e)}static createV1(e,r){return Cr.create(1,e,r)}static decode(e){const[r,n]=Cr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Cr.inspectBytes(e),n=r.size-r.multihashSize,i=uy(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const a=i.subarray(r.multihashSize-r.digestSize),o=new P2(r.multihashCode,r.digestSize,a,i);return[r.version===0?Cr.createV0(o):Cr.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[u,h]=qp(e.subarray(r));return r+=h,u};let i=n(),a=Ch;if(i===18?(i=0,r=0):a=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,s=n(),d=n(),l=r+d,c=l-o;return{version:i,codec:a,multihashCode:s,digestSize:d,multihashSize:c,size:l}}static parse(e,r){const[n,i]=Q9(e,r),a=Cr.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return K1(a).set(n,e),a}}const Q9=(t,e)=>{switch(t[0]){case"Q":{const r=e||Lo;return[Lo.prefix,r.decode(`${Lo.prefix}${t}`)]}case Lo.prefix:{const r=e||Lo;return[Lo.prefix,r.decode(t)]}case ug.prefix:{const r=e||ug;return[ug.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},J9=(t,e,r)=>{const{prefix:n}=r;if(n!==Lo.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const a=r.encode(t).slice(1);return e.set(n,a),a}else return i},e7=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(i==null){const a=r.encode(t);return e.set(n,a),a}else return i},Ch=112,t7=18,JT=(t,e,r)=>{const n=Vp(t),i=n+Vp(e),a=new Uint8Array(i+r.byteLength);return Kp(t,a,0),Kp(e,a,n),a.set(r,i),a},r7=Symbol.for("@ipld/js-cid/CID");var Oc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},fm=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,d){o=t[a](o),i(s,d,o.done,o.value)})}}function i(a,o,s,d){Promise.resolve(d).then(function(l){a({value:l,done:s})},o)}},mn=function(t){return this instanceof mn?(this.v=t,this):new mn(t)},hm=function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(y){return new Promise(function(p,f){a.push([h,y,p,f])>1||s(h,y)})})}function s(h,y){try{d(n[h](y))}catch(p){u(a[0][3],p)}}function d(h){h.value instanceof mn?Promise.resolve(h.value.v).then(l,c):u(a[0][2],h)}function l(h){s("next",h)}function c(h){s("throw",h)}function u(h,y){h(y),a.shift(),a.length&&s(a[0][0],a[0][1])}};class eA{open(){return Oc(this,void 0,void 0,function*(){})}close(){return Oc(this,void 0,void 0,function*(){})}put(e,r,n){return Oc(this,void 0,void 0,function*(){return e})}get(e,r){return Oc(this,void 0,void 0,function*(){return new Uint8Array})}has(e,r){return Oc(this,void 0,void 0,function*(){return!1})}delete(e,r){return Oc(this,void 0,void 0,function*(){})}isEmpty(e){return Oc(this,void 0,void 0,function*(){return!0})}putMany(e,r){return hm(this,arguments,function*(){var i,a,o,s;try{for(var d=!0,l=fm(e),c;c=yield mn(l.next()),i=c.done,!i;d=!0){s=c.value,d=!1;const u=s;yield mn(this.put(u.cid,u.block,r)),yield yield mn(u.cid)}}catch(u){a={error:u}}finally{try{!d&&!i&&(o=l.return)&&(yield mn(o.call(l)))}finally{if(a)throw a.error}}})}getMany(e,r){return hm(this,arguments,function*(){var i,a,o,s;try{for(var d=!0,l=fm(e),c;c=yield mn(l.next()),i=c.done,!i;d=!0){s=c.value,d=!1;const u=s;yield yield mn({cid:u,block:yield mn(this.get(u,r))})}}catch(u){a={error:u}}finally{try{!d&&!i&&(o=l.return)&&(yield mn(o.call(l)))}finally{if(a)throw a.error}}})}getAll(e){return hm(this,arguments,function*(){var n,i,a,o;const s=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);try{for(var d=!0,l=fm(s),c;c=yield mn(l.next()),n=c.done,!n;d=!0){o=c.value,d=!1;const[u,h]=o;yield yield mn({cid:Cr.decode(u),block:h})}}catch(u){i={error:u}}finally{try{!d&&!n&&(a=l.return)&&(yield mn(a.call(l)))}finally{if(i)throw i.error}}})}deleteMany(e,r){return hm(this,arguments,function*(){var i,a,o,s;try{for(var d=!0,l=fm(e),c;c=yield mn(l.next()),i=c.done,!i;d=!0){s=c.value,d=!1;const u=s;yield mn(this.delete(u,r)),yield yield mn(u)}}catch(u){a={error:u}}finally{try{!d&&!i&&(o=l.return)&&(yield mn(o.call(l)))}finally{if(a)throw a.error}}})}clear(){return Oc(this,void 0,void 0,function*(){})}}function tA(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function n7(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return tA(t,r)}catch{r.message=t.message,r.stack=t.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),tA(new i,r)}}var i7=n7;const jf=th(i7);function o7(t){return t[Symbol.asyncIterator]!=null}function dO(t,e=1){return e=Number(e),o7(t)?async function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}():function*(){let r=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length>0;)yield r.slice(0,e),r=r.slice(e)}()}async function*lO(t,e=1){for await(const r of dO(t,e)){const n=r.map(async i=>i().then(a=>({ok:!0,value:a}),a=>({ok:!1,err:a})));for(let i=0;i<n.length;i++){const a=await n[i];if(a.ok)yield a.value;else throw a.err}}}const uO=Symbol.for("@achingbrain/uint8arraylist");function rA(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(const n of t){const i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function pm(t){return!!t?.[uO]}class Ul{bufs;length;[uO]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(const n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(pm(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(const n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(pm(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){const r=rA(this.bufs,e);return r.buf[r.index]}set(e,r){const n=rA(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(pm(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){const{bufs:n,length:i}=this._subList(e,r);return N1(n,i)}subarray(e,r){const{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:N1(n,i)}sublist(e,r){const{bufs:n,length:i}=this._subList(e,r),a=new Ul;return a.length=i,a.bufs=[...n],a}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:this.bufs,length:this.length};const n=[];let i=0;for(let a=0;a<this.bufs.length;a++){const o=this.bufs[a],s=i,d=s+o.byteLength;if(i=d,e>=d)continue;const l=e>=s&&e<d,c=r>s&&r<=d;if(l&&c){if(e===s&&r===d){n.push(o);break}const u=e-s;n.push(o.subarray(u,u+(r-e)));break}if(l){if(e===0){n.push(o);continue}n.push(o.subarray(e-s));continue}if(c){if(r===d){n.push(o);break}n.push(o.subarray(0,r-s));break}n.push(o)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!pm(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;const i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");const a=256,o=new Int32Array(a);for(let u=0;u<a;u++)o[u]=-1;for(let u=0;u<i;u++)o[n[u]]=u;const s=o,d=this.byteLength-n.byteLength,l=n.byteLength-1;let c;for(let u=r;u<=d;u+=c){c=0;for(let h=l;h>=0;h--){const y=this.get(u+h);if(n[h]!==y){c=Math.max(1,h-s[y]);break}}if(c===0)return u}return-1}getInt8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){const n=Ql(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){const i=xc(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){const i=xc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){const i=xc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){const r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){const n=Ql(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){const i=xc(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){const i=xc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){const i=xc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){const i=xc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){const i=xc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof Ul)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!wD(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){const n=new Ul;return n.bufs=e,r==null&&(r=e.reduce((i,a)=>i+a.byteLength,0)),n.length=r,n}}const s7=262144,a7=(t={})=>{const e=t.chunkSize??s7;return async function*(n){let i=new Ul,a=0,o=!1;for await(const s of n)for(i.append(s),a+=s.length;a>=e;)if(yield i.slice(0,e),o=!0,e===i.length)i=new Ul,a=0;else{const d=new Ul;d.append(i.sublist(e)),i=d,a-=e}(!o||a>0)&&(yield i.subarray(0,a))}},c7=new TextDecoder;function eE(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function Jg(t,e){let r;[r,e]=eE(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function fO(t,e){let r;return[r,e]=eE(t,e),[r&7,r>>3,e]}function d7(t){const e={},r=t.length;let n=0;for(;n<r;){let i,a;if([i,a,n]=fO(t,n),a===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Jg(t,n)}else if(a===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=Jg(t,n),e.Name=c7.decode(o)}else if(a===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=eE(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${a}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function l7(t){const e=t.length;let r=0,n,i=!1,a;for(;r<e;){let s,d;if([s,d,r]=fO(t,r),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(d===1){if(a)throw new Error("protobuf: (PBNode) duplicate Data section");[a,r]=Jg(t,r),n&&(i=!0)}else if(d===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,r]=Jg(t,r),n.push(d7(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${d}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return a&&(o.Data=a),o.Links=n||[],o}const hO=new TextEncoder,nA=2**32,u7=2**31;function f7(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=xp(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=hO.encode(t.Name);r-=n.length,e.set(n,r),r=xp(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=xp(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function h7(t){const e=y7(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=xp(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const a=f7(t.Links[i],r.subarray(0,n));n-=a,n=xp(r,n,a)-1,r[n]=18}return r}function p7(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+ff(r)}if(typeof t.Name=="string"){const r=hO.encode(t.Name).length;e+=1+r+ff(r)}return typeof t.Tsize=="number"&&(e+=1+ff(t.Tsize)),e}function y7(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+ff(r)}if(t.Links)for(const r of t.Links){const n=p7(r);e+=1+n+ff(n)}return e}function xp(t,e,r){e-=ff(r);const n=e;for(;r>=u7;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function ff(t){return t%2===0&&t++,Math.floor((m7(t)+6)/7)}function m7(t){let e=0;return t>=nA&&(t=Math.floor(t/nA),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+g7[t]}const g7=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],w7=["Data","Links"],b7=["Hash","Name","Tsize"],V1=new TextEncoder;function pO(t,e){if(t===e)return 0;const r=t.Name?V1.encode(t.Name):[],n=e.Name?V1.encode(e.Name):[];let i=r.length,a=n.length;for(let o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0}function iA(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function yO(t){if(typeof t.asCID=="object"){const r=op.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=op.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=op.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=op.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function Pd(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=V1.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(yO),e.Links.sort(pO);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function mO(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!iA(t,w7))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!iA(r,b7))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&pO(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function v7(t,e=[]){return Pd({Data:t,Links:e})}function _7(t,e,r){return yO({Hash:r,Name:t,Tsize:e})}function E7(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const S7="dag-pb",$7=112;function xd(t){mO(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),h7(e)}function T7(t){const e=E7(t),r=l7(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const a={};try{a.Hash=op.decode(i.Hash)}catch{}if(!a.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(a.Name=i.Name),i.Tsize!==void 0&&(a.Tsize=i.Tsize),a})),n}const gO=Object.freeze(Object.defineProperty({__proto__:null,code:$7,createLink:_7,createNode:v7,decode:T7,encode:xd,name:S7,prepare:Pd,validate:mO},Symbol.toStringTag,{value:"Module"})),A7=Math.pow(2,7),P7=Math.pow(2,14),x7=Math.pow(2,21),wO=Math.pow(2,28),bO=Math.pow(2,35),vO=Math.pow(2,42),_O=Math.pow(2,49),Pi=128,Rc=127;function tE(t){if(t<A7)return 1;if(t<P7)return 2;if(t<x7)return 3;if(t<wO)return 4;if(t<bO)return 5;if(t<vO)return 6;if(t<_O)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function I7(t,e,r=0){switch(tE(t)){case 8:e[r++]=t&255|Pi,t/=128;case 7:e[r++]=t&255|Pi,t/=128;case 6:e[r++]=t&255|Pi,t/=128;case 5:e[r++]=t&255|Pi,t/=128;case 4:e[r++]=t&255|Pi,t>>>=7;case 3:e[r++]=t&255|Pi,t>>>=7;case 2:e[r++]=t&255|Pi,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function k7(t,e){let r=t[e],n=0;if(n+=r&Rc,r<Pi||(r=t[e+1],n+=(r&Rc)<<7,r<Pi)||(r=t[e+2],n+=(r&Rc)<<14,r<Pi)||(r=t[e+3],n+=(r&Rc)<<21,r<Pi)||(r=t[e+4],n+=(r&Rc)*wO,r<Pi)||(r=t[e+5],n+=(r&Rc)*bO,r<Pi)||(r=t[e+6],n+=(r&Rc)*vO,r<Pi)||(r=t[e+7],n+=(r&Rc)*_O,r<Pi))return n;throw new RangeError("Could not decode varint")}const rE=new Float32Array([-0]),ud=new Uint8Array(rE.buffer);function O7(t,e,r){rE[0]=t,e[r]=ud[0],e[r+1]=ud[1],e[r+2]=ud[2],e[r+3]=ud[3]}function R7(t,e){return ud[0]=t[e],ud[1]=t[e+1],ud[2]=t[e+2],ud[3]=t[e+3],rE[0]}const nE=new Float64Array([-0]),hi=new Uint8Array(nE.buffer);function j7(t,e,r){nE[0]=t,e[r]=hi[0],e[r+1]=hi[1],e[r+2]=hi[2],e[r+3]=hi[3],e[r+4]=hi[4],e[r+5]=hi[5],e[r+6]=hi[6],e[r+7]=hi[7]}function C7(t,e){return hi[0]=t[e],hi[1]=t[e+1],hi[2]=t[e+2],hi[3]=t[e+3],hi[4]=t[e+4],hi[5]=t[e+5],hi[6]=t[e+6],hi[7]=t[e+7],nE[0]}const N7=BigInt(Number.MAX_SAFE_INTEGER),B7=BigInt(Number.MIN_SAFE_INTEGER);class yi{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Fl;if(e<N7&&e>B7)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>oA&&(i=0n,++n>oA&&(n=0n))),new yi(Number(i),Number(n))}static fromNumber(e){if(e===0)return Fl;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new yi(n,i)}static from(e){return typeof e=="number"?yi.fromNumber(e):typeof e=="bigint"?yi.fromBigInt(e):typeof e=="string"?yi.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new yi(e.low>>>0,e.high>>>0):Fl}}const Fl=new yi(0,0);Fl.toBigInt=function(){return 0n};Fl.zzEncode=Fl.zzDecode=function(){return this};Fl.length=function(){return 1};const oA=4294967296n;function D7(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function M7(t,e,r){if(r-e<1)return"";let i;const a=[];let o=0,s;for(;e<r;)s=t[e++],s<128?a[o++]=s:s>191&&s<224?a[o++]=(s&31)<<6|t[e++]&63:s>239&&s<365?(s=((s&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,a[o++]=55296+(s>>10),a[o++]=56320+(s&1023)):a[o++]=(s&15)<<12|(t[e++]&63)<<6|t[e++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))}function EO(t,e,r){const n=r;let i,a;for(let o=0;o<t.length;++o)i=t.charCodeAt(o),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((a=t.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(a&1023),++o,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function Zo(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function ym(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class L7{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Zo(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Zo(this,4);return ym(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Zo(this,4);return ym(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Zo(this,4);const e=R7(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Zo(this,4);const e=C7(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Zo(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return M7(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Zo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Zo(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new yi(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Zo(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw Zo(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Zo(this,8);const e=ym(this.buf,this.pos+=4),r=ym(this.buf,this.pos+=4);return new yi(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=k7(this.buf,this.pos);return this.pos+=tE(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function U7(t){return new L7(t instanceof Uint8Array?t:t.subarray())}function iE(t,e,r){const n=U7(t);return e.decode(n,void 0,r)}function F7(t){let n,i=8192;return function(o){if(o<1||o>4096)return Ql(o);i+o>8192&&(n=Ql(8192),i=0);const s=n.subarray(i,i+=o);return i&7&&(i=(i|7)+1),s}}class sp{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}}function Rb(){}class z7{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const q7=F7();function K7(t){return globalThis.Buffer!=null?Ql(t):q7(t)}class H1{len;head;tail;states;constructor(){this.len=0,this.head=new sp(Rb,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new sp(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new H7((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(mm,10,yi.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=yi.fromBigInt(e);return this._push(mm,r.length(),r)}uint64Number(e){return this._push(I7,tE(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=yi.fromBigInt(e).zzEncode();return this._push(mm,r.length(),r)}sint64Number(e){const r=yi.fromNumber(e).zzEncode();return this._push(mm,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(jb,1,e?1:0)}fixed32(e){return this._push(Nh,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=yi.fromBigInt(e);return this._push(Nh,4,r.lo)._push(Nh,4,r.hi)}fixed64Number(e){const r=yi.fromNumber(e);return this._push(Nh,4,r.lo)._push(Nh,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(O7,4,e)}double(e){return this._push(j7,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push(jb,1,0):this.uint32(r)._push(G7,r,e)}string(e){const r=D7(e);return r!==0?this.uint32(r)._push(EO,r,e):this._push(jb,1,0)}fork(){return this.states=new z7(this),this.head=this.tail=new sp(Rb,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sp(Rb,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=K7(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function jb(t,e,r){e[r]=t&255}function V7(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class H7 extends sp{next;constructor(e,r){super(V7,e,r),this.next=void 0}}function mm(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function Nh(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function G7(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(H1.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(W7,e,t),this},H1.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(Y7,e,t),this});function W7(t,e,r){e.set(t,r)}function Y7(t,e,r){t.length<40?EO(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(L2(t),r)}function Z7(){return new H1}function oE(t,e){const r=Z7();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var e0;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(e0||(e0={}));function SO(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function X7(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(a,o){const s=e(a);o.int32(s)},n=function(a){const o=a.int32();return e(o)};return SO("enum",e0.VARINT,r,n)}function sE(t,e){return SO("message",e0.LENGTH_DELIMITED,t,e)}var js;(function(t){(function(n){n.Raw="Raw",n.Directory="Directory",n.File="File",n.Metadata="Metadata",n.Symlink="Symlink",n.HAMTShard="HAMTShard"})(t.DataType||(t.DataType={}));let e;(function(n){n[n.Raw=0]="Raw",n[n.Directory=1]="Directory",n[n.File=2]="File",n[n.Metadata=3]="Metadata",n[n.Symlink=4]="Symlink",n[n.HAMTShard=5]="HAMTShard"})(e||(e={})),function(n){n.codec=()=>X7(e)}(t.DataType||(t.DataType={}));let r;t.codec=()=>(r==null&&(r=sE((n,i,a={})=>{if(a.lengthDelimited!==!1&&i.fork(),n.Type!=null&&(i.uint32(8),t.DataType.codec().encode(n.Type,i)),n.Data!=null&&(i.uint32(18),i.bytes(n.Data)),n.filesize!=null&&(i.uint32(24),i.uint64(n.filesize)),n.blocksizes!=null)for(const o of n.blocksizes)i.uint32(32),i.uint64(o);n.hashType!=null&&(i.uint32(40),i.uint64(n.hashType)),n.fanout!=null&&(i.uint32(48),i.uint64(n.fanout)),n.mode!=null&&(i.uint32(56),i.uint32(n.mode)),n.mtime!=null&&(i.uint32(66),t0.codec().encode(n.mtime,i)),a.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const a={blocksizes:[]},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const s=n.uint32();switch(s>>>3){case 1:a.Type=t.DataType.codec().decode(n);break;case 2:a.Data=n.bytes();break;case 3:a.filesize=n.uint64();break;case 4:a.blocksizes.push(n.uint64());break;case 5:a.hashType=n.uint64();break;case 6:a.fanout=n.uint64();break;case 7:a.mode=n.uint32();break;case 8:a.mtime=t0.codec().decode(n,n.uint32());break;default:n.skipType(s&7);break}}return a})),r),t.encode=n=>oE(n,t.codec()),t.decode=n=>iE(n,t.codec())})(js||(js={}));var t0;(function(t){let e;t.codec=()=>(e==null&&(e=sE((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Seconds!=null&&(n.uint32(8),n.int64(r.Seconds)),r.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(r.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>oE(r,t.codec()),t.decode=r=>iE(r,t.codec())})(t0||(t0={}));var sA;(function(t){let e;t.codec=()=>(e==null&&(e=sE((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.MimeType!=null&&(n.uint32(10),n.string(r.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{const i={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const o=r.uint32();switch(o>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>oE(r,t.codec()),t.decode=r=>iE(r,t.codec())})(sA||(sA={}));const aA={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},Q7=["directory","hamt-sharded-directory"],cA=parseInt("0644",8),dA=parseInt("0755",8);class ic{static unmarshal(e){const r=js.decode(e),n=new ic({type:aA[r.Type!=null?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime!=null?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return n._originalMode=r.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){const{type:r,data:n,blockSizes:i,hashType:a,fanout:o,mtime:s,mode:d}=e;if(r!=null&&!Object.values(aA).includes(r))throw jf(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=n,this.hashType=a,this.fanout=o,this.blockSizes=i??[],this._originalMode=0,this.mode=d,this.mtime=s}set mode(e){e==null?this._mode=this.isDirectory()?dA:cA:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return Q7.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(r=>{e+=r}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=js.DataType.Raw;break;case"directory":e=js.DataType.Directory;break;case"file":e=js.DataType.File;break;case"metadata":e=js.DataType.Metadata;break;case"symlink":e=js.DataType.Symlink;break;case"hamt-sharded-directory":e=js.DataType.HAMTShard;break;default:throw jf(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let r=this.data;(this.data==null||this.data.length===0)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===cA&&!this.isDirectory()&&(n=void 0),n===dA&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),js.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}}const J7="raw",G1=85,eF=t=>uy(t),tF=t=>uy(t),rF=Object.freeze(Object.defineProperty({__proto__:null,code:G1,decode:tF,encode:eF,name:J7},Symbol.toStringTag,{value:"Module"}));class r0 extends Event{type;detail;constructor(e,r){super(e),this.type=e,this.detail=r}}const Cf=async(t,e,r)=>{r.codec==null&&(r.codec=gO);const n=await Td.digest(t),i=Cr.create(r.cidVersion,r.codec.code,n);return await e.put(i,t,r),i};function nF(t){return async function*(r,n){let i=0n;for await(let a of r.content)yield async()=>{let o;const s={codec:gO,cidVersion:t.cidVersion,onProgress:t.onProgress};t.rawLeaves?(s.codec=rF,s.cidVersion=1):(o=new ic({type:t.leafType,data:a}),a=xd({Data:o.marshal(),Links:[]}));const d=await Cf(a,n,s);return i+=BigInt(a.byteLength),t.onProgress?.(new r0("unixfs:importer:progress:file:write",{bytesWritten:i,cid:d,path:r.path})),{cid:d,unixfs:o,size:BigInt(a.length),block:a}}}}const iF=async(t,e,r)=>{const n=new ic({type:"directory",mtime:t.mtime,mode:t.mode}),i=xd(Pd({Data:n.marshal()})),a=await Cf(i,e,r),o=t.path;return{cid:a,path:o,unixfs:n,size:BigInt(i.length),originalPath:t.originalPath,block:i}};async function*oF(t,e,r){let n=-1,i;for await(const a of lO(r.bufferImporter(t,e),r.blockWriteConcurrency)){if(n++,n===0){i={...a,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...a,block:void 0}}i!=null&&(yield i)}function lA(t){return t.single===!0}const sF=(t,e,r)=>async function(i){if(i.length===1&&lA(i[0])&&r.reduceSingleLeafToSelf){const c=i[0];let u=c.block;return lA(c)&&(t.mtime!==void 0||t.mode!==void 0)&&(c.unixfs=new ic({type:"file",mtime:t.mtime,mode:t.mode,data:c.block}),u={Data:c.unixfs.marshal(),Links:[]},c.block=xd(Pd(u)),c.cid=await Cf(c.block,e,{...r,cidVersion:r.cidVersion}),c.size=BigInt(c.block.length)),r.onProgress?.(new r0("unixfs:importer:progress:file:layout",{cid:c.cid,path:c.originalPath})),{cid:c.cid,path:t.path,unixfs:c.unixfs,size:c.size,originalPath:c.originalPath}}const a=new ic({type:"file",mtime:t.mtime,mode:t.mode}),o=i.filter(c=>c.cid.code===G1&&c.size>0||c.unixfs!=null&&c.unixfs.data==null&&c.unixfs.fileSize()>0n?!0:!!c.unixfs?.data?.length).map(c=>c.cid.code===G1?(a.addBlockSize(c.size),{Name:"",Tsize:Number(c.size),Hash:c.cid}):(c.unixfs==null||c.unixfs.data==null?a.addBlockSize(c.unixfs?.fileSize()??0n):a.addBlockSize(BigInt(c.unixfs.data.length)),{Name:"",Tsize:Number(c.size),Hash:c.cid})),s={Data:a.marshal(),Links:o},d=xd(Pd(s)),l=await Cf(d,e,r);return r.onProgress?.(new r0("unixfs:importer:progress:file:layout",{cid:l,path:t.originalPath})),{cid:l,path:t.path,unixfs:a,size:BigInt(d.length+s.Links.reduce((c,u)=>c+(u.Tsize??0),0)),originalPath:t.originalPath,block:d}},aF=async(t,e,r)=>r.layout(oF(t,e,r),sF(t,e,r));function cF(t){return Symbol.iterator in t}function dF(t){return Symbol.asyncIterator in t}function lF(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(cF(t))return async function*(){yield*t}();if(dF(t))return t}catch{throw jf(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw jf(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function uF(t){return async function*(r,n){for await(const i of r){let a;if(i.path!=null&&(a=i.path,i.path=i.path.split("/").filter(o=>o!=null&&o!==".").join("/")),fF(i)){const o={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let s=0n;for await(const d of t.chunker(t.chunkValidator(lF(i.content)))){const l=BigInt(d.byteLength);s+=l,t.onProgress?.(new r0("unixfs:importer:progress:file:read",{bytesRead:s,chunkSize:l,path:i.path})),yield d}}(),originalPath:a};yield async()=>aF(o,n,t)}else if(i.path!=null){const o={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:a};yield async()=>iF(o,n,t)}else throw new Error("Import candidate must have content or path or both")}}}function fF(t){return t.content!=null}function $O(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}const hF=_y({prefix:"9",name:"base10",alphabet:"0123456789"}),pF=Object.freeze(Object.defineProperty({__proto__:null,base10:hF},Symbol.toStringTag,{value:"Module"})),yF=ei({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mF=ei({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),gF=Object.freeze(Object.defineProperty({__proto__:null,base16:yF,base16upper:mF},Symbol.toStringTag,{value:"Module"})),wF=ei({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),bF=Object.freeze(Object.defineProperty({__proto__:null,base2:wF},Symbol.toStringTag,{value:"Module"})),TO=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vF=TO.reduce((t,e,r)=>(t[r]=e,t),[]),_F=TO.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function EF(t){return t.reduce((e,r)=>(e+=vF[r],e),"")}function SF(t){const e=[];for(const r of t){const n=_F[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const $F=rw({prefix:"🚀",name:"base256emoji",encode:EF,decode:SF}),TF=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:$F},Symbol.toStringTag,{value:"Module"})),AF=_y({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PF=_y({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),xF=Object.freeze(Object.defineProperty({__proto__:null,base36:AF,base36upper:PF},Symbol.toStringTag,{value:"Module"})),IF=ei({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),kF=ei({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),W1=ei({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),OF=ei({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),RF=Object.freeze(Object.defineProperty({__proto__:null,base64:IF,base64pad:kF,base64url:W1,base64urlpad:OF},Symbol.toStringTag,{value:"Module"})),jF=ei({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),CF=Object.freeze(Object.defineProperty({__proto__:null,base8:jF},Symbol.toStringTag,{value:"Module"})),NF=rw({prefix:"\0",name:"identity",encode:t=>r9(t),decode:t=>t9(t)}),BF=Object.freeze(Object.defineProperty({__proto__:null,identity:NF},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const DF=({name:t,code:e,encode:r})=>new MF(t,e,r);class MF{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?z1(this.code,r):r.then(n=>z1(this.code,n))}else throw Error("Unknown type, must be binary type")}}const LF=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),uA=DF({name:"sha2-256",code:18,encode:LF("SHA-256")}),fA={...BF,...bF,...CF,...pF,...gF,...g9,...xF,...b9,...RF,...TF};function UF(t=0){return globalThis.Buffer?.allocUnsafe!=null?$O(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function AO(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const hA=AO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Cb=AO("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=UF(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),FF={utf8:hA,"utf-8":hA,hex:fA.base16,latin1:Cb,ascii:Cb,binary:Cb,...fA};function zF(t,e="utf8"){const r=FF[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$O(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const qF=()=>async function*(e){for await(const r of e){if(r.length===void 0)throw jf(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof r=="string"||r instanceof String)yield zF(r.toString());else if(Array.isArray(r))yield Uint8Array.from(r);else if(r instanceof Uint8Array)yield r;else throw jf(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}},KF=174;function VF(t){const e=KF;return async function r(n,i){const a=[];for await(const o of dO(n,e))a.push(await i(o));return a.length>1?r(a,i):a[0]}}class Yp{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,r){this.options=r??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}}const Y1=Cr.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),Z1=Cr.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class aE extends Yp{_children;constructor(e,r){super(e,r),this._children=new Map}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,r)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(const[e,r]of this._children.entries())yield{key:e,child:r}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(const[e,r]of this._children.entries())r.size!=null&&r.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?Z1.bytes.byteLength:Y1.bytes.byteLength));return this.nodeSize}async*flush(e){const r=[];for(const[d,l]of this._children.entries()){let c=l;if(l instanceof Yp)for await(const u of l.flush(e))c=u,yield u;c.size!=null&&c.cid!=null&&r.push({Name:d,Tsize:Number(c.size),Hash:c.cid})}const n=new ic({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},a=xd(Pd(i)),o=await Cf(a,e,this.options),s=a.length+i.Links.reduce((d,l)=>d+(l.Tsize==null?0:l.Tsize),0);this.cid=o,this.size=s,yield{cid:o,unixfs:n,path:this.path,size:BigInt(s)}}}var X1={exports:{}};(function(t,e){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function a(f){if(!Array.isArray(f)&&!ArrayBuffer.isView(f))return!1;for(var g=0;g<f.length;g++)if(!Number.isInteger(f[g])||f[g]<0||f[g]>255)return!1;return!0}function o(f,g){return(f&65535)*g+(((f>>>16)*g&65535)<<16)}function s(f,g){return f<<g|f>>>32-g}function d(f){return f^=f>>>16,f=o(f,2246822507),f^=f>>>13,f=o(f,3266489909),f^=f>>>16,f}function l(f,g){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=f[3]+g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=f[2]+g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=f[1]+g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=f[0]+g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function c(f,g){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var v=[0,0,0,0];return v[3]+=f[3]*g[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=f[2]*g[3],v[1]+=v[2]>>>16,v[2]&=65535,v[2]+=f[3]*g[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=f[1]*g[3],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=f[2]*g[2],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=f[3]*g[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=f[0]*g[3]+f[1]*g[2]+f[2]*g[1]+f[3]*g[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function u(f,g){return g%=64,g===32?[f[1],f[0]]:g<32?[f[0]<<g|f[1]>>>32-g,f[1]<<g|f[0]>>>32-g]:(g-=32,[f[1]<<g|f[0]>>>32-g,f[0]<<g|f[1]>>>32-g])}function h(f,g){return g%=64,g===0?f:g<32?[f[0]<<g|f[1]>>>32-g,f[1]<<g]:[f[1]<<g-32,0]}function y(f,g){return[f[0]^g[0],f[1]^g[1]]}function p(f){return f=y(f,[0,f[0]>>>1]),f=c(f,[4283543511,3981806797]),f=y(f,[0,f[0]>>>1]),f=c(f,[3301882366,444984403]),f=y(f,[0,f[0]>>>1]),f}i.x86.hash32=function(f,g){if(i.inputValidation&&!a(f))return n;g=g||0;for(var v=f.length%4,b=f.length-v,m=g,w=0,S=3432918353,T=461845907,x=0;x<b;x=x+4)w=f[x]|f[x+1]<<8|f[x+2]<<16|f[x+3]<<24,w=o(w,S),w=s(w,15),w=o(w,T),m^=w,m=s(m,13),m=o(m,5)+3864292196;switch(w=0,v){case 3:w^=f[x+2]<<16;case 2:w^=f[x+1]<<8;case 1:w^=f[x],w=o(w,S),w=s(w,15),w=o(w,T),m^=w}return m^=f.length,m=d(m),m>>>0},i.x86.hash128=function(f,g){if(i.inputValidation&&!a(f))return n;g=g||0;for(var v=f.length%16,b=f.length-v,m=g,w=g,S=g,T=g,x=0,I=0,M=0,H=0,re=597399067,J=2869860233,z=951274213,oe=2716044179,C=0;C<b;C=C+16)x=f[C]|f[C+1]<<8|f[C+2]<<16|f[C+3]<<24,I=f[C+4]|f[C+5]<<8|f[C+6]<<16|f[C+7]<<24,M=f[C+8]|f[C+9]<<8|f[C+10]<<16|f[C+11]<<24,H=f[C+12]|f[C+13]<<8|f[C+14]<<16|f[C+15]<<24,x=o(x,re),x=s(x,15),x=o(x,J),m^=x,m=s(m,19),m+=w,m=o(m,5)+1444728091,I=o(I,J),I=s(I,16),I=o(I,z),w^=I,w=s(w,17),w+=S,w=o(w,5)+197830471,M=o(M,z),M=s(M,17),M=o(M,oe),S^=M,S=s(S,15),S+=T,S=o(S,5)+2530024501,H=o(H,oe),H=s(H,18),H=o(H,re),T^=H,T=s(T,13),T+=m,T=o(T,5)+850148119;switch(x=0,I=0,M=0,H=0,v){case 15:H^=f[C+14]<<16;case 14:H^=f[C+13]<<8;case 13:H^=f[C+12],H=o(H,oe),H=s(H,18),H=o(H,re),T^=H;case 12:M^=f[C+11]<<24;case 11:M^=f[C+10]<<16;case 10:M^=f[C+9]<<8;case 9:M^=f[C+8],M=o(M,z),M=s(M,17),M=o(M,oe),S^=M;case 8:I^=f[C+7]<<24;case 7:I^=f[C+6]<<16;case 6:I^=f[C+5]<<8;case 5:I^=f[C+4],I=o(I,J),I=s(I,16),I=o(I,z),w^=I;case 4:x^=f[C+3]<<24;case 3:x^=f[C+2]<<16;case 2:x^=f[C+1]<<8;case 1:x^=f[C],x=o(x,re),x=s(x,15),x=o(x,J),m^=x}return m^=f.length,w^=f.length,S^=f.length,T^=f.length,m+=w,m+=S,m+=T,w+=m,S+=m,T+=m,m=d(m),w=d(w),S=d(S),T=d(T),m+=w,m+=S,m+=T,w+=m,S+=m,T+=m,("00000000"+(m>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(S>>>0).toString(16)).slice(-8)+("00000000"+(T>>>0).toString(16)).slice(-8)},i.x64.hash128=function(f,g){if(i.inputValidation&&!a(f))return n;g=g||0;for(var v=f.length%16,b=f.length-v,m=[0,g],w=[0,g],S=[0,0],T=[0,0],x=[2277735313,289559509],I=[1291169091,658871167],M=0;M<b;M=M+16)S=[f[M+4]|f[M+5]<<8|f[M+6]<<16|f[M+7]<<24,f[M]|f[M+1]<<8|f[M+2]<<16|f[M+3]<<24],T=[f[M+12]|f[M+13]<<8|f[M+14]<<16|f[M+15]<<24,f[M+8]|f[M+9]<<8|f[M+10]<<16|f[M+11]<<24],S=c(S,x),S=u(S,31),S=c(S,I),m=y(m,S),m=u(m,27),m=l(m,w),m=l(c(m,[0,5]),[0,1390208809]),T=c(T,I),T=u(T,33),T=c(T,x),w=y(w,T),w=u(w,31),w=l(w,m),w=l(c(w,[0,5]),[0,944331445]);switch(S=[0,0],T=[0,0],v){case 15:T=y(T,h([0,f[M+14]],48));case 14:T=y(T,h([0,f[M+13]],40));case 13:T=y(T,h([0,f[M+12]],32));case 12:T=y(T,h([0,f[M+11]],24));case 11:T=y(T,h([0,f[M+10]],16));case 10:T=y(T,h([0,f[M+9]],8));case 9:T=y(T,[0,f[M+8]]),T=c(T,I),T=u(T,33),T=c(T,x),w=y(w,T);case 8:S=y(S,h([0,f[M+7]],56));case 7:S=y(S,h([0,f[M+6]],48));case 6:S=y(S,h([0,f[M+5]],40));case 5:S=y(S,h([0,f[M+4]],32));case 4:S=y(S,h([0,f[M+3]],24));case 3:S=y(S,h([0,f[M+2]],16));case 2:S=y(S,h([0,f[M+1]],8));case 1:S=y(S,[0,f[M]]),S=c(S,x),S=u(S,31),S=c(S,I),m=y(m,S)}return m=y(m,[0,f.length]),w=y(w,[0,f.length]),m=l(m,w),w=l(w,m),m=p(m),w=p(w),m=l(m,w),w=l(w,m),("00000000"+(m[0]>>>0).toString(16)).slice(-8)+("00000000"+(m[1]>>>0).toString(16)).slice(-8)+("00000000"+(w[0]>>>0).toString(16)).slice(-8)+("00000000"+(w[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()})(X1,X1.exports);var HF=X1.exports,GF=HF;const WF=th(GF),YF=CM({name:"murmur3-128",code:34,encode:t=>vD(WF.x64.hash128(t))}),gm=7;var ZF=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let n=this._internalPositionFor(e,!1);if(r===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,r,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,n=new Array(this.length);for(;r<this.length;)n[r]=e(this.get(r),r,this),r++;return n}reduce(e,r){let n=0,i=r;for(;n<this.length;){const a=this.get(n);i=e(i,a,n),n++}return i}find(e){let r=0,n,i;for(;r<this.length&&!n;)i=this.get(r),n=e(i),r++;return n?i:void 0}_internalPositionFor(e,r){const n=this._bytePosFor(e,r);if(n>=this._bitArrays.length)return-1;const i=this._bitArrays[n],a=e-n*gm;if(!((i&1<<a)>0))return-1;const s=this._bitArrays.slice(0,n).reduce(XF,0),d=~(4294967295<<a+1),l=PO(i&d);return s+l-1}_bytePosFor(e,r){const n=Math.floor(e/gm),i=n+1;for(;!r&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){const r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*gm}_unsetBit(e){const r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*gm)}_setInternalPos(e,r,n,i){const a=this._data,o=[r,n];if(i)this._sortData(),a[e]=o;else{if(a.length)if(a[a.length-1][0]>=r)a.push(o);else if(a[0][0]<=r)a.unshift(o);else{const s=Math.round(a.length/2);this._data=a.slice(0,s).concat(o).concat(a.slice(s))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(QF),this._changedData=!1}bitField(){const e=[];let r=8,n=0,i=0,a;const o=this._bitArrays.slice();for(;o.length||n;){n===0&&(a=o.shift(),n=7);const d=Math.min(n,r),l=~(255<<d),c=a&l;i|=c<<8-r,a=a>>>d,n-=d,r-=d,(!r||!n&&!o.length)&&(e.push(i),i=0,r=8)}for(var s=e.length-1;s>0&&e[s]===0;s--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(JF)}};function XF(t,e){return t+PO(e)}function PO(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function QF(t,e){return t[0]-e[0]}function JF(t){return t[1]}const ez=th(ZF);class Do{_options;_popCount;_parent;_posAtParent;_children;key;constructor(e,r,n=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=n,this._children=new ez,this.key=null}async put(e,r){const n=await this._findNewBucketAndPos(e);n.bucket._putAt(n,e,r)}async get(e){const r=await this._findChild(e);if(r!=null)return r.value}async del(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);n!=null&&n.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,n)=>n instanceof Do?r+n.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const r of e)r instanceof Do?yield*r.eachLeafSeries():yield r}serialize(e,r){const n=[];return r(this._children.reduce((i,a,o)=>(a!=null&&(a instanceof Do?i.push(a.serialize(e,r)):i.push(e(a,o))),i),n))}async asyncTransform(e,r){return xO(this,e,r)}toJSON(){return this.serialize(rz,nz)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const r=await this._findPlace(e),n=r.bucket._at(r.pos);if(!(n instanceof Do)&&n!=null&&n.key===e)return n}async _findPlace(e){const r=this._options.hash(typeof e=="string"?L2(e):e),n=await r.take(this._options.bits),i=this._children.get(n);return i instanceof Do?i._findPlace(r):{bucket:this,pos:n,hash:r,existingChild:i}}async _findNewBucketAndPos(e){const r=await this._findPlace(e);if(r.existingChild!=null&&r.existingChild.key!==e){const n=new Do(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,n);const i=await n._findPlace(r.existingChild.hash);return i.bucket._putAt(i,r.existingChild.key,r.existingChild.value),n._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,n){this._putObjectAt(e.pos,{key:r,value:n,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)==null&&this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(tz);if(e!=null&&!(e instanceof Do)){const r=e.hash;r.untake(this._options.bits);const n={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function tz(t){return!!t}function rz(t,e){return t.key}function nz(t){return t}async function xO(t,e,r){const n=[];for(const i of t._children.compactArray())if(i instanceof Do)await xO(i,e,r);else{const a=await e(i);n.push({bitField:t._children.bitField(),children:a})}return r(n)}const iz=[255,254,252,248,240,224,192,128],oz=[1,3,7,15,31,63,127,255];class sz{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,n=0;for(;r>0&&this._haveBits();){const i=this._value[this._currentBytePos],a=this._currentBitPos+1,o=Math.min(a,r),s=az(i,a-o,o);n=(n<<o)+s,r-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function az(t,e,r){const n=cz(e,r);return(t&n)>>>e}function cz(t,e){return iz[t]&oz[Math.min(e+t-1,7)]}function dz(t){function e(r){return r instanceof pA?r:new pA(r,t)}return e}class pA{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let n=0;for(;r>0;){const i=this._buffers[this._currentBufferIndex],a=Math.min(i.availableBits(),r),o=i.take(a);n=(n<<a)+o,r-=a,this._availableBits-=a,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let r=e;for(;r>0;){const n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),r);n.untake(i),r-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?N1([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),n=new sz(r);this._buffers.push(n),this._availableBits+=n.availableBits()}}function lz(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");const e={bits:t.bits??8,hash:dz(t.hashFn)};return new Do(e)}async function uz(t){return(await YF.encode(t)).slice(0,8).reverse()}const IO=BigInt(34);class fz extends Yp{_bucket;constructor(e,r){super(e,r),this._bucket=lz({hashFn:uz,bits:8})}async put(e,r){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,r)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=OO(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(const r of kO(this._bucket,e,this,this.options))yield{...r,path:this.path}}}async function*kO(t,e,r,n){const i=t._children,a=[];let o=0n;for(let y=0;y<i.length;y++){const p=i.get(y);if(p==null)continue;const f=y.toString(16).toUpperCase().padStart(2,"0");if(p instanceof Do){let g;for await(const v of kO(p,e,null,n))g=v;if(g==null)throw new Error("Could not flush sharded directory, no subshard found");a.push({Name:f,Tsize:Number(g.size),Hash:g.cid}),o+=g.size}else if(hz(p.value)){const g=p.value;let v;for await(const m of g.flush(e))v=m,yield v;if(v==null)throw new Error("Did not flush dir");const b=f+p.key;a.push({Name:b,Tsize:Number(v.size),Hash:v.cid}),o+=v.size}else{const g=p.value;if(g.cid==null)continue;const v=f+p.key,b=g.size;a.push({Name:v,Tsize:Number(b),Hash:g.cid}),o+=BigInt(b??0)}}const s=Uint8Array.from(i.bitField().reverse()),d=new ic({type:"hamt-sharded-directory",data:s,fanout:BigInt(t.tableSize()),hashType:IO,mtime:r?.mtime,mode:r?.mode}),l={Data:d.marshal(),Links:a},c=xd(Pd(l)),u=await Cf(c,e,n),h=BigInt(c.byteLength)+o;yield{cid:u,unixfs:d,size:h}}function hz(t){return typeof t.flush=="function"}function OO(t,e,r){const n=t._children,i=[];for(let d=0;d<n.length;d++){const l=n.get(d);if(l==null)continue;const c=d.toString(16).toUpperCase().padStart(2,"0");if(l instanceof Do){const u=OO(l,null,r);i.push({Name:c,Tsize:Number(u),Hash:r.cidVersion===0?Y1:Z1})}else if(typeof l.value.flush=="function"){const h=l.value.nodeSize();i.push({Name:c+l.key,Tsize:Number(h),Hash:r.cidVersion===0?Y1:Z1})}else{const u=l.value;if(u.cid==null)continue;const h=c+l.key,y=u.size;i.push({Name:h,Tsize:Number(y),Hash:u.cid})}}const a=Uint8Array.from(n.bitField().reverse()),o=new ic({type:"hamt-sharded-directory",data:a,fanout:BigInt(t.tableSize()),hashType:IO,mtime:e?.mtime,mode:e?.mode});return xd(Pd({Data:o.marshal(),Links:i})).length}async function RO(t,e,r,n){let i=e;e instanceof aE&&e.estimateNodeSize()>r&&(i=await pz(e,n));const a=i.parent;if(a!=null){if(i!==e){if(t!=null&&(t.parent=i),i.parentKey==null)throw new Error("No parent key found");await a.put(i.parentKey,i)}return RO(i,a,r,n)}return i}async function pz(t,e){const r=new fz({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:n,child:i}of t.eachChildSeries())await r.put(n,i);return r}const yz=(t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)??[]).filter(Boolean);async function mz(t,e,r){const n=yz(t.path??""),i=n.length-1;let a=e,o="";for(let s=0;s<n.length;s++){const d=n[s];o+=`${o!==""?"/":""}${d}`;const l=s===i;if(a.dirty=!0,a.cid=void 0,a.size=void 0,l)await a.put(d,t),e=await RO(null,a,r.shardSplitThresholdBytes,r);else{let c=await a.get(d);(c==null||!(c instanceof Yp))&&(c=new aE({root:!1,dir:!0,parent:a,parentKey:d,path:o,dirty:!0,flat:!0,mtime:c?.unixfs?.mtime,mode:c?.unixfs?.mode},r)),await a.put(d,c),a=c}}return e}async function*yA(t,e){if(!(t instanceof Yp)){t.unixfs?.isDirectory()===!0&&(yield t);return}yield*t.flush(e)}function gz(t){return async function*(r,n){let i=new aE({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t),a,o=!1;for await(const s of r){if(s==null)continue;const d=`${s.originalPath??""}`.split("/")[0];d!=null&&d!==""&&(a==null?(a=d,o=!0):a!==d&&(o=!1)),i=await mz(s,i,t),(s.unixfs==null||!s.unixfs.isDirectory())&&(yield s)}if(t.wrapWithDirectory||o&&i.childCount()>1)yield*yA(i,n);else for await(const s of i.eachChildSeries())s!=null&&(yield*yA(s.child,n))}}async function*mA(t,e,r={}){let n;Symbol.asyncIterator in t||Symbol.iterator in t?n=t:n=[t];const i=r.wrapWithDirectory??!1,a=r.shardSplitThresholdBytes??262144,o=r.cidVersion??1,s=r.rawLeaves??!0,d=r.leafType??"file",l=r.fileImportConcurrency??50,c=r.blockWriteConcurrency??10,u=r.reduceSingleLeafToSelf??!0,h=r.chunker??a7(),y=r.chunkValidator??qF(),p=r.dagBuilder??uF({chunker:h,chunkValidator:y,wrapWithDirectory:i,layout:r.layout??VF(),bufferImporter:r.bufferImporter??nF({cidVersion:o,rawLeaves:s,leafType:d,onProgress:r.onProgress}),blockWriteConcurrency:c,reduceSingleLeafToSelf:u,cidVersion:o,onProgress:r.onProgress}),f=r.treeBuilder??gz({wrapWithDirectory:i,shardSplitThresholdBytes:a,cidVersion:o,onProgress:r.onProgress});for await(const g of f(lO(p(n,e),l),e))yield{cid:g.cid,path:g.path,unixfs:g.unixfs,size:g.size}}var Nb=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},gA=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,d){o=t[a](o),i(s,d,o.done,o.value)})}}function i(a,o,s,d){Promise.resolve(d).then(function(l){a({value:l,done:s})},o)}};const wA={[Td.code]:Td},bA={[J2]:X9};class io{static computeCid(e,r=J2,n=Td.code){return Nb(this,void 0,void 0,function*(){const i=bA[r];if(!i)throw new Pe(Te.ComputeCidCodecNotSupported,`codec [${r}] not supported`);const a=wA[n];if(!a)throw new Pe(Te.ComputeCidMultihashNotSupported,`multihash code [${n}] not supported`);const o=i.encode(e),s=yield a.digest(o);return(yield Cr.createV1(i.code,s)).toString()})}static parseCid(e){const r=Cr.parse(e).toV1();if(!bA[r.code])throw new Pe(Te.ParseCidCodecNotSupported,`codec [${r.code}] not supported`);if(!wA[r.multihash.code])throw new Pe(Te.ParseCidMultihashNotSupported,`multihash code [${r.multihash.code}] not supported`);return r}static computeDagPbCidFromBytes(e){var r,n,i,a;return Nb(this,void 0,void 0,function*(){const o=mA([{content:e}],new eA,{cidVersion:1});let s;try{for(var d=!0,l=gA(o),c;c=yield l.next(),r=c.done,!r;d=!0)a=c.value,d=!1,s=a}catch(u){n={error:u}}finally{try{!d&&!r&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return s?s.cid.toString():""})}static computeDagPbCidFromStream(e){var r,n,i,a;return Nb(this,void 0,void 0,function*(){const o=mA([{content:e}],new eA,{cidVersion:1});let s;try{for(var d=!0,l=gA(o),c;c=yield l.next(),r=c.done,!r;d=!0)a=c.value,d=!1,s=a}catch(u){n={error:u}}finally{try{!d&&!r&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return s?s.cid.toString():""})}}const wz={},bz=Object.freeze(Object.defineProperty({__proto__:null,default:wz},Symbol.toStringTag,{value:"Module"}));var rf={},bs={};(function(t){/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.setBigUint64=t.Hash=t.equalBytes=t.ensureBytes=t.checkOpts=t.concatBytes=t.toBytes=t.bytesToUtf8=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0;const e=S=>S instanceof Uint8Array,r=S=>new Uint8Array(S.buffer,S.byteOffset,S.byteLength);t.u8=r;const n=S=>new Uint16Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/2));t.u16=n;const i=S=>new Uint32Array(S.buffer,S.byteOffset,Math.floor(S.byteLength/4));t.u32=i;const a=S=>new DataView(S.buffer,S.byteOffset,S.byteLength);if(t.createView=a,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},(S,T)=>T.toString(16).padStart(2,"0"));function s(S){if(!e(S))throw new Error("Uint8Array expected");let T="";for(let x=0;x<S.length;x++)T+=o[S[x]];return T}t.bytesToHex=s;function d(S){if(typeof S!="string")throw new Error("hex string expected, got "+typeof S);const T=S.length;if(T%2)throw new Error("padded hex string expected, got unpadded hex of length "+T);const x=new Uint8Array(T/2);for(let I=0;I<x.length;I++){const M=I*2,H=S.slice(M,M+2),re=Number.parseInt(H,16);if(Number.isNaN(re)||re<0)throw new Error("Invalid byte sequence");x[I]=re}return x}t.hexToBytes=d;const l=async()=>{};t.nextTick=l;async function c(S,T,x){let I=Date.now();for(let M=0;M<S;M++){x(M);const H=Date.now()-I;H>=0&&H<T||(await(0,t.nextTick)(),I+=H)}}t.asyncLoop=c;function u(S){if(typeof S!="string")throw new Error(`utf8ToBytes expected string, got ${typeof S}`);return new Uint8Array(new TextEncoder().encode(S))}t.utf8ToBytes=u;function h(S){return new TextDecoder().decode(S)}t.bytesToUtf8=h;function y(S){if(typeof S=="string"&&(S=u(S)),!e(S))throw new Error(`expected Uint8Array, got ${typeof S}`);return S}t.toBytes=y;function p(...S){const T=new Uint8Array(S.reduce((I,M)=>I+M.length,0));let x=0;return S.forEach(I=>{if(!e(I))throw new Error("Uint8Array expected");T.set(I,x),x+=I.length}),T}t.concatBytes=p;const f=S=>Object.prototype.toString.call(S)==="[object Object]"&&S.constructor===Object;function g(S,T){if(T!==void 0&&(typeof T!="object"||!f(T)))throw new Error("options must be object or undefined");return Object.assign(S,T)}t.checkOpts=g;function v(S,T){if(!(S instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof T=="number"&&S.length!==T)throw new Error(`Uint8Array length ${T} expected`)}t.ensureBytes=v;function b(S,T){if(S.length!==T.length)throw new Error("equalBytes: Different size of Uint8Arrays");let x=!0;for(let I=0;I<S.length;I++)x&&(x=S[I]===T[I]);return x}t.equalBytes=b;class m{}t.Hash=m;function w(S,T,x,I){if(typeof S.setBigUint64=="function")return S.setBigUint64(T,x,I);const M=BigInt(32),H=BigInt(4294967295),re=Number(x>>M&H),J=Number(x&H),z=I?4:0,oe=I?0:4;S.setUint32(T+z,re,I),S.setUint32(T+oe,J,I)}t.setBigUint64=w})(bs);var Jl={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.AEAD_TAG_LENGTH=an.XCHACHA20_NONCE_LENGTH=an.CURVE25519_PUBLIC_KEY_SIZE=an.ETH_PUBLIC_KEY_SIZE=an.UNCOMPRESSED_PUBLIC_KEY_SIZE=an.COMPRESSED_PUBLIC_KEY_SIZE=an.SECRET_KEY_LENGTH=void 0;an.SECRET_KEY_LENGTH=32;an.COMPRESSED_PUBLIC_KEY_SIZE=33;an.UNCOMPRESSED_PUBLIC_KEY_SIZE=65;an.ETH_PUBLIC_KEY_SIZE=64;an.CURVE25519_PUBLIC_KEY_SIZE=32;an.XCHACHA20_NONCE_LENGTH=24;an.AEAD_TAG_LENGTH=16;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=an,r=function(){function l(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}return l}();t.ECIES_CONFIG=new r;var n=function(){return t.ECIES_CONFIG.ellipticCurve};t.ellipticCurve=n;var i=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed};t.isEphemeralKeyCompressed=i;var a=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed};t.isHkdfKeyCompressed=a;var o=function(){return t.ECIES_CONFIG.symmetricAlgorithm};t.symmetricAlgorithm=o;var s=function(){return t.ECIES_CONFIG.symmetricNonceLength};t.symmetricNonceLength=s;var d=function(){var l={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in l)return l[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")};t.ephemeralKeySize=d})(Jl);var Q1={},nw={},iw={},pi={},eu={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});ow.crypto=void 0;ow.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;Object.defineProperty(eu,"__esModule",{value:!0});eu.getWebcryptoSubtle=eu.randomBytes=void 0;const kl=ow;function vz(t=32){if(kl.crypto&&typeof kl.crypto.getRandomValues=="function")return kl.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}eu.randomBytes=vz;function _z(){if(kl.crypto&&typeof kl.crypto.subtle=="object"&&kl.crypto.subtle!=null)return kl.crypto.subtle;throw new Error("crypto.subtle must be defined")}eu.getWebcryptoSubtle=_z;var jO={},zo={},Za={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.output=tn.exists=tn.hash=tn.bytes=tn.bool=tn.number=tn.isBytes=void 0;function n0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}tn.number=n0;function CO(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}tn.bool=CO;function NO(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}tn.isBytes=NO;function cE(t,...e){if(!NO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}tn.bytes=cE;function BO(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");n0(t.outputLen),n0(t.blockLen)}tn.hash=BO;function DO(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}tn.exists=DO;function MO(t,e){cE(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}tn.output=MO;const Ez={number:n0,bool:CO,bytes:cE,hash:BO,exists:DO,output:MO};tn.default=Ez;var ah={},sw={};Object.defineProperty(sw,"__esModule",{value:!0});sw.crypto=void 0;sw.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;const e=sw,r=tn;function n(J){return J instanceof Uint8Array||J!=null&&typeof J=="object"&&J.constructor.name==="Uint8Array"}t.isBytes=n;const i=J=>new Uint8Array(J.buffer,J.byteOffset,J.byteLength);t.u8=i;const a=J=>new Uint32Array(J.buffer,J.byteOffset,Math.floor(J.byteLength/4));t.u32=a;const o=J=>new DataView(J.buffer,J.byteOffset,J.byteLength);t.createView=o;const s=(J,z)=>J<<32-z|J>>>z;t.rotr=s;const d=(J,z)=>J<<z|J>>>32-z>>>0;t.rotl=d,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const l=J=>J<<24&4278190080|J<<8&16711680|J>>>8&65280|J>>>24&255;t.byteSwap=l,t.byteSwapIfBE=t.isLE?J=>J:J=>(0,t.byteSwap)(J);function c(J){for(let z=0;z<J.length;z++)J[z]=(0,t.byteSwap)(J[z])}t.byteSwap32=c;const u=Array.from({length:256},(J,z)=>z.toString(16).padStart(2,"0"));function h(J){(0,r.bytes)(J);let z="";for(let oe=0;oe<J.length;oe++)z+=u[J[oe]];return z}t.bytesToHex=h;const y={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p(J){if(J>=y._0&&J<=y._9)return J-y._0;if(J>=y._A&&J<=y._F)return J-(y._A-10);if(J>=y._a&&J<=y._f)return J-(y._a-10)}function f(J){if(typeof J!="string")throw new Error("hex string expected, got "+typeof J);const z=J.length,oe=z/2;if(z%2)throw new Error("padded hex string expected, got unpadded hex of length "+z);const C=new Uint8Array(oe);for(let V=0,q=0;V<oe;V++,q+=2){const Q=p(J.charCodeAt(q)),R=p(J.charCodeAt(q+1));if(Q===void 0||R===void 0){const B=J[q]+J[q+1];throw new Error('hex string expected, got non-hex character "'+B+'" at index '+q)}C[V]=Q*16+R}return C}t.hexToBytes=f;const g=async()=>{};t.nextTick=g;async function v(J,z,oe){let C=Date.now();for(let V=0;V<J;V++){oe(V);const q=Date.now()-C;q>=0&&q<z||(await(0,t.nextTick)(),C+=q)}}t.asyncLoop=v;function b(J){if(typeof J!="string")throw new Error(`utf8ToBytes expected string, got ${typeof J}`);return new Uint8Array(new TextEncoder().encode(J))}t.utf8ToBytes=b;function m(J){return typeof J=="string"&&(J=b(J)),(0,r.bytes)(J),J}t.toBytes=m;function w(...J){let z=0;for(let C=0;C<J.length;C++){const V=J[C];(0,r.bytes)(V),z+=V.length}const oe=new Uint8Array(z);for(let C=0,V=0;C<J.length;C++){const q=J[C];oe.set(q,V),V+=q.length}return oe}t.concatBytes=w;class S{clone(){return this._cloneInto()}}t.Hash=S;const T={}.toString;function x(J,z){if(z!==void 0&&T.call(z)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(J,z)}t.checkOpts=x;function I(J){const z=C=>J().update(m(C)).digest(),oe=J();return z.outputLen=oe.outputLen,z.blockLen=oe.blockLen,z.create=()=>J(),z}t.wrapConstructor=I;function M(J){const z=(C,V)=>J(V).update(m(C)).digest(),oe=J({});return z.outputLen=oe.outputLen,z.blockLen=oe.blockLen,z.create=C=>J(C),z}t.wrapConstructorWithOpts=M;function H(J){const z=(C,V)=>J(V).update(m(C)).digest(),oe=J({});return z.outputLen=oe.outputLen,z.blockLen=oe.blockLen,z.create=C=>J(C),z}t.wrapXOFConstructorWithOpts=H;function re(J=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(J));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=re})(ah);Object.defineProperty(Za,"__esModule",{value:!0});Za.HashMD=Za.Maj=Za.Chi=void 0;const Bb=tn,Bh=ah;function Sz(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),d=n?4:0,l=n?0:4;t.setUint32(e+d,o,n),t.setUint32(e+l,s,n)}const $z=(t,e,r)=>t&e^~t&r;Za.Chi=$z;const Tz=(t,e,r)=>t&e^t&r^e&r;Za.Maj=Tz;class Az extends Bh.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Bh.createView)(this.buffer)}update(e){(0,Bb.exists)(this);const{view:r,buffer:n,blockLen:i}=this;e=(0,Bh.toBytes)(e);const a=e.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const d=(0,Bh.createView)(e);for(;i<=a-o;o+=i)this.process(d,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Bb.exists)(this),(0,Bb.output)(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let u=o;u<i;u++)r[u]=0;Sz(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=(0,Bh.createView)(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=d/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)s.setUint32(4*u,c[u],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(n),e}}Za.HashMD=Az;var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.add5L=ut.add5H=ut.add4H=ut.add4L=ut.add3H=ut.add3L=ut.add=ut.rotlBL=ut.rotlBH=ut.rotlSL=ut.rotlSH=ut.rotr32L=ut.rotr32H=ut.rotrBL=ut.rotrBH=ut.rotrSL=ut.rotrSH=ut.shrSL=ut.shrSH=ut.toBig=ut.split=ut.fromBig=void 0;const wm=BigInt(2**32-1),J1=BigInt(32);function dE(t,e=!1){return e?{h:Number(t&wm),l:Number(t>>J1&wm)}:{h:Number(t>>J1&wm)|0,l:Number(t&wm)|0}}ut.fromBig=dE;function LO(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:o}=dE(t[i],e);[r[i],n[i]]=[a,o]}return[r,n]}ut.split=LO;const UO=(t,e)=>BigInt(t>>>0)<<J1|BigInt(e>>>0);ut.toBig=UO;const FO=(t,e,r)=>t>>>r;ut.shrSH=FO;const zO=(t,e,r)=>t<<32-r|e>>>r;ut.shrSL=zO;const qO=(t,e,r)=>t>>>r|e<<32-r;ut.rotrSH=qO;const KO=(t,e,r)=>t<<32-r|e>>>r;ut.rotrSL=KO;const VO=(t,e,r)=>t<<64-r|e>>>r-32;ut.rotrBH=VO;const HO=(t,e,r)=>t>>>r-32|e<<64-r;ut.rotrBL=HO;const GO=(t,e)=>e;ut.rotr32H=GO;const WO=(t,e)=>t;ut.rotr32L=WO;const YO=(t,e,r)=>t<<r|e>>>32-r;ut.rotlSH=YO;const ZO=(t,e,r)=>e<<r|t>>>32-r;ut.rotlSL=ZO;const XO=(t,e,r)=>e<<r-32|t>>>64-r;ut.rotlBH=XO;const QO=(t,e,r)=>t<<r-32|e>>>64-r;ut.rotlBL=QO;function JO(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}ut.add=JO;const e5=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);ut.add3L=e5;const t5=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;ut.add3H=t5;const r5=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);ut.add4L=r5;const n5=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;ut.add4H=n5;const i5=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);ut.add5L=i5;const o5=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0;ut.add5H=o5;const Pz={fromBig:dE,split:LO,toBig:UO,shrSH:FO,shrSL:zO,rotrSH:qO,rotrSL:KO,rotrBH:VO,rotrBL:HO,rotr32H:GO,rotr32L:WO,rotlSH:YO,rotlSL:ZO,rotlBH:XO,rotlBL:QO,add:JO,add3L:e5,add3H:t5,add4L:r5,add4H:n5,add5H:o5,add5L:i5};ut.default=Pz;Object.defineProperty(zo,"__esModule",{value:!0});zo.sha384=zo.sha512_256=zo.sha512_224=zo.sha512=zo.SHA512=void 0;const xz=Za,St=ut,aw=ah,[Iz,kz]=St.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jc=new Uint32Array(80),Cc=new Uint32Array(80);let Ey=class extends xz.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:a,Cl:o,Dh:s,Dl:d,Eh:l,El:c,Fh:u,Fl:h,Gh:y,Gl:p,Hh:f,Hl:g}=this;return[e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g]}set(e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=s|0,this.Dl=d|0,this.Eh=l|0,this.El=c|0,this.Fh=u|0,this.Fl=h|0,this.Gh=y|0,this.Gl=p|0,this.Hh=f|0,this.Hl=g|0}process(e,r){for(let m=0;m<16;m++,r+=4)jc[m]=e.getUint32(r),Cc[m]=e.getUint32(r+=4);for(let m=16;m<80;m++){const w=jc[m-15]|0,S=Cc[m-15]|0,T=St.default.rotrSH(w,S,1)^St.default.rotrSH(w,S,8)^St.default.shrSH(w,S,7),x=St.default.rotrSL(w,S,1)^St.default.rotrSL(w,S,8)^St.default.shrSL(w,S,7),I=jc[m-2]|0,M=Cc[m-2]|0,H=St.default.rotrSH(I,M,19)^St.default.rotrBH(I,M,61)^St.default.shrSH(I,M,6),re=St.default.rotrSL(I,M,19)^St.default.rotrBL(I,M,61)^St.default.shrSL(I,M,6),J=St.default.add4L(x,re,Cc[m-7],Cc[m-16]),z=St.default.add4H(J,T,H,jc[m-7],jc[m-16]);jc[m]=z|0,Cc[m]=J|0}let{Ah:n,Al:i,Bh:a,Bl:o,Ch:s,Cl:d,Dh:l,Dl:c,Eh:u,El:h,Fh:y,Fl:p,Gh:f,Gl:g,Hh:v,Hl:b}=this;for(let m=0;m<80;m++){const w=St.default.rotrSH(u,h,14)^St.default.rotrSH(u,h,18)^St.default.rotrBH(u,h,41),S=St.default.rotrSL(u,h,14)^St.default.rotrSL(u,h,18)^St.default.rotrBL(u,h,41),T=u&y^~u&f,x=h&p^~h&g,I=St.default.add5L(b,S,x,kz[m],Cc[m]),M=St.default.add5H(I,v,w,T,Iz[m],jc[m]),H=I|0,re=St.default.rotrSH(n,i,28)^St.default.rotrBH(n,i,34)^St.default.rotrBH(n,i,39),J=St.default.rotrSL(n,i,28)^St.default.rotrBL(n,i,34)^St.default.rotrBL(n,i,39),z=n&a^n&s^a&s,oe=i&o^i&d^o&d;v=f|0,b=g|0,f=y|0,g=p|0,y=u|0,p=h|0,{h:u,l:h}=St.default.add(l|0,c|0,M|0,H|0),l=s|0,c=d|0,s=a|0,d=o|0,a=n|0,o=i|0;const C=St.default.add3L(H,J,oe);n=St.default.add3H(C,M,re,z),i=C|0}({h:n,l:i}=St.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:o}=St.default.add(this.Bh|0,this.Bl|0,a|0,o|0),{h:s,l:d}=St.default.add(this.Ch|0,this.Cl|0,s|0,d|0),{h:l,l:c}=St.default.add(this.Dh|0,this.Dl|0,l|0,c|0),{h:u,l:h}=St.default.add(this.Eh|0,this.El|0,u|0,h|0),{h:y,l:p}=St.default.add(this.Fh|0,this.Fl|0,y|0,p|0),{h:f,l:g}=St.default.add(this.Gh|0,this.Gl|0,f|0,g|0),{h:v,l:b}=St.default.add(this.Hh|0,this.Hl|0,v|0,b|0),this.set(n,i,a,o,s,d,l,c,u,h,y,p,f,g,v,b)}roundClean(){jc.fill(0),Cc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};zo.SHA512=Ey;class Oz extends Ey{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Rz extends Ey{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class jz extends Ey{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}zo.sha512=(0,aw.wrapConstructor)(()=>new Ey);zo.sha512_224=(0,aw.wrapConstructor)(()=>new Oz);zo.sha512_256=(0,aw.wrapConstructor)(()=>new Rz);zo.sha384=(0,aw.wrapConstructor)(()=>new jz);const lE=G0(IB);var uE={},Sy={},Xt={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.bitMask=void 0;zt.isBytes=dw;zt.abytes=lw;zt.bytesToHex=fE;zt.numberToHexUnpadded=a5;zt.hexToNumber=hE;zt.hexToBytes=uw;zt.bytesToNumberBE=Bz;zt.bytesToNumberLE=Dz;zt.numberToBytesBE=c5;zt.numberToBytesLE=Mz;zt.numberToVarBytesBE=Lz;zt.ensureBytes=Uz;zt.concatBytes=d5;zt.equalBytes=Fz;zt.utf8ToBytes=zz;zt.bitLen=qz;zt.bitGet=Kz;zt.bitSet=Vz;zt.createHmacDrbg=Gz;zt.validateObject=Yz;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const s5=BigInt(0),cw=BigInt(1),Cz=BigInt(2);function dw(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function lw(t){if(!dw(t))throw new Error("Uint8Array expected")}const Nz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fE(t){lw(t);let e="";for(let r=0;r<t.length;r++)e+=Nz[t[r]];return e}function a5(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const $a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function vA(t){if(t>=$a._0&&t<=$a._9)return t-$a._0;if(t>=$a._A&&t<=$a._F)return t-($a._A-10);if(t>=$a._a&&t<=$a._f)return t-($a._a-10)}function uw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const o=vA(t.charCodeAt(a)),s=vA(t.charCodeAt(a+1));if(o===void 0||s===void 0){const d=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}n[i]=o*16+s}return n}function Bz(t){return hE(fE(t))}function Dz(t){return lw(t),hE(fE(Uint8Array.from(t).reverse()))}function c5(t,e){return uw(t.toString(16).padStart(e*2,"0"))}function Mz(t,e){return c5(t,e).reverse()}function Lz(t){return uw(a5(t))}function Uz(t,e,r){let n;if(typeof e=="string")try{n=uw(e)}catch(a){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${a}`)}else if(dw(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function d5(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];lw(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const a=t[n];r.set(a,i),i+=a.length}return r}function Fz(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function zz(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function qz(t){let e;for(e=0;t>s5;t>>=cw,e+=1);return e}function Kz(t,e){return t>>BigInt(e)&cw}function Vz(t,e,r){return t|(r?cw:s5)<<BigInt(e)}const Hz=t=>(Cz<<BigInt(t-1))-cw;zt.bitMask=Hz;const Db=t=>new Uint8Array(t),_A=t=>Uint8Array.from(t);function Gz(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Db(t),i=Db(t),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=(...u)=>r(i,n,...u),d=(u=Db())=>{i=s(_A([0]),u),n=s(),u.length!==0&&(i=s(_A([1]),u),n=s())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<e;){n=s();const y=n.slice();h.push(y),u+=n.length}return d5(...h)};return(u,h)=>{o(),d(u);let y;for(;!(y=h(l()));)d();return o(),y}}const Wz={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||dw(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Yz(t,e,r={}){const n=(i,a,o)=>{const s=Wz[a];if(typeof s!="function")throw new Error(`Invalid validator "${a}", expected function`);const d=t[i];if(!(o&&d===void 0)&&!s(d,t))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(r))n(i,a,!0);return t}Object.defineProperty(Xt,"__esModule",{value:!0});Xt.isNegativeLE=void 0;Xt.mod=co;Xt.pow=l5;Xt.pow2=Xz;Xt.invert=i0;Xt.tonelliShanks=u5;Xt.FpSqrt=f5;Xt.validateField=eq;Xt.FpPow=h5;Xt.FpInvertBatch=p5;Xt.FpDiv=tq;Xt.FpIsSquare=rq;Xt.nLength=pE;Xt.Field=nq;Xt.FpSqrtOdd=iq;Xt.FpSqrtEven=oq;Xt.hashToPrivateScalar=sq;Xt.getFieldBytesLength=yE;Xt.getMinHashLength=y5;Xt.mapHashToField=aq;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ho=zt,Tn=BigInt(0),mr=BigInt(1),ad=BigInt(2),Zz=BigInt(3),e_=BigInt(4),EA=BigInt(5),SA=BigInt(8);BigInt(9);BigInt(16);function co(t,e){const r=t%e;return r>=Tn?r:e+r}function l5(t,e,r){if(r<=Tn||e<Tn)throw new Error("Expected power/modulo > 0");if(r===mr)return Tn;let n=mr;for(;e>Tn;)e&mr&&(n=n*t%r),t=t*t%r,e>>=mr;return n}function Xz(t,e,r){let n=t;for(;e-- >Tn;)n*=n,n%=r;return n}function i0(t,e){if(t===Tn||e<=Tn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=co(t,e),n=e,i=Tn,a=mr;for(;r!==Tn;){const s=n/r,d=n%r,l=i-a*s;n=r,r=d,i=a,a=l}if(n!==mr)throw new Error("invert: does not exist");return co(i,e)}function u5(t){const e=(t-mr)/ad;let r,n,i;for(r=t-mr,n=0;r%ad===Tn;r/=ad,n++);for(i=ad;i<t&&l5(i,e,t)!==t-mr;i++);if(n===1){const o=(t+mr)/e_;return function(d,l){const c=d.pow(l,o);if(!d.eql(d.sqr(c),l))throw new Error("Cannot find square root");return c}}const a=(r+mr)/ad;return function(s,d){if(s.pow(d,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let l=n,c=s.pow(s.mul(s.ONE,i),r),u=s.pow(d,a),h=s.pow(d,r);for(;!s.eql(h,s.ONE);){if(s.eql(h,s.ZERO))return s.ZERO;let y=1;for(let f=s.sqr(h);y<l&&!s.eql(f,s.ONE);y++)f=s.sqr(f);const p=s.pow(c,mr<<BigInt(l-y-1));c=s.sqr(p),u=s.mul(u,p),h=s.mul(h,c),l=y}return u}}function f5(t){if(t%e_===Zz){const e=(t+mr)/e_;return function(n,i){const a=n.pow(i,e);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%SA===EA){const e=(t-EA)/SA;return function(n,i){const a=n.mul(i,ad),o=n.pow(a,e),s=n.mul(i,o),d=n.mul(n.mul(s,ad),o),l=n.mul(s,n.sub(d,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return u5(t)}const Qz=(t,e)=>(co(t,e)&mr)===mr;Xt.isNegativeLE=Qz;const Jz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function eq(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Jz.reduce((n,i)=>(n[i]="function",n),e);return(0,ho.validateObject)(t,r)}function h5(t,e,r){if(r<Tn)throw new Error("Expected power > 0");if(r===Tn)return t.ONE;if(r===mr)return e;let n=t.ONE,i=e;for(;r>Tn;)r&mr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=mr;return n}function p5(t,e){const r=new Array(e.length),n=e.reduce((a,o,s)=>t.is0(o)?a:(r[s]=a,t.mul(a,o)),t.ONE),i=t.inv(n);return e.reduceRight((a,o,s)=>t.is0(o)?a:(r[s]=t.mul(a,r[s]),t.mul(a,o)),i),r}function tq(t,e,r){return t.mul(e,typeof r=="bigint"?i0(r,t.ORDER):t.inv(r))}function rq(t){const e=(t.ORDER-mr)/ad;return r=>{const n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}}function pE(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function nq(t,e,r=!1,n={}){if(t<=Tn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:a}=pE(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=f5(t),s=Object.freeze({ORDER:t,BITS:i,BYTES:a,MASK:(0,ho.bitMask)(i),ZERO:Tn,ONE:mr,create:d=>co(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return Tn<=d&&d<t},is0:d=>d===Tn,isOdd:d=>(d&mr)===mr,neg:d=>co(-d,t),eql:(d,l)=>d===l,sqr:d=>co(d*d,t),add:(d,l)=>co(d+l,t),sub:(d,l)=>co(d-l,t),mul:(d,l)=>co(d*l,t),pow:(d,l)=>h5(s,d,l),div:(d,l)=>co(d*i0(l,t),t),sqrN:d=>d*d,addN:(d,l)=>d+l,subN:(d,l)=>d-l,mulN:(d,l)=>d*l,inv:d=>i0(d,t),sqrt:n.sqrt||(d=>o(s,d)),invertBatch:d=>p5(s,d),cmov:(d,l,c)=>c?l:d,toBytes:d=>r?(0,ho.numberToBytesLE)(d,a):(0,ho.numberToBytesBE)(d,a),fromBytes:d=>{if(d.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${d.length}`);return r?(0,ho.bytesToNumberLE)(d):(0,ho.bytesToNumberBE)(d)}});return Object.freeze(s)}function iq(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}function oq(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function sq(t,e,r=!1){t=(0,ho.ensureBytes)("privateHash",t);const n=t.length,i=pE(e).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const a=r?(0,ho.bytesToNumberLE)(t):(0,ho.bytesToNumberBE)(t);return co(a,e-mr)+mr}function yE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function y5(t){const e=yE(t);return e+Math.ceil(e/2)}function aq(t,e,r=!1){const n=t.length,i=yE(e),a=y5(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=r?(0,ho.bytesToNumberBE)(t):(0,ho.bytesToNumberLE)(t),s=co(o,e-mr)+mr;return r?(0,ho.numberToBytesLE)(s,i):(0,ho.numberToBytesBE)(s,i)}Object.defineProperty(Sy,"__esModule",{value:!0});Sy.wNAF=lq;Sy.validateBasic=uq;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $A=Xt,cq=zt,dq=BigInt(0),Mb=BigInt(1);function lq(t,e){const r=(i,a)=>{const o=a.negate();return i?o:a},n=i=>{const a=Math.ceil(e/i)+1,o=2**(i-1);return{windows:a,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,a){let o=t.ZERO,s=i;for(;a>dq;)a&Mb&&(o=o.add(s)),s=s.double(),a>>=Mb;return o},precomputeWindow(i,a){const{windows:o,windowSize:s}=n(a),d=[];let l=i,c=l;for(let u=0;u<o;u++){c=l,d.push(c);for(let h=1;h<s;h++)c=c.add(l),d.push(c);l=c.double()}return d},wNAF(i,a,o){const{windows:s,windowSize:d}=n(i);let l=t.ZERO,c=t.BASE;const u=BigInt(2**i-1),h=2**i,y=BigInt(i);for(let p=0;p<s;p++){const f=p*d;let g=Number(o&u);o>>=y,g>d&&(g-=h,o+=Mb);const v=f,b=f+Math.abs(g)-1,m=p%2!==0,w=g<0;g===0?c=c.add(r(m,a[v])):l=l.add(r(w,a[b]))}return{p:l,f:c}},wNAFCached(i,a,o,s){const d=i._WINDOW_SIZE||1;let l=a.get(i);return l||(l=this.precomputeWindow(i,d),d!==1&&a.set(i,s(l))),this.wNAF(d,l,o)}}}function uq(t){return(0,$A.validateField)(t.Fp),(0,cq.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,$A.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}Object.defineProperty(uE,"__esModule",{value:!0});uE.twistedEdwards=mq;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m5=Sy,fq=Xt,Oa=zt,Nc=zt,Xo=BigInt(0),Zi=BigInt(1),bm=BigInt(2),hq=BigInt(8),pq={zip215:!0};function yq(t){const e=(0,m5.validateBasic)(t);return Oa.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function mq(t){const e=yq(t),{Fp:r,n,prehash:i,hash:a,randomBytes:o,nByteLength:s,h:d}=e,l=bm<<BigInt(s*8)-Zi,c=r.create,u=e.uvRatio||((Q,R)=>{try{return{isValid:!0,value:r.sqrt(Q*r.inv(R))}}catch{return{isValid:!1,value:Xo}}}),h=e.adjustScalarBytes||(Q=>Q),y=e.domain||((Q,R,B)=>{if(R.length||B)throw new Error("Contexts/pre-hash are not supported");return Q}),p=Q=>typeof Q=="bigint"&&Xo<Q,f=(Q,R)=>p(Q)&&p(R)&&Q<R,g=Q=>Q===Xo||f(Q,l);function v(Q,R){if(f(Q,R))return Q;throw new Error(`Expected valid scalar < ${R}, got ${typeof Q} ${Q}`)}function b(Q){return Q===Xo?Q:v(Q,n)}const m=new Map;function w(Q){if(!(Q instanceof S))throw new Error("ExtendedPoint expected")}class S{constructor(R,B,D,G){if(this.ex=R,this.ey=B,this.ez=D,this.et=G,!g(R))throw new Error("x required");if(!g(B))throw new Error("y required");if(!g(D))throw new Error("z required");if(!g(G))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof S)throw new Error("extended point not allowed");const{x:B,y:D}=R||{};if(!g(B)||!g(D))throw new Error("invalid affine point");return new S(B,D,Zi,c(B*D))}static normalizeZ(R){const B=r.invertBatch(R.map(D=>D.ez));return R.map((D,G)=>D.toAffine(B[G])).map(S.fromAffine)}_setWindowSize(R){this._WINDOW_SIZE=R,m.delete(this)}assertValidity(){const{a:R,d:B}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:D,ey:G,ez:Z,et:N}=this,W=c(D*D),O=c(G*G),F=c(Z*Z),Y=c(F*F),ee=c(W*R),te=c(F*c(ee+O)),U=c(Y+c(B*c(W*O)));if(te!==U)throw new Error("bad point: equation left != right (1)");const L=c(D*G),P=c(Z*N);if(L!==P)throw new Error("bad point: equation left != right (2)")}equals(R){w(R);const{ex:B,ey:D,ez:G}=this,{ex:Z,ey:N,ez:W}=R,O=c(B*W),F=c(Z*G),Y=c(D*W),ee=c(N*G);return O===F&&Y===ee}is0(){return this.equals(S.ZERO)}negate(){return new S(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:R}=e,{ex:B,ey:D,ez:G}=this,Z=c(B*B),N=c(D*D),W=c(bm*c(G*G)),O=c(R*Z),F=B+D,Y=c(c(F*F)-Z-N),ee=O+N,te=ee-W,U=O-N,L=c(Y*te),P=c(ee*U),j=c(Y*U),X=c(te*ee);return new S(L,P,X,j)}add(R){w(R);const{a:B,d:D}=e,{ex:G,ey:Z,ez:N,et:W}=this,{ex:O,ey:F,ez:Y,et:ee}=R;if(B===BigInt(-1)){const Ee=c((Z-G)*(F+O)),Ne=c((Z+G)*(F-O)),Qe=c(Ne-Ee);if(Qe===Xo)return this.double();const ie=c(N*bm*ee),ce=c(W*bm*Y),K=ce+ie,A=Ne+Ee,k=ce-ie,se=c(K*Qe),fe=c(A*k),me=c(K*k),be=c(Qe*A);return new S(se,fe,be,me)}const te=c(G*O),U=c(Z*F),L=c(W*D*ee),P=c(N*Y),j=c((G+Z)*(O+F)-te-U),X=P-L,ne=P+L,ae=c(U-B*te),pe=c(j*X),we=c(ne*ae),Se=c(j*ae),xe=c(X*ne);return new S(pe,we,xe,Se)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,m,R,S.normalizeZ)}multiply(R){const{p:B,f:D}=this.wNAF(v(R,n));return S.normalizeZ([B,D])[0]}multiplyUnsafe(R){let B=b(R);return B===Xo?x:this.equals(x)||B===Zi?this:this.equals(T)?this.wNAF(B).p:I.unsafeLadder(this,B)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(R){const{ex:B,ey:D,ez:G}=this,Z=this.is0();R==null&&(R=Z?hq:r.inv(G));const N=c(B*R),W=c(D*R),O=c(G*R);if(Z)return{x:Xo,y:Zi};if(O!==Zi)throw new Error("invZ was invalid");return{x:N,y:W}}clearCofactor(){const{h:R}=e;return R===Zi?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:D,a:G}=e,Z=r.BYTES;R=(0,Nc.ensureBytes)("pointHex",R,Z);const N=R.slice(),W=R[Z-1];N[Z-1]=W&-129;const O=Oa.bytesToNumberLE(N);O===Xo||(B?v(O,l):v(O,r.ORDER));const F=c(O*O),Y=c(F-Zi),ee=c(D*F-G);let{isValid:te,value:U}=u(Y,ee);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const L=(U&Zi)===Zi,P=(W&128)!==0;if(!B&&U===Xo&&P)throw new Error("Point.fromHex: x=0 and x_0=1");return P!==L&&(U=c(-U)),S.fromAffine({x:U,y:O})}static fromPrivateKey(R){return re(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),D=Oa.numberToBytesLE(B,r.BYTES);return D[D.length-1]|=R&Zi?128:0,D}toHex(){return Oa.bytesToHex(this.toRawBytes())}}S.BASE=new S(e.Gx,e.Gy,Zi,c(e.Gx*e.Gy)),S.ZERO=new S(Xo,Zi,Zi,Xo);const{BASE:T,ZERO:x}=S,I=(0,m5.wNAF)(S,s*8);function M(Q){return(0,fq.mod)(Q,n)}function H(Q){return M(Oa.bytesToNumberLE(Q))}function re(Q){const R=s;Q=(0,Nc.ensureBytes)("private key",Q,R);const B=(0,Nc.ensureBytes)("hashed private key",a(Q),2*R),D=h(B.slice(0,R)),G=B.slice(R,2*R),Z=H(D),N=T.multiply(Z),W=N.toRawBytes();return{head:D,prefix:G,scalar:Z,point:N,pointBytes:W}}function J(Q){return re(Q).pointBytes}function z(Q=new Uint8Array,...R){const B=Oa.concatBytes(...R);return H(a(y(B,(0,Nc.ensureBytes)("context",Q),!!i)))}function oe(Q,R,B={}){Q=(0,Nc.ensureBytes)("message",Q),i&&(Q=i(Q));const{prefix:D,scalar:G,pointBytes:Z}=re(R),N=z(B.context,D,Q),W=T.multiply(N).toRawBytes(),O=z(B.context,W,Z,Q),F=M(N+O*G);b(F);const Y=Oa.concatBytes(W,Oa.numberToBytesLE(F,r.BYTES));return(0,Nc.ensureBytes)("result",Y,s*2)}const C=pq;function V(Q,R,B,D=C){const{context:G,zip215:Z}=D,N=r.BYTES;Q=(0,Nc.ensureBytes)("signature",Q,2*N),R=(0,Nc.ensureBytes)("message",R),i&&(R=i(R));const W=Oa.bytesToNumberLE(Q.slice(N,2*N));let O,F,Y;try{O=S.fromHex(B,Z),F=S.fromHex(Q.slice(0,N),Z),Y=T.multiplyUnsafe(W)}catch{return!1}if(!Z&&O.isSmallOrder())return!1;const ee=z(G,F.toRawBytes(),O.toRawBytes(),R);return F.add(O.multiplyUnsafe(ee)).subtract(Y).clearCofactor().equals(S.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:J,sign:oe,verify:V,ExtendedPoint:S,utils:{getExtendedPublicKey:re,randomPrivateKey:()=>o(r.BYTES),precompute(Q=8,R=S.BASE){return R._setWindowSize(Q),R.multiply(BigInt(3)),R}}}}var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.expand_message_xmd=g5;Ld.expand_message_xof=w5;Ld.hash_to_field=t_;Ld.isogenyMap=vq;Ld.createHasher=_q;const gq=Xt,fi=zt,wq=fi.bytesToNumberBE;function ed(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function bq(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function mE(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function g5(t,e,r,n){(0,fi.abytes)(t),(0,fi.abytes)(e),mE(r),e.length>255&&(e=n((0,fi.concatBytes)((0,fi.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:a}=n,o=Math.ceil(r/i);if(o>255)throw new Error("Invalid xmd length");const s=(0,fi.concatBytes)(e,ed(e.length,1)),d=ed(0,a),l=ed(r,2),c=new Array(o),u=n((0,fi.concatBytes)(d,t,l,ed(0,1),s));c[0]=n((0,fi.concatBytes)(u,ed(1,1),s));for(let y=1;y<=o;y++){const p=[bq(u,c[y-1]),ed(y+1,1),s];c[y]=n((0,fi.concatBytes)(...p))}return(0,fi.concatBytes)(...c).slice(0,r)}function w5(t,e,r,n,i){if((0,fi.abytes)(t),(0,fi.abytes)(e),mE(r),e.length>255){const a=Math.ceil(2*n/8);e=i.create({dkLen:a}).update((0,fi.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(ed(r,2)).update(e).update(ed(e.length,1)).digest()}function t_(t,e,r){(0,fi.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:a,hash:o,expand:s,DST:d}=r;(0,fi.abytes)(t),mE(e);const l=typeof d=="string"?(0,fi.utf8ToBytes)(d):d,c=n.toString(2).length,u=Math.ceil((c+i)/8),h=e*a*u;let y;if(s==="xmd")y=g5(t,l,h,o);else if(s==="xof")y=w5(t,l,h,i,o);else if(s==="_internal_pass")y=t;else throw new Error('expand must be "xmd" or "xof"');const p=new Array(e);for(let f=0;f<e;f++){const g=new Array(a);for(let v=0;v<a;v++){const b=u*(v+f*a),m=y.subarray(b,b+u);g[v]=(0,gq.mod)(wq(m),n)}p[f]=g}return p}function vq(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[a,o,s,d]=r.map(l=>l.reduce((c,u)=>t.add(t.mul(c,n),u)));return n=t.div(a,o),i=t.mul(i,t.div(s,d)),{x:n,y:i}}}function _q(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const a=t_(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(a[0])),s=t.fromAffine(e(a[1])),d=o.add(s).clearCofactor();return d.assertValidity(),d},encodeToCurve(n,i){const a=t_(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(a[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const a of n)if(typeof a!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${a} in array`);const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}var gE={};Object.defineProperty(gE,"__esModule",{value:!0});gE.montgomery=Sq;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const TA=Xt,Zu=zt,Dh=BigInt(0),Lb=BigInt(1);function Eq(t){return(0,Zu.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Sq(t){const e=Eq(t),{P:r}=e,n=m=>(0,TA.mod)(m,r),i=e.montgomeryBits,a=Math.ceil(i/8),o=e.nByteLength,s=e.adjustScalarBytes||(m=>m),d=e.powPminus2||(m=>(0,TA.pow)(m,r-BigInt(2),r));function l(m,w,S){const T=n(m*(w-S));return w=n(w-T),S=n(S+T),[w,S]}function c(m){if(typeof m=="bigint"&&Dh<=m&&m<r)return m;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const u=(e.a-BigInt(2))/BigInt(4);function h(m,w){const S=c(m),T=c(w),x=S;let I=Lb,M=Dh,H=S,re=Lb,J=Dh,z;for(let C=BigInt(i-1);C>=Dh;C--){const V=T>>C&Lb;J^=V,z=l(J,I,H),I=z[0],H=z[1],z=l(J,M,re),M=z[0],re=z[1],J=V;const q=I+M,Q=n(q*q),R=I-M,B=n(R*R),D=Q-B,G=H+re,Z=H-re,N=n(Z*q),W=n(G*R),O=N+W,F=N-W;H=n(O*O),re=n(x*n(F*F)),I=n(Q*B),M=n(D*(Q+n(u*D)))}z=l(J,I,H),I=z[0],H=z[1],z=l(J,M,re),M=z[0],re=z[1];const oe=d(M);return n(I*oe)}function y(m){return(0,Zu.numberToBytesLE)(n(m),a)}function p(m){const w=(0,Zu.ensureBytes)("u coordinate",m,a);return o===32&&(w[31]&=127),(0,Zu.bytesToNumberLE)(w)}function f(m){const w=(0,Zu.ensureBytes)("scalar",m),S=w.length;if(S!==a&&S!==o)throw new Error(`Expected ${a} or ${o} bytes, got ${S}`);return(0,Zu.bytesToNumberLE)(s(w))}function g(m,w){const S=p(w),T=f(m),x=h(S,T);if(x===Dh)throw new Error("Invalid private or public key received");return y(x)}const v=y(e.Gu);function b(m){return g(m,v)}return{scalarMult:g,scalarMultBase:b,getSharedSecret:(m,w)=>g(m,w),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:v}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=T,t.edwardsToMontgomeryPriv=x;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=zo,r=lE,n=uE,i=Ld,a=Xt,o=gE,s=zt,d=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),c=BigInt(0),u=BigInt(1),h=BigInt(2),y=BigInt(3),p=BigInt(5),f=BigInt(8);function g(F){const Y=BigInt(10),ee=BigInt(20),te=BigInt(40),U=BigInt(80),L=d,j=F*F%L*F%L,X=(0,a.pow2)(j,h,L)*j%L,ne=(0,a.pow2)(X,u,L)*F%L,ae=(0,a.pow2)(ne,p,L)*ne%L,pe=(0,a.pow2)(ae,Y,L)*ae%L,we=(0,a.pow2)(pe,ee,L)*pe%L,Se=(0,a.pow2)(we,te,L)*we%L,xe=(0,a.pow2)(Se,U,L)*Se%L,Ee=(0,a.pow2)(xe,U,L)*Se%L,Ne=(0,a.pow2)(Ee,Y,L)*ae%L;return{pow_p_5_8:(0,a.pow2)(Ne,h,L)*F%L,b2:j}}function v(F){return F[0]&=248,F[31]&=127,F[31]|=64,F}function b(F,Y){const ee=d,te=(0,a.mod)(Y*Y*Y,ee),U=(0,a.mod)(te*te*Y,ee),L=g(F*U).pow_p_5_8;let P=(0,a.mod)(F*te*L,ee);const j=(0,a.mod)(Y*P*P,ee),X=P,ne=(0,a.mod)(P*l,ee),ae=j===F,pe=j===(0,a.mod)(-F,ee),we=j===(0,a.mod)(-F*l,ee);return ae&&(P=X),(pe||we)&&(P=ne),(0,a.isNegativeLE)(P,ee)&&(P=(0,a.mod)(-P,ee)),{isValid:ae||pe,value:P}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const m=(0,a.Field)(d,void 0,!0),w={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:m,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:f,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:r.randomBytes,adjustScalarBytes:v,uvRatio:b};t.ed25519=(0,n.twistedEdwards)(w);function S(F,Y,ee){if(Y.length>255)throw new Error("Context is too big");return(0,r.concatBytes)((0,r.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([ee?1:0,Y.length]),Y,F)}t.ed25519ctx=(0,n.twistedEdwards)({...w,domain:S}),t.ed25519ph=(0,n.twistedEdwards)(Object.assign({},w,{domain:S,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:d,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:F=>{const Y=d,{pow_p_5_8:ee,b2:te}=g(F);return(0,a.mod)((0,a.pow2)(ee,y,Y)*te,Y)},adjustScalarBytes:v,randomBytes:r.randomBytes});function T(F){const{y:Y}=t.ed25519.ExtendedPoint.fromHex(F),ee=BigInt(1);return m.toBytes(m.create((ee+Y)*m.inv(ee-Y)))}t.edwardsToMontgomery=T;function x(F){const Y=w.hash(F.subarray(0,32));return w.adjustScalarBytes(Y).subarray(0,32)}const I=(m.ORDER+y)/f,M=m.pow(h,I),H=m.sqrt(m.neg(m.ONE));function re(F){const Y=(m.ORDER-p)/f,ee=BigInt(486662);let te=m.sqr(F);te=m.mul(te,h);let U=m.add(te,m.ONE),L=m.neg(ee),P=m.sqr(U),j=m.mul(P,U),X=m.mul(te,ee);X=m.mul(X,L),X=m.add(X,P),X=m.mul(X,L);let ne=m.sqr(j);P=m.sqr(ne),ne=m.mul(ne,j),ne=m.mul(ne,X),P=m.mul(P,ne);let ae=m.pow(P,Y);ae=m.mul(ae,ne);let pe=m.mul(ae,H);P=m.sqr(ae),P=m.mul(P,j);let we=m.eql(P,X),Se=m.cmov(pe,ae,we),xe=m.mul(L,te),Ee=m.mul(ae,F);Ee=m.mul(Ee,M);let Ne=m.mul(Ee,H),Qe=m.mul(X,te);P=m.sqr(Ee),P=m.mul(P,j);let ie=m.eql(P,Qe),ce=m.cmov(Ne,Ee,ie);P=m.sqr(Se),P=m.mul(P,j);let K=m.eql(P,X),A=m.cmov(xe,L,K),k=m.cmov(ce,Se,K),se=m.isOdd(k);return k=m.cmov(k,m.neg(k),K!==se),{xMn:A,xMd:U,yMn:k,yMd:u}}const J=(0,a.FpSqrtEven)(m,m.neg(BigInt(486664)));function z(F){const{xMn:Y,xMd:ee,yMn:te,yMd:U}=re(F);let L=m.mul(Y,U);L=m.mul(L,J);let P=m.mul(ee,te),j=m.sub(Y,ee),X=m.add(Y,ee),ne=m.mul(P,X),ae=m.eql(ne,m.ZERO);L=m.cmov(L,m.ZERO,ae),P=m.cmov(P,m.ONE,ae),j=m.cmov(j,m.ONE,ae),X=m.cmov(X,m.ONE,ae);const pe=m.invertBatch([P,X]);return{x:m.mul(L,pe[0]),y:m.mul(j,pe[1])}}const oe=(0,i.createHasher)(t.ed25519.ExtendedPoint,F=>z(F[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});t.hashToCurve=oe.hashToCurve,t.encodeToCurve=oe.encodeToCurve;function C(F){if(!(F instanceof W))throw new Error("RistrettoPoint expected")}const V=l,q=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Q=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),R=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),B=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),D=F=>b(u,F),G=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Z=F=>t.ed25519.CURVE.Fp.create((0,s.bytesToNumberLE)(F)&G);function N(F){const{d:Y}=t.ed25519.CURVE,ee=t.ed25519.CURVE.Fp.ORDER,te=t.ed25519.CURVE.Fp.create,U=te(V*F*F),L=te((U+u)*R);let P=BigInt(-1);const j=te((P-Y*U)*te(U+Y));let{isValid:X,value:ne}=b(L,j),ae=te(ne*F);(0,a.isNegativeLE)(ae,ee)||(ae=te(-ae)),X||(ne=ae),X||(P=U);const pe=te(P*(U-u)*B-j),we=ne*ne,Se=te((ne+ne)*j),xe=te(pe*q),Ee=te(u-we),Ne=te(u+we);return new t.ed25519.ExtendedPoint(te(Se*Ne),te(Ee*xe),te(xe*Ne),te(Se*Ee))}class W{constructor(Y){this.ep=Y}static fromAffine(Y){return new W(t.ed25519.ExtendedPoint.fromAffine(Y))}static hashToCurve(Y){Y=(0,s.ensureBytes)("ristrettoHash",Y,64);const ee=Z(Y.slice(0,32)),te=N(ee),U=Z(Y.slice(32,64)),L=N(U);return new W(te.add(L))}static fromHex(Y){Y=(0,s.ensureBytes)("ristrettoHex",Y,32);const{a:ee,d:te}=t.ed25519.CURVE,U=t.ed25519.CURVE.Fp.ORDER,L=t.ed25519.CURVE.Fp.create,P="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",j=Z(Y);if(!(0,s.equalBytes)((0,s.numberToBytesLE)(j,32),Y)||(0,a.isNegativeLE)(j,U))throw new Error(P);const X=L(j*j),ne=L(u+ee*X),ae=L(u-ee*X),pe=L(ne*ne),we=L(ae*ae),Se=L(ee*te*pe-we),{isValid:xe,value:Ee}=D(L(Se*we)),Ne=L(Ee*ae),Qe=L(Ee*Ne*Se);let ie=L((j+j)*Ne);(0,a.isNegativeLE)(ie,U)&&(ie=L(-ie));const ce=L(ne*Qe),K=L(ie*ce);if(!xe||(0,a.isNegativeLE)(K,U)||ce===c)throw new Error(P);return new W(new t.ed25519.ExtendedPoint(ie,ce,u,K))}toRawBytes(){let{ex:Y,ey:ee,ez:te,et:U}=this.ep;const L=t.ed25519.CURVE.Fp.ORDER,P=t.ed25519.CURVE.Fp.create,j=P(P(te+ee)*P(te-ee)),X=P(Y*ee),ne=P(X*X),{value:ae}=D(P(j*ne)),pe=P(ae*j),we=P(ae*X),Se=P(pe*we*U);let xe;if((0,a.isNegativeLE)(U*Se,L)){let Ne=P(ee*V),Qe=P(Y*V);Y=Ne,ee=Qe,xe=P(pe*Q)}else xe=we;(0,a.isNegativeLE)(Y*Se,L)&&(ee=P(-ee));let Ee=P((te-ee)*xe);return(0,a.isNegativeLE)(Ee,L)&&(Ee=P(-Ee)),(0,s.numberToBytesLE)(Ee,32)}toHex(){return(0,s.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(Y){C(Y);const{ex:ee,ey:te}=this.ep,{ex:U,ey:L}=Y.ep,P=t.ed25519.CURVE.Fp.create,j=P(ee*L)===P(te*U),X=P(te*L)===P(ee*U);return j||X}add(Y){return C(Y),new W(this.ep.add(Y.ep))}subtract(Y){return C(Y),new W(this.ep.subtract(Y.ep))}multiply(Y){return new W(this.ep.multiply(Y))}multiplyUnsafe(Y){return new W(this.ep.multiplyUnsafe(Y))}double(){return new W(this.ep.double())}negate(){return new W(this.ep.negate())}}t.RistrettoPoint=(W.BASE||(W.BASE=new W(t.ed25519.ExtendedPoint.BASE)),W.ZERO||(W.ZERO=new W(t.ed25519.ExtendedPoint.ZERO)),W);const O=(F,Y)=>{const ee=Y.DST,te=typeof ee=="string"?(0,r.utf8ToBytes)(ee):ee,U=(0,i.expand_message_xmd)(F,te,64,e.sha512);return W.hashToCurve(U)};t.hashToRistretto255=O,t.hash_to_ristretto255=t.hashToRistretto255})(jO);var b5={};const $q=G0(DB);var fw={};const Tq=G0(MB);var wE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=y,t.weierstrass=f,t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=v;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Sy,r=Xt,n=zt,i=zt;function a(b){const m=(0,e.validateBasic)(b);n.validateObject(m,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:w,Fp:S,a:T}=m;if(w){if(!S.eql(T,S.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof w!="object"||typeof w.beta!="bigint"||typeof w.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...m})}const{bytesToNumberBE:o,hexToBytes:s}=n;t.DER={Err:class extends Error{constructor(m=""){super(m)}},_parseInt(b){const{Err:m}=t.DER;if(b.length<2||b[0]!==2)throw new m("Invalid signature integer tag");const w=b[1],S=b.subarray(2,w+2);if(!w||S.length!==w)throw new m("Invalid signature integer: wrong length");if(S[0]&128)throw new m("Invalid signature integer: negative");if(S[0]===0&&!(S[1]&128))throw new m("Invalid signature integer: unnecessary leading zero");return{d:o(S),l:b.subarray(w+2)}},toSig(b){const{Err:m}=t.DER,w=typeof b=="string"?s(b):b;n.abytes(w);let S=w.length;if(S<2||w[0]!=48)throw new m("Invalid signature tag");if(w[1]!==S-2)throw new m("Invalid signature: incorrect length");const{d:T,l:x}=t.DER._parseInt(w.subarray(2)),{d:I,l:M}=t.DER._parseInt(x);if(M.length)throw new m("Invalid signature: left bytes after parsing");return{r:T,s:I}},hexFromSig(b){const m=re=>Number.parseInt(re[0],16)&8?"00"+re:re,w=re=>{const J=re.toString(16);return J.length&1?`0${J}`:J},S=m(w(b.s)),T=m(w(b.r)),x=S.length/2,I=T.length/2,M=w(x),H=w(I);return`30${w(I+x+4)}02${H}${T}02${M}${S}`}};const d=BigInt(0),l=BigInt(1),c=BigInt(2),u=BigInt(3),h=BigInt(4);function y(b){const m=a(b),{Fp:w}=m,S=m.toBytes||((V,q,Q)=>{const R=q.toAffine();return n.concatBytes(Uint8Array.from([4]),w.toBytes(R.x),w.toBytes(R.y))}),T=m.fromBytes||(V=>{const q=V.subarray(1),Q=w.fromBytes(q.subarray(0,w.BYTES)),R=w.fromBytes(q.subarray(w.BYTES,2*w.BYTES));return{x:Q,y:R}});function x(V){const{a:q,b:Q}=m,R=w.sqr(V),B=w.mul(R,V);return w.add(w.add(B,w.mul(V,q)),Q)}if(!w.eql(w.sqr(m.Gy),x(m.Gx)))throw new Error("bad generator point: equation left != right");function I(V){return typeof V=="bigint"&&d<V&&V<m.n}function M(V){if(!I(V))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function H(V){const{allowedPrivateKeyLengths:q,nByteLength:Q,wrapPrivateKey:R,n:B}=m;if(q&&typeof V!="bigint"){if(n.isBytes(V)&&(V=n.bytesToHex(V)),typeof V!="string"||!q.includes(V.length))throw new Error("Invalid key");V=V.padStart(Q*2,"0")}let D;try{D=typeof V=="bigint"?V:n.bytesToNumberBE((0,i.ensureBytes)("private key",V,Q))}catch{throw new Error(`private key must be ${Q} bytes, hex or bigint, not ${typeof V}`)}return R&&(D=r.mod(D,B)),M(D),D}const re=new Map;function J(V){if(!(V instanceof z))throw new Error("ProjectivePoint expected")}class z{constructor(q,Q,R){if(this.px=q,this.py=Q,this.pz=R,q==null||!w.isValid(q))throw new Error("x required");if(Q==null||!w.isValid(Q))throw new Error("y required");if(R==null||!w.isValid(R))throw new Error("z required")}static fromAffine(q){const{x:Q,y:R}=q||{};if(!q||!w.isValid(Q)||!w.isValid(R))throw new Error("invalid affine point");if(q instanceof z)throw new Error("projective point not allowed");const B=D=>w.eql(D,w.ZERO);return B(Q)&&B(R)?z.ZERO:new z(Q,R,w.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(q){const Q=w.invertBatch(q.map(R=>R.pz));return q.map((R,B)=>R.toAffine(Q[B])).map(z.fromAffine)}static fromHex(q){const Q=z.fromAffine(T((0,i.ensureBytes)("pointHex",q)));return Q.assertValidity(),Q}static fromPrivateKey(q){return z.BASE.multiply(H(q))}_setWindowSize(q){this._WINDOW_SIZE=q,re.delete(this)}assertValidity(){if(this.is0()){if(m.allowInfinityPoint&&!w.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:q,y:Q}=this.toAffine();if(!w.isValid(q)||!w.isValid(Q))throw new Error("bad point: x or y not FE");const R=w.sqr(Q),B=x(q);if(!w.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:q}=this.toAffine();if(w.isOdd)return!w.isOdd(q);throw new Error("Field doesn't support isOdd")}equals(q){J(q);const{px:Q,py:R,pz:B}=this,{px:D,py:G,pz:Z}=q,N=w.eql(w.mul(Q,Z),w.mul(D,B)),W=w.eql(w.mul(R,Z),w.mul(G,B));return N&&W}negate(){return new z(this.px,w.neg(this.py),this.pz)}double(){const{a:q,b:Q}=m,R=w.mul(Q,u),{px:B,py:D,pz:G}=this;let Z=w.ZERO,N=w.ZERO,W=w.ZERO,O=w.mul(B,B),F=w.mul(D,D),Y=w.mul(G,G),ee=w.mul(B,D);return ee=w.add(ee,ee),W=w.mul(B,G),W=w.add(W,W),Z=w.mul(q,W),N=w.mul(R,Y),N=w.add(Z,N),Z=w.sub(F,N),N=w.add(F,N),N=w.mul(Z,N),Z=w.mul(ee,Z),W=w.mul(R,W),Y=w.mul(q,Y),ee=w.sub(O,Y),ee=w.mul(q,ee),ee=w.add(ee,W),W=w.add(O,O),O=w.add(W,O),O=w.add(O,Y),O=w.mul(O,ee),N=w.add(N,O),Y=w.mul(D,G),Y=w.add(Y,Y),O=w.mul(Y,ee),Z=w.sub(Z,O),W=w.mul(Y,F),W=w.add(W,W),W=w.add(W,W),new z(Z,N,W)}add(q){J(q);const{px:Q,py:R,pz:B}=this,{px:D,py:G,pz:Z}=q;let N=w.ZERO,W=w.ZERO,O=w.ZERO;const F=m.a,Y=w.mul(m.b,u);let ee=w.mul(Q,D),te=w.mul(R,G),U=w.mul(B,Z),L=w.add(Q,R),P=w.add(D,G);L=w.mul(L,P),P=w.add(ee,te),L=w.sub(L,P),P=w.add(Q,B);let j=w.add(D,Z);return P=w.mul(P,j),j=w.add(ee,U),P=w.sub(P,j),j=w.add(R,B),N=w.add(G,Z),j=w.mul(j,N),N=w.add(te,U),j=w.sub(j,N),O=w.mul(F,P),N=w.mul(Y,U),O=w.add(N,O),N=w.sub(te,O),O=w.add(te,O),W=w.mul(N,O),te=w.add(ee,ee),te=w.add(te,ee),U=w.mul(F,U),P=w.mul(Y,P),te=w.add(te,U),U=w.sub(ee,U),U=w.mul(F,U),P=w.add(P,U),ee=w.mul(te,P),W=w.add(W,ee),ee=w.mul(j,P),N=w.mul(L,N),N=w.sub(N,ee),ee=w.mul(L,te),O=w.mul(j,O),O=w.add(O,ee),new z(N,W,O)}subtract(q){return this.add(q.negate())}is0(){return this.equals(z.ZERO)}wNAF(q){return C.wNAFCached(this,re,q,Q=>{const R=w.invertBatch(Q.map(B=>B.pz));return Q.map((B,D)=>B.toAffine(R[D])).map(z.fromAffine)})}multiplyUnsafe(q){const Q=z.ZERO;if(q===d)return Q;if(M(q),q===l)return this;const{endo:R}=m;if(!R)return C.unsafeLadder(this,q);let{k1neg:B,k1:D,k2neg:G,k2:Z}=R.splitScalar(q),N=Q,W=Q,O=this;for(;D>d||Z>d;)D&l&&(N=N.add(O)),Z&l&&(W=W.add(O)),O=O.double(),D>>=l,Z>>=l;return B&&(N=N.negate()),G&&(W=W.negate()),W=new z(w.mul(W.px,R.beta),W.py,W.pz),N.add(W)}multiply(q){M(q);let Q=q,R,B;const{endo:D}=m;if(D){const{k1neg:G,k1:Z,k2neg:N,k2:W}=D.splitScalar(Q);let{p:O,f:F}=this.wNAF(Z),{p:Y,f:ee}=this.wNAF(W);O=C.constTimeNegate(G,O),Y=C.constTimeNegate(N,Y),Y=new z(w.mul(Y.px,D.beta),Y.py,Y.pz),R=O.add(Y),B=F.add(ee)}else{const{p:G,f:Z}=this.wNAF(Q);R=G,B=Z}return z.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(q,Q,R){const B=z.BASE,D=(Z,N)=>N===d||N===l||!Z.equals(B)?Z.multiplyUnsafe(N):Z.multiply(N),G=D(this,Q).add(D(q,R));return G.is0()?void 0:G}toAffine(q){const{px:Q,py:R,pz:B}=this,D=this.is0();q==null&&(q=D?w.ONE:w.inv(B));const G=w.mul(Q,q),Z=w.mul(R,q),N=w.mul(B,q);if(D)return{x:w.ZERO,y:w.ZERO};if(!w.eql(N,w.ONE))throw new Error("invZ was invalid");return{x:G,y:Z}}isTorsionFree(){const{h:q,isTorsionFree:Q}=m;if(q===l)return!0;if(Q)return Q(z,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:q,clearCofactor:Q}=m;return q===l?this:Q?Q(z,this):this.multiplyUnsafe(m.h)}toRawBytes(q=!0){return this.assertValidity(),S(z,this,q)}toHex(q=!0){return n.bytesToHex(this.toRawBytes(q))}}z.BASE=new z(m.Gx,m.Gy,w.ONE),z.ZERO=new z(w.ZERO,w.ONE,w.ZERO);const oe=m.nBitLength,C=(0,e.wNAF)(z,m.endo?Math.ceil(oe/2):oe);return{CURVE:m,ProjectivePoint:z,normPrivateKeyToScalar:H,weierstrassEquation:x,isWithinCurveOrder:I}}function p(b){const m=(0,e.validateBasic)(b);return n.validateObject(m,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...m})}function f(b){const m=p(b),{Fp:w,n:S}=m,T=w.BYTES+1,x=2*w.BYTES+1;function I(P){return d<P&&P<w.ORDER}function M(P){return r.mod(P,S)}function H(P){return r.invert(P,S)}const{ProjectivePoint:re,normPrivateKeyToScalar:J,weierstrassEquation:z,isWithinCurveOrder:oe}=y({...m,toBytes(P,j,X){const ne=j.toAffine(),ae=w.toBytes(ne.x),pe=n.concatBytes;return X?pe(Uint8Array.from([j.hasEvenY()?2:3]),ae):pe(Uint8Array.from([4]),ae,w.toBytes(ne.y))},fromBytes(P){const j=P.length,X=P[0],ne=P.subarray(1);if(j===T&&(X===2||X===3)){const ae=n.bytesToNumberBE(ne);if(!I(ae))throw new Error("Point is not on curve");const pe=z(ae);let we;try{we=w.sqrt(pe)}catch(Ee){const Ne=Ee instanceof Error?": "+Ee.message:"";throw new Error("Point is not on curve"+Ne)}const Se=(we&l)===l;return(X&1)===1!==Se&&(we=w.neg(we)),{x:ae,y:we}}else if(j===x&&X===4){const ae=w.fromBytes(ne.subarray(0,w.BYTES)),pe=w.fromBytes(ne.subarray(w.BYTES,2*w.BYTES));return{x:ae,y:pe}}else throw new Error(`Point of length ${j} was invalid. Expected ${T} compressed bytes or ${x} uncompressed bytes`)}}),C=P=>n.bytesToHex(n.numberToBytesBE(P,m.nByteLength));function V(P){const j=S>>l;return P>j}function q(P){return V(P)?M(-P):P}const Q=(P,j,X)=>n.bytesToNumberBE(P.slice(j,X));class R{constructor(j,X,ne){this.r=j,this.s=X,this.recovery=ne,this.assertValidity()}static fromCompact(j){const X=m.nByteLength;return j=(0,i.ensureBytes)("compactSignature",j,X*2),new R(Q(j,0,X),Q(j,X,2*X))}static fromDER(j){const{r:X,s:ne}=t.DER.toSig((0,i.ensureBytes)("DER",j));return new R(X,ne)}assertValidity(){if(!oe(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!oe(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(j){return new R(this.r,this.s,j)}recoverPublicKey(j){const{r:X,s:ne,recovery:ae}=this,pe=W((0,i.ensureBytes)("msgHash",j));if(ae==null||![0,1,2,3].includes(ae))throw new Error("recovery id invalid");const we=ae===2||ae===3?X+m.n:X;if(we>=w.ORDER)throw new Error("recovery id 2 or 3 invalid");const Se=ae&1?"03":"02",xe=re.fromHex(Se+C(we)),Ee=H(we),Ne=M(-pe*Ee),Qe=M(ne*Ee),ie=re.BASE.multiplyAndAddUnsafe(xe,Ne,Qe);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return V(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,M(-this.s),this.recovery):this}toDERRawBytes(){return n.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return n.hexToBytes(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const B={isValidPrivateKey(P){try{return J(P),!0}catch{return!1}},normPrivateKeyToScalar:J,randomPrivateKey:()=>{const P=r.getMinHashLength(m.n);return r.mapHashToField(m.randomBytes(P),m.n)},precompute(P=8,j=re.BASE){return j._setWindowSize(P),j.multiply(BigInt(3)),j}};function D(P,j=!0){return re.fromPrivateKey(P).toRawBytes(j)}function G(P){const j=n.isBytes(P),X=typeof P=="string",ne=(j||X)&&P.length;return j?ne===T||ne===x:X?ne===2*T||ne===2*x:P instanceof re}function Z(P,j,X=!0){if(G(P))throw new Error("first arg must be private key");if(!G(j))throw new Error("second arg must be public key");return re.fromHex(j).multiply(J(P)).toRawBytes(X)}const N=m.bits2int||function(P){const j=n.bytesToNumberBE(P),X=P.length*8-m.nBitLength;return X>0?j>>BigInt(X):j},W=m.bits2int_modN||function(P){return M(N(P))},O=n.bitMask(m.nBitLength);function F(P){if(typeof P!="bigint")throw new Error("bigint expected");if(!(d<=P&&P<O))throw new Error(`bigint expected < 2^${m.nBitLength}`);return n.numberToBytesBE(P,m.nByteLength)}function Y(P,j,X=ee){if(["recovered","canonical"].some(K=>K in X))throw new Error("sign() legacy options not supported");const{hash:ne,randomBytes:ae}=m;let{lowS:pe,prehash:we,extraEntropy:Se}=X;pe==null&&(pe=!0),P=(0,i.ensureBytes)("msgHash",P),we&&(P=(0,i.ensureBytes)("prehashed msgHash",ne(P)));const xe=W(P),Ee=J(j),Ne=[F(Ee),F(xe)];if(Se!=null&&Se!==!1){const K=Se===!0?ae(w.BYTES):Se;Ne.push((0,i.ensureBytes)("extraEntropy",K))}const Qe=n.concatBytes(...Ne),ie=xe;function ce(K){const A=N(K);if(!oe(A))return;const k=H(A),se=re.BASE.multiply(A).toAffine(),fe=M(se.x);if(fe===d)return;const me=M(k*M(ie+fe*Ee));if(me===d)return;let be=(se.x===fe?0:2)|Number(se.y&l),Je=me;return pe&&V(me)&&(Je=q(me),be^=1),new R(fe,Je,be)}return{seed:Qe,k2sig:ce}}const ee={lowS:m.lowS,prehash:!1},te={lowS:m.lowS,prehash:!1};function U(P,j,X=ee){const{seed:ne,k2sig:ae}=Y(P,j,X),pe=m;return n.createHmacDrbg(pe.hash.outputLen,pe.nByteLength,pe.hmac)(ne,ae)}re.BASE._setWindowSize(8);function L(P,j,X,ne=te){const ae=P;if(j=(0,i.ensureBytes)("msgHash",j),X=(0,i.ensureBytes)("publicKey",X),"strict"in ne)throw new Error("options.strict was renamed to lowS");const{lowS:pe,prehash:we}=ne;let Se,xe;try{if(typeof ae=="string"||n.isBytes(ae))try{Se=R.fromDER(ae)}catch(se){if(!(se instanceof t.DER.Err))throw se;Se=R.fromCompact(ae)}else if(typeof ae=="object"&&typeof ae.r=="bigint"&&typeof ae.s=="bigint"){const{r:se,s:fe}=ae;Se=new R(se,fe)}else throw new Error("PARSE");xe=re.fromHex(X)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(pe&&Se.hasHighS())return!1;we&&(j=m.hash(j));const{r:Ee,s:Ne}=Se,Qe=W(j),ie=H(Ne),ce=M(Qe*ie),K=M(Ee*ie),A=re.BASE.multiplyAndAddUnsafe(xe,ce,K)?.toAffine();return A?M(A.x)===Ee:!1}return{CURVE:m,getPublicKey:D,getSharedSecret:Z,sign:U,verify:L,ProjectivePoint:re,Signature:R,utils:B}}function g(b,m){const w=b.ORDER;let S=d;for(let V=w-l;V%c===d;V/=c)S+=l;const T=S,x=c<<T-l-l,I=x*c,M=(w-l)/I,H=(M-l)/c,re=I-l,J=x,z=b.pow(m,M),oe=b.pow(m,(M+l)/c);let C=(V,q)=>{let Q=z,R=b.pow(q,re),B=b.sqr(R);B=b.mul(B,q);let D=b.mul(V,B);D=b.pow(D,H),D=b.mul(D,R),R=b.mul(D,q),B=b.mul(D,V);let G=b.mul(B,R);D=b.pow(G,J);let Z=b.eql(D,b.ONE);R=b.mul(B,oe),D=b.mul(G,Q),B=b.cmov(R,B,Z),G=b.cmov(D,G,Z);for(let N=T;N>l;N--){let W=N-c;W=c<<W-l;let O=b.pow(G,W);const F=b.eql(O,b.ONE);R=b.mul(B,Q),Q=b.mul(Q,Q),O=b.mul(G,Q),B=b.cmov(R,B,F),G=b.cmov(O,G,F)}return{isValid:Z,value:B}};if(b.ORDER%h===u){const V=(b.ORDER-u)/h,q=b.sqrt(b.neg(m));C=(Q,R)=>{let B=b.sqr(R);const D=b.mul(Q,R);B=b.mul(B,D);let G=b.pow(B,V);G=b.mul(G,D);const Z=b.mul(G,q),N=b.mul(b.sqr(G),R),W=b.eql(N,Q);let O=b.cmov(Z,G,W);return{isValid:W,value:O}}}return C}function v(b,m){if(r.validateField(b),!b.isValid(m.A)||!b.isValid(m.B)||!b.isValid(m.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const w=g(b,m.Z);if(!b.isOdd)throw new Error("Fp.isOdd is not implemented!");return S=>{let T,x,I,M,H,re,J,z;T=b.sqr(S),T=b.mul(T,m.Z),x=b.sqr(T),x=b.add(x,T),I=b.add(x,b.ONE),I=b.mul(I,m.B),M=b.cmov(m.Z,b.neg(x),!b.eql(x,b.ZERO)),M=b.mul(M,m.A),x=b.sqr(I),re=b.sqr(M),H=b.mul(re,m.A),x=b.add(x,H),x=b.mul(x,I),re=b.mul(re,M),H=b.mul(re,m.B),x=b.add(x,H),J=b.mul(T,I);const{isValid:oe,value:C}=w(x,re);z=b.mul(T,S),z=b.mul(z,C),J=b.cmov(J,I,oe),z=b.cmov(z,C,oe);const V=b.isOdd(S)===b.isOdd(z);return z=b.cmov(b.neg(z),z,V),J=b.div(J,M),{x:J,y:z}}}})(wE);Object.defineProperty(fw,"__esModule",{value:!0});fw.getHash=v5;fw.createCurve=xq;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Aq=Tq,AA=lE,Pq=wE;function v5(t){return{hash:t,hmac:(e,...r)=>(0,Aq.hmac)(t,e,(0,AA.concatBytes)(...r)),randomBytes:AA.randomBytes}}function xq(t,e){const r=n=>(0,Pq.weierstrass)({...t,...v5(n)});return Object.freeze({...r(e),create:r})}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=$q,r=lE,n=fw,i=Ld,a=Xt,o=zt,s=wE,d=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),c=BigInt(1),u=BigInt(2),h=(R,B)=>(R+B/u)/B;function y(R){const B=d,D=BigInt(3),G=BigInt(6),Z=BigInt(11),N=BigInt(22),W=BigInt(23),O=BigInt(44),F=BigInt(88),Y=R*R*R%B,ee=Y*Y*R%B,te=(0,a.pow2)(ee,D,B)*ee%B,U=(0,a.pow2)(te,D,B)*ee%B,L=(0,a.pow2)(U,u,B)*Y%B,P=(0,a.pow2)(L,Z,B)*L%B,j=(0,a.pow2)(P,N,B)*P%B,X=(0,a.pow2)(j,O,B)*j%B,ne=(0,a.pow2)(X,F,B)*X%B,ae=(0,a.pow2)(ne,O,B)*j%B,pe=(0,a.pow2)(ae,D,B)*ee%B,we=(0,a.pow2)(pe,W,B)*P%B,Se=(0,a.pow2)(we,G,B)*Y%B,xe=(0,a.pow2)(Se,u,B);if(!p.eql(p.sqr(xe),R))throw new Error("Cannot find square root");return xe}const p=(0,a.Field)(d,void 0,void 0,{sqrt:y});t.secp256k1=(0,n.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:R=>{const B=l,D=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),G=-c*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Z=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),N=D,W=BigInt("0x100000000000000000000000000000000"),O=h(N*R,B),F=h(-G*R,B);let Y=(0,a.mod)(R-O*D-F*Z,B),ee=(0,a.mod)(-O*G-F*N,B);const te=Y>W,U=ee>W;if(te&&(Y=B-Y),U&&(ee=B-ee),Y>W||ee>W)throw new Error("splitScalar: Endomorphism failed, k="+R);return{k1neg:te,k1:Y,k2neg:U,k2:ee}}}},e.sha256);const f=BigInt(0),g=R=>typeof R=="bigint"&&f<R&&R<d,v=R=>typeof R=="bigint"&&f<R&&R<l,b={};function m(R,...B){let D=b[R];if(D===void 0){const G=(0,e.sha256)(Uint8Array.from(R,Z=>Z.charCodeAt(0)));D=(0,o.concatBytes)(G,G),b[R]=D}return(0,e.sha256)((0,o.concatBytes)(D,...B))}const w=R=>R.toRawBytes(!0).slice(1),S=R=>(0,o.numberToBytesBE)(R,32),T=R=>(0,a.mod)(R,d),x=R=>(0,a.mod)(R,l),I=t.secp256k1.ProjectivePoint,M=(R,B,D)=>I.BASE.multiplyAndAddUnsafe(R,B,D);function H(R){let B=t.secp256k1.utils.normPrivateKeyToScalar(R),D=I.fromPrivateKey(B);return{scalar:D.hasEvenY()?B:x(-B),bytes:w(D)}}function re(R){if(!g(R))throw new Error("bad x: need 0 < x < p");const B=T(R*R),D=T(B*R+BigInt(7));let G=y(D);G%u!==f&&(G=T(-G));const Z=new I(R,G,c);return Z.assertValidity(),Z}function J(...R){return x((0,o.bytesToNumberBE)(m("BIP0340/challenge",...R)))}function z(R){return H(R).bytes}function oe(R,B,D=(0,r.randomBytes)(32)){const G=(0,o.ensureBytes)("message",R),{bytes:Z,scalar:N}=H(B),W=(0,o.ensureBytes)("auxRand",D,32),O=S(N^(0,o.bytesToNumberBE)(m("BIP0340/aux",W))),F=m("BIP0340/nonce",O,Z,G),Y=x((0,o.bytesToNumberBE)(F));if(Y===f)throw new Error("sign failed: k is zero");const{bytes:ee,scalar:te}=H(Y),U=J(ee,Z,G),L=new Uint8Array(64);if(L.set(ee,0),L.set(S(x(te+U*N)),32),!C(L,G,Z))throw new Error("sign: Invalid signature produced");return L}function C(R,B,D){const G=(0,o.ensureBytes)("signature",R,64),Z=(0,o.ensureBytes)("message",B),N=(0,o.ensureBytes)("publicKey",D,32);try{const W=re((0,o.bytesToNumberBE)(N)),O=(0,o.bytesToNumberBE)(G.subarray(0,32));if(!g(O))return!1;const F=(0,o.bytesToNumberBE)(G.subarray(32,64));if(!v(F))return!1;const Y=J(S(O),w(W),Z),ee=M(W,F,x(-Y));return!(!ee||!ee.hasEvenY()||ee.toAffine().x!==O)}catch{return!1}}t.schnorr={getPublicKey:z,sign:oe,verify:C,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:re,pointToBytes:w,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:m,mod:a.mod}};const V=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(R=>R.map(B=>BigInt(B)))),q=(0,s.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),Q=(0,i.createHasher)(t.secp256k1.ProjectivePoint,R=>{const{x:B,y:D}=q(p.create(R[0]));return V(B,D)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=Q.hashToCurve,t.encodeToCurve=Q.encodeToCurve})(b5);var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.decodeHex=tu.remove0x=void 0;var Iq=bs;function _5(t){return t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t}tu.remove0x=_5;function kq(t){return(0,Iq.hexToBytes)(_5(t))}tu.decodeHex=kq;var Xa={},E5={},Nf={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.output=mi.exists=mi.hash=mi.bytes=mi.bool=mi.number=void 0;function o0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}mi.number=o0;function S5(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}mi.bool=S5;function bE(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}mi.bytes=bE;function $5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");o0(t.outputLen),o0(t.blockLen)}mi.hash=$5;function T5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}mi.exists=T5;function A5(t,e){bE(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}mi.output=A5;const Oq={number:o0,bool:S5,bytes:bE,hash:$5,exists:T5,output:A5};mi.default=Oq;Object.defineProperty(Nf,"__esModule",{value:!0});Nf.poly1305=Nf.wrapConstructorWithKey=void 0;const fg=bs,Ub=mi,In=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let Rq=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,fg.toBytes)(e),(0,fg.ensureBytes)(e,32);const r=In(e,0),n=In(e,2),i=In(e,4),a=In(e,6),o=In(e,8),s=In(e,10),d=In(e,12),l=In(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|a<<9)&8191,this.r[4]=(a>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|s<<2)&8191,this.r[7]=(s>>>11|d<<5)&8065,this.r[8]=(d>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let c=0;c<8;c++)this.pad[c]=In(e,16+2*c)}process(e,r,n=!1){const i=n?0:2048,{h:a,r:o}=this,s=o[0],d=o[1],l=o[2],c=o[3],u=o[4],h=o[5],y=o[6],p=o[7],f=o[8],g=o[9],v=In(e,r+0),b=In(e,r+2),m=In(e,r+4),w=In(e,r+6),S=In(e,r+8),T=In(e,r+10),x=In(e,r+12),I=In(e,r+14);let M=a[0]+(v&8191),H=a[1]+((v>>>13|b<<3)&8191),re=a[2]+((b>>>10|m<<6)&8191),J=a[3]+((m>>>7|w<<9)&8191),z=a[4]+((w>>>4|S<<12)&8191),oe=a[5]+(S>>>1&8191),C=a[6]+((S>>>14|T<<2)&8191),V=a[7]+((T>>>11|x<<5)&8191),q=a[8]+((x>>>8|I<<8)&8191),Q=a[9]+(I>>>5|i),R=0,B=R+M*s+H*(5*g)+re*(5*f)+J*(5*p)+z*(5*y);R=B>>>13,B&=8191,B+=oe*(5*h)+C*(5*u)+V*(5*c)+q*(5*l)+Q*(5*d),R+=B>>>13,B&=8191;let D=R+M*d+H*s+re*(5*g)+J*(5*f)+z*(5*p);R=D>>>13,D&=8191,D+=oe*(5*y)+C*(5*h)+V*(5*u)+q*(5*c)+Q*(5*l),R+=D>>>13,D&=8191;let G=R+M*l+H*d+re*s+J*(5*g)+z*(5*f);R=G>>>13,G&=8191,G+=oe*(5*p)+C*(5*y)+V*(5*h)+q*(5*u)+Q*(5*c),R+=G>>>13,G&=8191;let Z=R+M*c+H*l+re*d+J*s+z*(5*g);R=Z>>>13,Z&=8191,Z+=oe*(5*f)+C*(5*p)+V*(5*y)+q*(5*h)+Q*(5*u),R+=Z>>>13,Z&=8191;let N=R+M*u+H*c+re*l+J*d+z*s;R=N>>>13,N&=8191,N+=oe*(5*g)+C*(5*f)+V*(5*p)+q*(5*y)+Q*(5*h),R+=N>>>13,N&=8191;let W=R+M*h+H*u+re*c+J*l+z*d;R=W>>>13,W&=8191,W+=oe*s+C*(5*g)+V*(5*f)+q*(5*p)+Q*(5*y),R+=W>>>13,W&=8191;let O=R+M*y+H*h+re*u+J*c+z*l;R=O>>>13,O&=8191,O+=oe*d+C*s+V*(5*g)+q*(5*f)+Q*(5*p),R+=O>>>13,O&=8191;let F=R+M*p+H*y+re*h+J*u+z*c;R=F>>>13,F&=8191,F+=oe*l+C*d+V*s+q*(5*g)+Q*(5*f),R+=F>>>13,F&=8191;let Y=R+M*f+H*p+re*y+J*h+z*u;R=Y>>>13,Y&=8191,Y+=oe*c+C*l+V*d+q*s+Q*(5*g),R+=Y>>>13,Y&=8191;let ee=R+M*g+H*f+re*p+J*y+z*h;R=ee>>>13,ee&=8191,ee+=oe*u+C*c+V*l+q*d+Q*s,R+=ee>>>13,ee&=8191,R=(R<<2)+R|0,R=R+B|0,B=R&8191,R=R>>>13,D+=R,a[0]=B,a[1]=D,a[2]=G,a[3]=Z,a[4]=N,a[5]=W,a[6]=O,a[7]=F,a[8]=Y,a[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=i,i=e[s]>>>13,e[s]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=e[s]+i,i=n[s]>>>13,n[s]&=8191;n[9]-=8192;let a=(i^1)-1;for(let s=0;s<10;s++)n[s]&=a;a=~a;for(let s=0;s<10;s++)e[s]=e[s]&a|n[s];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let s=1;s<8;s++)o=(e[s]+r[s]|0)+(o>>>16)|0,e[s]=o&65535}update(e){Ub.default.exists(this);const{buffer:r,blockLen:n}=this;e=(0,fg.toBytes)(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o===n){for(;n<=i-a;a+=n)this.process(e,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Ub.default.exists(this),Ub.default.output(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let a=0;for(let o=0;o<8;o++)e[a++]=n[o]>>>0,e[a++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function P5(t){const e=(n,i)=>t(i).update((0,fg.toBytes)(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Nf.wrapConstructorWithKey=P5;Nf.poly1305=P5(t=>new Rq(t));var hw={};Object.defineProperty(hw,"__esModule",{value:!0});hw.salsaBasic=void 0;const As=mi,Ls=bs,jq=(0,Ls.utf8ToBytes)("expand 16-byte k"),Cq=(0,Ls.utf8ToBytes)("expand 32-byte k"),Nq=(0,Ls.u32)(jq),Bq=(0,Ls.u32)(Cq),vm=t=>!(t.byteOffset%4),Dq=t=>{const{core:e,rounds:r,counterRight:n,counterLen:i,allow128bitKeys:a,extendNonceFn:o,blockLen:s}=(0,Ls.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},t);As.default.number(i),As.default.number(r),As.default.number(s),As.default.bool(n),As.default.bool(a);const d=s/4;if(s%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(l,c,u,h,y=0)=>{if(As.default.bytes(l),As.default.bytes(c),As.default.bytes(u),h||(h=new Uint8Array(u.length)),As.default.bytes(h),As.default.number(y),y<0||y>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(h.length<u.length)throw new Error(`Salsa/ChaCha: output (${h.length}) is shorter than data (${u.length})`);const p=[];let f,g;if(l.length===32)vm(l)?f=l:(f=l.slice(),p.push(f)),g=Bq;else if(l.length===16&&a)f=new Uint8Array(32),f.set(l),f.set(l,16),g=Nq,p.push(f);else throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${l.length}`);if(vm(c)||(c=c.slice(),p.push(c)),o){if(c.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");f=o(g,f,c.subarray(0,16),new Uint8Array(32)),p.push(f),c=c.subarray(16)}const v=16-i;if(c.length!==v)throw new Error(`Salsa/ChaCha: nonce must be ${v} or 16 bytes`);if(v!==12){const M=new Uint8Array(12);M.set(c,n?0:12-c.length),p.push(c=M)}const b=new Uint8Array(s),m=(0,Ls.u32)(b),w=(0,Ls.u32)(f),S=(0,Ls.u32)(c),T=vm(u)&&(0,Ls.u32)(u),x=vm(h)&&(0,Ls.u32)(h);p.push(m);const I=u.length;for(let M=0,H=y;M<I;H++){if(e(g,w,S,m,H,r),H>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const re=Math.min(s,I-M);if(re===s&&x&&T){const J=M/4;if(M%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let z=0;z<d;z++)x[J+z]=T[J+z]^m[z];M+=s;continue}for(let J=0;J<re;J++)h[M+J]=u[M+J]^b[J];M+=re}for(let M=0;M<p.length;M++)p[M].fill(0);return h}};hw.salsaBasic=Dq;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=t.hchacha=void 0;const e=bs,r=Nf,n=hw,i=(u,h)=>u<<h|u>>>32-h;function a(u,h,y,p,f,g=20){let v=u[0],b=u[1],m=u[2],w=u[3],S=h[0],T=h[1],x=h[2],I=h[3],M=h[4],H=h[5],re=h[6],J=h[7],z=f,oe=y[0],C=y[1],V=y[2],q=v,Q=b,R=m,B=w,D=S,G=T,Z=x,N=I,W=M,O=H,F=re,Y=J,ee=z,te=oe,U=C,L=V;for(let j=0;j<g;j+=2)q=q+D|0,ee=i(ee^q,16),W=W+ee|0,D=i(D^W,12),q=q+D|0,ee=i(ee^q,8),W=W+ee|0,D=i(D^W,7),Q=Q+G|0,te=i(te^Q,16),O=O+te|0,G=i(G^O,12),Q=Q+G|0,te=i(te^Q,8),O=O+te|0,G=i(G^O,7),R=R+Z|0,U=i(U^R,16),F=F+U|0,Z=i(Z^F,12),R=R+Z|0,U=i(U^R,8),F=F+U|0,Z=i(Z^F,7),B=B+N|0,L=i(L^B,16),Y=Y+L|0,N=i(N^Y,12),B=B+N|0,L=i(L^B,8),Y=Y+L|0,N=i(N^Y,7),q=q+G|0,L=i(L^q,16),F=F+L|0,G=i(G^F,12),q=q+G|0,L=i(L^q,8),F=F+L|0,G=i(G^F,7),Q=Q+Z|0,ee=i(ee^Q,16),Y=Y+ee|0,Z=i(Z^Y,12),Q=Q+Z|0,ee=i(ee^Q,8),Y=Y+ee|0,Z=i(Z^Y,7),R=R+N|0,te=i(te^R,16),W=W+te|0,N=i(N^W,12),R=R+N|0,te=i(te^R,8),W=W+te|0,N=i(N^W,7),B=B+D|0,U=i(U^B,16),O=O+U|0,D=i(D^O,12),B=B+D|0,U=i(U^B,8),O=O+U|0,D=i(D^O,7);let P=0;p[P++]=v+q|0,p[P++]=b+Q|0,p[P++]=m+R|0,p[P++]=w+B|0,p[P++]=S+D|0,p[P++]=T+G|0,p[P++]=x+Z|0,p[P++]=I+N|0,p[P++]=M+W|0,p[P++]=H+O|0,p[P++]=re+F|0,p[P++]=J+Y|0,p[P++]=z+ee|0,p[P++]=oe+te|0,p[P++]=C+U|0,p[P++]=V+L|0}function o(u,h,y,p){const f=(0,e.u32)(h),g=(0,e.u32)(y),v=(0,e.u32)(p);let b=u[0],m=u[1],w=u[2],S=u[3],T=f[0],x=f[1],I=f[2],M=f[3],H=f[4],re=f[5],J=f[6],z=f[7],oe=g[0],C=g[1],V=g[2],q=g[3];for(let Q=0;Q<20;Q+=2)b=b+T|0,oe=i(oe^b,16),H=H+oe|0,T=i(T^H,12),b=b+T|0,oe=i(oe^b,8),H=H+oe|0,T=i(T^H,7),m=m+x|0,C=i(C^m,16),re=re+C|0,x=i(x^re,12),m=m+x|0,C=i(C^m,8),re=re+C|0,x=i(x^re,7),w=w+I|0,V=i(V^w,16),J=J+V|0,I=i(I^J,12),w=w+I|0,V=i(V^w,8),J=J+V|0,I=i(I^J,7),S=S+M|0,q=i(q^S,16),z=z+q|0,M=i(M^z,12),S=S+M|0,q=i(q^S,8),z=z+q|0,M=i(M^z,7),b=b+x|0,q=i(q^b,16),J=J+q|0,x=i(x^J,12),b=b+x|0,q=i(q^b,8),J=J+q|0,x=i(x^J,7),m=m+I|0,oe=i(oe^m,16),z=z+oe|0,I=i(I^z,12),m=m+I|0,oe=i(oe^m,8),z=z+oe|0,I=i(I^z,7),w=w+M|0,C=i(C^w,16),H=H+C|0,M=i(M^H,12),w=w+M|0,C=i(C^w,8),H=H+C|0,M=i(M^H,7),S=S+T|0,V=i(V^S,16),re=re+V|0,T=i(T^re,12),S=S+T|0,V=i(V^S,8),re=re+V|0,T=i(T^re,7);return v[0]=b,v[1]=m,v[2]=w,v[3]=S,v[4]=oe,v[5]=C,v[6]=V,v[7]=q,p}t.hchacha=o,t.chacha20orig=(0,n.salsaBasic)({core:a,counterRight:!1,counterLen:8}),t.chacha20=(0,n.salsaBasic)({core:a,counterRight:!1,counterLen:4,allow128bitKeys:!1}),t.xchacha20=(0,n.salsaBasic)({core:a,counterRight:!1,counterLen:8,extendNonceFn:o,allow128bitKeys:!1}),t.chacha8=(0,n.salsaBasic)({core:a,counterRight:!1,counterLen:4,rounds:8}),t.chacha12=(0,n.salsaBasic)({core:a,counterRight:!1,counterLen:4,rounds:12});const s=new Uint8Array(16),d=(u,h)=>{u.update(h);const y=h.length%16;y&&u.update(s.subarray(y))},l=(u,h,y,p,f)=>{const g=u(h,y,new Uint8Array(32)),v=r.poly1305.create(g);f&&d(v,f),d(v,p);const b=new Uint8Array(16),m=(0,e.createView)(b);(0,e.setBigUint64)(m,0,BigInt(f?f.length:0),!0),(0,e.setBigUint64)(m,8,BigInt(p.length),!0),v.update(b);const w=v.digest();return g.fill(0),w},c=u=>(h,y,p)=>((0,e.ensureBytes)(h,32),(0,e.ensureBytes)(y),{tagLength:16,encrypt:(g,v)=>{const b=g.length,m=b+16;v?(0,e.ensureBytes)(v,m):v=new Uint8Array(m),u(h,y,g,v,1);const w=l(u,h,y,v.subarray(0,-16),p);return v.set(w,b),v},decrypt:(g,v)=>{const b=g.length,m=b-16;if(b<16)throw new Error("encrypted data must be at least 16 bytes");v?(0,e.ensureBytes)(v,m):v=new Uint8Array(m);const w=g.subarray(0,-16),S=g.subarray(-16),T=l(u,h,y,w,p);if(!(0,e.equalBytes)(S,T))throw new Error("invalid tag");return u(h,y,w,v,1),v}});t._poly1305_aead=c,t.chacha20poly1305=(0,t._poly1305_aead)(t.chacha20),t.xchacha20poly1305=(0,t._poly1305_aead)(t.xchacha20)})(E5);var wd={},x5={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=tn,r=ah;class n extends r.Hash{constructor(o,s){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(o);const d=(0,r.toBytes)(s);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const l=this.blockLen,c=new Uint8Array(l);c.set(d.length>l?o.create().update(d).digest():d);for(let u=0;u<c.length;u++)c[u]^=54;this.iHash.update(c),this.oHash=o.create();for(let u=0;u<c.length;u++)c[u]^=106;this.oHash.update(c),c.fill(0)}update(o){return(0,e.exists)(this),this.iHash.update(o),this}digestInto(o){(0,e.exists)(this),(0,e.bytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:d,finished:l,destroyed:c,blockLen:u,outputLen:h}=this;return o=o,o.finished=l,o.destroyed=c,o.blockLen=u,o.outputLen=h,o.oHash=s._cloneInto(o.oHash),o.iHash=d._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=n;const i=(a,o,s)=>new n(a,o).update(s).digest();t.hmac=i,t.hmac.create=(a,o)=>new n(a,o)})(x5);Object.defineProperty(wd,"__esModule",{value:!0});wd.hkdf=wd.expand=wd.extract=void 0;const r_=tn,PA=ah,I5=x5;function k5(t,e,r){return(0,r_.hash)(t),r===void 0&&(r=new Uint8Array(t.outputLen)),(0,I5.hmac)(t,(0,PA.toBytes)(r),(0,PA.toBytes)(e))}wd.extract=k5;const Fb=new Uint8Array([0]),xA=new Uint8Array;function O5(t,e,r,n=32){if((0,r_.hash)(t),(0,r_.number)(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=xA);const a=new Uint8Array(i*t.outputLen),o=I5.hmac.create(t,e),s=o._cloneInto(),d=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)Fb[0]=l+1,s.update(l===0?xA:d).update(r).update(Fb).digestInto(d),a.set(d,t.outputLen*l),o._cloneInto(s);return o.destroy(),s.destroy(),d.fill(0),Fb.fill(0),a.slice(0,n)}wd.expand=O5;const Mq=(t,e,r,n,i)=>O5(t,k5(t,e,r),n,i);wd.hkdf=Mq;var Bf={};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.sha224=Bf.sha256=void 0;const zb=Za,xo=ah,Lq=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dc=new Uint32Array(64);let R5=class extends zb.HashMD{constructor(){super(64,32,8,!1),this.A=Bc[0]|0,this.B=Bc[1]|0,this.C=Bc[2]|0,this.D=Bc[3]|0,this.E=Bc[4]|0,this.F=Bc[5]|0,this.G=Bc[6]|0,this.H=Bc[7]|0}get(){const{A:e,B:r,C:n,D:i,E:a,F:o,G:s,H:d}=this;return[e,r,n,i,a,o,s,d]}set(e,r,n,i,a,o,s,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=d|0}process(e,r){for(let u=0;u<16;u++,r+=4)Dc[u]=e.getUint32(r,!1);for(let u=16;u<64;u++){const h=Dc[u-15],y=Dc[u-2],p=(0,xo.rotr)(h,7)^(0,xo.rotr)(h,18)^h>>>3,f=(0,xo.rotr)(y,17)^(0,xo.rotr)(y,19)^y>>>10;Dc[u]=f+Dc[u-7]+p+Dc[u-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:d,G:l,H:c}=this;for(let u=0;u<64;u++){const h=(0,xo.rotr)(s,6)^(0,xo.rotr)(s,11)^(0,xo.rotr)(s,25),y=c+h+(0,zb.Chi)(s,d,l)+Lq[u]+Dc[u]|0,f=((0,xo.rotr)(n,2)^(0,xo.rotr)(n,13)^(0,xo.rotr)(n,22))+(0,zb.Maj)(n,i,a)|0;c=l,l=d,d=s,s=o+y|0,o=a,a=i,i=n,n=y+f|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,d=d+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,i,a,o,s,d,l,c)}roundClean(){Dc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class Uq extends R5{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Bf.sha256=(0,xo.wrapConstructor)(()=>new R5);Bf.sha224=(0,xo.wrapConstructor)(()=>new Uq);var pw={};const vE=G0(bz);Object.defineProperty(pw,"__esModule",{value:!0});pw.aes256gcm=void 0;var IA=bs,kA=vE,qb=an;function Fq(t,e,r){var n=function(a){var o=(0,kA.createCipheriv)("aes-256-gcm",t,e);r&&o.setAAD(r);var s=o.update(a),d=o.final();return(0,IA.concatBytes)(s,d,o.getAuthTag())},i=function(a){var o=a.subarray(0,a.length-qb.AEAD_TAG_LENGTH),s=a.subarray(-qb.AEAD_TAG_LENGTH),d=(0,kA.createDecipheriv)("aes-256-gcm",t,e);r&&d.setAAD(r),d.setAuthTag(s);var l=d.update(o),c=d.final();return(0,IA.concatBytes)(l,c)};return{tagLength:qb.AEAD_TAG_LENGTH,encrypt:n,decrypt:i}}pw.aes256gcm=Fq;Object.defineProperty(Xa,"__esModule",{value:!0});Xa.deriveKey=Xa.aesDecrypt=Xa.aesEncrypt=void 0;var zq=E5,j5=bs,qq=eu,Kq=wd,Vq=Bf,OA=Jl,s0=an,Hq=pw;function Gq(t,e){return C5(!0,t,e)}Xa.aesEncrypt=Gq;function Wq(t,e){return C5(!1,t,e)}Xa.aesDecrypt=Wq;function Yq(t){return(0,Kq.hkdf)(Vq.sha256,t,void 0,void 0,32)}Xa.deriveKey=Yq;function C5(t,e,r){var n=(0,OA.symmetricAlgorithm)(),i=t?Zq:Xq;if(n==="aes-256-gcm")return i(Hq.aes256gcm,e,r,(0,OA.symmetricNonceLength)());if(n==="xchacha20")return i(zq.xchacha20poly1305,e,r,s0.XCHACHA20_NONCE_LENGTH);throw new Error("Not implemented")}function Zq(t,e,r,n){var i=(0,qq.randomBytes)(n),a=t(e,i),o=a.encrypt(r),s=o.subarray(0,o.length-s0.AEAD_TAG_LENGTH),d=o.subarray(-s0.AEAD_TAG_LENGTH);return(0,j5.concatBytes)(i,d,s)}function Xq(t,e,r,n){var i=n+s0.AEAD_TAG_LENGTH,a=r.subarray(0,n),o=r.subarray(n,i),s=r.subarray(i),d=t(e,Uint8Array.from(a)),l=(0,j5.concatBytes)(s,o);return d.decrypt(l)}Object.defineProperty(pi,"__esModule",{value:!0});pi.hexToPublicKey=pi.convertPublicKeyFormat=pi.getSharedPoint=pi.getSharedKey=pi.getPublicKey=pi.isValidPrivateKey=pi.getValidSecret=void 0;var Qq=bs,Jq=eu,RA=jO,eK=b5,Kb=Jl,N5=an,tK=tu,rK=Xa;function nK(){var t;do t=(0,Jq.randomBytes)(N5.SECRET_KEY_LENGTH);while(!B5(t));return t}pi.getValidSecret=nK;function B5(t){return $y(function(e){return e.utils.isValidPrivateKey(t)},function(){return!0},function(){return!0})}pi.isValidPrivateKey=B5;function iK(t){return $y(function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)},function(e){return e.getPublicKey(t)})}pi.getPublicKey=iK;function oK(t,e){return(0,rK.deriveKey)((0,Qq.concatBytes)(t,e))}pi.getSharedKey=oK;function sK(t,e,r){return $y(function(n){return n.getSharedSecret(t,e,r)},function(n){return n.getSharedSecret(t,e)},function(n){var i=n.utils.getExtendedPublicKey(t).scalar,a=n.ExtendedPoint.fromHex(e).multiply(i);return a.toRawBytes()})}pi.getSharedPoint=sK;function aK(t,e){return $y(function(r){return r.getSharedSecret(BigInt(1),t,e)},function(){return t},function(){return t})}pi.convertPublicKeyFormat=aK;function cK(t){var e=(0,tK.decodeHex)(t);return $y(function(){if(e.length===N5.ETH_PUBLIC_KEY_SIZE){var r=new Uint8Array(1+e.length);return r.set([4]),r.set(e,1),r}return e},function(){return e},function(){return e})}pi.hexToPublicKey=cK;function $y(t,e,r){if((0,Kb.ellipticCurve)()==="secp256k1")return t(eK.secp256k1);if((0,Kb.ellipticCurve)()==="x25519")return e(RA.x25519);if((0,Kb.ellipticCurve)()==="ed25519")return r(RA.ed25519);throw new Error("Not implemented")}(function(t){var e=ip&&ip.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=ip&&ip.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(pi,t),r(tu,t),r(Xa,t)})(iw);var Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.PublicKey=void 0;var Vb=bs,dK=Jl,_m=iw,lK=function(){function t(e){this.data=(0,_m.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,_m.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return Buffer.from((0,_m.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),e?(0,Vb.bytesToHex)(this.data):(0,Vb.bytesToHex)(this.uncompressed)},t.prototype.decapsulate=function(e){var r,n;return(0,dK.isHkdfKeyCompressed)()?(r=this.data,n=e.multiply(this,!0)):(r=this.uncompressed,n=e.multiply(this,!1)),(0,_m.getSharedKey)(r,n)},t.prototype.equals=function(e){return(0,Vb.equalBytes)(this.data,e.data)},t}();Ty.PublicKey=lK;Object.defineProperty(nw,"__esModule",{value:!0});nw.PrivateKey=void 0;var jA=bs,uK=Jl,Nu=iw,fK=Ty,hK=function(){function t(e){var r=e===void 0?(0,Nu.getValidSecret)():e;if(!(0,Nu.isValidPrivateKey)(r))throw new Error("Invalid private key");this.data=r,this.publicKey=new fK.PublicKey((0,Nu.getPublicKey)(r))}return t.fromHex=function(e){return new t((0,Nu.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,jA.bytesToHex)(this.data)},t.prototype.encapsulate=function(e){var r,n;return(0,uK.isHkdfKeyCompressed)()?(r=this.publicKey.compressed,n=this.multiply(e,!0)):(r=this.publicKey.uncompressed,n=this.multiply(e,!1)),(0,Nu.getSharedKey)(r,n)},t.prototype.multiply=function(e,r){return r===void 0&&(r=!1),(0,Nu.getSharedPoint)(this.data,e.compressed,r)},t.prototype.equals=function(e){return(0,jA.equalBytes)(this.data,e.data)},t}();nw.PrivateKey=hK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=nw;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var r=Ty;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return r.PublicKey}})})(Q1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=t.decrypt=t.encrypt=void 0;var e=bs,r=Jl,n=Q1,i=iw;function a(l,c){var u=new n.PrivateKey,h=l instanceof Uint8Array?new n.PublicKey(l):n.PublicKey.fromHex(l),y=u.encapsulate(h),p=(0,i.aesEncrypt)(y,c),f;return(0,r.isEphemeralKeyCompressed)()?f=u.publicKey.compressed:f=u.publicKey.uncompressed,Buffer.from((0,e.concatBytes)(f,p))}t.encrypt=a;function o(l,c){var u=l instanceof Uint8Array?new n.PrivateKey(l):n.PrivateKey.fromHex(l),h=(0,r.ephemeralKeySize)(),y=new n.PublicKey(c.subarray(0,h)),p=c.subarray(h),f=y.decapsulate(u);return Buffer.from((0,i.aesDecrypt)(f,p))}t.decrypt=o;var s=Jl;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var d=Q1;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return d.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),t.utils={aesDecrypt:i.aesDecrypt,aesEncrypt:i.aesEncrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}})(rf);var D5={exports:{}},Hb={exports:{}},Dr={},yw={};yw.byteLength=mK;yw.toByteArray=wK;yw.fromByteArray=_K;var Ks=[],Oo=[],pK=typeof Uint8Array<"u"?Uint8Array:Array,Gb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Bu=0,yK=Gb.length;Bu<yK;++Bu)Ks[Bu]=Gb[Bu],Oo[Gb.charCodeAt(Bu)]=Bu;Oo[45]=62;Oo[95]=63;function M5(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function mK(t){var e=M5(t),r=e[0],n=e[1];return(r+n)*3/4-n}function gK(t,e,r){return(e+r)*3/4-r}function wK(t){var e,r=M5(t),n=r[0],i=r[1],a=new pK(gK(t,n,i)),o=0,s=i>0?n-4:n,d;for(d=0;d<s;d+=4)e=Oo[t.charCodeAt(d)]<<18|Oo[t.charCodeAt(d+1)]<<12|Oo[t.charCodeAt(d+2)]<<6|Oo[t.charCodeAt(d+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return i===2&&(e=Oo[t.charCodeAt(d)]<<2|Oo[t.charCodeAt(d+1)]>>4,a[o++]=e&255),i===1&&(e=Oo[t.charCodeAt(d)]<<10|Oo[t.charCodeAt(d+1)]<<4|Oo[t.charCodeAt(d+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function bK(t){return Ks[t>>18&63]+Ks[t>>12&63]+Ks[t>>6&63]+Ks[t&63]}function vK(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(bK(n));return i.join("")}function _K(t){for(var e,r=t.length,n=r%3,i=[],a=16383,o=0,s=r-n;o<s;o+=a)i.push(vK(t,o,o+a>s?s:o+a));return n===1?(e=t[r-1],i.push(Ks[e>>2]+Ks[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ks[e>>10]+Ks[e>>4&63]+Ks[e<<2&63]+"=")),i.join("")}var _E={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_E.read=function(t,e,r,n,i){var a,o,s=i*8-n-1,d=(1<<s)-1,l=d>>1,c=-7,u=r?i-1:0,h=r?-1:1,y=t[e+u];for(u+=h,a=y&(1<<-c)-1,y>>=-c,c+=s;c>0;a=a*256+t[e+u],u+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=o*256+t[e+u],u+=h,c-=8);if(a===0)a=1-l;else{if(a===d)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-l}return(y?-1:1)*o*Math.pow(2,a-n)};_E.write=function(t,e,r,n,i,a){var o,s,d,l=a*8-i-1,c=(1<<l)-1,u=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:a-1,p=n?1:-1,f=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+u>=1?e+=h/d:e+=h*Math.pow(2,1-u),e*d>=2&&(o++,d/=2),o+u>=c?(s=0,o=c):o+u>=1?(s=(e*d-1)*Math.pow(2,i),o=o+u):(s=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;t[r+y]=s&255,y+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[r+y]=o&255,y+=p,o/=256,l-=8);t[r+y-p]|=f*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=yw,r=_E,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const K=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(K,A),K.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(K){if(K>i)throw new RangeError('The value "'+K+'" is invalid for option "size"');const A=new Uint8Array(K);return Object.setPrototypeOf(A,s.prototype),A}function s(K,A,k){if(typeof K=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(K)}return d(K,A,k)}s.poolSize=8192;function d(K,A,k){if(typeof K=="string")return h(K,A);if(ArrayBuffer.isView(K))return p(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Ee(K,ArrayBuffer)||K&&Ee(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(K,SharedArrayBuffer)||K&&Ee(K.buffer,SharedArrayBuffer)))return f(K,A,k);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const se=K.valueOf&&K.valueOf();if(se!=null&&se!==K)return s.from(se,A,k);const fe=g(K);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return s.from(K[Symbol.toPrimitive]("string"),A,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}s.from=function(K,A,k){return d(K,A,k)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function c(K,A,k){return l(K),K<=0?o(K):A!==void 0?typeof k=="string"?o(K).fill(A,k):o(K).fill(A):o(K)}s.alloc=function(K,A,k){return c(K,A,k)};function u(K){return l(K),o(K<0?0:v(K)|0)}s.allocUnsafe=function(K){return u(K)},s.allocUnsafeSlow=function(K){return u(K)};function h(K,A){if((typeof A!="string"||A==="")&&(A="utf8"),!s.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const k=m(K,A)|0;let se=o(k);const fe=se.write(K,A);return fe!==k&&(se=se.slice(0,fe)),se}function y(K){const A=K.length<0?0:v(K.length)|0,k=o(A);for(let se=0;se<A;se+=1)k[se]=K[se]&255;return k}function p(K){if(Ee(K,Uint8Array)){const A=new Uint8Array(K);return f(A.buffer,A.byteOffset,A.byteLength)}return y(K)}function f(K,A,k){if(A<0||K.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<A+(k||0))throw new RangeError('"length" is outside of buffer bounds');let se;return A===void 0&&k===void 0?se=new Uint8Array(K):k===void 0?se=new Uint8Array(K,A):se=new Uint8Array(K,A,k),Object.setPrototypeOf(se,s.prototype),se}function g(K){if(s.isBuffer(K)){const A=v(K.length)|0,k=o(A);return k.length===0||K.copy(k,0,0,A),k}if(K.length!==void 0)return typeof K.length!="number"||Ne(K.length)?o(0):y(K);if(K.type==="Buffer"&&Array.isArray(K.data))return y(K.data)}function v(K){if(K>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return K|0}function b(K){return+K!=K&&(K=0),s.alloc(+K)}s.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==s.prototype},s.compare=function(A,k){if(Ee(A,Uint8Array)&&(A=s.from(A,A.offset,A.byteLength)),Ee(k,Uint8Array)&&(k=s.from(k,k.offset,k.byteLength)),!s.isBuffer(A)||!s.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===k)return 0;let se=A.length,fe=k.length;for(let me=0,be=Math.min(se,fe);me<be;++me)if(A[me]!==k[me]){se=A[me],fe=k[me];break}return se<fe?-1:fe<se?1:0},s.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(A,k){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return s.alloc(0);let se;if(k===void 0)for(k=0,se=0;se<A.length;++se)k+=A[se].length;const fe=s.allocUnsafe(k);let me=0;for(se=0;se<A.length;++se){let be=A[se];if(Ee(be,Uint8Array))me+be.length>fe.length?(s.isBuffer(be)||(be=s.from(be)),be.copy(fe,me)):Uint8Array.prototype.set.call(fe,be,me);else if(s.isBuffer(be))be.copy(fe,me);else throw new TypeError('"list" argument must be an Array of Buffers');me+=be.length}return fe};function m(K,A){if(s.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Ee(K,ArrayBuffer))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const k=K.length,se=arguments.length>2&&arguments[2]===!0;if(!se&&k===0)return 0;let fe=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return ae(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Se(K).length;default:if(fe)return se?-1:ae(K).length;A=(""+A).toLowerCase(),fe=!0}}s.byteLength=m;function w(K,A,k){let se=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,A>>>=0,k<=A))return"";for(K||(K="utf8");;)switch(K){case"hex":return R(this,A,k);case"utf8":case"utf-8":return oe(this,A,k);case"ascii":return q(this,A,k);case"latin1":case"binary":return Q(this,A,k);case"base64":return z(this,A,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,A,k);default:if(se)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),se=!0}}s.prototype._isBuffer=!0;function S(K,A,k){const se=K[A];K[A]=K[k],K[k]=se}s.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<A;k+=2)S(this,k,k+1);return this},s.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<A;k+=4)S(this,k,k+3),S(this,k+1,k+2);return this},s.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<A;k+=8)S(this,k,k+7),S(this,k+1,k+6),S(this,k+2,k+5),S(this,k+3,k+4);return this},s.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?oe(this,0,A):w.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(A){if(!s.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:s.compare(this,A)===0},s.prototype.inspect=function(){let A="";const k=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(A+=" ... "),"<Buffer "+A+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(A,k,se,fe,me){if(Ee(A,Uint8Array)&&(A=s.from(A,A.offset,A.byteLength)),!s.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(k===void 0&&(k=0),se===void 0&&(se=A?A.length:0),fe===void 0&&(fe=0),me===void 0&&(me=this.length),k<0||se>A.length||fe<0||me>this.length)throw new RangeError("out of range index");if(fe>=me&&k>=se)return 0;if(fe>=me)return-1;if(k>=se)return 1;if(k>>>=0,se>>>=0,fe>>>=0,me>>>=0,this===A)return 0;let be=me-fe,Je=se-k;const _t=Math.min(be,Je),Rt=this.slice(fe,me),yt=A.slice(k,se);for(let Pt=0;Pt<_t;++Pt)if(Rt[Pt]!==yt[Pt]){be=Rt[Pt],Je=yt[Pt];break}return be<Je?-1:Je<be?1:0};function T(K,A,k,se,fe){if(K.length===0)return-1;if(typeof k=="string"?(se=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,Ne(k)&&(k=fe?0:K.length-1),k<0&&(k=K.length+k),k>=K.length){if(fe)return-1;k=K.length-1}else if(k<0)if(fe)k=0;else return-1;if(typeof A=="string"&&(A=s.from(A,se)),s.isBuffer(A))return A.length===0?-1:x(K,A,k,se,fe);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(K,A,k):Uint8Array.prototype.lastIndexOf.call(K,A,k):x(K,[A],k,se,fe);throw new TypeError("val must be string, number or Buffer")}function x(K,A,k,se,fe){let me=1,be=K.length,Je=A.length;if(se!==void 0&&(se=String(se).toLowerCase(),se==="ucs2"||se==="ucs-2"||se==="utf16le"||se==="utf-16le")){if(K.length<2||A.length<2)return-1;me=2,be/=2,Je/=2,k/=2}function _t(yt,Pt){return me===1?yt[Pt]:yt.readUInt16BE(Pt*me)}let Rt;if(fe){let yt=-1;for(Rt=k;Rt<be;Rt++)if(_t(K,Rt)===_t(A,yt===-1?0:Rt-yt)){if(yt===-1&&(yt=Rt),Rt-yt+1===Je)return yt*me}else yt!==-1&&(Rt-=Rt-yt),yt=-1}else for(k+Je>be&&(k=be-Je),Rt=k;Rt>=0;Rt--){let yt=!0;for(let Pt=0;Pt<Je;Pt++)if(_t(K,Rt+Pt)!==_t(A,Pt)){yt=!1;break}if(yt)return Rt}return-1}s.prototype.includes=function(A,k,se){return this.indexOf(A,k,se)!==-1},s.prototype.indexOf=function(A,k,se){return T(this,A,k,se,!0)},s.prototype.lastIndexOf=function(A,k,se){return T(this,A,k,se,!1)};function I(K,A,k,se){k=Number(k)||0;const fe=K.length-k;se?(se=Number(se),se>fe&&(se=fe)):se=fe;const me=A.length;se>me/2&&(se=me/2);let be;for(be=0;be<se;++be){const Je=parseInt(A.substr(be*2,2),16);if(Ne(Je))return be;K[k+be]=Je}return be}function M(K,A,k,se){return xe(ae(A,K.length-k),K,k,se)}function H(K,A,k,se){return xe(pe(A),K,k,se)}function re(K,A,k,se){return xe(Se(A),K,k,se)}function J(K,A,k,se){return xe(we(A,K.length-k),K,k,se)}s.prototype.write=function(A,k,se,fe){if(k===void 0)fe="utf8",se=this.length,k=0;else if(se===void 0&&typeof k=="string")fe=k,se=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(se)?(se=se>>>0,fe===void 0&&(fe="utf8")):(fe=se,se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const me=this.length-k;if((se===void 0||se>me)&&(se=me),A.length>0&&(se<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let be=!1;for(;;)switch(fe){case"hex":return I(this,A,k,se);case"utf8":case"utf-8":return M(this,A,k,se);case"ascii":case"latin1":case"binary":return H(this,A,k,se);case"base64":return re(this,A,k,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,A,k,se);default:if(be)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),be=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(K,A,k){return A===0&&k===K.length?e.fromByteArray(K):e.fromByteArray(K.slice(A,k))}function oe(K,A,k){k=Math.min(K.length,k);const se=[];let fe=A;for(;fe<k;){const me=K[fe];let be=null,Je=me>239?4:me>223?3:me>191?2:1;if(fe+Je<=k){let _t,Rt,yt,Pt;switch(Je){case 1:me<128&&(be=me);break;case 2:_t=K[fe+1],(_t&192)===128&&(Pt=(me&31)<<6|_t&63,Pt>127&&(be=Pt));break;case 3:_t=K[fe+1],Rt=K[fe+2],(_t&192)===128&&(Rt&192)===128&&(Pt=(me&15)<<12|(_t&63)<<6|Rt&63,Pt>2047&&(Pt<55296||Pt>57343)&&(be=Pt));break;case 4:_t=K[fe+1],Rt=K[fe+2],yt=K[fe+3],(_t&192)===128&&(Rt&192)===128&&(yt&192)===128&&(Pt=(me&15)<<18|(_t&63)<<12|(Rt&63)<<6|yt&63,Pt>65535&&Pt<1114112&&(be=Pt))}}be===null?(be=65533,Je=1):be>65535&&(be-=65536,se.push(be>>>10&1023|55296),be=56320|be&1023),se.push(be),fe+=Je}return V(se)}const C=4096;function V(K){const A=K.length;if(A<=C)return String.fromCharCode.apply(String,K);let k="",se=0;for(;se<A;)k+=String.fromCharCode.apply(String,K.slice(se,se+=C));return k}function q(K,A,k){let se="";k=Math.min(K.length,k);for(let fe=A;fe<k;++fe)se+=String.fromCharCode(K[fe]&127);return se}function Q(K,A,k){let se="";k=Math.min(K.length,k);for(let fe=A;fe<k;++fe)se+=String.fromCharCode(K[fe]);return se}function R(K,A,k){const se=K.length;(!A||A<0)&&(A=0),(!k||k<0||k>se)&&(k=se);let fe="";for(let me=A;me<k;++me)fe+=Qe[K[me]];return fe}function B(K,A,k){const se=K.slice(A,k);let fe="";for(let me=0;me<se.length-1;me+=2)fe+=String.fromCharCode(se[me]+se[me+1]*256);return fe}s.prototype.slice=function(A,k){const se=this.length;A=~~A,k=k===void 0?se:~~k,A<0?(A+=se,A<0&&(A=0)):A>se&&(A=se),k<0?(k+=se,k<0&&(k=0)):k>se&&(k=se),k<A&&(k=A);const fe=this.subarray(A,k);return Object.setPrototypeOf(fe,s.prototype),fe};function D(K,A,k){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+A>k)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(A,k,se){A=A>>>0,k=k>>>0,se||D(A,k,this.length);let fe=this[A],me=1,be=0;for(;++be<k&&(me*=256);)fe+=this[A+be]*me;return fe},s.prototype.readUintBE=s.prototype.readUIntBE=function(A,k,se){A=A>>>0,k=k>>>0,se||D(A,k,this.length);let fe=this[A+--k],me=1;for(;k>0&&(me*=256);)fe+=this[A+--k]*me;return fe},s.prototype.readUint8=s.prototype.readUInt8=function(A,k){return A=A>>>0,k||D(A,1,this.length),this[A]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(A,k){return A=A>>>0,k||D(A,2,this.length),this[A]|this[A+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(A,k){return A=A>>>0,k||D(A,2,this.length),this[A]<<8|this[A+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(A,k){return A=A>>>0,k||D(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(A,k){return A=A>>>0,k||D(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},s.prototype.readBigUInt64LE=ie(function(A){A=A>>>0,P(A,"offset");const k=this[A],se=this[A+7];(k===void 0||se===void 0)&&j(A,this.length-8);const fe=k+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,me=this[++A]+this[++A]*2**8+this[++A]*2**16+se*2**24;return BigInt(fe)+(BigInt(me)<<BigInt(32))}),s.prototype.readBigUInt64BE=ie(function(A){A=A>>>0,P(A,"offset");const k=this[A],se=this[A+7];(k===void 0||se===void 0)&&j(A,this.length-8);const fe=k*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],me=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+se;return(BigInt(fe)<<BigInt(32))+BigInt(me)}),s.prototype.readIntLE=function(A,k,se){A=A>>>0,k=k>>>0,se||D(A,k,this.length);let fe=this[A],me=1,be=0;for(;++be<k&&(me*=256);)fe+=this[A+be]*me;return me*=128,fe>=me&&(fe-=Math.pow(2,8*k)),fe},s.prototype.readIntBE=function(A,k,se){A=A>>>0,k=k>>>0,se||D(A,k,this.length);let fe=k,me=1,be=this[A+--fe];for(;fe>0&&(me*=256);)be+=this[A+--fe]*me;return me*=128,be>=me&&(be-=Math.pow(2,8*k)),be},s.prototype.readInt8=function(A,k){return A=A>>>0,k||D(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},s.prototype.readInt16LE=function(A,k){A=A>>>0,k||D(A,2,this.length);const se=this[A]|this[A+1]<<8;return se&32768?se|4294901760:se},s.prototype.readInt16BE=function(A,k){A=A>>>0,k||D(A,2,this.length);const se=this[A+1]|this[A]<<8;return se&32768?se|4294901760:se},s.prototype.readInt32LE=function(A,k){return A=A>>>0,k||D(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},s.prototype.readInt32BE=function(A,k){return A=A>>>0,k||D(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},s.prototype.readBigInt64LE=ie(function(A){A=A>>>0,P(A,"offset");const k=this[A],se=this[A+7];(k===void 0||se===void 0)&&j(A,this.length-8);const fe=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(se<<24);return(BigInt(fe)<<BigInt(32))+BigInt(k+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),s.prototype.readBigInt64BE=ie(function(A){A=A>>>0,P(A,"offset");const k=this[A],se=this[A+7];(k===void 0||se===void 0)&&j(A,this.length-8);const fe=(k<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(fe)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+se)}),s.prototype.readFloatLE=function(A,k){return A=A>>>0,k||D(A,4,this.length),r.read(this,A,!0,23,4)},s.prototype.readFloatBE=function(A,k){return A=A>>>0,k||D(A,4,this.length),r.read(this,A,!1,23,4)},s.prototype.readDoubleLE=function(A,k){return A=A>>>0,k||D(A,8,this.length),r.read(this,A,!0,52,8)},s.prototype.readDoubleBE=function(A,k){return A=A>>>0,k||D(A,8,this.length),r.read(this,A,!1,52,8)};function G(K,A,k,se,fe,me){if(!s.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>fe||A<me)throw new RangeError('"value" argument is out of bounds');if(k+se>K.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(A,k,se,fe){if(A=+A,k=k>>>0,se=se>>>0,!fe){const Je=Math.pow(2,8*se)-1;G(this,A,k,se,Je,0)}let me=1,be=0;for(this[k]=A&255;++be<se&&(me*=256);)this[k+be]=A/me&255;return k+se},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(A,k,se,fe){if(A=+A,k=k>>>0,se=se>>>0,!fe){const Je=Math.pow(2,8*se)-1;G(this,A,k,se,Je,0)}let me=se-1,be=1;for(this[k+me]=A&255;--me>=0&&(be*=256);)this[k+me]=A/be&255;return k+se},s.prototype.writeUint8=s.prototype.writeUInt8=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,1,255,0),this[k]=A&255,k+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,2,65535,0),this[k]=A&255,this[k+1]=A>>>8,k+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,2,65535,0),this[k]=A>>>8,this[k+1]=A&255,k+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,4,4294967295,0),this[k+3]=A>>>24,this[k+2]=A>>>16,this[k+1]=A>>>8,this[k]=A&255,k+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,4,4294967295,0),this[k]=A>>>24,this[k+1]=A>>>16,this[k+2]=A>>>8,this[k+3]=A&255,k+4};function Z(K,A,k,se,fe){L(A,se,fe,K,k,7);let me=Number(A&BigInt(4294967295));K[k++]=me,me=me>>8,K[k++]=me,me=me>>8,K[k++]=me,me=me>>8,K[k++]=me;let be=Number(A>>BigInt(32)&BigInt(4294967295));return K[k++]=be,be=be>>8,K[k++]=be,be=be>>8,K[k++]=be,be=be>>8,K[k++]=be,k}function N(K,A,k,se,fe){L(A,se,fe,K,k,7);let me=Number(A&BigInt(4294967295));K[k+7]=me,me=me>>8,K[k+6]=me,me=me>>8,K[k+5]=me,me=me>>8,K[k+4]=me;let be=Number(A>>BigInt(32)&BigInt(4294967295));return K[k+3]=be,be=be>>8,K[k+2]=be,be=be>>8,K[k+1]=be,be=be>>8,K[k]=be,k+8}s.prototype.writeBigUInt64LE=ie(function(A,k=0){return Z(this,A,k,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ie(function(A,k=0){return N(this,A,k,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(A,k,se,fe){if(A=+A,k=k>>>0,!fe){const _t=Math.pow(2,8*se-1);G(this,A,k,se,_t-1,-_t)}let me=0,be=1,Je=0;for(this[k]=A&255;++me<se&&(be*=256);)A<0&&Je===0&&this[k+me-1]!==0&&(Je=1),this[k+me]=(A/be>>0)-Je&255;return k+se},s.prototype.writeIntBE=function(A,k,se,fe){if(A=+A,k=k>>>0,!fe){const _t=Math.pow(2,8*se-1);G(this,A,k,se,_t-1,-_t)}let me=se-1,be=1,Je=0;for(this[k+me]=A&255;--me>=0&&(be*=256);)A<0&&Je===0&&this[k+me+1]!==0&&(Je=1),this[k+me]=(A/be>>0)-Je&255;return k+se},s.prototype.writeInt8=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,1,127,-128),A<0&&(A=255+A+1),this[k]=A&255,k+1},s.prototype.writeInt16LE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,2,32767,-32768),this[k]=A&255,this[k+1]=A>>>8,k+2},s.prototype.writeInt16BE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,2,32767,-32768),this[k]=A>>>8,this[k+1]=A&255,k+2},s.prototype.writeInt32LE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,4,2147483647,-2147483648),this[k]=A&255,this[k+1]=A>>>8,this[k+2]=A>>>16,this[k+3]=A>>>24,k+4},s.prototype.writeInt32BE=function(A,k,se){return A=+A,k=k>>>0,se||G(this,A,k,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[k]=A>>>24,this[k+1]=A>>>16,this[k+2]=A>>>8,this[k+3]=A&255,k+4},s.prototype.writeBigInt64LE=ie(function(A,k=0){return Z(this,A,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ie(function(A,k=0){return N(this,A,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function W(K,A,k,se,fe,me){if(k+se>K.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function O(K,A,k,se,fe){return A=+A,k=k>>>0,fe||W(K,A,k,4),r.write(K,A,k,se,23,4),k+4}s.prototype.writeFloatLE=function(A,k,se){return O(this,A,k,!0,se)},s.prototype.writeFloatBE=function(A,k,se){return O(this,A,k,!1,se)};function F(K,A,k,se,fe){return A=+A,k=k>>>0,fe||W(K,A,k,8),r.write(K,A,k,se,52,8),k+8}s.prototype.writeDoubleLE=function(A,k,se){return F(this,A,k,!0,se)},s.prototype.writeDoubleBE=function(A,k,se){return F(this,A,k,!1,se)},s.prototype.copy=function(A,k,se,fe){if(!s.isBuffer(A))throw new TypeError("argument should be a Buffer");if(se||(se=0),!fe&&fe!==0&&(fe=this.length),k>=A.length&&(k=A.length),k||(k=0),fe>0&&fe<se&&(fe=se),fe===se||A.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(se<0||se>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),A.length-k<fe-se&&(fe=A.length-k+se);const me=fe-se;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,se,fe):Uint8Array.prototype.set.call(A,this.subarray(se,fe),k),me},s.prototype.fill=function(A,k,se,fe){if(typeof A=="string"){if(typeof k=="string"?(fe=k,k=0,se=this.length):typeof se=="string"&&(fe=se,se=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!s.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(A.length===1){const be=A.charCodeAt(0);(fe==="utf8"&&be<128||fe==="latin1")&&(A=be)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(k<0||this.length<k||this.length<se)throw new RangeError("Out of range index");if(se<=k)return this;k=k>>>0,se=se===void 0?this.length:se>>>0,A||(A=0);let me;if(typeof A=="number")for(me=k;me<se;++me)this[me]=A;else{const be=s.isBuffer(A)?A:s.from(A,fe),Je=be.length;if(Je===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(me=0;me<se-k;++me)this[me+k]=be[me%Je]}return this};const Y={};function ee(K,A,k){Y[K]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(K,A){return`The "${K}" argument must be of type number. Received type ${typeof A}`},TypeError),ee("ERR_OUT_OF_RANGE",function(K,A,k){let se=`The value of "${K}" is out of range.`,fe=k;return Number.isInteger(k)&&Math.abs(k)>2**32?fe=te(String(k)):typeof k=="bigint"&&(fe=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(fe=te(fe)),fe+="n"),se+=` It must be ${A}. Received ${fe}`,se},RangeError);function te(K){let A="",k=K.length;const se=K[0]==="-"?1:0;for(;k>=se+4;k-=3)A=`_${K.slice(k-3,k)}${A}`;return`${K.slice(0,k)}${A}`}function U(K,A,k){P(A,"offset"),(K[A]===void 0||K[A+k]===void 0)&&j(A,K.length-(k+1))}function L(K,A,k,se,fe,me){if(K>k||K<A){const be=typeof A=="bigint"?"n":"";let Je;throw A===0||A===BigInt(0)?Je=`>= 0${be} and < 2${be} ** ${(me+1)*8}${be}`:Je=`>= -(2${be} ** ${(me+1)*8-1}${be}) and < 2 ** ${(me+1)*8-1}${be}`,new Y.ERR_OUT_OF_RANGE("value",Je,K)}U(se,fe,me)}function P(K,A){if(typeof K!="number")throw new Y.ERR_INVALID_ARG_TYPE(A,"number",K)}function j(K,A,k){throw Math.floor(K)!==K?(P(K,k),new Y.ERR_OUT_OF_RANGE("offset","an integer",K)):A<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${A}`,K)}const X=/[^+/0-9A-Za-z-_]/g;function ne(K){if(K=K.split("=")[0],K=K.trim().replace(X,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function ae(K,A){A=A||1/0;let k;const se=K.length;let fe=null;const me=[];for(let be=0;be<se;++be){if(k=K.charCodeAt(be),k>55295&&k<57344){if(!fe){if(k>56319){(A-=3)>-1&&me.push(239,191,189);continue}else if(be+1===se){(A-=3)>-1&&me.push(239,191,189);continue}fe=k;continue}if(k<56320){(A-=3)>-1&&me.push(239,191,189),fe=k;continue}k=(fe-55296<<10|k-56320)+65536}else fe&&(A-=3)>-1&&me.push(239,191,189);if(fe=null,k<128){if((A-=1)<0)break;me.push(k)}else if(k<2048){if((A-=2)<0)break;me.push(k>>6|192,k&63|128)}else if(k<65536){if((A-=3)<0)break;me.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((A-=4)<0)break;me.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return me}function pe(K){const A=[];for(let k=0;k<K.length;++k)A.push(K.charCodeAt(k)&255);return A}function we(K,A){let k,se,fe;const me=[];for(let be=0;be<K.length&&!((A-=2)<0);++be)k=K.charCodeAt(be),se=k>>8,fe=k%256,me.push(fe),me.push(se);return me}function Se(K){return e.toByteArray(ne(K))}function xe(K,A,k,se){let fe;for(fe=0;fe<se&&!(fe+k>=A.length||fe>=K.length);++fe)A[fe+k]=K[fe];return fe}function Ee(K,A){return K instanceof A||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===A.name}function Ne(K){return K!==K}const Qe=function(){const K="0123456789abcdef",A=new Array(256);for(let k=0;k<16;++k){const se=k*16;for(let fe=0;fe<16;++fe)A[se+fe]=K[k]+K[fe]}return A}();function ie(K){return typeof BigInt>"u"?ce:K}function ce(){throw new Error("BigInt not supported")}})(Dr);var Mr={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},L5={exports:{}},Mh={exports:{}},CA;function Id(){if(CA)return Mh.exports;CA=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Mh.exports=t,Mh.exports.AbortSignal=e,Mh.exports.default=t,Mh.exports}var EE={exports:{}},hf=typeof Reflect=="object"?Reflect:null,NA=hf&&typeof hf.apply=="function"?hf.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},hg;hf&&typeof hf.ownKeys=="function"?hg=hf.ownKeys:Object.getOwnPropertySymbols?hg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:hg=function(e){return Object.getOwnPropertyNames(e)};function EK(t){console&&console.warn&&console.warn(t)}var U5=Number.isNaN||function(e){return e!==e};function nr(){nr.init.call(this)}EE.exports=nr;EE.exports.once=AK;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var BA=10;function mw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return BA},set:function(t){if(typeof t!="number"||t<0||U5(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");BA=t}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||U5(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function F5(t){return t._maxListeners===void 0?nr.defaultMaxListeners:t._maxListeners}nr.prototype.getMaxListeners=function(){return F5(this)};nr.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var d=a[e];if(d===void 0)return!1;if(typeof d=="function")NA(d,this,r);else for(var l=d.length,c=H5(d,l),n=0;n<l;++n)NA(c[n],this,r);return!0};function z5(t,e,r,n){var i,a,o;if(mw(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=F5(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,EK(s)}return t}nr.prototype.addListener=function(e,r){return z5(this,e,r,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(e,r){return z5(this,e,r,!0)};function SK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q5(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=SK.bind(n);return i.listener=r,n.wrapFn=i,i}nr.prototype.once=function(e,r){return mw(r),this.on(e,q5(this,e,r)),this};nr.prototype.prependOnceListener=function(e,r){return mw(r),this.prependListener(e,q5(this,e,r)),this};nr.prototype.removeListener=function(e,r){var n,i,a,o,s;if(mw(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():$K(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function K5(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?TK(i):H5(i,i.length)}nr.prototype.listeners=function(e){return K5(this,e,!0)};nr.prototype.rawListeners=function(e){return K5(this,e,!1)};nr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):V5.call(t,e)};nr.prototype.listenerCount=V5;function V5(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?hg(this._events):[]};function H5(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function $K(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function TK(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function AK(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}G5(t,e,a,{once:!0}),e!=="error"&&PK(t,i,{once:!0})})}function PK(t,e,r){typeof t.on=="function"&&G5(t,"error",e,r)}function G5(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var fa=EE.exports;(function(t){const e=Dr,{kResistStopPropagation:r,SymbolDispose:n}=Mr,i=globalThis.AbortSignal||Id().AbortSignal,a=globalThis.AbortController||Id().AbortController,o=Object.getPrototypeOf(async function(){}).constructor,s=globalThis.Blob||e.Blob,d=typeof s<"u"?function(y){return y instanceof s}:function(y){return!1},l=(h,y)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE(y,"AbortSignal",h)},c=(h,y)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE(y,"Function",h)};class u extends Error{constructor(y){if(!Array.isArray(y))throw new TypeError(`Expected input to be an Array, got ${typeof y}`);let p="";for(let f=0;f<y.length;f++)p+=`    ${y[f].stack}
`;super(p),this.name="AggregateError",this.errors=y}}t.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(h){let y=!1;return function(...p){y||(y=!0,h.apply(this,p))}},createDeferredPromise:function(){let h,y;return{promise:new Promise((f,g)=>{h=f,y=g}),resolve:h,reject:y}},promisify(h){return new Promise((y,p)=>{h((f,...g)=>f?p(f):y(...g))})},debuglog(){return function(){}},format(h,...y){return h.replace(/%([sdifj])/g,function(...[p,f]){const g=y.shift();return f==="f"?g.toFixed(6):f==="j"?JSON.stringify(g):f==="s"&&typeof g=="object"?`${g.constructor!==Object?g.constructor.name:""} {}`.trim():g.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}},types:{isAsyncFunction(h){return h instanceof o},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:d,deprecate(h,y){return h},addAbortListener:fa.addAbortListener||function(y,p){if(y===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",y);l(y,"signal"),c(p,"listener");let f;return y.aborted?queueMicrotask(()=>p()):(y.addEventListener("abort",p,{__proto__:null,once:!0,[r]:!0}),f=()=>{y.removeEventListener("abort",p)}),{__proto__:null,[n](){var g;(g=f)===null||g===void 0||g()}}},AbortSignalAny:i.any||function(y){if(y.length===1)return y[0];const p=new a,f=()=>p.abort();return y.forEach(g=>{l(g,"signals"),g.addEventListener("abort",f,{once:!0})}),p.signal.addEventListener("abort",()=>{y.forEach(g=>g.removeEventListener("abort",f))},{once:!0}),p.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(L5);var Bi=L5.exports,SE={};const{format:xK,inspect:a0,AggregateError:IK}=Bi,kK=globalThis.AggregateError||IK,OK=Symbol("kIsNodeError"),RK=["string","function","number","object","Function","Object","boolean","bigint","symbol"],jK=/^([A-Z][a-z0-9]*)+$/,CK="__node_internal_",gw={};function zl(t,e){if(!t)throw new gw.ERR_INTERNAL_ASSERTION(e)}function DA(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function NK(t,e,r){if(typeof e=="function")return zl(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return zl(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:xK(e,...r)}function ti(t,e,r){r||(r=Error);class n extends r{constructor(...a){super(NK(t,e,a))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[OK]=!0,gw[t]=n}function MA(t){const e=CK+t.name;return Object.defineProperty(t,"name",{value:e}),t}function BK(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new kK([e,t],e.message);return r.code=e.code,r}return t||e}let DK=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new gw.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ti("ERR_ASSERTION","%s",Error);ti("ERR_INVALID_ARG_TYPE",(t,e,r)=>{zl(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const i=[],a=[],o=[];for(const d of e)zl(typeof d=="string","All expected entries have to be of type string"),RK.includes(d)?i.push(d.toLowerCase()):jK.test(d)?a.push(d):(zl(d!=="object",'The value "object" should be written as "Object"'),o.push(d));if(a.length>0){const d=i.indexOf("object");d!==-1&&(i.splice(i,d,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const d=i.pop();n+=`one of type ${i.join(", ")}, or ${d}`}}(a.length>0||o.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const d=a.pop();n+=`an instance of ${a.join(", ")}, or ${d}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const d=o.pop();n+=`one of ${o.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var s;if((s=r.constructor)!==null&&s!==void 0&&s.name)n+=`. Received an instance of ${r.constructor.name}`;else{const d=a0(r,{depth:-1});n+=`. Received ${d}`}}else{let d=a0(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);ti("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=a0(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ti("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ti("ERR_MISSING_ARGS",(...t)=>{zl(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ti("ERR_OUT_OF_RANGE",(t,e,r)=>{zl(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=DA(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=DA(n)),n+="n"):n=a0(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ti("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ti("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ti("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ti("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ti("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ti("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ti("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ti("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ti("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ti("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ti("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Ki={AbortError:DK,aggregateTwoErrors:MA(BK),hideStackFrames:MA,codes:gw};const{ArrayIsArray:$E,ArrayPrototypeIncludes:W5,ArrayPrototypeJoin:Y5,ArrayPrototypeMap:MK,NumberIsInteger:TE,NumberIsNaN:LK,NumberMAX_SAFE_INTEGER:UK,NumberMIN_SAFE_INTEGER:FK,NumberParseInt:zK,ObjectPrototypeHasOwnProperty:qK,RegExpPrototypeExec:Z5,String:KK,StringPrototypeToUpperCase:VK,StringPrototypeTrim:HK}=Mr,{hideStackFrames:Go,codes:{ERR_SOCKET_BAD_PORT:GK,ERR_INVALID_ARG_TYPE:vi,ERR_INVALID_ARG_VALUE:ch,ERR_OUT_OF_RANGE:ru,ERR_UNKNOWN_SIGNAL:LA}}=Ki,{normalizeEncoding:WK}=Bi,{isAsyncFunction:YK,isArrayBufferView:ZK}=Bi.types,UA={};function XK(t){return t===(t|0)}function QK(t){return t===t>>>0}const JK=/^[0-7]+$/,eV="must be a 32-bit unsigned integer or an octal string";function tV(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Z5(JK,t)===null)throw new ch(e,t,eV);t=zK(t,8)}return X5(t,e),t}const rV=Go((t,e,r=FK,n=UK)=>{if(typeof t!="number")throw new vi(e,"number",t);if(!TE(t))throw new ru(e,"an integer",t);if(t<r||t>n)throw new ru(e,`>= ${r} && <= ${n}`,t)}),nV=Go((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new vi(e,"number",t);if(!TE(t))throw new ru(e,"an integer",t);if(t<r||t>n)throw new ru(e,`>= ${r} && <= ${n}`,t)}),X5=Go((t,e,r=!1)=>{if(typeof t!="number")throw new vi(e,"number",t);if(!TE(t))throw new ru(e,"an integer",t);const n=r?1:0,i=4294967295;if(t<n||t>i)throw new ru(e,`>= ${n} && <= ${i}`,t)});function AE(t,e){if(typeof t!="string")throw new vi(e,"string",t)}function iV(t,e,r=void 0,n){if(typeof t!="number")throw new vi(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&LK(t))throw new ru(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const oV=Go((t,e,r)=>{if(!W5(r,t)){const i="must be one of: "+Y5(MK(r,a=>typeof a=="string"?`'${a}'`:KK(a)),", ");throw new ch(e,t,i)}});function Q5(t,e){if(typeof t!="boolean")throw new vi(e,"boolean",t)}function Wb(t,e,r){return t==null||!qK(t,e)?r:t[e]}const sV=Go((t,e,r=null)=>{const n=Wb(r,"allowArray",!1),i=Wb(r,"allowFunction",!1);if(!Wb(r,"nullable",!1)&&t===null||!n&&$E(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new vi(e,"Object",t)}),aV=Go((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new vi(e,"a dictionary",t)}),ww=Go((t,e,r=0)=>{if(!$E(t))throw new vi(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new ch(e,t,n)}});function cV(t,e){ww(t,e);for(let r=0;r<t.length;r++)AE(t[r],`${e}[${r}]`)}function dV(t,e){ww(t,e);for(let r=0;r<t.length;r++)Q5(t[r],`${e}[${r}]`)}function lV(t,e){ww(t,e);for(let r=0;r<t.length;r++){const n=t[r],i=`${e}[${r}]`;if(n==null)throw new vi(i,"AbortSignal",n);J5(n,i)}}function uV(t,e="signal"){if(AE(t,e),UA[t]===void 0)throw UA[VK(t)]!==void 0?new LA(t+" (signals must use all capital letters)"):new LA(t)}const fV=Go((t,e="buffer")=>{if(!ZK(t))throw new vi(e,["Buffer","TypedArray","DataView"],t)});function hV(t,e){const r=WK(e),n=t.length;if(r==="hex"&&n%2!==0)throw new ch("encoding",e,`is invalid for data of length ${n}`)}function pV(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&HK(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new GK(e,t,r);return t|0}const J5=Go((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new vi(e,"AbortSignal",t)}),yV=Go((t,e)=>{if(typeof t!="function")throw new vi(e,"Function",t)}),mV=Go((t,e)=>{if(typeof t!="function"||YK(t))throw new vi(e,"Function",t)}),gV=Go((t,e)=>{if(t!==void 0)throw new vi(e,"undefined",t)});function wV(t,e,r){if(!W5(r,t))throw new vi(e,`('${Y5(r,"|")}')`,t)}const bV=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function FA(t,e){if(typeof t>"u"||!Z5(bV,t))throw new ch(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function vV(t){if(typeof t=="string")return FA(t,"hints"),t;if($E(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const i=t[n];FA(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new ch("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Ay={isInt32:XK,isUint32:QK,parseFileMode:tV,validateArray:ww,validateStringArray:cV,validateBooleanArray:dV,validateAbortSignalArray:lV,validateBoolean:Q5,validateBuffer:fV,validateDictionary:aV,validateEncoding:hV,validateFunction:yV,validateInt32:nV,validateInteger:rV,validateNumber:iV,validateObject:sV,validateOneOf:oV,validatePlainFunction:mV,validatePort:pV,validateSignalName:uV,validateString:AE,validateUint32:X5,validateUndefined:gV,validateUnion:wV,validateAbortSignal:J5,validateLinkHeaderValue:vV},PE={exports:{}},eR={exports:{}},Zr=eR.exports={},Ds,Ms;function n_(){throw new Error("setTimeout has not been defined")}function i_(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ds=setTimeout:Ds=n_}catch{Ds=n_}try{typeof clearTimeout=="function"?Ms=clearTimeout:Ms=i_}catch{Ms=i_}})();function tR(t){if(Ds===setTimeout)return setTimeout(t,0);if((Ds===n_||!Ds)&&setTimeout)return Ds=setTimeout,setTimeout(t,0);try{return Ds(t,0)}catch{try{return Ds.call(null,t,0)}catch{return Ds.call(this,t,0)}}}function _V(t){if(Ms===clearTimeout)return clearTimeout(t);if((Ms===i_||!Ms)&&clearTimeout)return Ms=clearTimeout,clearTimeout(t);try{return Ms(t)}catch{try{return Ms.call(null,t)}catch{return Ms.call(this,t)}}}var Ga=[],pf=!1,Ol,pg=-1;function EV(){!pf||!Ol||(pf=!1,Ol.length?Ga=Ol.concat(Ga):pg=-1,Ga.length&&rR())}function rR(){if(!pf){var t=tR(EV);pf=!0;for(var e=Ga.length;e;){for(Ol=Ga,Ga=[];++pg<e;)Ol&&Ol[pg].run();pg=-1,e=Ga.length}Ol=null,pf=!1,_V(t)}}Zr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Ga.push(new nR(t,e)),Ga.length===1&&!pf&&tR(rR)};function nR(t,e){this.fun=t,this.array=e}nR.prototype.run=function(){this.fun.apply(null,this.array)};Zr.title="browser";Zr.browser=!0;Zr.env={};Zr.argv=[];Zr.version="";Zr.versions={};function gc(){}Zr.on=gc;Zr.addListener=gc;Zr.once=gc;Zr.off=gc;Zr.removeListener=gc;Zr.removeAllListeners=gc;Zr.emit=gc;Zr.prependListener=gc;Zr.prependOnceListener=gc;Zr.listeners=function(t){return[]};Zr.binding=function(t){throw new Error("process.binding is not supported")};Zr.cwd=function(){return"/"};Zr.chdir=function(t){throw new Error("process.chdir is not supported")};Zr.umask=function(){return 0};var Vi=eR.exports;const{SymbolAsyncIterator:zA,SymbolIterator:qA,SymbolFor:Eu}=Mr,iR=Eu("nodejs.stream.destroyed"),oR=Eu("nodejs.stream.errored"),o_=Eu("nodejs.stream.readable"),s_=Eu("nodejs.stream.writable"),sR=Eu("nodejs.stream.disturbed"),SV=Eu("nodejs.webstream.isClosedPromise"),$V=Eu("nodejs.webstream.controllerErrorFunction");function bw(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function vw(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function TV(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ha(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function aR(t){return!!(t&&!ha(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function cR(t){return!!(t&&!ha(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function dR(t){return!!(t&&!ha(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function AV(t){return aR(t)||cR(t)||dR(t)}function PV(t,e){return t==null?!1:e===!0?typeof t[zA]=="function":e===!1?typeof t[qA]=="function":typeof t[zA]=="function"||typeof t[qA]=="function"}function _w(t){if(!ha(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[iR]||n!=null&&n.destroyed)}function lR(t){if(!vw(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function xV(t,e){if(!vw(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function IV(t){if(!bw(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function uR(t,e){if(!bw(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function fR(t){return t&&t[o_]!=null?t[o_]:typeof t?.readable!="boolean"?null:_w(t)?!1:bw(t)&&t.readable&&!uR(t)}function hR(t){return t&&t[s_]!=null?t[s_]:typeof t?.writable!="boolean"?null:_w(t)?!1:vw(t)&&t.writable&&!lR(t)}function kV(t,e){return ha(t)?_w(t)?!0:!(e?.readable!==!1&&fR(t)||e?.writable!==!1&&hR(t)):null}function OV(t){var e,r;return ha(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function RV(t){var e,r;return ha(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function jV(t){if(!ha(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&pR(t)?t._closed:null}function pR(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function yR(t){return typeof t._sent100=="boolean"&&pR(t)}function CV(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function NV(t){if(!ha(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&yR(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function BV(t){var e;return!!(t&&((e=t[sR])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function DV(t){var e,r,n,i,a,o,s,d,l,c;return!!(t&&((e=(r=(n=(i=(a=(o=t[oR])!==null&&o!==void 0?o:t.readableErrored)!==null&&a!==void 0?a:t.writableErrored)!==null&&i!==void 0?i:(s=t._readableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&n!==void 0?n:(d=t._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}var wc={isDestroyed:_w,kIsDestroyed:iR,isDisturbed:BV,kIsDisturbed:sR,isErrored:DV,kIsErrored:oR,isReadable:fR,kIsReadable:o_,kIsClosedPromise:SV,kControllerErrorFunction:$V,kIsWritable:s_,isClosed:jV,isDuplexNodeStream:TV,isFinished:kV,isIterable:PV,isReadableNodeStream:bw,isReadableStream:aR,isReadableEnded:IV,isReadableFinished:uR,isReadableErrored:RV,isNodeStream:ha,isWebStream:AV,isWritable:hR,isWritableNodeStream:vw,isWritableStream:cR,isWritableEnded:lR,isWritableFinished:xV,isWritableErrored:OV,isServerRequest:CV,isServerResponse:yR,willEmitClose:NV,isTransformStream:dR};const td=Vi,{AbortError:mR,codes:MV}=Ki,{ERR_INVALID_ARG_TYPE:LV,ERR_STREAM_PREMATURE_CLOSE:KA}=MV,{kEmptyObject:a_,once:c_}=Bi,{validateAbortSignal:UV,validateFunction:FV,validateObject:zV,validateBoolean:qV}=Ay,{Promise:KV,PromisePrototypeThen:VV,SymbolDispose:gR}=Mr,{isClosed:HV,isReadable:VA,isReadableNodeStream:Yb,isReadableStream:GV,isReadableFinished:HA,isReadableErrored:GA,isWritable:WA,isWritableNodeStream:YA,isWritableStream:WV,isWritableFinished:ZA,isWritableErrored:XA,isNodeStream:YV,willEmitClose:ZV,kIsClosedPromise:XV}=wc;let yf;function QV(t){return t.setHeader&&typeof t.abort=="function"}const d_=()=>{};function wR(t,e,r){var n,i;if(arguments.length===2?(r=e,e=a_):e==null?e=a_:zV(e,"options"),FV(r,"callback"),UV(e.signal,"options.signal"),r=c_(r),GV(t)||WV(t))return JV(t,e,r);if(!YV(t))throw new LV("stream",["ReadableStream","WritableStream","Stream"],t);const a=(n=e.readable)!==null&&n!==void 0?n:Yb(t),o=(i=e.writable)!==null&&i!==void 0?i:YA(t),s=t._writableState,d=t._readableState,l=()=>{t.writable||h()};let c=ZV(t)&&Yb(t)===a&&YA(t)===o,u=ZA(t,!1);const h=()=>{u=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||a))&&(!a||y)&&r.call(t)};let y=HA(t,!1);const p=()=>{y=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||o))&&(!o||u)&&r.call(t)},f=S=>{r.call(t,S)};let g=HV(t);const v=()=>{g=!0;const S=XA(t)||GA(t);if(S&&typeof S!="boolean")return r.call(t,S);if(a&&!y&&Yb(t,!0)&&!HA(t,!1))return r.call(t,new KA);if(o&&!u&&!ZA(t,!1))return r.call(t,new KA);r.call(t)},b=()=>{g=!0;const S=XA(t)||GA(t);if(S&&typeof S!="boolean")return r.call(t,S);r.call(t)},m=()=>{t.req.on("finish",h)};QV(t)?(t.on("complete",h),c||t.on("abort",v),t.req?m():t.on("request",m)):o&&!s&&(t.on("end",l),t.on("close",l)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",v),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",f),t.on("close",v),g?td.nextTick(v):s!=null&&s.errorEmitted||d!=null&&d.errorEmitted?c||td.nextTick(b):(!a&&(!c||VA(t))&&(u||WA(t)===!1)||!o&&(!c||WA(t))&&(y||VA(t)===!1)||d&&t.req&&t.aborted)&&td.nextTick(b);const w=()=>{r=d_,t.removeListener("aborted",v),t.removeListener("complete",h),t.removeListener("abort",v),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",f),t.removeListener("close",v)};if(e.signal&&!g){const S=()=>{const T=r;w(),T.call(t,new mR(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)td.nextTick(S);else{yf=yf||Bi.addAbortListener;const T=yf(e.signal,S),x=r;r=c_((...I)=>{T[gR](),x.apply(t,I)})}}return w}function JV(t,e,r){let n=!1,i=d_;if(e.signal)if(i=()=>{n=!0,r.call(t,new mR(void 0,{cause:e.signal.reason}))},e.signal.aborted)td.nextTick(i);else{yf=yf||Bi.addAbortListener;const o=yf(e.signal,i),s=r;r=c_((...d)=>{o[gR](),s.apply(t,d)})}const a=(...o)=>{n||td.nextTick(()=>r.apply(t,o))};return VV(t[XV].promise,a,a),d_}function eH(t,e){var r;let n=!1;return e===null&&(e=a_),(r=e)!==null&&r!==void 0&&r.cleanup&&(qV(e.cleanup,"cleanup"),n=e.cleanup),new KV((i,a)=>{const o=wR(t,e,s=>{n&&o(),s?a(s):i()})})}PE.exports=wR;PE.exports.finished=eH;var Ud=PE.exports;const Ws=Vi,{aggregateTwoErrors:tH,codes:{ERR_MULTIPLE_CALLBACK:rH},AbortError:nH}=Ki,{Symbol:bR}=Mr,{kIsDestroyed:iH,isDestroyed:oH,isFinished:sH,isServerRequest:aH}=wc,vR=bR("kDestroy"),l_=bR("kConstruct");function _R(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function cH(t,e){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(_R(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?QA(this,t,e):this.once(vR,function(a){QA(this,tH(a,t),e)}),this)}function QA(t,e,r){let n=!1;function i(a){if(n)return;n=!0;const o=t._readableState,s=t._writableState;_R(a,s,o),s&&(s.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(a),a?Ws.nextTick(dH,t,a):Ws.nextTick(ER,t)}try{t._destroy(e||null,i)}catch(a){i(a)}}function dH(t,e){u_(t,e),ER(t)}function ER(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function u_(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function lH(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function f_(t,e,r){const n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Ws.nextTick(u_,t,e):u_(t,e))}function uH(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(l_,e),!(t.listenerCount(l_)>1)&&Ws.nextTick(fH,t)}function fH(t){let e=!1;function r(n){if(e){f_(t,n??new rH);return}e=!0;const i=t._readableState,a=t._writableState,o=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),o.destroyed?t.emit(vR,n):n?f_(t,n,!0):Ws.nextTick(hH,t)}try{t._construct(n=>{Ws.nextTick(r,n)})}catch(n){Ws.nextTick(r,n)}}function hH(t){t.emit(l_)}function JA(t){return t?.setHeader&&typeof t.abort=="function"}function SR(t){t.emit("close")}function pH(t,e){t.emit("error",e),Ws.nextTick(SR,t)}function yH(t,e){!t||oH(t)||(!e&&!sH(t)&&(e=new nH),aH(t)?(t.socket=null,t.destroy(e)):JA(t)?t.abort():JA(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ws.nextTick(pH,t,e):Ws.nextTick(SR,t),t.destroyed||(t[iH]=!0))}var dh={construct:uH,destroyer:yH,destroy:cH,undestroy:lH,errorOrDestroy:f_};const{ArrayIsArray:mH,ObjectSetPrototypeOf:$R}=Mr,{EventEmitter:Ew}=fa;function Sw(t){Ew.call(this,t)}$R(Sw.prototype,Ew.prototype);$R(Sw,Ew);Sw.prototype.pipe=function(t,e){const r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",s));let a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function d(c){l(),Ew.listenerCount(this,"error")===0&&this.emit("error",c)}h_(r,"error",d),h_(t,"error",d);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",d),t.removeListener("error",d),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function h_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):mH(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var xE={Stream:Sw,prependListener:h_},TR={exports:{}};(function(t){const{SymbolDispose:e}=Mr,{AbortError:r,codes:n}=Ki,{isNodeStream:i,isWebStream:a,kControllerErrorFunction:o}=wc,s=Ud,{ERR_INVALID_ARG_TYPE:d}=n;let l;const c=(u,h)=>{if(typeof u!="object"||!("aborted"in u))throw new d(h,"AbortSignal",u)};t.exports.addAbortSignal=function(h,y){if(c(h,"signal"),!i(y)&&!a(y))throw new d("stream",["ReadableStream","WritableStream","Stream"],y);return t.exports.addAbortSignalNoValidate(h,y)},t.exports.addAbortSignalNoValidate=function(u,h){if(typeof u!="object"||!("aborted"in u))return h;const y=i(h)?()=>{h.destroy(new r(void 0,{cause:u.reason}))}:()=>{h[o](new r(void 0,{cause:u.reason}))};if(u.aborted)y();else{l=l||Bi.addAbortListener;const p=l(u,y);s(h,p[e])}return h}})(TR);var $w=TR.exports;const{StringPrototypeSlice:eP,SymbolIterator:gH,TypedArrayPrototypeSet:Em,Uint8Array:wH}=Mr,{Buffer:Zb}=Dr,{inspect:bH}=Bi;var vH=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Zb.alloc(0);const r=Zb.allocUnsafe(e>>>0);let n=this.head,i=0;for(;n;)Em(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[gH](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{const a=n.data;if(e>a.length)r+=a,e-=a.length;else{e===a.length?(r+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=eP(a,0,e),this.head=n,n.data=eP(a,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){const r=Zb.allocUnsafe(e),n=e;let i=this.head,a=0;do{const o=i.data;if(e>o.length)Em(r,o,n-e),e-=o.length;else{e===o.length?(Em(r,o,n-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(Em(r,new wH(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++a}while((i=i.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return bH(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:_H,NumberIsInteger:EH}=Mr,{validateInteger:SH}=Ay,{ERR_INVALID_ARG_VALUE:$H}=Ki.codes;let AR=16*1024,PR=16;function TH(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function xR(t){return t?PR:AR}function AH(t,e){SH(e,"value",0),t?PR=e:AR=e}function PH(t,e,r,n){const i=TH(e,n,r);if(i!=null){if(!EH(i)||i<0){const a=n?`options.${r}`:"options.highWaterMark";throw new $H(a,i)}return _H(i)}return xR(t.objectMode)}var Tw={getHighWaterMark:PH,getDefaultHighWaterMark:xR,setDefaultHighWaterMark:AH},Zp={},p_={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Dr,n=r.Buffer;function i(o,s){for(var d in o)s[d]=o[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(o,s,d){return n(o,s,d)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(o,s,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,s,d)},a.alloc=function(o,s,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return s!==void 0?typeof d=="string"?l.fill(s,d):l.fill(s):l.fill(0),l},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(p_,p_.exports);var xH=p_.exports,IE=xH.Buffer,tP=IE.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function IH(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function kH(t){var e=IH(t);if(typeof e!="string"&&(IE.isEncoding===tP||!tP(t)))throw new Error("Unknown encoding: "+t);return e||t}Zp.StringDecoder=Py;function Py(t){this.encoding=kH(t);var e;switch(this.encoding){case"utf16le":this.text=BH,this.end=DH,e=4;break;case"utf8":this.fillLast=jH,e=4;break;case"base64":this.text=MH,this.end=LH,e=3;break;default:this.write=UH,this.end=FH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=IE.allocUnsafe(e)}Py.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Py.prototype.end=NH;Py.prototype.text=CH;Py.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Xb(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function OH(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Xb(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Xb(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Xb(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function RH(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function jH(t){var e=this.lastTotal-this.lastNeed,r=RH(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function CH(t,e){var r=OH(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function NH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function BH(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function DH(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function MH(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function LH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function UH(t){return t.toString(this.encoding)}function FH(t){return t&&t.length?this.write(t):""}const rP=Vi,{PromisePrototypeThen:zH,SymbolAsyncIterator:nP,SymbolIterator:iP}=Mr,{Buffer:qH}=Dr,{ERR_INVALID_ARG_TYPE:KH,ERR_STREAM_NULL_VALUES:VH}=Ki.codes;function HH(t,e,r){let n;if(typeof e=="string"||e instanceof qH)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[nP])i=!0,n=e[nP]();else if(e&&e[iP])i=!1,n=e[iP]();else throw new KH("iterable",["Iterable"],e);const a=new t({objectMode:!0,highWaterMark:1,...r});let o=!1;a._read=function(){o||(o=!0,d())},a._destroy=function(l,c){zH(s(l),()=>rP.nextTick(c,l),u=>rP.nextTick(c,u||l))};async function s(l){const c=l!=null,u=typeof n.throw=="function";if(c&&u){const{value:h,done:y}=await n.throw(l);if(await h,y)return}if(typeof n.return=="function"){const{value:h}=await n.return();await h}}async function d(){for(;;){try{const{value:l,done:c}=i?await n.next():n.next();if(c)a.push(null);else{const u=l&&typeof l.then=="function"?await l:l;if(u===null)throw o=!1,new VH;if(a.push(u))continue;o=!1}}catch(l){a.destroy(l)}break}}return a}var IR=HH,Qb,oP;function Aw(){if(oP)return Qb;oP=1;const t=Vi,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:d,SafeSet:l,SymbolAsyncDispose:c,SymbolAsyncIterator:u,Symbol:h}=Mr;Qb=Ee,Ee.ReadableState=xe;const{EventEmitter:y}=fa,{Stream:p,prependListener:f}=xE,{Buffer:g}=Dr,{addAbortSignal:v}=$w,b=Ud;let m=Bi.debuglog("stream",de=>{m=de});const w=vH,S=dh,{getHighWaterMark:T,getDefaultHighWaterMark:x}=Tw,{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:M,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:re,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:z},AbortError:oe}=Ki,{validateObject:C}=Ay,V=h("kPaused"),{StringDecoder:q}=Zp,Q=IR;s(Ee.prototype,p.prototype),s(Ee,p);const R=()=>{},{errorOrDestroy:B}=S,D=1,G=2,Z=4,N=8,W=16,O=32,F=64,Y=128,ee=256,te=512,U=1024,L=2048,P=4096,j=8192,X=16384,ne=32768,ae=65536,pe=1<<17,we=1<<18;function Se(de){return{enumerable:!1,get(){return(this.state&de)!==0},set(ue){ue?this.state|=de:this.state&=~de}}}a(xe.prototype,{objectMode:Se(D),ended:Se(G),endEmitted:Se(Z),reading:Se(N),constructed:Se(W),sync:Se(O),needReadable:Se(F),emittedReadable:Se(Y),readableListening:Se(ee),resumeScheduled:Se(te),errorEmitted:Se(U),emitClose:Se(L),autoDestroy:Se(P),destroyed:Se(j),closed:Se(X),closeEmitted:Se(ne),multiAwaitDrain:Se(ae),readingMore:Se(pe),dataEmitted:Se(we)});function xe(de,ue,Ie){typeof Ie!="boolean"&&(Ie=ue instanceof oc()),this.state=L|P|W|O,de&&de.objectMode&&(this.state|=D),Ie&&de&&de.readableObjectMode&&(this.state|=D),this.highWaterMark=de?T(this,de,"readableHighWaterMark",Ie):x(!1),this.buffer=new w,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,de&&de.emitClose===!1&&(this.state&=~L),de&&de.autoDestroy===!1&&(this.state&=~P),this.errored=null,this.defaultEncoding=de&&de.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,de&&de.encoding&&(this.decoder=new q(de.encoding),this.encoding=de.encoding)}function Ee(de){if(!(this instanceof Ee))return new Ee(de);const ue=this instanceof oc();this._readableState=new xe(de,this,ue),de&&(typeof de.read=="function"&&(this._read=de.read),typeof de.destroy=="function"&&(this._destroy=de.destroy),typeof de.construct=="function"&&(this._construct=de.construct),de.signal&&!ue&&v(de.signal,this)),p.call(this,de),S.construct(this,()=>{this._readableState.needReadable&&fe(this,this._readableState)})}Ee.prototype.destroy=S.destroy,Ee.prototype._undestroy=S.undestroy,Ee.prototype._destroy=function(de,ue){ue(de)},Ee.prototype[y.captureRejectionSymbol]=function(de){this.destroy(de)},Ee.prototype[c]=function(){let de;return this.destroyed||(de=this.readableEnded?null:new oe,this.destroy(de)),new d((ue,Ie)=>b(this,ke=>ke&&ke!==de?Ie(ke):ue(null)))},Ee.prototype.push=function(de,ue){return Ne(this,de,ue,!1)},Ee.prototype.unshift=function(de,ue){return Ne(this,de,ue,!0)};function Ne(de,ue,Ie,ke){m("readableAddChunk",ue);const qe=de._readableState;let pn;if(qe.state&D||(typeof ue=="string"?(Ie=Ie||qe.defaultEncoding,qe.encoding!==Ie&&(ke&&qe.encoding?ue=g.from(ue,Ie).toString(qe.encoding):(ue=g.from(ue,Ie),Ie=""))):ue instanceof g?Ie="":p._isUint8Array(ue)?(ue=p._uint8ArrayToBuffer(ue),Ie=""):ue!=null&&(pn=new M("chunk",["string","Buffer","Uint8Array"],ue))),pn)B(de,pn);else if(ue===null)qe.state&=~N,A(de,qe);else if(qe.state&D||ue&&ue.length>0)if(ke)if(qe.state&Z)B(de,new z);else{if(qe.destroyed||qe.errored)return!1;Qe(de,qe,ue,!0)}else if(qe.ended)B(de,new J);else{if(qe.destroyed||qe.errored)return!1;qe.state&=~N,qe.decoder&&!Ie?(ue=qe.decoder.write(ue),qe.objectMode||ue.length!==0?Qe(de,qe,ue,!1):fe(de,qe)):Qe(de,qe,ue,!1)}else ke||(qe.state&=~N,fe(de,qe));return!qe.ended&&(qe.length<qe.highWaterMark||qe.length===0)}function Qe(de,ue,Ie,ke){ue.flowing&&ue.length===0&&!ue.sync&&de.listenerCount("data")>0?(ue.state&ae?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null,ue.dataEmitted=!0,de.emit("data",Ie)):(ue.length+=ue.objectMode?1:Ie.length,ke?ue.buffer.unshift(Ie):ue.buffer.push(Ie),ue.state&F&&k(de)),fe(de,ue)}Ee.prototype.isPaused=function(){const de=this._readableState;return de[V]===!0||de.flowing===!1},Ee.prototype.setEncoding=function(de){const ue=new q(de);this._readableState.decoder=ue,this._readableState.encoding=this._readableState.decoder.encoding;const Ie=this._readableState.buffer;let ke="";for(const qe of Ie)ke+=ue.write(qe);return Ie.clear(),ke!==""&&Ie.push(ke),this._readableState.length=ke.length,this};const ie=1073741824;function ce(de){if(de>ie)throw new re("size","<= 1GiB",de);return de--,de|=de>>>1,de|=de>>>2,de|=de>>>4,de|=de>>>8,de|=de>>>16,de++,de}function K(de,ue){return de<=0||ue.length===0&&ue.ended?0:ue.state&D?1:n(de)?ue.flowing&&ue.length?ue.buffer.first().length:ue.length:de<=ue.length?de:ue.ended?ue.length:0}Ee.prototype.read=function(de){m("read",de),de===void 0?de=NaN:r(de)||(de=i(de,10));const ue=this._readableState,Ie=de;if(de>ue.highWaterMark&&(ue.highWaterMark=ce(de)),de!==0&&(ue.state&=~Y),de===0&&ue.needReadable&&((ue.highWaterMark!==0?ue.length>=ue.highWaterMark:ue.length>0)||ue.ended))return m("read: emitReadable",ue.length,ue.ended),ue.length===0&&ue.ended?Wi(this):k(this),null;if(de=K(de,ue),de===0&&ue.ended)return ue.length===0&&Wi(this),null;let ke=(ue.state&F)!==0;if(m("need readable",ke),(ue.length===0||ue.length-de<ue.highWaterMark)&&(ke=!0,m("length less than watermark",ke)),ue.ended||ue.reading||ue.destroyed||ue.errored||!ue.constructed)ke=!1,m("reading, ended or constructing",ke);else if(ke){m("do read"),ue.state|=N|O,ue.length===0&&(ue.state|=F);try{this._read(ue.highWaterMark)}catch(pn){B(this,pn)}ue.state&=~O,ue.reading||(de=K(Ie,ue))}let qe;return de>0?qe=_s(de,ue):qe=null,qe===null?(ue.needReadable=ue.length<=ue.highWaterMark,de=0):(ue.length-=de,ue.multiAwaitDrain?ue.awaitDrainWriters.clear():ue.awaitDrainWriters=null),ue.length===0&&(ue.ended||(ue.needReadable=!0),Ie!==de&&ue.ended&&Wi(this)),qe!==null&&!ue.errorEmitted&&!ue.closeEmitted&&(ue.dataEmitted=!0,this.emit("data",qe)),qe};function A(de,ue){if(m("onEofChunk"),!ue.ended){if(ue.decoder){const Ie=ue.decoder.end();Ie&&Ie.length&&(ue.buffer.push(Ie),ue.length+=ue.objectMode?1:Ie.length)}ue.ended=!0,ue.sync?k(de):(ue.needReadable=!1,ue.emittedReadable=!0,se(de))}}function k(de){const ue=de._readableState;m("emitReadable",ue.needReadable,ue.emittedReadable),ue.needReadable=!1,ue.emittedReadable||(m("emitReadable",ue.flowing),ue.emittedReadable=!0,t.nextTick(se,de))}function se(de){const ue=de._readableState;m("emitReadable_",ue.destroyed,ue.length,ue.ended),!ue.destroyed&&!ue.errored&&(ue.length||ue.ended)&&(de.emit("readable"),ue.emittedReadable=!1),ue.needReadable=!ue.flowing&&!ue.ended&&ue.length<=ue.highWaterMark,Pt(de)}function fe(de,ue){!ue.readingMore&&ue.constructed&&(ue.readingMore=!0,t.nextTick(me,de,ue))}function me(de,ue){for(;!ue.reading&&!ue.ended&&(ue.length<ue.highWaterMark||ue.flowing&&ue.length===0);){const Ie=ue.length;if(m("maybeReadMore read 0"),de.read(0),Ie===ue.length)break}ue.readingMore=!1}Ee.prototype._read=function(de){throw new H("_read()")},Ee.prototype.pipe=function(de,ue){const Ie=this,ke=this._readableState;ke.pipes.length===1&&(ke.multiAwaitDrain||(ke.multiAwaitDrain=!0,ke.awaitDrainWriters=new l(ke.awaitDrainWriters?[ke.awaitDrainWriters]:[]))),ke.pipes.push(de),m("pipe count=%d opts=%j",ke.pipes.length,ue);const pn=(!ue||ue.end!==!1)&&de!==t.stdout&&de!==t.stderr?he:ir;ke.endEmitted?t.nextTick(pn):Ie.once("end",pn),de.on("unpipe",_i);function _i(mt,Dt){m("onunpipe"),mt===Ie&&Dt&&Dt.hasUnpiped===!1&&(Dt.hasUnpiped=!0,_e())}function he(){m("onend"),de.end()}let le,ye=!1;function _e(){m("cleanup"),de.removeListener("close",xt),de.removeListener("finish",Wt),le&&de.removeListener("drain",le),de.removeListener("error",Ge),de.removeListener("unpipe",_i),Ie.removeListener("end",he),Ie.removeListener("end",ir),Ie.removeListener("data",He),ye=!0,le&&ke.awaitDrainWriters&&(!de._writableState||de._writableState.needDrain)&&le()}function ve(){ye||(ke.pipes.length===1&&ke.pipes[0]===de?(m("false write response, pause",0),ke.awaitDrainWriters=de,ke.multiAwaitDrain=!1):ke.pipes.length>1&&ke.pipes.includes(de)&&(m("false write response, pause",ke.awaitDrainWriters.size),ke.awaitDrainWriters.add(de)),Ie.pause()),le||(le=be(Ie,de),de.on("drain",le))}Ie.on("data",He);function He(mt){m("ondata");const Dt=de.write(mt);m("dest.write",Dt),Dt===!1&&ve()}function Ge(mt){if(m("onerror",mt),ir(),de.removeListener("error",Ge),de.listenerCount("error")===0){const Dt=de._writableState||de._readableState;Dt&&!Dt.errorEmitted?B(de,mt):de.emit("error",mt)}}f(de,"error",Ge);function xt(){de.removeListener("finish",Wt),ir()}de.once("close",xt);function Wt(){m("onfinish"),de.removeListener("close",xt),ir()}de.once("finish",Wt);function ir(){m("unpipe"),Ie.unpipe(de)}return de.emit("pipe",Ie),de.writableNeedDrain===!0?ve():ke.flowing||(m("pipe resume"),Ie.resume()),de};function be(de,ue){return function(){const ke=de._readableState;ke.awaitDrainWriters===ue?(m("pipeOnDrain",1),ke.awaitDrainWriters=null):ke.multiAwaitDrain&&(m("pipeOnDrain",ke.awaitDrainWriters.size),ke.awaitDrainWriters.delete(ue)),(!ke.awaitDrainWriters||ke.awaitDrainWriters.size===0)&&de.listenerCount("data")&&de.resume()}}Ee.prototype.unpipe=function(de){const ue=this._readableState,Ie={hasUnpiped:!1};if(ue.pipes.length===0)return this;if(!de){const qe=ue.pipes;ue.pipes=[],this.pause();for(let pn=0;pn<qe.length;pn++)qe[pn].emit("unpipe",this,{hasUnpiped:!1});return this}const ke=e(ue.pipes,de);return ke===-1?this:(ue.pipes.splice(ke,1),ue.pipes.length===0&&this.pause(),de.emit("unpipe",this,Ie),this)},Ee.prototype.on=function(de,ue){const Ie=p.prototype.on.call(this,de,ue),ke=this._readableState;return de==="data"?(ke.readableListening=this.listenerCount("readable")>0,ke.flowing!==!1&&this.resume()):de==="readable"&&!ke.endEmitted&&!ke.readableListening&&(ke.readableListening=ke.needReadable=!0,ke.flowing=!1,ke.emittedReadable=!1,m("on readable",ke.length,ke.reading),ke.length?k(this):ke.reading||t.nextTick(_t,this)),Ie},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(de,ue){const Ie=p.prototype.removeListener.call(this,de,ue);return de==="readable"&&t.nextTick(Je,this),Ie},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(de){const ue=p.prototype.removeAllListeners.apply(this,arguments);return(de==="readable"||de===void 0)&&t.nextTick(Je,this),ue};function Je(de){const ue=de._readableState;ue.readableListening=de.listenerCount("readable")>0,ue.resumeScheduled&&ue[V]===!1?ue.flowing=!0:de.listenerCount("data")>0?de.resume():ue.readableListening||(ue.flowing=null)}function _t(de){m("readable nexttick read 0"),de.read(0)}Ee.prototype.resume=function(){const de=this._readableState;return de.flowing||(m("resume"),de.flowing=!de.readableListening,Rt(this,de)),de[V]=!1,this};function Rt(de,ue){ue.resumeScheduled||(ue.resumeScheduled=!0,t.nextTick(yt,de,ue))}function yt(de,ue){m("resume",ue.reading),ue.reading||de.read(0),ue.resumeScheduled=!1,de.emit("resume"),Pt(de),ue.flowing&&!ue.reading&&de.read(0)}Ee.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[V]=!0,this};function Pt(de){const ue=de._readableState;for(m("flow",ue.flowing);ue.flowing&&de.read()!==null;);}Ee.prototype.wrap=function(de){let ue=!1;de.on("data",ke=>{!this.push(ke)&&de.pause&&(ue=!0,de.pause())}),de.on("end",()=>{this.push(null)}),de.on("error",ke=>{B(this,ke)}),de.on("close",()=>{this.destroy()}),de.on("destroy",()=>{this.destroy()}),this._read=()=>{ue&&de.resume&&(ue=!1,de.resume())};const Ie=o(de);for(let ke=1;ke<Ie.length;ke++){const qe=Ie[ke];this[qe]===void 0&&typeof de[qe]=="function"&&(this[qe]=de[qe].bind(de))}return this},Ee.prototype[u]=function(){return Ec(this)},Ee.prototype.iterator=function(de){return de!==void 0&&C(de,"options"),Ec(this,de)};function Ec(de,ue){typeof de.read!="function"&&(de=Ee.wrap(de,{objectMode:!0}));const Ie=vs(de,ue);return Ie.stream=de,Ie}async function*vs(de,ue){let Ie=R;function ke(_i){this===de?(Ie(),Ie=R):Ie=_i}de.on("readable",ke);let qe;const pn=b(de,{writable:!1},_i=>{qe=_i?I(qe,_i):null,Ie(),Ie=R});try{for(;;){const _i=de.destroyed?null:de.read();if(_i!==null)yield _i;else{if(qe)throw qe;if(qe===null)return;await new d(ke)}}}catch(_i){throw qe=I(qe,_i),qe}finally{(qe||ue?.destroyOnReturn!==!1)&&(qe===void 0||de._readableState.autoDestroy)?S.destroyer(de,null):(de.off("readable",ke),pn())}}a(Ee.prototype,{readable:{__proto__:null,get(){const de=this._readableState;return!!de&&de.readable!==!1&&!de.destroyed&&!de.errorEmitted&&!de.endEmitted},set(de){this._readableState&&(this._readableState.readable=!!de)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(de){this._readableState&&(this._readableState.flowing=de)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(de){this._readableState&&(this._readableState.destroyed=de)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(xe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(de){this[V]=!!de}}}),Ee._fromList=_s;function _s(de,ue){if(ue.length===0)return null;let Ie;return ue.objectMode?Ie=ue.buffer.shift():!de||de>=ue.length?(ue.decoder?Ie=ue.buffer.join(""):ue.buffer.length===1?Ie=ue.buffer.first():Ie=ue.buffer.concat(ue.length),ue.buffer.clear()):Ie=ue.buffer.consume(de,ue.decoder),Ie}function Wi(de){const ue=de._readableState;m("endReadable",ue.endEmitted),ue.endEmitted||(ue.ended=!0,t.nextTick(Yi,ue,de))}function Yi(de,ue){if(m("endReadableNT",de.endEmitted,de.length),!de.errored&&!de.closeEmitted&&!de.endEmitted&&de.length===0){if(de.endEmitted=!0,ue.emit("end"),ue.writable&&ue.allowHalfOpen===!1)t.nextTick(Sc,ue);else if(de.autoDestroy){const Ie=ue._writableState;(!Ie||Ie.autoDestroy&&(Ie.finished||Ie.writable===!1))&&ue.destroy()}}}function Sc(de){de.writable&&!de.writableEnded&&!de.destroyed&&de.end()}Ee.from=function(de,ue){return Q(Ee,de,ue)};let Th;function Ah(){return Th===void 0&&(Th={}),Th}return Ee.fromWeb=function(de,ue){return Ah().newStreamReadableFromReadableStream(de,ue)},Ee.toWeb=function(de,ue){return Ah().newReadableStreamFromStreamReadable(de,ue)},Ee.wrap=function(de,ue){var Ie,ke;return new Ee({objectMode:(Ie=(ke=de.readableObjectMode)!==null&&ke!==void 0?ke:de.objectMode)!==null&&Ie!==void 0?Ie:!0,...ue,destroy(qe,pn){S.destroyer(de,qe),pn(qe)}}).wrap(de)},Qb}var Jb,sP;function kE(){if(sP)return Jb;sP=1;const t=Vi,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:d,SymbolHasInstance:l}=Mr;Jb=C,C.WritableState=z;const{EventEmitter:c}=fa,u=xE.Stream,{Buffer:h}=Dr,y=dh,{addAbortSignal:p}=$w,{getHighWaterMark:f,getDefaultHighWaterMark:g}=Tw,{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:x,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:M}=Ki.codes,{errorOrDestroy:H}=y;o(C.prototype,u.prototype),o(C,u);function re(){}const J=d("kOnFinished");function z(P,j,X){typeof X!="boolean"&&(X=j instanceof oc()),this.objectMode=!!(P&&P.objectMode),X&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?f(this,P,"writableHighWaterMark",X):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(P&&P.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,j),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,oe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function oe(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}z.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function C(P){const j=this instanceof oc();if(!j&&!n(C,this))return new C(P);this._writableState=new z(P,this,j),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&p(P.signal,this)),u.call(this,P),y.construct(this,()=>{const X=this._writableState;X.writing||N(this,X),Y(this,X)})}i(C,l,{__proto__:null,value:function(P){return n(this,P)?!0:this!==C?!1:P&&P._writableState instanceof z}}),C.prototype.pipe=function(){H(this,new w)};function V(P,j,X,ne){const ae=P._writableState;if(typeof X=="function")ne=X,X=ae.defaultEncoding;else{if(!X)X=ae.defaultEncoding;else if(X!=="buffer"&&!h.isEncoding(X))throw new M(X);typeof ne!="function"&&(ne=re)}if(j===null)throw new x;if(!ae.objectMode)if(typeof j=="string")ae.decodeStrings!==!1&&(j=h.from(j,X),X="buffer");else if(j instanceof h)X="buffer";else if(u._isUint8Array(j))j=u._uint8ArrayToBuffer(j),X="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],j);let pe;return ae.ending?pe=new I:ae.destroyed&&(pe=new S("write")),pe?(t.nextTick(ne,pe),H(P,pe,!0),pe):(ae.pendingcb++,q(P,ae,j,X,ne))}C.prototype.write=function(P,j,X){return V(this,P,j,X)===!0},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const P=this._writableState;P.corked&&(P.corked--,P.writing||N(this,P))},C.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=s(j)),!h.isEncoding(j))throw new M(j);return this._writableState.defaultEncoding=j,this};function q(P,j,X,ne,ae){const pe=j.objectMode?1:X.length;j.length+=pe;const we=j.length<j.highWaterMark;return we||(j.needDrain=!0),j.writing||j.corked||j.errored||!j.constructed?(j.buffered.push({chunk:X,encoding:ne,callback:ae}),j.allBuffers&&ne!=="buffer"&&(j.allBuffers=!1),j.allNoop&&ae!==re&&(j.allNoop=!1)):(j.writelen=pe,j.writecb=ae,j.writing=!0,j.sync=!0,P._write(X,ne,j.onwrite),j.sync=!1),we&&!j.errored&&!j.destroyed}function Q(P,j,X,ne,ae,pe,we){j.writelen=ne,j.writecb=we,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new S("write")):X?P._writev(ae,j.onwrite):P._write(ae,pe,j.onwrite),j.sync=!1}function R(P,j,X,ne){--j.pendingcb,ne(X),Z(j),H(P,X)}function B(P,j){const X=P._writableState,ne=X.sync,ae=X.writecb;if(typeof ae!="function"){H(P,new m);return}X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0,j?(j.stack,X.errored||(X.errored=j),P._readableState&&!P._readableState.errored&&(P._readableState.errored=j),ne?t.nextTick(R,P,X,j,ae):R(P,X,j,ae)):(X.buffered.length>X.bufferedIndex&&N(P,X),ne?X.afterWriteTickInfo!==null&&X.afterWriteTickInfo.cb===ae?X.afterWriteTickInfo.count++:(X.afterWriteTickInfo={count:1,cb:ae,stream:P,state:X},t.nextTick(D,X.afterWriteTickInfo)):G(P,X,1,ae))}function D({stream:P,state:j,count:X,cb:ne}){return j.afterWriteTickInfo=null,G(P,j,X,ne)}function G(P,j,X,ne){for(!j.ending&&!P.destroyed&&j.length===0&&j.needDrain&&(j.needDrain=!1,P.emit("drain"));X-- >0;)j.pendingcb--,ne();j.destroyed&&Z(j),Y(P,j)}function Z(P){if(P.writing)return;for(let ae=P.bufferedIndex;ae<P.buffered.length;++ae){var j;const{chunk:pe,callback:we}=P.buffered[ae],Se=P.objectMode?1:pe.length;P.length-=Se,we((j=P.errored)!==null&&j!==void 0?j:new S("write"))}const X=P[J].splice(0);for(let ae=0;ae<X.length;ae++){var ne;X[ae]((ne=P.errored)!==null&&ne!==void 0?ne:new S("end"))}oe(P)}function N(P,j){if(j.corked||j.bufferProcessing||j.destroyed||!j.constructed)return;const{buffered:X,bufferedIndex:ne,objectMode:ae}=j,pe=X.length-ne;if(!pe)return;let we=ne;if(j.bufferProcessing=!0,pe>1&&P._writev){j.pendingcb-=pe-1;const Se=j.allNoop?re:Ee=>{for(let Ne=we;Ne<X.length;++Ne)X[Ne].callback(Ee)},xe=j.allNoop&&we===0?X:e(X,we);xe.allBuffers=j.allBuffers,Q(P,j,!0,j.length,xe,"",Se),oe(j)}else{do{const{chunk:Se,encoding:xe,callback:Ee}=X[we];X[we++]=null;const Ne=ae?1:Se.length;Q(P,j,!1,Ne,Se,xe,Ee)}while(we<X.length&&!j.writing);we===X.length?oe(j):we>256?(X.splice(0,we),j.bufferedIndex=0):j.bufferedIndex=we}j.bufferProcessing=!1}C.prototype._write=function(P,j,X){if(this._writev)this._writev([{chunk:P,encoding:j}],X);else throw new b("_write()")},C.prototype._writev=null,C.prototype.end=function(P,j,X){const ne=this._writableState;typeof P=="function"?(X=P,P=null,j=null):typeof j=="function"&&(X=j,j=null);let ae;if(P!=null){const pe=V(this,P,j);pe instanceof r&&(ae=pe)}return ne.corked&&(ne.corked=1,this.uncork()),ae||(!ne.errored&&!ne.ending?(ne.ending=!0,Y(this,ne,!0),ne.ended=!0):ne.finished?ae=new T("end"):ne.destroyed&&(ae=new S("end"))),typeof X=="function"&&(ae||ne.finished?t.nextTick(X,ae):ne[J].push(X)),this};function W(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function O(P,j){let X=!1;function ne(ae){if(X){H(P,ae??m());return}if(X=!0,j.pendingcb--,ae){const pe=j[J].splice(0);for(let we=0;we<pe.length;we++)pe[we](ae);H(P,ae,j.sync)}else W(j)&&(j.prefinished=!0,P.emit("prefinish"),j.pendingcb++,t.nextTick(ee,P,j))}j.sync=!0,j.pendingcb++;try{P._final(ne)}catch(ae){ne(ae)}j.sync=!1}function F(P,j){!j.prefinished&&!j.finalCalled&&(typeof P._final=="function"&&!j.destroyed?(j.finalCalled=!0,O(P,j)):(j.prefinished=!0,P.emit("prefinish")))}function Y(P,j,X){W(j)&&(F(P,j),j.pendingcb===0&&(X?(j.pendingcb++,t.nextTick((ne,ae)=>{W(ae)?ee(ne,ae):ae.pendingcb--},P,j)):W(j)&&(j.pendingcb++,ee(P,j))))}function ee(P,j){j.pendingcb--,j.finished=!0;const X=j[J].splice(0);for(let ne=0;ne<X.length;ne++)X[ne]();if(P.emit("finish"),j.autoDestroy){const ne=P._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&P.destroy()}}a(C.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){const P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const te=y.destroy;C.prototype.destroy=function(P,j){const X=this._writableState;return!X.destroyed&&(X.bufferedIndex<X.buffered.length||X[J].length)&&t.nextTick(Z,X),te.call(this,P,j),this},C.prototype._undestroy=y.undestroy,C.prototype._destroy=function(P,j){j(P)},C.prototype[c.captureRejectionSymbol]=function(P){this.destroy(P)};let U;function L(){return U===void 0&&(U={}),U}return C.fromWeb=function(P,j){return L().newStreamWritableFromWritableStream(P,j)},C.toWeb=function(P){return L().newWritableStreamFromStreamWritable(P)},Jb}var ev,aP;function GH(){if(aP)return ev;aP=1;const t=Vi,e=Dr,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:d,isReadableStream:l,isWritableStream:c}=wc,u=Ud,{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:p}}=Ki,{destroyer:f}=dh,g=oc(),v=Aw(),b=kE(),{createDeferredPromise:m}=Bi,w=IR,S=globalThis.Blob||e.Blob,T=typeof S<"u"?function(z){return z instanceof S}:function(z){return!1},x=globalThis.AbortController||Id().AbortController,{FunctionPrototypeCall:I}=Mr;class M extends g{constructor(z){super(z),z?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),z?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}ev=function J(z,oe){if(d(z))return z;if(o(z))return re({readable:z});if(s(z))return re({writable:z});if(a(z))return re({writable:!1,readable:!1});if(l(z))return re({readable:v.fromWeb(z)});if(c(z))return re({writable:b.fromWeb(z)});if(typeof z=="function"){const{value:V,write:q,final:Q,destroy:R}=H(z);if(i(V))return w(M,V,{objectMode:!0,write:q,final:Q,destroy:R});const B=V?.then;if(typeof B=="function"){let D;const G=I(B,V,Z=>{if(Z!=null)throw new p("nully","body",Z)},Z=>{f(D,Z)});return D=new M({objectMode:!0,readable:!1,write:q,final(Z){Q(async()=>{try{await G,t.nextTick(Z,null)}catch(N){t.nextTick(Z,N)}})},destroy:R})}throw new p("Iterable, AsyncIterable or AsyncFunction",oe,V)}if(T(z))return J(z.arrayBuffer());if(i(z))return w(M,z,{objectMode:!0,writable:!1});if(l(z?.readable)&&c(z?.writable))return M.fromWeb(z);if(typeof z?.writable=="object"||typeof z?.readable=="object"){const V=z!=null&&z.readable?o(z?.readable)?z?.readable:J(z.readable):void 0,q=z!=null&&z.writable?s(z?.writable)?z?.writable:J(z.writable):void 0;return re({readable:V,writable:q})}const C=z?.then;if(typeof C=="function"){let V;return I(C,z,q=>{q!=null&&V.push(q),V.push(null)},q=>{f(V,q)}),V=new M({objectMode:!0,writable:!1,read(){}})}throw new y(oe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],z)};function H(J){let{promise:z,resolve:oe}=m();const C=new x,V=C.signal;return{value:J(async function*(){for(;;){const Q=z;z=null;const{chunk:R,done:B,cb:D}=await Q;if(t.nextTick(D),B)return;if(V.aborted)throw new h(void 0,{cause:V.reason});({promise:z,resolve:oe}=m()),yield R}}(),{signal:V}),write(Q,R,B){const D=oe;oe=null,D({chunk:Q,done:!1,cb:B})},final(Q){const R=oe;oe=null,R({done:!0,cb:Q})},destroy(Q,R){C.abort(),R(Q)}}}function re(J){const z=J.readable&&typeof J.readable.read!="function"?v.wrap(J.readable):J.readable,oe=J.writable;let C=!!r(z),V=!!n(oe),q,Q,R,B,D;function G(Z){const N=B;B=null,N?N(Z):Z&&D.destroy(Z)}return D=new M({readableObjectMode:!!(z!=null&&z.readableObjectMode),writableObjectMode:!!(oe!=null&&oe.writableObjectMode),readable:C,writable:V}),V&&(u(oe,Z=>{V=!1,Z&&f(z,Z),G(Z)}),D._write=function(Z,N,W){oe.write(Z,N)?W():q=W},D._final=function(Z){oe.end(),Q=Z},oe.on("drain",function(){if(q){const Z=q;q=null,Z()}}),oe.on("finish",function(){if(Q){const Z=Q;Q=null,Z()}})),C&&(u(z,Z=>{C=!1,Z&&f(z,Z),G(Z)}),z.on("readable",function(){if(R){const Z=R;R=null,Z()}}),z.on("end",function(){D.push(null)}),D._read=function(){for(;;){const Z=z.read();if(Z===null){R=D._read;return}if(!D.push(Z))return}}),D._destroy=function(Z,N){!Z&&B!==null&&(Z=new h),R=null,q=null,Q=null,B===null?N(Z):(B=N,f(oe,Z),f(z,Z))},D}return ev}var tv,cP;function oc(){if(cP)return tv;cP=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=Mr;tv=o;const i=Aw(),a=kE();n(o.prototype,i.prototype),n(o,i);{const c=r(a.prototype);for(let u=0;u<c.length;u++){const h=c[u];o.prototype[h]||(o.prototype[h]=a.prototype[h])}}function o(c){if(!(this instanceof o))return new o(c);i.call(this,c),a.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let s;function d(){return s===void 0&&(s={}),s}o.fromWeb=function(c,u){return d().newStreamDuplexFromReadableWritablePair(c,u)},o.toWeb=function(c){return d().newReadableWritablePairFromDuplex(c)};let l;return o.from=function(c){return l||(l=GH()),l(c,"body")},tv}const{ObjectSetPrototypeOf:kR,Symbol:WH}=Mr;var OR=sc;const{ERR_METHOD_NOT_IMPLEMENTED:YH}=Ki.codes,OE=oc(),{getHighWaterMark:ZH}=Tw;kR(sc.prototype,OE.prototype);kR(sc,OE);const Ip=WH("kCallback");function sc(t){if(!(this instanceof sc))return new sc(t);const e=t?ZH(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),OE.call(this,t),this._readableState.sync=!1,this[Ip]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",XH)}function y_(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function XH(){this._final!==y_&&y_.call(this)}sc.prototype._final=y_;sc.prototype._transform=function(t,e,r){throw new YH("_transform()")};sc.prototype._write=function(t,e,r){const n=this._readableState,i=this._writableState,a=n.length;this._transform(t,e,(o,s)=>{if(o){r(o);return}s!=null&&this.push(s),i.ended||a===n.length||n.length<n.highWaterMark?r():this[Ip]=r})};sc.prototype._read=function(){if(this[Ip]){const t=this[Ip];this[Ip]=null,t()}};const{ObjectSetPrototypeOf:RR}=Mr;var jR=Df;const RE=OR;RR(Df.prototype,RE.prototype);RR(Df,RE);function Df(t){if(!(this instanceof Df))return new Df(t);RE.call(this,t)}Df.prototype._transform=function(t,e,r){r(null,t)};const ap=Vi,{ArrayIsArray:QH,Promise:JH,SymbolAsyncIterator:eG,SymbolDispose:tG}=Mr,c0=Ud,{once:rG}=Bi,nG=dh,dP=oc(),{aggregateTwoErrors:iG,codes:{ERR_INVALID_ARG_TYPE:m_,ERR_INVALID_RETURN_VALUE:rv,ERR_MISSING_ARGS:oG,ERR_STREAM_DESTROYED:sG,ERR_STREAM_PREMATURE_CLOSE:aG},AbortError:cG}=Ki,{validateFunction:dG,validateAbortSignal:lG}=Ay,{isIterable:ll,isReadable:nv,isReadableNodeStream:yg,isNodeStream:lP,isTransformStream:Xu,isWebStream:uG,isReadableStream:iv,isReadableFinished:fG}=wc,hG=globalThis.AbortController||Id().AbortController;let ov,sv,av;function uP(t,e,r){let n=!1;t.on("close",()=>{n=!0});const i=c0(t,{readable:e,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,nG.destroyer(t,a||new sG("pipe")))},cleanup:i}}function pG(t){return dG(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function cv(t){if(ll(t))return t;if(yg(t))return yG(t);throw new m_("val",["Readable","Iterable","AsyncIterable"],t)}async function*yG(t){sv||(sv=Aw()),yield*sv.prototype[eG].call(t)}async function Sm(t,e,r,{end:n}){let i,a=null;const o=l=>{if(l&&(i=l),a){const c=a;a=null,c()}},s=()=>new JH((l,c)=>{i?c(i):a=()=>{i?c(i):l()}});e.on("drain",o);const d=c0(e,{readable:!1},o);try{e.writableNeedDrain&&await s();for await(const l of t)e.write(l)||await s();n&&(e.end(),await s()),r()}catch(l){r(i!==l?iG(i,l):l)}finally{d(),e.off("drain",o)}}async function dv(t,e,r,{end:n}){Xu(e)&&(e=e.writable);const i=e.getWriter();try{for await(const a of t)await i.ready,i.write(a).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(o){r(o)}}}function mG(...t){return CR(t,rG(pG(t)))}function CR(t,e,r){if(t.length===1&&QH(t[0])&&(t=t[0]),t.length<2)throw new oG("streams");const n=new hG,i=n.signal,a=r?.signal,o=[];lG(a,"options.signal");function s(){p(new cG)}av=av||Bi.addAbortListener;let d;a&&(d=av(a,s));let l,c;const u=[];let h=0;function y(b){p(b,--h===0)}function p(b,m){var w;if(b&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=b),!(!l&&!m)){for(;u.length;)u.shift()(l);(w=d)===null||w===void 0||w[tG](),n.abort(),m&&(l||o.forEach(S=>S()),ap.nextTick(e,l,c))}}let f;for(let b=0;b<t.length;b++){const m=t[b],w=b<t.length-1,S=b>0,T=w||r?.end!==!1,x=b===t.length-1;if(lP(m)){let I=function(M){M&&M.name!=="AbortError"&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"&&y(M)};if(T){const{destroy:M,cleanup:H}=uP(m,w,S);u.push(M),nv(m)&&x&&o.push(H)}m.on("error",I),nv(m)&&x&&o.push(()=>{m.removeListener("error",I)})}if(b===0)if(typeof m=="function"){if(f=m({signal:i}),!ll(f))throw new rv("Iterable, AsyncIterable or Stream","source",f)}else ll(m)||yg(m)||Xu(m)?f=m:f=dP.from(m);else if(typeof m=="function"){if(Xu(f)){var g;f=cv((g=f)===null||g===void 0?void 0:g.readable)}else f=cv(f);if(f=m(f,{signal:i}),w){if(!ll(f,!0))throw new rv("AsyncIterable",`transform[${b-1}]`,f)}else{var v;ov||(ov=jR);const I=new ov({objectMode:!0}),M=(v=f)===null||v===void 0?void 0:v.then;if(typeof M=="function")h++,M.call(f,J=>{c=J,J!=null&&I.write(J),T&&I.end(),ap.nextTick(y)},J=>{I.destroy(J),ap.nextTick(y,J)});else if(ll(f,!0))h++,Sm(f,I,y,{end:T});else if(iv(f)||Xu(f)){const J=f.readable||f;h++,Sm(J,I,y,{end:T})}else throw new rv("AsyncIterable or Promise","destination",f);f=I;const{destroy:H,cleanup:re}=uP(f,!1,!0);u.push(H),x&&o.push(re)}}else if(lP(m)){if(yg(f)){h+=2;const I=gG(f,m,y,{end:T});nv(m)&&x&&o.push(I)}else if(Xu(f)||iv(f)){const I=f.readable||f;h++,Sm(I,m,y,{end:T})}else if(ll(f))h++,Sm(f,m,y,{end:T});else throw new m_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=m}else if(uG(m)){if(yg(f))h++,dv(cv(f),m,y,{end:T});else if(iv(f)||ll(f))h++,dv(f,m,y,{end:T});else if(Xu(f))h++,dv(f.readable,m,y,{end:T});else throw new m_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=m}else f=dP.from(m)}return(i!=null&&i.aborted||a!=null&&a.aborted)&&ap.nextTick(s),f}function gG(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new aG)}),t.pipe(e,{end:!1}),n){let a=function(){i=!0,e.end()};fG(t)?ap.nextTick(a):t.once("end",a)}else r();return c0(t,{readable:!0,writable:!1},a=>{const o=t._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",r).once("error",r):r(a)}),c0(e,{readable:!1,writable:!0},r)}var jE={pipelineImpl:CR,pipeline:mG};const{pipeline:wG}=jE,$m=oc(),{destroyer:bG}=dh,{isNodeStream:Tm,isReadable:fP,isWritable:hP,isWebStream:lv,isTransformStream:Xd,isWritableStream:pP,isReadableStream:yP}=wc,{AbortError:vG,codes:{ERR_INVALID_ARG_VALUE:mP,ERR_MISSING_ARGS:_G}}=Ki,EG=Ud;var NR=function(...e){if(e.length===0)throw new _G("streams");if(e.length===1)return $m.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=$m.from(e[0])),typeof e[e.length-1]=="function"){const y=e.length-1;e[y]=$m.from(e[y])}for(let y=0;y<e.length;++y)if(!(!Tm(e[y])&&!lv(e[y]))){if(y<e.length-1&&!(fP(e[y])||yP(e[y])||Xd(e[y])))throw new mP(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(hP(e[y])||pP(e[y])||Xd(e[y])))throw new mP(`streams[${y}]`,r[y],"must be writable")}let n,i,a,o,s;function d(y){const p=o;o=null,p?p(y):y?s.destroy(y):!h&&!u&&s.destroy()}const l=e[0],c=wG(e,d),u=!!(hP(l)||pP(l)||Xd(l)),h=!!(fP(c)||yP(c)||Xd(c));if(s=new $m({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(c!=null&&c.readableObjectMode),writable:u,readable:h}),u){if(Tm(l))s._write=function(p,f,g){l.write(p,f)?g():n=g},s._final=function(p){l.end(),i=p},l.on("drain",function(){if(n){const p=n;n=null,p()}});else if(lv(l)){const f=(Xd(l)?l.writable:l).getWriter();s._write=async function(g,v,b){try{await f.ready,f.write(g).catch(()=>{}),b()}catch(m){b(m)}},s._final=async function(g){try{await f.ready,f.close().catch(()=>{}),i=g}catch(v){g(v)}}}const y=Xd(c)?c.readable:c;EG(y,()=>{if(i){const p=i;i=null,p()}})}if(h){if(Tm(c))c.on("readable",function(){if(a){const y=a;a=null,y()}}),c.on("end",function(){s.push(null)}),s._read=function(){for(;;){const y=c.read();if(y===null){a=s._read;return}if(!s.push(y))return}};else if(lv(c)){const p=(Xd(c)?c.readable:c).getReader();s._read=async function(){for(;;)try{const{value:f,done:g}=await p.read();if(!s.push(f))return;if(g){s.push(null);return}}catch{return}}}}return s._destroy=function(y,p){!y&&o!==null&&(y=new vG),a=null,n=null,i=null,o===null?p(y):(o=p,Tm(c)&&bG(c,y))},s};const SG=globalThis.AbortController||Id().AbortController,{codes:{ERR_INVALID_ARG_VALUE:$G,ERR_INVALID_ARG_TYPE:xy,ERR_MISSING_ARGS:TG,ERR_OUT_OF_RANGE:AG},AbortError:na}=Ki,{validateAbortSignal:Su,validateInteger:gP,validateObject:$u}=Ay,PG=Mr.Symbol("kWeak"),xG=Mr.Symbol("kResistStopPropagation"),{finished:IG}=Ud,kG=NR,{addAbortSignalNoValidate:OG}=$w,{isWritable:RG,isNodeStream:jG}=wc,{deprecate:CG}=Bi,{ArrayPrototypePush:NG,Boolean:BG,MathFloor:wP,Number:DG,NumberIsNaN:MG,Promise:bP,PromiseReject:vP,PromiseResolve:LG,PromisePrototypeThen:_P,Symbol:BR}=Mr,d0=BR("kEmpty"),EP=BR("kEof");function UG(t,e){if(e!=null&&$u(e,"options"),e?.signal!=null&&Su(e.signal,"options.signal"),jG(t)&&!RG(t))throw new $G("stream",t,"must be writable");const r=kG(this,t);return e!=null&&e.signal&&OG(e.signal,r),r}function Pw(t,e){if(typeof t!="function")throw new xy("fn",["Function","AsyncFunction"],t);e!=null&&$u(e,"options"),e?.signal!=null&&Su(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=wP(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=wP(e.highWaterMark)),gP(r,"options.concurrency",1),gP(n,"options.highWaterMark",0),n+=r,async function*(){const a=Bi.AbortSignalAny([e?.signal].filter(BG)),o=this,s=[],d={signal:a};let l,c,u=!1,h=0;function y(){u=!0,p()}function p(){h-=1,f()}function f(){c&&!u&&h<r&&s.length<n&&(c(),c=null)}async function g(){try{for await(let v of o){if(u)return;if(a.aborted)throw new na;try{if(v=t(v,d),v===d0)continue;v=LG(v)}catch(b){v=vP(b)}h+=1,_P(v,p,y),s.push(v),l&&(l(),l=null),!u&&(s.length>=n||h>=r)&&await new bP(b=>{c=b})}s.push(EP)}catch(v){const b=vP(v);_P(b,p,y),s.push(b)}finally{u=!0,l&&(l(),l=null)}}g();try{for(;;){for(;s.length>0;){const v=await s[0];if(v===EP)return;if(a.aborted)throw new na;v!==d0&&(yield v),s.shift(),f()}await new bP(v=>{l=v})}}finally{u=!0,c&&(c(),c=null)}}.call(this)}function FG(t=void 0){return t!=null&&$u(t,"options"),t?.signal!=null&&Su(t.signal,"options.signal"),async function*(){let r=0;for await(const i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new na({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function DR(t,e=void 0){for await(const r of CE.call(this,t,e))return!0;return!1}async function zG(t,e=void 0){if(typeof t!="function")throw new xy("fn",["Function","AsyncFunction"],t);return!await DR.call(this,async(...r)=>!await t(...r),e)}async function qG(t,e){for await(const r of CE.call(this,t,e))return r}async function KG(t,e){if(typeof t!="function")throw new xy("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),d0}for await(const n of Pw.call(this,r,e));}function CE(t,e){if(typeof t!="function")throw new xy("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:d0}return Pw.call(this,r,e)}let VG=class extends TG{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function HG(t,e,r){var n;if(typeof t!="function")throw new xy("reducer",["Function","AsyncFunction"],t);r!=null&&$u(r,"options"),r?.signal!=null&&Su(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new na(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await IG(this.destroy(l)),l}const a=new SG,o=a.signal;if(r!=null&&r.signal){const l={once:!0,[PG]:this,[xG]:!0};r.signal.addEventListener("abort",()=>a.abort(),l)}let s=!1;try{for await(const l of this){var d;if(s=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new na;i?e=await t(e,l,{signal:o}):(e=l,i=!0)}if(!s&&!i)throw new VG}finally{a.abort()}return e}async function GG(t){t!=null&&$u(t,"options"),t?.signal!=null&&Su(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new na(void 0,{cause:t.signal.reason});NG(e,n)}return e}function WG(t,e){const r=Pw.call(this,t,e);return async function*(){for await(const i of r)yield*i}.call(this)}function MR(t){if(t=DG(t),MG(t))return 0;if(t<0)throw new AG("number",">= 0",t);return t}function YG(t,e=void 0){return e!=null&&$u(e,"options"),e?.signal!=null&&Su(e.signal,"options.signal"),t=MR(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new na;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new na;t--<=0&&(yield a)}}.call(this)}function ZG(t,e=void 0){return e!=null&&$u(e,"options"),e?.signal!=null&&Su(e.signal,"options.signal"),t=MR(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new na;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new na;if(t-- >0&&(yield a),t<=0)return}}.call(this)}SE.streamReturningOperators={asIndexedPairs:CG(FG,"readable.asIndexedPairs will be removed in a future version."),drop:YG,filter:CE,flatMap:WG,map:Pw,take:ZG,compose:UG};SE.promiseReturningOperators={every:zG,forEach:KG,reduce:HG,toArray:GG,some:DR,find:qG};var uv,SP;function LR(){if(SP)return uv;SP=1;const{ArrayPrototypePop:t,Promise:e}=Mr,{isIterable:r,isNodeStream:n,isWebStream:i}=wc,{pipelineImpl:a}=jE,{finished:o}=Ud;UR();function s(...d){return new e((l,c)=>{let u,h;const y=d[d.length-1];if(y&&typeof y=="object"&&!n(y)&&!r(y)&&!i(y)){const p=t(d);u=p.signal,h=p.end}a(d,(p,f)=>{p?c(p):l(f)},{signal:u,end:h})})}return uv={finished:o,pipeline:s},uv}var $P;function UR(){if($P)return Hb.exports;$P=1;const{Buffer:t}=Dr,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=Mr,{promisify:{custom:i}}=Bi,{streamReturningOperators:a,promiseReturningOperators:o}=SE,{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=Ki,d=NR,{setDefaultHighWaterMark:l,getDefaultHighWaterMark:c}=Tw,{pipeline:u}=jE,{destroyer:h}=dh,y=Ud,p=LR(),f=wc,g=Hb.exports=xE.Stream;g.isDestroyed=f.isDestroyed,g.isDisturbed=f.isDisturbed,g.isErrored=f.isErrored,g.isReadable=f.isReadable,g.isWritable=f.isWritable,g.Readable=Aw();for(const b of r(a)){let w=function(...S){if(new.target)throw s();return g.Readable.from(n(m,this,S))};const m=a[b];e(w,"name",{__proto__:null,value:m.name}),e(w,"length",{__proto__:null,value:m.length}),e(g.Readable.prototype,b,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const b of r(o)){let w=function(...S){if(new.target)throw s();return n(m,this,S)};const m=o[b];e(w,"name",{__proto__:null,value:m.name}),e(w,"length",{__proto__:null,value:m.length}),e(g.Readable.prototype,b,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}g.Writable=kE(),g.Duplex=oc(),g.Transform=OR,g.PassThrough=jR,g.pipeline=u;const{addAbortSignal:v}=$w;return g.addAbortSignal=v,g.finished=y,g.destroy=h,g.compose=d,g.setDefaultHighWaterMark=l,g.getDefaultHighWaterMark=c,e(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),e(u,i,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),e(y,i,{__proto__:null,enumerable:!0,get(){return p.finished}}),g.Stream=g,g._isUint8Array=function(m){return m instanceof Uint8Array},g._uint8ArrayToBuffer=function(m){return t.from(m.buffer,m.byteOffset,m.byteLength)},Hb.exports}(function(t){const e=UR(),r=LR(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(D5);var TP=D5.exports,Am=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};rf.ECIES_CONFIG.isEphemeralKeyCompressed=!0;class Xp{static aes256CtrEncrypt(e,r,n){return Am(this,void 0,void 0,function*(){const i=(void 0)("aes-256-ctr",e,r),a=new TP.Readable({read(){}});return n.on("data",o=>{const s=i.update(o);a.push(s)}),n.on("end",()=>{const o=i.final();a.push(o),a.push(null)}),n.on("error",o=>{a.emit("error",o)}),a})}static aes256CtrDecrypt(e,r,n){return Am(this,void 0,void 0,function*(){const i=(void 0)("aes-256-ctr",e,r),a=new TP.Readable({read(){}});return n.on("data",o=>{const s=i.update(o);a.push(s)}),n.on("end",()=>{const o=i.final();a.push(o),a.push(null)}),n.on("error",o=>{a.emit("error",o)}),a})}static eciesSecp256k1Encrypt(e,r){return Am(this,void 0,void 0,function*(){const n=Buffer.from(e),i=Buffer.from(r),a=rf.encrypt(n,i);let o=0,s=Xp.isEphemeralKeyCompressed?33:65;const d=a.subarray(o,s);o=s,s+=rf.ECIES_CONFIG.symmetricNonceLength;const l=a.subarray(o,s);o=s,s+=16;const c=a.subarray(o,s);return{ciphertext:a.subarray(s),ephemeralPublicKey:d,initializationVector:l,messageAuthenticationCode:c}})}static eciesSecp256k1Decrypt(e){return Am(this,void 0,void 0,function*(){const r=Buffer.from(e.privateKey),n=Buffer.concat([e.ephemeralPublicKey,e.initializationVector,e.messageAuthenticationCode,e.ciphertext]);return rf.decrypt(r,n)})}static get isEphemeralKeyCompressed(){return rf.ECIES_CONFIG.isEphemeralKeyCompressed}}var l0;(function(t){t.Aes256Ctr="A256CTR",t.EciesSecp256k1="ECIES-ES256K"})(l0||(l0={}));var AP=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Qp{constructor(e){this.jws=e}static create(e,r=[]){return AP(this,void 0,void 0,function*(){const n={payload:ft.bytesToBase64Url(e),signatures:[]},i=new Qp(n);for(const a of r)yield i.addSignature(a);return i})}addSignature(e){return AP(this,void 0,void 0,function*(){const r={kid:e.keyId,alg:e.algorithm},n=JSON.stringify(r),i=ft.stringToBase64Url(n),a=`${i}.${this.jws.payload}`,o=ft.stringToBytes(a),s=yield e.sign(o),d=ft.bytesToBase64Url(s);this.jws.signatures.push({protected:i,signature:d})})}getJws(){return this.jws}}const Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function XG(){if(Pm&&typeof Pm.subtle=="object"&&Pm.subtle!=null)return Pm.subtle;throw new Error("crypto.subtle must be defined")}var xm=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},ao;(function(t){t.DataFormats="dataFormats",t.ProtocolContext="protocolContext",t.ProtocolPath="protocolPath",t.Schemas="schemas"})(ao||(ao={}));class nf{static derivePrivateKey(e,r){var n;return xm(this,void 0,void 0,function*(){const i=hs.privateJwkToBytes(e.derivedPrivateKey),a=(n=e.derivationPath)!==null&&n!==void 0?n:[],o=yield nf.derivePrivateKeyBytes(i,r),s=yield hs.privateKeyToJwk(o);return{rootKeyId:e.rootKeyId,derivationScheme:e.derivationScheme,derivationPath:[...a,...r],derivedPrivateKey:s}})}static derivePublicKey(e,r){return xm(this,void 0,void 0,function*(){const n=yield nf.derivePrivateKey(e,r);return yield hs.getPublicJwk(n.derivedPrivateKey)})}static derivePrivateKeyBytes(e,r){return xm(this,void 0,void 0,function*(){nf.validateKeyDerivationPath(r);let n=e;for(const i of r){const a=ft.stringToBytes(i);n=yield nf.deriveKeyUsingHkdf({hashAlgorithm:"SHA-256",initialKeyMaterial:n,info:a,keyLengthInBytes:32})}return n})}static deriveKeyUsingHkdf(e){return xm(this,void 0,void 0,function*(){const{hashAlgorithm:r,initialKeyMaterial:n,info:i,keyLengthInBytes:a}=e,s=yield XG().importKey("raw",n,{name:"HKDF"},!1,["deriveBits"]),d=yield crypto.subtle.deriveBits({name:"HKDF",hash:r,salt:new Uint8Array(0),info:i},s,a*8);return new Uint8Array(d)})}static validateKeyDerivationPath(e){if(e.includes(""))throw new Pe(Te.HdKeyDerivationPathInvalid,`Invalid key derivation path: ${e}`)}}function QG(t,e){return t>e?1:t<e?-1:0}function JG(t){if(typeof t!="object")return!1;for(const e in t)return!1;return!0}function go(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&go(t[e])})}var Ps=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Fe{static getAuthor(e){if(e.authorization===void 0)return;let r;return e.authorization.authorDelegatedGrant!==void 0?r=Fe.getSigner(e.authorization.authorDelegatedGrant):r=Fe.getSigner(e),r}static validateJsonSchema(e){const r=e.descriptor.interface,n=e.descriptor.method,i=r+n;Ap(i,e)}static getSigner(e){return e.authorization===void 0?void 0:Fr.getSignerDid(e.authorization.signature.signatures[0])}static getCid(e){return Ps(this,void 0,void 0,function*(){const r=Object.assign({},e);return r.encodedData&&delete r.encodedData,yield io.computeCid(r)})}static compareCid(e,r){return Ps(this,void 0,void 0,function*(){const n=yield Fe.getCid(e),i=yield Fe.getCid(r);return QG(n,i)})}static createAuthorization(e){return Ps(this,void 0,void 0,function*(){const{descriptor:r,signer:n,delegatedGrant:i,permissionGrantId:a,protocolRole:o}=e;let s;i!==void 0&&(s=yield Fe.getCid(i));const l={signature:yield Fe.createSignature(r,n,{delegatedGrantId:s,permissionGrantId:a,protocolRole:o})};return i!==void 0&&(l.authorDelegatedGrant=i),l})}static createSignature(e,r,n){return Ps(this,void 0,void 0,function*(){const i=yield io.computeCid(e),a=Object.assign({descriptorCid:i},n);go(a);const o=ft.objectToBytes(a);return(yield Qp.create(o,[r])).getJws()})}static getNewestMessage(e){return Ps(this,void 0,void 0,function*(){let r;for(const n of e)(r===void 0||(yield Fe.isNewer(n,r)))&&(r=n);return r})}static getOldestMessage(e){return Ps(this,void 0,void 0,function*(){let r;for(const n of e)(r===void 0||(yield Fe.isOlder(n,r)))&&(r=n);return r})}static isNewer(e,r){return Ps(this,void 0,void 0,function*(){return(yield Fe.compareMessageTimestamp(e,r))>0})}static isOlder(e,r){return Ps(this,void 0,void 0,function*(){return(yield Fe.compareMessageTimestamp(e,r))<0})}static isSignedByAuthorDelegate(e){var r;return((r=e.authorization)===null||r===void 0?void 0:r.authorDelegatedGrant)!==void 0}static isSignedByOwnerDelegate(e){var r;return((r=e.authorization)===null||r===void 0?void 0:r.ownerDelegatedGrant)!==void 0}static compareMessageTimestamp(e,r){return Ps(this,void 0,void 0,function*(){return e.descriptor.messageTimestamp>r.descriptor.messageTimestamp?1:e.descriptor.messageTimestamp<r.descriptor.messageTimestamp?-1:Fe.compareCid(e,r)})}static validateSignatureStructure(e,r,n="GenericSignaturePayload"){return Ps(this,void 0,void 0,function*(){if(e.signatures.length!==1)throw new Pe(Te.AuthenticationMoreThanOneSignatureNotSupported,"expected no more than 1 signature for authorization purpose");const i=Fr.decodePlainObjectPayload(e);Ap(n,i);const{descriptorCid:a}=i,o=yield io.computeCid(r);if(a!==o)throw new Pe(Te.AuthenticateDescriptorCidMismatch,`provided descriptorCid ${a} does not match expected CID ${o}`);return i})}}var eW=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};let ms=class FR{static parse(e){return eW(this,void 0,void 0,function*(){return new FR(e)})}constructor(e){this.id=e.recordId,this.grantor=Fe.getSigner(e),this.grantee=e.descriptor.recipient,this.dateGranted=e.descriptor.dateCreated;const r=e.encodedData,n=ft.base64UrlToObject(r);this.dateExpires=n.dateExpires,this.delegated=n.delegated,this.description=n.description,this.requestId=n.requestId,this.scope=n.scope,this.conditions=n.conditions}};var fd;(function(t){t.CreatedAscending="createdAscending",t.CreatedDescending="createdDescending",t.PublishedAscending="publishedAscending",t.PublishedDescending="publishedDescending"})(fd||(fd={}));class bl{static matchAnyFilter(e,r){if(r.length===0)return!0;for(const n of r)if(this.matchFilter(e,n))return!0;return!1}static matchFilter(e,r){for(const n in r){const i=r[n],a=e[n];if(a===void 0||!(Array.isArray(a)?this.matchAnyIndexValue(i,a):this.matchIndexValue(i,a)))return!1}return!0}static matchAnyIndexValue(e,r){for(const n of r)if(this.matchIndexValue(e,n))return!0;return!1}static matchIndexValue(e,r){if(typeof e=="object"){if(Array.isArray(e)){if(this.matchOneOf(e,r))return!0}else if(this.matchRange(e,r))return!0}else if(r===e)return!0;return!1}static matchOneOf(e,r){for(const n of e)if(r===n)return!0;return!1}static matchRange(e,r){return!(e.lt!==void 0&&r>=e.lt||e.lte!==void 0&&r>e.lte||e.gt!==void 0&&r<=e.gt||e.gte!==void 0&&r<e.gte)}static isEqualFilter(e){return typeof e!="object"}static isRangeFilter(e){return typeof e=="object"&&!Array.isArray(e)?"gt"in e||"lt"in e||"lte"in e||"gte"in e:!1}static isOneOfFilter(e){return!!(typeof e=="object"&&Array.isArray(e))}static convertRangeCriterion(e){let r;return e.to!==void 0&&e.from!==void 0?r={gte:e.from,lt:e.to}:e.to!==void 0?r={lt:e.to}:e.from!==void 0&&(r={gte:e.from}),r}static constructPrefixFilterAsRangeFilter(e){return{gte:e,lt:e+"￿"}}}var bi;(function(t){t.Messages="Messages",t.Protocols="Protocols",t.Records="Records"})(bi||(bi={}));var Xn;(function(t){t.Configure="Configure",t.Query="Query",t.Read="Read",t.Write="Write",t.Delete="Delete",t.Subscribe="Subscribe"})(Xn||(Xn={}));function Fd(t){let e;try{e=kd(t)}catch{e=void 0}if(t!==e)throw new Pe(Te.UrlProtocolNotNormalized,`Protocol URI ${t} must be normalized.`)}function kd(t){return zR(t)}function xw(t){let e;try{e=Iw(t)}catch{e=void 0}if(t!==e)throw new Pe(Te.UrlSchemaNotNormalized,`Schema URI ${t} must be normalized.`)}function Iw(t){return zR(t)}function zR(t){let e;/^[^:]+:(\/{2})?[^\/].*/.test(t)?e=t:e=`http://${t}`;try{const r=new URL(e);return r.search="",r.hash="",tW(r.href)}catch{throw new Pe(Te.UrlProtocolNotNormalizable,"Could not normalize protocol URI")}}function tW(t){return t.endsWith("/")?t.slice(0,-1):t}var fv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},rW=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class cn{static isRecordsWrite(e){return e.descriptor.interface===bi.Records&&e.descriptor.method===Xn.Write}static decrypt(e,r,n){return fv(this,void 0,void 0,function*(){const{encryption:i}=e,a=i.keyEncryption.find(f=>f.rootKeyId===r.rootKeyId&&f.derivationScheme===r.derivationScheme);if(a===void 0)throw new Pe(Te.RecordsDecryptNoMatchingKeyEncryptedFound,`Unable to find a symmetric key encrypted using key         with ID '${r.rootKeyId}' and '${r.derivationScheme}' derivation scheme.`);const o=cn.constructKeyDerivationPath(a.derivationScheme,e),s=yield cn.derivePrivateKey(r,o),d=ft.base64UrlToBytes(a.encryptedKey),l=hs.publicJwkToBytes(a.ephemeralPublicKey),c=ft.base64UrlToBytes(a.initializationVector),u=ft.base64UrlToBytes(a.messageAuthenticationCode),h=yield Xp.eciesSecp256k1Decrypt({ciphertext:d,ephemeralPublicKey:l,initializationVector:c,messageAuthenticationCode:u,privateKey:s}),y=ft.base64UrlToBytes(i.initializationVector);return yield Xp.aes256CtrDecrypt(h,y,n)})}static constructKeyDerivationPath(e,r){const n=r.descriptor,i=r.contextId;let a;return e===ao.DataFormats?a=cn.constructKeyDerivationPathUsingDataFormatsScheme(n.schema,n.dataFormat):e===ao.ProtocolPath?a=cn.constructKeyDerivationPathUsingProtocolPathScheme(n):e===ao.ProtocolContext?a=cn.constructKeyDerivationPathUsingProtocolContextScheme(i):a=cn.constructKeyDerivationPathUsingSchemasScheme(n.schema),a}static constructKeyDerivationPathUsingDataFormatsScheme(e,r){return e!==void 0?[ao.DataFormats,e,r]:[ao.DataFormats,r]}static constructKeyDerivationPathUsingProtocolPathScheme(e){if(e.protocol===void 0)throw new Pe(Te.RecordsProtocolPathDerivationSchemeMissingProtocol,"Unable to construct key derivation path using `protocols` scheme because `protocol` is missing.");const r=e.protocolPath.split("/");return[ao.ProtocolPath,e.protocol,...r]}static constructKeyDerivationPathUsingProtocolContextScheme(e){if(e===void 0)throw new Pe(Te.RecordsProtocolContextDerivationSchemeMissingContextId,"Unable to construct key derivation path using `protocolContext` scheme because `contextId` is missing.");const r=e.split("/")[0];return[ao.ProtocolContext,r]}static constructKeyDerivationPathUsingSchemasScheme(e){if(e===void 0)throw new Pe(Te.RecordsSchemasDerivationSchemeMissingSchema,"Unable to construct key derivation path using `schemas` scheme because `schema` is missing.");return[ao.Schemas,e]}static derivePrivateKey(e,r){var n;return fv(this,void 0,void 0,function*(){if(e.derivedPrivateKey.crv!=="secp256k1")throw new Pe(Te.RecordsDerivePrivateKeyUnSupportedCurve,`Curve ${e.derivedPrivateKey.crv} is not supported.`);const i=(n=e.derivationPath)!==null&&n!==void 0?n:[];cn.validateAncestorKeyAndDescentKeyDerivationPathsMatch(i,r);const a=r.slice(i.length),o=hs.privateJwkToBytes(e.derivedPrivateKey);return yield nf.derivePrivateKeyBytes(o,a)})}static validateAncestorKeyAndDescentKeyDerivationPathsMatch(e,r){for(let n=0;n<e.length;n++){const i=e[n],a=r[n];if(i!==a)throw new Pe(Te.RecordsInvalidAncestorKeyDerivationSegment,`Ancestor key derivation segment '${i}' mismatches against the descendant key derivation segment '${a}'.`)}}static getParentContextFromOfContextId(e){if(e===void 0)return;const r=e.lastIndexOf("/");return r===-1?"":e.substring(0,r)}static normalizeFilter(e){let r;e.protocol===void 0?r=void 0:r=kd(e.protocol);let n;e.schema===void 0?n=void 0:n=Iw(e.schema);const i=Object.assign(Object.assign({},e),{protocol:r,schema:n});return go(i),i}static isStartsWithFilter(e){return typeof e=="object"&&"startsWith"in e&&typeof e.startsWith=="string"}static buildTagIndexes(e){const r={};for(const n in e){const i=e[n];r[`tag.${n}`]=i}return r}static convertTagsFilter(e){const r={};for(const n in e){const i=e[n];r[`tag.${n}`]=this.isStartsWithFilter(i)?bl.constructPrefixFilterAsRangeFilter(i.startsWith):i}return r}static convertFilter(e,r){const{tags:n}=e,i=rW(e,["tags"]);let a={};n!==void 0&&(a=Object.assign({},this.convertTagsFilter(n)));const o=Object.assign(Object.assign({},i),a),{dateCreated:s,datePublished:d,dateUpdated:l,contextId:c}=e,u=s?bl.convertRangeCriterion(s):void 0;u&&(o.dateCreated=u);const h=d?bl.convertRangeCriterion(d):void 0;h&&(o.published=!0,o.datePublished=h),o.published!==!0&&(r===fd.PublishedAscending||r===fd.PublishedDescending)&&(o.published=!0);const y=l?bl.convertRangeCriterion(l):void 0;y&&(o.messageTimestamp=y,delete o.dateUpdated);const p=c?bl.constructPrefixFilterAsRangeFilter(c):void 0;return p&&(o.contextId=p),Array.isArray(o.author)&&o.author.length===0&&delete o.author,Array.isArray(o.recipient)&&o.recipient.length===0&&delete o.recipient,o}static validateDelegatedGrantReferentialIntegrity(e,r,n){var i,a;return fv(this,void 0,void 0,function*(){const o=r?.delegatedGrantId!==void 0,s=((i=e.authorization)===null||i===void 0?void 0:i.authorDelegatedGrant)!==void 0;if(o!==s)throw new Pe(Te.RecordsAuthorDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in message (author) signature and authorDelegatedGrant must both exist or be undefined.          delegatedGrantId in message (author) signature defined: ${o},          authorDelegatedGrant defined: ${s}`);if(s){const c=e.authorization.authorDelegatedGrant;if((yield ms.parse(c)).delegated!==!0)throw new Pe(Te.RecordsAuthorDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const h=c.descriptor.recipient,y=Fe.getSigner(e);if(h!==y)throw new Pe(Te.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${h} in author delegated grant must be the same as the signer ${y} of the message signature.`);const p=yield Fe.getCid(c);if(p!==r.delegatedGrantId)throw new Pe(Te.RecordsAuthorDelegatedGrantCidMismatch,`CID of the author delegated grant ${p} must be the same as           the delegatedGrantId ${r.delegatedGrantId} in the message signature.`)}const d=n?.delegatedGrantId!==void 0,l=((a=e.authorization)===null||a===void 0?void 0:a.ownerDelegatedGrant)!==void 0;if(d!==l)throw new Pe(Te.RecordsOwnerDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in owner signature and ownerDelegatedGrant must both exist or be undefined.          delegatedGrantId in owner signature defined: ${d},          ownerDelegatedGrant defined: ${l}`);if(l){const c=e.authorization.ownerDelegatedGrant;if((yield ms.parse(c)).delegated!==!0)throw new Pe(Te.RecordsOwnerDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const h=c.descriptor.recipient,y=Fr.getSignerDid(e.authorization.ownerSignature.signatures[0]);if(h!==y)throw new Pe(Te.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${h} in owner delegated grant must be the same as the signer ${y} of the owner signature.`);const p=yield Fe.getCid(c);if(p!==n.delegatedGrantId)throw new Pe(Te.RecordsOwnerDelegatedGrantCidMismatch,`CID of the owner delegated grant ${p} must be the same as           the delegatedGrantId ${n.delegatedGrantId} in the owner signature.`)}})}static shouldProtocolAuthorize(e){return e.protocolRole!==void 0}static filterIncludesPublishedRecords(e){return e.datePublished!==void 0||e.published!==!1}static filterIncludesUnpublishedRecords(e){return e.datePublished===void 0&&e.published===void 0?!0:e.published===!1}static canPerformDeleteAgainstRecord(e,r){if(r===void 0)return!1;if(r.descriptor.method===Xn.Delete){if(e.descriptor.prune!==!0)return!1;if(r.descriptor.prune===!0)return!1}return!0}static shouldBuildUnpublishedRecipientFilter(e,r){const{recipient:n}=e;return Array.isArray(n)?n.length===0||n.includes(r):n===void 0||n===r}static shouldBuildUnpublishedAuthorFilter(e,r){const{author:n}=e;return Array.isArray(n)?n.length===0||n.includes(r):n===void 0||n===r}}var hv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Hs{static performBaseValidation(e){return hv(this,void 0,void 0,function*(){const{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}=e,s=r.descriptor;Hs.verifyExpectedGrantorAndGrantee(n,i,a);const d=n;yield Hs.verifyGrantActive(d,s.messageTimestamp,a,o),yield Hs.verifyGrantScopeInterfaceAndMethod(s.interface,s.method,a)})}static verifyExpectedGrantorAndGrantee(e,r,n){const i=n.grantee;if(r!==i)throw new Pe(Te.GrantAuthorizationNotGrantedToAuthor,`Permission grant is granted to ${i}, but need to be granted to ${r}`);const a=n.grantor;if(e!==a)throw new Pe(Te.GrantAuthorizationNotGrantedForTenant,`Permission grant is granted by ${a}, but need to be granted by ${e}`)}static verifyGrantActive(e,r,n,i){return hv(this,void 0,void 0,function*(){if(r<n.dateGranted)throw new Pe(Te.GrantAuthorizationGrantNotYetActive,"The message has a timestamp before the associated permission grant becomes active");if(r>=n.dateExpires)throw new Pe(Te.GrantAuthorizationGrantExpired,"The message has timestamp after the expiry of the associated permission grant");const a={parentId:n.id,protocolPath:"grant/revocation",isLatestBaseState:!0},{messages:o}=yield i.query(e,[a]),s=yield Fe.getOldestMessage(o);if(s!==void 0&&s.descriptor.messageTimestamp<=r)throw new Pe(Te.GrantAuthorizationGrantRevoked,`Permission grant with CID ${n.id} has been revoked`)})}static verifyGrantScopeInterfaceAndMethod(e,r,n){return hv(this,void 0,void 0,function*(){if(e!==n.scope.interface)throw new Pe(Te.GrantAuthorizationInterfaceMismatch,`DWN Interface of incoming message is outside the scope of permission grant with ID ${n.id}`);if(r!==n.scope.method)throw new Pe(Te.GrantAuthorizationMethodMismatch,`DWN Method of incoming message is outside the scope of permission grant with ID ${n.id}`)})}}var u0;(function(t){t.Required="Required",t.Prohibited="Prohibited"})(u0||(u0={}));var Im=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Ys{static authorizeWrite(e){return Im(this,void 0,void 0,function*(){const{recordsWriteMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}=e;yield Hs.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}),Ys.verifyScope(r,a.scope),Ys.verifyConditions(r,a.conditions)})}static authorizeRead(e){return Im(this,void 0,void 0,function*(){const{recordsReadMessage:r,recordsWriteMessageToBeRead:n,expectedGrantor:i,expectedGrantee:a,permissionGrant:o,messageStore:s}=e;yield Hs.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:a,permissionGrant:o,messageStore:s}),Ys.verifyScope(n,o.scope)})}static authorizeQueryOrSubscribe(e){return Im(this,void 0,void 0,function*(){const{incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}=e;yield Hs.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o});const d=a.scope.protocol,l=r.descriptor.filter.protocol;if(d!==void 0&&l!==d)throw new Pe(Te.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch,`Grant protocol scope ${d} does not match protocol in message ${l}`)})}static authorizeDelete(e){return Im(this,void 0,void 0,function*(){const{recordsDeleteMessage:r,recordsWriteToDelete:n,expectedGrantor:i,expectedGrantee:a,permissionGrant:o,messageStore:s}=e;yield Hs.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:a,permissionGrant:o,messageStore:s});const l=o.scope.protocol,c=n.descriptor.protocol;if(l!==void 0&&c!==l)throw new Pe(Te.RecordsGrantAuthorizationDeleteProtocolScopeMismatch,`Grant protocol scope ${l} does not match protocol in record to delete ${c}`)})}static verifyScope(e,r){if(r.protocol!==e.descriptor.protocol)throw new Pe(Te.RecordsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the record");if(r.contextId!==void 0&&(e.contextId===void 0||!e.contextId.startsWith(r.contextId)))throw new Pe(Te.RecordsGrantAuthorizationScopeContextIdMismatch,"Grant scope specifies different contextId than what appears in the record");if(r.protocolPath!==void 0&&r.protocolPath!==e.descriptor.protocolPath)throw new Pe(Te.RecordsGrantAuthorizationScopeProtocolPathMismatch,"Grant scope specifies different protocolPath than what appears in the record")}static verifyConditions(e,r){if(r?.publication===u0.Required&&!e.descriptor.published)throw new Pe(Te.RecordsGrantAuthorizationConditionPublicationRequired,"Permission grant requires message to be published");if(r?.publication===u0.Prohibited&&e.descriptor.published)throw new Pe(Te.RecordsGrantAuthorizationConditionPublicationProhibited,"Permission grant prohibits message from being published")}}class $ extends Array{constructor(e,r){if(super(e),this.sign=r,Object.setPrototypeOf(this,$.prototype),e>$.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var r=Math.floor,n=Number.isFinite;if(typeof e=="number"){if(e===0)return $.__zero();if($.__isOneDigitInt(e))return 0>e?$.__oneDigit(-e,!0):$.__oneDigit(e,!1);if(!n(e)||r(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return $.__fromDouble(e)}if(typeof e=="string"){const i=$.__fromString(e);if(i===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return i}if(typeof e=="boolean")return e===!0?$.__oneDigit(1,!1):$.__zero();if(typeof e=="object"){if(e.constructor===$)return e;const i=$.__toPrimitive(e);return $.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const r of this)e.push((r&&(r>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?$.__toStringGeneric(this,e,!1):$.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const r=e.length;if(r===0)return 0;if(r===1){const g=e.__unsignedDigit(0);return e.sign?-g:g}const n=e.__digit(r-1),i=$.__clz30(n),a=30*r-i;if(1024<a)return e.sign?-1/0:1/0;let o=a-1,s=n,d=r-1;const l=i+3;let c=l===32?0:s<<l;c>>>=12;const u=l-12;let h=12<=l?0:s<<20+l,y=20+l;for(0<u&&0<d&&(d--,s=e.__digit(d),c|=s>>>30-u,h=s<<u+2,y=u+2);0<y&&0<d;)d--,s=e.__digit(d),h|=30<=y?s<<y-30:s>>>30-y,y-=30;const p=$.__decideRounding(e,y,d,s);if((p===1||p===0&&(1&h)==1)&&(h=h+1>>>0,h===0&&(c++,c>>>20!=0&&(c=0,o++,1023<o))))return e.sign?-1/0:1/0;const f=e.sign?-2147483648:0;return o=o+1023<<20,$.__kBitConversionInts[1]=f|o|c,$.__kBitConversionInts[0]=h,$.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const r=e.__copy();return r.sign=!e.sign,r}static bitwiseNot(e){return e.sign?$.__absoluteSubOne(e).__trim():$.__absoluteAddOne(e,!0)}static exponentiate(e,r){if(r.sign)throw new RangeError("Exponent must be positive");if(r.length===0)return $.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&r.__digit(0))?$.unaryMinus(e):e;if(1<r.length)throw new RangeError("BigInt too big");let n=r.__unsignedDigit(0);if(n===1)return e;if(n>=$.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const o=1+(0|n/30),s=e.sign&&(1&n)!=0,d=new $(o,s);d.__initializeDigits();const l=1<<n%30;return d.__setDigit(o-1,l),d}let i=null,a=e;for(1&n&&(i=e),n>>=1;n!==0;n>>=1)a=$.multiply(a,a),1&n&&(i===null?i=a:i=$.multiply(i,a));return i}static multiply(e,r){if(e.length===0)return e;if(r.length===0)return r;let n=e.length+r.length;30<=e.__clzmsd()+r.__clzmsd()&&n--;const i=new $(n,e.sign!==r.sign);i.__initializeDigits();for(let a=0;a<e.length;a++)$.__multiplyAccumulate(r,e.__digit(a),i,a);return i.__trim()}static divide(e,r){if(r.length===0)throw new RangeError("Division by zero");if(0>$.__absoluteCompare(e,r))return $.__zero();const n=e.sign!==r.sign,i=r.__unsignedDigit(0);let a;if(r.length===1&&32767>=i){if(i===1)return n===e.sign?e:$.unaryMinus(e);a=$.__absoluteDivSmall(e,i,null)}else a=$.__absoluteDivLarge(e,r,!0,!1);return a.sign=n,a.__trim()}static remainder(e,r){if(r.length===0)throw new RangeError("Division by zero");if(0>$.__absoluteCompare(e,r))return e;const n=r.__unsignedDigit(0);if(r.length===1&&32767>=n){if(n===1)return $.__zero();const a=$.__absoluteModSmall(e,n);return a===0?$.__zero():$.__oneDigit(a,e.sign)}const i=$.__absoluteDivLarge(e,r,!1,!0);return i.sign=e.sign,i.__trim()}static add(e,r){const n=e.sign;return n===r.sign?$.__absoluteAdd(e,r,n):0<=$.__absoluteCompare(e,r)?$.__absoluteSub(e,r,n):$.__absoluteSub(r,e,!n)}static subtract(e,r){const n=e.sign;return n===r.sign?0<=$.__absoluteCompare(e,r)?$.__absoluteSub(e,r,n):$.__absoluteSub(r,e,!n):$.__absoluteAdd(e,r,n)}static leftShift(e,r){return r.length===0||e.length===0?e:r.sign?$.__rightShiftByAbsolute(e,r):$.__leftShiftByAbsolute(e,r)}static signedRightShift(e,r){return r.length===0||e.length===0?e:r.sign?$.__leftShiftByAbsolute(e,r):$.__rightShiftByAbsolute(e,r)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,r){return 0>$.__compareToBigInt(e,r)}static lessThanOrEqual(e,r){return 0>=$.__compareToBigInt(e,r)}static greaterThan(e,r){return 0<$.__compareToBigInt(e,r)}static greaterThanOrEqual(e,r){return 0<=$.__compareToBigInt(e,r)}static equal(e,r){if(e.sign!==r.sign||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e.__digit(n)!==r.__digit(n))return!1;return!0}static notEqual(e,r){return!$.equal(e,r)}static bitwiseAnd(e,r){var n=Math.max;if(!e.sign&&!r.sign)return $.__absoluteAnd(e,r).__trim();if(e.sign&&r.sign){const i=n(e.length,r.length)+1;let a=$.__absoluteSubOne(e,i);const o=$.__absoluteSubOne(r);return a=$.__absoluteOr(a,o,a),$.__absoluteAddOne(a,!0,a).__trim()}return e.sign&&([e,r]=[r,e]),$.__absoluteAndNot(e,$.__absoluteSubOne(r)).__trim()}static bitwiseXor(e,r){var n=Math.max;if(!e.sign&&!r.sign)return $.__absoluteXor(e,r).__trim();if(e.sign&&r.sign){const o=n(e.length,r.length),s=$.__absoluteSubOne(e,o),d=$.__absoluteSubOne(r);return $.__absoluteXor(s,d,s).__trim()}const i=n(e.length,r.length)+1;e.sign&&([e,r]=[r,e]);let a=$.__absoluteSubOne(r,i);return a=$.__absoluteXor(a,e,a),$.__absoluteAddOne(a,!0,a).__trim()}static bitwiseOr(e,r){var n=Math.max;const i=n(e.length,r.length);if(!e.sign&&!r.sign)return $.__absoluteOr(e,r).__trim();if(e.sign&&r.sign){let o=$.__absoluteSubOne(e,i);const s=$.__absoluteSubOne(r);return o=$.__absoluteAnd(o,s,o),$.__absoluteAddOne(o,!0,o).__trim()}e.sign&&([e,r]=[r,e]);let a=$.__absoluteSubOne(r,i);return a=$.__absoluteAndNot(a,e,a),$.__absoluteAddOne(a,!0,a).__trim()}static asIntN(e,r){var n=Math.floor;if(r.length===0)return r;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return $.__zero();if(e>=$.__kMaxLengthBits)return r;const i=0|(e+29)/30;if(r.length<i)return r;const a=r.__unsignedDigit(i-1),o=1<<(e-1)%30;if(r.length===i&&a<o)return r;if((a&o)!==o)return $.__truncateToNBits(e,r);if(!r.sign)return $.__truncateAndSubFromPowerOfTwo(e,r,!0);if(!(a&o-1)){for(let s=i-2;0<=s;s--)if(r.__digit(s)!==0)return $.__truncateAndSubFromPowerOfTwo(e,r,!1);return r.length===i&&a===o?r:$.__truncateToNBits(e,r)}return $.__truncateAndSubFromPowerOfTwo(e,r,!1)}static asUintN(e,r){var n=Math.floor;if(r.length===0)return r;if(e=n(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return $.__zero();if(r.sign){if(e>$.__kMaxLengthBits)throw new RangeError("BigInt too big");return $.__truncateAndSubFromPowerOfTwo(e,r,!1)}if(e>=$.__kMaxLengthBits)return r;const i=0|(e+29)/30;if(r.length<i)return r;const a=e%30;return r.length==i&&(a===0||!(r.__digit(i-1)>>>a))?r:$.__truncateToNBits(e,r)}static ADD(e,r){if(e=$.__toPrimitive(e),r=$.__toPrimitive(r),typeof e=="string")return typeof r!="string"&&(r=r.toString()),e+r;if(typeof r=="string")return e.toString()+r;if(e=$.__toNumeric(e),r=$.__toNumeric(r),$.__isBigInt(e)&&$.__isBigInt(r))return $.add(e,r);if(typeof e=="number"&&typeof r=="number")return e+r;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,r){return $.__compare(e,r,0)}static LE(e,r){return $.__compare(e,r,1)}static GT(e,r){return $.__compare(e,r,2)}static GE(e,r){return $.__compare(e,r,3)}static EQ(e,r){for(;;){if($.__isBigInt(e))return $.__isBigInt(r)?$.equal(e,r):$.EQ(r,e);if(typeof e=="number"){if($.__isBigInt(r))return $.__equalToNumber(r,e);if(typeof r!="object")return e==r;r=$.__toPrimitive(r)}else if(typeof e=="string"){if($.__isBigInt(r))return e=$.__fromString(e),e!==null&&$.equal(e,r);if(typeof r!="object")return e==r;r=$.__toPrimitive(r)}else if(typeof e=="boolean"){if($.__isBigInt(r))return $.__equalToNumber(r,+e);if(typeof r!="object")return e==r;r=$.__toPrimitive(r)}else if(typeof e=="symbol"){if($.__isBigInt(r))return!1;if(typeof r!="object")return e==r;r=$.__toPrimitive(r)}else if(typeof e=="object"){if(typeof r=="object"&&r.constructor!==$)return e==r;e=$.__toPrimitive(e)}else return e==r}}static NE(e,r){return!$.EQ(e,r)}static DataViewGetBigInt64(e,r,n=!1){return $.asIntN(64,$.DataViewGetBigUint64(e,r,n))}static DataViewGetBigUint64(e,r,n=!1){const[i,a]=n?[4,0]:[0,4],o=e.getUint32(r+i,n),s=e.getUint32(r+a,n),d=new $(3,!1);return d.__setDigit(0,1073741823&s),d.__setDigit(1,(268435455&o)<<2|s>>>30),d.__setDigit(2,o>>>28),d.__trim()}static DataViewSetBigInt64(e,r,n,i=!1){$.DataViewSetBigUint64(e,r,n,i)}static DataViewSetBigUint64(e,r,n,i=!1){n=$.asUintN(64,n);let a=0,o=0;if(0<n.length&&(o=n.__digit(0),1<n.length)){const l=n.__digit(1);o|=l<<30,a=l>>>2,2<n.length&&(a|=n.__digit(2)<<28)}const[s,d]=i?[4,0]:[0,4];e.setUint32(r+s,a,i),e.setUint32(r+d,o,i)}static __zero(){return new $(0,!1)}static __oneDigit(e,r){const n=new $(1,r);return n.__setDigit(0,e),n}__copy(){const e=new $(this.length,this.sign);for(let r=0;r<this.length;r++)e[r]=this[r];return e}__trim(){let e=this.length,r=this[e-1];for(;r===0;)e--,r=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,r,n,i){if(0<r)return-1;let a;if(0>r)a=-r-1;else{if(n===0)return-1;n--,i=e.__digit(n),a=29}let o=1<<a;if(!(i&o))return-1;if(o-=1,(i&o)!=0)return 1;for(;0<n;)if(n--,e.__digit(n)!==0)return 1;return 0}static __fromDouble(e){$.__kBitConversionDouble[0]=e;const r=2047&$.__kBitConversionInts[1]>>>20,n=r-1023,i=(0|n/30)+1,a=new $(i,0>e);let o=1048575&$.__kBitConversionInts[1]|1048576,s=$.__kBitConversionInts[0];const d=20,l=n%30;let c,u=0;if(l<20){const h=d-l;u=h+32,c=o>>>h,o=o<<32-h|s>>>h,s<<=32-h}else if(l===20)u=32,c=o,o=s,s=0;else{const h=l-d;u=32-h,c=o<<h|s>>>32-h,o=s<<h,s=0}a.__setDigit(i-1,c);for(let h=i-2;0<=h;h--)0<u?(u-=30,c=o>>>2,o=o<<30|s>>>2,s<<=30):c=0,a.__setDigit(h,c);return a.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,r=0){let n=0;const i=e.length;let a=0;if(a===i)return $.__zero();let o=e.charCodeAt(a);for(;$.__isWhitespace(o);){if(++a===i)return $.__zero();o=e.charCodeAt(a)}if(o===43){if(++a===i)return null;o=e.charCodeAt(a),n=1}else if(o===45){if(++a===i)return null;o=e.charCodeAt(a),n=-1}if(r===0){if(r=10,o===48){if(++a===i)return $.__zero();if(o=e.charCodeAt(a),o===88||o===120){if(r=16,++a===i)return null;o=e.charCodeAt(a)}else if(o===79||o===111){if(r=8,++a===i)return null;o=e.charCodeAt(a)}else if(o===66||o===98){if(r=2,++a===i)return null;o=e.charCodeAt(a)}}}else if(r===16&&o===48){if(++a===i)return $.__zero();if(o=e.charCodeAt(a),o===88||o===120){if(++a===i)return null;o=e.charCodeAt(a)}}if(n!=0&&r!==10)return null;for(;o===48;){if(++a===i)return $.__zero();o=e.charCodeAt(a)}const s=i-a;let d=$.__kMaxBitsPerChar[r],l=$.__kBitsPerCharTableMultiplier-1;if(s>1073741824/d)return null;const c=d*s+l>>>$.__kBitsPerCharTableShift,u=new $(0|(c+29)/30,!1),h=10>r?r:10,y=10<r?r-10:0;if(r&r-1){u.__initializeDigits();let p=!1,f=0;do{let g=0,v=1;for(;;){let m;if(o-48>>>0<h)m=o-48;else if((32|o)-97>>>0<y)m=(32|o)-87;else{p=!0;break}const w=v*r;if(1073741823<w)break;if(v=w,g=g*r+m,f++,++a===i){p=!0;break}o=e.charCodeAt(a)}l=30*$.__kBitsPerCharTableMultiplier-1;const b=0|(d*f+l>>>$.__kBitsPerCharTableShift)/30;u.__inplaceMultiplyAdd(v,g,b)}while(!p)}else{d>>=$.__kBitsPerCharTableShift;const p=[],f=[];let g=!1;do{let v=0,b=0;for(;;){let m;if(o-48>>>0<h)m=o-48;else if((32|o)-97>>>0<y)m=(32|o)-87;else{g=!0;break}if(b+=d,v=v<<d|m,++a===i){g=!0;break}if(o=e.charCodeAt(a),30<b+d)break}p.push(v),f.push(b)}while(!g);$.__fillFromParts(u,p,f)}if(a!==i){if(!$.__isWhitespace(o))return null;for(a++;a<i;a++)if(o=e.charCodeAt(a),!$.__isWhitespace(o))return null}return u.sign=n==-1,u.__trim()}static __fillFromParts(e,r,n){let i=0,a=0,o=0;for(let s=r.length-1;0<=s;s--){const d=r[s],l=n[s];a|=d<<o,o+=l,o===30?(e.__setDigit(i++,a),o=0,a=0):30<o&&(e.__setDigit(i++,1073741823&a),o-=30,a=d>>>l-o)}if(a!==0){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,a)}for(;i<e.length;i++)e.__setDigit(i,0)}static __toStringBasePowerOfTwo(e,r){const n=e.length;let i=r-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const a=i,o=r-1,s=e.__digit(n-1),d=$.__clz30(s);let l=0|(30*n-d+a-1)/a;if(e.sign&&l++,268435456<l)throw new Error("string too long");const c=Array(l);let u=l-1,h=0,y=0;for(let f=0;f<n-1;f++){const g=e.__digit(f),v=(h|g<<y)&o;c[u--]=$.__kConversionChars[v];const b=a-y;for(h=g>>>b,y=30-b;y>=a;)c[u--]=$.__kConversionChars[h&o],h>>>=a,y-=a}const p=(h|s<<y)&o;for(c[u--]=$.__kConversionChars[p],h=s>>>a-y;h!==0;)c[u--]=$.__kConversionChars[h&o],h>>>=a;if(e.sign&&(c[u--]="-"),u!=-1)throw new Error("implementation bug");return c.join("")}static __toStringGeneric(e,r,n){const i=e.length;if(i===0)return"";if(i===1){let f=e.__unsignedDigit(0).toString(r);return n===!1&&e.sign&&(f="-"+f),f}const a=30*i-$.__clz30(e.__digit(i-1)),o=$.__kMaxBitsPerChar[r],s=o-1;let d=a*$.__kBitsPerCharTableMultiplier;d+=s-1,d=0|d/s;const l=d+1>>1,c=$.exponentiate($.__oneDigit(r,!1),$.__oneDigit(l,!1));let u,h;const y=c.__unsignedDigit(0);if(c.length===1&&32767>=y){u=new $(e.length,!1),u.__initializeDigits();let f=0;for(let g=2*e.length-1;0<=g;g--){const v=f<<15|e.__halfDigit(g);u.__setHalfDigit(g,0|v/y),f=0|v%y}h=f.toString(r)}else{const f=$.__absoluteDivLarge(e,c,!0,!0);u=f.quotient;const g=f.remainder.__trim();h=$.__toStringGeneric(g,r,!0)}u.__trim();let p=$.__toStringGeneric(u,r,!0);for(;h.length<l;)h="0"+h;return n===!1&&e.sign&&(p="-"+p),p+h}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,r){const n=e.sign;if(n!==r.sign)return $.__unequalSign(n);const i=$.__absoluteCompare(e,r);return 0<i?$.__absoluteGreater(n):0>i?$.__absoluteLess(n):0}static __compareToNumber(e,r){if($.__isOneDigitInt(r)){const n=e.sign,i=0>r;if(n!==i)return $.__unequalSign(n);if(e.length===0){if(i)throw new Error("implementation bug");return r===0?0:-1}if(1<e.length)return $.__absoluteGreater(n);const a=Math.abs(r),o=e.__unsignedDigit(0);return o>a?$.__absoluteGreater(n):o<a?$.__absoluteLess(n):0}return $.__compareToDouble(e,r)}static __compareToDouble(e,r){if(r!==r)return r;if(r===1/0)return-1;if(r===-1/0)return 1;const n=e.sign;if(n!==0>r)return $.__unequalSign(n);if(r===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;$.__kBitConversionDouble[0]=r;const i=2047&$.__kBitConversionInts[1]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const a=i-1023;if(0>a)return $.__absoluteGreater(n);const o=e.length;let s=e.__digit(o-1);const d=$.__clz30(s),l=30*o-d,c=a+1;if(l<c)return $.__absoluteLess(n);if(l>c)return $.__absoluteGreater(n);let u=1048576|1048575&$.__kBitConversionInts[1],h=$.__kBitConversionInts[0];const y=20,p=29-d;if(p!==(0|(l-1)%30))throw new Error("implementation bug");let f,g=0;if(20>p){const v=y-p;g=v+32,f=u>>>v,u=u<<32-v|h>>>v,h<<=32-v}else if(p===20)g=32,f=u,u=h,h=0;else{const v=p-y;g=32-v,f=u<<v|h>>>32-v,u=h<<v,h=0}if(s>>>=0,f>>>=0,s>f)return $.__absoluteGreater(n);if(s<f)return $.__absoluteLess(n);for(let v=o-2;0<=v;v--){0<g?(g-=30,f=u>>>2,u=u<<30|h>>>2,h<<=30):f=0;const b=e.__unsignedDigit(v);if(b>f)return $.__absoluteGreater(n);if(b<f)return $.__absoluteLess(n)}if(u!==0||h!==0){if(g===0)throw new Error("implementation bug");return $.__absoluteLess(n)}return 0}static __equalToNumber(e,r){var n=Math.abs;return $.__isOneDigitInt(r)?r===0?e.length===0:e.length===1&&e.sign===0>r&&e.__unsignedDigit(0)===n(r):$.__compareToDouble(e,r)===0}static __comparisonResultToBool(e,r){return r===0?0>e:r===1?0>=e:r===2?0<e:r===3?0<=e:void 0}static __compare(e,r,n){if(e=$.__toPrimitive(e),r=$.__toPrimitive(r),typeof e=="string"&&typeof r=="string")switch(n){case 0:return e<r;case 1:return e<=r;case 2:return e>r;case 3:return e>=r}if($.__isBigInt(e)&&typeof r=="string")return r=$.__fromString(r),r!==null&&$.__comparisonResultToBool($.__compareToBigInt(e,r),n);if(typeof e=="string"&&$.__isBigInt(r))return e=$.__fromString(e),e!==null&&$.__comparisonResultToBool($.__compareToBigInt(e,r),n);if(e=$.__toNumeric(e),r=$.__toNumeric(r),$.__isBigInt(e)){if($.__isBigInt(r))return $.__comparisonResultToBool($.__compareToBigInt(e,r),n);if(typeof r!="number")throw new Error("implementation bug");return $.__comparisonResultToBool($.__compareToNumber(e,r),n)}if(typeof e!="number")throw new Error("implementation bug");if($.__isBigInt(r))return $.__comparisonResultToBool($.__compareToNumber(r,e),2^n);if(typeof r!="number")throw new Error("implementation bug");return n===0?e<r:n===1?e<=r:n===2?e>r:n===3?e>=r:void 0}__clzmsd(){return $.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,r,n){if(e.length<r.length)return $.__absoluteAdd(r,e,n);if(e.length===0)return e;if(r.length===0)return e.sign===n?e:$.unaryMinus(e);let i=e.length;(e.__clzmsd()===0||r.length===e.length&&r.__clzmsd()===0)&&i++;const a=new $(i,n);let o=0,s=0;for(;s<r.length;s++){const d=e.__digit(s)+r.__digit(s)+o;o=d>>>30,a.__setDigit(s,1073741823&d)}for(;s<e.length;s++){const d=e.__digit(s)+o;o=d>>>30,a.__setDigit(s,1073741823&d)}return s<a.length&&a.__setDigit(s,o),a.__trim()}static __absoluteSub(e,r,n){if(e.length===0)return e;if(r.length===0)return e.sign===n?e:$.unaryMinus(e);const i=new $(e.length,n);let a=0,o=0;for(;o<r.length;o++){const s=e.__digit(o)-r.__digit(o)-a;a=1&s>>>30,i.__setDigit(o,1073741823&s)}for(;o<e.length;o++){const s=e.__digit(o)-a;a=1&s>>>30,i.__setDigit(o,1073741823&s)}return i.__trim()}static __absoluteAddOne(e,r,n=null){const i=e.length;n===null?n=new $(i,r):n.sign=r;let a=1;for(let o=0;o<i;o++){const s=e.__digit(o)+a;a=s>>>30,n.__setDigit(o,1073741823&s)}return a!=0&&n.__setDigitGrow(i,1),n}static __absoluteSubOne(e,r){const n=e.length;r=r||n;const i=new $(r,!1);let a=1;for(let o=0;o<n;o++){const s=e.__digit(o)-a;a=1&s>>>30,i.__setDigit(o,1073741823&s)}if(a!=0)throw new Error("implementation bug");for(let o=n;o<r;o++)i.__setDigit(o,0);return i}static __absoluteAnd(e,r,n=null){let i=e.length,a=r.length,o=a;if(i<a){o=i;const l=e,c=i;e=r,i=a,r=l,a=c}let s=o;n===null?n=new $(s,!1):s=n.length;let d=0;for(;d<o;d++)n.__setDigit(d,e.__digit(d)&r.__digit(d));for(;d<s;d++)n.__setDigit(d,0);return n}static __absoluteAndNot(e,r,n=null){const i=e.length,a=r.length;let o=a;i<a&&(o=i);let s=i;n===null?n=new $(s,!1):s=n.length;let d=0;for(;d<o;d++)n.__setDigit(d,e.__digit(d)&~r.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<s;d++)n.__setDigit(d,0);return n}static __absoluteOr(e,r,n=null){let i=e.length,a=r.length,o=a;if(i<a){o=i;const l=e,c=i;e=r,i=a,r=l,a=c}let s=i;n===null?n=new $(s,!1):s=n.length;let d=0;for(;d<o;d++)n.__setDigit(d,e.__digit(d)|r.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<s;d++)n.__setDigit(d,0);return n}static __absoluteXor(e,r,n=null){let i=e.length,a=r.length,o=a;if(i<a){o=i;const l=e,c=i;e=r,i=a,r=l,a=c}let s=i;n===null?n=new $(s,!1):s=n.length;let d=0;for(;d<o;d++)n.__setDigit(d,e.__digit(d)^r.__digit(d));for(;d<i;d++)n.__setDigit(d,e.__digit(d));for(;d<s;d++)n.__setDigit(d,0);return n}static __absoluteCompare(e,r){const n=e.length-r.length;if(n!=0)return n;let i=e.length-1;for(;0<=i&&e.__digit(i)===r.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>r.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(e,r,n,i){if(r===0)return;const a=32767&r,o=r>>>15;let s=0,d=0;for(let l,c=0;c<e.length;c++,i++){l=n.__digit(i);const u=e.__digit(c),h=32767&u,y=u>>>15,p=$.__imul(h,a),f=$.__imul(h,o),g=$.__imul(y,a),v=$.__imul(y,o);l+=d+p+s,s=l>>>30,l&=1073741823,l+=((32767&f)<<15)+((32767&g)<<15),s+=l>>>30,d=v+(f>>>15)+(g>>>15),n.__setDigit(i,1073741823&l)}for(;s!=0||d!==0;i++){let l=n.__digit(i);l+=s+d,d=0,s=l>>>30,n.__setDigit(i,1073741823&l)}}static __internalMultiplyAdd(e,r,n,i,a){let o=n,s=0;for(let d=0;d<i;d++){const l=e.__digit(d),c=$.__imul(32767&l,r),u=$.__imul(l>>>15,r),h=c+((32767&u)<<15)+s+o;o=h>>>30,s=u>>>15,a.__setDigit(d,1073741823&h)}if(a.length>i)for(a.__setDigit(i++,o+s);i<a.length;)a.__setDigit(i++,0);else if(o+s!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,r,n){n>this.length&&(n=this.length);const i=32767&e,a=e>>>15;let o=0,s=r;for(let d=0;d<n;d++){const l=this.__digit(d),c=32767&l,u=l>>>15,h=$.__imul(c,i),y=$.__imul(c,a),p=$.__imul(u,i),f=$.__imul(u,a);let g=s+h+o;o=g>>>30,g&=1073741823,g+=((32767&y)<<15)+((32767&p)<<15),o+=g>>>30,s=f+(y>>>15)+(p>>>15),this.__setDigit(d,1073741823&g)}if(o!=0||s!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,r,n=null){n===null&&(n=new $(e.length,!1));let i=0;for(let a,o=2*e.length-1;0<=o;o-=2){a=(i<<15|e.__halfDigit(o))>>>0;const s=0|a/r;i=0|a%r,a=(i<<15|e.__halfDigit(o-1))>>>0;const d=0|a/r;i=0|a%r,n.__setDigit(o>>>1,s<<15|d)}return n}static __absoluteModSmall(e,r){let n=0;for(let i=2*e.length-1;0<=i;i--)n=0|((n<<15|e.__halfDigit(i))>>>0)%r;return n}static __absoluteDivLarge(e,r,n,i){const a=r.__halfDigitLength(),o=r.length,s=e.__halfDigitLength()-a;let d=null;n&&(d=new $(s+2>>>1,!1),d.__initializeDigits());const l=new $(a+2>>>1,!1);l.__initializeDigits();const c=$.__clz15(r.__halfDigit(a-1));0<c&&(r=$.__specialLeftShift(r,c,0));const u=$.__specialLeftShift(e,c,1),h=r.__halfDigit(a-1);let y=0;for(let p,f=s;0<=f;f--){p=32767;const g=u.__halfDigit(f+a);if(g!==h){const b=(g<<15|u.__halfDigit(f+a-1))>>>0;p=0|b/h;let m=0|b%h;const w=r.__halfDigit(a-2),S=u.__halfDigit(f+a-2);for(;$.__imul(p,w)>>>0>(m<<16|S)>>>0&&(p--,m+=h,!(32767<m)););}$.__internalMultiplyAdd(r,p,0,o,l);let v=u.__inplaceSub(l,f,a+1);v!==0&&(v=u.__inplaceAdd(r,f,a),u.__setHalfDigit(f+a,32767&u.__halfDigit(f+a)+v),p--),n&&(1&f?y=p<<15:d.__setDigit(f>>>1,y|p))}if(i)return u.__inplaceRightShift(c),n?{quotient:d,remainder:u}:u;if(n)return d;throw new Error("unreachable")}static __clz15(e){return $.__clz30(e)-15}__inplaceAdd(e,r,n){let i=0;for(let a=0;a<n;a++){const o=this.__halfDigit(r+a)+e.__halfDigit(a)+i;i=o>>>15,this.__setHalfDigit(r+a,32767&o)}return i}__inplaceSub(e,r,n){let i=0;if(1&r){r>>=1;let a=this.__digit(r),o=32767&a,s=0;for(;s<n-1>>>1;s++){const c=e.__digit(s),u=(a>>>15)-(32767&c)-i;i=1&u>>>15,this.__setDigit(r+s,(32767&u)<<15|32767&o),a=this.__digit(r+s+1),o=(32767&a)-(c>>>15)-i,i=1&o>>>15}const d=e.__digit(s),l=(a>>>15)-(32767&d)-i;if(i=1&l>>>15,this.__setDigit(r+s,(32767&l)<<15|32767&o),r+s+1>=this.length)throw new RangeError("out of bounds");!(1&n)&&(a=this.__digit(r+s+1),o=(32767&a)-(d>>>15)-i,i=1&o>>>15,this.__setDigit(r+e.length,1073709056&a|32767&o))}else{r>>=1;let a=0;for(;a<e.length-1;a++){const c=this.__digit(r+a),u=e.__digit(a),h=(32767&c)-(32767&u)-i;i=1&h>>>15;const y=(c>>>15)-(u>>>15)-i;i=1&y>>>15,this.__setDigit(r+a,(32767&y)<<15|32767&h)}const o=this.__digit(r+a),s=e.__digit(a),d=(32767&o)-(32767&s)-i;i=1&d>>>15;let l=0;!(1&n)&&(l=(o>>>15)-(s>>>15)-i,i=1&l>>>15),this.__setDigit(r+a,(32767&l)<<15|32767&d)}return i}__inplaceRightShift(e){if(e===0)return;let r=this.__digit(0)>>>e;const n=this.length-1;for(let i=0;i<n;i++){const a=this.__digit(i+1);this.__setDigit(i,1073741823&a<<30-e|r),r=a>>>e}this.__setDigit(n,r)}static __specialLeftShift(e,r,n){const i=e.length,a=new $(i+n,!1);if(r===0){for(let s=0;s<i;s++)a.__setDigit(s,e.__digit(s));return 0<n&&a.__setDigit(i,0),a}let o=0;for(let s=0;s<i;s++){const d=e.__digit(s);a.__setDigit(s,1073741823&d<<r|o),o=d>>>30-r}return 0<n&&a.__setDigit(i,o),a}static __leftShiftByAbsolute(e,r){const n=$.__toShiftAmount(r);if(0>n)throw new RangeError("BigInt too big");const i=0|n/30,a=n%30,o=e.length,s=a!==0&&e.__digit(o-1)>>>30-a!=0,d=o+i+(s?1:0),l=new $(d,e.sign);if(a===0){let c=0;for(;c<i;c++)l.__setDigit(c,0);for(;c<d;c++)l.__setDigit(c,e.__digit(c-i))}else{let c=0;for(let u=0;u<i;u++)l.__setDigit(u,0);for(let u=0;u<o;u++){const h=e.__digit(u);l.__setDigit(u+i,1073741823&h<<a|c),c=h>>>30-a}if(s)l.__setDigit(o+i,c);else if(c!==0)throw new Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(e,r){const n=e.length,i=e.sign,a=$.__toShiftAmount(r);if(0>a)return $.__rightShiftByMaximum(i);const o=0|a/30,s=a%30;let d=n-o;if(0>=d)return $.__rightShiftByMaximum(i);let l=!1;if(i){if(e.__digit(o)&(1<<s)-1)l=!0;else for(let u=0;u<o;u++)if(e.__digit(u)!==0){l=!0;break}}l&&s===0&&!~e.__digit(n-1)&&d++;let c=new $(d,i);if(s===0){c.__setDigit(d-1,0);for(let u=o;u<n;u++)c.__setDigit(u-o,e.__digit(u))}else{let u=e.__digit(o)>>>s;const h=n-o-1;for(let y=0;y<h;y++){const p=e.__digit(y+o+1);c.__setDigit(y,1073741823&p<<30-s|u),u=p>>>s}c.__setDigit(h,u)}return l&&(c=$.__absoluteAddOne(c,!0,c)),c.__trim()}static __rightShiftByMaximum(e){return e?$.__oneDigit(1,!0):$.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const r=e.__unsignedDigit(0);return r>$.__kMaxLengthBits?-1:r}static __toPrimitive(e,r="default"){if(typeof e!="object"||e.constructor===$)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const a=e[Symbol.toPrimitive];if(a){const o=a(r);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}}const n=e.valueOf;if(n){const a=n.call(e);if(typeof a!="object")return a}const i=e.toString;if(i){const a=i.call(e);if(typeof a!="object")return a}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return $.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===$}static __truncateToNBits(e,r){const n=0|(e+29)/30,i=new $(n,r.sign),a=n-1;for(let s=0;s<a;s++)i.__setDigit(s,r.__digit(s));let o=r.__digit(a);if(e%30!=0){const s=32-e%30;o=o<<s>>>s}return i.__setDigit(a,o),i.__trim()}static __truncateAndSubFromPowerOfTwo(e,r,n){var i=Math.min;const a=0|(e+29)/30,o=new $(a,n);let s=0;const d=a-1;let l=0;for(const y=i(d,r.length);s<y;s++){const p=0-r.__digit(s)-l;l=1&p>>>30,o.__setDigit(s,1073741823&p)}for(;s<d;s++)o.__setDigit(s,0|1073741823&-l);let c=d<r.length?r.__digit(d):0;const u=e%30;let h;if(u==0)h=0-c-l,h&=1073741823;else{const y=32-u;c=c<<y>>>y;const p=1<<32-y;h=p-c-l,h&=p-1}return o.__setDigit(d,h),o.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,r){this[e]=0|r}__setDigitGrow(e,r){this[e]=0|r}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,r){const n=e>>>1,i=this.__digit(n),a=1&e?32767&i|r<<15:1073709056&i|32767&r;this.__setDigit(n,a)}static __digitPow(e,r){let n=1;for(;0<r;)1&r&&(n*=e),r>>>=1,e*=e;return n}static __isOneDigitInt(e){return(1073741823&e)===e}}$.__kMaxLength=33554432,$.__kMaxLengthBits=$.__kMaxLength<<5,$.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],$.__kBitsPerCharTableShift=5,$.__kBitsPerCharTableMultiplier=1<<$.__kBitsPerCharTableShift,$.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],$.__kBitConversionBuffer=new ArrayBuffer(8),$.__kBitConversionDouble=new Float64Array($.__kBitConversionBuffer),$.__kBitConversionInts=new Int32Array($.__kBitConversionBuffer),$.__clz30=Math.clz32?function(t){return Math.clz32(t)-2}:function(t){return t===0?30:0|29-(0|Math.log(t>>>0)/Math.LN2)},$.__imul=Math.imul||function(t,e){return 0|t*e};const g_={};function pa(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const r of Object.getOwnPropertyNames(t)){const n=Object.getOwnPropertyDescriptor(t,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t,r,n))}for(const r of Object.getOwnPropertyNames(t.prototype)){const n=Object.getOwnPropertyDescriptor(t.prototype,r);n.configurable&&n.enumerable&&(n.enumerable=!1,Object.defineProperty(t.prototype,r,n))}sr(e,t),sr(`${e}.prototype`,t.prototype)}function sr(t,e){const r=`%${t}%`;if(g_[r]!==void 0)throw new Error(`intrinsic ${t} already exists`);g_[r]=e}function Ae(t){return g_[t]}var PP,xP;const Ve="slot-epochNanoSeconds",Cs="slot-timezone-identifier",Oe="slot-year",Re="slot-month",je="slot-day",nt="slot-hour",it="slot-minute",ot="slot-second",st="slot-millisecond",at="slot-microsecond",ct="slot-nanosecond",ge="slot-calendar",qR="slot-date-brand",KR="slot-year-month-brand",VR="slot-month-day-brand",Sn="slot-cached-instant",Lt="slot-time-zone",Dn="slot-years",en="slot-months",ui="slot-weeks",Mn="slot-days",Ln="slot-hours",Un="slot-minutes",Fn="slot-seconds",zn="slot-milliseconds",qn="slot-microseconds",Kn="slot-nanoseconds",or="slot-calendar-identifier",HR=new WeakMap,w_=Symbol.for("@@Temporal__GetSlots");(PP=globalThis)[w_]||(PP[w_]=function(e){return HR.get(e)});const NE=globalThis[w_],b_=Symbol.for("@@Temporal__CreateSlots");(xP=globalThis)[b_]||(xP[b_]=function(e){HR.set(e,Object.create(null))});const ya=globalThis[b_];function Yr(t,...e){if(!t||typeof t!="object")return!1;const r=NE(t);return!!r&&e.every(n=>n in r)}function E(t,e){const r=NE(t)?.[e];if(r===void 0)throw new TypeError(`Missing internal slot ${e}`);return r}function lt(t,e,r){const n=NE(t);if(n===void 0)throw new TypeError("Missing slots for the given container");if(n[e])throw new TypeError(`${e} already has set`);n[e]=r}const IP=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,Iy=new RegExp("(?:"+[`(?:${IP.source})(?:\\/(?:${IP.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),GR=/(?:[+\u2212-]\d{6}|\d{4})/,f0=/(?:0[1-9]|1[0-2])/,v_=/(?:0[1-9]|[12]\d|3[01])/,nW=new RegExp(`(${GR.source})(?:-(${f0.source})-(${v_.source})|(${f0.source})(${v_.source}))`),WR=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,YR=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,ZR=new RegExp(`([zZ])|${YR.source}?`),zd=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,iW=new RegExp([`^${nW.source}`,`(?:(?:T|\\s+)${WR.source}(?:${ZR.source})?)?`,`(?:\\[!?(${Iy.source})\\])?`,`((?:${zd.source})*)$`].join(""),"i"),oW=new RegExp([`^T?${WR.source}`,`(?:${ZR.source})?`,`(?:\\[!?${Iy.source}\\])?`,`((?:${zd.source})*)$`].join(""),"i"),sW=new RegExp(`^(${GR.source})-?(${f0.source})(?:\\[!?${Iy.source}\\])?((?:${zd.source})*)$`),aW=new RegExp(`^(?:--)?(${f0.source})-?(${v_.source})(?:\\[!?${Iy.source}\\])?((?:${zd.source})*)$`),pv=/(\d+)(?:[.,](\d{1,9}))?/,cW=new RegExp(`(?:${pv.source}H)?(?:${pv.source}M)?(?:${pv.source}S)?`),dW=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${cW.source})?$`,"i"),lW=Array.prototype.includes,XR=Array.prototype.push,QR=globalThis.Intl.DateTimeFormat,uW=Math.min,fW=Math.max,Yt=Math.abs,ji=Math.floor,Mf=Math.sign,Rl=Math.trunc,kw=Number.isNaN,Vn=Number.isFinite,hW=Number,ky=String,pW=Number.MAX_SAFE_INTEGER,xn=Object.create,yW=Object.getOwnPropertyDescriptor,Ow=Reflect.apply,mW=Reflect.ownKeys,hr=$.BigInt(0),lh=$.BigInt(1),Zs=$.BigInt(60),JR=$.BigInt(24),Ot=$.BigInt(1e3),yo=$.BigInt(1e6),Xs=$.BigInt(1e9),gW=$.BigInt(-1),e6=$.multiply($.BigInt(3600),Xs),t6=$.multiply(Zs,Xs),ia=$.multiply(e6,JR),Jp=$.multiply($.BigInt(-86400),$.BigInt(1e17)),Lf=$.multiply($.BigInt(86400),$.BigInt(1e17)),h0=-271821,p0=275760,mf=$.multiply($.BigInt(-388152),$.BigInt(1e13)),wW=$.multiply(ia,$.BigInt(3660)),r6=$.multiply(ia,$.BigInt(366)),n6=$.multiply(ia,$.BigInt(14)),bW=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function oo(t){return $.equal(t,hr)}function Nt(t,e){const r=t[e];if(r!==void 0)return r}function Le(t,e,r){const n=arguments.length>2?r:[];return Ow(t,e,n)}function Zt(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Uf(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return hW(t)}function Ar(t){const e=Uf(t);if(kw(e)||e===0)return 0;if(!Vn(e))return e;const r=ji(Yt(e));return r===0?0:Mf(e)*r}function Hi(t){if(typeof t!="number"||kw(t)||!Vn(t))return!1;const e=Yt(t);return ji(e)===e}function Qn(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return ky(t)}function Tt(t){const e=Uf(t);if(e===0)return 0;if(kw(e)||!Vn(e))throw new RangeError("invalid number value");const r=Rl(e);return r===0?0:r}function kP(t,e){const r=Tt(t);if(r<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return r}function qr(t){const e=Uf(t);if(!Vn(e))throw new RangeError("infinity is out of range");if(!Hi(e))throw new RangeError(`unsupported fractional value ${t}`);return e===0?0:e}function Er(t,e){return{quotient:$.divide(t,e),remainder:$.remainder(t,e)}}function y0(t){return $.lessThan(t,hr)}function OP(t){return oo(t)?0:y0(t)?-1:1}function ls(t){return $.lessThan(t,hr)?$.multiply(t,gW):t}const RP=new Map([["year",Tt],["month",kP],["monthCode",Qn],["day",kP],["hour",Tt],["minute",Tt],["second",Tt],["millisecond",Tt],["microsecond",Tt],["nanosecond",Tt],["years",qr],["months",qr],["weeks",qr],["days",qr],["hours",qr],["minutes",qr],["seconds",qr],["milliseconds",qr],["microseconds",qr],["nanoseconds",qr],["era",Qn],["eraYear",Ar],["offset",Qn]]),vW=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Oy=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],m0=new Map(Oy.map(t=>[t[0],t[1]])),_W=new Map(Oy.map(([t,e])=>[e,t])),jP=Oy.map(([,t])=>t),CP=Array.from(m0.keys()).sort(),NP=new Map;function i6(t){let e=NP.get(t);return e===void 0&&(e=new QR("en-us",{timeZone:ky(t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),NP.set(t,e)),e}function BP(t){if(t==null)throw new TypeError(`Expected object not ${t}`);return Object(t)}function gf(t,e,r,n){if(e==null)return;const i=mW(e);for(const a of i)if(!r.some(o=>Object.is(o,a))&&Object.prototype.propertyIsEnumerable.call(e,a)){const o=e[a];if(n&&n.some(s=>Object.is(s,o)))continue;t[a]=o}}function jr(t){return Yr(t,Ve)&&!Yr(t,Lt,ge)}function ro(t){return Yr(t,Cs)}function dr(t){return Yr(t,or)}function ur(t){return Yr(t,Dn,en,Mn,Ln,Un,Fn,zn,qn,Kn)}function wt(t){return Yr(t,qR)}function fr(t){return Yr(t,nt,it,ot,st,at,ct)&&!Yr(t,Oe,Re,je)}function tt(t){return Yr(t,Oe,Re,je,nt,it,ot,st,at,ct)}function It(t){return Yr(t,KR)}function zr(t){return Yr(t,VR)}function Be(t){return Yr(t,Ve,Lt,ge)}function uh(t){if(Yr(t,ge)||Yr(t,Lt))throw new TypeError("with() does not support a calendar or timeZone property");if(fr(t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function EW(t){const{ianaName:e,offset:r,z:n}=function(a){if(new RegExp(`^${Iy.source}$`,"i").test(a))return{ianaName:a};try{const o=ma(a);if(o.z||o.offset||o.ianaName)return o}catch{}throw new RangeError(`Invalid time zone: ${a}`)}(t);return e?HE(e):n?"UTC":qw(Rd(r))}function BE(t,e){return e==="never"?"":DE(fn(t),e)}function DE(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${t}]`}function ma(t){const e=iW.exec(t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${t}`);let r=e[1];if(r[0]==="−"&&(r=`-${r.slice(1)}`),r==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);const n=Ar(r),i=Ar(e[2]||e[4]),a=Ar(e[3]||e[5]),o=Ar(e[6]),s=e[6]!==void 0,d=Ar(e[7]||e[10]);let l=Ar(e[8]||e[11]);l===60&&(l=59);const c=(e[9]||e[12])+"000000000",u=Ar(c.slice(0,3)),h=Ar(c.slice(3,6)),y=Ar(c.slice(6,9));let p,f=!1;if(e[13])p=void 0,f=!0;else if(e[14]&&e[15]){const m=e[14]==="-"||e[14]==="−"?"-":"+",w=e[15]||"00",S=e[16]||"00",T=e[17]||"00";let x=e[18]||"0";if(p=`${m}${w}:${S}`,+x){for(;x.endsWith("0");)x=x.slice(0,-1);p+=`:${T}.${x}`}else+T&&(p+=`:${T}`);p==="-00:00"&&(p="+00:00")}const g=e[19],v=e[20];let b;for(const[,m,w,S]of v.matchAll(zd))if(w==="u-ca")b===void 0&&(b=S);else if(m==="!")throw new RangeError(`Unrecognized annotation: !${w}=${S}`);return YE(n,i,a,o,d,l,u,h,y),{year:n,month:i,day:a,hasTime:s,hour:o,minute:d,second:l,millisecond:u,microsecond:h,nanosecond:y,ianaName:g,offset:p,z:f,calendar:b}}function ME(t){const e=sW.exec(t);let r,n,i,a;if(e){let o=e[1];if(o[0]==="−"&&(o=`-${o.slice(1)}`),o==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);r=Ar(o),n=Ar(e[2]);const s=e[3];for(const[,d,l,c]of s.matchAll(zd))if(l==="u-ca")i===void 0&&(i=c);else if(d==="!")throw new RangeError(`Unrecognized annotation: !${l}=${c}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let o;if({year:r,month:n,calendar:i,day:a,z:o}=ma(t),o)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:r,month:n,calendar:i,referenceISODay:a}}function LE(t){const e=aW.exec(t);let r,n,i,a;if(e){r=Ar(e[1]),n=Ar(e[2]);const o=e[3];for(const[,s,d,l]of o.matchAll(zd))if(d==="u-ca")i===void 0&&(i=l);else if(s==="!")throw new RangeError(`Unrecognized annotation: !${d}=${l}`);if(i!==void 0&&i!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let o;if({month:r,day:n,calendar:i,year:a,z:o}=ma(t),o)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:r,day:n,calendar:i,referenceISOYear:a}}function SW(t){let{year:e,month:r,day:n,hour:i,minute:a,second:o,millisecond:s,microsecond:d,nanosecond:l,offset:c,z:u}=function(f){const g=ma(f);if(!g.z&&!g.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return g}(t);if(!u&&!c)throw new RangeError("Temporal.Instant requires a time zone offset");const h=u?0:Rd(c);({year:e,month:r,day:n,hour:i,minute:a,second:o,millisecond:s,microsecond:d,nanosecond:l}=GE(e,r,n,i,a,o,s,d,l-h));const y=jd(e,r,n,i,a,o,s,d,l);if(y===null)throw new RangeError("DateTime outside of supported range");return y}function g0(t,e,r,n){let i=t,a=e,o=r;switch(n){case"reject":oa(i,a,o);break;case"constrain":({year:i,month:a,day:o}=_6(i,a,o))}return{year:i,month:a,day:o}}function Rw(t,e,r,n,i,a,o){let s=t,d=e,l=r,c=n,u=i,h=a;switch(o){case"reject":Vw(s,d,l,c,u,h);break;case"constrain":({hour:s,minute:d,second:l,millisecond:c,microsecond:u,nanosecond:h}=function(p,f,g,v,b,m){const w=Oi(p,0,23),S=Oi(f,0,59),T=Oi(g,0,59),x=Oi(v,0,999),I=Oi(b,0,999),M=Oi(m,0,999);return{hour:w,minute:S,second:T,millisecond:x,microsecond:I,nanosecond:M}}(s,d,l,c,u,h))}return{hour:s,minute:d,second:l,millisecond:c,microsecond:u,nanosecond:h}}function Tu(t){if(!Zt(t))return function(p){const f=dW.exec(p);if(!f)throw new RangeError(`invalid duration: ${p}`);if(f.slice(2).every(q=>q===void 0))throw new RangeError(`invalid duration: ${p}`);const g=f[1]==="-"||f[1]==="−"?-1:1,v=f[2]===void 0?0:Tt(f[2])*g,b=f[3]===void 0?0:Tt(f[3])*g,m=f[4]===void 0?0:Tt(f[4])*g,w=f[5]===void 0?0:Tt(f[5])*g,S=f[6]===void 0?0:Tt(f[6])*g,T=f[7],x=f[8],I=f[9],M=f[10],H=f[11];let re=0,J=0,z=0;if(T!==void 0){if(x??I??M??H)throw new RangeError("only the smallest unit can be fractional");z=3600*Ar((T+"000000000").slice(0,9))*g}else if(re=x===void 0?0:Tt(x)*g,I!==void 0){if(M??H)throw new RangeError("only the smallest unit can be fractional");z=60*Ar((I+"000000000").slice(0,9))*g}else J=M===void 0?0:Tt(M)*g,H!==void 0&&(z=Ar((H+"000000000").slice(0,9))*g);const oe=z%1e3,C=Rl(z/1e3)%1e3,V=Rl(z/1e6)%1e3;return J+=Rl(z/1e9)%60,re+=Rl(z/6e10),S0(v,b,m,w,S,re,J,V,C,oe),{years:v,months:b,weeks:m,days:w,hours:S,minutes:re,seconds:J,milliseconds:V,microseconds:C,nanoseconds:oe}}(Qn(t));if(ur(t))return{years:E(t,Dn),months:E(t,en),weeks:E(t,ui),days:E(t,Mn),hours:E(t,Ln),minutes:E(t,Un),seconds:E(t,Fn),milliseconds:E(t,zn),microseconds:E(t,qn),nanoseconds:E(t,Kn)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let r=function(p){if(!Zt(p))throw new TypeError("invalid duration-like");const f={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let g=!1;for(const v of CP){const b=p[v];b!==void 0&&(g=!0,f[v]=qr(b))}if(!g)throw new TypeError("invalid duration-like");return f}(t);for(const y of CP){const p=r[y];p!==void 0&&(e[y]=p)}let{years:n,months:i,weeks:a,days:o,hours:s,minutes:d,seconds:l,milliseconds:c,microseconds:u,nanoseconds:h}=e;return S0(n,i,a,o,s,d,l,c,u,h),{years:n,months:i,weeks:a,days:o,hours:s,minutes:d,seconds:l,milliseconds:c,microseconds:u,nanoseconds:h}}function Sr(t){return t===void 0?"constrain":Nd(t,"overflow",["constrain","reject"],"constrain")}function Ff(t){return t===void 0?"compatible":Nd(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function gs(t,e){return Nd(t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function w0(t,e){return t===void 0?e:Nd(t,"offset",["prefer","use","ignore","reject"],e)}function Ry(t){return Nd(t,"calendarName",["auto","always","never","critical"],"auto")}function fh(t){let e=t.roundingIncrement;if(e===void 0)return 1;if(e=Uf(e),!Vn(e))throw new RangeError("roundingIncrement must be finite");const r=Rl(e);if(r<1||r>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return r}function hh(t,e,r){const n=r?e:e-1;if(t>n)throw new RangeError(`roundingIncrement must be at least 1 and less than ${n}, not ${t}`);if(e%t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function jy(t){const e=t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if(Qn(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}const r=ji(e);if(!Vn(r)||r<0||r>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return r}function Cy(t,e){switch(t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}const nu=Symbol("~required~");function Ci(t,e,r,n,i=[]){const a=[];for(const[,l,c]of Oy)r!=="datetime"&&r!==c||a.push(l);a.push(...i);let o=n;o===nu?o=void 0:o!==void 0&&a.push(o);const s=[...a];for(const l of a){const c=_W.get(l);c!==void 0&&s.push(c)}let d=Nd(t,e,s,o);if(d===void 0&&n===nu)throw new RangeError(`${e} is required`);return m0.has(d)?m0.get(d):d}function mg(t){const e=t.relativeTo;if(e===void 0)return e;let r,n,i,a,o,s,d,l,c,u,h,y,p="option",f=!1;if(Zt(e)){if(Be(e)||wt(e))return e;if(tt(e))return qf(e);u=My(e);const g=Ir(u,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);g.push("timeZone","offset");const v=ht(e,g,[]),b=xn(null);b.overflow="constrain",{year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c}=Ny(u,v,b),y=v.offset,y===void 0&&(p="wall"),h=v.timeZone,h!==void 0&&(h=Pn(h))}else{let g,v;if({year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c,calendar:u,ianaName:g,offset:y,z:v}=ma(Qn(e)),g)h=Pn(g),v?p="exact":y||(p="wall"),f=!0;else if(v)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(u||(u="iso8601"),!dc(u))throw new RangeError(`invalid calendar identifier ${u}`);u=sa(u)}return h===void 0?wo(r,n,i,u):sn(v0(r,n,i,a,o,s,d,l,c,p,p==="option"?Rd(y):0,h,"compatible","reject",f),h,u)}function __(t,e,r,n,i,a,o,s,d,l){for(const[c,u]of[["years",t],["months",e],["weeks",r],["days",n],["hours",i],["minutes",a],["seconds",o],["milliseconds",s],["microseconds",d],["nanoseconds",l]])if(u!==0)return m0.get(c);return"nanosecond"}function iu(t,e){return jP.indexOf(t)>jP.indexOf(e)?e:t}function ht(t,e,r,{emptySourceErrorMessage:n}={emptySourceErrorMessage:"no supported properties found"}){const i=xn(null);let a=!1;e.sort();for(const o of e){let s=t[o];if(s!==void 0)a=!0,RP.has(o)&&(s=RP.get(o)(s)),i[o]=s;else if(r!=="partial"){if(lW.call(r,o))throw new TypeError(`required property '${o}' missing or undefined`);s=vW.get(o),i[o]=s}}if(r==="partial"&&!a)throw new TypeError(n);return i}function b0(t,e="complete"){const r=["hour","microsecond","millisecond","minute","nanosecond","second"],n=ht(t,r,"partial",{emptySourceErrorMessage:"invalid time-like"}),i={};for(const a of r){const o=yW(n,a);o!==void 0?i[a]=o.value:e==="complete"&&(i[a]=0)}return i}function Ut(t,e){let r=t;if(Zt(r)){if(wt(r))return r;if(Be(r)&&(Sr(e),r=qi(E(r,Lt),E(r,Sn),E(r,ge))),tt(r))return Sr(e),wo(E(r,Oe),E(r,Re),E(r,je),E(r,ge));const d=My(r);return ac(d,ht(r,Ir(d,["day","month","monthCode","year"]),[]),e)}Sr(e);let{year:n,month:i,day:a,calendar:o,z:s}=function(l){return ma(l)}(Qn(r));if(s)throw new RangeError("Z designator not supported for PlainDate");if(o||(o="iso8601"),!dc(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=sa(o),wo(n,i,a,o)}function Ny(t,e,r){let{hour:n,minute:i,second:a,millisecond:o,microsecond:s,nanosecond:d}=b0(e);const l=Sr(r),c=ac(t,e,r),u=E(c,Oe),h=E(c,Re),y=E(c,je);return{hour:n,minute:i,second:a,millisecond:o,microsecond:s,nanosecond:d}=Rw(n,i,a,o,s,d,l),{year:u,month:h,day:y,hour:n,minute:i,second:a,millisecond:o,microsecond:s,nanosecond:d}}function jl(t,e){let r,n,i,a,o,s,d,l,c,u;if(Zt(t)){if(tt(t))return t;if(Be(t))return Sr(e),qi(E(t,Lt),E(t,Sn),E(t,ge));if(wt(t))return Sr(e),ki(E(t,Oe),E(t,Re),E(t,je),0,0,0,0,0,0,E(t,ge));u=My(t);const h=ht(t,Ir(u,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c}=Ny(u,h,e))}else{let h;if(Sr(e),{year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c,calendar:u,z:h}=function(p){return ma(p)}(Qn(t)),h)throw new RangeError("Z designator not supported for PlainDateTime");if(YE(r,n,i,a,o,s,d,l,c),u||(u="iso8601"),!dc(u))throw new RangeError(`invalid calendar identifier ${u}`);u=sa(u)}return ki(r,n,i,a,o,s,d,l,c,u)}function wf(t){if(ur(t))return t;let{years:e,months:r,weeks:n,days:i,hours:a,minutes:o,seconds:s,milliseconds:d,microseconds:l,nanoseconds:c}=Tu(t);return new(Ae("%Temporal.Duration%"))(e,r,n,i,a,o,s,d,l,c)}function us(t){if(jr(t))return t;if(Be(t))return new(Ae("%Temporal.Instant%"))(E(t,Ve));const e=SW(Qn(t));return new(Ae("%Temporal.Instant%"))(e)}function DP(t,e){let r=t;if(Zt(r)){if(zr(r))return r;let s,d;if(Yr(r,ge))s=E(r,ge),d=!1;else{let c=r.calendar;d=c===void 0,c===void 0&&(c="iso8601"),s=Ni(c)}const l=ht(r,Ir(s,["day","month","monthCode","year"]),[]);return d&&l.month!==void 0&&l.monthCode===void 0&&l.year===void 0&&(l.year=1972),zf(s,l,e)}Sr(e);let{month:n,day:i,referenceISOYear:a,calendar:o}=LE(Qn(r));if(o===void 0&&(o="iso8601"),!dc(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=sa(o),a===void 0?(oa(1972,n,i),ey(n,i,o)):zf(o,ey(n,i,o,a))}function Wa(t,e="constrain"){let r,n,i,a,o,s,d=t;if(Zt(d)){if(fr(d))return d;if(Be(d)&&(d=qi(E(d,Lt),E(d,Sn),E(d,ge))),tt(d))return new(Ae("%Temporal.PlainTime%"))(E(d,nt),E(d,it),E(d,ot),E(d,st),E(d,at),E(d,ct));({hour:r,minute:n,second:i,millisecond:a,microsecond:o,nanosecond:s}=b0(d)),{hour:r,minute:n,second:i,millisecond:a,microsecond:o,nanosecond:s}=Rw(r,n,i,a,o,s,e)}else({hour:r,minute:n,second:i,millisecond:a,microsecond:o,nanosecond:s}=function(c){const u=oW.exec(c);let h,y,p,f,g,v,b;if(u){h=Ar(u[1]),y=Ar(u[2]||u[5]),p=Ar(u[3]||u[6]),p===60&&(p=59);const m=(u[4]||u[7])+"000000000";f=Ar(m.slice(0,3)),g=Ar(m.slice(3,6)),v=Ar(m.slice(6,9)),b=u[14];for(const[,w,S,T]of b.matchAll(zd))if(S!=="u-ca"&&w==="!")throw new RangeError(`Unrecognized annotation: !${S}=${T}`);if(u[8])throw new RangeError("Z designator not supported for PlainTime")}else{let m,w;if({hasTime:w,hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v,z:m}=ma(c),!w)throw new RangeError(`time is missing in string: ${c}`);if(m)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(c))return{hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v};try{const{month:m,day:w}=LE(c);oa(1972,m,w)}catch{try{const{year:m,month:w}=ME(c);oa(m,w,1)}catch{return{hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v}}}throw new RangeError(`invalid ISO 8601 time-only string ${c}; may need a T prefix`)}(Qn(d))),Vw(r,n,i,a,o,s);return new(Ae("%Temporal.PlainTime%"))(r,n,i,a,o,s)}function cp(t,e){if(Zt(t)){if(It(t))return t;const o=My(t);return su(o,ht(t,Ir(o,["month","monthCode","year"]),[]),e)}Sr(e);let{year:r,month:n,referenceISODay:i,calendar:a}=ME(Qn(t));if(a===void 0&&(a="iso8601"),!dc(a))throw new RangeError(`invalid calendar identifier ${a}`);return a=sa(a),i===void 0?(oa(r,n,1),ty(r,n,a)):su(a,ty(r,n,a,i))}function v0(t,e,r,n,i,a,o,s,d,l,c,u,h,y,p){const f=new(Ae("%Temporal.PlainDateTime%"))(t,e,r,n,i,a,o,s,d);if(l==="wall"||y==="ignore")return E(Hn(u,f,h),Ve);if(l==="exact"||y==="use"){const v=jd(t,e,r,n,i,a,o,s,d);if(v===null)throw new RangeError("ZonedDateTime outside of supported range");return $.subtract(v,$.BigInt(c))}const g=_0(u,f);for(const v of g){const b=ws(u,v),m=$.toNumber(Ui($.BigInt(b),t6,"halfExpand"));if(b===c||p&&m===c)return E(v,Ve)}if(y==="reject"){const v=qw(c),b=ro(u)?E(u,Cs):"time zone";throw new RangeError(`Offset ${v} is invalid for ${f.toString()} in ${b}`)}return E(h6(g,u,f,h),Ve)}function dp(t,e){let r,n,i,a,o,s,d,l,c,u,h,y,p,f,g=!1,v="option";if(Zt(t)){if(Be(t))return t;y=My(t);const m=Ir(y,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);m.push("timeZone","offset");const w=ht(t,m,["timeZone"]);u=Pn(w.timeZone),h=w.offset,h===void 0&&(v="wall"),p=Ff(e),f=w0(e,"reject"),{year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c}=Ny(y,w,e)}else{let m,w;if({year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c,ianaName:m,offset:h,z:w,calendar:y}=function(T){const x=ma(T);if(!x.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return x}(Qn(t)),u=Pn(m),w?v="exact":h||(v="wall"),y||(y="iso8601"),!dc(y))throw new RangeError(`invalid calendar identifier ${y}`);y=sa(y),g=!0,p=Ff(e),f=w0(e,"reject"),Sr(e)}let b=0;return v==="option"&&(b=Rd(h)),sn(v0(r,n,i,a,o,s,d,l,c,v,b,u,p,f,g),u,y)}function o6(t,e,r,n,i){oa(e,r,n),E6(e,r,n),ya(t),lt(t,Oe,e),lt(t,Re,r),lt(t,je,n),lt(t,ge,i),lt(t,qR,!0)}function wo(t,e,r,n="iso8601"){const i=Ae("%Temporal.PlainDate%"),a=xn(i.prototype);return o6(a,t,e,r,n),a}function s6(t,e,r,n,i,a,o,s,d,l,c){YE(e,r,n,i,a,o,s,d,l),S6(e,r,n,i,a,o,s,d,l),ya(t),lt(t,Oe,e),lt(t,Re,r),lt(t,je,n),lt(t,nt,i),lt(t,it,a),lt(t,ot,o),lt(t,st,s),lt(t,at,d),lt(t,ct,l),lt(t,ge,c)}function ki(t,e,r,n,i,a,o,s,d,l="iso8601"){const c=Ae("%Temporal.PlainDateTime%"),u=xn(c.prototype);return s6(u,t,e,r,n,i,a,o,s,d,l),u}function a6(t,e,r,n,i){oa(i,e,r),E6(i,e,r),ya(t),lt(t,Re,e),lt(t,je,r),lt(t,Oe,i),lt(t,ge,n),lt(t,VR,!0)}function ey(t,e,r="iso8601",n=1972){const i=Ae("%Temporal.PlainMonthDay%"),a=xn(i.prototype);return a6(a,t,e,r,n),a}function c6(t,e,r,n,i){oa(e,r,i),function(o,s){un(o,h0,p0),o===h0?un(s,4,12):o===p0&&un(s,1,9)}(e,r),ya(t),lt(t,Oe,e),lt(t,Re,r),lt(t,je,i),lt(t,ge,n),lt(t,KR,!0)}function ty(t,e,r="iso8601",n=1){const i=Ae("%Temporal.PlainYearMonth%"),a=xn(i.prototype);return c6(a,t,e,r,n),a}function d6(t,e,r,n){vl(e),ya(t),lt(t,Ve,e),lt(t,Lt,r),lt(t,ge,n);const i=new(Ae("%Temporal.Instant%"))(E(t,Ve));lt(t,Sn,i)}function sn(t,e,r="iso8601"){const n=Ae("%Temporal.ZonedDateTime%"),i=xn(n.prototype);return d6(i,t,e,r),i}function Ir(t,e){if(typeof t=="string"){const i=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.fields%"),i,[e])}const r=Le(Nt(t,"fields"),t,[e]),n=[];for(const i of r){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");XR.call(n,i)}return n}function ou(t,e,r){if(typeof t=="string"){const i=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.mergeFields%"),i,[e,r])}const n=Le(Nt(t,"mergeFields"),t,[e,r]);if(!Zt(n))throw new TypeError("bad return from calendar.mergeFields()");return n}function ln(t,e,r,n,i){let a=i;if(typeof t=="string"){const s=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.dateAdd%"),s,[e,r,n])}a===void 0&&(a=Nt(t,"dateAdd"));const o=Ow(a,t,[e,r,n]);if(!wt(o))throw new TypeError("invalid result");return o}function Od(t,e,r,n,i){let a=i;if(typeof t=="string"){const s=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.dateUntil%"),s,[e,r,n])}a===void 0&&(a=Nt(t,"dateUntil"));const o=Ow(a,t,[e,r,n]);if(!ur(o))throw new TypeError("invalid result");return o}function jw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.year%"),n,[e])}let r=Le(Nt(t,"year"),t,[e]);if(typeof r!="number")throw new TypeError("calendar year result must be an integer");if(!Hi(r))throw new RangeError("calendar year result must be an integer");return r}function Cw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.month%"),n,[e])}let r=Le(Nt(t,"month"),t,[e]);if(typeof r!="number")throw new TypeError("calendar month result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar month result must be a positive integer");return r}function By(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.monthCode%"),n,[e])}let r=Le(Nt(t,"monthCode"),t,[e]);if(typeof r!="string")throw new TypeError("calendar monthCode result must be a string");return r}function Dy(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.day%"),n,[e])}const r=Le(Nt(t,"day"),t,[e]);if(typeof r!="number")throw new TypeError("calendar day result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar day result must be a positive integer");return r}function Nw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.era%"),n,[e])}let r=Le(Nt(t,"era"),t,[e]);if(r===void 0)return r;if(typeof r!="string")throw new TypeError("calendar era result must be a string or undefined");return r}function Bw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.eraYear%"),n,[e])}let r=Le(Nt(t,"eraYear"),t,[e]);if(r===void 0)return r;if(typeof r!="number")throw new TypeError("calendar eraYear result must be an integer or undefined");if(!Hi(r))throw new RangeError("calendar eraYear result must be an integer or undefined");return r}function UE(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.dayOfWeek%"),n,[e])}const r=Le(Nt(t,"dayOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return r}function FE(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.dayOfYear%"),n,[e])}const r=Le(Nt(t,"dayOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar dayOfYear result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return r}function zE(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.weekOfYear%"),n,[e])}const r=Le(Nt(t,"weekOfYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar weekOfYear result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return r}function qE(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.yearOfWeek%"),n,[e])}const r=Le(Nt(t,"yearOfWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar yearOfWeek result must be an integer");if(!Hi(r))throw new RangeError("calendar yearOfWeek result must be an integer");return r}function KE(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.daysInWeek%"),n,[e])}const r=Le(Nt(t,"daysInWeek"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInWeek result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return r}function Dw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.daysInMonth%"),n,[e])}const r=Le(Nt(t,"daysInMonth"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInMonth result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return r}function Mw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.daysInYear%"),n,[e])}const r=Le(Nt(t,"daysInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar daysInYear result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar daysInYear result must be a positive integer");return r}function Lw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.monthsInYear%"),n,[e])}const r=Le(Nt(t,"monthsInYear"),t,[e]);if(typeof r!="number")throw new TypeError("calendar monthsInYear result must be a positive integer");if(!Hi(r)||r<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return r}function Uw(t,e){if(typeof t=="string"){const n=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.inLeapYear%"),n,[e])}const r=Le(Nt(t,"inLeapYear"),t,[e]);if(typeof r!="boolean")throw new TypeError("calendar inLeapYear result must be a boolean");return r}function Ni(t){if(Zt(t)){if(Yr(t,ge))return E(t,ge);if(!function(i){return!!dr(i)||"dateAdd"in i&&"dateFromFields"in i&&"dateUntil"in i&&"day"in i&&"dayOfWeek"in i&&"dayOfYear"in i&&"daysInMonth"in i&&"daysInWeek"in i&&"daysInYear"in i&&"fields"in i&&"id"in i&&"inLeapYear"in i&&"mergeFields"in i&&"month"in i&&"monthCode"in i&&"monthDayFromFields"in i&&"monthsInYear"in i&&"weekOfYear"in i&&"year"in i&&"yearMonthFromFields"in i&&"yearOfWeek"in i}(t))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return t}const e=Qn(t);if(dc(e))return sa(e);let r;try{({calendar:r}=ma(e))}catch{try{({calendar:r}=ME(e))}catch{({calendar:r}=LE(e))}}if(r||(r="iso8601"),!dc(r))throw new RangeError(`invalid calendar identifier ${r}`);return sa(r)}function My(t){if(Yr(t,ge))return E(t,ge);const{calendar:e}=t;return e===void 0?"iso8601":Ni(e)}function fn(t){if(typeof t=="string")return t;const e=t.id;if(typeof e!="string")throw new TypeError("calendar.id should be a string");return e}function ph(t){return Zt(t)?t:new(Ae("%Temporal.Calendar%"))(t)}function Ly(t,e){return t===e?!0:fn(t)===fn(e)}function Fw(t,e,r){if(t===e)return;const n=fn(t),i=fn(e);if(n!==i)throw new RangeError(`cannot ${r} of ${n} and ${i} calendars`)}function l6(t,e){if(t===e)return e;const r=fn(t),n=fn(e);if(r===n||r==="iso8601")return e;if(n==="iso8601")return t;throw new RangeError("irreconcilable calendars")}function ac(t,e,r,n){if(typeof t=="string"){const a=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.dateFromFields%"),a,[e,r])}const i=Le(Nt(t,"dateFromFields"),t,[e,r]);if(!wt(i))throw new TypeError("invalid result");return i}function su(t,e,r){if(typeof t=="string"){const i=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.yearMonthFromFields%"),i,[e,r])}let n=Le(Nt(t,"yearMonthFromFields"),t,[e,r]);if(!It(n))throw new TypeError("invalid result");return n}function zf(t,e,r){if(typeof t=="string"){const i=new(Ae("%Temporal.Calendar%"))(t);return Le(Ae("%Temporal.Calendar.prototype.monthDayFromFields%"),i,[e,r])}let n=Le(Nt(t,"monthDayFromFields"),t,[e,r]);if(!zr(n))throw new TypeError("invalid result");return n}function Pn(t){if(Zt(t)){if(Be(t))return E(t,Lt);if(!function(r){return!!ro(r)||"getOffsetNanosecondsFor"in r&&"getPossibleInstantsFor"in r&&"id"in r}(t))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return t}return EW(Qn(t))}function ry(t){if(typeof t=="string")return t;const e=t.id;if(typeof e!="string")throw new TypeError("timeZone.id should be a string");return e}function u6(t){return Zt(t)?t:new(Ae("%Temporal.TimeZone%"))(t)}function f6(t,e){return t===e?!0:ry(t)===ry(e)}function qf(t){return wo(E(t,Oe),E(t,Re),E(t,je),E(t,ge))}function VE(t){return new(Ae("%Temporal.PlainTime%"))(E(t,nt),E(t,it),E(t,ot),E(t,st),E(t,at),E(t,ct))}function ws(t,e,r){if(typeof t=="string"){const i=new(Ae("%Temporal.TimeZone%"))(t);return Le(Ae("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),i,[e])}const n=Le(Nt(t,"getOffsetNanosecondsFor"),t,[e]);if(typeof n!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!Hi(n)||Yt(n)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return n}function E_(t,e){return qw(ws(t,e))}function qi(t,e,r){const n=E(e,Ve),i=ws(t,e);let{year:a,month:o,day:s,hour:d,minute:l,second:c,millisecond:u,microsecond:h,nanosecond:y}=y6(n);return{year:a,month:o,day:s,hour:d,minute:l,second:c,millisecond:u,microsecond:h,nanosecond:y}=GE(a,o,s,d,l,c,u,h,y+i),ki(a,o,s,d,l,c,u,h,y,r)}function Hn(t,e,r){return h6(_0(t,e),t,e,r)}function h6(t,e,r,n){const i=Ae("%Temporal.Instant%"),a=t.length;if(a===1)return t[0];if(a)switch(n){case"compatible":case"earlier":return t[0];case"later":return t[a-1];case"reject":throw new RangeError("multiple instants found")}const o=E(r,Oe),s=E(r,Re),d=E(r,je),l=E(r,nt),c=E(r,it),u=E(r,ot),h=E(r,st),y=E(r,at),p=E(r,ct),f=jd(o,s,d,l,c,u,h,y,p);if(f===null)throw new RangeError("DateTime outside of supported range");const g=new i($.subtract(f,ia)),v=new i($.add(f,ia)),b=ws(e,g),m=ws(e,v)-b;switch(n){case"earlier":{const w=E(r,ge),S=Ae("%Temporal.PlainDateTime%"),T=A_(o,s,d,l,c,u,h,y,p,w,0,0,0,0,0,0,0,0,0,-m,void 0);return _0(e,new S(T.year,T.month,T.day,T.hour,T.minute,T.second,T.millisecond,T.microsecond,T.nanosecond,w))[0]}case"compatible":case"later":{const w=E(r,ge),S=Ae("%Temporal.PlainDateTime%"),T=A_(o,s,d,l,c,u,h,y,p,w,0,0,0,0,0,0,0,0,0,m,void 0),x=_0(e,new S(T.year,T.month,T.day,T.hour,T.minute,T.second,T.millisecond,T.microsecond,T.nanosecond,w));return x[x.length-1]}case"reject":throw new RangeError("no such instant found")}}function _0(t,e,r){if(typeof t=="string"){const a=new(Ae("%Temporal.TimeZone%"))(t);return Le(Ae("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),a,[e])}const n=Le(Nt(t,"getPossibleInstantsFor"),t,[e]),i=[];for(const a of n){if(!jr(a))throw new TypeError("bad return from getPossibleInstantsFor");XR.call(i,a)}return i}function Au(t){let e;return t<0||t>9999?e=(t<0?"-":"+")+`000000${Yt(t)}`.slice(-6):e=`0000${t}`.slice(-4),e}function rr(t){return`00${t}`.slice(-2)}function zw(t,e,r,n,i){if(i==="minute")return"";const a=`:${rr(t)}`;let o,s=1e6*e+1e3*r+n;if(i==="auto"){if(s===0)return a;for(o=`${s}`.padStart(9,"0");o[o.length-1]==="0";)o=o.slice(0,-1)}else{if(i===0)return a;o=`${s}`.padStart(9,"0").slice(0,i)}return`${a}.${o}`}function MP(t,e,r){let n=e;n===void 0&&(n="UTC");const i=qi(n,t,"iso8601"),a=Au(E(i,Oe)),o=rr(E(i,Re)),s=rr(E(i,je)),d=rr(E(i,nt)),l=rr(E(i,it)),c=zw(E(i,ot),E(i,st),E(i,at),E(i,ct),r);let u="Z";return e!==void 0&&(u=p6(ws(n,t))),`${a}-${o}-${s}T${d}:${l}${c}${u}`}function yv(t,e="auto",r){function n(M){return M<=pW?M.toString(10):$.BigInt(M).toString(10)}const i=E(t,Dn),a=E(t,en),o=E(t,ui),s=E(t,Mn),d=E(t,Ln),l=E(t,Un);let c=E(t,Fn),u=E(t,zn),h=E(t,qn),y=E(t,Kn);const p=Qs(i,a,o,s,d,l,c,u,h,y);if(r){const{unit:M,increment:H,roundingMode:re}=r;({seconds:c,milliseconds:u,microseconds:h,nanoseconds:y}=cc(0,0,0,0,0,0,c,u,h,y,H,M,re))}const f=[];i&&f.push(`${n(Yt(i))}Y`),a&&f.push(`${n(Yt(a))}M`),o&&f.push(`${n(Yt(o))}W`),s&&f.push(`${n(Yt(s))}D`);const g=[];d&&g.push(`${n(Yt(d))}H`),l&&g.push(`${n(Yt(l))}M`);const v=[];let b,m,w,S,T=Kf(0,0,0,c,u,h,y,0);({quotient:T,remainder:b}=Er(T,Ot)),{quotient:T,remainder:m}=Er(T,Ot),{quotient:S,remainder:w}=Er(T,Ot);const x=1e6*Yt($.toNumber(w))+1e3*Yt($.toNumber(m))+Yt($.toNumber(b));let I;if(e==="auto"){if(x!==0)for(I=`${x}`.padStart(9,"0");I[I.length-1]==="0";)I=I.slice(0,-1)}else e!==0&&(I=`${x}`.padStart(9,"0").slice(0,e));return I&&v.unshift(".",I),$.equal(S,hr)&&!v.length&&e==="auto"||v.unshift(ls(S).toString()),v.length&&g.push(`${v.join("")}S`),g.length&&g.unshift("T"),f.length||g.length?`${p<0?"-":""}P${f.join("")}${g.join("")}`:"PT0S"}function LP(t,e="auto"){return`${Au(E(t,Oe))}-${rr(E(t,Re))}-${rr(E(t,je))}${BE(E(t,ge),e)}`}function UP(t,e,r="auto",n){let i=E(t,Oe),a=E(t,Re),o=E(t,je),s=E(t,nt),d=E(t,it),l=E(t,ot),c=E(t,st),u=E(t,at),h=E(t,ct);if(n){const{unit:y,increment:p,roundingMode:f}=n;({year:i,month:a,day:o,hour:s,minute:d,second:l,millisecond:c,microsecond:u,nanosecond:h}=JE(i,a,o,s,d,l,c,u,h,p,y,f))}return`${Au(i)}-${rr(a)}-${rr(o)}T${rr(s)}:${rr(d)}${zw(l,c,u,h,e)}${BE(E(t,ge),r)}`}function FP(t,e="auto"){let r=`${rr(E(t,Re))}-${rr(E(t,je))}`;const n=fn(E(t,ge));(e==="always"||e==="critical"||n!=="iso8601")&&(r=`${Au(E(t,Oe))}-${r}`);const i=DE(n,e);return i&&(r+=i),r}function zP(t,e="auto"){let r=`${Au(E(t,Oe))}-${rr(E(t,Re))}`;const n=fn(E(t,ge));(e==="always"||e==="critical"||n!=="iso8601")&&(r+=`-${rr(E(t,je))}`);const i=DE(n,e);return i&&(r+=i),r}function qP(t,e,r="auto",n="auto",i="auto",a){let o=E(t,Sn);if(a){const{unit:c,increment:u,roundingMode:h}=a,y=$0(E(t,Ve),u,c,h);o=new(Ae("%Temporal.Instant%"))(y)}const s=E(t,Lt),d=qi(s,o,"iso8601");let l=`${Au(E(d,Oe))}-${rr(E(d,Re))}-${rr(E(d,je))}T${rr(E(d,nt))}:${rr(E(d,it))}${zw(E(d,ot),E(d,st),E(d,at),E(d,ct),e)}`;return i!=="never"&&(l+=p6(ws(s,o))),n!=="never"&&(l+=`[${n==="critical"?"!":""}${ry(s)}]`),l+=BE(E(t,ge),r),l}function of(t){return k6.test(ky(t))}function Rd(t){const e=k6.exec(ky(t));if(!e)throw new RangeError(`invalid time zone offset: ${t}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function HE(t){return of(t)?qw(Rd(t)):i6(ky(t)).resolvedOptions().timeZone}function Qa(t,e){const{year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l,nanosecond:c}=m6(t,e),u=r%400,h=(r-u)/400,y=$.multiply($.BigInt(146097),ia),p=jd(u,n,i,a,o,s,d,l,c),f=$.add(p,$.multiply(y,$.BigInt(h)));return $.toNumber($.subtract(f,e))}function qw(t){const e=t<0?"-":"+",r=Yt(t),n=r%1e9,i=ji(r/1e9)%60,a=ji(r/6e10)%60,o=rr(ji(r/36e11)),s=rr(a),d=rr(i);let l="";if(n){let c=`${n}`.padStart(9,"0");for(;c[c.length-1]==="0";)c=c.slice(0,-1);l=`:${d}.${c}`}else i&&(l=`:${d}`);return`${e}${o}:${s}${l}`}function p6(t){let e=$.toNumber(Ui($.BigInt(t),t6,"halfExpand"));const r=e<0?"-":"+";e=Yt(e);const n=e/6e10%60;return`${r}${rr(ji(e/36e11))}:${rr(n)}`}function jd(t,e,r,n,i,a,o,s,d){const l=new Date;l.setUTCHours(n,i,a,o),l.setUTCFullYear(t,e-1,r);const c=l.getTime();if(kw(c))return null;let u=$.multiply($.BigInt(c),yo);return u=$.add(u,$.multiply($.BigInt(s),Ot)),u=$.add(u,$.BigInt(d)),$.lessThan(u,Jp)||$.greaterThan(u,Lf)?null:u}function y6(t){const{quotient:e,remainder:r}=Er(t,yo);let n=$.toNumber(e),i=$.toNumber(r);i<0&&(i+=1e6,n-=1);const a=ji(i/1e3)%1e3,o=i%1e3,s=new Date(n);return{epochMilliseconds:n,year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds(),microsecond:a,nanosecond:o}}function m6(t,e){const{epochMilliseconds:r,millisecond:n,microsecond:i,nanosecond:a}=y6(e),{year:o,month:s,day:d,hour:l,minute:c,second:u}=function(y,p){const f=i6(y).format(new Date(p));return function(v){const b=v.split(/[^\w]+/);if(b.length!==7)throw new RangeError(`expected 7 parts in "${v}`);const m=+b[0],w=+b[1];let S=+b[2];const T=b[3].toUpperCase();if(T==="B"||T==="BC")S=1-S;else if(T!=="A"&&T!=="AD")throw new RangeError(`Unknown era ${T} in "${v}`);let x=+b[4];x===24&&(x=0);const I=+b[5],M=+b[6];if(!(Vn(S)&&Vn(m)&&Vn(w)&&Vn(x)&&Vn(I)&&Vn(M)))throw new RangeError(`Invalid number in "${v}`);return{year:S,month:m,day:w,hour:x,minute:I,second:M}}(f)}(t,r);return GE(o,s,d,l,c,u,n,i,a)}function KP(t,e){return $.lessThan(t,e)?e:t}function g6(){return $.add(tS(),wW)}function w6(t,e){if($.lessThan(e,mf))return w6(t,mf);const r=$.add(e,r6),n=KP(g6(),r);let i=KP(mf,e);const a=Qa(t,i);let o=i,s=a;for(;a===s&&$.lessThan($.BigInt(i),n);){if(o=$.add(i,n6),$.greaterThan(o,Lf))return null;s=Qa(t,o),a===s&&(i=o)}return a===s?null:O6(d=>Qa(t,d),i,o,a,s)}function S_(t,e){const r=g6(),n=$.greaterThan(e,r),i=n?$.subtract(e,r6):mf;if(t==="Africa/Casablanca"||t==="Africa/El_Aaiun"){const l=E(us("2088-01-01T00Z"),Ve);if($.lessThan(l,e))return S_(t,l)}let a=$.subtract(e,lh);if($.lessThan(a,mf))return null;const o=Qa(t,a);let s=a,d=o;for(;o===d&&$.greaterThan(a,i);){if(s=$.subtract(a,n6),$.lessThan(s,mf))return null;d=Qa(t,s),o===d&&(a=s)}if(o===d){if(n){const l=$.subtract(r,ia);return S_(t,l)}return null}return O6(l=>Qa(t,l),s,a,d,o)}function Cd(t){return t===void 0?!1:t%4==0&&(t%100!=0||t%400==0)}function Ja(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Cd(t)?"leapyear":"standard"][e-1]}function $_(t,e,r){const n=e+(e<3?10:-2),i=t-(e<3?1:0),a=ji(i/100),o=i-100*a,s=(r+ji(2.6*n-.2)+(o+ji(o/4))+(ji(a/4)-2*a))%7;return s+(s<=0?7:0)}function E0(t,e,r){let n=r;for(let i=e-1;i>0;i--)n+=Ja(t,i);return n}function VP(t,e,r){const n=E0(t,e,r),i=$_(t,e,r)||7,a=$_(t,1,1),o=ji((n-i+10)/7);return o<1?a===5||a===6&&Cd(t-1)?{week:53,year:t-1}:{week:52,year:t-1}:o===53&&(Cd(t)?366:365)-n<4-i?{week:1,year:t+1}:{week:o,year:t}}function Qs(t,e,r,n,i,a,o,s,d,l){for(const c of[t,e,r,n,i,a,o,s,d,l])if(c!==0)return c<0?-1:1;return 0}function gg(t,e){let r=t,n=e;if(!Vn(r)||!Vn(n))throw new RangeError("infinity is out of range");return n-=1,r+=ji(n/12),n%=12,n<0&&(n+=12),n+=1,{year:r,month:n}}function Kw(t,e,r){let n=t,i=e,a=r;if(!Vn(a))throw new RangeError("infinity is out of range");({year:n,month:i}=gg(n,i));const o=146097;if(Yt(a)>o){const l=Rl(a/o);n+=400*l,a-=l*o}let s=0,d=i>2?n:n-1;for(;s=Cd(d)?366:365,a<-s;)n-=1,d-=1,a+=s;for(d+=1;s=Cd(d)?366:365,a>s;)n+=1,d+=1,a-=s;for(;a<1;)({year:n,month:i}=gg(n,i-1)),a+=Ja(n,i);for(;a>Ja(n,i);)a-=Ja(n,i),{year:n,month:i}=gg(n,i+1);return{year:n,month:i,day:a}}function GE(t,e,r,n,i,a,o,s,d){const{deltaDays:l,hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}=La(n,i,a,o,s,d),{year:g,month:v,day:b}=Kw(t,e,r+l);return{year:g,month:v,day:b,hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}}function La(t,e,r,n,i,a){let o,s=$.BigInt(t),d=$.BigInt(e),l=$.BigInt(r),c=$.BigInt(n),u=$.BigInt(i),h=$.BigInt(a);return{quotient:o,remainder:h}=ul(h,Ot),u=$.add(u,o),{quotient:o,remainder:u}=ul(u,Ot),c=$.add(c,o),{quotient:o,remainder:c}=ul(c,Ot),l=$.add(l,o),{quotient:o,remainder:l}=ul(l,Zs),d=$.add(d,o),{quotient:o,remainder:d}=ul(d,Zs),s=$.add(s,o),{quotient:o,remainder:s}=ul(s,JR),{deltaDays:$.toNumber(o),hour:$.toNumber(s),minute:$.toNumber(d),second:$.toNumber(l),millisecond:$.toNumber(c),microsecond:$.toNumber(u),nanosecond:$.toNumber(h)}}function Kf(t,e,r,n,i,a,o,s){const d=$.BigInt(t);let l=$.BigInt(o);t!==0&&(l=$.subtract($.BigInt(o),$.BigInt(s)));const c=$.add($.BigInt(e),$.multiply(d,$.BigInt(24))),u=$.add($.BigInt(r),$.multiply(c,Zs)),h=$.add($.BigInt(n),$.multiply(u,Zs)),y=$.add($.BigInt(i),$.multiply(h,Ot)),p=$.add($.BigInt(a),$.multiply(y,Ot));return $.add($.BigInt(l),$.multiply(p,Ot))}function WE(t,e){const r=Ae("%Temporal.Instant%"),n=Mf($.toNumber(t));let i=$.BigInt(t),a=864e11;if(n===0)return{days:0,nanoseconds:hr,dayLengthNs:a};if(!Be(e)){let m;return{quotient:m,remainder:i}=Er(i,$.BigInt(a)),{days:$.toNumber(m),nanoseconds:i,dayLengthNs:a}}const o=E(e,Ve),s=E(e,Sn),d=$.add(o,i),l=new r(d),c=E(e,Lt),u=E(e,ge),h=qi(c,s,u),y=qi(c,l,u);let{days:p}=QE(E(h,Oe),E(h,Re),E(h,je),E(h,nt),E(h,it),E(h,ot),E(h,st),E(h,at),E(h,ct),E(y,Oe),E(y,Re),E(y,je),E(y,nt),E(y,it),E(y,ot),E(y,st),E(y,at),E(y,ct),u,"day",xn(null)),f=mo(s,c,u,0,0,0,p,0,0,0,0,0,0),g=$.BigInt(p);if(n===1)for(;$.greaterThan(g,hr)&&$.greaterThan(f,d);)g=$.subtract(g,lh),f=mo(s,c,u,0,0,0,$.toNumber(g),0,0,0,0,0,0);i=$.subtract(d,f);let v=!1,b=new r(f);do{const m=mo(b,c,u,0,0,0,n,0,0,0,0,0,0),w=E(b,Ve);a=$.toNumber($.subtract(m,w)),v=$.greaterThanOrEqual($.multiply($.subtract(i,$.BigInt(a)),$.BigInt(n)),hr),v&&(i=$.subtract(i,$.BigInt(a)),b=new r(m),g=$.add(g,$.BigInt(n)))}while(v);if(!oo(g)&&OP(g)!==n)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!oo(i)&&OP(i)!==n)throw y0(i)&&n===1?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if($.greaterThanOrEqual(ls(i),ls($.BigInt(a))))throw new Error("assert not reached");return{days:$.toNumber(g),nanoseconds:i,dayLengthNs:Yt(a)}}function Vo(t,e,r,n,i,a,o,s,d){let l=b6(t,e,r,n,i,a,o,s,d);if(l==="positive overflow"||l==="negative overflow")throw new RangeError("Duration out of range");return l}function b6(t,e,r,n,i,a,o,s,d){let l,c,u,h,y,p,f=t;if(Be(d)){const x=mo(E(d,Sn),E(d,Lt),E(d,ge),0,0,0,f,e,r,n,i,a,o),I=E(d,Ve);l=$.subtract(x,I)}else l=Kf(f,e,r,n,i,a,o,0);s==="year"||s==="month"||s==="week"||s==="day"?{days:f,nanoseconds:l}=WE(l,d):f=0;const g=$.lessThan(l,hr)?-1:1;switch(l=ls(l),c=u=h=y=p=hr,s){case"year":case"month":case"week":case"day":case"hour":({quotient:c,remainder:l}=Er(l,Ot)),{quotient:u,remainder:c}=Er(c,Ot),{quotient:h,remainder:u}=Er(u,Ot),{quotient:y,remainder:h}=Er(h,Zs),{quotient:p,remainder:y}=Er(y,Zs);break;case"minute":({quotient:c,remainder:l}=Er(l,Ot)),{quotient:u,remainder:c}=Er(c,Ot),{quotient:h,remainder:u}=Er(u,Ot),{quotient:y,remainder:h}=Er(h,Zs);break;case"second":({quotient:c,remainder:l}=Er(l,Ot)),{quotient:u,remainder:c}=Er(c,Ot),{quotient:h,remainder:u}=Er(u,Ot);break;case"millisecond":({quotient:c,remainder:l}=Er(l,Ot)),{quotient:u,remainder:c}=Er(c,Ot);break;case"microsecond":({quotient:c,remainder:l}=Er(l,Ot));break;case"nanosecond":break;default:throw new Error("assert not reached")}const v=$.toNumber(p)*g,b=$.toNumber(y)*g,m=$.toNumber(h)*g,w=$.toNumber(u)*g,S=$.toNumber(c)*g,T=$.toNumber(l)*g;for(const x of[f,v,b,m,w,S,T])if(!Vn(x))return g===1?"positive overflow":"negative overflow";return{days:f,hours:v,minutes:b,seconds:m,milliseconds:w,microseconds:S,nanoseconds:T}}function km(t,e,r,n,i,a){const o=Ae("%Temporal.Duration%"),s=Qs(t,e,r,n,0,0,0,0,0,0);if(s===0)return{years:t,months:e,weeks:r,days:n};const d=$.BigInt(s);let l,c,u=$.BigInt(t),h=$.BigInt(e),y=$.BigInt(r),p=$.BigInt(n);a&&(c=Ut(a),l=E(c,ge));const f=new o(s),g=new o(0,s),v=new o(0,0,s);switch(i){case"year":break;case"month":{if(!l)throw new RangeError("a starting point is required for months balancing");let b,m;for(typeof l!="string"&&(b=Nt(l,"dateAdd"),m=Nt(l,"dateUntil"));!oo(u);){const w=ln(l,c,f,void 0,b),S=xn(null);S.largestUnit="month";const T=Od(l,c,w,S,m),x=$.BigInt(E(T,en));c=w,h=$.add(h,x),u=$.subtract(u,d)}}break;case"week":{if(!l)throw new RangeError("a starting point is required for weeks balancing");const b=typeof l!="string"?Nt(l,"dateAdd"):void 0;for(;!oo(u);){let m;({relativeTo:c,days:m}=vn(l,c,f,b)),p=$.add(p,$.BigInt(m)),u=$.subtract(u,d)}for(;!oo(h);){let m;({relativeTo:c,days:m}=vn(l,c,g,b)),p=$.add(p,$.BigInt(m)),h=$.subtract(h,d)}break}default:{if(oo(u)&&oo(h)&&oo(y))break;if(!l)throw new RangeError("a starting point is required for balancing calendar units");const b=typeof l!="string"?Nt(l,"dateAdd"):void 0;for(;!oo(u);){let m;({relativeTo:c,days:m}=vn(l,c,f,b)),p=$.add(p,$.BigInt(m)),u=$.subtract(u,d)}for(;!oo(h);){let m;({relativeTo:c,days:m}=vn(l,c,g,b)),p=$.add(p,$.BigInt(m)),h=$.subtract(h,d)}for(;!oo(y);){let m;({relativeTo:c,days:m}=vn(l,c,v,b)),p=$.add(p,$.BigInt(m)),y=$.subtract(y,d)}break}}return{years:$.toNumber(u),months:$.toNumber(h),weeks:$.toNumber(y),days:$.toNumber(p)}}function HP(t,e,r,n,i){if(Be(t)){const a=E(t,Sn),o=E(t,Lt),s=E(t,ge),d=ws(o,a),l=mo(a,o,s,e,r,n,i,0,0,0,0,0,0);return ws(o,new(Ae("%Temporal.Instant%"))(l))-d}return 0}function v6(t){return new(Ae("%Temporal.Duration%"))(-E(t,Dn),-E(t,en),-E(t,ui),-E(t,Mn),-E(t,Ln),-E(t,Un),-E(t,Fn),-E(t,zn),-E(t,qn),-E(t,Kn))}function Oi(t,e,r){return uW(r,fW(e,t))}function _6(t,e,r){const n=Oi(e,1,12);return{year:t,month:n,day:Oi(r,1,Ja(t,n))}}function un(t,e,r){if(t<e||t>r)throw new RangeError(`value out of range: ${e} <= ${t} <= ${r}`)}function oa(t,e,r){un(e,1,12),un(r,1,Ja(t,e))}function E6(t,e,r){S6(t,e,r,12,0,0,0,0,0)}function Vw(t,e,r,n,i,a){un(t,0,23),un(e,0,59),un(r,0,59),un(n,0,999),un(i,0,999),un(a,0,999)}function YE(t,e,r,n,i,a,o,s,d){oa(t,e,r),Vw(n,i,a,o,s,d)}function S6(t,e,r,n,i,a,o,s,d){if(un(t,h0,p0),t===h0&&jd(t,e,r+1,n,i,a,o,s,d-1)==null||t===p0&&jd(t,e,r-1,n,i,a,o,s,d+1)==null)throw new RangeError("DateTime outside of supported range")}function vl(t){if($.lessThan(t,Jp)||$.greaterThan(t,Lf))throw new RangeError("Instant outside of supported range")}function S0(t,e,r,n,i,a,o,s,d,l){const c=Qs(t,e,r,n,i,a,o,s,d,l);for(const u of[t,e,r,n,i,a,o,s,d,l]){if(!Vn(u))throw new RangeError("infinite values not allowed as duration fields");const h=Mf(u);if(h!==0&&h!==c)throw new RangeError("mixed-sign values not allowed as duration fields")}}function ZE(t,e,r,n,i,a,o){switch(o){case"year":case"month":{const s=-hd(t,e,r,n,i,a);if(s===0)return{years:0,months:0,weeks:0,days:0};const d={year:t,month:e,day:r},l={year:n,month:i,day:a};let c=l.year-d.year,u=ql(t,e,r,c,0,0,0,"constrain"),h=-hd(u.year,u.month,u.day,n,i,a);if(h===0)return o==="year"?{years:c,months:0,weeks:0,days:0}:{years:0,months:12*c,weeks:0,days:0};let y=l.month-d.month;if(h!==s&&(c-=s,y+=12*s),u=ql(t,e,r,c,y,0,0,"constrain"),h=-hd(u.year,u.month,u.day,n,i,a),h===0)return o==="year"?{years:c,months:y,weeks:0,days:0}:{years:0,months:y+12*c,weeks:0,days:0};h!==s&&(y-=s,y===-s&&(c-=s,y=11*s),u=ql(t,e,r,c,y,0,0,"constrain"));let p=0;return p=u.month===l.month?l.day-u.day:s<0?-u.day-(Ja(l.year,l.month)-l.day):l.day+(Ja(u.year,u.month)-u.day),o==="month"&&(y+=12*c,c=0),{years:c,months:y,weeks:0,days:p}}case"week":case"day":{let s,d,l;hd(t,e,r,n,i,a)<0?(d={year:t,month:e,day:r},s={year:n,month:i,day:a},l=1):(d={year:n,month:i,day:a},s={year:t,month:e,day:r},l=-1);let c=E0(s.year,s.month,s.day)-E0(d.year,d.month,d.day);for(let h=d.year;h<s.year;++h)c+=Cd(h)?366:365;let u=0;return o==="week"&&(u=ji(c/7),c%=7),u*=l,c*=l,{years:0,months:0,weeks:u,days:c}}default:throw new Error("assert not reached")}}function $6(t,e,r,n,i,a,o,s,d,l,c,u){let h=o-t,y=s-e,p=d-r,f=l-n,g=c-i,v=u-a;const b=Qs(0,0,0,0,h,y,p,f,g,v);h*=b,y*=b,p*=b,f*=b,g*=b,v*=b;let m=0;if({deltaDays:m,hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v}=La(h,y,p,f,g,v),m!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return h*=b,y*=b,p*=b,f*=b,g*=b,v*=b,{hours:h,minutes:y,seconds:p,milliseconds:f,microseconds:g,nanoseconds:v}}function XE(t,e,r,n,i,a){const o=$.subtract(e,t);let s=0,d=0,l=$.toNumber($.remainder(o,Ot)),c=$.toNumber($.remainder($.divide(o,Ot),Ot)),u=$.toNumber($.remainder($.divide(o,yo),Ot)),h=$.toNumber($.divide(o,Xs));return{hours:s,minutes:d,seconds:h,milliseconds:u,microseconds:c,nanoseconds:l}=cc(0,0,0,0,0,0,h,u,c,l,r,n,a),Vo(0,s,d,h,u,c,l,i)}function QE(t,e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g,v,b,m,w){let S=t,T=e,x=r,{hours:I,minutes:M,seconds:H,milliseconds:re,microseconds:J,nanoseconds:z}=$6(n,i,a,o,s,d,h,y,p,f,g,v);const oe=Qs(0,0,0,0,I,M,H,re,J,z);hd(l,c,u,S,T,x)===-oe&&({year:S,month:T,day:x}=Kw(S,T,x-oe),{hours:I,minutes:M,seconds:H,milliseconds:re,microseconds:J,nanoseconds:z}=Vo(-oe,I,M,H,re,J,z,m));const C=wo(S,T,x,b),V=wo(l,c,u,b),q=iu("day",m),Q=qd(w);Q.largestUnit=q;let{years:R,months:B,weeks:D,days:G}=Od(b,C,V,Q);return{days:G,hours:I,minutes:M,seconds:H,milliseconds:re,microseconds:J,nanoseconds:z}=Vo(G,I,M,H,re,J,z,m),{years:R,months:B,weeks:D,days:G,hours:I,minutes:M,seconds:H,milliseconds:re,microseconds:J,nanoseconds:z}}function T6(t,e,r,n,i,a){const o=$.subtract(e,t);if($.equal(o,hr))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const s=Ae("%Temporal.Instant%"),d=new s(t),l=new s(e),c=qi(r,d,n),u=qi(r,l,n);let{years:h,months:y,weeks:p,days:f}=QE(E(c,Oe),E(c,Re),E(c,je),E(c,nt),E(c,it),E(c,ot),E(c,st),E(c,at),E(c,ct),E(u,Oe),E(u,Re),E(u,je),E(u,nt),E(u,it),E(u,ot),E(u,st),E(u,at),E(u,ct),n,i,a);const g=mo(d,r,n,h,y,p,0,0,0,0,0,0,0);let v=$.subtract(e,g);const b=sn(g,r,n);({nanoseconds:v,days:f}=WE(v,b));const{hours:m,minutes:w,seconds:S,milliseconds:T,microseconds:x,nanoseconds:I}=Vo(0,0,0,0,0,0,$.toNumber(v),"hour");return{years:h,months:y,weeks:p,days:f,hours:m,minutes:w,seconds:S,milliseconds:T,microseconds:x,nanoseconds:I}}function yh(t,e,r,n,i,a){const o=Oy.reduce((y,p)=>{const f=p[0],g=p[1],v=p[2];return r!=="datetime"&&v!==r||n.includes(g)||y.push(g,f),y},[]);let s=Ci(e,"largestUnit",r,"auto");if(n.includes(s))throw new RangeError(`largestUnit must be one of ${o.join(", ")}, not ${s}`);const d=fh(e);let l=gs(e,"trunc");t==="since"&&(l=function(p){switch(p){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return p}}(l));const c=Ci(e,"smallestUnit",r,i);if(n.includes(c))throw new RangeError(`smallestUnit must be one of ${o.join(", ")}, not ${c}`);const u=iu(a,c);if(s==="auto"&&(s=u),iu(s,c)!==s)throw new RangeError(`largestUnit ${s} cannot be smaller than smallestUnit ${c}`);const h={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[c];return h!==void 0&&hh(d,h,!1),{largestUnit:s,roundingIncrement:d,roundingMode:l,smallestUnit:c}}function GP(t,e,r,n){const i=t==="since"?-1:1,a=us(r),o=yh(t,qd(n),"time",[],"nanosecond","second"),s=E(e,Ve),d=E(a,Ve);let{hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=XE(s,d,o.roundingIncrement,o.smallestUnit,o.largestUnit,o.roundingMode);return new(Ae("%Temporal.Duration%"))(0,0,0,0,i*l,i*c,i*u,i*h,i*y,i*p)}function WP(t,e,r,n){const i=t==="since"?-1:1,a=Ut(r),o=E(e,ge);Fw(o,E(a,ge),"compute difference between dates");const s=qd(n),d=yh(t,s,"date",[],"day","day");s.largestUnit=d.largestUnit;let{years:l,months:c,weeks:u,days:h}=Od(o,e,a,s);return d.smallestUnit==="day"&&d.roundingIncrement===1||({years:l,months:c,weeks:u,days:h}=cc(l,c,u,h,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)),new(Ae("%Temporal.Duration%"))(i*l,i*c,i*u,i*h,0,0,0,0,0,0)}function YP(t,e,r,n){const i=t==="since"?-1:1,a=jl(r),o=E(e,ge);Fw(o,E(a,ge),"compute difference between dates");const s=qd(n),d=yh(t,s,"datetime",[],"nanosecond","day");let{years:l,months:c,weeks:u,days:h,hours:y,minutes:p,seconds:f,milliseconds:g,microseconds:v,nanoseconds:b}=QE(E(e,Oe),E(e,Re),E(e,je),E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct),E(a,Oe),E(a,Re),E(a,je),E(a,nt),E(a,it),E(a,ot),E(a,st),E(a,at),E(a,ct),o,d.largestUnit,s);const m=qf(e);return{years:l,months:c,weeks:u,days:h,hours:y,minutes:p,seconds:f,milliseconds:g,microseconds:v,nanoseconds:b}=cc(l,c,u,h,y,p,f,g,v,b,d.roundingIncrement,d.smallestUnit,d.roundingMode,m),{days:h,hours:y,minutes:p,seconds:f,milliseconds:g,microseconds:v,nanoseconds:b}=Vo(h,y,p,f,g,v,b,d.largestUnit),new(Ae("%Temporal.Duration%"))(i*l,i*c,i*u,i*h,i*y,i*p,i*f,i*g,i*v,i*b)}function ZP(t,e,r,n){const i=t==="since"?-1:1,a=Wa(r),o=yh(t,qd(n),"time",[],"nanosecond","hour");let{hours:s,minutes:d,seconds:l,milliseconds:c,microseconds:u,nanoseconds:h}=$6(E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct),E(a,nt),E(a,it),E(a,ot),E(a,st),E(a,at),E(a,ct));return{hours:s,minutes:d,seconds:l,milliseconds:c,microseconds:u,nanoseconds:h}=cc(0,0,0,0,s,d,l,c,u,h,o.roundingIncrement,o.smallestUnit,o.roundingMode),{hours:s,minutes:d,seconds:l,milliseconds:c,microseconds:u,nanoseconds:h}=Vo(0,s,d,l,c,u,h,o.largestUnit),new(Ae("%Temporal.Duration%"))(0,0,0,0,i*s,i*d,i*l,i*c,i*u,i*h)}function XP(t,e,r,n){const i=t==="since"?-1:1,a=cp(r),o=E(e,ge);Fw(o,E(a,ge),"compute difference between months");const s=qd(n),d=yh(t,s,"date",["week","day"],"month","year");s.largestUnit=d.largestUnit;const l=Ir(o,["monthCode","year"]),c=ht(e,l,[]);c.day=1;const u=ac(o,c),h=ht(a,l,[]);h.day=1;const y=ac(o,h);let{years:p,months:f}=Od(o,u,y,s);return d.smallestUnit==="month"&&d.roundingIncrement===1||({years:p,months:f}=cc(p,f,0,0,0,0,0,0,0,0,d.roundingIncrement,d.smallestUnit,d.roundingMode,u)),new(Ae("%Temporal.Duration%"))(i*p,i*f,0,0,0,0,0,0,0,0)}function QP(t,e,r,n){const i=t==="since"?-1:1,a=dp(r),o=E(e,ge);Fw(o,E(a,ge),"compute difference between dates");const s=qd(n),d=yh(t,s,"datetime",[],"nanosecond","hour");s.largestUnit=d.largestUnit;const l=E(e,Ve),c=E(a,Ve);let u,h,y,p,f,g,v,b,m,w;if(d.largestUnit!=="year"&&d.largestUnit!=="month"&&d.largestUnit!=="week"&&d.largestUnit!=="day")u=0,h=0,y=0,p=0,{hours:f,minutes:g,seconds:v,milliseconds:b,microseconds:m,nanoseconds:w}=XE(l,c,d.roundingIncrement,d.smallestUnit,d.largestUnit,d.roundingMode);else{const S=E(e,Lt);if(!f6(S,E(a,Lt)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:u,months:h,weeks:y,days:p,hours:f,minutes:g,seconds:v,milliseconds:b,microseconds:m,nanoseconds:w}=T6(l,c,S,o,d.largestUnit,s)),{years:u,months:h,weeks:y,days:p,hours:f,minutes:g,seconds:v,milliseconds:b,microseconds:m,nanoseconds:w}=cc(u,h,y,p,f,g,v,b,m,w,d.roundingIncrement,d.smallestUnit,d.roundingMode,e),{years:u,months:h,weeks:y,days:p,hours:f,minutes:g,seconds:v,milliseconds:b,microseconds:m,nanoseconds:w}=I6(u,h,y,p,f,g,v,b,m,w,d.roundingIncrement,d.smallestUnit,d.roundingMode,e)}return new(Ae("%Temporal.Duration%"))(i*u,i*h,i*y,i*p,i*f,i*g,i*v,i*b,i*m,i*w)}function ql(t,e,r,n,i,a,o,s){let d=t,l=e,c=r,u=a,h=o;return d+=n,l+=i,{year:d,month:l}=gg(d,l),{year:d,month:l,day:c}=g0(d,l,c,s),h+=7*u,c+=h,{year:d,month:l,day:c}=Kw(d,l,c),{year:d,month:l,day:c}}function A6(t,e,r,n,i,a,o,s,d,l,c,u){let h=t,y=e,p=r,f=n,g=i,v=a;h+=o,y+=s,p+=d,f+=l,g+=c,v+=u;let b=0;return{deltaDays:b,hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v}=La(h,y,p,f,g,v),{deltaDays:b,hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v}}function P6(t,e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g,v,b,m,w){const S=iu(__(t,e,r,n,i,a,o,s,d,l),__(c,u,h,y,p,f,g,v,b,m));let T,x,I,M,H,re,J,z,oe,C;if(w)if(wt(w)){const V=Ae("%Temporal.Duration%"),q=E(w,ge),Q=new V(t,e,r,n,0,0,0,0,0,0),R=new V(c,u,h,y,0,0,0,0,0,0),B=typeof q!="string"?Nt(q,"dateAdd"):void 0,D=ln(q,w,Q,void 0,B),G=ln(q,D,R,void 0,B),Z=iu("day",S),N=xn(null);N.largestUnit=Z,{years:T,months:x,weeks:I,days:M}=Od(q,w,G,N),{days:M,hours:H,minutes:re,seconds:J,milliseconds:z,microseconds:oe,nanoseconds:C}=Vo(M,$.add($.BigInt(i),$.BigInt(p)),$.add($.BigInt(a),$.BigInt(f)),$.add($.BigInt(o),$.BigInt(g)),$.add($.BigInt(s),$.BigInt(v)),$.add($.BigInt(d),$.BigInt(b)),$.add($.BigInt(l),$.BigInt(m)),S)}else{const V=Ae("%Temporal.Instant%"),q=E(w,Lt),Q=E(w,ge),R=mo(E(w,Sn),q,Q,t,e,r,n,i,a,o,s,d,l),B=mo(new V(R),q,Q,c,u,h,y,p,f,g,v,b,m);S!=="year"&&S!=="month"&&S!=="week"&&S!=="day"?(T=0,x=0,I=0,M=0,{hours:H,minutes:re,seconds:J,milliseconds:z,microseconds:oe,nanoseconds:C}=XE(E(w,Ve),B,1,"nanosecond",S,"halfExpand")):{years:T,months:x,weeks:I,days:M,hours:H,minutes:re,seconds:J,milliseconds:z,microseconds:oe,nanoseconds:C}=T6(E(w,Ve),B,q,Q,S,xn(null))}else{if(S==="year"||S==="month"||S==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");T=x=I=0,{days:M,hours:H,minutes:re,seconds:J,milliseconds:z,microseconds:oe,nanoseconds:C}=Vo(n+y,$.add($.BigInt(i),$.BigInt(p)),$.add($.BigInt(a),$.BigInt(f)),$.add($.BigInt(o),$.BigInt(g)),$.add($.BigInt(s),$.BigInt(v)),$.add($.BigInt(d),$.BigInt(b)),$.add($.BigInt(l),$.BigInt(m)),S)}return S0(T,x,I,M,H,re,J,z,oe,C),{years:T,months:x,weeks:I,days:M,hours:H,minutes:re,seconds:J,milliseconds:z,microseconds:oe,nanoseconds:C}}function T_(t,e,r,n,i,a,o){let s=hr;s=$.add(s,$.BigInt(o)),s=$.add(s,$.multiply($.BigInt(a),Ot)),s=$.add(s,$.multiply($.BigInt(i),yo)),s=$.add(s,$.multiply($.BigInt(n),Xs)),s=$.add(s,$.multiply($.BigInt(r),$.BigInt(6e10))),s=$.add(s,$.multiply($.BigInt(e),$.BigInt(36e11)));const d=$.add(t,s);return vl(d),d}function A_(t,e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g,v,b,m,w){let S=y,{deltaDays:T,hour:x,minute:I,second:M,millisecond:H,microsecond:re,nanosecond:J}=A6(n,i,a,o,s,d,p,f,g,v,b,m);S+=T;const z=Ae("%Temporal.Duration%"),oe=ln(l,wo(t,e,r,l),new z(c,u,h,S,0,0,0,0,0,0),w);return{year:E(oe,Oe),month:E(oe,Re),day:E(oe,je),hour:x,minute:I,second:M,millisecond:H,microsecond:re,nanosecond:J}}function mo(t,e,r,n,i,a,o,s,d,l,c,u,h,y){const p=Ae("%Temporal.Duration%");if(Qs(n,i,a,o,0,0,0,0,0,0)===0)return T_(E(t,Ve),s,d,l,c,u,h);const f=qi(e,t,r),g=ln(r,wo(E(f,Oe),E(f,Re),E(f,je),r),new p(n,i,a,o,0,0,0,0,0,0),y),v=ki(E(g,Oe),E(g,Re),E(g,je),E(f,nt),E(f,it),E(f,ot),E(f,st),E(f,at),E(f,ct),r);return T_(E(Hn(e,v,"compatible"),Ve),s,d,l,c,u,h)}function JP(t,e,r,n){const i=t==="subtract"?-1:1;let{years:a,months:o,weeks:s,days:d,hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=Tu(r);const f=mg(bt(n));return{years:a,months:o,weeks:s,days:d,hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=P6(E(e,Dn),E(e,en),E(e,ui),E(e,Mn),E(e,Ln),E(e,Un),E(e,Fn),E(e,zn),E(e,qn),E(e,Kn),i*a,i*o,i*s,i*d,i*l,i*c,i*u,i*h,i*y,i*p,f),new(Ae("%Temporal.Duration%"))(a,o,s,d,l,c,u,h,y,p)}function ex(t,e,r){const n=t==="subtract"?-1:1,{hours:i,minutes:a,seconds:o,milliseconds:s,microseconds:d,nanoseconds:l}=function(h,y){let p=Tu(h);for(const f of y)if(p[f]!==0)throw new RangeError(`Duration field ${f} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return p}(r,["years","months","weeks","days"]),c=T_(E(e,Ve),n*i,n*a,n*o,n*s,n*d,n*l);return new(Ae("%Temporal.Instant%"))(c)}function tx(t,e,r,n){const i=t==="subtract"?-1:1,{years:a,months:o,weeks:s,days:d,hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=Tu(r),f=bt(n),g=E(e,ge),{year:v,month:b,day:m,hour:w,minute:S,second:T,millisecond:x,microsecond:I,nanosecond:M}=A_(E(e,Oe),E(e,Re),E(e,je),E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct),g,i*a,i*o,i*s,i*d,i*l,i*c,i*u,i*h,i*y,i*p,f);return ki(v,b,m,w,S,T,x,I,M,g)}function rx(t,e,r){const n=t==="subtract"?-1:1,{hours:i,minutes:a,seconds:o,milliseconds:s,microseconds:d,nanoseconds:l}=Tu(r);let{hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}=A6(E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct),n*i,n*a,n*o,n*s,n*d,n*l);return{hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}=Rw(c,u,h,y,p,f,"reject"),new(Ae("%Temporal.PlainTime%"))(c,u,h,y,p,f)}function nx(t,e,r,n){let i=Tu(r);t==="subtract"&&(i={years:-i.years,months:-i.months,weeks:-i.weeks,days:-i.days,hours:-i.hours,minutes:-i.minutes,seconds:-i.seconds,milliseconds:-i.milliseconds,microseconds:-i.microseconds,nanoseconds:-i.nanoseconds});let{years:a,months:o,weeks:s,days:d,hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=i;({days:d}=Vo(d,l,c,u,h,y,p,"day"));const f=bt(n),g=E(e,ge),v=Ir(g,["monthCode","year"]),b=ht(e,v,[]),m=xn(null);gf(m,b,[]),b.day=1;let w=ac(g,b);const S=Qs(a,o,s,d,0,0,0,0,0,0),T=Nt(g,"dateAdd"),x=Ae("%Temporal.Duration%");if(S<0){const H=ln(g,w,new x(0,1,0,0,0,0,0,0,0,0),void 0,T),re=ln(g,H,new x(0,0,0,-1,0,0,0,0,0,0),void 0,T);m.day=Dy(g,re),w=ac(g,m)}const I=new x(a,o,s,d,0,0,0,0,0,0),M=qd(f);return su(g,ht(ln(g,w,I,f,T),v,[]),M)}function ix(t,e,r,n){const i=t==="subtract"?-1:1,{years:a,months:o,weeks:s,days:d,hours:l,minutes:c,seconds:u,milliseconds:h,microseconds:y,nanoseconds:p}=Tu(r),f=bt(n),g=E(e,Lt),v=E(e,ge);return sn(mo(E(e,Sn),g,v,i*a,i*o,i*s,i*d,i*l,i*c,i*u,i*h,i*y,i*p,f),g,v)}function Ui(t,e,r){if($.equal(e,lh))return t;let{quotient:n,remainder:i}=Er(t,e);if($.equal(i,hr))return t;const a=$.lessThan(i,hr)?-1:1,o=ls($.multiply(i,$.BigInt(2))),s=$.equal(o,e),d=$.greaterThan(o,e);switch(r){case"ceil":a>0&&(n=$.add(n,$.BigInt(a)));break;case"floor":a<0&&(n=$.add(n,$.BigInt(a)));break;case"expand":n=$.add(n,$.BigInt(a));break;case"trunc":break;case"halfCeil":(d||s&&a>0)&&(n=$.add(n,$.BigInt(a)));break;case"halfFloor":(d||s&&a<0)&&(n=$.add(n,$.BigInt(a)));break;case"halfExpand":(d||s)&&(n=$.add(n,$.BigInt(a)));break;case"halfTrunc":d&&(n=$.add(n,$.BigInt(a)));break;case"halfEven":(d||s&&$.toNumber($.remainder(ls(n),$.BigInt(2)))===1)&&(n=$.add(n,$.BigInt(a)))}return $.multiply(n,e)}function $0(t,e,r,n){let{remainder:i}=ul(t,ia);const a=$.subtract(t,i),o=Ui(i,$.BigInt(R6[r]*e),n);return $.add(a,o)}function JE(t,e,r,n,i,a,o,s,d,l,c,u,h=864e11){const{deltaDays:y,hour:p,minute:f,second:g,millisecond:v,microsecond:b,nanosecond:m}=eS(n,i,a,o,s,d,l,c,u,h),{year:w,month:S,day:T}=Kw(t,e,r+y);return{year:w,month:S,day:T,hour:p,minute:f,second:g,millisecond:v,microsecond:b,nanosecond:m}}function eS(t,e,r,n,i,a,o,s,d,l=864e11){let c=hr;switch(s){case"day":case"hour":c=$.BigInt(t);case"minute":c=$.add($.multiply(c,Zs),$.BigInt(e));case"second":c=$.add($.multiply(c,Zs),$.BigInt(r));case"millisecond":c=$.add($.multiply(c,Ot),$.BigInt(n));case"microsecond":c=$.add($.multiply(c,Ot),$.BigInt(i));case"nanosecond":c=$.add($.multiply(c,Ot),$.BigInt(a))}const u=s==="day"?l:R6[s],h=Ui(c,$.BigInt(u*o),d),y=$.toNumber($.divide(h,$.BigInt(u)));switch(s){case"day":return{deltaDays:y,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return La(y,0,0,0,0,0);case"minute":return La(t,y,0,0,0,0);case"second":return La(t,e,y,0,0,0);case"millisecond":return La(t,e,r,y,0,0);case"microsecond":return La(t,e,r,n,y,0);case"nanosecond":return La(t,e,r,n,i,y);default:throw new Error(`Invalid unit ${s}`)}}function wg(t,e){return ZE(E(t,Oe),E(t,Re),E(t,je),E(e,Oe),E(e,Re),E(e,je),"day").days}function vn(t,e,r,n){const i=ln(t,e,r,void 0,n);return{relativeTo:i,days:wg(e,i)}}function x6(t,e,r,n,i){const a=E(t,Lt),o=E(t,ge);return sn(mo(E(t,Sn),a,o,e,r,n,i,0,0,0,0,0,0),a,o)}function I6(t,e,r,n,i,a,o,s,d,l,c,u,h,y){let p=t,f=e,g=r,v=n,b=i,m=a,w=o,S=s,T=d,x=l;if(!Be(y)||u==="year"||u==="month"||u==="week"||u==="day"||u==="nanosecond"&&c===1)return{years:p,months:f,weeks:g,days:v,hours:b,minutes:m,seconds:w,milliseconds:S,microseconds:T,nanoseconds:x};let I=Kf(0,b,m,w,S,T,x,0);const M=Mf($.toNumber(I)),H=E(y,Lt),re=E(y,ge),J=mo(E(y,Sn),H,re,p,f,g,v,0,0,0,0,0,0),z=mo(new(Ae("%Temporal.Instant%"))(J),H,re,0,0,0,M,0,0,0,0,0,0),oe=$.subtract(z,J);return $.greaterThanOrEqual($.multiply($.subtract(I,oe),$.BigInt(M)),hr)&&({years:p,months:f,weeks:g,days:v}=P6(p,f,g,v,0,0,0,0,0,0,0,0,0,M,0,0,0,0,0,0,y),I=$0($.subtract(I,oe),c,u,h),{hours:b,minutes:m,seconds:w,milliseconds:S,microseconds:T,nanoseconds:x}=Vo(0,0,0,0,0,0,$.toNumber(I),"hour")),{years:p,months:f,weeks:g,days:v,hours:b,minutes:m,seconds:w,milliseconds:S,microseconds:T,nanoseconds:x}}function cc(t,e,r,n,i,a,o,s,d,l,c,u,h,y){let p=t,f=e,g=r,v=n,b=i,m=a,w=o,S=s,T=d,x=$.BigInt(l);const I=Ae("%Temporal.Duration%");let M,H,re,J,z=y;if(z){if(Be(z))H=z,z=Ut(z);else if(!wt(z))throw new TypeError("starting point must be PlainDate or ZonedDateTime");M=E(z,ge)}if(u==="year"||u==="month"||u==="week"||u==="day"){let oe,C,V;x=Kf(0,b,m,w,S,T,l,0),H&&(oe=x6(H,p,f,g,v)),{days:C,nanoseconds:x,dayLengthNs:V}=WE(x,oe),re=$.BigInt(V),v+=C,b=m=w=S=T=0}switch(u){case"year":{if(!M)throw new RangeError("A starting point is required for years rounding");const oe=new I(p),C=typeof M!="string"?Nt(M,"dateAdd"):void 0,V=ln(M,z,oe,void 0,C),q=ln(M,z,new I(p,f,g),void 0,C);z=V,v+=wg(V,q);const Q=ln(M,z,new I(0,0,0,v),void 0,C),R=xn(null);R.largestUnit="year";const B=Od(M,z,Q,R).years;p+=B;const D=z;z=ln(M,z,new I(B),void 0,C),v-=wg(D,z);const G=new I(v<0?-1:1);let{days:Z}=vn(M,z,G,C);Z=Yt(Z);const N=$.multiply($.BigInt(Z),re);x=$.add($.add($.multiply(N,$.BigInt(p)),$.multiply($.BigInt(v),re)),x);const W=Ui(x,$.multiply(N,$.BigInt(c)),h);J=Os(x,N),p=$.toNumber($.divide(W,N)),x=hr,f=g=v=0;break}case"month":{if(!M)throw new RangeError("A starting point is required for months rounding");const oe=new I(p,f),C=typeof M!="string"?Nt(M,"dateAdd"):void 0,V=ln(M,z,oe,void 0,C),q=ln(M,z,new I(p,f,g),void 0,C);z=V,v+=wg(V,q);const Q=Mf(v),R=new I(0,v<0?-1:1);let B;for({relativeTo:z,days:B}=vn(M,z,R,C);Yt(v)>=Yt(B);)f+=Q,v-=B,{relativeTo:z,days:B}=vn(M,z,R,C);B=Yt(B);const D=$.multiply($.BigInt(B),re);x=$.add($.add($.multiply(D,$.BigInt(f)),$.multiply($.BigInt(v),re)),x);const G=Ui(x,$.multiply(D,$.BigInt(c)),h);J=Os(x,D),f=$.toNumber($.divide(G,D)),x=hr,g=v=0;break}case"week":{if(!M)throw new RangeError("A starting point is required for weeks rounding");const oe=Mf(v),C=new I(0,0,v<0?-1:1),V=typeof M!="string"?Nt(M,"dateAdd"):void 0;let q;for({relativeTo:z,days:q}=vn(M,z,C,V);Yt(v)>=Yt(q);)g+=oe,v-=q,{relativeTo:z,days:q}=vn(M,z,C,V);q=Yt(q);const Q=$.multiply($.BigInt(q),re);x=$.add($.add($.multiply(Q,$.BigInt(g)),$.multiply($.BigInt(v),re)),x);const R=Ui(x,$.multiply(Q,$.BigInt(c)),h);J=Os(x,Q),g=$.toNumber($.divide(R,Q)),x=hr,v=0;break}case"day":{const oe=re;x=$.add($.multiply(oe,$.BigInt(v)),x);const C=Ui(x,$.multiply(oe,$.BigInt(c)),h);J=Os(x,oe),v=$.toNumber($.divide(C,oe)),x=hr;break}case"hour":{let C=$.multiply($.BigInt(b),$.BigInt(36e11));C=$.add(C,$.multiply($.BigInt(m),$.BigInt(6e10))),C=$.add(C,$.multiply($.BigInt(w),Xs)),C=$.add(C,$.multiply($.BigInt(S),yo)),C=$.add(C,$.multiply($.BigInt(T),Ot)),C=$.add(C,x),J=Os(C,$.BigInt(36e11));const V=Ui(C,$.BigInt(36e11*c),h);b=$.toNumber($.divide(V,$.BigInt(36e11))),x=hr,m=w=S=T=0;break}case"minute":{let C=$.multiply($.BigInt(m),$.BigInt(6e10));C=$.add(C,$.multiply($.BigInt(w),Xs)),C=$.add(C,$.multiply($.BigInt(S),yo)),C=$.add(C,$.multiply($.BigInt(T),Ot)),C=$.add(C,x),J=Os(C,$.BigInt(6e10));const V=Ui(C,$.BigInt(6e10*c),h);m=$.toNumber($.divide(V,$.BigInt(6e10))),x=hr,w=S=T=0;break}case"second":{let C=$.multiply($.BigInt(w),Xs);C=$.add(C,$.multiply($.BigInt(S),yo)),C=$.add(C,$.multiply($.BigInt(T),Ot)),C=$.add(C,x),J=Os(C,$.BigInt(1e9));const V=Ui(C,$.BigInt(1e9*c),h);w=$.toNumber($.divide(V,$.BigInt(1e9))),x=hr,S=T=0;break}case"millisecond":{let C=$.multiply($.BigInt(S),yo);C=$.add(C,$.multiply($.BigInt(T),Ot)),C=$.add(C,x),J=Os(C,$.BigInt(1e6));const V=Ui(C,$.BigInt(1e6*c),h);S=$.toNumber($.divide(V,$.BigInt(1e6))),x=hr,T=0;break}case"microsecond":{let C=$.multiply($.BigInt(T),Ot);C=$.add(C,x),J=Os(C,$.BigInt(1e3));const V=Ui(C,$.BigInt(1e3*c),h);T=$.toNumber($.divide(V,$.BigInt(1e3))),x=hr;break}case"nanosecond":J=$.toNumber(x),x=Ui($.BigInt(x),$.BigInt(c),h)}return{years:p,months:f,weeks:g,days:v,hours:b,minutes:m,seconds:w,milliseconds:S,microseconds:T,nanoseconds:$.toNumber(x),total:J}}function hd(t,e,r,n,i,a){for(const[o,s]of[[t,n],[e,i],[r,a]])if(o!==s)return Kl(o-s);return 0}function ul(t,e){let{quotient:r,remainder:n}=Er(t,e);return $.lessThan(n,hr)&&(r=$.subtract(r,lh),n=$.add(n,e)),{quotient:r,remainder:n}}function bf(t,e){const{quotient:r,remainder:n}=Er(t,e);return oo(n)||!y0(t)==!y0(e)?r:$.subtract(r,lh)}function Os(t,e){const{quotient:r,remainder:n}=Er(t,e);return $.toNumber(r)+$.toNumber(n)/$.toNumber(e)}function T0(t){const e=kp(t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function kp(t){let e=t;if(typeof t=="object"){const r=t[Symbol.toPrimitive];r&&typeof r=="function"&&(e=Ow(r,t,["number"]))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?$.BigInt(e.toString(10)):$.BigInt(e)}const tS=(()=>{let t=$.BigInt(Date.now()%1e6);return()=>{const e=$.BigInt(Date.now()),r=$.add($.multiply(e,yo),t);return t=$.remainder(e,yo),$.greaterThan(r,Lf)?Lf:$.lessThan(r,Jp)?Jp:r}})();function cd(){return new QR().resolvedOptions().timeZone}function Kl(t){return t<0?-1:t>0?1:t}function bt(t){if(t===void 0)return xn(null);if(Zt(t)&&t!==null)return t;throw new TypeError("Options parameter must be an object, not "+(t===null?"null":typeof t))}function Vf(t,e){const r=xn(null);return r[t]=e,r}function qd(t){const e=xn(null);return gf(e,bt(t),[]),e}function Nd(t,e,r,n){let i=t[e];if(i!==void 0){if(i=Qn(i),!r.includes(i))throw new RangeError(`${e} must be one of ${r.join(", ")}, not ${i}`);return i}return n}function dc(t){return bW.includes(sa(t))}function sa(t){return t.replace(/[A-Z]/g,e=>{const r=e.charCodeAt(0);return String.fromCharCode(r+32)})}const k6=new RegExp(`^${YR.source}$`);function O6(t,e,r,n=t(e),i=t(r)){let a=$.BigInt(e),o=$.BigInt(r),s=n,d=i;for(;$.greaterThan($.subtract(o,a),lh);){const l=$.divide($.add(a,o),$.BigInt(2)),c=t(l);if(c===s)a=l,s=c;else{if(c!==d)throw new Error(`invalid state in bisection ${s} - ${c} - ${d}`);o=l,d=c}}return o}const R6={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},j6=Symbol("date"),C6=Symbol("ym"),N6=Symbol("md"),B6=Symbol("time"),D6=Symbol("datetime"),M6=Symbol("instant"),vf=Symbol("original"),Qu=Symbol("timezone"),Ao=Symbol("calendar-id"),L6=Symbol("locale"),P_=Symbol("options"),Op=t=>({value:t,enumerable:!0,writable:!1,configurable:!0}),_f=globalThis.Intl.DateTimeFormat,lc=Object.assign,$W=Object.prototype.hasOwnProperty,TW=Reflect.apply;function Du(t,e){let r=t[e];return typeof r=="function"&&(r=new _f(t[L6],r(t[P_])),t[e]=r),r}function au(t,e={}){if(!(this instanceof au))return new au(t,e);const r=e!==void 0,n=r?lc({},e):{},i=new _f(t,n),a=i.resolvedOptions();if(r){const o=lc({},a);for(const s in o)TW($W,n,[s])||delete o[s];this[P_]=o}else this[P_]=n;this[L6]=a.locale,this[vf]=i,this[Qu]=a.timeZone,this[Ao]=a.calendar,this[j6]=IW,this[C6]=PW,this[N6]=xW,this[B6]=AW,this[D6]=kW,this[M6]=OW}Object.defineProperty(au,"name",{writable:!0,value:"DateTimeFormat"}),au.supportedLocalesOf=function(t,e){return _f.supportedLocalesOf(t,e)};const mv={resolvedOptions:Op(function(){return this[vf].resolvedOptions()}),format:Op(function(e,...r){let{instant:n,formatter:i}=Ef(e,this);return n&&i?i.format(n.epochMilliseconds):this[vf].format(e,...r)}),formatRange:Op(function(e,r){if(Hf(e)||Hf(r)){if(!U6(e,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:i}=Ef(e,this),{instant:a,formatter:o}=Ef(r,this);if(n&&a&&i&&o&&i===o)return i.formatRange(n.epochMilliseconds,a.epochMilliseconds)}return this[vf].formatRange(e,r)})};"formatToParts"in _f.prototype&&(mv.formatToParts=Op(function(e,...r){let{instant:n,formatter:i}=Ef(e,this);return n&&i?i.formatToParts(n.epochMilliseconds):this[vf].formatToParts(e,...r)})),"formatRangeToParts"in _f.prototype&&(mv.formatRangeToParts=Op(function(e,r){if(Hf(e)||Hf(r)){if(!U6(e,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:i}=Ef(e,this),{instant:a,formatter:o}=Ef(r,this);if(n&&a&&i&&o&&i===o)return i.formatRangeToParts(n.epochMilliseconds,a.epochMilliseconds)}return this[vf].formatRangeToParts(e,r)})),au.prototype=Object.create(_f.prototype,mv),Object.defineProperty(au,"prototype",{writable:!1,enumerable:!1,configurable:!1});const Kd=au;function Uy(t={},e={}){const r=lc({},t);for(const n of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])r[n]=n in e?e[n]:r[n],r[n]!==!1&&r[n]!==void 0||delete r[n];return r}function AW(t){let e=Uy(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return nS(e)||(e=lc({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function PW(t){let e=Uy(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=lc(e,{year:"numeric",month:"numeric"})),e}function xW(t){let e=Uy(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=lc({},e,{month:"numeric",day:"numeric"})),e}function IW(t){let e=Uy(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return rS(e)||(e=lc({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function kW(t){let e=Uy(t,{timeZoneName:!1});return nS(e)||rS(e)||(e=lc({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function OW(t){let e=t;return nS(e)||rS(e)||(e=lc({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function rS(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t}function nS(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t}function Hf(t){return wt(t)||fr(t)||tt(t)||Be(t)||It(t)||zr(t)||jr(t)}function U6(t,e){return!(!Hf(t)||!Hf(e))&&!(fr(t)&&!fr(e))&&!(wt(t)&&!wt(e))&&!(tt(t)&&!tt(e))&&!(Be(t)&&!Be(e))&&!(It(t)&&!It(e))&&!(zr(t)&&!zr(e))&&!(jr(t)&&!jr(e))}function Ef(t,e){const r=Ae("%Temporal.PlainDateTime%");if(fr(t)){const n=new r(1970,1,1,E(t,nt),E(t,it),E(t,ot),E(t,st),E(t,at),E(t,ct),e[Ao]);return{instant:Hn(e[Qu],n,"compatible"),formatter:Du(e,B6)}}if(It(t)){const n=E(t,Oe),i=E(t,Re),a=E(t,je),o=fn(E(t,ge));if(o!==e[Ao])throw new RangeError(`cannot format PlainYearMonth with calendar ${o} in locale with calendar ${e[Ao]}`);const s=new r(n,i,a,12,0,0,0,0,0,o);return{instant:Hn(e[Qu],s,"compatible"),formatter:Du(e,C6)}}if(zr(t)){const n=E(t,Oe),i=E(t,Re),a=E(t,je),o=fn(E(t,ge));if(o!==e[Ao])throw new RangeError(`cannot format PlainMonthDay with calendar ${o} in locale with calendar ${e[Ao]}`);const s=new r(n,i,a,12,0,0,0,0,0,o);return{instant:Hn(e[Qu],s,"compatible"),formatter:Du(e,N6)}}if(wt(t)){const n=E(t,Oe),i=E(t,Re),a=E(t,je),o=fn(E(t,ge));if(o!=="iso8601"&&o!==e[Ao])throw new RangeError(`cannot format PlainDate with calendar ${o} in locale with calendar ${e[Ao]}`);const s=new r(n,i,a,12,0,0,0,0,0,e[Ao]);return{instant:Hn(e[Qu],s,"compatible"),formatter:Du(e,j6)}}if(tt(t)){const n=E(t,Oe),i=E(t,Re),a=E(t,je),o=E(t,nt),s=E(t,it),d=E(t,ot),l=E(t,st),c=E(t,at),u=E(t,ct),h=fn(E(t,ge));if(h!=="iso8601"&&h!==e[Ao])throw new RangeError(`cannot format PlainDateTime with calendar ${h} in locale with calendar ${e[Ao]}`);let y=t;return h==="iso8601"&&(y=new r(n,i,a,o,s,d,l,c,u,e[Ao])),{instant:Hn(e[Qu],y,"compatible"),formatter:Du(e,D6)}}if(Be(t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return jr(t)?{instant:t,formatter:Du(e,M6)}:{}}class ds{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const r=kp(e);vl(r),ya(this),lt(this,Ve,r)}get epochSeconds(){if(!jr(this))throw new TypeError("invalid receiver");const e=E(this,Ve);return $.toNumber(bf(e,Xs))}get epochMilliseconds(){if(!jr(this))throw new TypeError("invalid receiver");const e=$.BigInt(E(this,Ve));return $.toNumber(bf(e,yo))}get epochMicroseconds(){if(!jr(this))throw new TypeError("invalid receiver");return T0(bf($.BigInt(E(this,Ve)),Ot))}get epochNanoseconds(){if(!jr(this))throw new TypeError("invalid receiver");return T0($.BigInt(E(this,Ve)))}add(e){if(!jr(this))throw new TypeError("invalid receiver");return ex("add",this,e)}subtract(e){if(!jr(this))throw new TypeError("invalid receiver");return ex("subtract",this,e)}until(e,r){if(!jr(this))throw new TypeError("invalid receiver");return GP("until",this,e,r)}since(e,r){if(!jr(this))throw new TypeError("invalid receiver");return GP("since",this,e,r)}round(e){if(!jr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const r=typeof e=="string"?Vf("smallestUnit",e):bt(e),n=fh(r),i=gs(r,"halfExpand"),a=Ci(r,"smallestUnit","time",nu);hh(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[a],!0);const o=$0(E(this,Ve),n,a,i);return new ds(o)}equals(e){if(!jr(this))throw new TypeError("invalid receiver");const r=us(e),n=E(this,Ve),i=E(r,Ve);return $.equal($.BigInt(n),$.BigInt(i))}toString(e){if(!jr(this))throw new TypeError("invalid receiver");const r=bt(e),n=jy(r),i=gs(r,"trunc"),a=Ci(r,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let o=r.timeZone;o!==void 0&&(o=Pn(o));const{precision:s,unit:d,increment:l}=Cy(a,n),c=$0(E(this,Ve),l,d,i);return MP(new ds(c),o,s)}toJSON(){if(!jr(this))throw new TypeError("invalid receiver");return MP(this,void 0,"auto")}toLocaleString(e,r){if(!jr(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!jr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument in toZonedDateTime");const r=e.calendar;if(r===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const n=Ni(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const a=Pn(i);return sn(E(this,Ve),a,n)}toZonedDateTimeISO(e){if(!jr(this))throw new TypeError("invalid receiver");const r=Pn(e);return sn(E(this,Ve),r,"iso8601")}static fromEpochSeconds(e){const r=Uf(e),n=$.multiply($.BigInt(r),Xs);return vl(n),new ds(n)}static fromEpochMilliseconds(e){const r=Uf(e),n=$.multiply($.BigInt(r),yo);return vl(n),new ds(n)}static fromEpochMicroseconds(e){const r=kp(e),n=$.multiply(r,Ot);return vl(n),new ds(n)}static fromEpochNanoseconds(e){const r=kp(e);return vl(r),new ds(r)}static from(e){return jr(e)?new ds(E(e,Ve)):us(e)}static compare(e,r){const n=us(e),i=us(r),a=E(n,Ve),o=E(i,Ve);return $.lessThan(a,o)?-1:$.greaterThan(a,o)?1:0}}pa(ds,"Temporal.Instant");const F6=Array.prototype.includes,RW=Array.prototype.push,jW=globalThis.Intl.DateTimeFormat,CW=Array.prototype.sort,NW=Math.abs,BW=Math.floor,gv=Object.create,x_=Object.entries,z6=Set,ox=Reflect.ownKeys,gn=Set.prototype.add,q6=Set.prototype.values,Jt={};class lr{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const r=Qn(e);if(!dc(r))throw new RangeError(`invalid calendar identifier ${r}`);ya(this),lt(this,or,sa(r))}get id(){if(!dr(this))throw new TypeError("invalid receiver");return E(this,or)}dateFromFields(e,r){if(!dr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid fields");const n=bt(r),i=E(this,or);return Jt[i].dateFromFields(e,n,i)}yearMonthFromFields(e,r){if(!dr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid fields");const n=bt(r),i=E(this,or);return Jt[i].yearMonthFromFields(e,n,i)}monthDayFromFields(e,r){if(!dr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid fields");const n=bt(r),i=E(this,or);return Jt[i].monthDayFromFields(e,n,i)}fields(e){if(!dr(this))throw new TypeError("invalid receiver");const r=[],n=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!n.has(i))throw new RangeError(`invalid field name ${i}`);n.delete(i),RW.call(r,i)}return Jt[E(this,or)].fields(r)}mergeFields(e,r){if(!dr(this))throw new TypeError("invalid receiver");const n=BP(e),i=gv(null);gf(i,n,[],[void 0]);const a=BP(r),o=gv(null);gf(o,a,[],[void 0]);const s=ox(o),d=Jt[E(this,or)].fieldKeysToIgnore(s),l=gv(null),c=ox(i);for(const u of c){let h;h=Le(F6,d,[u])?o[u]:i[u],h!==void 0&&(l[u]=h)}return gf(l,o,[]),l}dateAdd(e,r,n){if(!dr(this))throw new TypeError("invalid receiver");const i=Ut(e),a=wf(r),o=Sr(bt(n)),{days:s}=Vo(E(a,Mn),E(a,Ln),E(a,Un),E(a,Fn),E(a,zn),E(a,qn),E(a,Kn),"day"),d=E(this,or);return Jt[d].dateAdd(i,E(a,Dn),E(a,en),E(a,ui),s,o,d)}dateUntil(e,r,n){if(!dr(this))throw new TypeError("invalid receiver");const i=Ut(e),a=Ut(r);let o=Ci(bt(n),"largestUnit","date","auto");o==="auto"&&(o="day");const{years:s,months:d,weeks:l,days:c}=Jt[E(this,or)].dateUntil(i,a,o);return new(Ae("%Temporal.Duration%"))(s,d,l,c,0,0,0,0,0,0)}year(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].year(r)}month(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");if(zr(r))throw new TypeError("use monthCode on PlainMonthDay instead");return It(r)||(r=Ut(r)),Jt[E(this,or)].month(r)}monthCode(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||zr(r)||(r=Ut(r)),Jt[E(this,or)].monthCode(r)}day(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return zr(r)||(r=Ut(r)),Jt[E(this,or)].day(r)}era(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].era(r)}eraYear(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].eraYear(r)}dayOfWeek(e){if(!dr(this))throw new TypeError("invalid receiver");const r=Ut(e);return Jt[E(this,or)].dayOfWeek(r)}dayOfYear(e){if(!dr(this))throw new TypeError("invalid receiver");const r=Ut(e);return Jt[E(this,or)].dayOfYear(r)}weekOfYear(e){if(!dr(this))throw new TypeError("invalid receiver");const r=Ut(e);return Jt[E(this,or)].weekOfYear(r)}yearOfWeek(e){if(!dr(this))throw new TypeError("invalid receiver");const r=Ut(e);return Jt[E(this,or)].yearOfWeek(r)}daysInWeek(e){if(!dr(this))throw new TypeError("invalid receiver");const r=Ut(e);return Jt[E(this,or)].daysInWeek(r)}daysInMonth(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].daysInMonth(r)}daysInYear(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].daysInYear(r)}monthsInYear(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].monthsInYear(r)}inLeapYear(e){let r=e;if(!dr(this))throw new TypeError("invalid receiver");return It(r)||(r=Ut(r)),Jt[E(this,or)].inLeapYear(r)}toString(){if(!dr(this))throw new TypeError("invalid receiver");return E(this,or)}toJSON(){if(!dr(this))throw new TypeError("invalid receiver");return E(this,or)}static from(e){return ph(Ni(e))}}function iS(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);const e=+t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function ec(t,e=!1){return`M${t.toString().padStart(2,"0")}${e?"L":""}`}function bg(t,e,r=12){let{month:n,monthCode:i}=t;if(i===void 0){if(n===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&un(n,1,r),e==="constrain"&&(n=Oi(n,1,r)),i=ec(n)}else{const a=iS(i);if(n!==void 0&&n!==a)throw new RangeError(`monthCode ${i} and month ${n} must match if both are present`);if(i!==ec(a))throw new RangeError(`Invalid month code: ${i}`);if(n=a,n<1||n>r)throw new RangeError(`Invalid monthCode: ${i}`)}return{...t,month:n,monthCode:i}}pa(lr,"Temporal.Calendar"),sr("Temporal.Calendar.from",lr.from),sr("Temporal.Calendar.prototype.dateAdd",lr.prototype.dateAdd),sr("Temporal.Calendar.prototype.dateFromFields",lr.prototype.dateFromFields),sr("Temporal.Calendar.prototype.dateUntil",lr.prototype.dateUntil),sr("Temporal.Calendar.prototype.day",lr.prototype.day),sr("Temporal.Calendar.prototype.dayOfWeek",lr.prototype.dayOfWeek),sr("Temporal.Calendar.prototype.dayOfYear",lr.prototype.dayOfYear),sr("Temporal.Calendar.prototype.daysInMonth",lr.prototype.daysInMonth),sr("Temporal.Calendar.prototype.daysInWeek",lr.prototype.daysInWeek),sr("Temporal.Calendar.prototype.daysInYear",lr.prototype.daysInYear),sr("Temporal.Calendar.prototype.era",lr.prototype.era),sr("Temporal.Calendar.prototype.eraYear",lr.prototype.eraYear),sr("Temporal.Calendar.prototype.fields",lr.prototype.fields),sr("Temporal.Calendar.prototype.inLeapYear",lr.prototype.inLeapYear),sr("Temporal.Calendar.prototype.mergeFields",lr.prototype.mergeFields),sr("Temporal.Calendar.prototype.month",lr.prototype.month),sr("Temporal.Calendar.prototype.monthCode",lr.prototype.monthCode),sr("Temporal.Calendar.prototype.monthDayFromFields",lr.prototype.monthDayFromFields),sr("Temporal.Calendar.prototype.monthsInYear",lr.prototype.monthsInYear),sr("Temporal.Calendar.prototype.weekOfYear",lr.prototype.weekOfYear),sr("Temporal.Calendar.prototype.year",lr.prototype.year),sr("Temporal.Calendar.prototype.yearMonthFromFields",lr.prototype.yearMonthFromFields),sr("Temporal.Calendar.prototype.yearOfWeek",lr.prototype.yearOfWeek),Jt.iso8601={dateFromFields(t,e,r){let n=ht(t,["day","month","monthCode","year"],["year","day"]);const i=Sr(e);n=bg(n);let{year:a,month:o,day:s}=n;return{year:a,month:o,day:s}=g0(a,o,s,i),wo(a,o,s,r)},yearMonthFromFields(t,e,r){let n=ht(t,["month","monthCode","year"],["year"]);const i=Sr(e);n=bg(n);let{year:a,month:o}=n;return{year:a,month:o}=function(d,l,c){let u=d,h=l;switch(c){case"reject":oa(u,h,1);break;case"constrain":({year:u,month:h}=_6(u,h))}return{year:u,month:h}}(a,o,i),ty(a,o,r,1)},monthDayFromFields(t,e,r){let n=ht(t,["day","month","monthCode","year"],["day"]);const i=Sr(e);if(n.month!==void 0&&n.year===void 0&&n.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const a=n.monthCode===void 0;n=bg(n);let{month:o,day:s,year:d}=n;return{month:o,day:s}=g0(a?d:1972,o,s,i),ey(o,s,r,1972)},fields:t=>t,fieldKeysToIgnore(t){const e=new z6;for(let r=0;r<t.length;r++){const n=t[r];Le(gn,e,[n]),n==="month"?Le(gn,e,["monthCode"]):n==="monthCode"&&Le(gn,e,["month"])}return[...Le(q6,e,[])]},dateAdd(t,e,r,n,i,a,o){let s=E(t,Oe),d=E(t,Re),l=E(t,je);return{year:s,month:d,day:l}=ql(s,d,l,e,r,n,i,a),wo(s,d,l,o)},dateUntil:(t,e,r)=>ZE(E(t,Oe),E(t,Re),E(t,je),E(e,Oe),E(e,Re),E(e,je),r),year:t=>E(t,Oe),era(){},eraYear(){},month:t=>E(t,Re),monthCode:t=>ec(E(t,Re)),day:t=>E(t,je),dayOfWeek:t=>$_(E(t,Oe),E(t,Re),E(t,je)),dayOfYear:t=>E0(E(t,Oe),E(t,Re),E(t,je)),weekOfYear:t=>VP(E(t,Oe),E(t,Re),E(t,je)).week,yearOfWeek:t=>VP(E(t,Oe),E(t,Re),E(t,je)).year,daysInWeek:()=>7,daysInMonth:t=>Ja(E(t,Oe),E(t,Re)),daysInYear(t){let e=t;return Yr(e,Oe)||(e=Ut(e)),Cd(E(e,Oe))?366:365},monthsInYear:()=>12,inLeapYear(t){let e=t;return Yr(e,Oe)||(e=Ut(e)),Cd(E(e,Oe))}};class ar{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let r=0;for(const n of e.map.entries()){if(++r>ar.MAX_CACHE_ENTRIES)break;this.map.set(...n)}}}get(e){const r=this.map.get(e);return r&&(this.hits++,this.report()),this.calls++,r}set(e,r){this.map.set(e,r),this.misses++,this.report()}report(){}setObject(e){if(ar.objectMap.get(e))throw new RangeError("object already cached");ar.objectMap.set(e,this),this.report()}static getCacheForObject(e){let r=ar.objectMap.get(e);return r||(r=new ar,ar.objectMap.set(e,r)),r}}function K6({isoYear:t,isoMonth:e,isoDay:r}){return`${Au(t)}-${rr(e)}-${rr(r)}T00:00Z`}function wv(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}ar.objectMap=new WeakMap,ar.MAX_CACHE_ENTRIES=1e3;class mh{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new jW(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,r){const{year:n,month:i,day:a}=e,o=JSON.stringify({func:"isoToCalendarDate",isoYear:n,isoMonth:i,isoDay:a,id:this.id}),s=r.get(o);if(s)return s;const d=this.getFormatter();let l,c;try{c=K6({isoYear:n,isoMonth:i,isoDay:a}),l=d.formatToParts(new Date(c))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:n,isoMonth:i,isoDay:a})}`)}const u={};for(let{type:y,value:p}of l){if(y==="year"&&(u.eraYear=+p),y==="relatedYear"&&(u.eraYear=+p),y==="month"){const f=/^([0-9]*)(.*?)$/.exec(p);if(!f||f.length!=3||!f[1]&&!f[2])throw new RangeError(`Unexpected month: ${p}`);if(u.month=f[1]?+f[1]:1,u.month<1)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(u.month>13)throw new RangeError(`Invalid month ${p} from ${c}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);f[2]&&(u.monthExtra=f[2])}y==="day"&&(u.day=+p),this.hasEra&&y==="era"&&p!=null&&p!==""&&(p=p.split(" (")[0],u.era=p.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(u.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:y,eraYear:p}=this.reviseIntlEra(u,e);u.era=y,u.eraYear=p}this.checkIcuBugs&&this.checkIcuBugs(e);const h=this.adjustCalendarDate(u,r,"constrain",!0);if(h.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(h.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(h.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return r.set(o,h),["constrain","reject"].forEach(y=>{const p=JSON.stringify({func:"calendarToIsoDate",year:h.year,month:h.month,day:h.day,overflow:y,id:this.id});r.set(p,e)}),h}validateCalendarDate(e){const{era:r,month:n,year:i,day:a,eraYear:o,monthCode:s,monthExtra:d}=e;if(d!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&o===void 0)throw new TypeError("year or eraYear is required");if(n===void 0&&s===void 0)throw new TypeError("month or monthCode is required");if(a===void 0)throw new RangeError("Missing day");if(s!==void 0){if(typeof s!="string")throw new RangeError("monthCode must be a string, not "+typeof s);if(!/^M([01]?\d)(L?)$/.test(s))throw new RangeError(`Invalid monthCode: ${s}`)}if(this.constantEra){if(r!==void 0&&r!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${r}`);if(o!==void 0&&i!==void 0&&o!==i)throw new RangeError(`eraYear ${o} does not match year ${i}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(e,r,n="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let a=e;if(this.validateCalendarDate(a),this.constantEra){const{year:l,eraYear:c}=a;a={...a,era:this.constantEra,year:l!==void 0?l:c,eraYear:c!==void 0?c:l}}const o=this.monthsInYear(a,r);let{month:s,monthCode:d}=a;return{month:s,monthCode:d}=bg(a,n,o),{...a,month:s,monthCode:d}}regulateMonthDayNaive(e,r,n){const i=this.monthsInYear(e,n);let{month:a,day:o}=e;return r==="reject"?(un(a,1,i),un(o,1,this.maximumMonthLength(e))):(a=Oi(a,1,i),o=Oi(o,1,this.maximumMonthLength({...e,month:a}))),{...e,month:a,day:o}}calendarToIsoDate(e,r="constrain",n){const i=e;let a=this.adjustCalendarDate(e,n,r,!1);a=this.regulateMonthDayNaive(a,r,n);const{year:o,month:s,day:d}=a,l=JSON.stringify({func:"calendarToIsoDate",year:o,month:s,day:d,overflow:r,id:this.id});let c,u=n.get(l);if(u||i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==a.year||i.month!==a.month||i.day!==a.day)&&(c=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:r,id:this.id}),u=n.get(c),u))return u;let h=this.estimateIsoDate({year:o,month:s,day:d});const y=b=>{let m=this.addDaysIso(h,b);if(a.day>this.minimumMonthLength(a)){let w=this.isoToCalendarDate(m,n);for(;w.month!==s||w.year!==o;){if(r==="reject")throw new RangeError(`day ${d} does not exist in month ${s} of year ${o}`);m=this.addDaysIso(m,-1),w=this.isoToCalendarDate(m,n)}}return m};let p=0,f=this.isoToCalendarDate(h,n),g=wv(a,f);if(g.years!==0||g.months!==0||g.days!==0){const b=365*g.years+30*g.months+g.days;h=this.addDaysIso(h,b),f=this.isoToCalendarDate(h,n),g=wv(a,f),g.years===0&&g.months===0?h=y(g.days):p=this.compareCalendarDates(a,f)}let v=8;for(;p;){h=this.addDaysIso(h,p*v);const b=f;f=this.isoToCalendarDate(h,n);const m=p;if(p=this.compareCalendarDates(a,f),p){if(g=wv(a,f),g.years===0&&g.months===0)h=y(g.days),p=0;else if(m&&p!==m)if(v>1)v/=2;else{if(r==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(f,b)>0&&(h=this.addDaysIso(h,-1)),p=0}}}if(n.set(l,h),c&&n.set(c,h),a.year===void 0||a.month===void 0||a.day===void 0||a.monthCode===void 0||this.hasEra&&(a.era===void 0||a.eraYear===void 0))throw new RangeError("Unexpected missing property");return h}temporalToCalendarDate(e,r){const n={year:E(e,Oe),month:E(e,Re),day:E(e,je)};return this.isoToCalendarDate(n,r)}compareCalendarDates(e,r){const n=ht(e,["day","month","year"],["day","month","year"]),i=ht(r,["day","month","year"],["day","month","year"]);return n.year!==i.year?Kl(n.year-i.year):n.month!==i.month?Kl(n.month-i.month):n.day!==i.day?Kl(n.day-i.day):0}regulateDate(e,r="constrain",n){const i=this.calendarToIsoDate(e,r,n);return this.isoToCalendarDate(i,n)}addDaysIso(e,r){return ql(e.year,e.month,e.day,0,0,0,r,"constrain")}addDaysCalendar(e,r,n){const i=this.calendarToIsoDate(e,"constrain",n),a=this.addDaysIso(i,r);return this.isoToCalendarDate(a,n)}addMonthsCalendar(e,r,n,i){let a=e;const{day:o}=a;for(let s=0,d=NW(r);s<d;s++){const{month:l}=a,c=a,u=r<0?-Math.max(o,this.daysInPreviousMonth(a,i)):this.daysInMonth(a,i),h=this.calendarToIsoDate(a,"constrain",i);let y=this.addDaysIso(h,u);if(a=this.isoToCalendarDate(y,i),r>0){const p=this.monthsInYear(c,i);for(;a.month-1!=l%p;)y=this.addDaysIso(y,-1),a=this.isoToCalendarDate(y,i)}a.day!==o&&(a=this.regulateDate({...a,day:o},"constrain",i))}if(n==="reject"&&a.day!==o)throw new RangeError(`Day ${o} does not exist in resulting calendar month`);return a}addCalendar(e,{years:r=0,months:n=0,weeks:i=0,days:a=0},o,s){const{year:d,day:l,monthCode:c}=e,u=this.adjustCalendarDate({year:d+r,monthCode:c,day:l},s),h=this.addMonthsCalendar(u,n,o,s),y=a+7*i;return this.addDaysCalendar(h,y,s)}untilCalendar(e,r,n,i){let a=0,o=0,s=0,d=0;switch(n){case"day":a=this.calendarDaysUntil(e,r,i);break;case"week":{const l=this.calendarDaysUntil(e,r,i);a=l%7,o=(l-a)/7;break}case"month":case"year":{const l=this.compareCalendarDates(r,e);if(!l)return{years:0,months:0,weeks:0,days:0};const c=r.year-e.year,u=r.day-e.day;if(n==="year"&&c){let p=0;r.monthCode>e.monthCode&&(p=1),r.monthCode<e.monthCode&&(p=-1),p||(p=Math.sign(u)),d=p*l<0?c-l:c}let h,y=d?this.addCalendar(e,{years:d},"constrain",i):e;do s+=l,h=y,y=this.addMonthsCalendar(h,l,"constrain",i),y.day!==e.day&&(y=this.regulateDate({...y,day:e.day},"constrain",i));while(this.compareCalendarDates(r,y)*l>=0);s-=l,a=this.calendarDaysUntil(h,r,i);break}}return{years:d,months:s,weeks:o,days:a}}daysInMonth(e,r){const{day:n}=e,i=this.maximumMonthLength(e),a=this.minimumMonthLength(e);if(a===i)return a;const o=n<=i-a?i:a,s=this.calendarToIsoDate(e,"constrain",r),d=this.addDaysIso(s,o),l=this.isoToCalendarDate(d,r),c=this.addDaysIso(d,-l.day);return this.isoToCalendarDate(c,r).day}daysInPreviousMonth(e,r){const{day:n,month:i,year:a}=e;let o={year:i>1?a:a-1,month:i,day:1};const s=i>1?i-1:this.monthsInYear(o,r);o={...o,month:s};const d=this.minimumMonthLength(o),l=this.maximumMonthLength(o);if(d===l)return l;const c=this.calendarToIsoDate(e,"constrain",r),u=this.addDaysIso(c,-n);return this.isoToCalendarDate(u,r).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,r,n){const i=this.calendarToIsoDate(e,"constrain",n),a=this.calendarToIsoDate(r,"constrain",n);return this.isoDaysUntil(i,a)}isoDaysUntil(e,r){return ZE(e.year,e.month,e.day,r.year,r.month,r.day,"day").days}monthDayFromFields(e,r,n){let i,a,o,s,d,{monthCode:l,day:c}=e;if(l===void 0){let{year:y,era:p,eraYear:f}=e;if(y===void 0&&(p===void 0||f===void 0))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:l,day:c}=this.isoToCalendarDate(this.calendarToIsoDate(e,r,n),n))}const u=this.isoToCalendarDate({year:1972,month:12,day:31},n),h=u.monthCode>l||u.monthCode===l&&u.day>=c?u.year:u.year-1;for(let y=0;y<100;y++){const p=this.adjustCalendarDate({day:c,monthCode:l,year:h-y},n),f=this.calendarToIsoDate(p,"constrain",n),g=this.isoToCalendarDate(f,n);if({year:i,month:a,day:o}=f,g.monthCode===l&&g.day===c)return{month:a,day:o,year:i};r==="constrain"&&(s===void 0||g.monthCode===s.monthCode&&g.day>s.day)&&(s=g,d=f)}if(r==="constrain"&&d!==void 0)return d;throw new RangeError(`No recent ${this.id} year with monthCode ${l} and day ${c}`)}}class DW extends mh{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:r}=e;return(7*r+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,r){const{month:n,year:i}=e,a=this.getMonthCode(i,n),o=x_(this.months).find(d=>d[1].monthCode===a);if(o===void 0)throw new RangeError(`unmatched Hebrew month: ${n}`);const s=o[1].days;return typeof s=="number"?s:s[r]}estimateIsoDate(e){const{year:r}=e;return{year:r-3760,month:1,day:1}}getMonthCode(e,r){return this.inLeapYear({year:e})?r===6?ec(5,!0):ec(r<6?r:r-1):ec(r)}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:a,eraYear:o,month:s,monthCode:d,day:l,monthExtra:c}=e;if(a===void 0&&o!==void 0&&(a=o),o===void 0&&a!==void 0&&(o=a),i){if(c){const u=this.months[c];if(!u)throw new RangeError(`Unrecognized month from formatToParts: ${c}`);s=this.inLeapYear({year:a})?u.leap:u.regular}return d=this.getMonthCode(a,s),{year:a,month:s,day:l,era:void 0,eraYear:o,monthCode:d}}if(this.validateCalendarDate(e),s===void 0)if(d.endsWith("L")){if(d!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${d}`);if(s=6,!this.inLeapYear({year:a})){if(n==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${a} which is not a leap year`);s=6,d="M06"}}else{s=iS(d),this.inLeapYear({year:a})&&s>=6&&s++;const u=this.monthsInYear({year:a});if(s<1||s>u)throw new RangeError(`Invalid monthCode: ${d}`)}else if(n==="reject"?(un(s,1,this.monthsInYear({year:a})),un(l,1,this.maximumMonthLength({year:a,month:s}))):(s=Oi(s,1,this.monthsInYear({year:a})),l=Oi(l,1,this.maximumMonthLength({year:a,month:s}))),d===void 0)d=this.getMonthCode(a,s);else if(this.getMonthCode(a,s)!==d)throw new RangeError(`monthCode ${d} doesn't correspond to month ${s} in Hebrew year ${a}`);return{...e,day:l,month:s,monthCode:d,year:a,eraYear:o}}}class gh extends mh{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,r){return this.daysInMonth({year:e.year,month:12,day:1},r)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:r}=this.adjustCalendarDate(e);return{year:BW(r*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class V6 extends gh{constructor(){super(...arguments),this.id="islamic"}}class MW extends gh{constructor(){super(...arguments),this.id="islamic-umalqura"}}class LW extends gh{constructor(){super(...arguments),this.id="islamic-tbla"}}class UW extends gh{constructor(){super(...arguments),this.id="islamic-civil"}}class FW extends gh{constructor(){super(...arguments),this.id="islamic-rgsa"}}class zW extends gh{constructor(){super(...arguments),this.id="islamicc"}}class qW extends mh{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,r){return V6.prototype.inLeapYear.call(this,e,r)}monthsInYear(){return 12}minimumMonthLength(e){const{month:r}=e;return r===12?29:r<=6?31:30}maximumMonthLength(e){const{month:r}=e;return r===12?30:r<=6?31:30}estimateIsoDate(e){const{year:r}=this.adjustCalendarDate(e);return{year:r+621,month:1,day:1}}}class KW extends mh{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return H6(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:r}=e;let n=this.months[r];if(n===void 0)throw new RangeError(`Invalid month: ${r}`);return this.inLeapYear(e)&&n.leap&&(n=n.leap),n}estimateIsoDate(e){const r=this.adjustCalendarDate(e),n=this.getMonthInfo(r);return ql(r.year+78+(n.nextYear?1:0),n.month,n.day,0,0,0,r.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function H6(t){return t%4==0&&(t%100!=0||t%400==0)}class Fy extends mh{constructor(e,r){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:n,anchorEra:i}=function(o){let s,d=o;if(d.length===0)throw new RangeError("Invalid era data: eras are required");if(d.length===1&&d[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(d.length===1&&!d[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(d.filter(c=>c.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");d.forEach(c=>{if(c.isAnchor||!c.anchorEpoch&&!c.reverseOf){if(s)throw new RangeError("Invalid era data: cannot have multiple anchor eras");s=c,c.anchorEpoch={year:c.hasYearZero?0:1}}else if(!c.name)throw new RangeError("If era name is blank, it must be the anchor era")}),d=d.filter(c=>c.name),d.forEach(c=>{const{reverseOf:u}=c;if(u){const h=d.find(y=>y.name===u);if(h===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${u}`);c.reverseOf=h,c.anchorEpoch=h.anchorEpoch,c.isoEpoch=h.isoEpoch}c.anchorEpoch.month===void 0&&(c.anchorEpoch.month=1),c.anchorEpoch.day===void 0&&(c.anchorEpoch.day=1)}),CW.call(d,(c,u)=>{if(c.reverseOf)return 1;if(u.reverseOf)return-1;if(!c.isoEpoch||!u.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return u.isoEpoch.year-c.isoEpoch.year});const l=d[d.length-1].reverseOf;if(l&&l!==d[d.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return d.forEach((c,u)=>{c.genericName="era"+(d.length-1-u)}),{eras:d,anchorEra:s||d[0]}}(r);this.anchorEra=i,this.eras=n}inLeapYear(e){const{year:r}=this.estimateIsoDate({month:1,day:1,year:e.year});return H6(r)}monthsInYear(){return 12}minimumMonthLength(e){const{month:r}=e;return r===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(r)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const r=(s,d)=>{const l=e[s];if(l!=null&&l!=d)throw new RangeError(`Input ${s} ${l} doesn't match calculated value ${d}`)},n=s=>{let d;const l={...e,year:s},c=this.eras.find((u,h)=>{if(h===this.eras.length-1){if(u.reverseOf){if(s>0)throw new RangeError(`Signed year ${s} is invalid for era ${u.name}`);return d=u.anchorEpoch.year-s,!0}return d=s-u.anchorEpoch.year+(u.hasYearZero?0:1),!0}return this.compareCalendarDates(l,u.anchorEpoch)>=0&&(d=s-u.anchorEpoch.year+(u.hasYearZero?0:1),!0)});if(!c)throw new RangeError(`Year ${s} was not matched by any era`);return{eraYear:d,era:c.name}};let{year:i,eraYear:a,era:o}=e;if(i!=null)({eraYear:a,era:o}=n(i)),r("era",o),r("eraYear",a);else{if(a==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const s=o===void 0?void 0:this.eras.find(d=>d.name===o||d.genericName===o);if(!s)throw new RangeError(`Era ${o} (ISO year ${a}) was not matched by any era`);if(a<1&&s.reverseOf)throw new RangeError(`Years in ${o} era must be positive, not ${i}`);i=s.reverseOf?s.anchorEpoch.year-a:a+s.anchorEpoch.year-(s.hasYearZero?0:1),r("year",i),{eraYear:a,era:o}=n(i)}}return{...e,year:i,eraYear:a,era:o}}adjustCalendarDate(e,r,n="constrain"){let i=e;const{month:a,monthCode:o}=i;return a===void 0&&(i={...i,month:iS(o)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,r,n)}estimateIsoDate(e){const r=this.adjustCalendarDate(e),{year:n,month:i,day:a}=r,{anchorEra:o}=this;return g0(n+o.isoEpoch.year-(o.hasYearZero?0:1),i,a,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&hd(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class oS extends Fy{constructor(e,r){super(e,r)}inLeapYear(e){const{year:r}=e;return(r+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:r}=e;return r===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class VW extends oS{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class HW extends oS{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class GW extends oS{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class WW extends Fy{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class YW extends Fy{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class ZW extends Fy{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:r,eraYear:n}=e;return r!=="bc"&&r!=="b"||(r="bce"),r!=="ad"&&r!=="a"||(r="ce"),{era:r,eraYear:n}}}class XW extends Fy{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(e,r){const{era:n,eraYear:i}=e,{year:a}=r;return this.eras.find(o=>o.name===n)?{era:n,eraYear:i}:a<1?{era:"bce",eraYear:1-a}:{era:"ce",eraYear:a}}}class G6 extends mh{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,r){const n=this.getMonthList(e.year,r);return x_(n).length===13}monthsInYear(e,r){return this.inLeapYear(e,r)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,r){if(e===void 0)throw new TypeError("Missing year");const n=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=r.get(n);if(i)return i;const a=this.getFormatter(),o=(g,v)=>{const b=K6({isoYear:g,isoMonth:2,isoDay:1}),m=new Date(b);m.setUTCDate(v+1);const w=a.formatToParts(m),S=w.find(I=>I.type==="month").value,T=+w.find(I=>I.type==="day").value;let x=w.find(I=>I.type==="relatedYear");if(x===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return x=+x.value,{calendarMonthString:S,calendarDay:T,calendarYearToVerify:x}};let s=17,{calendarMonthString:d,calendarDay:l,calendarYearToVerify:c}=o(e,s);d!=="1"&&(s+=29,{calendarMonthString:d,calendarDay:l}=o(e,s)),s-=l-5;const u={};let h,y,p=1,f=!1;do({calendarMonthString:d,calendarDay:l,calendarYearToVerify:c}=o(e,s)),h&&(u[y].daysInMonth=h+30-l),c!==e?f=!0:(u[d]={monthIndex:p++},s+=30),h=l,y=d;while(!f);return u[y].daysInMonth=h+30-l,r.set(n,u),u}estimateIsoDate(e){const{year:r,month:n}=e;return{year:r,month:n>=12?12:n+1,day:1}}adjustCalendarDate(e,r,n="constrain",i=!1){let{year:a,month:o,monthExtra:s,day:d,monthCode:l,eraYear:c}=e;if(i){if(a=c,s&&s!=="bis")throw new RangeError(`Unexpected leap month suffix: ${s}`);const u=ec(o,s!==void 0),h=`${o}${s||""}`,y=this.getMonthList(a,r)[h];if(y===void 0)throw new RangeError(`Unmatched month ${h} in Chinese year ${a}`);return o=y.monthIndex,{year:a,month:o,day:d,era:void 0,eraYear:c,monthCode:u}}if(this.validateCalendarDate(e),a===void 0&&(a=c),c===void 0&&(c=a),o===void 0){const u=this.getMonthList(a,r);let h=l.replace("L","bis").slice(1);h[0]==="0"&&(h=h.slice(1));let y=u[h];if(o=y&&y.monthIndex,o===void 0&&l.endsWith("L")&&l!="M13L"&&n==="constrain"){let p=l.slice(1,-1);p[0]==="0"&&(p=p.slice(1)),y=u[p],y&&(o=y.monthIndex,l=ec(p))}if(o===void 0)throw new RangeError(`Unmatched month ${l} in Chinese year ${a}`)}else if(l===void 0){const u=this.getMonthList(a,r),h=x_(u),y=h.length;n==="reject"?(un(o,1,y),un(d,1,this.maximumMonthLength())):(o=Oi(o,1,y),d=Oi(d,1,this.maximumMonthLength()));const p=h.find(([,f])=>f.monthIndex===o);if(p===void 0)throw new RangeError(`Invalid month ${o} in Chinese year ${a}`);l=ec(p[0].replace("bis",""),p[0].indexOf("bis")!==-1)}else{const u=this.getMonthList(a,r);let h=l.replace("L","bis").slice(1);h[0]==="0"&&(h=h.slice(1));const y=u[h];if(!y)throw new RangeError(`Unmatched monthCode ${l} in Chinese year ${a}`);if(o!==y.monthIndex)throw new RangeError(`monthCode ${l} doesn't correspond to month ${o} in Chinese year ${a}`)}return{...e,year:a,eraYear:c,month:o,monthCode:l,day:d}}}class QW extends G6{constructor(){super(...arguments),this.id="chinese"}}class JW extends G6{constructor(){super(...arguments),this.id="dangi"}}class eY{constructor(e){this.helper=e}dateFromFields(e,r,n){const i=new ar,a=ht(e,this.fields(["day","month","monthCode","year"]),[]),o=Sr(r),{year:s,month:d,day:l}=this.helper.calendarToIsoDate(a,o,i),c=wo(s,d,l,n);return i.setObject(c),c}yearMonthFromFields(e,r,n){const i=new ar,a=ht(e,this.fields(["month","monthCode","year"]),[]),o=Sr(r),{year:s,month:d,day:l}=this.helper.calendarToIsoDate({...a,day:1},o,i),c=ty(s,d,n,l);return i.setObject(c),c}monthDayFromFields(e,r,n){const i=new ar,a=ht(e,this.fields(["day","month","monthCode","year"]),[]),o=Sr(r),{year:s,month:d,day:l}=this.helper.monthDayFromFields(a,o,i),c=ey(d,l,n,s);return i.setObject(c),c}fields(e){let r=e;return F6.call(r,"year")&&(r=[...r,"era","eraYear"]),r}fieldKeysToIgnore(e){const r=new z6;for(let n=0;n<e.length;n++){const i=e[n];switch(Le(gn,r,[i]),i){case"era":Le(gn,r,["eraYear"]),Le(gn,r,["year"]);break;case"eraYear":Le(gn,r,["era"]),Le(gn,r,["year"]);break;case"year":Le(gn,r,["era"]),Le(gn,r,["eraYear"]);break;case"month":Le(gn,r,["monthCode"]),this.helper.erasBeginMidYear&&(Le(gn,r,["era"]),Le(gn,r,["eraYear"]));break;case"monthCode":Le(gn,r,["month"]),this.helper.erasBeginMidYear&&(Le(gn,r,["era"]),Le(gn,r,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(Le(gn,r,["era"]),Le(gn,r,["eraYear"]))}}return[...Le(q6,r,[])]}dateAdd(e,r,n,i,a,o,s){const d=ar.getCacheForObject(e),l=this.helper.temporalToCalendarDate(e,d),c=this.helper.addCalendar(l,{years:r,months:n,weeks:i,days:a},o,d),u=this.helper.calendarToIsoDate(c,"constrain",d),{year:h,month:y,day:p}=u,f=wo(h,y,p,s);return new ar(d).setObject(f),f}dateUntil(e,r,n){const i=ar.getCacheForObject(e),a=ar.getCacheForObject(r),o=this.helper.temporalToCalendarDate(e,i),s=this.helper.temporalToCalendarDate(r,a);return this.helper.untilCalendar(o,s,n,i)}year(e){const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).year}month(e){const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).month}day(e){const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).day}era(e){if(!this.helper.hasEra)return;const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).era}eraYear(e){if(!this.helper.hasEra)return;const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).eraYear}monthCode(e){const r=ar.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,r).monthCode}dayOfWeek(e){return Jt.iso8601.dayOfWeek(e)}dayOfYear(e){const r=ar.getCacheForObject(e),n=this.helper.isoToCalendarDate(e,r),i=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(i,n,r)+1}weekOfYear(e){return Jt.iso8601.weekOfYear(e)}yearOfWeek(e){return Jt.iso8601.yearOfWeek(e)}daysInWeek(e){return Jt.iso8601.daysInWeek(e)}daysInMonth(e){const r=ar.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r),i=this.helper.maximumMonthLength(n);if(i===this.helper.minimumMonthLength(n))return i;const a=this.helper.startOfCalendarMonth(n),o=this.helper.addMonthsCalendar(a,1,"constrain",r);return this.helper.calendarDaysUntil(a,o,r)}daysInYear(e){let r=e;Yr(r,Oe)||(r=Ut(r));const n=ar.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n),a=this.helper.startOfCalendarYear(i),o=this.helper.addCalendar(a,{years:1},"constrain",n);return this.helper.calendarDaysUntil(a,o,n)}monthsInYear(e){const r=ar.getCacheForObject(e),n=this.helper.temporalToCalendarDate(e,r);return this.helper.monthsInYear(n,r)}inLeapYear(e){let r=e;Yr(r,Oe)||(r=Ut(r));const n=ar.getCacheForObject(r),i=this.helper.temporalToCalendarDate(r,n);return this.helper.inLeapYear(i,n)}}for(const t of[DW,qW,GW,VW,HW,QW,JW,WW,KW,YW,ZW,XW,V6,MW,LW,UW,FW,zW]){const e=new t;Jt[e.id]=new eY(e)}class zy{constructor(e,r,n,i="iso8601"){o6(this,Tt(e),Tt(r),Tt(n),Ni(i))}get calendarId(){if(!wt(this))throw new TypeError("invalid receiver");return fn(E(this,ge))}get era(){if(!wt(this))throw new TypeError("invalid receiver");return Nw(E(this,ge),this)}get eraYear(){if(!wt(this))throw new TypeError("invalid receiver");return Bw(E(this,ge),this)}get year(){if(!wt(this))throw new TypeError("invalid receiver");return jw(E(this,ge),this)}get month(){if(!wt(this))throw new TypeError("invalid receiver");return Cw(E(this,ge),this)}get monthCode(){if(!wt(this))throw new TypeError("invalid receiver");return By(E(this,ge),this)}get day(){if(!wt(this))throw new TypeError("invalid receiver");return Dy(E(this,ge),this)}get dayOfWeek(){if(!wt(this))throw new TypeError("invalid receiver");return UE(E(this,ge),this)}get dayOfYear(){if(!wt(this))throw new TypeError("invalid receiver");return FE(E(this,ge),this)}get weekOfYear(){if(!wt(this))throw new TypeError("invalid receiver");return zE(E(this,ge),this)}get yearOfWeek(){if(!wt(this))throw new TypeError("invalid receiver");return qE(E(this,ge),this)}get daysInWeek(){if(!wt(this))throw new TypeError("invalid receiver");return KE(E(this,ge),this)}get daysInMonth(){if(!wt(this))throw new TypeError("invalid receiver");return Dw(E(this,ge),this)}get daysInYear(){if(!wt(this))throw new TypeError("invalid receiver");return Mw(E(this,ge),this)}get monthsInYear(){if(!wt(this))throw new TypeError("invalid receiver");return Lw(E(this,ge),this)}get inLeapYear(){if(!wt(this))throw new TypeError("invalid receiver");return Uw(E(this,ge),this)}with(e,r){if(!wt(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");uh(e);const n=bt(r),i=E(this,ge),a=Ir(i,["day","month","monthCode","year"]);let o=ht(this,a,[]);return o=ou(i,o,ht(e,a,"partial")),o=ht(o,a,[]),ac(i,o,n)}withCalendar(e){if(!wt(this))throw new TypeError("invalid receiver");const r=Ni(e);return new zy(E(this,Oe),E(this,Re),E(this,je),r)}add(e,r){if(!wt(this))throw new TypeError("invalid receiver");const n=wf(e),i=bt(r);return ln(E(this,ge),this,n,i)}subtract(e,r){if(!wt(this))throw new TypeError("invalid receiver");const n=v6(wf(e)),i=bt(r);return ln(E(this,ge),this,n,i)}until(e,r){if(!wt(this))throw new TypeError("invalid receiver");return WP("until",this,e,r)}since(e,r){if(!wt(this))throw new TypeError("invalid receiver");return WP("since",this,e,r)}equals(e){if(!wt(this))throw new TypeError("invalid receiver");const r=Ut(e);for(const n of[Oe,Re,je])if(E(this,n)!==E(r,n))return!1;return Ly(E(this,ge),E(r,ge))}toString(e){if(!wt(this))throw new TypeError("invalid receiver");return LP(this,Ry(bt(e)))}toJSON(){if(!wt(this))throw new TypeError("invalid receiver");return LP(this)}toLocaleString(e,r){if(!wt(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!wt(this))throw new TypeError("invalid receiver");const r=E(this,Oe),n=E(this,Re),i=E(this,je),a=E(this,ge);if(e===void 0)return ki(r,n,i,0,0,0,0,0,0,a);const o=Wa(e);return ki(r,n,i,E(o,nt),E(o,it),E(o,ot),E(o,st),E(o,at),E(o,ct),a)}toZonedDateTime(e){if(!wt(this))throw new TypeError("invalid receiver");let r,n;if(Zt(e))if(ro(e))r=e;else{const p=e.timeZone;p===void 0?r=Pn(e):(r=Pn(p),n=e.plainTime)}else r=Pn(e);const i=E(this,Oe),a=E(this,Re),o=E(this,je),s=E(this,ge);let d=0,l=0,c=0,u=0,h=0,y=0;return n!==void 0&&(n=Wa(n),d=E(n,nt),l=E(n,it),c=E(n,ot),u=E(n,st),h=E(n,at),y=E(n,ct)),sn(E(Hn(r,ki(i,a,o,d,l,c,u,h,y,s),"compatible"),Ve),r,s)}toPlainYearMonth(){if(!wt(this))throw new TypeError("invalid receiver");const e=E(this,ge);return su(e,ht(this,Ir(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!wt(this))throw new TypeError("invalid receiver");const e=E(this,ge);return zf(e,ht(this,Ir(e,["day","monthCode"]),[]))}getISOFields(){if(!wt(this))throw new TypeError("invalid receiver");return{calendar:E(this,ge),isoDay:E(this,je),isoMonth:E(this,Re),isoYear:E(this,Oe)}}getCalendar(){if(!wt(this))throw new TypeError("invalid receiver");return ph(E(this,ge))}static from(e,r){const n=bt(r);return wt(e)?(Sr(n),wo(E(e,Oe),E(e,Re),E(e,je),E(e,ge))):Ut(e,n)}static compare(e,r){const n=Ut(e),i=Ut(r);return hd(E(n,Oe),E(n,Re),E(n,je),E(i,Oe),E(i,Re),E(i,je))}}pa(zy,"Temporal.PlainDate");class qy{constructor(e,r,n,i=0,a=0,o=0,s=0,d=0,l=0,c="iso8601"){s6(this,Tt(e),Tt(r),Tt(n),i===void 0?0:Tt(i),a===void 0?0:Tt(a),o===void 0?0:Tt(o),s===void 0?0:Tt(s),d===void 0?0:Tt(d),l===void 0?0:Tt(l),Ni(c))}get calendarId(){if(!tt(this))throw new TypeError("invalid receiver");return fn(E(this,ge))}get year(){if(!tt(this))throw new TypeError("invalid receiver");return jw(E(this,ge),this)}get month(){if(!tt(this))throw new TypeError("invalid receiver");return Cw(E(this,ge),this)}get monthCode(){if(!tt(this))throw new TypeError("invalid receiver");return By(E(this,ge),this)}get day(){if(!tt(this))throw new TypeError("invalid receiver");return Dy(E(this,ge),this)}get hour(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,nt)}get minute(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,it)}get second(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,ot)}get millisecond(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,st)}get microsecond(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,at)}get nanosecond(){if(!tt(this))throw new TypeError("invalid receiver");return E(this,ct)}get era(){if(!tt(this))throw new TypeError("invalid receiver");return Nw(E(this,ge),this)}get eraYear(){if(!tt(this))throw new TypeError("invalid receiver");return Bw(E(this,ge),this)}get dayOfWeek(){if(!tt(this))throw new TypeError("invalid receiver");return UE(E(this,ge),this)}get dayOfYear(){if(!tt(this))throw new TypeError("invalid receiver");return FE(E(this,ge),this)}get weekOfYear(){if(!tt(this))throw new TypeError("invalid receiver");return zE(E(this,ge),this)}get yearOfWeek(){if(!tt(this))throw new TypeError("invalid receiver");return qE(E(this,ge),this)}get daysInWeek(){if(!tt(this))throw new TypeError("invalid receiver");return KE(E(this,ge),this)}get daysInYear(){if(!tt(this))throw new TypeError("invalid receiver");return Mw(E(this,ge),this)}get daysInMonth(){if(!tt(this))throw new TypeError("invalid receiver");return Dw(E(this,ge),this)}get monthsInYear(){if(!tt(this))throw new TypeError("invalid receiver");return Lw(E(this,ge),this)}get inLeapYear(){if(!tt(this))throw new TypeError("invalid receiver");return Uw(E(this,ge),this)}with(e,r){if(!tt(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");uh(e);const n=bt(r),i=E(this,ge),a=Ir(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);let o=ht(this,a,[]);o=ou(i,o,ht(e,a,"partial")),o=ht(o,a,[]);const{year:s,month:d,day:l,hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}=Ny(i,o,n);return ki(s,d,l,c,u,h,y,p,f,i)}withPlainTime(e){if(!tt(this))throw new TypeError("invalid receiver");const r=E(this,Oe),n=E(this,Re),i=E(this,je),a=E(this,ge);if(e===void 0)return ki(r,n,i,0,0,0,0,0,0,a);const o=Wa(e);return ki(r,n,i,E(o,nt),E(o,it),E(o,ot),E(o,st),E(o,at),E(o,ct),a)}withPlainDate(e){if(!tt(this))throw new TypeError("invalid receiver");const r=Ut(e),n=E(r,Oe),i=E(r,Re),a=E(r,je);let o=E(r,ge);const s=E(this,nt),d=E(this,it),l=E(this,ot),c=E(this,st),u=E(this,at),h=E(this,ct);return o=l6(E(this,ge),o),ki(n,i,a,s,d,l,c,u,h,o)}withCalendar(e){if(!tt(this))throw new TypeError("invalid receiver");const r=Ni(e);return new qy(E(this,Oe),E(this,Re),E(this,je),E(this,nt),E(this,it),E(this,ot),E(this,st),E(this,at),E(this,ct),r)}add(e,r){if(!tt(this))throw new TypeError("invalid receiver");return tx("add",this,e,r)}subtract(e,r){if(!tt(this))throw new TypeError("invalid receiver");return tx("subtract",this,e,r)}until(e,r){if(!tt(this))throw new TypeError("invalid receiver");return YP("until",this,e,r)}since(e,r){if(!tt(this))throw new TypeError("invalid receiver");return YP("since",this,e,r)}round(e){if(!tt(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const r=typeof e=="string"?Vf("smallestUnit",e):bt(e),n=fh(r),i=gs(r,"halfExpand"),a=Ci(r,"smallestUnit","time",nu,["day"]),o={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[a];hh(n,o,o===1);let s=E(this,Oe),d=E(this,Re),l=E(this,je),c=E(this,nt),u=E(this,it),h=E(this,ot),y=E(this,st),p=E(this,at),f=E(this,ct);return{year:s,month:d,day:l,hour:c,minute:u,second:h,millisecond:y,microsecond:p,nanosecond:f}=JE(s,d,l,c,u,h,y,p,f,n,a,i),ki(s,d,l,c,u,h,y,p,f,E(this,ge))}equals(e){if(!tt(this))throw new TypeError("invalid receiver");const r=jl(e);for(const n of[Oe,Re,je,nt,it,ot,st,at,ct])if(E(this,n)!==E(r,n))return!1;return Ly(E(this,ge),E(r,ge))}toString(e){if(!tt(this))throw new TypeError("invalid receiver");const r=bt(e),n=Ry(r),i=jy(r),a=gs(r,"trunc"),o=Ci(r,"smallestUnit","time",void 0);if(o==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:s,unit:d,increment:l}=Cy(o,i);return UP(this,s,n,{unit:d,increment:l,roundingMode:a})}toJSON(){if(!tt(this))throw new TypeError("invalid receiver");return UP(this,"auto")}toLocaleString(e,r){if(!tt(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,r){if(!tt(this))throw new TypeError("invalid receiver");const n=Pn(e);return sn(E(Hn(n,this,Ff(bt(r))),Ve),n,E(this,ge))}toPlainDate(){if(!tt(this))throw new TypeError("invalid receiver");return qf(this)}toPlainYearMonth(){if(!tt(this))throw new TypeError("invalid receiver");const e=E(this,ge);return su(e,ht(this,Ir(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!tt(this))throw new TypeError("invalid receiver");const e=E(this,ge);return zf(e,ht(this,Ir(e,["day","monthCode"]),[]))}toPlainTime(){if(!tt(this))throw new TypeError("invalid receiver");return VE(this)}getISOFields(){if(!tt(this))throw new TypeError("invalid receiver");return{calendar:E(this,ge),isoDay:E(this,je),isoHour:E(this,nt),isoMicrosecond:E(this,at),isoMillisecond:E(this,st),isoMinute:E(this,it),isoMonth:E(this,Re),isoNanosecond:E(this,ct),isoSecond:E(this,ot),isoYear:E(this,Oe)}}getCalendar(){if(!tt(this))throw new TypeError("invalid receiver");return ph(E(this,ge))}static from(e,r){const n=bt(r);return tt(e)?(Sr(n),ki(E(e,Oe),E(e,Re),E(e,je),E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct),E(e,ge))):jl(e,n)}static compare(e,r){const n=jl(e),i=jl(r);for(const a of[Oe,Re,je,nt,it,ot,st,at,ct]){const o=E(n,a),s=E(i,a);if(o!==s)return Kl(o-s)}return 0}}pa(qy,"Temporal.PlainDateTime");class pd{constructor(e=0,r=0,n=0,i=0,a=0,o=0,s=0,d=0,l=0,c=0){const u=e===void 0?0:qr(e),h=r===void 0?0:qr(r),y=n===void 0?0:qr(n),p=i===void 0?0:qr(i),f=a===void 0?0:qr(a),g=o===void 0?0:qr(o),v=s===void 0?0:qr(s),b=d===void 0?0:qr(d),m=l===void 0?0:qr(l),w=c===void 0?0:qr(c);S0(u,h,y,p,f,g,v,b,m,w),ya(this),lt(this,Dn,u),lt(this,en,h),lt(this,ui,y),lt(this,Mn,p),lt(this,Ln,f),lt(this,Un,g),lt(this,Fn,v),lt(this,zn,b),lt(this,qn,m),lt(this,Kn,w)}get years(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Dn)}get months(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,en)}get weeks(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,ui)}get days(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Mn)}get hours(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Ln)}get minutes(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Un)}get seconds(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Fn)}get milliseconds(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,zn)}get microseconds(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,qn)}get nanoseconds(){if(!ur(this))throw new TypeError("invalid receiver");return E(this,Kn)}get sign(){if(!ur(this))throw new TypeError("invalid receiver");return Qs(E(this,Dn),E(this,en),E(this,ui),E(this,Mn),E(this,Ln),E(this,Un),E(this,Fn),E(this,zn),E(this,qn),E(this,Kn))}get blank(){if(!ur(this))throw new TypeError("invalid receiver");return Qs(E(this,Dn),E(this,en),E(this,ui),E(this,Mn),E(this,Ln),E(this,Un),E(this,Fn),E(this,zn),E(this,qn),E(this,Kn))===0}with(e){if(!ur(this))throw new TypeError("invalid receiver");const r=ht(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:n=E(this,Dn),months:i=E(this,en),weeks:a=E(this,ui),days:o=E(this,Mn),hours:s=E(this,Ln),minutes:d=E(this,Un),seconds:l=E(this,Fn),milliseconds:c=E(this,zn),microseconds:u=E(this,qn),nanoseconds:h=E(this,Kn)}=r;return new pd(n,i,a,o,s,d,l,c,u,h)}negated(){if(!ur(this))throw new TypeError("invalid receiver");return v6(this)}abs(){if(!ur(this))throw new TypeError("invalid receiver");return new pd(Math.abs(E(this,Dn)),Math.abs(E(this,en)),Math.abs(E(this,ui)),Math.abs(E(this,Mn)),Math.abs(E(this,Ln)),Math.abs(E(this,Un)),Math.abs(E(this,Fn)),Math.abs(E(this,zn)),Math.abs(E(this,qn)),Math.abs(E(this,Kn)))}add(e,r){if(!ur(this))throw new TypeError("invalid receiver");return JP("add",this,e,r)}subtract(e,r){if(!ur(this))throw new TypeError("invalid receiver");return JP("subtract",this,e,r)}round(e){if(!ur(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let r=E(this,Dn),n=E(this,en),i=E(this,ui),a=E(this,Mn),o=E(this,Ln),s=E(this,Un),d=E(this,Fn),l=E(this,zn),c=E(this,qn),u=E(this,Kn),h=__(r,n,i,a,o,s,d,l,c,u);const y=typeof e=="string"?Vf("smallestUnit",e):bt(e);let p=Ci(y,"largestUnit","datetime",void 0,["auto"]),f=mg(y);const g=fh(y),v=gs(y,"halfExpand");let b=Ci(y,"smallestUnit","datetime",void 0),m=!0;b||(m=!1,b="nanosecond"),h=iu(h,b);let w=!0;if(p||(w=!1,p=h),p==="auto"&&(p=h),!m&&!w)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(iu(p,b)!==p)throw new RangeError(`largestUnit ${p} cannot be smaller than smallestUnit ${b}`);const S={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[b];return S!==void 0&&hh(g,S,!1),{years:r,months:n,weeks:i,days:a}=km(r,n,i,a,p,f),{years:r,months:n,weeks:i,days:a,hours:o,minutes:s,seconds:d,milliseconds:l,microseconds:c,nanoseconds:u}=cc(r,n,i,a,o,s,d,l,c,u,g,b,v,f),{years:r,months:n,weeks:i,days:a,hours:o,minutes:s,seconds:d,milliseconds:l,microseconds:c,nanoseconds:u}=I6(r,n,i,a,o,s,d,l,c,u,g,b,v,f),{days:a,hours:o,minutes:s,seconds:d,milliseconds:l,microseconds:c,nanoseconds:u}=Vo(a,o,s,d,l,c,u,p,f),{years:r,months:n,weeks:i,days:a}=function(x,I,M,H,re,J){const z=Ae("%Temporal.Duration%"),oe=Qs(x,I,M,H,0,0,0,0,0,0);if(oe===0)return{years:x,months:I,weeks:M,days:H};const C=$.BigInt(oe);let V,q,Q=$.BigInt(x),R=$.BigInt(I),B=$.BigInt(M),D=$.BigInt(H);J&&(q=Ut(J),V=E(q,ge));const G=new z(oe),Z=new z(0,oe),N=new z(0,0,oe);switch(re){case"year":{if(!V)throw new RangeError("a starting point is required for years balancing");const W=typeof V!="string"?Nt(V,"dateAdd"):void 0;let O,F,Y;for({relativeTo:O,days:F}=vn(V,q,G,W);$.greaterThanOrEqual(ls(D),$.BigInt(Yt(F)));)D=$.subtract(D,$.BigInt(F)),Q=$.add(Q,C),q=O,{relativeTo:O,days:F}=vn(V,q,G,W);for({relativeTo:O,days:Y}=vn(V,q,Z,W);$.greaterThanOrEqual(ls(D),$.BigInt(Yt(Y)));)D=$.subtract(D,$.BigInt(Y)),R=$.add(R,C),q=O,{relativeTo:O,days:Y}=vn(V,q,Z,W);O=ln(V,q,G,void 0,W);const ee=typeof V!="string"?Nt(V,"dateUntil"):void 0,te=xn(null);te.largestUnit="month";let U=Od(V,q,O,te,ee),L=E(U,en);for(;$.greaterThanOrEqual(ls(R),$.BigInt(Yt(L)));){R=$.subtract(R,$.BigInt(L)),Q=$.add(Q,C),q=O,O=ln(V,q,G,void 0,W);const P=xn(null);P.largestUnit="month",U=Od(V,q,O,P,ee),L=E(U,en)}break}case"month":{if(!V)throw new RangeError("a starting point is required for months balancing");const W=typeof V!="string"?Nt(V,"dateAdd"):void 0;let O,F;for({relativeTo:O,days:F}=vn(V,q,Z,W);$.greaterThanOrEqual(ls(D),$.BigInt(Yt(F)));)D=$.subtract(D,$.BigInt(F)),R=$.add(R,C),q=O,{relativeTo:O,days:F}=vn(V,q,Z,W);break}case"week":{if(!V)throw new RangeError("a starting point is required for weeks balancing");const W=typeof V!="string"?Nt(V,"dateAdd"):void 0;let O,F;for({relativeTo:O,days:F}=vn(V,q,N,W);$.greaterThanOrEqual(ls(D),$.BigInt(Yt(F)));)D=$.subtract(D,$.BigInt(F)),B=$.add(B,C),q=O,{relativeTo:O,days:F}=vn(V,q,N,W);break}}return{years:$.toNumber(Q),months:$.toNumber(R),weeks:$.toNumber(B),days:$.toNumber(D)}}(r,n,i,a,p,f),new pd(r,n,i,a,o,s,d,l,c,u)}total(e){if(!ur(this))throw new TypeError("invalid receiver");let r=E(this,Dn),n=E(this,en),i=E(this,ui),a=E(this,Mn),o=E(this,Ln),s=E(this,Un),d=E(this,Fn),l=E(this,zn),c=E(this,qn),u=E(this,Kn);if(e===void 0)throw new TypeError("options argument is required");const h=typeof e=="string"?Vf("unit",e):bt(e),y=mg(h),p=Ci(h,"unit","datetime",nu);let f;({years:r,months:n,weeks:i,days:a}=km(r,n,i,a,p,y)),Be(y)&&(f=x6(y,r,n,i,0));let g=b6(a,o,s,d,l,c,u,p,f);if(g==="positive overflow")return 1/0;if(g==="negative overflow")return-1/0;({days:a,hours:o,minutes:s,seconds:d,milliseconds:l,microseconds:c,nanoseconds:u}=g);const{total:v}=cc(r,n,i,a,o,s,d,l,c,u,1,p,"trunc",y);return v}toString(e){if(!ur(this))throw new TypeError("invalid receiver");const r=bt(e),n=jy(r),i=gs(r,"trunc"),a=Ci(r,"smallestUnit","time",void 0);if(a==="hour"||a==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:o,unit:s,increment:d}=Cy(a,n);return yv(this,o,{unit:s,increment:d,roundingMode:i})}toJSON(){if(!ur(this))throw new TypeError("invalid receiver");return yv(this)}toLocaleString(e,r){if(!ur(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,r).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),yv(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return ur(e)?new pd(E(e,Dn),E(e,en),E(e,ui),E(e,Mn),E(e,Ln),E(e,Un),E(e,Fn),E(e,zn),E(e,qn),E(e,Kn)):wf(e)}static compare(e,r,n){const i=wf(e),a=wf(r),o=mg(bt(n)),s=E(i,Dn),d=E(i,en),l=E(i,ui);let c=E(i,Mn);const u=E(i,Ln),h=E(i,Un),y=E(i,Fn),p=E(i,zn),f=E(i,qn);let g=E(i,Kn);const v=E(a,Dn),b=E(a,en),m=E(a,ui);let w=E(a,Mn);const S=E(a,Ln),T=E(a,Un),x=E(a,Fn),I=E(a,zn),M=E(a,qn);let H=E(a,Kn);const re=HP(o,s,d,l,c),J=HP(o,v,b,m,w);s===0&&v===0&&d===0&&b===0&&l===0&&m===0||({days:c}=km(s,d,l,c,"day",o),{days:w}=km(v,b,m,w,"day",o));const z=Kf(c,u,h,y,p,f,g,re),oe=Kf(w,S,T,x,I,M,H,J);return Kl($.toNumber($.subtract(z,oe)))}}pa(pd,"Temporal.Duration");const tY=Object.create;class sS{constructor(e,r,n="iso8601",i=1972){a6(this,Tt(e),Tt(r),Ni(n),Tt(i))}get monthCode(){if(!zr(this))throw new TypeError("invalid receiver");return By(E(this,ge),this)}get day(){if(!zr(this))throw new TypeError("invalid receiver");return Dy(E(this,ge),this)}get calendarId(){if(!zr(this))throw new TypeError("invalid receiver");return fn(E(this,ge))}with(e,r){if(!zr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");uh(e);const n=bt(r),i=E(this,ge),a=Ir(i,["day","month","monthCode","year"]);let o=ht(this,a,[]);return o=ou(i,o,ht(e,a,"partial")),o=ht(o,a,[]),zf(i,o,n)}equals(e){if(!zr(this))throw new TypeError("invalid receiver");const r=DP(e);for(const n of[Re,je,Oe])if(E(this,n)!==E(r,n))return!1;return Ly(E(this,ge),E(r,ge))}toString(e){if(!zr(this))throw new TypeError("invalid receiver");return FP(this,Ry(bt(e)))}toJSON(){if(!zr(this))throw new TypeError("invalid receiver");return FP(this)}toLocaleString(e,r){if(!zr(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!zr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("argument should be an object");const r=E(this,ge),n=Ir(r,["day","monthCode"]),i=ht(this,n,[]),a=Ir(r,["year"]);let o=ou(r,i,ht(e,a,[]));o=ht(o,[...new Set([...n,...a])],[]);const s=tY(null);return s.overflow="reject",ac(r,o,s)}getISOFields(){if(!zr(this))throw new TypeError("invalid receiver");return{calendar:E(this,ge),isoDay:E(this,je),isoMonth:E(this,Re),isoYear:E(this,Oe)}}getCalendar(){if(!zr(this))throw new TypeError("invalid receiver");return ph(E(this,ge))}static from(e,r){const n=bt(r);return zr(e)?(Sr(n),ey(E(e,Re),E(e,je),E(e,ge),E(e,Oe))):DP(e,n)}}pa(sS,"Temporal.PlainMonthDay");const aS=()=>new(Ae("%Temporal.Instant%"))(tS()),sx=(t,e=cd())=>{const r=Pn(e),n=Ni(t);return qi(r,aS(),n)},bv=(t=cd())=>qi(Pn(t),aS(),"iso8601"),ax=(t,e=cd())=>{const r=Pn(e),n=Ni(t);return sn(tS(),r,n)},W6={instant:aS,plainDateTime:sx,plainDateTimeISO:bv,plainDate:(t,e=cd())=>qf(sx(t,e)),plainDateISO:(t=cd())=>qf(bv(t)),plainTimeISO:(t=cd())=>VE(bv(t)),timeZoneId:()=>cd(),zonedDateTime:ax,zonedDateTimeISO:(t=cd())=>ax("iso8601",t),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(W6,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const rY=Object.assign;function cx(t,e,r){let n=E(t,nt),i=E(t,it),a=E(t,ot),o=E(t,st),s=E(t,at),d=E(t,ct);if(r){const{unit:l,increment:c,roundingMode:u}=r;({hour:n,minute:i,second:a,millisecond:o,microsecond:s,nanosecond:d}=eS(n,i,a,o,s,d,c,l,u))}return`${rr(n)}:${rr(i)}${zw(a,o,s,d,e)}`}class Vl{constructor(e=0,r=0,n=0,i=0,a=0,o=0){const s=e===void 0?0:Tt(e),d=r===void 0?0:Tt(r),l=n===void 0?0:Tt(n),c=i===void 0?0:Tt(i),u=a===void 0?0:Tt(a),h=o===void 0?0:Tt(o);Vw(s,d,l,c,u,h),ya(this),lt(this,nt,s),lt(this,it,d),lt(this,ot,l),lt(this,st,c),lt(this,at,u),lt(this,ct,h)}get hour(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,nt)}get minute(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,it)}get second(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,ot)}get millisecond(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,st)}get microsecond(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,at)}get nanosecond(){if(!fr(this))throw new TypeError("invalid receiver");return E(this,ct)}with(e,r){if(!fr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");uh(e);const n=Sr(bt(r)),i=b0(e,"partial"),a=b0(this);let{hour:o,minute:s,second:d,millisecond:l,microsecond:c,nanosecond:u}=rY(a,i);return{hour:o,minute:s,second:d,millisecond:l,microsecond:c,nanosecond:u}=Rw(o,s,d,l,c,u,n),new Vl(o,s,d,l,c,u)}add(e){if(!fr(this))throw new TypeError("invalid receiver");return rx("add",this,e)}subtract(e){if(!fr(this))throw new TypeError("invalid receiver");return rx("subtract",this,e)}until(e,r){if(!fr(this))throw new TypeError("invalid receiver");return ZP("until",this,e,r)}since(e,r){if(!fr(this))throw new TypeError("invalid receiver");return ZP("since",this,e,r)}round(e){if(!fr(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const r=typeof e=="string"?Vf("smallestUnit",e):bt(e),n=fh(r),i=gs(r,"halfExpand"),a=Ci(r,"smallestUnit","time",nu);hh(n,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[a],!1);let o=E(this,nt),s=E(this,it),d=E(this,ot),l=E(this,st),c=E(this,at),u=E(this,ct);return{hour:o,minute:s,second:d,millisecond:l,microsecond:c,nanosecond:u}=eS(o,s,d,l,c,u,n,a,i),new Vl(o,s,d,l,c,u)}equals(e){if(!fr(this))throw new TypeError("invalid receiver");const r=Wa(e);for(const n of[nt,it,ot,st,at,ct])if(E(this,n)!==E(r,n))return!1;return!0}toString(e){if(!fr(this))throw new TypeError("invalid receiver");const r=bt(e),n=jy(r),i=gs(r,"trunc"),a=Ci(r,"smallestUnit","time",void 0);if(a==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:o,unit:s,increment:d}=Cy(a,n);return cx(this,o,{unit:s,increment:d,roundingMode:i})}toJSON(){if(!fr(this))throw new TypeError("invalid receiver");return cx(this,"auto")}toLocaleString(e,r){if(!fr(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!fr(this))throw new TypeError("invalid receiver");const r=Ut(e),n=E(r,Oe),i=E(r,Re),a=E(r,je),o=E(r,ge);return ki(n,i,a,E(this,nt),E(this,it),E(this,ot),E(this,st),E(this,at),E(this,ct),o)}toZonedDateTime(e){if(!fr(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");const r=e.plainDate;if(r===void 0)throw new TypeError("missing date property");const n=Ut(r),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");const a=Pn(i),o=E(n,Oe),s=E(n,Re),d=E(n,je),l=E(n,ge),c=E(this,nt),u=E(this,it),h=E(this,ot),y=E(this,st),p=E(this,at),f=E(this,ct);return sn(E(Hn(a,new(Ae("%Temporal.PlainDateTime%"))(o,s,d,c,u,h,y,p,f,l),"compatible"),Ve),a,l)}getISOFields(){if(!fr(this))throw new TypeError("invalid receiver");return{isoHour:E(this,nt),isoMicrosecond:E(this,at),isoMillisecond:E(this,st),isoMinute:E(this,it),isoNanosecond:E(this,ct),isoSecond:E(this,ot)}}static from(e,r){const n=Sr(bt(r));return fr(e)?new Vl(E(e,nt),E(e,it),E(e,ot),E(e,st),E(e,at),E(e,ct)):Wa(e,n)}static compare(e,r){const n=Wa(e),i=Wa(r);for(const a of[nt,it,ot,st,at,ct]){const o=E(n,a),s=E(i,a);if(o!==s)return Kl(o-s)}return 0}}pa(Vl,"Temporal.PlainTime");class Rp{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const r=HE(e);ya(this),lt(this,Cs,r)}get id(){if(!ro(this))throw new TypeError("invalid receiver");return E(this,Cs)}getOffsetNanosecondsFor(e){if(!ro(this))throw new TypeError("invalid receiver");const r=us(e),n=E(this,Cs);return of(n)?Rd(n):Qa(n,E(r,Ve))}getOffsetStringFor(e){if(!ro(this))throw new TypeError("invalid receiver");return E_(this,us(e))}getPlainDateTimeFor(e,r="iso8601"){if(!ro(this))throw new TypeError("invalid receiver");return qi(this,us(e),Ni(r))}getInstantFor(e,r){if(!ro(this))throw new TypeError("invalid receiver");return Hn(this,jl(e),Ff(bt(r)))}getPossibleInstantsFor(e){if(!ro(this))throw new TypeError("invalid receiver");const r=jl(e),n=Ae("%Temporal.Instant%"),i=E(this,Cs);if(of(i)){const o=jd(E(r,Oe),E(r,Re),E(r,je),E(r,nt),E(r,it),E(r,ot),E(r,st),E(r,at),E(r,ct));if(o===null)throw new RangeError("DateTime outside of supported range");const s=Rd(i);return[new n($.subtract(o,$.BigInt(s)))]}return function(s,d,l,c,u,h,y,p,f,g){const v=jd(d,l,c,u,h,y,p,f,g);if(v===null)throw new RangeError("DateTime outside of supported range");let b=$.subtract(v,ia);$.lessThan(b,Jp)&&(b=v);let m=$.add(v,ia);$.greaterThan(m,Lf)&&(m=v);const w=Qa(s,b),S=Qa(s,m);return(w===S?[w]:[w,S]).map(T=>{const x=$.subtract(v,$.BigInt(T)),I=m6(s,x);if(d===I.year&&l===I.month&&c===I.day&&u===I.hour&&h===I.minute&&y===I.second&&p===I.millisecond&&f===I.microsecond&&g===I.nanosecond)return x}).filter(T=>T!==void 0)}(i,E(r,Oe),E(r,Re),E(r,je),E(r,nt),E(r,it),E(r,ot),E(r,st),E(r,at),E(r,ct)).map(o=>new n(o))}getNextTransition(e){if(!ro(this))throw new TypeError("invalid receiver");const r=us(e),n=E(this,Cs);if(of(n)||n==="UTC")return null;let i=E(r,Ve);const a=Ae("%Temporal.Instant%");return i=w6(n,i),i===null?null:new a(i)}getPreviousTransition(e){if(!ro(this))throw new TypeError("invalid receiver");const r=us(e),n=E(this,Cs);if(of(n)||n==="UTC")return null;let i=E(r,Ve);const a=Ae("%Temporal.Instant%");return i=S_(n,i),i===null?null:new a(i)}toString(){if(!ro(this))throw new TypeError("invalid receiver");return E(this,Cs)}toJSON(){if(!ro(this))throw new TypeError("invalid receiver");return E(this,Cs)}static from(e){return u6(Pn(e))}}pa(Rp,"Temporal.TimeZone"),sr("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",Rp.prototype.getOffsetNanosecondsFor),sr("Temporal.TimeZone.prototype.getPossibleInstantsFor",Rp.prototype.getPossibleInstantsFor);const nY=Object.create;class cS{constructor(e,r,n="iso8601",i=1){c6(this,Tt(e),Tt(r),Ni(n),Tt(i))}get year(){if(!It(this))throw new TypeError("invalid receiver");return jw(E(this,ge),this)}get month(){if(!It(this))throw new TypeError("invalid receiver");return Cw(E(this,ge),this)}get monthCode(){if(!It(this))throw new TypeError("invalid receiver");return By(E(this,ge),this)}get calendarId(){if(!It(this))throw new TypeError("invalid receiver");return fn(E(this,ge))}get era(){if(!It(this))throw new TypeError("invalid receiver");return Nw(E(this,ge),this)}get eraYear(){if(!It(this))throw new TypeError("invalid receiver");return Bw(E(this,ge),this)}get daysInMonth(){if(!It(this))throw new TypeError("invalid receiver");return Dw(E(this,ge),this)}get daysInYear(){if(!It(this))throw new TypeError("invalid receiver");return Mw(E(this,ge),this)}get monthsInYear(){if(!It(this))throw new TypeError("invalid receiver");return Lw(E(this,ge),this)}get inLeapYear(){if(!It(this))throw new TypeError("invalid receiver");return Uw(E(this,ge),this)}with(e,r){if(!It(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid argument");uh(e);const n=bt(r),i=E(this,ge),a=Ir(i,["month","monthCode","year"]);let o=ht(this,a,[]);return o=ou(i,o,ht(e,a,"partial")),o=ht(o,a,[]),su(i,o,n)}add(e,r){if(!It(this))throw new TypeError("invalid receiver");return nx("add",this,e,r)}subtract(e,r){if(!It(this))throw new TypeError("invalid receiver");return nx("subtract",this,e,r)}until(e,r){if(!It(this))throw new TypeError("invalid receiver");return XP("until",this,e,r)}since(e,r){if(!It(this))throw new TypeError("invalid receiver");return XP("since",this,e,r)}equals(e){if(!It(this))throw new TypeError("invalid receiver");const r=cp(e);for(const n of[Oe,Re,je])if(E(this,n)!==E(r,n))return!1;return Ly(E(this,ge),E(r,ge))}toString(e){if(!It(this))throw new TypeError("invalid receiver");return zP(this,Ry(bt(e)))}toJSON(){if(!It(this))throw new TypeError("invalid receiver");return zP(this)}toLocaleString(e,r){if(!It(this))throw new TypeError("invalid receiver");return new Kd(e,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!It(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("argument should be an object");const r=E(this,ge),n=Ir(r,["monthCode","year"]),i=ht(this,n,[]),a=Ir(r,["day"]);let o=ou(r,i,ht(e,a,[]));o=ht(o,[...new Set([...n,...a])],[]);const s=nY(null);return s.overflow="reject",ac(r,o,s)}getISOFields(){if(!It(this))throw new TypeError("invalid receiver");return{calendar:E(this,ge),isoDay:E(this,je),isoMonth:E(this,Re),isoYear:E(this,Oe)}}getCalendar(){if(!It(this))throw new TypeError("invalid receiver");return ph(E(this,ge))}static from(e,r){const n=bt(r);return It(e)?(Sr(n),ty(E(e,Oe),E(e,Re),E(e,ge),E(e,je))):cp(e,n)}static compare(e,r){const n=cp(e),i=cp(r);return hd(E(n,Oe),E(n,Re),E(n,je),E(i,Oe),E(i,Re),E(i,je))}}pa(cS,"Temporal.PlainYearMonth");const iY=Kd.prototype.resolvedOptions,oY=Object.create;class dS{constructor(e,r,n="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");d6(this,kp(e),Pn(r),Ni(n))}get calendarId(){if(!Be(this))throw new TypeError("invalid receiver");return fn(E(this,ge))}get timeZoneId(){if(!Be(this))throw new TypeError("invalid receiver");return ry(E(this,Lt))}get year(){if(!Be(this))throw new TypeError("invalid receiver");return jw(E(this,ge),Vt(this))}get month(){if(!Be(this))throw new TypeError("invalid receiver");return Cw(E(this,ge),Vt(this))}get monthCode(){if(!Be(this))throw new TypeError("invalid receiver");return By(E(this,ge),Vt(this))}get day(){if(!Be(this))throw new TypeError("invalid receiver");return Dy(E(this,ge),Vt(this))}get hour(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),nt)}get minute(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),it)}get second(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),ot)}get millisecond(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),st)}get microsecond(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),at)}get nanosecond(){if(!Be(this))throw new TypeError("invalid receiver");return E(Vt(this),ct)}get era(){if(!Be(this))throw new TypeError("invalid receiver");return Nw(E(this,ge),Vt(this))}get eraYear(){if(!Be(this))throw new TypeError("invalid receiver");return Bw(E(this,ge),Vt(this))}get epochSeconds(){if(!Be(this))throw new TypeError("invalid receiver");const e=E(this,Ve);return $.toNumber(bf(e,Xs))}get epochMilliseconds(){if(!Be(this))throw new TypeError("invalid receiver");const e=E(this,Ve);return $.toNumber(bf(e,yo))}get epochMicroseconds(){if(!Be(this))throw new TypeError("invalid receiver");return T0(bf(E(this,Ve),Ot))}get epochNanoseconds(){if(!Be(this))throw new TypeError("invalid receiver");return T0(E(this,Ve))}get dayOfWeek(){if(!Be(this))throw new TypeError("invalid receiver");return UE(E(this,ge),Vt(this))}get dayOfYear(){if(!Be(this))throw new TypeError("invalid receiver");return FE(E(this,ge),Vt(this))}get weekOfYear(){if(!Be(this))throw new TypeError("invalid receiver");return zE(E(this,ge),Vt(this))}get yearOfWeek(){if(!Be(this))throw new TypeError("invalid receiver");return qE(E(this,ge),Vt(this))}get hoursInDay(){if(!Be(this))throw new TypeError("invalid receiver");const e=Vt(this),r=Ae("%Temporal.PlainDateTime%"),n=E(e,Oe),i=E(e,Re),a=E(e,je),o=new r(n,i,a,0,0,0,0,0,0),s=ql(n,i,a,0,0,0,1,"reject"),d=new r(s.year,s.month,s.day,0,0,0,0,0,0),l=E(this,Lt),c=E(Hn(l,o,"compatible"),Ve),u=E(Hn(l,d,"compatible"),Ve);return Os($.subtract(u,c),e6)}get daysInWeek(){if(!Be(this))throw new TypeError("invalid receiver");return KE(E(this,ge),Vt(this))}get daysInMonth(){if(!Be(this))throw new TypeError("invalid receiver");return Dw(E(this,ge),Vt(this))}get daysInYear(){if(!Be(this))throw new TypeError("invalid receiver");return Mw(E(this,ge),Vt(this))}get monthsInYear(){if(!Be(this))throw new TypeError("invalid receiver");return Lw(E(this,ge),Vt(this))}get inLeapYear(){if(!Be(this))throw new TypeError("invalid receiver");return Uw(E(this,ge),Vt(this))}get offset(){if(!Be(this))throw new TypeError("invalid receiver");return E_(E(this,Lt),E(this,Sn))}get offsetNanoseconds(){if(!Be(this))throw new TypeError("invalid receiver");return ws(E(this,Lt),E(this,Sn))}with(e,r){if(!Be(this))throw new TypeError("invalid receiver");if(!Zt(e))throw new TypeError("invalid zoned-date-time-like");uh(e);const n=bt(r),i=E(this,ge);let a=Ir(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);a.push("offset");let o=ht(this,a,["offset"]);o=ou(i,o,ht(e,a,"partial")),o=ht(o,a,["offset"]);const s=Ff(n),d=w0(n,"prefer");let{year:l,month:c,day:u,hour:h,minute:y,second:p,millisecond:f,microsecond:g,nanosecond:v}=Ny(i,o,n);const b=Rd(o.offset),m=E(this,Lt);return sn(v0(l,c,u,h,y,p,f,g,v,"option",b,m,s,d,!1),m,i)}withPlainDate(e){if(!Be(this))throw new TypeError("invalid receiver");const r=Ut(e),n=E(r,Oe),i=E(r,Re),a=E(r,je);let o=E(r,ge);const s=Vt(this),d=E(s,nt),l=E(s,it),c=E(s,ot),u=E(s,st),h=E(s,at),y=E(s,ct);o=l6(E(this,ge),o);const p=E(this,Lt);return sn(E(Hn(p,new(Ae("%Temporal.PlainDateTime%"))(n,i,a,d,l,c,u,h,y,o),"compatible"),Ve),p,o)}withPlainTime(e){if(!Be(this))throw new TypeError("invalid receiver");const r=Ae("%Temporal.PlainTime%"),n=e===void 0?new r:Wa(e),i=Vt(this),a=E(i,Oe),o=E(i,Re),s=E(i,je),d=E(this,ge),l=E(n,nt),c=E(n,it),u=E(n,ot),h=E(n,st),y=E(n,at),p=E(n,ct),f=E(this,Lt);return sn(E(Hn(f,new(Ae("%Temporal.PlainDateTime%"))(a,o,s,l,c,u,h,y,p,d),"compatible"),Ve),f,d)}withTimeZone(e){if(!Be(this))throw new TypeError("invalid receiver");const r=Pn(e);return sn(E(this,Ve),r,E(this,ge))}withCalendar(e){if(!Be(this))throw new TypeError("invalid receiver");const r=Ni(e);return sn(E(this,Ve),E(this,Lt),r)}add(e,r){if(!Be(this))throw new TypeError("invalid receiver");return ix("add",this,e,r)}subtract(e,r){if(!Be(this))throw new TypeError("invalid receiver");return ix("subtract",this,e,r)}until(e,r){if(!Be(this))throw new TypeError("invalid receiver");return QP("until",this,e,r)}since(e,r){if(!Be(this))throw new TypeError("invalid receiver");return QP("since",this,e,r)}round(e){if(!Be(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const r=typeof e=="string"?Vf("smallestUnit",e):bt(e),n=fh(r),i=gs(r,"halfExpand"),a=Ci(r,"smallestUnit","time",nu,["day"]),o={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[a];hh(n,o,o===1);const s=Vt(this);let d=E(s,Oe),l=E(s,Re),c=E(s,je),u=E(s,nt),h=E(s,it),y=E(s,ot),p=E(s,st),f=E(s,at),g=E(s,ct);const v=Ae("%Temporal.PlainDateTime%"),b=E(this,Lt),m=E(this,ge),w=Hn(b,new v(E(s,Oe),E(s,Re),E(s,je),0,0,0,0,0,0),"compatible"),S=mo(w,b,m,0,0,0,1,0,0,0,0,0,0),T=$.subtract(S,$.BigInt(E(w,Ve)));if($.lessThanOrEqual(T,hr))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return{year:d,month:l,day:c,hour:u,minute:h,second:y,millisecond:p,microsecond:f,nanosecond:g}=JE(d,l,c,u,h,y,p,f,g,n,a,i,$.toNumber(T)),sn(v0(d,l,c,u,h,y,p,f,g,"option",ws(b,E(this,Sn)),b,"compatible","prefer",!1),b,E(this,ge))}equals(e){if(!Be(this))throw new TypeError("invalid receiver");const r=dp(e),n=E(this,Ve),i=E(r,Ve);return!!$.equal($.BigInt(n),$.BigInt(i))&&!!f6(E(this,Lt),E(r,Lt))&&Ly(E(this,ge),E(r,ge))}toString(e){if(!Be(this))throw new TypeError("invalid receiver");const r=bt(e),n=Ry(r),i=jy(r),a=function(y){return Nd(y,"offset",["auto","never"],"auto")}(r),o=gs(r,"trunc"),s=Ci(r,"smallestUnit","time",void 0);if(s==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const d=function(y){return Nd(y,"timeZoneName",["auto","never","critical"],"auto")}(r),{precision:l,unit:c,increment:u}=Cy(s,i);return qP(this,l,n,d,a,{unit:c,increment:u,roundingMode:o})}toLocaleString(e,r){if(!Be(this))throw new TypeError("invalid receiver");const n=bt(r),i=oY(null);if(gf(i,n,["timeZone"]),n.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");i.year===void 0&&i.month===void 0&&i.day===void 0&&i.weekday===void 0&&i.dateStyle===void 0&&i.hour===void 0&&i.minute===void 0&&i.second===void 0&&i.timeStyle===void 0&&i.dayPeriod===void 0&&i.timeZoneName===void 0&&(i.timeZoneName="short");let a=ry(E(this,Lt));if(of(a))throw new RangeError("toLocaleString does not support offset string time zones");a=HE(a),i.timeZone=a;const o=new Kd(e,i),s=Le(iY,o,[]).calendar,d=fn(E(this,ge));if(d!=="iso8601"&&s!=="iso8601"&&s!==d)throw new RangeError(`cannot format ZonedDateTime with calendar ${d} in locale with calendar ${s}`);return o.format(E(this,Sn))}toJSON(){if(!Be(this))throw new TypeError("invalid receiver");return qP(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!Be(this))throw new TypeError("invalid receiver");const e=Vt(this),r=Ae("%Temporal.PlainDateTime%"),n=E(this,ge),i=new r(E(e,Oe),E(e,Re),E(e,je),0,0,0,0,0,0,n),a=E(this,Lt);return sn(E(Hn(a,i,"compatible"),Ve),a,n)}toInstant(){if(!Be(this))throw new TypeError("invalid receiver");return new(Ae("%Temporal.Instant%"))(E(this,Ve))}toPlainDate(){if(!Be(this))throw new TypeError("invalid receiver");return qf(Vt(this))}toPlainTime(){if(!Be(this))throw new TypeError("invalid receiver");return VE(Vt(this))}toPlainDateTime(){if(!Be(this))throw new TypeError("invalid receiver");return Vt(this)}toPlainYearMonth(){if(!Be(this))throw new TypeError("invalid receiver");const e=E(this,ge);return su(e,ht(this,Ir(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Be(this))throw new TypeError("invalid receiver");const e=E(this,ge);return zf(e,ht(this,Ir(e,["day","monthCode"]),[]))}getISOFields(){if(!Be(this))throw new TypeError("invalid receiver");const e=Vt(this),r=E(this,Lt);return{calendar:E(this,ge),isoDay:E(e,je),isoHour:E(e,nt),isoMicrosecond:E(e,at),isoMillisecond:E(e,st),isoMinute:E(e,it),isoMonth:E(e,Re),isoNanosecond:E(e,ct),isoSecond:E(e,ot),isoYear:E(e,Oe),offset:E_(r,E(this,Sn)),timeZone:r}}getCalendar(){if(!Be(this))throw new TypeError("invalid receiver");return ph(E(this,ge))}getTimeZone(){if(!Be(this))throw new TypeError("invalid receiver");return u6(E(this,Lt))}static from(e,r){const n=bt(r);return Be(e)?(Ff(n),w0(n,"reject"),Sr(n),sn(E(e,Ve),E(e,Lt),E(e,ge))):dp(e,n)}static compare(e,r){const n=dp(e),i=dp(r),a=E(n,Ve),o=E(i,Ve);return $.lessThan($.BigInt(a),$.BigInt(o))?-1:$.greaterThan($.BigInt(a),$.BigInt(o))?1:0}}function Vt(t){return qi(E(t,Lt),E(t,Sn),E(t,ge))}pa(dS,"Temporal.ZonedDateTime");var Mu=Object.freeze({__proto__:null,Calendar:lr,Duration:pd,Instant:ds,Now:W6,PlainDate:zy,PlainDateTime:qy,PlainMonthDay:sS,PlainTime:Vl,PlainYearMonth:cS,TimeZone:Rp,ZonedDateTime:dS});const sY=[ds,lr,zy,qy,pd,sS,Vl,Rp,cS,dS];for(const t of sY){const e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}var dx=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class br{static sleep(e){return dx(this,void 0,void 0,function*(){return new Promise(r=>setTimeout(r,e))})}static minimalSleep(){return dx(this,void 0,void 0,function*(){yield br.sleep(2)})}static getCurrentTimestamp(){return Mu.Now.instant().toString({smallestUnit:"microseconds"})}static createTimestamp(e){const{year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l}=e;return Mu.ZonedDateTime.from({timeZone:"UTC",year:r,month:n,day:i,hour:a,minute:o,second:s,millisecond:d,microsecond:l}).toInstant().toString({smallestUnit:"microseconds"})}static createOffsetTimestamp(e,r){const n=r?Mu.Instant.from(r):Mu.Now.instant(),i=Mu.Duration.from(e);return n.add(i).toString({smallestUnit:"microseconds"})}static validateTimestamp(e){try{Mu.Instant.from(e)}catch{throw new Pe(Te.TimestampInvalid,`Invalid timestamp: ${e}`)}}}var kr=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},aY=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Rr{get message(){if(this._message.authorization===void 0)throw new Pe(Te.RecordsWriteMissingSigner,"This RecordsWrite is not yet signed, JSON message cannot be generated from an incomplete state.");return this._message}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get owner(){return this._owner}get ownerSignaturePayload(){return this._ownerSignaturePayload}get isSignedByAuthorDelegate(){return Fe.isSignedByAuthorDelegate(this._message)}get isSignedByOwnerDelegate(){return Fe.isSignedByOwnerDelegate(this._message)}get signer(){return Fe.getSigner(this._message)}get ownerSignatureSigner(){var e;return((e=this._message.authorization)===null||e===void 0?void 0:e.ownerSignature)===void 0?void 0:Fr.getSignerDid(this._message.authorization.ownerSignature.signatures[0])}constructor(e,r){this.parentContextId=r,this._message=e,e.authorization!==void 0&&(this._author=Fe.getAuthor(e),this._signaturePayload=Fr.decodePlainObjectPayload(e.authorization.signature),e.authorization.ownerSignature!==void 0&&(e.authorization.ownerDelegatedGrant!==void 0?this._owner=Fe.getSigner(e.authorization.ownerDelegatedGrant):this._owner=Fr.getSignerDid(e.authorization.ownerSignature.signatures[0]),this._ownerSignaturePayload=Fr.decodePlainObjectPayload(e.authorization.ownerSignature))),this.attesters=Rr.getAttesters(e)}static parse(e){return kr(this,void 0,void 0,function*(){const r=JSON.parse(JSON.stringify(e));yield Fe.validateSignatureStructure(r.authorization.signature,r.descriptor,"RecordsWriteSignaturePayload"),r.authorization.ownerSignature!==void 0&&(yield Fe.validateSignatureStructure(r.authorization.ownerSignature,r.descriptor)),yield Rr.validateAttestationIntegrity(r);const n=new Rr(r);return yield n.validateIntegrity(),n})}static create(e){var r,n,i,a;return kr(this,void 0,void 0,function*(){if(e.protocol===void 0&&e.protocolPath!==void 0||e.protocol!==void 0&&e.protocolPath===void 0)throw new Pe(Te.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive,"`protocol` and `protocolPath` must both be defined or undefined at the same time");if(e.data===void 0&&e.dataCid===void 0||e.data!==void 0&&e.dataCid!==void 0)throw new Pe(Te.RecordsWriteCreateDataAndDataCidMutuallyExclusive,"one and only one parameter between `data` and `dataCid` is required");if(e.dataCid===void 0&&e.dataSize!==void 0||e.dataCid!==void 0&&e.dataSize===void 0)throw new Pe(Te.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive,"`dataCid` and `dataSize` must both be defined or undefined at the same time");if(e.signer===void 0&&e.delegatedGrant!==void 0)throw new Pe(Te.RecordsWriteCreateMissingSigner,"`signer` must be given when `delegatedGrant` is given");const o=(r=e.dataCid)!==null&&r!==void 0?r:yield io.computeDagPbCidFromBytes(e.data),s=(n=e.dataSize)!==null&&n!==void 0?n:e.data.length,d=br.getCurrentTimestamp(),l={interface:bi.Records,method:Xn.Write,protocol:e.protocol!==void 0?kd(e.protocol):void 0,protocolPath:e.protocolPath,recipient:e.recipient,schema:e.schema!==void 0?Iw(e.schema):void 0,tags:e.tags,parentId:Rr.getRecordIdFromContextId(e.parentContextId),dataCid:o,dataSize:s,dateCreated:(i=e.dateCreated)!==null&&i!==void 0?i:d,messageTimestamp:(a=e.messageTimestamp)!==null&&a!==void 0?a:d,published:e.published,datePublished:e.datePublished,dataFormat:e.dataFormat};e.published===!0&&e.datePublished===void 0&&(l.datePublished=d),go(l);const c=e.recordId,u=yield io.computeCid(l),h=yield Rr.createAttestation(u,e.attestationSigners),y=yield Rr.createEncryptionProperty(l,e.encryptionInput),p={recordId:c,descriptor:l};h!==void 0&&(p.attestation=h),y!==void 0&&(p.encryption=y);const f=new Rr(p,e.parentContextId);return e.signer!==void 0&&(yield f.sign({signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId,protocolRole:e.protocolRole})),f})}static getRecordIdFromContextId(e){return e?.split("/").filter(r=>r!=="").pop()}static createFrom(e){var r,n,i,a;return kr(this,void 0,void 0,function*(){const o=e.recordsWriteMessage,s=yield Rr.parse(o),d=br.getCurrentTimestamp(),l=(r=e.published)!==null&&r!==void 0?r:e.datePublished?!0:o.descriptor.published;let c;e.datePublished?c=e.datePublished:l&&(o.descriptor.published?c=o.descriptor.datePublished:c=d);const u={recipient:o.descriptor.recipient,recordId:o.recordId,dateCreated:o.descriptor.dateCreated,protocol:o.descriptor.protocol,protocolPath:o.descriptor.protocolPath,schema:o.descriptor.schema,parentContextId:cn.getParentContextFromOfContextId(o.contextId),messageTimestamp:(n=e.messageTimestamp)!==null&&n!==void 0?n:d,published:l,datePublished:c,tags:e.tags,data:e.data,dataCid:e.data?void 0:o.descriptor.dataCid,dataSize:e.data?void 0:o.descriptor.dataSize,dataFormat:(i=e.dataFormat)!==null&&i!==void 0?i:o.descriptor.dataFormat,protocolRole:(a=e.protocolRole)!==null&&a!==void 0?a:s.signaturePayload.protocolRole,delegatedGrant:e.delegatedGrant,signer:e.signer,attestationSigners:e.attestationSigners};return yield Rr.create(u)})}toJSON(){return this.message}encryptSymmetricEncryptionKey(e){return kr(this,void 0,void 0,function*(){this._message.encryption=yield Rr.createEncryptionProperty(this._message.descriptor,e),delete this._message.authorization,this._signaturePayload=void 0,this._author=void 0})}sign(e){var r;return kr(this,void 0,void 0,function*(){const{signer:n,delegatedGrant:i,permissionGrantId:a,protocolRole:o}=e;let s,d;i!==void 0?(s=yield Fe.getCid(i),d=Fr.getSignerDid(i.authorization.signature.signatures[0])):d=Fr.extractDid(n.keyId);const l=this._message.descriptor,c=yield io.computeCid(l);this._message.recordId=(r=this._message.recordId)!==null&&r!==void 0?r:yield Rr.getEntryId(d,l),this._message.descriptor.protocol!==void 0&&(this.parentContextId===void 0||this.parentContextId===""?this._message.contextId=this._message.recordId:this._message.contextId=this.parentContextId+"/"+this._message.recordId);const u=yield Rr.createSignerSignature({recordId:this._message.recordId,contextId:this._message.contextId,descriptorCid:c,attestation:this._message.attestation,encryption:this._message.encryption,signer:n,delegatedGrantId:s,permissionGrantId:a,protocolRole:o});this._message.authorization={signature:u},i!==void 0&&(this._message.authorization.authorDelegatedGrant=i),this._signaturePayload=Fr.decodePlainObjectPayload(u),this._author=d})}signAsOwner(e){return kr(this,void 0,void 0,function*(){if(this._author===void 0)throw new Pe(Te.RecordsWriteSignAsOwnerUnknownAuthor,"Unable to sign as owner without message signature because owner needs to sign over `recordId` which depends on author DID.");const r=this._message.descriptor,n=yield Fe.createSignature(r,e);this._message.authorization.ownerSignature=n,this._ownerSignaturePayload=Fr.decodePlainObjectPayload(n),this._owner=Fr.extractDid(e.keyId)})}signAsOwnerDelegate(e,r){return kr(this,void 0,void 0,function*(){if(this._author===void 0)throw new Pe(Te.RecordsWriteSignAsOwnerDelegateUnknownAuthor,"Unable to sign as owner delegate without message signature because owner delegate needs to sign over `recordId` which depends on author DID.");const n=yield Fe.getCid(r),i=this._message.descriptor,a=yield Fe.createSignature(i,e,{delegatedGrantId:n});this._message.authorization.ownerSignature=a,this._message.authorization.ownerDelegatedGrant=r,this._ownerSignaturePayload=Fr.decodePlainObjectPayload(a),this._owner=Fr.getSignerDid(r.authorization.signature.signatures[0])})}validateIntegrity(){return kr(this,void 0,void 0,function*(){if(yield this.isInitialWrite()){const n=this.message.descriptor.dateCreated,i=this.message.descriptor.messageTimestamp;if(i!==n)throw new Pe(Te.RecordsWriteValidateIntegrityDateCreatedMismatch,`messageTimestamp ${i} must match dateCreated ${n} for the initial write`);if(this.message.descriptor.protocol!==void 0&&this.message.descriptor.parentId===void 0){const a=yield this.getEntryId();if(this.message.contextId!==a)throw new Pe(Te.RecordsWriteValidateIntegrityContextIdMismatch,`contextId in message: ${this.message.contextId} does not match deterministic contextId: ${a}`)}}const r=this.signaturePayload;if(this.message.recordId!==r.recordId)throw new Pe(Te.RecordsWriteValidateIntegrityRecordIdUnauthorized,`recordId in message ${this.message.recordId} does not match recordId in authorization: ${r.recordId}`);if(this.message.contextId!==r.contextId)throw new Pe(Te.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload,`contextId in message ${this.message.contextId} does not match contextId in authorization: ${r.contextId}`);if(yield cn.validateDelegatedGrantReferentialIntegrity(this.message,r,this.ownerSignaturePayload),r.attestationCid!==void 0){const n=yield io.computeCid(this.message.attestation),i=r.attestationCid;if(i!==n)throw new Pe(Te.RecordsWriteValidateIntegrityAttestationMismatch,`CID ${n} of attestation property in message does not match attestationCid in authorization: ${i}`)}if(r.encryptionCid!==void 0){const n=yield io.computeCid(this.message.encryption),i=r.encryptionCid;if(i!==n)throw new Pe(Te.RecordsWriteValidateIntegrityEncryptionCidMismatch,`CID ${n} of encryption property in message does not match encryptionCid in authorization: ${i}`)}this.message.descriptor.protocol!==void 0&&Fd(this.message.descriptor.protocol),this.message.descriptor.schema!==void 0&&xw(this.message.descriptor.schema),br.validateTimestamp(this.message.descriptor.messageTimestamp),br.validateTimestamp(this.message.descriptor.dateCreated),this.message.descriptor.datePublished&&br.validateTimestamp(this.message.descriptor.datePublished)})}static validateAttestationIntegrity(e){return kr(this,void 0,void 0,function*(){if(e.attestation===void 0)return;if(e.attestation.signatures.length!==1)throw new Pe(Te.RecordsWriteAttestationIntegrityMoreThanOneSignature,`Currently implementation only supports 1 attester, but got ${e.attestation.signatures.length}`);const r=Fr.decodePlainObjectPayload(e.attestation),{descriptorCid:n}=r,i=yield io.computeCid(e.descriptor);if(n!==i)throw new Pe(Te.RecordsWriteAttestationIntegrityDescriptorCidMismatch,`descriptorCid ${n} does not match expected descriptorCid ${i}`);const a=Object.keys(r).length;if(a>1)throw new Pe(Te.RecordsWriteAttestationIntegrityInvalidPayloadProperty,`Only 'descriptorCid' is allowed in attestation payload, but got ${a} properties.`)})}getEntryId(){return kr(this,void 0,void 0,function*(){return yield Rr.getEntryId(this.author,this.message.descriptor)})}static getEntryId(e,r){return kr(this,void 0,void 0,function*(){if(e===void 0)throw new Pe(Te.RecordsWriteGetEntryIdUndefinedAuthor,"Property `author` is needed to compute entry ID.");const n=Object.assign({},r);return n.author=e,yield io.computeCid(n)})}isInitialWrite(){return kr(this,void 0,void 0,function*(){return(yield this.getEntryId())===this.message.recordId})}constructIndexes(e){return kr(this,void 0,void 0,function*(){const r=this.message,n=r.descriptor,{tags:i}=n,a=aY(n,["tags"]);delete a.published;let o=Object.assign(Object.assign({},a),{isLatestBaseState:e,published:!!r.descriptor.published,author:this.author,recordId:r.recordId,entryId:yield Rr.getEntryId(this.author,this.message.descriptor)});if(i!==void 0&&e===!0){const s=cn.buildTagIndexes(Object.assign({},i));o=Object.assign(Object.assign({},o),s)}return this.attesters.length>0&&(o.attester=this.attesters[0]),r.contextId!==void 0&&(o.contextId=r.contextId),o})}authorizeAuthorDelegate(e){return kr(this,void 0,void 0,function*(){const r=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Ys.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})})}authorizeOwnerDelegate(e){return kr(this,void 0,void 0,function*(){const r=yield ms.parse(this.message.authorization.ownerDelegatedGrant);yield Ys.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.owner,expectedGrantee:this.ownerSignatureSigner,permissionGrant:r,messageStore:e})})}static isInitialWrite(e){return kr(this,void 0,void 0,function*(){if(e.descriptor.interface!==bi.Records||e.descriptor.method!==Xn.Write)return!1;const r=e,n=Fe.getAuthor(r);return(yield Rr.getEntryId(n,r.descriptor))===r.recordId})}static createEncryptionProperty(e,r){var n,i;return kr(this,void 0,void 0,function*(){if(r===void 0)return;const a=[];for(const s of r.keyEncryptionInputs){if(s.derivationScheme===ao.ProtocolPath&&e.protocol===void 0)throw new Pe(Te.RecordsWriteMissingProtocol,"`protocols` encryption scheme cannot be applied to record without the `protocol` property.");if(s.derivationScheme===ao.Schemas&&e.schema===void 0)throw new Pe(Te.RecordsWriteMissingSchema,"`schemas` encryption scheme cannot be applied to record without the `schema` property.");const d=hs.publicJwkToBytes(s.publicKey),l=yield Xp.eciesSecp256k1Encrypt(d,r.key),c=ft.bytesToBase64Url(l.ciphertext),u=yield hs.publicKeyToJwk(l.ephemeralPublicKey),h=ft.bytesToBase64Url(l.initializationVector),y=ft.bytesToBase64Url(l.messageAuthenticationCode),p={rootKeyId:s.publicKeyId,algorithm:(n=s.algorithm)!==null&&n!==void 0?n:l0.EciesSecp256k1,derivationScheme:s.derivationScheme,ephemeralPublicKey:u,initializationVector:h,messageAuthenticationCode:y,encryptedKey:c};s.derivationScheme===ao.ProtocolContext&&(p.derivedPublicKey=s.publicKey),a.push(p)}return{algorithm:(i=r.algorithm)!==null&&i!==void 0?i:l0.Aes256Ctr,initializationVector:ft.bytesToBase64Url(r.initializationVector),keyEncryption:a}})}static createAttestation(e,r){return kr(this,void 0,void 0,function*(){if(r===void 0||r.length===0)return;const n={descriptorCid:e},i=ft.objectToBytes(n);return(yield Qp.create(i,r)).getJws()})}static createSignerSignature(e){return kr(this,void 0,void 0,function*(){const{recordId:r,contextId:n,descriptorCid:i,attestation:a,encryption:o,signer:s,delegatedGrantId:d,permissionGrantId:l,protocolRole:c}=e,u=a?yield io.computeCid(a):void 0,h=o?yield io.computeCid(o):void 0,y={recordId:r,descriptorCid:i,contextId:n,attestationCid:u,encryptionCid:h,delegatedGrantId:d,permissionGrantId:l,protocolRole:c};go(y);const p=ft.objectToBytes(y);return(yield Qp.create(p,[s])).getJws()})}static getInitialWrite(e){return kr(this,void 0,void 0,function*(){for(const r of e)if(yield Rr.isInitialWrite(r))return r;throw new Pe(Te.RecordsWriteGetInitialWriteNotFound,"Initial write is not found.")})}static verifyEqualityOfImmutableProperties(e,r){const n=["dataCid","dataSize","dataFormat","datePublished","published","messageTimestamp","tags"];let i=[];i.push(...Object.keys(e.descriptor)),i.push(...Object.keys(r.descriptor)),i=[...new Set(i)];for(const a of i)if(n.indexOf(a)===-1){const o=e.descriptor[a],s=r.descriptor[a];if(s!==o)throw new Pe(Te.RecordsWriteImmutablePropertyChanged,`${a} is an immutable property: cannot change '${o}' to '${s}'`)}return!0}static getAttesters(e){var r,n;return((n=(r=e.attestation)===null||r===void 0?void 0:r.signatures)!==null&&n!==void 0?n:[]).map(o=>Fr.getSignerDid(o))}static fetchNewestRecordsWrite(e,r,n){return kr(this,void 0,void 0,function*(){const i={interface:bi.Records,method:Xn.Write,recordId:n},{messages:a}=yield e.query(r,[i]),o=yield Fe.getNewestMessage(a);if(o!==void 0)return o;throw new Pe(Te.RecordsWriteGetNewestWriteRecordNotFound,"record not found")})}static fetchInitialRecordsWrite(e,r,n){return kr(this,void 0,void 0,function*(){const i={entryId:n},{messages:a}=yield e.query(r,[i]);return a.length===0?void 0:yield Rr.parse(a[0])})}}class bc{get message(){return this._message}get signer(){return this._signer}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get isSignedByAuthorDelegate(){return Fe.isSignedByAuthorDelegate(this._message)}constructor(e){this._message=e,e.authorization!==void 0&&(this._signer=Fe.getSigner(e),e.authorization.authorDelegatedGrant!==void 0?this._author=Fe.getSigner(e.authorization.authorDelegatedGrant):this._author=this._signer,this._signaturePayload=Fr.decodePlainObjectPayload(e.authorization.signature))}toJSON(){return this.message}}var vv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class A0 extends bc{static parse(e){return vv(this,void 0,void 0,function*(){if(e.descriptor.filter.published===!1&&(e.descriptor.dateSort===fd.PublishedAscending||e.descriptor.dateSort===fd.PublishedDescending))throw new Pe(Te.RecordsQueryParseFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.descriptor.dateSort}`);let r;if(e.authorization!==void 0&&(r=yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield cn.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new Pe(Te.RecordsQueryFilterMissingRequiredProperties,"Role-authorized queries must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&Fd(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&xw(e.descriptor.filter.schema),br.validateTimestamp(e.descriptor.messageTimestamp),new A0(e)})}static create(e){var r;return vv(this,void 0,void 0,function*(){const n={interface:bi.Records,method:Xn.Query,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp(),filter:cn.normalizeFilter(e.filter),dateSort:e.dateSort,pagination:e.pagination};if(e.filter.published===!1&&(e.dateSort===fd.PublishedAscending||e.dateSort===fd.PublishedDescending))throw new Pe(Te.RecordsQueryCreateFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.dateSort}`);go(n);const i=e.signer;let a;i&&(a=yield Fe.createAuthorization({descriptor:n,signer:i,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));const o={descriptor:n,authorization:a};return Fe.validateJsonSchema(o),new A0(o)})}authorizeDelegate(e){return vv(this,void 0,void 0,function*(){const r=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Ys.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantee:this.signer,expectedGrantor:this.author,permissionGrant:r,messageStore:e})})}}var cY=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};let dY=class Y6{static parse(e){return cY(this,void 0,void 0,function*(){return new Y6(e)})}constructor(e){this.id=e.recordId,this.requester=Fe.getSigner(e);const r=e.encodedData,n=ft.base64UrlToObject(r);this.delegated=n.delegated,this.description=n.description,this.scope=n.scope,this.conditions=n.conditions}};var Lh=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class er{static parseRequest(e){return ft.base64UrlToObject(e)}static createRequest(e){return Lh(this,void 0,void 0,function*(){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new Pe(Te.PermissionsProtocolCreateRequestRecordsScopeMissingProtocol,"Permission request for Records must have a scope with a `protocol` property");const r=er.normalizePermissionScope(e.scope),n={description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions};let i;this.hasProtocolScope(r)&&(i={protocol:r.protocol});const a=ft.objectToBytes(n),o=yield Rr.create({signer:e.signer,messageTimestamp:e.dateRequested,protocol:er.uri,protocolPath:er.requestPath,dataFormat:"application/json",data:a,tags:i}),s=Object.assign(Object.assign({},o.message),{encodedData:ft.bytesToBase64Url(a)});return{recordsWrite:o,permissionRequestData:n,permissionRequestBytes:a,dataEncodedMessage:s}})}static createGrant(e){return Lh(this,void 0,void 0,function*(){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new Pe(Te.PermissionsProtocolCreateGrantRecordsScopeMissingProtocol,"Permission grants for Records must have a scope with a `protocol` property");const r=er.normalizePermissionScope(e.scope),n={dateExpires:e.dateExpires,requestId:e.requestId,description:e.description,delegated:e.delegated,scope:r,conditions:e.conditions};let i;this.hasProtocolScope(r)&&(i={protocol:r.protocol});const a=ft.objectToBytes(n),o=yield Rr.create({signer:e.signer,messageTimestamp:e.dateGranted,dateCreated:e.dateGranted,recipient:e.grantedTo,protocol:er.uri,protocolPath:er.grantPath,dataFormat:"application/json",data:a,tags:i}),s=Object.assign(Object.assign({},o.message),{encodedData:ft.bytesToBase64Url(a)});return{recordsWrite:o,permissionGrantData:n,permissionGrantBytes:a,dataEncodedMessage:s}})}static createRevocation(e){return Lh(this,void 0,void 0,function*(){const r={description:e.description},n=e.grant.id;let i;this.hasProtocolScope(e.grant.scope)&&(i={protocol:kd(e.grant.scope.protocol)});const a=ft.objectToBytes(r),o=yield Rr.create({signer:e.signer,parentContextId:n,protocol:er.uri,protocolPath:er.revocationPath,dataFormat:"application/json",data:a,tags:i}),s=Object.assign(Object.assign({},o.message),{encodedData:ft.bytesToBase64Url(a)});return{recordsWrite:o,permissionRevocationData:r,permissionRevocationBytes:a,dataEncodedMessage:s}})}static validateSchema(e,r){const n=ft.bytesToString(r),i=JSON.parse(n);if(e.descriptor.protocolPath===er.requestPath){const a=i;Ap("PermissionRequestData",a),er.validateScopeAndTags(a.scope,e)}else if(e.descriptor.protocolPath===er.grantPath){Ap("PermissionGrantData",i);const a=i;er.validateScopeAndTags(a.scope,e),br.validateTimestamp(a.dateExpires)}else if(e.descriptor.protocolPath===er.revocationPath)Ap("PermissionRevocationData",i);else throw new Pe(Te.PermissionsProtocolValidateSchemaUnexpectedRecord,`Unexpected permission record: ${e.descriptor.protocolPath}`)}static fetchGrant(e,r,n){return Lh(this,void 0,void 0,function*(){const i={recordId:n,isLatestBaseState:!0},{messages:a}=yield r.query(e,[i]),o=a[0],s=o?.descriptor.interface,d=o?.descriptor.method;if(s!==bi.Records||d!==Xn.Write||o.descriptor.protocolPath!==er.grantPath)throw new Pe(Te.GrantAuthorizationGrantMissing,`Could not find permission grant with record ID ${n}.`);const l=o;return yield ms.parse(l)})}static getScopeFromPermissionRecord(e,r,n){return Lh(this,void 0,void 0,function*(){if(n.descriptor.protocol!==er.uri)throw new Pe(Te.PermissionsProtocolGetScopeInvalidProtocol,`Unexpected protocol for permission record: ${n.descriptor.protocol}`);return n.descriptor.protocolPath===er.revocationPath?(yield er.fetchGrant(e,r,n.descriptor.parentId)).scope:n.descriptor.protocolPath===er.grantPath?(yield ms.parse(n)).scope:(yield dY.parse(n)).scope})}static normalizePermissionScope(e){const r=Object.assign({},e);return er.hasProtocolScope(r)&&(r.protocol=kd(r.protocol)),r}static isRecordPermissionScope(e){return e.interface==="Records"}static hasProtocolScope(e){return"protocol"in e&&e.protocol!==void 0}static validateTags(e,r){if(e.descriptor.tags===void 0||e.descriptor.tags.protocol===void 0)throw new Pe(Te.PermissionsProtocolValidateScopeMissingProtocolTag,"Permission grants must have a `tags` property that contains a protocol tag");const n=e.descriptor.tags.protocol;if(n!==r)throw new Pe(Te.PermissionsProtocolValidateScopeProtocolMismatch,`Permission grants must have a scope with a protocol that matches the tagged protocol: ${n}`)}static validateScopeAndTags(e,r){if(this.hasProtocolScope(e)&&(Fd(e.protocol),this.validateTags(r,e.protocol)),!!this.isRecordPermissionScope(e)&&e.contextId!==void 0&&e.protocolPath!==void 0)throw new Pe(Te.PermissionsProtocolValidateScopeContextIdProhibitedProperties,"Permission grants cannot have both `contextId` and `protocolPath` present")}}er.uri="https://tbd.website/dwn/permissions";er.requestPath="request";er.grantPath="grant";er.revocationPath="grant/revocation";er.definition={published:!0,protocol:er.uri,types:{request:{dataFormats:["application/json"]},grant:{dataFormats:["application/json"]},revocation:{dataFormats:["application/json"]}},structure:{request:{$size:{max:1e4},$actions:[{who:"anyone",can:["create"]}]},grant:{$size:{max:1e4},$actions:[{who:"recipient",of:"grant",can:["read","query"]}],revocation:{$size:{max:1e4},$actions:[{who:"anyone",can:["read"]}]}}}};class lY{static normalizeFilters(e){const r=[];for(const n of e){const i=n.protocol!==void 0?kd(n.protocol):void 0,a=Object.assign(Object.assign({},n),{protocol:i});go(a),JG(a)||r.push(a)}return r}static convertFilters(e){const r=[];for(const n of e){const i=this.constructPermissionRecordsFilter(n);i&&r.push(i),r.push(this.convertFilter(n))}return r}static constructPermissionRecordsFilter(e){const{protocol:r,messageTimestamp:n}=e;if(r!==void 0){const i=Object.assign({protocol:er.uri},cn.convertTagsFilter({protocol:r}));if(n!=null){const a=bl.convertRangeCriterion(n);a&&(i.messageTimestamp=a)}return i}}static convertFilter(e){const r=Object.assign({},e),{messageTimestamp:n}=e,i=n?bl.convertRangeCriterion(n):void 0;return i&&(r.messageTimestamp=i,delete r.dateUpdated),r}}var lx=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class P0 extends bc{static parse(e){return lx(this,void 0,void 0,function*(){Fe.validateJsonSchema(e),yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor);for(const r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&Fd(r.protocol);return new P0(e)})}static create(e){var r;return lx(this,void 0,void 0,function*(){const n={interface:bi.Messages,method:Xn.Query,filters:e.filters?lY.normalizeFilters(e.filters):[],messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp(),cursor:e.cursor};go(n);const{permissionGrantId:i,signer:a}=e,o=yield Fe.createAuthorization({descriptor:n,signer:a,permissionGrantId:i}),s={descriptor:n,authorization:o};return Fe.validateJsonSchema(s),new P0(s)})}}var ux=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class jp extends bc{static parse(e){return ux(this,void 0,void 0,function*(){return Fe.validateJsonSchema(e),this.validateMessageCid(e.descriptor.messageCid),yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor),br.validateTimestamp(e.descriptor.messageTimestamp),new jp(e)})}static create(e){var r;return ux(this,void 0,void 0,function*(){const n={interface:bi.Messages,method:Xn.Read,messageCid:e.messageCid,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp()},{signer:i,permissionGrantId:a}=e,o=yield Fe.createAuthorization({descriptor:n,signer:i,permissionGrantId:a}),s={descriptor:n,authorization:o};return Fe.validateJsonSchema(s),jp.validateMessageCid(e.messageCid),new jp(s)})}static validateMessageCid(e){try{io.parseCid(e)}catch{throw new Pe(Te.MessagesReadInvalidCid,`${e} is not a valid CID`)}}}var fx=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class x0 extends bc{static parse(e){return fx(this,void 0,void 0,function*(){Fe.validateJsonSchema(e),yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor);for(const r of e.descriptor.filters)"protocol"in r&&r.protocol!==void 0&&Fd(r.protocol);return br.validateTimestamp(e.descriptor.messageTimestamp),new x0(e)})}static create(e){var r,n;return fx(this,void 0,void 0,function*(){const i=br.getCurrentTimestamp(),a={interface:bi.Messages,method:Xn.Subscribe,filters:(r=e.filters)!==null&&r!==void 0?r:[],messageTimestamp:(n=e.messageTimestamp)!==null&&n!==void 0?n:i};go(a);const{permissionGrantId:o,signer:s}=e,d=yield Fe.createAuthorization({descriptor:a,signer:s,permissionGrantId:o}),l={descriptor:a,authorization:d};return Fe.validateJsonSchema(l),new x0(l)})}}var I_={exports:{}},Z6={},ys={},Gf={},Ky={},vt={},ny={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(b){if(super(),!t.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((m,w)=>`${m}${w}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((m,w)=>(w instanceof r&&(m[w.str]=(m[w.str]||0)+1),m),{})}}t._Code=n,t.nil=new n("");function i(v,...b){const m=[v[0]];let w=0;for(;w<b.length;)s(m,b[w]),m.push(v[++w]);return new n(m)}t._=i;const a=new n("+");function o(v,...b){const m=[y(v[0])];let w=0;for(;w<b.length;)m.push(a),s(m,b[w]),m.push(a,y(v[++w]));return d(m),new n(m)}t.str=o;function s(v,b){b instanceof n?v.push(...b._items):b instanceof r?v.push(b):v.push(u(b))}t.addCodeArg=s;function d(v){let b=1;for(;b<v.length-1;){if(v[b]===a){const m=l(v[b-1],v[b+1]);if(m!==void 0){v.splice(b-1,3,m);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof r||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof r))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:o`${v}${b}`}t.strConcat=c;function u(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:y(Array.isArray(v)?v.join(","):v)}function h(v){return new n(y(v))}t.stringify=h;function y(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=y;function p(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new n(`.${v}`):i`[${v}]`}t.getProperty=p;function f(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=f;function g(v){return new n(v.toString())}t.regexpCode=g})(ny);var k_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=ny;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof e.Name?l:this.name(l)}name(l){return new e.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,u;if(!((u=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||u===void 0)&&u.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}t.Scope=i;class a extends e.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:u}){this.value=l,this.scopePath=(0,e._)`.${new e.Name(c)}[${u}]`}}t.ValueScopeName=a;const o=(0,e._)`\n`;class s extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:e.nil}}get(){return this._scope}name(l){return new a(l,this._newName(l))}value(l,c){var u;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(l),{prefix:y}=h,p=(u=c.key)!==null&&u!==void 0?u:c.ref;let f=this._values[y];if(f){const b=f.get(p);if(b)return b}else f=this._values[y]=new Map;f.set(p,h);const g=this._scope[y]||(this._scope[y]=[]),v=g.length;return g[v]=c.ref,h.setValue(c,{property:y,itemIndex:v}),h}getValue(l,c){const u=this._values[l];if(u)return u.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,u=>{if(u.scopePath===void 0)throw new Error(`CodeGen: name "${u}" has no value`);return(0,e._)`${l}${u.scopePath}`})}scopeCode(l=this._values,c,u){return this._reduceValues(l,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},c,u)}_reduceValues(l,c,u={},h){let y=e.nil;for(const p in l){const f=l[p];if(!f)continue;const g=u[p]=u[p]||new Map;f.forEach(v=>{if(g.has(v))return;g.set(v,n.Started);let b=c(v);if(b){const m=this.opts.es5?t.varKinds.var:t.varKinds.const;y=(0,e._)`${y}${m} ${v} = ${b};${this.opts._n}`}else if(b=h?.(v))y=(0,e._)`${y}${b}${this.opts._n}`;else throw new r(v);g.set(v,n.Completed)})}return y}}t.ValueScope=s})(k_);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=ny,r=k_;var n=ny;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=k_;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class a{optimizeNodes(){return this}optimizeNames(N,W){return this}}class o extends a{constructor(N,W,O){super(),this.varKind=N,this.name=W,this.rhs=O}render({es5:N,_n:W}){const O=N?r.varKinds.var:this.varKind,F=this.rhs===void 0?"":` = ${this.rhs}`;return`${O} ${this.name}${F};`+W}optimizeNames(N,W){if(N[this.name.str])return this.rhs&&(this.rhs=oe(this.rhs,N,W)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class s extends a{constructor(N,W,O){super(),this.lhs=N,this.rhs=W,this.sideEffects=O}render({_n:N}){return`${this.lhs} = ${this.rhs};`+N}optimizeNames(N,W){if(!(this.lhs instanceof e.Name&&!N[this.lhs.str]&&!this.sideEffects))return this.rhs=oe(this.rhs,N,W),this}get names(){const N=this.lhs instanceof e.Name?{}:{...this.lhs.names};return z(N,this.rhs)}}class d extends s{constructor(N,W,O,F){super(N,O,F),this.op=W}render({_n:N}){return`${this.lhs} ${this.op}= ${this.rhs};`+N}}class l extends a{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`${this.label}:`+N}}class c extends a{constructor(N){super(),this.label=N,this.names={}}render({_n:N}){return`break${this.label?` ${this.label}`:""};`+N}}class u extends a{constructor(N){super(),this.error=N}render({_n:N}){return`throw ${this.error};`+N}get names(){return this.error.names}}class h extends a{constructor(N){super(),this.code=N}render({_n:N}){return`${this.code};`+N}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(N,W){return this.code=oe(this.code,N,W),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class y extends a{constructor(N=[]){super(),this.nodes=N}render(N){return this.nodes.reduce((W,O)=>W+O.render(N),"")}optimizeNodes(){const{nodes:N}=this;let W=N.length;for(;W--;){const O=N[W].optimizeNodes();Array.isArray(O)?N.splice(W,1,...O):O?N[W]=O:N.splice(W,1)}return N.length>0?this:void 0}optimizeNames(N,W){const{nodes:O}=this;let F=O.length;for(;F--;){const Y=O[F];Y.optimizeNames(N,W)||(C(N,Y.names),O.splice(F,1))}return O.length>0?this:void 0}get names(){return this.nodes.reduce((N,W)=>J(N,W.names),{})}}class p extends y{render(N){return"{"+N._n+super.render(N)+"}"+N._n}}class f extends y{}class g extends p{}g.kind="else";class v extends p{constructor(N,W){super(W),this.condition=N}render(N){let W=`if(${this.condition})`+super.render(N);return this.else&&(W+="else "+this.else.render(N)),W}optimizeNodes(){super.optimizeNodes();const N=this.condition;if(N===!0)return this.nodes;let W=this.else;if(W){const O=W.optimizeNodes();W=this.else=Array.isArray(O)?new g(O):O}if(W)return N===!1?W instanceof v?W:W.nodes:this.nodes.length?this:new v(V(N),W instanceof v?[W]:W.nodes);if(!(N===!1||!this.nodes.length))return this}optimizeNames(N,W){var O;if(this.else=(O=this.else)===null||O===void 0?void 0:O.optimizeNames(N,W),!!(super.optimizeNames(N,W)||this.else))return this.condition=oe(this.condition,N,W),this}get names(){const N=super.names;return z(N,this.condition),this.else&&J(N,this.else.names),N}}v.kind="if";class b extends p{}b.kind="for";class m extends b{constructor(N){super(),this.iteration=N}render(N){return`for(${this.iteration})`+super.render(N)}optimizeNames(N,W){if(super.optimizeNames(N,W))return this.iteration=oe(this.iteration,N,W),this}get names(){return J(super.names,this.iteration.names)}}class w extends b{constructor(N,W,O,F){super(),this.varKind=N,this.name=W,this.from=O,this.to=F}render(N){const W=N.es5?r.varKinds.var:this.varKind,{name:O,from:F,to:Y}=this;return`for(${W} ${O}=${F}; ${O}<${Y}; ${O}++)`+super.render(N)}get names(){const N=z(super.names,this.from);return z(N,this.to)}}class S extends b{constructor(N,W,O,F){super(),this.loop=N,this.varKind=W,this.name=O,this.iterable=F}render(N){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(N)}optimizeNames(N,W){if(super.optimizeNames(N,W))return this.iterable=oe(this.iterable,N,W),this}get names(){return J(super.names,this.iterable.names)}}class T extends p{constructor(N,W,O){super(),this.name=N,this.args=W,this.async=O}render(N){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(N)}}T.kind="func";class x extends y{render(N){return"return "+super.render(N)}}x.kind="return";class I extends p{render(N){let W="try"+super.render(N);return this.catch&&(W+=this.catch.render(N)),this.finally&&(W+=this.finally.render(N)),W}optimizeNodes(){var N,W;return super.optimizeNodes(),(N=this.catch)===null||N===void 0||N.optimizeNodes(),(W=this.finally)===null||W===void 0||W.optimizeNodes(),this}optimizeNames(N,W){var O,F;return super.optimizeNames(N,W),(O=this.catch)===null||O===void 0||O.optimizeNames(N,W),(F=this.finally)===null||F===void 0||F.optimizeNames(N,W),this}get names(){const N=super.names;return this.catch&&J(N,this.catch.names),this.finally&&J(N,this.finally.names),N}}class M extends p{constructor(N){super(),this.error=N}render(N){return`catch(${this.error})`+super.render(N)}}M.kind="catch";class H extends p{render(N){return"finally"+super.render(N)}}H.kind="finally";class re{constructor(N,W={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...W,_n:W.lines?`
`:""},this._extScope=N,this._scope=new r.Scope({parent:N}),this._nodes=[new f]}toString(){return this._root.render(this.opts)}name(N){return this._scope.name(N)}scopeName(N){return this._extScope.name(N)}scopeValue(N,W){const O=this._extScope.value(N,W);return(this._values[O.prefix]||(this._values[O.prefix]=new Set)).add(O),O}getScopeValue(N,W){return this._extScope.getValue(N,W)}scopeRefs(N){return this._extScope.scopeRefs(N,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(N,W,O,F){const Y=this._scope.toName(W);return O!==void 0&&F&&(this._constants[Y.str]=O),this._leafNode(new o(N,Y,O)),Y}const(N,W,O){return this._def(r.varKinds.const,N,W,O)}let(N,W,O){return this._def(r.varKinds.let,N,W,O)}var(N,W,O){return this._def(r.varKinds.var,N,W,O)}assign(N,W,O){return this._leafNode(new s(N,W,O))}add(N,W){return this._leafNode(new d(N,t.operators.ADD,W))}code(N){return typeof N=="function"?N():N!==e.nil&&this._leafNode(new h(N)),this}object(...N){const W=["{"];for(const[O,F]of N)W.length>1&&W.push(","),W.push(O),(O!==F||this.opts.es5)&&(W.push(":"),(0,e.addCodeArg)(W,F));return W.push("}"),new e._Code(W)}if(N,W,O){if(this._blockNode(new v(N)),W&&O)this.code(W).else().code(O).endIf();else if(W)this.code(W).endIf();else if(O)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(N){return this._elseNode(new v(N))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(N,W){return this._blockNode(N),W&&this.code(W).endFor(),this}for(N,W){return this._for(new m(N),W)}forRange(N,W,O,F,Y=this.opts.es5?r.varKinds.var:r.varKinds.let){const ee=this._scope.toName(N);return this._for(new w(Y,ee,W,O),()=>F(ee))}forOf(N,W,O,F=r.varKinds.const){const Y=this._scope.toName(N);if(this.opts.es5){const ee=W instanceof e.Name?W:this.var("_arr",W);return this.forRange("_i",0,(0,e._)`${ee}.length`,te=>{this.var(Y,(0,e._)`${ee}[${te}]`),O(Y)})}return this._for(new S("of",F,Y,W),()=>O(Y))}forIn(N,W,O,F=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(N,(0,e._)`Object.keys(${W})`,O);const Y=this._scope.toName(N);return this._for(new S("in",F,Y,W),()=>O(Y))}endFor(){return this._endBlockNode(b)}label(N){return this._leafNode(new l(N))}break(N){return this._leafNode(new c(N))}return(N){const W=new x;if(this._blockNode(W),this.code(N),W.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(N,W,O){if(!W&&!O)throw new Error('CodeGen: "try" without "catch" and "finally"');const F=new I;if(this._blockNode(F),this.code(N),W){const Y=this.name("e");this._currNode=F.catch=new M(Y),W(Y)}return O&&(this._currNode=F.finally=new H,this.code(O)),this._endBlockNode(M,H)}throw(N){return this._leafNode(new u(N))}block(N,W){return this._blockStarts.push(this._nodes.length),N&&this.code(N).endBlock(W),this}endBlock(N){const W=this._blockStarts.pop();if(W===void 0)throw new Error("CodeGen: not in self-balancing block");const O=this._nodes.length-W;if(O<0||N!==void 0&&O!==N)throw new Error(`CodeGen: wrong number of nodes: ${O} vs ${N} expected`);return this._nodes.length=W,this}func(N,W=e.nil,O,F){return this._blockNode(new T(N,W,O)),F&&this.code(F).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(N=1){for(;N-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(N){return this._currNode.nodes.push(N),this}_blockNode(N){this._currNode.nodes.push(N),this._nodes.push(N)}_endBlockNode(N,W){const O=this._currNode;if(O instanceof N||W&&O instanceof W)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${W?`${N.kind}/${W.kind}`:N.kind}"`)}_elseNode(N){const W=this._currNode;if(!(W instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=W.else=N,this}get _root(){return this._nodes[0]}get _currNode(){const N=this._nodes;return N[N.length-1]}set _currNode(N){const W=this._nodes;W[W.length-1]=N}}t.CodeGen=re;function J(Z,N){for(const W in N)Z[W]=(Z[W]||0)+(N[W]||0);return Z}function z(Z,N){return N instanceof e._CodeOrName?J(Z,N.names):Z}function oe(Z,N,W){if(Z instanceof e.Name)return O(Z);if(!F(Z))return Z;return new e._Code(Z._items.reduce((Y,ee)=>(ee instanceof e.Name&&(ee=O(ee)),ee instanceof e._Code?Y.push(...ee._items):Y.push(ee),Y),[]));function O(Y){const ee=W[Y.str];return ee===void 0||N[Y.str]!==1?Y:(delete N[Y.str],ee)}function F(Y){return Y instanceof e._Code&&Y._items.some(ee=>ee instanceof e.Name&&N[ee.str]===1&&W[ee.str]!==void 0)}}function C(Z,N){for(const W in N)Z[W]=(Z[W]||0)-(N[W]||0)}function V(Z){return typeof Z=="boolean"||typeof Z=="number"||Z===null?!Z:(0,e._)`!${G(Z)}`}t.not=V;const q=D(t.operators.AND);function Q(...Z){return Z.reduce(q)}t.and=Q;const R=D(t.operators.OR);function B(...Z){return Z.reduce(R)}t.or=B;function D(Z){return(N,W)=>N===e.nil?W:W===e.nil?N:(0,e._)`${G(N)} ${Z} ${G(W)}`}function G(Z){return Z instanceof e.Name?Z:(0,e._)`(${Z})`}})(vt);var Bt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=vt,r=ny;function n(T){const x={};for(const I of T)x[I]=!0;return x}t.toHash=n;function i(T,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(a(T,x),!o(x,T.self.RULES.all))}t.alwaysValidSchema=i;function a(T,x=T.schema){const{opts:I,self:M}=T;if(!I.strictSchema||typeof x=="boolean")return;const H=M.RULES.keywords;for(const re in x)H[re]||S(T,`unknown keyword: "${re}"`)}t.checkUnknownRules=a;function o(T,x){if(typeof T=="boolean")return!T;for(const I in T)if(x[I])return!0;return!1}t.schemaHasRules=o;function s(T,x){if(typeof T=="boolean")return!T;for(const I in T)if(I!=="$ref"&&x.all[I])return!0;return!1}t.schemaHasRulesButRef=s;function d({topSchemaRef:T,schemaPath:x},I,M,H){if(!H){if(typeof I=="number"||typeof I=="boolean")return I;if(typeof I=="string")return(0,e._)`${I}`}return(0,e._)`${T}${x}${(0,e.getProperty)(M)}`}t.schemaRefOrVal=d;function l(T){return h(decodeURIComponent(T))}t.unescapeFragment=l;function c(T){return encodeURIComponent(u(T))}t.escapeFragment=c;function u(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=u;function h(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=h;function y(T,x){if(Array.isArray(T))for(const I of T)x(I);else x(T)}t.eachItem=y;function p({mergeNames:T,mergeToName:x,mergeValues:I,resultToName:M}){return(H,re,J,z)=>{const oe=J===void 0?re:J instanceof e.Name?(re instanceof e.Name?T(H,re,J):x(H,re,J),J):re instanceof e.Name?(x(H,J,re),re):I(re,J);return z===e.Name&&!(oe instanceof e.Name)?M(H,oe):oe}}t.mergeEvaluated={props:p({mergeNames:(T,x,I)=>T.if((0,e._)`${I} !== true && ${x} !== undefined`,()=>{T.if((0,e._)`${x} === true`,()=>T.assign(I,!0),()=>T.assign(I,(0,e._)`${I} || {}`).code((0,e._)`Object.assign(${I}, ${x})`))}),mergeToName:(T,x,I)=>T.if((0,e._)`${I} !== true`,()=>{x===!0?T.assign(I,!0):(T.assign(I,(0,e._)`${I} || {}`),g(T,I,x))}),mergeValues:(T,x)=>T===!0?!0:{...T,...x},resultToName:f}),items:p({mergeNames:(T,x,I)=>T.if((0,e._)`${I} !== true && ${x} !== undefined`,()=>T.assign(I,(0,e._)`${x} === true ? true : ${I} > ${x} ? ${I} : ${x}`)),mergeToName:(T,x,I)=>T.if((0,e._)`${I} !== true`,()=>T.assign(I,x===!0?!0:(0,e._)`${I} > ${x} ? ${I} : ${x}`)),mergeValues:(T,x)=>T===!0?!0:Math.max(T,x),resultToName:(T,x)=>T.var("items",x)})};function f(T,x){if(x===!0)return T.var("props",!0);const I=T.var("props",(0,e._)`{}`);return x!==void 0&&g(T,I,x),I}t.evaluatedPropsToName=f;function g(T,x,I){Object.keys(I).forEach(M=>T.assign((0,e._)`${x}${(0,e.getProperty)(M)}`,!0))}t.setEvaluated=g;const v={};function b(T,x){return T.scopeValue("func",{ref:x,code:v[x.code]||(v[x.code]=new r._Code(x.code))})}t.useFunc=b;var m;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(m=t.Type||(t.Type={}));function w(T,x,I){if(T instanceof e.Name){const M=x===m.Num;return I?M?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:M?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return I?(0,e.getProperty)(T).toString():"/"+u(T)}t.getErrorPath=w;function S(T,x,I=T.opts.strictSchema){if(I){if(x=`strict mode: ${x}`,I===!0)throw new Error(x);T.self.logger.warn(x)}}t.checkStrictMode=S})(Bt);var vo={};Object.defineProperty(vo,"__esModule",{value:!0});const ni=vt,uY={data:new ni.Name("data"),valCxt:new ni.Name("valCxt"),instancePath:new ni.Name("instancePath"),parentData:new ni.Name("parentData"),parentDataProperty:new ni.Name("parentDataProperty"),rootData:new ni.Name("rootData"),dynamicAnchors:new ni.Name("dynamicAnchors"),vErrors:new ni.Name("vErrors"),errors:new ni.Name("errors"),this:new ni.Name("this"),self:new ni.Name("self"),scope:new ni.Name("scope"),json:new ni.Name("json"),jsonPos:new ni.Name("jsonPos"),jsonLen:new ni.Name("jsonLen"),jsonPart:new ni.Name("jsonPart")};vo.default=uY;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=vt,r=Bt,n=vo;t.keywordError={message:({keyword:g})=>(0,e.str)`must pass "${g}" keyword validation`},t.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,e.str)`"${g}" keyword must be ${v} ($data)`:(0,e.str)`"${g}" keyword is invalid ($data)`};function i(g,v=t.keywordError,b,m){const{it:w}=g,{gen:S,compositeRule:T,allErrors:x}=w,I=u(g,v,b);m??(T||x)?d(S,I):l(w,(0,e._)`[${I}]`)}t.reportError=i;function a(g,v=t.keywordError,b){const{it:m}=g,{gen:w,compositeRule:S,allErrors:T}=m,x=u(g,v,b);d(w,x),S||T||l(m,n.default.vErrors)}t.reportExtraError=a;function o(g,v){g.assign(n.default.errors,v),g.if((0,e._)`${n.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,e._)`${n.default.vErrors}.length`,v),()=>g.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function s({gen:g,keyword:v,schemaValue:b,data:m,errsCount:w,it:S}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,n.default.errors,x=>{g.const(T,(0,e._)`${n.default.vErrors}[${x}]`),g.if((0,e._)`${T}.instancePath === undefined`,()=>g.assign((0,e._)`${T}.instancePath`,(0,e.strConcat)(n.default.instancePath,S.errorPath))),g.assign((0,e._)`${T}.schemaPath`,(0,e.str)`${S.errSchemaPath}/${v}`),S.opts.verbose&&(g.assign((0,e._)`${T}.schema`,b),g.assign((0,e._)`${T}.data`,m))})}t.extendErrors=s;function d(g,v){const b=g.const("err",v);g.if((0,e._)`${n.default.vErrors} === null`,()=>g.assign(n.default.vErrors,(0,e._)`[${b}]`),(0,e._)`${n.default.vErrors}.push(${b})`),g.code((0,e._)`${n.default.errors}++`)}function l(g,v){const{gen:b,validateName:m,schemaEnv:w}=g;w.$async?b.throw((0,e._)`new ${g.ValidationError}(${v})`):(b.assign((0,e._)`${m}.errors`,v),b.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function u(g,v,b){const{createErrors:m}=g.it;return m===!1?(0,e._)`{}`:h(g,v,b)}function h(g,v,b={}){const{gen:m,it:w}=g,S=[y(w,b),p(g,b)];return f(g,v,S),m.object(...S)}function y({errorPath:g},{instancePath:v}){const b=v?(0,e.str)`${g}${(0,r.getErrorPath)(v,r.Type.Str)}`:g;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:m}){let w=m?v:(0,e.str)`${v}/${g}`;return b&&(w=(0,e.str)`${w}${(0,r.getErrorPath)(b,r.Type.Str)}`),[c.schemaPath,w]}function f(g,{params:v,message:b},m){const{keyword:w,data:S,schemaValue:T,it:x}=g,{opts:I,propertyName:M,topSchemaRef:H,schemaPath:re}=x;m.push([c.keyword,w],[c.params,typeof v=="function"?v(g):v||(0,e._)`{}`]),I.messages&&m.push([c.message,typeof b=="function"?b(g):b]),I.verbose&&m.push([c.schema,T],[c.parentSchema,(0,e._)`${H}${re}`],[n.default.data,S]),M&&m.push([c.propertyName,M])}})(Ky);Object.defineProperty(Gf,"__esModule",{value:!0});Gf.boolOrEmptySchema=Gf.topBoolOrEmptySchema=void 0;const fY=Ky,hY=vt,pY=vo,yY={message:"boolean schema is false"};function mY(t){const{gen:e,schema:r,validateName:n}=t;r===!1?X6(t,!1):typeof r=="object"&&r.$async===!0?e.return(pY.default.data):(e.assign((0,hY._)`${n}.errors`,null),e.return(!0))}Gf.topBoolOrEmptySchema=mY;function gY(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),X6(t)):r.var(e,!0)}Gf.boolOrEmptySchema=gY;function X6(t,e){const{gen:r,data:n}=t,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,fY.reportError)(i,yY,void 0,e)}var Vy={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.getRules=cu.isJSONType=void 0;const wY=["string","number","integer","boolean","null","object","array"],bY=new Set(wY);function vY(t){return typeof t=="string"&&bY.has(t)}cu.isJSONType=vY;function _Y(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}cu.getRules=_Y;var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.shouldUseRule=tc.shouldUseGroup=tc.schemaHasRulesForType=void 0;function EY({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&Q6(t,n)}tc.schemaHasRulesForType=EY;function Q6(t,e){return e.rules.some(r=>J6(t,r))}tc.shouldUseGroup=Q6;function J6(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}tc.shouldUseRule=J6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=cu,r=tc,n=Ky,i=vt,a=Bt;var o;(function(m){m[m.Correct=0]="Correct",m[m.Wrong=1]="Wrong"})(o=t.DataType||(t.DataType={}));function s(m){const w=d(m.type);if(w.includes("null")){if(m.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&m.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');m.nullable===!0&&w.push("null")}return w}t.getSchemaTypes=s;function d(m){const w=Array.isArray(m)?m:m?[m]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}t.getJSONTypes=d;function l(m,w){const{gen:S,data:T,opts:x}=m,I=u(w,x.coerceTypes),M=w.length>0&&!(I.length===0&&w.length===1&&(0,r.schemaHasRulesForType)(m,w[0]));if(M){const H=f(w,T,x.strictNumbers,o.Wrong);S.if(H,()=>{I.length?h(m,w,I):v(m)})}return M}t.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function u(m,w){return w?m.filter(S=>c.has(S)||w==="array"&&S==="array"):[]}function h(m,w,S){const{gen:T,data:x,opts:I}=m,M=T.let("dataType",(0,i._)`typeof ${x}`),H=T.let("coerced",(0,i._)`undefined`);I.coerceTypes==="array"&&T.if((0,i._)`${M} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>T.assign(x,(0,i._)`${x}[0]`).assign(M,(0,i._)`typeof ${x}`).if(f(w,x,I.strictNumbers),()=>T.assign(H,x))),T.if((0,i._)`${H} !== undefined`);for(const J of S)(c.has(J)||J==="array"&&I.coerceTypes==="array")&&re(J);T.else(),v(m),T.endIf(),T.if((0,i._)`${H} !== undefined`,()=>{T.assign(x,H),y(m,H)});function re(J){switch(J){case"string":T.elseIf((0,i._)`${M} == "number" || ${M} == "boolean"`).assign(H,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(H,(0,i._)`""`);return;case"number":T.elseIf((0,i._)`${M} == "boolean" || ${x} === null
              || (${M} == "string" && ${x} && ${x} == +${x})`).assign(H,(0,i._)`+${x}`);return;case"integer":T.elseIf((0,i._)`${M} === "boolean" || ${x} === null
              || (${M} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(H,(0,i._)`+${x}`);return;case"boolean":T.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(H,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(H,!0);return;case"null":T.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),T.assign(H,null);return;case"array":T.elseIf((0,i._)`${M} === "string" || ${M} === "number"
              || ${M} === "boolean" || ${x} === null`).assign(H,(0,i._)`[${x}]`)}}}function y({gen:m,parentData:w,parentDataProperty:S},T){m.if((0,i._)`${w} !== undefined`,()=>m.assign((0,i._)`${w}[${S}]`,T))}function p(m,w,S,T=o.Correct){const x=T===o.Correct?i.operators.EQ:i.operators.NEQ;let I;switch(m){case"null":return(0,i._)`${w} ${x} null`;case"array":I=(0,i._)`Array.isArray(${w})`;break;case"object":I=(0,i._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":I=M((0,i._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":I=M();break;default:return(0,i._)`typeof ${w} ${x} ${m}`}return T===o.Correct?I:(0,i.not)(I);function M(H=i.nil){return(0,i.and)((0,i._)`typeof ${w} == "number"`,H,S?(0,i._)`isFinite(${w})`:i.nil)}}t.checkDataType=p;function f(m,w,S,T){if(m.length===1)return p(m[0],w,S,T);let x;const I=(0,a.toHash)(m);if(I.array&&I.object){const M=(0,i._)`typeof ${w} != "object"`;x=I.null?M:(0,i._)`!${w} || ${M}`,delete I.null,delete I.array,delete I.object}else x=i.nil;I.number&&delete I.integer;for(const M in I)x=(0,i.and)(x,p(M,w,S,T));return x}t.checkDataTypes=f;const g={message:({schema:m})=>`must be ${m}`,params:({schema:m,schemaValue:w})=>typeof m=="string"?(0,i._)`{type: ${m}}`:(0,i._)`{type: ${w}}`};function v(m){const w=b(m);(0,n.reportError)(w,g)}t.reportTypeError=v;function b(m){const{gen:w,data:S,schema:T}=m,x=(0,a.schemaRefOrVal)(m,T,"type");return{gen:w,keyword:"type",data:S,schema:T.type,schemaCode:x,schemaValue:x,parentSchema:T,params:{},it:m}}})(Vy);var Hw={};Object.defineProperty(Hw,"__esModule",{value:!0});Hw.assignDefaults=void 0;const Lu=vt,SY=Bt;function $Y(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const i in r)hx(t,i,r[i].default);else e==="array"&&Array.isArray(n)&&n.forEach((i,a)=>hx(t,a,i.default))}Hw.assignDefaults=$Y;function hx(t,e,r){const{gen:n,compositeRule:i,data:a,opts:o}=t;if(r===void 0)return;const s=(0,Lu._)`${a}${(0,Lu.getProperty)(e)}`;if(i){(0,SY.checkStrictMode)(t,`default is ignored for: ${s}`);return}let d=(0,Lu._)`${s} === undefined`;o.useDefaults==="empty"&&(d=(0,Lu._)`${d} || ${s} === null || ${s} === ""`),n.if(d,(0,Lu._)`${s} = ${(0,Lu.stringify)(r)}`)}var Gs={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.validateUnion=kt.validateArray=kt.usePattern=kt.callValidateCode=kt.schemaProperties=kt.allSchemaProperties=kt.noPropertyInData=kt.propertyInData=kt.isOwnProperty=kt.hasPropFunc=kt.reportMissingProp=kt.checkMissingProp=kt.checkReportMissingProp=void 0;const wr=vt,lS=Bt,Mc=vo,TY=Bt;function AY(t,e){const{gen:r,data:n,it:i}=t;r.if(fS(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,wr._)`${e}`},!0),t.error()})}kt.checkReportMissingProp=AY;function PY({gen:t,data:e,it:{opts:r}},n,i){return(0,wr.or)(...n.map(a=>(0,wr.and)(fS(t,e,a,r.ownProperties),(0,wr._)`${i} = ${a}`)))}kt.checkMissingProp=PY;function xY(t,e){t.setParams({missingProperty:e},!0),t.error()}kt.reportMissingProp=xY;function ej(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,wr._)`Object.prototype.hasOwnProperty`})}kt.hasPropFunc=ej;function uS(t,e,r){return(0,wr._)`${ej(t)}.call(${e}, ${r})`}kt.isOwnProperty=uS;function IY(t,e,r,n){const i=(0,wr._)`${e}${(0,wr.getProperty)(r)} !== undefined`;return n?(0,wr._)`${i} && ${uS(t,e,r)}`:i}kt.propertyInData=IY;function fS(t,e,r,n){const i=(0,wr._)`${e}${(0,wr.getProperty)(r)} === undefined`;return n?(0,wr.or)(i,(0,wr.not)(uS(t,e,r))):i}kt.noPropertyInData=fS;function tj(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}kt.allSchemaProperties=tj;function kY(t,e){return tj(e).filter(r=>!(0,lS.alwaysValidSchema)(t,e[r]))}kt.schemaProperties=kY;function OY({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:a},it:o},s,d,l){const c=l?(0,wr._)`${t}, ${e}, ${n}${i}`:e,u=[[Mc.default.instancePath,(0,wr.strConcat)(Mc.default.instancePath,a)],[Mc.default.parentData,o.parentData],[Mc.default.parentDataProperty,o.parentDataProperty],[Mc.default.rootData,Mc.default.rootData]];o.opts.dynamicRef&&u.push([Mc.default.dynamicAnchors,Mc.default.dynamicAnchors]);const h=(0,wr._)`${c}, ${r.object(...u)}`;return d!==wr.nil?(0,wr._)`${s}.call(${d}, ${h})`:(0,wr._)`${s}(${h})`}kt.callValidateCode=OY;const RY=(0,wr._)`new RegExp`;function jY({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,a=i(r,n);return t.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,wr._)`${i.code==="new RegExp"?RY:(0,TY.useFunc)(t,i)}(${r}, ${n})`})}kt.usePattern=jY;function CY(t){const{gen:e,data:r,keyword:n,it:i}=t,a=e.name("valid");if(i.allErrors){const s=e.let("valid",!0);return o(()=>e.assign(s,!1)),s}return e.var(a,!0),o(()=>e.break()),a;function o(s){const d=e.const("len",(0,wr._)`${r}.length`);e.forRange("i",0,d,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:lS.Type.Num},a),e.if((0,wr.not)(a),s)})}}kt.validateArray=CY;function NY(t){const{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,lS.alwaysValidSchema)(i,d))&&!i.opts.unevaluated)return;const o=e.let("valid",!1),s=e.name("_valid");e.block(()=>r.forEach((d,l)=>{const c=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},s);e.assign(o,(0,wr._)`${o} || ${s}`),t.mergeValidEvaluated(c,s)||e.if((0,wr.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}kt.validateUnion=NY;Object.defineProperty(Gs,"__esModule",{value:!0});Gs.validateKeywordUsage=Gs.validSchemaType=Gs.funcKeywordCode=Gs.macroKeywordCode=void 0;const Ai=vt,_l=vo,BY=kt,DY=Ky;function MY(t,e){const{gen:r,keyword:n,schema:i,parentSchema:a,it:o}=t,s=e.macro.call(o.self,i,a,o),d=rj(r,n,s);o.opts.validateSchema!==!1&&o.self.validateSchema(s,!0);const l=r.name("valid");t.subschema({schema:s,schemaPath:Ai.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:d,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}Gs.macroKeywordCode=MY;function LY(t,e){var r;const{gen:n,keyword:i,schema:a,parentSchema:o,$data:s,it:d}=t;FY(d,e);const l=!s&&e.compile?e.compile.call(d.self,a,o,d):e.validate,c=rj(n,i,l),u=n.let("valid");t.block$data(u,h),t.ok((r=e.valid)!==null&&r!==void 0?r:u);function h(){if(e.errors===!1)f(),e.modifying&&px(t),g(()=>t.error());else{const v=e.async?y():p();e.modifying&&px(t),g(()=>UY(t,v))}}function y(){const v=n.let("ruleErrs",null);return n.try(()=>f((0,Ai._)`await `),b=>n.assign(u,!1).if((0,Ai._)`${b} instanceof ${d.ValidationError}`,()=>n.assign(v,(0,Ai._)`${b}.errors`),()=>n.throw(b))),v}function p(){const v=(0,Ai._)`${c}.errors`;return n.assign(v,null),f(Ai.nil),v}function f(v=e.async?(0,Ai._)`await `:Ai.nil){const b=d.opts.passContext?_l.default.this:_l.default.self,m=!("compile"in e&&!s||e.schema===!1);n.assign(u,(0,Ai._)`${v}${(0,BY.callValidateCode)(t,c,b,m)}`,e.modifying)}function g(v){var b;n.if((0,Ai.not)((b=e.valid)!==null&&b!==void 0?b:u),v)}}Gs.funcKeywordCode=LY;function px(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Ai._)`${n.parentData}[${n.parentDataProperty}]`))}function UY(t,e){const{gen:r}=t;r.if((0,Ai._)`Array.isArray(${e})`,()=>{r.assign(_l.default.vErrors,(0,Ai._)`${_l.default.vErrors} === null ? ${e} : ${_l.default.vErrors}.concat(${e})`).assign(_l.default.errors,(0,Ai._)`${_l.default.vErrors}.length`),(0,DY.extendErrors)(t)},()=>t.error())}function FY({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function rj(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ai.stringify)(r)})}function zY(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Gs.validSchemaType=zY;function qY({schema:t,opts:e,self:r,errSchemaPath:n},i,a){if(Array.isArray(i.keyword)?!i.keyword.includes(a):i.keyword!==a)throw new Error("ajv implementation error");const o=i.dependencies;if(o?.some(s=>!Object.prototype.hasOwnProperty.call(t,s)))throw new Error(`parent schema must have dependencies of ${a}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[a])){const d=`keyword "${a}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}Gs.validateKeywordUsage=qY;var bd={};Object.defineProperty(bd,"__esModule",{value:!0});bd.extendSubschemaMode=bd.extendSubschemaData=bd.getSubschema=void 0;const Vs=vt,nj=Bt;function KY(t,{keyword:e,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:a,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const s=t.schema[e];return r===void 0?{schema:s,schemaPath:(0,Vs._)`${t.schemaPath}${(0,Vs.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:s[r],schemaPath:(0,Vs._)`${t.schemaPath}${(0,Vs.getProperty)(e)}${(0,Vs.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,nj.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||a===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}bd.getSubschema=KY;function VY(t,e,{dataProp:r,dataPropType:n,data:i,dataTypes:a,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=e;if(r!==void 0){const{errorPath:l,dataPathArr:c,opts:u}=e,h=s.let("data",(0,Vs._)`${e.data}${(0,Vs.getProperty)(r)}`,!0);d(h),t.errorPath=(0,Vs.str)`${l}${(0,nj.getErrorPath)(r,n,u.jsPropertySyntax)}`,t.parentDataProperty=(0,Vs._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){const l=i instanceof Vs.Name?i:s.let("data",i,!0);d(l),o!==void 0&&(t.propertyName=o)}a&&(t.dataTypes=a);function d(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}bd.extendSubschemaData=VY;function HY(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:a}){n!==void 0&&(t.compositeRule=n),i!==void 0&&(t.createErrors=i),a!==void 0&&(t.allErrors=a),t.jtdDiscriminator=e,t.jtdMetadata=r}bd.extendSubschemaMode=HY;var Gn={},ij=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var o=a[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},oj={exports:{}},yd=oj.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};vg(e,n,i,t,"",t)};yd.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};yd.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};yd.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};yd.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function vg(t,e,r,n,i,a,o,s,d,l){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,a,o,s,d,l);for(var c in n){var u=n[c];if(Array.isArray(u)){if(c in yd.arrayKeywords)for(var h=0;h<u.length;h++)vg(t,e,r,u[h],i+"/"+c+"/"+h,a,i,c,n,h)}else if(c in yd.propsKeywords){if(u&&typeof u=="object")for(var y in u)vg(t,e,r,u[y],i+"/"+c+"/"+GY(y),a,i,c,n,y)}else(c in yd.keywords||t.allKeys&&!(c in yd.skipKeywords))&&vg(t,e,r,u,i+"/"+c,a,i,c,n)}r(n,i,a,o,s,d,l)}}function GY(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var WY=oj.exports;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getSchemaRefs=Gn.resolveUrl=Gn.normalizeId=Gn._getFullPath=Gn.getFullPath=Gn.inlineRef=void 0;const YY=Bt,ZY=ij,XY=WY,QY=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function JY(t,e=!0){return typeof t=="boolean"?!0:e===!0?!O_(t):e?sj(t)<=e:!1}Gn.inlineRef=JY;const eZ=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function O_(t){for(const e in t){if(eZ.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(O_)||typeof r=="object"&&O_(r))return!0}return!1}function sj(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!QY.has(r)&&(typeof t[r]=="object"&&(0,YY.eachItem)(t[r],n=>e+=sj(n)),e===1/0))return 1/0}return e}function aj(t,e="",r){r!==!1&&(e=Sf(e));const n=t.parse(e);return cj(t,n)}Gn.getFullPath=aj;function cj(t,e){return t.serialize(e).split("#")[0]+"#"}Gn._getFullPath=cj;const tZ=/#\/?$/;function Sf(t){return t?t.replace(tZ,""):""}Gn.normalizeId=Sf;function rZ(t,e,r){return r=Sf(r),t.resolve(e,r)}Gn.resolveUrl=rZ;const nZ=/^[a-z_][-a-z0-9._]*$/i;function iZ(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=Sf(t[r]||e),a={"":i},o=aj(n,i,!1),s={},d=new Set;return XY(t,{allKeys:!0},(u,h,y,p)=>{if(p===void 0)return;const f=o+h;let g=a[p];typeof u[r]=="string"&&(g=v.call(this,u[r])),b.call(this,u.$anchor),b.call(this,u.$dynamicAnchor),a[h]=g;function v(m){const w=this.opts.uriResolver.resolve;if(m=Sf(g?w(g,m):m),d.has(m))throw c(m);d.add(m);let S=this.refs[m];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(u,S.schema,m):m!==Sf(f)&&(m[0]==="#"?(l(u,s[m],m),s[m]=u):this.refs[m]=f),m}function b(m){if(typeof m=="string"){if(!nZ.test(m))throw new Error(`invalid anchor "${m}"`);v.call(this,`#${m}`)}}}),s;function l(u,h,y){if(h!==void 0&&!ZY(u,h))throw c(y)}function c(u){return new Error(`reference "${u}" resolves to more than one schema`)}}Gn.getSchemaRefs=iZ;Object.defineProperty(ys,"__esModule",{value:!0});ys.getData=ys.KeywordCxt=ys.validateFunctionCode=void 0;const dj=Gf,yx=Vy,hS=tc,I0=Vy,oZ=Hw,Cp=Gs,_v=bd,We=vt,pt=vo,sZ=Gn,rc=Bt,Uh=Ky;function aZ(t){if(fj(t)&&(hj(t),uj(t))){lZ(t);return}lj(t,()=>(0,dj.topBoolOrEmptySchema)(t))}ys.validateFunctionCode=aZ;function lj({gen:t,validateName:e,schema:r,schemaEnv:n,opts:i},a){i.code.es5?t.func(e,(0,We._)`${pt.default.data}, ${pt.default.valCxt}`,n.$async,()=>{t.code((0,We._)`"use strict"; ${mx(r,i)}`),dZ(t,i),t.code(a)}):t.func(e,(0,We._)`${pt.default.data}, ${cZ(i)}`,n.$async,()=>t.code(mx(r,i)).code(a))}function cZ(t){return(0,We._)`{${pt.default.instancePath}="", ${pt.default.parentData}, ${pt.default.parentDataProperty}, ${pt.default.rootData}=${pt.default.data}${t.dynamicRef?(0,We._)`, ${pt.default.dynamicAnchors}={}`:We.nil}}={}`}function dZ(t,e){t.if(pt.default.valCxt,()=>{t.var(pt.default.instancePath,(0,We._)`${pt.default.valCxt}.${pt.default.instancePath}`),t.var(pt.default.parentData,(0,We._)`${pt.default.valCxt}.${pt.default.parentData}`),t.var(pt.default.parentDataProperty,(0,We._)`${pt.default.valCxt}.${pt.default.parentDataProperty}`),t.var(pt.default.rootData,(0,We._)`${pt.default.valCxt}.${pt.default.rootData}`),e.dynamicRef&&t.var(pt.default.dynamicAnchors,(0,We._)`${pt.default.valCxt}.${pt.default.dynamicAnchors}`)},()=>{t.var(pt.default.instancePath,(0,We._)`""`),t.var(pt.default.parentData,(0,We._)`undefined`),t.var(pt.default.parentDataProperty,(0,We._)`undefined`),t.var(pt.default.rootData,pt.default.data),e.dynamicRef&&t.var(pt.default.dynamicAnchors,(0,We._)`{}`)})}function lZ(t){const{schema:e,opts:r,gen:n}=t;lj(t,()=>{r.$comment&&e.$comment&&yj(t),yZ(t),n.let(pt.default.vErrors,null),n.let(pt.default.errors,0),r.unevaluated&&uZ(t),pj(t),wZ(t)})}function uZ(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,We._)`${r}.evaluated`),e.if((0,We._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,We._)`${t.evaluated}.props`,(0,We._)`undefined`)),e.if((0,We._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,We._)`${t.evaluated}.items`,(0,We._)`undefined`))}function mx(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,We._)`/*# sourceURL=${r} */`:We.nil}function fZ(t,e){if(fj(t)&&(hj(t),uj(t))){hZ(t,e);return}(0,dj.boolOrEmptySchema)(t,e)}function uj({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function fj(t){return typeof t.schema!="boolean"}function hZ(t,e){const{schema:r,gen:n,opts:i}=t;i.$comment&&r.$comment&&yj(t),mZ(t),gZ(t);const a=n.const("_errs",pt.default.errors);pj(t,a),n.var(e,(0,We._)`${a} === ${pt.default.errors}`)}function hj(t){(0,rc.checkUnknownRules)(t),pZ(t)}function pj(t,e){if(t.opts.jtd)return gx(t,[],!1,e);const r=(0,yx.getSchemaTypes)(t.schema),n=(0,yx.coerceAndCheckDataType)(t,r);gx(t,r,!n,e)}function pZ(t){const{schema:e,errSchemaPath:r,opts:n,self:i}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,rc.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function yZ(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,rc.checkStrictMode)(t,"default is ignored in the schema root")}function mZ(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,sZ.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function gZ(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function yj({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:i}){const a=r.$comment;if(i.$comment===!0)t.code((0,We._)`${pt.default.self}.logger.log(${a})`);else if(typeof i.$comment=="function"){const o=(0,We.str)`${n}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code((0,We._)`${pt.default.self}.opts.$comment(${a}, ${o}, ${s}.schema)`)}}function wZ(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:i,opts:a}=t;r.$async?e.if((0,We._)`${pt.default.errors} === 0`,()=>e.return(pt.default.data),()=>e.throw((0,We._)`new ${i}(${pt.default.vErrors})`)):(e.assign((0,We._)`${n}.errors`,pt.default.vErrors),a.unevaluated&&bZ(t),e.return((0,We._)`${pt.default.errors} === 0`))}function bZ({gen:t,evaluated:e,props:r,items:n}){r instanceof We.Name&&t.assign((0,We._)`${e}.props`,r),n instanceof We.Name&&t.assign((0,We._)`${e}.items`,n)}function gx(t,e,r,n){const{gen:i,schema:a,data:o,allErrors:s,opts:d,self:l}=t,{RULES:c}=l;if(a.$ref&&(d.ignoreKeywordsWithRef||!(0,rc.schemaHasRulesButRef)(a,c))){i.block(()=>wj(t,"$ref",c.all.$ref.definition));return}d.jtd||vZ(t,e),i.block(()=>{for(const h of c.rules)u(h);u(c.post)});function u(h){(0,hS.shouldUseGroup)(a,h)&&(h.type?(i.if((0,I0.checkDataType)(h.type,o,d.strictNumbers)),wx(t,h),e.length===1&&e[0]===h.type&&r&&(i.else(),(0,I0.reportTypeError)(t)),i.endIf()):wx(t,h),s||i.if((0,We._)`${pt.default.errors} === ${n||0}`))}}function wx(t,e){const{gen:r,schema:n,opts:{useDefaults:i}}=t;i&&(0,oZ.assignDefaults)(t,e.type),r.block(()=>{for(const a of e.rules)(0,hS.shouldUseRule)(n,a)&&wj(t,a.keyword,a.definition,e.type)})}function vZ(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(_Z(t,e),t.opts.allowUnionTypes||EZ(t,e),SZ(t,t.dataTypes))}function _Z(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{mj(t.dataTypes,r)||pS(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),TZ(t,e)}}function EZ(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&pS(t,"use allowUnionTypes to allow union type keyword")}function SZ(t,e){const r=t.self.RULES.all;for(const n in r){const i=r[n];if(typeof i=="object"&&(0,hS.shouldUseRule)(t.schema,i)){const{type:a}=i.definition;a.length&&!a.some(o=>$Z(e,o))&&pS(t,`missing type "${a.join(",")}" for keyword "${n}"`)}}}function $Z(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function mj(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function TZ(t,e){const r=[];for(const n of t.dataTypes)mj(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function pS(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,rc.checkStrictMode)(t,e,t.opts.strictTypes)}class gj{constructor(e,r,n){if((0,Cp.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,rc.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",bj(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Cp.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",pt.default.errors))}result(e,r,n){this.failResult((0,We.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,We.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,We._)`${r} !== undefined && (${(0,We.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Uh.reportExtraError:Uh.reportError)(this,this.def.error,r)}$dataError(){(0,Uh.reportError)(this,this.def.$dataError||Uh.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Uh.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=We.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=We.nil,r=We.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:a,def:o}=this;n.if((0,We.or)((0,We._)`${i} === undefined`,r)),e!==We.nil&&n.assign(e,!0),(a.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==We.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:i,it:a}=this;return(0,We.or)(o(),s());function o(){if(n.length){if(!(r instanceof We.Name))throw new Error("ajv implementation error");const d=Array.isArray(n)?n:[n];return(0,We._)`${(0,I0.checkDataTypes)(d,r,a.opts.strictNumbers,I0.DataType.Wrong)}`}return We.nil}function s(){if(i.validateSchema){const d=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,We._)`!${d}(${r})`}return We.nil}}subschema(e,r){const n=(0,_v.getSubschema)(this.it,e);(0,_v.extendSubschemaData)(n,this.it,e),(0,_v.extendSubschemaMode)(n,e);const i={...this.it,...n,items:void 0,props:void 0};return fZ(i,r),i}mergeEvaluated(e,r){const{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=rc.mergeEvaluated.props(i,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=rc.mergeEvaluated.items(i,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(e,We.Name)),!0}}ys.KeywordCxt=gj;function wj(t,e,r,n){const i=new gj(t,r,e);"code"in r?r.code(i,n):i.$data&&r.validate?(0,Cp.funcKeywordCode)(i,r):"macro"in r?(0,Cp.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Cp.funcKeywordCode)(i,r)}const AZ=/^\/(?:[^~]|~0|~1)*$/,PZ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bj(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let i,a;if(t==="")return pt.default.rootData;if(t[0]==="/"){if(!AZ.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,a=pt.default.rootData}else{const l=PZ.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=e)throw new Error(d("property/index",c));return n[e-c]}if(c>e)throw new Error(d("data",c));if(a=r[e-c],!i)return a}let o=a;const s=i.split("/");for(const l of s)l&&(a=(0,We._)`${a}${(0,We.getProperty)((0,rc.unescapeJsonPointer)(l))}`,o=(0,We._)`${o} && ${a}`);return o;function d(l,c){return`Cannot access ${l} ${c} levels up, current level is ${e}`}}ys.getData=bj;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});class xZ extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Hy.default=xZ;var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});const Ev=Gn;class IZ extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ev.resolveUrl)(e,r,n),this.missingSchema=(0,Ev.normalizeId)((0,Ev.getFullPath)(e,this.missingRef))}}Gy.default=IZ;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.resolveSchema=Ri.getCompilingSchema=Ri.resolveRef=Ri.compileSchema=Ri.SchemaEnv=void 0;const Qo=vt,kZ=Hy,Qd=vo,fs=Gn,bx=Bt,OZ=ys;class Gw{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,fs.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}}Ri.SchemaEnv=Gw;function yS(t){const e=vj.call(this,t);if(e)return e;const r=(0,fs.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:a}=this.opts,o=new Qo.CodeGen(this.scope,{es5:n,lines:i,ownProperties:a});let s;t.$async&&(s=o.scopeValue("Error",{ref:kZ.default,code:(0,Qo._)`require("ajv/dist/runtime/validation_error").default`}));const d=o.scopeName("validate");t.validateName=d;const l={gen:o,allErrors:this.opts.allErrors,data:Qd.default.data,parentData:Qd.default.parentData,parentDataProperty:Qd.default.parentDataProperty,dataNames:[Qd.default.data],dataPathArr:[Qo.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Qo.stringify)(t.schema)}:{ref:t.schema}),validateName:d,ValidationError:s,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Qo.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Qo._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,OZ.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const u=o.toString();c=`${o.scopeRefs(Qd.default.scope)}return ${u}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const y=new Function(`${Qd.default.self}`,`${Qd.default.scope}`,c)(this,this.scope.get());if(this.scope.value(d,{ref:y}),y.errors=null,y.schema=t.schema,y.schemaEnv=t,t.$async&&(y.$async=!0),this.opts.code.source===!0&&(y.source={validateName:d,validateCode:u,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:f}=l;y.evaluated={props:p instanceof Qo.Name?void 0:p,items:f instanceof Qo.Name?void 0:f,dynamicProps:p instanceof Qo.Name,dynamicItems:f instanceof Qo.Name},y.source&&(y.source.evaluated=(0,Qo.stringify)(y.evaluated))}return t.validate=y,t}catch(u){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),u}finally{this._compilations.delete(t)}}Ri.compileSchema=yS;function RZ(t,e,r){var n;r=(0,fs.resolveUrl)(this.opts.uriResolver,e,r);const i=t.refs[r];if(i)return i;let a=NZ.call(this,t,r);if(a===void 0){const o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:s}=this.opts;o&&(a=new Gw({schema:o,schemaId:s,root:t,baseId:e}))}if(a!==void 0)return t.refs[r]=jZ.call(this,a)}Ri.resolveRef=RZ;function jZ(t){return(0,fs.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:yS.call(this,t)}function vj(t){for(const e of this._compilations)if(CZ(e,t))return e}Ri.getCompilingSchema=vj;function CZ(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function NZ(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ww.call(this,t,e)}function Ww(t,e){const r=this.opts.uriResolver.parse(e),n=(0,fs._getFullPath)(this.opts.uriResolver,r);let i=(0,fs.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return Sv.call(this,r,t);const a=(0,fs.normalizeId)(n),o=this.refs[a]||this.schemas[a];if(typeof o=="string"){const s=Ww.call(this,t,o);return typeof s?.schema!="object"?void 0:Sv.call(this,r,s)}if(typeof o?.schema=="object"){if(o.validate||yS.call(this,o),a===(0,fs.normalizeId)(e)){const{schema:s}=o,{schemaId:d}=this.opts,l=s[d];return l&&(i=(0,fs.resolveUrl)(this.opts.uriResolver,i,l)),new Gw({schema:s,schemaId:d,root:t,baseId:i})}return Sv.call(this,r,o)}}Ri.resolveSchema=Ww;const BZ=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Sv(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const s of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const d=r[(0,bx.unescapeFragment)(s)];if(d===void 0)return;r=d;const l=typeof r=="object"&&r[this.opts.schemaId];!BZ.has(s)&&l&&(e=(0,fs.resolveUrl)(this.opts.uriResolver,e,l))}let a;if(typeof r!="boolean"&&r.$ref&&!(0,bx.schemaHasRulesButRef)(r,this.RULES)){const s=(0,fs.resolveUrl)(this.opts.uriResolver,e,r.$ref);a=Ww.call(this,n,s)}const{schemaId:o}=this.opts;if(a=a||new Gw({schema:r,schemaId:o,root:n,baseId:e}),a.schema!==a.root.schema)return a}const DZ="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",MZ="Meta-schema for $data reference (JSON AnySchema extension proposal)",LZ="object",UZ=["$data"],FZ={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},zZ=!1,qZ={$id:DZ,description:MZ,type:LZ,required:UZ,properties:FZ,additionalProperties:zZ};var mS={},R_={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,n){n(e)})(ip,function(r){function n(){for(var he=arguments.length,le=Array(he),ye=0;ye<he;ye++)le[ye]=arguments[ye];if(le.length>1){le[0]=le[0].slice(0,-1);for(var _e=le.length-1,ve=1;ve<_e;++ve)le[ve]=le[ve].slice(1,-1);return le[_e]=le[_e].slice(1),le.join("")}else return le[0]}function i(he){return"(?:"+he+")"}function a(he){return he===void 0?"undefined":he===null?"null":Object.prototype.toString.call(he).split(" ").pop().split("]").shift().toLowerCase()}function o(he){return he.toUpperCase()}function s(he){return he!=null?he instanceof Array?he:typeof he.length!="number"||he.split||he.setInterval||he.call?[he]:Array.prototype.slice.call(he):[]}function d(he,le){var ye=he;if(le)for(var _e in le)ye[_e]=le[_e];return ye}function l(he){var le="[A-Za-z]",ye="[0-9]",_e=n(ye,"[A-Fa-f]"),ve=i(i("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+i("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+i("%"+_e+_e)),He="[\\:\\/\\?\\#\\[\\]\\@]",Ge="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",xt=n(He,Ge),Wt=he?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ir=he?"[\\uE000-\\uF8FF]":"[]",mt=n(le,ye,"[\\-\\.\\_\\~]",Wt);i(le+n(le,ye,"[\\+\\-\\.]")+"*"),i(i(ve+"|"+n(mt,Ge,"[\\:]"))+"*");var Dt=i(i("25[0-5]")+"|"+i("2[0-4]"+ye)+"|"+i("1"+ye+ye)+"|"+i("0?[1-9]"+ye)+"|0?0?"+ye),Lr=i(Dt+"\\."+Dt+"\\."+Dt+"\\."+Dt),gt=i(_e+"{1,4}"),vr=i(i(gt+"\\:"+gt)+"|"+Lr),Xr=i(i(gt+"\\:")+"{6}"+vr),_r=i("\\:\\:"+i(gt+"\\:")+"{5}"+vr),$c=i(i(gt)+"?\\:\\:"+i(gt+"\\:")+"{4}"+vr),Es=i(i(i(gt+"\\:")+"{0,1}"+gt)+"?\\:\\:"+i(gt+"\\:")+"{3}"+vr),Ss=i(i(i(gt+"\\:")+"{0,2}"+gt)+"?\\:\\:"+i(gt+"\\:")+"{2}"+vr),Ru=i(i(i(gt+"\\:")+"{0,3}"+gt)+"?\\:\\:"+gt+"\\:"+vr),Yd=i(i(i(gt+"\\:")+"{0,4}"+gt)+"?\\:\\:"+vr),Eo=i(i(i(gt+"\\:")+"{0,5}"+gt)+"?\\:\\:"+gt),$s=i(i(i(gt+"\\:")+"{0,6}"+gt)+"?\\:\\:"),Zd=i([Xr,_r,$c,Es,Ss,Ru,Yd,Eo,$s].join("|")),va=i(i(mt+"|"+ve)+"+");i("[vV]"+_e+"+\\."+n(mt,Ge,"[\\:]")+"+"),i(i(ve+"|"+n(mt,Ge))+"*");var Ph=i(ve+"|"+n(mt,Ge,"[\\:\\@]"));return i(i(ve+"|"+n(mt,Ge,"[\\@]"))+"+"),i(i(Ph+"|"+n("[\\/\\?]",ir))+"*"),{NOT_SCHEME:new RegExp(n("[^]",le,ye,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",mt,Ge),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",mt,Ge),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",mt,Ge),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",mt,Ge),"g"),NOT_QUERY:new RegExp(n("[^\\%]",mt,Ge,"[\\:\\@\\/\\?]",ir),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",mt,Ge,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",mt,Ge),"g"),UNRESERVED:new RegExp(mt,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",mt,xt),"g"),PCT_ENCODED:new RegExp(ve,"g"),IPV4ADDRESS:new RegExp("^("+Lr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Zd+")"+i(i("\\%25|\\%(?!"+_e+"{2})")+"("+va+")")+"?\\]?$")}}var c=l(!1),u=l(!0),h=function(){function he(le,ye){var _e=[],ve=!0,He=!1,Ge=void 0;try{for(var xt=le[Symbol.iterator](),Wt;!(ve=(Wt=xt.next()).done)&&(_e.push(Wt.value),!(ye&&_e.length===ye));ve=!0);}catch(ir){He=!0,Ge=ir}finally{try{!ve&&xt.return&&xt.return()}finally{if(He)throw Ge}}return _e}return function(le,ye){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return he(le,ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(he){if(Array.isArray(he)){for(var le=0,ye=Array(he.length);le<he.length;le++)ye[le]=he[le];return ye}else return Array.from(he)},p=2147483647,f=36,g=1,v=26,b=38,m=700,w=72,S=128,T="-",x=/^xn--/,I=/[^\0-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},re=f-g,J=Math.floor,z=String.fromCharCode;function oe(he){throw new RangeError(H[he])}function C(he,le){for(var ye=[],_e=he.length;_e--;)ye[_e]=le(he[_e]);return ye}function V(he,le){var ye=he.split("@"),_e="";ye.length>1&&(_e=ye[0]+"@",he=ye[1]),he=he.replace(M,".");var ve=he.split("."),He=C(ve,le).join(".");return _e+He}function q(he){for(var le=[],ye=0,_e=he.length;ye<_e;){var ve=he.charCodeAt(ye++);if(ve>=55296&&ve<=56319&&ye<_e){var He=he.charCodeAt(ye++);(He&64512)==56320?le.push(((ve&1023)<<10)+(He&1023)+65536):(le.push(ve),ye--)}else le.push(ve)}return le}var Q=function(le){return String.fromCodePoint.apply(String,y(le))},R=function(le){return le-48<10?le-22:le-65<26?le-65:le-97<26?le-97:f},B=function(le,ye){return le+22+75*(le<26)-((ye!=0)<<5)},D=function(le,ye,_e){var ve=0;for(le=_e?J(le/m):le>>1,le+=J(le/ye);le>re*v>>1;ve+=f)le=J(le/re);return J(ve+(re+1)*le/(le+b))},G=function(le){var ye=[],_e=le.length,ve=0,He=S,Ge=w,xt=le.lastIndexOf(T);xt<0&&(xt=0);for(var Wt=0;Wt<xt;++Wt)le.charCodeAt(Wt)>=128&&oe("not-basic"),ye.push(le.charCodeAt(Wt));for(var ir=xt>0?xt+1:0;ir<_e;){for(var mt=ve,Dt=1,Lr=f;;Lr+=f){ir>=_e&&oe("invalid-input");var gt=R(le.charCodeAt(ir++));(gt>=f||gt>J((p-ve)/Dt))&&oe("overflow"),ve+=gt*Dt;var vr=Lr<=Ge?g:Lr>=Ge+v?v:Lr-Ge;if(gt<vr)break;var Xr=f-vr;Dt>J(p/Xr)&&oe("overflow"),Dt*=Xr}var _r=ye.length+1;Ge=D(ve-mt,_r,mt==0),J(ve/_r)>p-He&&oe("overflow"),He+=J(ve/_r),ve%=_r,ye.splice(ve++,0,He)}return String.fromCodePoint.apply(String,ye)},Z=function(le){var ye=[];le=q(le);var _e=le.length,ve=S,He=0,Ge=w,xt=!0,Wt=!1,ir=void 0;try{for(var mt=le[Symbol.iterator](),Dt;!(xt=(Dt=mt.next()).done);xt=!0){var Lr=Dt.value;Lr<128&&ye.push(z(Lr))}}catch(xh){Wt=!0,ir=xh}finally{try{!xt&&mt.return&&mt.return()}finally{if(Wt)throw ir}}var gt=ye.length,vr=gt;for(gt&&ye.push(T);vr<_e;){var Xr=p,_r=!0,$c=!1,Es=void 0;try{for(var Ss=le[Symbol.iterator](),Ru;!(_r=(Ru=Ss.next()).done);_r=!0){var Yd=Ru.value;Yd>=ve&&Yd<Xr&&(Xr=Yd)}}catch(xh){$c=!0,Es=xh}finally{try{!_r&&Ss.return&&Ss.return()}finally{if($c)throw Es}}var Eo=vr+1;Xr-ve>J((p-He)/Eo)&&oe("overflow"),He+=(Xr-ve)*Eo,ve=Xr;var $s=!0,Zd=!1,va=void 0;try{for(var Ph=le[Symbol.iterator](),H$;!($s=(H$=Ph.next()).done);$s=!0){var G$=H$.value;if(G$<ve&&++He>p&&oe("overflow"),G$==ve){for(var im=He,om=f;;om+=f){var sm=om<=Ge?g:om>=Ge+v?v:om-Ge;if(im<sm)break;var W$=im-sm,Y$=f-sm;ye.push(z(B(sm+W$%Y$,0))),im=J(W$/Y$)}ye.push(z(B(im,0))),Ge=D(He,Eo,vr==gt),He=0,++vr}}}catch(xh){Zd=!0,va=xh}finally{try{!$s&&Ph.return&&Ph.return()}finally{if(Zd)throw va}}++He,++ve}return ye.join("")},N=function(le){return V(le,function(ye){return x.test(ye)?G(ye.slice(4).toLowerCase()):ye})},W=function(le){return V(le,function(ye){return I.test(ye)?"xn--"+Z(ye):ye})},O={version:"2.1.0",ucs2:{decode:q,encode:Q},decode:G,encode:Z,toASCII:W,toUnicode:N},F={};function Y(he){var le=he.charCodeAt(0),ye=void 0;return le<16?ye="%0"+le.toString(16).toUpperCase():le<128?ye="%"+le.toString(16).toUpperCase():le<2048?ye="%"+(le>>6|192).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase():ye="%"+(le>>12|224).toString(16).toUpperCase()+"%"+(le>>6&63|128).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase(),ye}function ee(he){for(var le="",ye=0,_e=he.length;ye<_e;){var ve=parseInt(he.substr(ye+1,2),16);if(ve<128)le+=String.fromCharCode(ve),ye+=3;else if(ve>=194&&ve<224){if(_e-ye>=6){var He=parseInt(he.substr(ye+4,2),16);le+=String.fromCharCode((ve&31)<<6|He&63)}else le+=he.substr(ye,6);ye+=6}else if(ve>=224){if(_e-ye>=9){var Ge=parseInt(he.substr(ye+4,2),16),xt=parseInt(he.substr(ye+7,2),16);le+=String.fromCharCode((ve&15)<<12|(Ge&63)<<6|xt&63)}else le+=he.substr(ye,9);ye+=9}else le+=he.substr(ye,3),ye+=3}return le}function te(he,le){function ye(_e){var ve=ee(_e);return ve.match(le.UNRESERVED)?ve:_e}return he.scheme&&(he.scheme=String(he.scheme).replace(le.PCT_ENCODED,ye).toLowerCase().replace(le.NOT_SCHEME,"")),he.userinfo!==void 0&&(he.userinfo=String(he.userinfo).replace(le.PCT_ENCODED,ye).replace(le.NOT_USERINFO,Y).replace(le.PCT_ENCODED,o)),he.host!==void 0&&(he.host=String(he.host).replace(le.PCT_ENCODED,ye).toLowerCase().replace(le.NOT_HOST,Y).replace(le.PCT_ENCODED,o)),he.path!==void 0&&(he.path=String(he.path).replace(le.PCT_ENCODED,ye).replace(he.scheme?le.NOT_PATH:le.NOT_PATH_NOSCHEME,Y).replace(le.PCT_ENCODED,o)),he.query!==void 0&&(he.query=String(he.query).replace(le.PCT_ENCODED,ye).replace(le.NOT_QUERY,Y).replace(le.PCT_ENCODED,o)),he.fragment!==void 0&&(he.fragment=String(he.fragment).replace(le.PCT_ENCODED,ye).replace(le.NOT_FRAGMENT,Y).replace(le.PCT_ENCODED,o)),he}function U(he){return he.replace(/^0*(.*)/,"$1")||"0"}function L(he,le){var ye=he.match(le.IPV4ADDRESS)||[],_e=h(ye,2),ve=_e[1];return ve?ve.split(".").map(U).join("."):he}function P(he,le){var ye=he.match(le.IPV6ADDRESS)||[],_e=h(ye,3),ve=_e[1],He=_e[2];if(ve){for(var Ge=ve.toLowerCase().split("::").reverse(),xt=h(Ge,2),Wt=xt[0],ir=xt[1],mt=ir?ir.split(":").map(U):[],Dt=Wt.split(":").map(U),Lr=le.IPV4ADDRESS.test(Dt[Dt.length-1]),gt=Lr?7:8,vr=Dt.length-gt,Xr=Array(gt),_r=0;_r<gt;++_r)Xr[_r]=mt[_r]||Dt[vr+_r]||"";Lr&&(Xr[gt-1]=L(Xr[gt-1],le));var $c=Xr.reduce(function(Eo,$s,Zd){if(!$s||$s==="0"){var va=Eo[Eo.length-1];va&&va.index+va.length===Zd?va.length++:Eo.push({index:Zd,length:1})}return Eo},[]),Es=$c.sort(function(Eo,$s){return $s.length-Eo.length})[0],Ss=void 0;if(Es&&Es.length>1){var Ru=Xr.slice(0,Es.index),Yd=Xr.slice(Es.index+Es.length);Ss=Ru.join(":")+"::"+Yd.join(":")}else Ss=Xr.join(":");return He&&(Ss+="%"+He),Ss}else return he}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,X="".match(/(){0}/)[1]===void 0;function ne(he){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye={},_e=le.iri!==!1?u:c;le.reference==="suffix"&&(he=(le.scheme?le.scheme+":":"")+"//"+he);var ve=he.match(j);if(ve){X?(ye.scheme=ve[1],ye.userinfo=ve[3],ye.host=ve[4],ye.port=parseInt(ve[5],10),ye.path=ve[6]||"",ye.query=ve[7],ye.fragment=ve[8],isNaN(ye.port)&&(ye.port=ve[5])):(ye.scheme=ve[1]||void 0,ye.userinfo=he.indexOf("@")!==-1?ve[3]:void 0,ye.host=he.indexOf("//")!==-1?ve[4]:void 0,ye.port=parseInt(ve[5],10),ye.path=ve[6]||"",ye.query=he.indexOf("?")!==-1?ve[7]:void 0,ye.fragment=he.indexOf("#")!==-1?ve[8]:void 0,isNaN(ye.port)&&(ye.port=he.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ve[4]:void 0)),ye.host&&(ye.host=P(L(ye.host,_e),_e)),ye.scheme===void 0&&ye.userinfo===void 0&&ye.host===void 0&&ye.port===void 0&&!ye.path&&ye.query===void 0?ye.reference="same-document":ye.scheme===void 0?ye.reference="relative":ye.fragment===void 0?ye.reference="absolute":ye.reference="uri",le.reference&&le.reference!=="suffix"&&le.reference!==ye.reference&&(ye.error=ye.error||"URI is not a "+le.reference+" reference.");var He=F[(le.scheme||ye.scheme||"").toLowerCase()];if(!le.unicodeSupport&&(!He||!He.unicodeSupport)){if(ye.host&&(le.domainHost||He&&He.domainHost))try{ye.host=O.toASCII(ye.host.replace(_e.PCT_ENCODED,ee).toLowerCase())}catch(Ge){ye.error=ye.error||"Host's domain name can not be converted to ASCII via punycode: "+Ge}te(ye,c)}else te(ye,_e);He&&He.parse&&He.parse(ye,le)}else ye.error=ye.error||"URI can not be parsed.";return ye}function ae(he,le){var ye=le.iri!==!1?u:c,_e=[];return he.userinfo!==void 0&&(_e.push(he.userinfo),_e.push("@")),he.host!==void 0&&_e.push(P(L(String(he.host),ye),ye).replace(ye.IPV6ADDRESS,function(ve,He,Ge){return"["+He+(Ge?"%25"+Ge:"")+"]"})),(typeof he.port=="number"||typeof he.port=="string")&&(_e.push(":"),_e.push(String(he.port))),_e.length?_e.join(""):void 0}var pe=/^\.\.?\//,we=/^\/\.(\/|$)/,Se=/^\/\.\.(\/|$)/,xe=/^\/?(?:.|\n)*?(?=\/|$)/;function Ee(he){for(var le=[];he.length;)if(he.match(pe))he=he.replace(pe,"");else if(he.match(we))he=he.replace(we,"/");else if(he.match(Se))he=he.replace(Se,"/"),le.pop();else if(he==="."||he==="..")he="";else{var ye=he.match(xe);if(ye){var _e=ye[0];he=he.slice(_e.length),le.push(_e)}else throw new Error("Unexpected dot segment condition")}return le.join("")}function Ne(he){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=le.iri?u:c,_e=[],ve=F[(le.scheme||he.scheme||"").toLowerCase()];if(ve&&ve.serialize&&ve.serialize(he,le),he.host&&!ye.IPV6ADDRESS.test(he.host)){if(le.domainHost||ve&&ve.domainHost)try{he.host=le.iri?O.toUnicode(he.host):O.toASCII(he.host.replace(ye.PCT_ENCODED,ee).toLowerCase())}catch(xt){he.error=he.error||"Host's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+xt}}te(he,ye),le.reference!=="suffix"&&he.scheme&&(_e.push(he.scheme),_e.push(":"));var He=ae(he,le);if(He!==void 0&&(le.reference!=="suffix"&&_e.push("//"),_e.push(He),he.path&&he.path.charAt(0)!=="/"&&_e.push("/")),he.path!==void 0){var Ge=he.path;!le.absolutePath&&(!ve||!ve.absolutePath)&&(Ge=Ee(Ge)),He===void 0&&(Ge=Ge.replace(/^\/\//,"/%2F")),_e.push(Ge)}return he.query!==void 0&&(_e.push("?"),_e.push(he.query)),he.fragment!==void 0&&(_e.push("#"),_e.push(he.fragment)),_e.join("")}function Qe(he,le){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments[3],ve={};return _e||(he=ne(Ne(he,ye),ye),le=ne(Ne(le,ye),ye)),ye=ye||{},!ye.tolerant&&le.scheme?(ve.scheme=le.scheme,ve.userinfo=le.userinfo,ve.host=le.host,ve.port=le.port,ve.path=Ee(le.path||""),ve.query=le.query):(le.userinfo!==void 0||le.host!==void 0||le.port!==void 0?(ve.userinfo=le.userinfo,ve.host=le.host,ve.port=le.port,ve.path=Ee(le.path||""),ve.query=le.query):(le.path?(le.path.charAt(0)==="/"?ve.path=Ee(le.path):((he.userinfo!==void 0||he.host!==void 0||he.port!==void 0)&&!he.path?ve.path="/"+le.path:he.path?ve.path=he.path.slice(0,he.path.lastIndexOf("/")+1)+le.path:ve.path=le.path,ve.path=Ee(ve.path)),ve.query=le.query):(ve.path=he.path,le.query!==void 0?ve.query=le.query:ve.query=he.query),ve.userinfo=he.userinfo,ve.host=he.host,ve.port=he.port),ve.scheme=he.scheme),ve.fragment=le.fragment,ve}function ie(he,le,ye){var _e=d({scheme:"null"},ye);return Ne(Qe(ne(he,_e),ne(le,_e),_e,!0),_e)}function ce(he,le){return typeof he=="string"?he=Ne(ne(he,le),le):a(he)==="object"&&(he=ne(Ne(he,le),le)),he}function K(he,le,ye){return typeof he=="string"?he=Ne(ne(he,ye),ye):a(he)==="object"&&(he=Ne(he,ye)),typeof le=="string"?le=Ne(ne(le,ye),ye):a(le)==="object"&&(le=Ne(le,ye)),he===le}function A(he,le){return he&&he.toString().replace(!le||!le.iri?c.ESCAPE:u.ESCAPE,Y)}function k(he,le){return he&&he.toString().replace(!le||!le.iri?c.PCT_ENCODED:u.PCT_ENCODED,ee)}var se={scheme:"http",domainHost:!0,parse:function(le,ye){return le.host||(le.error=le.error||"HTTP URIs must have a host."),le},serialize:function(le,ye){var _e=String(le.scheme).toLowerCase()==="https";return(le.port===(_e?443:80)||le.port==="")&&(le.port=void 0),le.path||(le.path="/"),le}},fe={scheme:"https",domainHost:se.domainHost,parse:se.parse,serialize:se.serialize};function me(he){return typeof he.secure=="boolean"?he.secure:String(he.scheme).toLowerCase()==="wss"}var be={scheme:"ws",domainHost:!0,parse:function(le,ye){var _e=le;return _e.secure=me(_e),_e.resourceName=(_e.path||"/")+(_e.query?"?"+_e.query:""),_e.path=void 0,_e.query=void 0,_e},serialize:function(le,ye){if((le.port===(me(le)?443:80)||le.port==="")&&(le.port=void 0),typeof le.secure=="boolean"&&(le.scheme=le.secure?"wss":"ws",le.secure=void 0),le.resourceName){var _e=le.resourceName.split("?"),ve=h(_e,2),He=ve[0],Ge=ve[1];le.path=He&&He!=="/"?He:void 0,le.query=Ge,le.resourceName=void 0}return le.fragment=void 0,le}},Je={scheme:"wss",domainHost:be.domainHost,parse:be.parse,serialize:be.serialize},_t={},Rt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",yt="[0-9A-Fa-f]",Pt=i(i("%[EFef]"+yt+"%"+yt+yt+"%"+yt+yt)+"|"+i("%[89A-Fa-f]"+yt+"%"+yt+yt)+"|"+i("%"+yt+yt)),Ec="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",vs="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",_s=n(vs,'[\\"\\\\]'),Wi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Yi=new RegExp(Rt,"g"),Sc=new RegExp(Pt,"g"),Th=new RegExp(n("[^]",Ec,"[\\.]",'[\\"]',_s),"g"),Ah=new RegExp(n("[^]",Rt,Wi),"g"),de=Ah;function ue(he){var le=ee(he);return le.match(Yi)?le:he}var Ie={scheme:"mailto",parse:function(le,ye){var _e=le,ve=_e.to=_e.path?_e.path.split(","):[];if(_e.path=void 0,_e.query){for(var He=!1,Ge={},xt=_e.query.split("&"),Wt=0,ir=xt.length;Wt<ir;++Wt){var mt=xt[Wt].split("=");switch(mt[0]){case"to":for(var Dt=mt[1].split(","),Lr=0,gt=Dt.length;Lr<gt;++Lr)ve.push(Dt[Lr]);break;case"subject":_e.subject=k(mt[1],ye);break;case"body":_e.body=k(mt[1],ye);break;default:He=!0,Ge[k(mt[0],ye)]=k(mt[1],ye);break}}He&&(_e.headers=Ge)}_e.query=void 0;for(var vr=0,Xr=ve.length;vr<Xr;++vr){var _r=ve[vr].split("@");if(_r[0]=k(_r[0]),ye.unicodeSupport)_r[1]=k(_r[1],ye).toLowerCase();else try{_r[1]=O.toASCII(k(_r[1],ye).toLowerCase())}catch($c){_e.error=_e.error||"Email address's domain name can not be converted to ASCII via punycode: "+$c}ve[vr]=_r.join("@")}return _e},serialize:function(le,ye){var _e=le,ve=s(le.to);if(ve){for(var He=0,Ge=ve.length;He<Ge;++He){var xt=String(ve[He]),Wt=xt.lastIndexOf("@"),ir=xt.slice(0,Wt).replace(Sc,ue).replace(Sc,o).replace(Th,Y),mt=xt.slice(Wt+1);try{mt=ye.iri?O.toUnicode(mt):O.toASCII(k(mt,ye).toLowerCase())}catch(vr){_e.error=_e.error||"Email address's domain name can not be converted to "+(ye.iri?"Unicode":"ASCII")+" via punycode: "+vr}ve[He]=ir+"@"+mt}_e.path=ve.join(",")}var Dt=le.headers=le.headers||{};le.subject&&(Dt.subject=le.subject),le.body&&(Dt.body=le.body);var Lr=[];for(var gt in Dt)Dt[gt]!==_t[gt]&&Lr.push(gt.replace(Sc,ue).replace(Sc,o).replace(Ah,Y)+"="+Dt[gt].replace(Sc,ue).replace(Sc,o).replace(de,Y));return Lr.length&&(_e.query=Lr.join("&")),_e}},ke=/^([^\:]+)\:(.*)/,qe={scheme:"urn",parse:function(le,ye){var _e=le.path&&le.path.match(ke),ve=le;if(_e){var He=ye.scheme||ve.scheme||"urn",Ge=_e[1].toLowerCase(),xt=_e[2],Wt=He+":"+(ye.nid||Ge),ir=F[Wt];ve.nid=Ge,ve.nss=xt,ve.path=void 0,ir&&(ve=ir.parse(ve,ye))}else ve.error=ve.error||"URN can not be parsed.";return ve},serialize:function(le,ye){var _e=ye.scheme||le.scheme||"urn",ve=le.nid,He=_e+":"+(ye.nid||ve),Ge=F[He];Ge&&(le=Ge.serialize(le,ye));var xt=le,Wt=le.nss;return xt.path=(ve||ye.nid)+":"+Wt,xt}},pn=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,_i={scheme:"urn:uuid",parse:function(le,ye){var _e=le;return _e.uuid=_e.nss,_e.nss=void 0,!ye.tolerant&&(!_e.uuid||!_e.uuid.match(pn))&&(_e.error=_e.error||"UUID is not valid."),_e},serialize:function(le,ye){var _e=le;return _e.nss=(le.uuid||"").toLowerCase(),_e}};F[se.scheme]=se,F[fe.scheme]=fe,F[be.scheme]=be,F[Je.scheme]=Je,F[Ie.scheme]=Ie,F[qe.scheme]=qe,F[_i.scheme]=_i,r.SCHEMES=F,r.pctEncChar=Y,r.pctDecChars=ee,r.parse=ne,r.removeDotSegments=Ee,r.serialize=Ne,r.resolveComponents=Qe,r.resolve=ie,r.normalize=ce,r.equal=K,r.escapeComponent=A,r.unescapeComponent=k,Object.defineProperty(r,"__esModule",{value:!0})})})(R_,R_.exports);var _j=R_.exports;Object.defineProperty(mS,"__esModule",{value:!0});const Ej=_j;Ej.code='require("ajv/dist/runtime/uri").default';mS.default=Ej;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=ys;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=vt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Hy,i=Gy,a=cu,o=Ri,s=vt,d=Gn,l=Vy,c=Bt,u=qZ,h=mS,y=(B,D)=>new RegExp(B,D);y.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function m(B){var D,G,Z,N,W,O,F,Y,ee,te,U,L,P,j,X,ne,ae,pe,we,Se,xe,Ee,Ne,Qe,ie;const ce=B.strict,K=(D=B.code)===null||D===void 0?void 0:D.optimize,A=K===!0||K===void 0?1:K||0,k=(Z=(G=B.code)===null||G===void 0?void 0:G.regExp)!==null&&Z!==void 0?Z:y,se=(N=B.uriResolver)!==null&&N!==void 0?N:h.default;return{strictSchema:(O=(W=B.strictSchema)!==null&&W!==void 0?W:ce)!==null&&O!==void 0?O:!0,strictNumbers:(Y=(F=B.strictNumbers)!==null&&F!==void 0?F:ce)!==null&&Y!==void 0?Y:!0,strictTypes:(te=(ee=B.strictTypes)!==null&&ee!==void 0?ee:ce)!==null&&te!==void 0?te:"log",strictTuples:(L=(U=B.strictTuples)!==null&&U!==void 0?U:ce)!==null&&L!==void 0?L:"log",strictRequired:(j=(P=B.strictRequired)!==null&&P!==void 0?P:ce)!==null&&j!==void 0?j:!1,code:B.code?{...B.code,optimize:A,regExp:k}:{optimize:A,regExp:k},loopRequired:(X=B.loopRequired)!==null&&X!==void 0?X:b,loopEnum:(ne=B.loopEnum)!==null&&ne!==void 0?ne:b,meta:(ae=B.meta)!==null&&ae!==void 0?ae:!0,messages:(pe=B.messages)!==null&&pe!==void 0?pe:!0,inlineRefs:(we=B.inlineRefs)!==null&&we!==void 0?we:!0,schemaId:(Se=B.schemaId)!==null&&Se!==void 0?Se:"$id",addUsedSchema:(xe=B.addUsedSchema)!==null&&xe!==void 0?xe:!0,validateSchema:(Ee=B.validateSchema)!==null&&Ee!==void 0?Ee:!0,validateFormats:(Ne=B.validateFormats)!==null&&Ne!==void 0?Ne:!0,unicodeRegExp:(Qe=B.unicodeRegExp)!==null&&Qe!==void 0?Qe:!0,int32range:(ie=B.int32range)!==null&&ie!==void 0?ie:!0,uriResolver:se}}class w{constructor(D={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,D=this.opts={...D,...m(D)};const{es5:G,lines:Z}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:f,es5:G,lines:Z}),this.logger=J(D.logger);const N=D.validateFormats;D.validateFormats=!1,this.RULES=(0,a.getRules)(),S.call(this,g,D,"NOT SUPPORTED"),S.call(this,v,D,"DEPRECATED","warn"),this._metaOpts=H.call(this),D.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),D.keywords&&M.call(this,D.keywords),typeof D.meta=="object"&&this.addMetaSchema(D.meta),x.call(this),D.validateFormats=N}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:D,meta:G,schemaId:Z}=this.opts;let N=u;Z==="id"&&(N={...u},N.id=N.$id,delete N.$id),G&&D&&this.addMetaSchema(N,N[Z],!1)}defaultMeta(){const{meta:D,schemaId:G}=this.opts;return this.opts.defaultMeta=typeof D=="object"?D[G]||D:void 0}validate(D,G){let Z;if(typeof D=="string"){if(Z=this.getSchema(D),!Z)throw new Error(`no schema with key or ref "${D}"`)}else Z=this.compile(D);const N=Z(G);return"$async"in Z||(this.errors=Z.errors),N}compile(D,G){const Z=this._addSchema(D,G);return Z.validate||this._compileSchemaEnv(Z)}compileAsync(D,G){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Z}=this.opts;return N.call(this,D,G);async function N(te,U){await W.call(this,te.$schema);const L=this._addSchema(te,U);return L.validate||O.call(this,L)}async function W(te){te&&!this.getSchema(te)&&await N.call(this,{$ref:te},!0)}async function O(te){try{return this._compileSchemaEnv(te)}catch(U){if(!(U instanceof i.default))throw U;return F.call(this,U),await Y.call(this,U.missingSchema),O.call(this,te)}}function F({missingSchema:te,missingRef:U}){if(this.refs[te])throw new Error(`AnySchema ${te} is loaded but ${U} cannot be resolved`)}async function Y(te){const U=await ee.call(this,te);this.refs[te]||await W.call(this,U.$schema),this.refs[te]||this.addSchema(U,te,G)}async function ee(te){const U=this._loading[te];if(U)return U;try{return await(this._loading[te]=Z(te))}finally{delete this._loading[te]}}}addSchema(D,G,Z,N=this.opts.validateSchema){if(Array.isArray(D)){for(const O of D)this.addSchema(O,void 0,Z,N);return this}let W;if(typeof D=="object"){const{schemaId:O}=this.opts;if(W=D[O],W!==void 0&&typeof W!="string")throw new Error(`schema ${O} must be string`)}return G=(0,d.normalizeId)(G||W),this._checkUnique(G),this.schemas[G]=this._addSchema(D,Z,G,N,!0),this}addMetaSchema(D,G,Z=this.opts.validateSchema){return this.addSchema(D,G,!0,Z),this}validateSchema(D,G){if(typeof D=="boolean")return!0;let Z;if(Z=D.$schema,Z!==void 0&&typeof Z!="string")throw new Error("$schema must be a string");if(Z=Z||this.opts.defaultMeta||this.defaultMeta(),!Z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const N=this.validate(Z,D);if(!N&&G){const W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw new Error(W)}return N}getSchema(D){let G;for(;typeof(G=T.call(this,D))=="string";)D=G;if(G===void 0){const{schemaId:Z}=this.opts,N=new o.SchemaEnv({schema:{},schemaId:Z});if(G=o.resolveSchema.call(this,N,D),!G)return;this.refs[D]=G}return G.validate||this._compileSchemaEnv(G)}removeSchema(D){if(D instanceof RegExp)return this._removeAllSchemas(this.schemas,D),this._removeAllSchemas(this.refs,D),this;switch(typeof D){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const G=T.call(this,D);return typeof G=="object"&&this._cache.delete(G.schema),delete this.schemas[D],delete this.refs[D],this}case"object":{const G=D;this._cache.delete(G);let Z=D[this.opts.schemaId];return Z&&(Z=(0,d.normalizeId)(Z),delete this.schemas[Z],delete this.refs[Z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(D){for(const G of D)this.addKeyword(G);return this}addKeyword(D,G){let Z;if(typeof D=="string")Z=D,typeof G=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),G.keyword=Z);else if(typeof D=="object"&&G===void 0){if(G=D,Z=G.keyword,Array.isArray(Z)&&!Z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(oe.call(this,Z,G),!G)return(0,c.eachItem)(Z,W=>C.call(this,W)),this;q.call(this,G);const N={...G,type:(0,l.getJSONTypes)(G.type),schemaType:(0,l.getJSONTypes)(G.schemaType)};return(0,c.eachItem)(Z,N.type.length===0?W=>C.call(this,W,N):W=>N.type.forEach(O=>C.call(this,W,N,O))),this}getKeyword(D){const G=this.RULES.all[D];return typeof G=="object"?G.definition:!!G}removeKeyword(D){const{RULES:G}=this;delete G.keywords[D],delete G.all[D];for(const Z of G.rules){const N=Z.rules.findIndex(W=>W.keyword===D);N>=0&&Z.rules.splice(N,1)}return this}addFormat(D,G){return typeof G=="string"&&(G=new RegExp(G)),this.formats[D]=G,this}errorsText(D=this.errors,{separator:G=", ",dataVar:Z="data"}={}){return!D||D.length===0?"No errors":D.map(N=>`${Z}${N.instancePath} ${N.message}`).reduce((N,W)=>N+G+W)}$dataMetaSchema(D,G){const Z=this.RULES.all;D=JSON.parse(JSON.stringify(D));for(const N of G){const W=N.split("/").slice(1);let O=D;for(const F of W)O=O[F];for(const F in Z){const Y=Z[F];if(typeof Y!="object")continue;const{$data:ee}=Y.definition,te=O[F];ee&&te&&(O[F]=R(te))}}return D}_removeAllSchemas(D,G){for(const Z in D){const N=D[Z];(!G||G.test(Z))&&(typeof N=="string"?delete D[Z]:N&&!N.meta&&(this._cache.delete(N.schema),delete D[Z]))}}_addSchema(D,G,Z,N=this.opts.validateSchema,W=this.opts.addUsedSchema){let O;const{schemaId:F}=this.opts;if(typeof D=="object")O=D[F];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof D!="boolean")throw new Error("schema must be object or boolean")}let Y=this._cache.get(D);if(Y!==void 0)return Y;Z=(0,d.normalizeId)(O||Z);const ee=d.getSchemaRefs.call(this,D,Z);return Y=new o.SchemaEnv({schema:D,schemaId:F,meta:G,baseId:Z,localRefs:ee}),this._cache.set(Y.schema,Y),W&&!Z.startsWith("#")&&(Z&&this._checkUnique(Z),this.refs[Z]=Y),N&&this.validateSchema(D,!0),Y}_checkUnique(D){if(this.schemas[D]||this.refs[D])throw new Error(`schema with key or id "${D}" already exists`)}_compileSchemaEnv(D){if(D.meta?this._compileMetaSchema(D):o.compileSchema.call(this,D),!D.validate)throw new Error("ajv implementation error");return D.validate}_compileMetaSchema(D){const G=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,D)}finally{this.opts=G}}}t.default=w,w.ValidationError=n.default,w.MissingRefError=i.default;function S(B,D,G,Z="error"){for(const N in B){const W=N;W in D&&this.logger[Z](`${G}: option ${N}. ${B[W]}`)}}function T(B){return B=(0,d.normalizeId)(B),this.schemas[B]||this.refs[B]}function x(){const B=this.opts.schemas;if(B)if(Array.isArray(B))this.addSchema(B);else for(const D in B)this.addSchema(B[D],D)}function I(){for(const B in this.opts.formats){const D=this.opts.formats[B];D&&this.addFormat(B,D)}}function M(B){if(Array.isArray(B)){this.addVocabulary(B);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const D in B){const G=B[D];G.keyword||(G.keyword=D),this.addKeyword(G)}}function H(){const B={...this.opts};for(const D of p)delete B[D];return B}const re={log(){},warn(){},error(){}};function J(B){if(B===!1)return re;if(B===void 0)return console;if(B.log&&B.warn&&B.error)return B;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function oe(B,D){const{RULES:G}=this;if((0,c.eachItem)(B,Z=>{if(G.keywords[Z])throw new Error(`Keyword ${Z} is already defined`);if(!z.test(Z))throw new Error(`Keyword ${Z} has invalid name`)}),!!D&&D.$data&&!("code"in D||"validate"in D))throw new Error('$data keyword must have "code" or "validate" function')}function C(B,D,G){var Z;const N=D?.post;if(G&&N)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:W}=this;let O=N?W.post:W.rules.find(({type:Y})=>Y===G);if(O||(O={type:G,rules:[]},W.rules.push(O)),W.keywords[B]=!0,!D)return;const F={keyword:B,definition:{...D,type:(0,l.getJSONTypes)(D.type),schemaType:(0,l.getJSONTypes)(D.schemaType)}};D.before?V.call(this,O,F,D.before):O.rules.push(F),W.all[B]=F,(Z=D.implements)===null||Z===void 0||Z.forEach(Y=>this.addKeyword(Y))}function V(B,D,G){const Z=B.rules.findIndex(N=>N.keyword===G);Z>=0?B.rules.splice(Z,0,D):(B.rules.push(D),this.logger.warn(`rule ${G} is not defined`))}function q(B){let{metaSchema:D}=B;D!==void 0&&(B.$data&&this.opts.$data&&(D=R(D)),B.validateSchema=this.compile(D,!0))}const Q={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(B){return{anyOf:[B,Q]}}})(Z6);var gS={},wS={},bS={};Object.defineProperty(bS,"__esModule",{value:!0});const KZ={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};bS.default=KZ;var uc={};Object.defineProperty(uc,"__esModule",{value:!0});uc.callRef=uc.getValidate=void 0;const VZ=Gy,vx=kt,Fi=vt,Uu=vo,_x=Ri,Om=Bt,HZ={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:a,validateName:o,opts:s,self:d}=n,{root:l}=a;if((r==="#"||r==="#/")&&i===l.baseId)return u();const c=_x.resolveRef.call(d,l,i,r);if(c===void 0)throw new VZ.default(n.opts.uriResolver,i,r);if(c instanceof _x.SchemaEnv)return h(c);return y(c);function u(){if(a===l)return _g(t,o,a,a.$async);const p=e.scopeValue("root",{ref:l});return _g(t,(0,Fi._)`${p}.validate`,l,l.$async)}function h(p){const f=Sj(t,p);_g(t,f,p,p.$async)}function y(p){const f=e.scopeValue("schema",s.code.source===!0?{ref:p,code:(0,Fi.stringify)(p)}:{ref:p}),g=e.name("valid"),v=t.subschema({schema:p,dataTypes:[],schemaPath:Fi.nil,topSchemaRef:f,errSchemaPath:r},g);t.mergeEvaluated(v),t.ok(g)}}};function Sj(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Fi._)`${r.scopeValue("wrapper",{ref:e})}.validate`}uc.getValidate=Sj;function _g(t,e,r,n){const{gen:i,it:a}=t,{allErrors:o,schemaEnv:s,opts:d}=a,l=d.passContext?Uu.default.this:Fi.nil;n?c():u();function c(){if(!s.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Fi._)`await ${(0,vx.callValidateCode)(t,e,l)}`),y(e),o||i.assign(p,!0)},f=>{i.if((0,Fi._)`!(${f} instanceof ${a.ValidationError})`,()=>i.throw(f)),h(f),o||i.assign(p,!1)}),t.ok(p)}function u(){t.result((0,vx.callValidateCode)(t,e,l),()=>y(e),()=>h(e))}function h(p){const f=(0,Fi._)`${p}.errors`;i.assign(Uu.default.vErrors,(0,Fi._)`${Uu.default.vErrors} === null ? ${f} : ${Uu.default.vErrors}.concat(${f})`),i.assign(Uu.default.errors,(0,Fi._)`${Uu.default.vErrors}.length`)}function y(p){var f;if(!a.opts.unevaluated)return;const g=(f=r?.validate)===null||f===void 0?void 0:f.evaluated;if(a.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(a.props=Om.mergeEvaluated.props(i,g.props,a.props));else{const v=i.var("props",(0,Fi._)`${p}.evaluated.props`);a.props=Om.mergeEvaluated.props(i,v,a.props,Fi.Name)}if(a.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(a.items=Om.mergeEvaluated.items(i,g.items,a.items));else{const v=i.var("items",(0,Fi._)`${p}.evaluated.items`);a.items=Om.mergeEvaluated.items(i,v,a.items,Fi.Name)}}}uc.callRef=_g;uc.default=HZ;Object.defineProperty(wS,"__esModule",{value:!0});const GZ=bS,WZ=uc,YZ=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",GZ.default,WZ.default];wS.default=YZ;var vS={},_S={};Object.defineProperty(_S,"__esModule",{value:!0});const k0=vt,Lc=k0.operators,O0={maximum:{okStr:"<=",ok:Lc.LTE,fail:Lc.GT},minimum:{okStr:">=",ok:Lc.GTE,fail:Lc.LT},exclusiveMaximum:{okStr:"<",ok:Lc.LT,fail:Lc.GTE},exclusiveMinimum:{okStr:">",ok:Lc.GT,fail:Lc.LTE}},ZZ={message:({keyword:t,schemaCode:e})=>(0,k0.str)`must be ${O0[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,k0._)`{comparison: ${O0[t].okStr}, limit: ${e}}`},XZ={keyword:Object.keys(O0),type:"number",schemaType:"number",$data:!0,error:ZZ,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,k0._)`${r} ${O0[e].fail} ${n} || isNaN(${r})`)}};_S.default=XZ;var ES={};Object.defineProperty(ES,"__esModule",{value:!0});const Np=vt,QZ={message:({schemaCode:t})=>(0,Np.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Np._)`{multipleOf: ${t}}`},JZ={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:QZ,code(t){const{gen:e,data:r,schemaCode:n,it:i}=t,a=i.opts.multipleOfPrecision,o=e.let("res"),s=a?(0,Np._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${a}`:(0,Np._)`${o} !== parseInt(${o})`;t.fail$data((0,Np._)`(${n} === 0 || (${o} = ${r}/${n}, ${s}))`)}};ES.default=JZ;var SS={},$S={};Object.defineProperty($S,"__esModule",{value:!0});function $j(t){const e=t.length;let r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}$S.default=$j;$j.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(SS,"__esModule",{value:!0});const El=vt,eX=Bt,tX=$S,rX={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,El.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,El._)`{limit: ${t}}`},nX={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:rX,code(t){const{keyword:e,data:r,schemaCode:n,it:i}=t,a=e==="maxLength"?El.operators.GT:El.operators.LT,o=i.opts.unicode===!1?(0,El._)`${r}.length`:(0,El._)`${(0,eX.useFunc)(t.gen,tX.default)}(${r})`;t.fail$data((0,El._)`${o} ${a} ${n}`)}};SS.default=nX;var TS={};Object.defineProperty(TS,"__esModule",{value:!0});const iX=kt,R0=vt,oX={message:({schemaCode:t})=>(0,R0.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,R0._)`{pattern: ${t}}`},sX={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:oX,code(t){const{data:e,$data:r,schema:n,schemaCode:i,it:a}=t,o=a.opts.unicodeRegExp?"u":"",s=r?(0,R0._)`(new RegExp(${i}, ${o}))`:(0,iX.usePattern)(t,n);t.fail$data((0,R0._)`!${s}.test(${e})`)}};TS.default=sX;var AS={};Object.defineProperty(AS,"__esModule",{value:!0});const Bp=vt,aX={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,Bp.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Bp._)`{limit: ${t}}`},cX={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:aX,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?Bp.operators.GT:Bp.operators.LT;t.fail$data((0,Bp._)`Object.keys(${r}).length ${i} ${n}`)}};AS.default=cX;var PS={};Object.defineProperty(PS,"__esModule",{value:!0});const Fh=kt,Dp=vt,dX=Bt,lX={message:({params:{missingProperty:t}})=>(0,Dp.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Dp._)`{missingProperty: ${t}}`},uX={keyword:"required",type:"object",schemaType:"array",$data:!0,error:lX,code(t){const{gen:e,schema:r,schemaCode:n,data:i,$data:a,it:o}=t,{opts:s}=o;if(!a&&r.length===0)return;const d=r.length>=s.loopRequired;if(o.allErrors?l():c(),s.strictRequired){const y=t.parentSchema.properties,{definedProperties:p}=t.it;for(const f of r)if(y?.[f]===void 0&&!p.has(f)){const g=o.schemaEnv.baseId+o.errSchemaPath,v=`required property "${f}" is not defined at "${g}" (strictRequired)`;(0,dX.checkStrictMode)(o,v,o.opts.strictRequired)}}function l(){if(d||a)t.block$data(Dp.nil,u);else for(const y of r)(0,Fh.checkReportMissingProp)(t,y)}function c(){const y=e.let("missing");if(d||a){const p=e.let("valid",!0);t.block$data(p,()=>h(y,p)),t.ok(p)}else e.if((0,Fh.checkMissingProp)(t,r,y)),(0,Fh.reportMissingProp)(t,y),e.else()}function u(){e.forOf("prop",n,y=>{t.setParams({missingProperty:y}),e.if((0,Fh.noPropertyInData)(e,i,y,s.ownProperties),()=>t.error())})}function h(y,p){t.setParams({missingProperty:y}),e.forOf(y,n,()=>{e.assign(p,(0,Fh.propertyInData)(e,i,y,s.ownProperties)),e.if((0,Dp.not)(p),()=>{t.error(),e.break()})},Dp.nil)}}};PS.default=uX;var xS={};Object.defineProperty(xS,"__esModule",{value:!0});const Mp=vt,fX={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Mp.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Mp._)`{limit: ${t}}`},hX={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:fX,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?Mp.operators.GT:Mp.operators.LT;t.fail$data((0,Mp._)`${r}.length ${i} ${n}`)}};xS.default=hX;var IS={},Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});const Tj=ij;Tj.code='require("ajv/dist/runtime/equal").default';Wy.default=Tj;Object.defineProperty(IS,"__esModule",{value:!0});const $v=Vy,Nn=vt,pX=Bt,yX=Wy,mX={message:({params:{i:t,j:e}})=>(0,Nn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Nn._)`{i: ${t}, j: ${e}}`},gX={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:mX,code(t){const{gen:e,data:r,$data:n,schema:i,parentSchema:a,schemaCode:o,it:s}=t;if(!n&&!i)return;const d=e.let("valid"),l=a.items?(0,$v.getSchemaTypes)(a.items):[];t.block$data(d,c,(0,Nn._)`${o} === false`),t.ok(d);function c(){const p=e.let("i",(0,Nn._)`${r}.length`),f=e.let("j");t.setParams({i:p,j:f}),e.assign(d,!0),e.if((0,Nn._)`${p} > 1`,()=>(u()?h:y)(p,f))}function u(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,f){const g=e.name("item"),v=(0,$v.checkDataTypes)(l,g,s.opts.strictNumbers,$v.DataType.Wrong),b=e.const("indices",(0,Nn._)`{}`);e.for((0,Nn._)`;${p}--;`,()=>{e.let(g,(0,Nn._)`${r}[${p}]`),e.if(v,(0,Nn._)`continue`),l.length>1&&e.if((0,Nn._)`typeof ${g} == "string"`,(0,Nn._)`${g} += "_"`),e.if((0,Nn._)`typeof ${b}[${g}] == "number"`,()=>{e.assign(f,(0,Nn._)`${b}[${g}]`),t.error(),e.assign(d,!1).break()}).code((0,Nn._)`${b}[${g}] = ${p}`)})}function y(p,f){const g=(0,pX.useFunc)(e,yX.default),v=e.name("outer");e.label(v).for((0,Nn._)`;${p}--;`,()=>e.for((0,Nn._)`${f} = ${p}; ${f}--;`,()=>e.if((0,Nn._)`${g}(${r}[${p}], ${r}[${f}])`,()=>{t.error(),e.assign(d,!1).break(v)})))}}};IS.default=gX;var kS={};Object.defineProperty(kS,"__esModule",{value:!0});const j_=vt,wX=Bt,bX=Wy,vX={message:"must be equal to constant",params:({schemaCode:t})=>(0,j_._)`{allowedValue: ${t}}`},_X={keyword:"const",$data:!0,error:vX,code(t){const{gen:e,data:r,$data:n,schemaCode:i,schema:a}=t;n||a&&typeof a=="object"?t.fail$data((0,j_._)`!${(0,wX.useFunc)(e,bX.default)}(${r}, ${i})`):t.fail((0,j_._)`${a} !== ${r}`)}};kS.default=_X;var OS={};Object.defineProperty(OS,"__esModule",{value:!0});const lp=vt,EX=Bt,SX=Wy,$X={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,lp._)`{allowedValues: ${t}}`},TX={keyword:"enum",schemaType:"array",$data:!0,error:$X,code(t){const{gen:e,data:r,$data:n,schema:i,schemaCode:a,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const s=i.length>=o.opts.loopEnum;let d;const l=()=>d??(d=(0,EX.useFunc)(e,SX.default));let c;if(s||n)c=e.let("valid"),t.block$data(c,u);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const y=e.const("vSchema",a);c=(0,lp.or)(...i.map((p,f)=>h(y,f)))}t.pass(c);function u(){e.assign(c,!1),e.forOf("v",a,y=>e.if((0,lp._)`${l()}(${r}, ${y})`,()=>e.assign(c,!0).break()))}function h(y,p){const f=i[p];return typeof f=="object"&&f!==null?(0,lp._)`${l()}(${r}, ${y}[${p}])`:(0,lp._)`${r} === ${f}`}}};OS.default=TX;Object.defineProperty(vS,"__esModule",{value:!0});const AX=_S,PX=ES,xX=SS,IX=TS,kX=AS,OX=PS,RX=xS,jX=IS,CX=kS,NX=OS,BX=[AX.default,PX.default,xX.default,IX.default,kX.default,OX.default,RX.default,jX.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},CX.default,NX.default];vS.default=BX;var RS={},wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.validateAdditionalItems=void 0;const Sl=vt,C_=Bt,DX={message:({params:{len:t}})=>(0,Sl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Sl._)`{limit: ${t}}`},MX={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:DX,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,C_.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Aj(t,n)}};function Aj(t,e){const{gen:r,schema:n,data:i,keyword:a,it:o}=t;o.items=!0;const s=r.const("len",(0,Sl._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,Sl._)`${s} <= ${e.length}`);else if(typeof n=="object"&&!(0,C_.alwaysValidSchema)(o,n)){const l=r.var("valid",(0,Sl._)`${s} <= ${e.length}`);r.if((0,Sl.not)(l),()=>d(l)),t.ok(l)}function d(l){r.forRange("i",e.length,s,c=>{t.subschema({keyword:a,dataProp:c,dataPropType:C_.Type.Num},l),o.allErrors||r.if((0,Sl.not)(l),()=>r.break())})}}wh.validateAdditionalItems=Aj;wh.default=MX;var jS={},bh={};Object.defineProperty(bh,"__esModule",{value:!0});bh.validateTuple=void 0;const Ex=vt,Eg=Bt,LX=kt,UX={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return Pj(t,"additionalItems",e);r.items=!0,!(0,Eg.alwaysValidSchema)(r,e)&&t.ok((0,LX.validateArray)(t))}};function Pj(t,e,r=t.schema){const{gen:n,parentSchema:i,data:a,keyword:o,it:s}=t;c(i),s.opts.unevaluated&&r.length&&s.items!==!0&&(s.items=Eg.mergeEvaluated.items(n,r.length,s.items));const d=n.name("valid"),l=n.const("len",(0,Ex._)`${a}.length`);r.forEach((u,h)=>{(0,Eg.alwaysValidSchema)(s,u)||(n.if((0,Ex._)`${l} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},d)),t.ok(d))});function c(u){const{opts:h,errSchemaPath:y}=s,p=r.length,f=p===u.minItems&&(p===u.maxItems||u[e]===!1);if(h.strictTuples&&!f){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${y}"`;(0,Eg.checkStrictMode)(s,g,h.strictTuples)}}}bh.validateTuple=Pj;bh.default=UX;Object.defineProperty(jS,"__esModule",{value:!0});const FX=bh,zX={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,FX.validateTuple)(t,"items")};jS.default=zX;var CS={};Object.defineProperty(CS,"__esModule",{value:!0});const Sx=vt,qX=Bt,KX=kt,VX=wh,HX={message:({params:{len:t}})=>(0,Sx.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Sx._)`{limit: ${t}}`},GX={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:HX,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,qX.alwaysValidSchema)(n,e)&&(i?(0,VX.validateAdditionalItems)(t,i):t.ok((0,KX.validateArray)(t)))}};CS.default=GX;var NS={};Object.defineProperty(NS,"__esModule",{value:!0});const Co=vt,Rm=Bt,WX={message:({params:{min:t,max:e}})=>e===void 0?(0,Co.str)`must contain at least ${t} valid item(s)`:(0,Co.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Co._)`{minContains: ${t}}`:(0,Co._)`{minContains: ${t}, maxContains: ${e}}`},YX={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:WX,code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:a}=t;let o,s;const{minContains:d,maxContains:l}=n;a.opts.next?(o=d===void 0?1:d,s=l):o=1;const c=e.const("len",(0,Co._)`${i}.length`);if(t.setParams({min:o,max:s}),s===void 0&&o===0){(0,Rm.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&o>s){(0,Rm.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Rm.alwaysValidSchema)(a,r)){let f=(0,Co._)`${c} >= ${o}`;s!==void 0&&(f=(0,Co._)`${f} && ${c} <= ${s}`),t.pass(f);return}a.items=!0;const u=e.name("valid");s===void 0&&o===1?y(u,()=>e.if(u,()=>e.break())):o===0?(e.let(u,!0),s!==void 0&&e.if((0,Co._)`${i}.length > 0`,h)):(e.let(u,!1),h()),t.result(u,()=>t.reset());function h(){const f=e.name("_valid"),g=e.let("count",0);y(f,()=>e.if(f,()=>p(g)))}function y(f,g){e.forRange("i",0,c,v=>{t.subschema({keyword:"contains",dataProp:v,dataPropType:Rm.Type.Num,compositeRule:!0},f),g()})}function p(f){e.code((0,Co._)`${f}++`),s===void 0?e.if((0,Co._)`${f} >= ${o}`,()=>e.assign(u,!0).break()):(e.if((0,Co._)`${f} > ${s}`,()=>e.assign(u,!1).break()),o===1?e.assign(u,!0):e.if((0,Co._)`${f} >= ${o}`,()=>e.assign(u,!0)))}}};NS.default=YX;var Yw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=vt,r=Bt,n=kt;t.error={message:({params:{property:d,depsCount:l,deps:c}})=>{const u=l===1?"property":"properties";return(0,e.str)`must have ${u} ${c} when property ${d} is present`},params:({params:{property:d,depsCount:l,deps:c,missingProperty:u}})=>(0,e._)`{property: ${d},
    missingProperty: ${u},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(d){const[l,c]=a(d);o(d,l),s(d,c)}};function a({schema:d}){const l={},c={};for(const u in d){if(u==="__proto__")continue;const h=Array.isArray(d[u])?l:c;h[u]=d[u]}return[l,c]}function o(d,l=d.schema){const{gen:c,data:u,it:h}=d;if(Object.keys(l).length===0)return;const y=c.let("missing");for(const p in l){const f=l[p];if(f.length===0)continue;const g=(0,n.propertyInData)(c,u,p,h.opts.ownProperties);d.setParams({property:p,depsCount:f.length,deps:f.join(", ")}),h.allErrors?c.if(g,()=>{for(const v of f)(0,n.checkReportMissingProp)(d,v)}):(c.if((0,e._)`${g} && (${(0,n.checkMissingProp)(d,f,y)})`),(0,n.reportMissingProp)(d,y),c.else())}}t.validatePropertyDeps=o;function s(d,l=d.schema){const{gen:c,data:u,keyword:h,it:y}=d,p=c.name("valid");for(const f in l)(0,r.alwaysValidSchema)(y,l[f])||(c.if((0,n.propertyInData)(c,u,f,y.opts.ownProperties),()=>{const g=d.subschema({keyword:h,schemaProp:f},p);d.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),d.ok(p))}t.validateSchemaDeps=s,t.default=i})(Yw);var BS={};Object.defineProperty(BS,"__esModule",{value:!0});const xj=vt,ZX=Bt,XX={message:"property name must be valid",params:({params:t})=>(0,xj._)`{propertyName: ${t.propertyName}}`},QX={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:XX,code(t){const{gen:e,schema:r,data:n,it:i}=t;if((0,ZX.alwaysValidSchema)(i,r))return;const a=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},a),e.if((0,xj.not)(a),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(a)}};BS.default=QX;var Zw={};Object.defineProperty(Zw,"__esModule",{value:!0});const jm=kt,ts=vt,JX=vo,Cm=Bt,eQ={message:"must NOT have additional properties",params:({params:t})=>(0,ts._)`{additionalProperty: ${t.additionalProperty}}`},tQ={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:eQ,code(t){const{gen:e,schema:r,parentSchema:n,data:i,errsCount:a,it:o}=t;if(!a)throw new Error("ajv implementation error");const{allErrors:s,opts:d}=o;if(o.props=!0,d.removeAdditional!=="all"&&(0,Cm.alwaysValidSchema)(o,r))return;const l=(0,jm.allSchemaProperties)(n.properties),c=(0,jm.allSchemaProperties)(n.patternProperties);u(),t.ok((0,ts._)`${a} === ${JX.default.errors}`);function u(){e.forIn("key",i,g=>{!l.length&&!c.length?p(g):e.if(h(g),()=>p(g))})}function h(g){let v;if(l.length>8){const b=(0,Cm.schemaRefOrVal)(o,n.properties,"properties");v=(0,jm.isOwnProperty)(e,b,g)}else l.length?v=(0,ts.or)(...l.map(b=>(0,ts._)`${g} === ${b}`)):v=ts.nil;return c.length&&(v=(0,ts.or)(v,...c.map(b=>(0,ts._)`${(0,jm.usePattern)(t,b)}.test(${g})`))),(0,ts.not)(v)}function y(g){e.code((0,ts._)`delete ${i}[${g}]`)}function p(g){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){y(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),s||e.break();return}if(typeof r=="object"&&!(0,Cm.alwaysValidSchema)(o,r)){const v=e.name("valid");d.removeAdditional==="failing"?(f(g,v,!1),e.if((0,ts.not)(v),()=>{t.reset(),y(g)})):(f(g,v),s||e.if((0,ts.not)(v),()=>e.break()))}}function f(g,v,b){const m={keyword:"additionalProperties",dataProp:g,dataPropType:Cm.Type.Str};b===!1&&Object.assign(m,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(m,v)}}};Zw.default=tQ;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});const rQ=ys,$x=kt,Tv=Bt,Tx=Zw,nQ={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:a}=t;a.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Tx.default.code(new rQ.KeywordCxt(a,Tx.default,"additionalProperties"));const o=(0,$x.allSchemaProperties)(r);for(const u of o)a.definedProperties.add(u);a.opts.unevaluated&&o.length&&a.props!==!0&&(a.props=Tv.mergeEvaluated.props(e,(0,Tv.toHash)(o),a.props));const s=o.filter(u=>!(0,Tv.alwaysValidSchema)(a,r[u]));if(s.length===0)return;const d=e.name("valid");for(const u of s)l(u)?c(u):(e.if((0,$x.propertyInData)(e,i,u,a.opts.ownProperties)),c(u),a.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(u),t.ok(d);function l(u){return a.opts.useDefaults&&!a.compositeRule&&r[u].default!==void 0}function c(u){t.subschema({keyword:"properties",schemaProp:u,dataProp:u},d)}}};DS.default=nQ;var MS={};Object.defineProperty(MS,"__esModule",{value:!0});const Ax=kt,Nm=vt,Px=Bt,xx=Bt,iQ={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:i,it:a}=t,{opts:o}=a,s=(0,Ax.allSchemaProperties)(r),d=s.filter(f=>(0,Px.alwaysValidSchema)(a,r[f]));if(s.length===0||d.length===s.length&&(!a.opts.unevaluated||a.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=e.name("valid");a.props!==!0&&!(a.props instanceof Nm.Name)&&(a.props=(0,xx.evaluatedPropsToName)(e,a.props));const{props:u}=a;h();function h(){for(const f of s)l&&y(f),a.allErrors?p(f):(e.var(c,!0),p(f),e.if(c))}function y(f){for(const g in l)new RegExp(f).test(g)&&(0,Px.checkStrictMode)(a,`property ${g} matches pattern ${f} (use allowMatchingProperties)`)}function p(f){e.forIn("key",n,g=>{e.if((0,Nm._)`${(0,Ax.usePattern)(t,f)}.test(${g})`,()=>{const v=d.includes(f);v||t.subschema({keyword:"patternProperties",schemaProp:f,dataProp:g,dataPropType:xx.Type.Str},c),a.opts.unevaluated&&u!==!0?e.assign((0,Nm._)`${u}[${g}]`,!0):!v&&!a.allErrors&&e.if((0,Nm.not)(c),()=>e.break())})})}}};MS.default=iQ;var LS={};Object.defineProperty(LS,"__esModule",{value:!0});const oQ=Bt,sQ={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,oQ.alwaysValidSchema)(n,r)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};LS.default=sQ;var US={};Object.defineProperty(US,"__esModule",{value:!0});const aQ=kt,cQ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:aQ.validateUnion,error:{message:"must match a schema in anyOf"}};US.default=cQ;var FS={};Object.defineProperty(FS,"__esModule",{value:!0});const Sg=vt,dQ=Bt,lQ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Sg._)`{passingSchemas: ${t.passing}}`},uQ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:lQ,code(t){const{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const a=r,o=e.let("valid",!1),s=e.let("passing",null),d=e.name("_valid");t.setParams({passing:s}),e.block(l),t.result(o,()=>t.reset(),()=>t.error(!0));function l(){a.forEach((c,u)=>{let h;(0,dQ.alwaysValidSchema)(i,c)?e.var(d,!0):h=t.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},d),u>0&&e.if((0,Sg._)`${d} && ${o}`).assign(o,!1).assign(s,(0,Sg._)`[${s}, ${u}]`).else(),e.if(d,()=>{e.assign(o,!0),e.assign(s,u),h&&t.mergeEvaluated(h,Sg.Name)})})}}};FS.default=uQ;var zS={};Object.defineProperty(zS,"__esModule",{value:!0});const fQ=Bt,hQ={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=e.name("valid");r.forEach((a,o)=>{if((0,fQ.alwaysValidSchema)(n,a))return;const s=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(s)})}};zS.default=hQ;var qS={};Object.defineProperty(qS,"__esModule",{value:!0});const j0=vt,Ij=Bt,pQ={message:({params:t})=>(0,j0.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,j0._)`{failingKeyword: ${t.ifClause}}`},yQ={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:pQ,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Ij.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=Ix(n,"then"),a=Ix(n,"else");if(!i&&!a)return;const o=e.let("valid",!0),s=e.name("_valid");if(d(),t.reset(),i&&a){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(s,l("then",c),l("else",c))}else i?e.if(s,l("then")):e.if((0,j0.not)(s),l("else"));t.pass(o,()=>t.error(!0));function d(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);t.mergeEvaluated(c)}function l(c,u){return()=>{const h=t.subschema({keyword:c},s);e.assign(o,s),t.mergeValidEvaluated(h,o),u?e.assign(u,(0,j0._)`${c}`):t.setParams({ifClause:c})}}}};function Ix(t,e){const r=t.schema[e];return r!==void 0&&!(0,Ij.alwaysValidSchema)(t,r)}qS.default=yQ;var KS={};Object.defineProperty(KS,"__esModule",{value:!0});const mQ=Bt,gQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,mQ.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};KS.default=gQ;Object.defineProperty(RS,"__esModule",{value:!0});const wQ=wh,bQ=jS,vQ=bh,_Q=CS,EQ=NS,SQ=Yw,$Q=BS,TQ=Zw,AQ=DS,PQ=MS,xQ=LS,IQ=US,kQ=FS,OQ=zS,RQ=qS,jQ=KS;function CQ(t=!1){const e=[xQ.default,IQ.default,kQ.default,OQ.default,RQ.default,jQ.default,$Q.default,TQ.default,SQ.default,AQ.default,PQ.default];return t?e.push(bQ.default,_Q.default):e.push(wQ.default,vQ.default),e.push(EQ.default),e}RS.default=CQ;var VS={},vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.dynamicAnchor=void 0;const Av=vt,NQ=vo,kx=Ri,BQ=uc,DQ={keyword:"$dynamicAnchor",schemaType:"string",code:t=>kj(t,t.schema)};function kj(t,e){const{gen:r,it:n}=t;n.schemaEnv.root.dynamicAnchors[e]=!0;const i=(0,Av._)`${NQ.default.dynamicAnchors}${(0,Av.getProperty)(e)}`,a=n.errSchemaPath==="#"?n.validateName:MQ(t);r.if((0,Av._)`!${i}`,()=>r.assign(i,a))}vh.dynamicAnchor=kj;function MQ(t){const{schemaEnv:e,schema:r,self:n}=t.it,{root:i,baseId:a,localRefs:o,meta:s}=e.root,{schemaId:d}=n.opts,l=new kx.SchemaEnv({schema:r,schemaId:d,root:i,baseId:a,localRefs:o,meta:s});return kx.compileSchema.call(n,l),(0,BQ.getValidate)(t,l)}vh.default=DQ;var _h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.dynamicRef=void 0;const Ox=vt,LQ=vo,Rx=uc,UQ={keyword:"$dynamicRef",schemaType:"string",code:t=>Oj(t,t.schema)};function Oj(t,e){const{gen:r,keyword:n,it:i}=t;if(e[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);const a=e.slice(1);if(i.allErrors)o();else{const d=r.let("valid",!1);o(d),t.ok(d)}function o(d){if(i.schemaEnv.root.dynamicAnchors[a]){const l=r.let("_v",(0,Ox._)`${LQ.default.dynamicAnchors}${(0,Ox.getProperty)(a)}`);r.if(l,s(l,d),s(i.validateName,d))}else s(i.validateName,d)()}function s(d,l){return l?()=>r.block(()=>{(0,Rx.callRef)(t,d),r.let(l,!0)}):()=>(0,Rx.callRef)(t,d)}}_h.dynamicRef=Oj;_h.default=UQ;var HS={};Object.defineProperty(HS,"__esModule",{value:!0});const FQ=vh,zQ=Bt,qQ={keyword:"$recursiveAnchor",schemaType:"boolean",code(t){t.schema?(0,FQ.dynamicAnchor)(t,""):(0,zQ.checkStrictMode)(t.it,"$recursiveAnchor: false is ignored")}};HS.default=qQ;var GS={};Object.defineProperty(GS,"__esModule",{value:!0});const KQ=_h,VQ={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,KQ.dynamicRef)(t,t.schema)};GS.default=VQ;Object.defineProperty(VS,"__esModule",{value:!0});const HQ=vh,GQ=_h,WQ=HS,YQ=GS,ZQ=[HQ.default,GQ.default,WQ.default,YQ.default];VS.default=ZQ;var WS={},YS={};Object.defineProperty(YS,"__esModule",{value:!0});const jx=Yw,XQ={keyword:"dependentRequired",type:"object",schemaType:"object",error:jx.error,code:t=>(0,jx.validatePropertyDeps)(t)};YS.default=XQ;var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});const QQ=Yw,JQ={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,QQ.validateSchemaDeps)(t)};ZS.default=JQ;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});const eJ=Bt,tJ={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:e,it:r}){e.contains===void 0&&(0,eJ.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};XS.default=tJ;Object.defineProperty(WS,"__esModule",{value:!0});const rJ=YS,nJ=ZS,iJ=XS,oJ=[rJ.default,nJ.default,iJ.default];WS.default=oJ;var QS={},JS={};Object.defineProperty(JS,"__esModule",{value:!0});const Qc=vt,Cx=Bt,sJ=vo,aJ={message:"must NOT have unevaluated properties",params:({params:t})=>(0,Qc._)`{unevaluatedProperty: ${t.unevaluatedProperty}}`},cJ={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:aJ,code(t){const{gen:e,schema:r,data:n,errsCount:i,it:a}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:o,props:s}=a;s instanceof Qc.Name?e.if((0,Qc._)`${s} !== true`,()=>e.forIn("key",n,u=>e.if(l(s,u),()=>d(u)))):s!==!0&&e.forIn("key",n,u=>s===void 0?d(u):e.if(c(s,u),()=>d(u))),a.props=!0,t.ok((0,Qc._)`${i} === ${sJ.default.errors}`);function d(u){if(r===!1){t.setParams({unevaluatedProperty:u}),t.error(),o||e.break();return}if(!(0,Cx.alwaysValidSchema)(a,r)){const h=e.name("valid");t.subschema({keyword:"unevaluatedProperties",dataProp:u,dataPropType:Cx.Type.Str},h),o||e.if((0,Qc.not)(h),()=>e.break())}}function l(u,h){return(0,Qc._)`!${u} || !${u}[${h}]`}function c(u,h){const y=[];for(const p in u)u[p]===!0&&y.push((0,Qc._)`${h} !== ${p}`);return(0,Qc.and)(...y)}}};JS.default=cJ;var e$={};Object.defineProperty(e$,"__esModule",{value:!0});const $l=vt,Nx=Bt,dJ={message:({params:{len:t}})=>(0,$l.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,$l._)`{limit: ${t}}`},lJ={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:dJ,code(t){const{gen:e,schema:r,data:n,it:i}=t,a=i.items||0;if(a===!0)return;const o=e.const("len",(0,$l._)`${n}.length`);if(r===!1)t.setParams({len:a}),t.fail((0,$l._)`${o} > ${a}`);else if(typeof r=="object"&&!(0,Nx.alwaysValidSchema)(i,r)){const d=e.var("valid",(0,$l._)`${o} <= ${a}`);e.if((0,$l.not)(d),()=>s(d,a)),t.ok(d)}i.items=!0;function s(d,l){e.forRange("i",l,o,c=>{t.subschema({keyword:"unevaluatedItems",dataProp:c,dataPropType:Nx.Type.Num},d),i.allErrors||e.if((0,$l.not)(d),()=>e.break())})}}};e$.default=lJ;Object.defineProperty(QS,"__esModule",{value:!0});const uJ=JS,fJ=e$,hJ=[uJ.default,fJ.default];QS.default=hJ;var t$={},r$={};Object.defineProperty(r$,"__esModule",{value:!0});const Ur=vt,pJ={message:({schemaCode:t})=>(0,Ur.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ur._)`{format: ${t}}`},yJ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:pJ,code(t,e){const{gen:r,data:n,$data:i,schema:a,schemaCode:o,it:s}=t,{opts:d,errSchemaPath:l,schemaEnv:c,self:u}=s;if(!d.validateFormats)return;i?h():y();function h(){const p=r.scopeValue("formats",{ref:u.formats,code:d.code.formats}),f=r.const("fDef",(0,Ur._)`${p}[${o}]`),g=r.let("fType"),v=r.let("format");r.if((0,Ur._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>r.assign(g,(0,Ur._)`${f}.type || "string"`).assign(v,(0,Ur._)`${f}.validate`),()=>r.assign(g,(0,Ur._)`"string"`).assign(v,f)),t.fail$data((0,Ur.or)(b(),m()));function b(){return d.strictSchema===!1?Ur.nil:(0,Ur._)`${o} && !${v}`}function m(){const w=c.$async?(0,Ur._)`(${f}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,Ur._)`${v}(${n})`,S=(0,Ur._)`(typeof ${v} == "function" ? ${w} : ${v}.test(${n}))`;return(0,Ur._)`${v} && ${v} !== true && ${g} === ${e} && !${S}`}}function y(){const p=u.formats[a];if(!p){b();return}if(p===!0)return;const[f,g,v]=m(p);f===e&&t.pass(w());function b(){if(d.strictSchema===!1){u.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${a}" ignored in schema at path "${l}"`}}function m(S){const T=S instanceof RegExp?(0,Ur.regexpCode)(S):d.code.formats?(0,Ur._)`${d.code.formats}${(0,Ur.getProperty)(a)}`:void 0,x=r.scopeValue("formats",{key:a,ref:S,code:T});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,Ur._)`${x}.validate`]:["string",S,x]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Ur._)`await ${v}(${n})`}return typeof g=="function"?(0,Ur._)`${v}(${n})`:(0,Ur._)`${v}.test(${n})`}}}};r$.default=yJ;Object.defineProperty(t$,"__esModule",{value:!0});const mJ=r$,gJ=[mJ.default];t$.default=gJ;var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.contentVocabulary=Wf.metadataVocabulary=void 0;Wf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Wf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(gS,"__esModule",{value:!0});const wJ=wS,bJ=vS,vJ=RS,_J=VS,EJ=WS,SJ=QS,$J=t$,Bx=Wf,TJ=[_J.default,wJ.default,bJ.default,(0,vJ.default)(!0),$J.default,Bx.metadataVocabulary,Bx.contentVocabulary,EJ.default,SJ.default];gS.default=TJ;var n$={},Rj={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(Rj);Object.defineProperty(n$,"__esModule",{value:!0});const Ju=vt,N_=Rj,Dx=Ri,AJ=Bt,PJ={message:({params:{discrError:t,tagName:e}})=>t===N_.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Ju._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},xJ={keyword:"discriminator",type:"object",schemaType:"object",error:PJ,code(t){const{gen:e,data:r,schema:n,parentSchema:i,it:a}=t,{oneOf:o}=i;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=n.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const d=e.let("valid",!1),l=e.const("tag",(0,Ju._)`${r}${(0,Ju.getProperty)(s)}`);e.if((0,Ju._)`typeof ${l} == "string"`,()=>c(),()=>t.error(!1,{discrError:N_.DiscrError.Tag,tag:l,tagName:s})),t.ok(d);function c(){const y=h();e.if(!1);for(const p in y)e.elseIf((0,Ju._)`${l} === ${p}`),e.assign(d,u(y[p]));e.else(),t.error(!1,{discrError:N_.DiscrError.Mapping,tag:l,tagName:s}),e.endIf()}function u(y){const p=e.name("valid"),f=t.subschema({keyword:"oneOf",schemaProp:y},p);return t.mergeEvaluated(f,Ju.Name),p}function h(){var y;const p={},f=v(i);let g=!0;for(let w=0;w<o.length;w++){let S=o[w];S?.$ref&&!(0,AJ.schemaHasRulesButRef)(S,a.self.RULES)&&(S=Dx.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,S?.$ref),S instanceof Dx.SchemaEnv&&(S=S.schema));const T=(y=S?.properties)===null||y===void 0?void 0:y[s];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);g=g&&(f||v(S)),b(T,w)}if(!g)throw new Error(`discriminator: "${s}" must be required`);return p;function v({required:w}){return Array.isArray(w)&&w.includes(s)}function b(w,S){if(w.const)m(w.const,S);else if(w.enum)for(const T of w.enum)m(T,S);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function m(w,S){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${s}" values must be unique strings`);p[w]=S}}}};n$.default=xJ;var i$={};const IJ="https://json-schema.org/draft/2020-12/schema",kJ="https://json-schema.org/draft/2020-12/schema",OJ={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},RJ="meta",jJ="Core and Validation specifications meta-schema",CJ=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],NJ=["object","boolean"],BJ="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",DJ={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},MJ={$schema:IJ,$id:kJ,$vocabulary:OJ,$dynamicAnchor:RJ,title:jJ,allOf:CJ,type:NJ,$comment:BJ,properties:DJ},LJ="https://json-schema.org/draft/2020-12/schema",UJ="https://json-schema.org/draft/2020-12/meta/applicator",FJ={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},zJ="meta",qJ="Applicator vocabulary meta-schema",KJ=["object","boolean"],VJ={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},HJ={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},GJ={$schema:LJ,$id:UJ,$vocabulary:FJ,$dynamicAnchor:zJ,title:qJ,type:KJ,properties:VJ,$defs:HJ},WJ="https://json-schema.org/draft/2020-12/schema",YJ="https://json-schema.org/draft/2020-12/meta/unevaluated",ZJ={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},XJ="meta",QJ="Unevaluated applicator vocabulary meta-schema",JJ=["object","boolean"],eee={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},tee={$schema:WJ,$id:YJ,$vocabulary:ZJ,$dynamicAnchor:XJ,title:QJ,type:JJ,properties:eee},ree="https://json-schema.org/draft/2020-12/schema",nee="https://json-schema.org/draft/2020-12/meta/content",iee={"https://json-schema.org/draft/2020-12/vocab/content":!0},oee="meta",see="Content vocabulary meta-schema",aee=["object","boolean"],cee={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},dee={$schema:ree,$id:nee,$vocabulary:iee,$dynamicAnchor:oee,title:see,type:aee,properties:cee},lee="https://json-schema.org/draft/2020-12/schema",uee="https://json-schema.org/draft/2020-12/meta/core",fee={"https://json-schema.org/draft/2020-12/vocab/core":!0},hee="meta",pee="Core vocabulary meta-schema",yee=["object","boolean"],mee={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},gee={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},wee={$schema:lee,$id:uee,$vocabulary:fee,$dynamicAnchor:hee,title:pee,type:yee,properties:mee,$defs:gee},bee="https://json-schema.org/draft/2020-12/schema",vee="https://json-schema.org/draft/2020-12/meta/format-annotation",_ee={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},Eee="meta",See="Format vocabulary meta-schema for annotation results",$ee=["object","boolean"],Tee={format:{type:"string"}},Aee={$schema:bee,$id:vee,$vocabulary:_ee,$dynamicAnchor:Eee,title:See,type:$ee,properties:Tee},Pee="https://json-schema.org/draft/2020-12/schema",xee="https://json-schema.org/draft/2020-12/meta/meta-data",Iee={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},kee="meta",Oee="Meta-data vocabulary meta-schema",Ree=["object","boolean"],jee={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},Cee={$schema:Pee,$id:xee,$vocabulary:Iee,$dynamicAnchor:kee,title:Oee,type:Ree,properties:jee},Nee="https://json-schema.org/draft/2020-12/schema",Bee="https://json-schema.org/draft/2020-12/meta/validation",Dee={"https://json-schema.org/draft/2020-12/vocab/validation":!0},Mee="meta",Lee="Validation vocabulary meta-schema",Uee=["object","boolean"],Fee={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},zee={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},qee={$schema:Nee,$id:Bee,$vocabulary:Dee,$dynamicAnchor:Mee,title:Lee,type:Uee,properties:Fee,$defs:zee};Object.defineProperty(i$,"__esModule",{value:!0});const Kee=MJ,Vee=GJ,Hee=tee,Gee=dee,Wee=wee,Yee=Aee,Zee=Cee,Xee=qee,Qee=["/properties"];function Jee(t){return[Kee,Vee,Hee,Gee,Wee,e(this,Yee),Zee,e(this,Xee)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function e(r,n){return t?r.$dataMetaSchema(n,Qee):n}}i$.default=Jee;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const r=Z6,n=gS,i=n$,a=i$,o="https://json-schema.org/draft/2020-12/schema";class s extends r.default{constructor(y={}){super({...y,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:y,meta:p}=this.opts;p&&(a.default.call(this,y),this.refs["http://json-schema.org/schema"]=o)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}t.exports=e=s,Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var d=ys;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var l=vt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});var c=Hy;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return c.default}});var u=Gy;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return u.default}})})(I_,I_.exports);var ete=I_.exports;const tte=th(ete);var Mx=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Xw{static authorizeConfigure(e){return Mx(this,void 0,void 0,function*(){const{protocolsConfigureMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}=e;yield Hs.performBaseValidation({incomingMessage:r,expectedGrantor:n,expectedGrantee:i,permissionGrant:a,messageStore:o}),Xw.verifyScope(r,a.scope)})}static authorizeQuery(e){var r;return Mx(this,void 0,void 0,function*(){const{expectedGrantee:n,expectedGrantor:i,incomingMessage:a,permissionGrant:o,messageStore:s}=e;yield Hs.performBaseValidation({incomingMessage:a,expectedGrantor:i,expectedGrantee:n,permissionGrant:o,messageStore:s});const l=o.scope.protocol,c=(r=a.descriptor.filter)===null||r===void 0?void 0:r.protocol;if(l!==void 0&&c!==l)throw new Pe(Te.ProtocolsGrantAuthorizationQueryProtocolScopeMismatch,`Grant protocol scope ${l} does not match protocol in message ${c}`)})}static verifyScope(e,r){if(r.protocol!==void 0&&r.protocol!==e.descriptor.definition.protocol)throw new Pe(Te.ProtocolsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the configure message.")}}var C0;(function(t){t.Anyone="anyone",t.Author="author",t.Recipient="recipient"})(C0||(C0={}));var Ra;(function(t){t.CoDelete="co-delete",t.CoPrune="co-prune",t.CoUpdate="co-update",t.Create="create",t.Delete="delete",t.Prune="prune",t.Query="query",t.Read="read",t.Subscribe="subscribe",t.Update="update"})(Ra||(Ra={}));var Pv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},rte=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Io extends bc{static parse(e){return Pv(this,void 0,void 0,function*(){return Fe.validateJsonSchema(e),Io.validateProtocolDefinition(e.descriptor.definition),yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor),br.validateTimestamp(e.descriptor.messageTimestamp),new Io(e)})}static create(e){var r;return Pv(this,void 0,void 0,function*(){const n={interface:bi.Protocols,method:Xn.Configure,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp(),definition:Io.normalizeDefinition(e.definition)},i=yield Fe.createAuthorization({descriptor:n,signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId}),a={descriptor:n,authorization:i};return Fe.validateJsonSchema(a),Io.validateProtocolDefinition(a.descriptor.definition),new Io(a)})}authorizeAuthorDelegate(e){return Pv(this,void 0,void 0,function*(){const r=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Xw.authorizeConfigure({protocolsConfigureMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})})}static validateProtocolDefinition(e){const{protocol:r,types:n}=e;Fd(r);for(const i in n){const a=n[i].schema;a!==void 0&&xw(a)}Io.validateStructure(e)}static validateStructure(e){const r=Object.keys(e.types),n=Io.fetchAllRolePathsRecursively("",e.structure,[]);Io.validateRuleSetRecursively({ruleSet:e.structure,ruleSetProtocolPath:"",recordTypes:r,roles:n})}static fetchAllRolePathsRecursively(e,r,n){if(e.split("/").length>10)throw new Pe(Te.ProtocolsConfigureRecordNestingDepthExceeded,"Record nesting depth exceeded 10 levels.");for(const i in r){if(i.startsWith("$"))continue;const a=r[i];let o;e===""?o=i:o=`${e}/${i}`,a.$role?n.push(o):Io.fetchAllRolePathsRecursively(o,a,n)}return n}static validateRuleSetRecursively(e){var r;const{ruleSet:n,ruleSetProtocolPath:i,recordTypes:a,roles:o}=e;if(n.$size!==void 0){const{min:d=0,max:l}=n.$size;if(l!==void 0&&l<d)throw new Pe(Te.ProtocolsConfigureInvalidSize,`Invalid size range found: max limit ${l} less than min limit ${d} at protocol path '${i}'`)}if(n.$tags){const d=new tte.default,l=n.$tags,c=rte(l,["$allowUndefinedTags","$requiredTags"]);for(const u in c){const h=c[u];if(!d.validateSchema(h)){const y=d.errorsText(d.errors,{dataVar:`${i}/$tags/${u}`});throw new Pe(Te.ProtocolsConfigureInvalidTagSchema,`tags schema validation error: ${y}`)}}}const s=(r=n.$actions)!==null&&r!==void 0?r:[];for(let d=0;d<s.length;d++){const l=s[d];if(l.role!==void 0&&!o.includes(l.role))throw new Pe(Te.ProtocolsConfigureRoleDoesNotExistAtGivenPath,`Role in action ${JSON.stringify(l)} for rule set ${i} does not exist.`);if(l.who==="anyone"&&l.of)throw new Pe(Te.ProtocolsConfigureInvalidActionOfNotAllowed,`'of' is not allowed at rule set protocol path (${i})`);if(l.who===C0.Recipient&&l.of===void 0&&l.can.some(u=>![Ra.CoUpdate,Ra.CoDelete,Ra.CoPrune].includes(u)))throw new Pe(Te.ProtocolsConfigureInvalidRecipientOfAction,"Rules for `recipient` without `of` property must have `can` containing only `co-update`, `co-delete`, and `co-prune`.");if(l.who===C0.Author&&!l.of)throw new Pe(Te.ProtocolsConfigureInvalidActionMissingOf,"'of' is required when 'author' is specified as 'who'");if(l.can!==void 0){if(l.can.includes(Ra.Update)&&!l.can.includes(Ra.Create))throw new Pe(Te.ProtocolsConfigureInvalidActionUpdateWithoutCreate,`Action rule ${JSON.stringify(l)} contains 'update' action but missing the required 'create' action.`);if(l.can.includes(Ra.Delete)&&!l.can.includes(Ra.Create))throw new Pe(Te.ProtocolsConfigureInvalidActionDeleteWithoutCreate,`Action rule ${JSON.stringify(l)} contains 'delete' action but missing the required 'create' action.`)}for(let c=d+1;c<s.length;c++){const u=s[c];if(l.who!==void 0){if(l.who===u.who&&l.of===u.of)throw new Pe(Te.ProtocolsConfigureDuplicateActorInRuleSet,`More than one action rule per actor ${l.who} of ${l.of} not allowed within a rule set: ${JSON.stringify(l)}`)}else if(l.role===u.role)throw new Pe(Te.ProtocolsConfigureDuplicateRoleInRuleSet,`More than one action rule per role ${l.role} not allowed within a rule set: ${JSON.stringify(l)}`)}}for(const d in n){if(d.startsWith("$"))continue;if(!a.includes(d))throw new Pe(Te.ProtocolsConfigureInvalidRuleSetRecordType,`Rule set ${d} is not declared as an allowed type in the protocol definition.`);const l=n[d];let c;i===""?c=d:c=`${i}/${d}`,Io.validateRuleSetRecursively({ruleSet:l,ruleSetProtocolPath:c,recordTypes:a,roles:o})}}static normalizeDefinition(e){const r=Object.assign({},e.types);for(const n in r){const i=r[n].schema;i!==void 0&&(r[n].schema=Iw(i))}return Object.assign(Object.assign({},e),{protocol:kd(e.protocol),types:r})}}var xv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Lp extends bc{static parse(e){return xv(this,void 0,void 0,function*(){return e.authorization!==void 0&&(yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor)),e.descriptor.filter!==void 0&&Fd(e.descriptor.filter.protocol),br.validateTimestamp(e.descriptor.messageTimestamp),new Lp(e)})}static create(e){var r;return xv(this,void 0,void 0,function*(){const n={interface:bi.Protocols,method:Xn.Query,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp(),filter:e.filter?Lp.normalizeFilter(e.filter):void 0};go(n);let i;e.signer!==void 0&&(i=yield Fe.createAuthorization({descriptor:n,signer:e.signer,permissionGrantId:e.permissionGrantId}));const a={descriptor:n,authorization:i};return Fe.validateJsonSchema(a),new Lp(a)})}static normalizeFilter(e){return Object.assign(Object.assign({},e),{protocol:kd(e.protocol)})}authorize(e,r){return xv(this,void 0,void 0,function*(){if(this.author!==e)if(this.author!==void 0&&this.signaturePayload.permissionGrantId){const n=yield er.fetchGrant(e,r,this.signaturePayload.permissionGrantId);yield Xw.authorizeQuery({expectedGrantor:e,expectedGrantee:this.author,incomingMessage:this.message,permissionGrant:n,messageStore:r})}else throw new Pe(Te.ProtocolsQueryUnauthorized,"The ProtocolsQuery failed authorization")})}}var Iv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class N0 extends bc{static parse(e){return Iv(this,void 0,void 0,function*(){let r;return e.authorization!==void 0&&(r=yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield cn.validateDelegatedGrantReferentialIntegrity(e,r),br.validateTimestamp(e.descriptor.messageTimestamp),new N0(e)})}static create(e){var r,n;return Iv(this,void 0,void 0,function*(){const i=e.recordId,a=br.getCurrentTimestamp(),o={interface:bi.Records,method:Xn.Delete,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:a,recordId:i,prune:(n=e.prune)!==null&&n!==void 0?n:!1},s=yield Fe.createAuthorization({descriptor:o,signer:e.signer,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}),d={descriptor:o,authorization:s};return Fe.validateJsonSchema(d),new N0(d)})}constructIndexes(e){const r=this.message,n=Object.assign({},r.descriptor),{protocol:i,protocolPath:a,recipient:o,schema:s,parentId:d,dateCreated:l}=e.descriptor,c=Object.assign({protocol:i,protocolPath:a,recipient:o,schema:s,parentId:d,dateCreated:l,contextId:e.contextId,author:this.author},n);return go(c),c}authorizeDelegate(e,r){return Iv(this,void 0,void 0,function*(){const n=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Ys.authorizeDelete({recordsDeleteMessage:this.message,recordsWriteToDelete:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})})}}var Lx;(function(t){t.RecordsDelete="RecordsDelete"})(Lx||(Lx={}));var Ux;(function(t){t[t.Descending=-1]="Descending",t[t.Ascending=1]="Ascending"})(Ux||(Ux={}));var kv=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class B0 extends bc{static parse(e){return kv(this,void 0,void 0,function*(){let r;return e.authorization!==void 0&&(r=yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield cn.validateDelegatedGrantReferentialIntegrity(e,r),br.validateTimestamp(e.descriptor.messageTimestamp),new B0(e)})}static create(e){var r;return kv(this,void 0,void 0,function*(){const{filter:n,signer:i,permissionGrantId:a,protocolRole:o}=e,s=br.getCurrentTimestamp(),d={interface:bi.Records,method:Xn.Read,filter:cn.normalizeFilter(n),messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:s};go(d);let l;i!==void 0&&(l=yield Fe.createAuthorization({descriptor:d,signer:i,permissionGrantId:a,protocolRole:o,delegatedGrant:e.delegatedGrant}));const c={descriptor:d,authorization:l};return Fe.validateJsonSchema(c),new B0(c)})}authorizeDelegate(e,r){return kv(this,void 0,void 0,function*(){const n=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Ys.authorizeRead({recordsReadMessage:this.message,recordsWriteMessageToBeRead:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:n,messageStore:r})})}}var Ov=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class D0 extends bc{static parse(e){return Ov(this,void 0,void 0,function*(){let r;if(e.authorization!==void 0&&(r=yield Fe.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield cn.validateDelegatedGrantReferentialIntegrity(e,r),r?.protocolRole!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new Pe(Te.RecordsSubscribeFilterMissingRequiredProperties,"Role-authorized subscriptions must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&Fd(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&xw(e.descriptor.filter.schema),br.validateTimestamp(e.descriptor.messageTimestamp),new D0(e)})}static create(e){var r;return Ov(this,void 0,void 0,function*(){const n={interface:bi.Records,method:Xn.Subscribe,messageTimestamp:(r=e.messageTimestamp)!==null&&r!==void 0?r:br.getCurrentTimestamp(),filter:cn.normalizeFilter(e.filter)};go(n);const i=e.signer;let a;i&&(a=yield Fe.createAuthorization({descriptor:n,signer:i,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));const o={descriptor:n,authorization:a};return Fe.validateJsonSchema(o),new D0(o)})}authorizeDelegate(e){return Ov(this,void 0,void 0,function*(){const r=yield ms.parse(this.message.authorization.authorDelegatedGrant);yield Ys.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:e})})}}var Fx;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(Fx||(Fx={}));var zx;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(zx||(zx={}));function nte(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function ite(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),o=a.charCodeAt(0);if(r[o]!==255)throw new TypeError(a+" is ambiguous");r[o]=i}var s=t.length,d=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var f=0,g=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,f++;for(var m=(b-v)*c+1>>>0,w=new Uint8Array(m);v!==b;){for(var S=p[v],T=0,x=m-1;(S!==0||T<g)&&x!==-1;x--,T++)S+=256*w[x]>>>0,w[x]=S%s>>>0,S=S/s>>>0;if(S!==0)throw new Error("Non-zero carry");g=T,v++}for(var I=m-g;I!==m&&w[I]===0;)I++;for(var M=d.repeat(f);I<m;++I)M+=t.charAt(w[I]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var f=0;if(p[f]!==" "){for(var g=0,v=0;p[f]===d;)g++,f++;for(var b=(p.length-f)*l+1>>>0,m=new Uint8Array(b);p[f];){var w=r[p.charCodeAt(f)];if(w===255)return;for(var S=0,T=b-1;(w!==0||S<v)&&T!==-1;T--,S++)w+=s*m[T]>>>0,m[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=S,f++}if(p[f]!==" "){for(var x=b-v;x!==b&&m[x]===0;)x++;for(var I=new Uint8Array(g+(b-x)),M=g;x!==b;)I[M++]=m[x++];return I}}}function y(p){var f=h(p);if(f)return f;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:h,decode:y}}var ote=ite,ste=ote;let ate=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}};class cte{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jj(this,e)}}class dte{decoders;constructor(e){this.decoders=e}or(e){return jj(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function jj(t,e){return new dte({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class lte{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ate(e,r,n),this.decoder=new cte(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function Cj({name:t,prefix:e,encode:r,decode:n}){return new lte(t,e,r,n)}function Nj({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=ste(r,t);return Cj({prefix:e,name:t,encode:n,decode:a=>nte(i(a))})}function ute(t,e,r,n){const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;const o=new Uint8Array(a*r/8|0);let s=0,d=0,l=0;for(let c=0;c<a;++c){const u=i[t[c]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|u,s+=r,s>=8&&(s-=8,o[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return o}function fte(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let a="",o=0,s=0;for(let d=0;d<t.length;++d)for(s=s<<8|t[d],o+=8;o>r;)o-=r,a+=e[i&s>>o];if(o!==0&&(a+=e[i&s<<r-o]),n)for(;a.length*r&7;)a+="=";return a}function _o({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Cj({prefix:e,name:t,encode(i){return fte(i,n,r)},decode(i){return ute(i,n,r,t)}})}_o({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});_o({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});_o({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});_o({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});_o({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});_o({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});_o({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});_o({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});_o({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});Nj({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Nj({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});_o({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});_o({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});_o({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});_o({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});new TextEncoder;new TextDecoder;var hte=Bj,qx=128,pte=127,yte=~pte,mte=Math.pow(2,31);function Bj(t,e,r){e=e||[],r=r||0;for(var n=r;t>=mte;)e[r++]=t&255|qx,t/=128;for(;t&yte;)e[r++]=t&255|qx,t>>>=7;return e[r]=t|0,Bj.bytes=r-n+1,e}var gte=B_,wte=128,Kx=127;function B_(t,n){var r=0,n=n||0,i=0,a=n,o,s=t.length;do{if(a>=s)throw B_.bytes=0,new RangeError("Could not decode varint");o=t[a++],r+=i<28?(o&Kx)<<i:(o&Kx)*Math.pow(2,i),i+=7}while(o>=wte);return B_.bytes=a-n,r}var bte=Math.pow(2,7),vte=Math.pow(2,14),_te=Math.pow(2,21),Ete=Math.pow(2,28),Ste=Math.pow(2,35),$te=Math.pow(2,42),Tte=Math.pow(2,49),Ate=Math.pow(2,56),Pte=Math.pow(2,63),xte=function(t){return t<bte?1:t<vte?2:t<_te?3:t<Ete?4:t<Ste?5:t<$te?6:t<Tte?7:t<Ate?8:t<Pte?9:10},Ite={encode:hte,decode:gte,encodingLength:xte},M0=Ite;function Vx(t,e=0){return[M0.decode(t,e),M0.decode.bytes]}function kte(t,e,r=0){return M0.encode(t,e,r),e}function Ote(t){return M0.encodingLength(t)}let Vd=class Jc{static addPrefix(e){var r;let{code:n,data:i,name:a}=e;if(!(a?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Jc.codeToName.has(n)?n:Jc.nameToCode.get(a),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=Ote(n),s=new Uint8Array(o+i.byteLength);return s.set(i,o),kte(n,s),s}static getCodeFromData(e){const{prefixedData:r}=e,[n,i]=Vx(r);return n}static getCodeFromName(e){const{name:r}=e,n=Jc.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=Jc.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){Jc.codeToName.set(e.code,e.name),Jc.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,i]=Vx(r),a=Jc.codeToName.get(n);if(a===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:a}}};Vd.codeToName=new Map;Vd.nameToCode=new Map;Vd.registerCodec({code:237,name:"ed25519-pub"});Vd.registerCodec({code:4864,name:"ed25519-priv"});Vd.registerCodec({code:236,name:"x25519-pub"});Vd.registerCodec({code:4866,name:"x25519-priv"});Vd.registerCodec({code:231,name:"secp256k1-pub"});Vd.registerCodec({code:4865,name:"secp256k1-priv"});var Hd={},Qw={},Dj={};Dj.supports=function(...e){const r=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var Mj={},ga=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Pu={};let Rv=null;var Lj=function(){return Rv===null&&(Rv={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Rv},Yy={},o$={};const jv=ga,Rte=new Set(["buffer","view","utf8"]);let jte=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Rte.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new jv(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new jv(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new jv(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};o$.Encoding=jte;const{Buffer:s$}=Dr||{},{Encoding:a$}=o$,Cte=Lj;let c$=class extends a${constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new d$({encode:this.encode,decode:e=>this.decode(s$.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},d$=class extends a${constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new c$({encode:e=>{const r=this.encode(e);return s$.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Nte=class extends a${constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new c$({encode:e=>s$.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:r}=Cte();return new d$({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Yy.BufferFormat=c$;Yy.ViewFormat=d$;Yy.UTF8Format=Nte;const{Buffer:gi}=Dr||{Buffer:{isBuffer:()=>!1}},{textEncoder:Uj,textDecoder:Hx}=Lj(),{BufferFormat:Zy,ViewFormat:l$,UTF8Format:Fj}=Yy,L0=t=>t;Pu.utf8=new Fj({encode:function(t){return gi.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?Hx.decode(t):String(t)},decode:L0,name:"utf8",createViewTranscoder(){return new l$({encode:function(t){return ArrayBuffer.isView(t)?t:Uj.encode(t)},decode:function(t){return Hx.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Zy({encode:function(t){return gi.isBuffer(t)?t:ArrayBuffer.isView(t)?gi.from(t.buffer,t.byteOffset,t.byteLength):gi.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Pu.json=new Fj({encode:JSON.stringify,decode:JSON.parse,name:"json"});Pu.buffer=new Zy({encode:function(t){return gi.isBuffer(t)?t:ArrayBuffer.isView(t)?gi.from(t.buffer,t.byteOffset,t.byteLength):gi.from(String(t),"utf8")},decode:L0,name:"buffer",createViewTranscoder(){return new l$({encode:function(t){return ArrayBuffer.isView(t)?t:gi.from(String(t),"utf8")},decode:function(t){return gi.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Pu.view=new l$({encode:function(t){return ArrayBuffer.isView(t)?t:Uj.encode(t)},decode:L0,name:"view",createBufferTranscoder(){return new Zy({encode:function(t){return gi.isBuffer(t)?t:ArrayBuffer.isView(t)?gi.from(t.buffer,t.byteOffset,t.byteLength):gi.from(String(t),"utf8")},decode:L0,name:`${this.name}+buffer`})}});Pu.hex=new Zy({encode:function(t){return gi.isBuffer(t)?t:gi.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Pu.base64=new Zy({encode:function(t){return gi.isBuffer(t)?t:gi.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const Gx=ga,U0=Pu,{Encoding:Bte}=o$,{BufferFormat:Dte,ViewFormat:Mte,UTF8Format:Lte}=Yy,zh=Symbol("formats"),Bm=Symbol("encodings"),Ute=new Set(["buffer","view","utf8"]);let Fte=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>Ute.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Bm]=new Map,this[zh]=new Set(e);for(const r in U0)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Bm].values()))}encoding(e){let r=this[Bm].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=Vte[e],!r)throw new Gx(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=zte(e)}const{name:n,format:i}=r;if(!this[zh].has(i))if(this[zh].has("view"))r=r.createViewTranscoder();else if(this[zh].has("buffer"))r=r.createBufferTranscoder();else if(this[zh].has("utf8"))r=r.createUTF8Transcoder();else throw new Gx(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const a of[e,n,r.name,r.commonName])this[Bm].set(a,r)}return r}};Mj.Transcoder=Fte;function zte(t){if(t instanceof Bte)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${Hte++}`;switch(qte(t)){case"view":return new Mte({...t,name:r});case"utf8":return new Lte({...t,name:r});case"buffer":return new Dte({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function qte(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const Kte={binary:U0.buffer,"utf-8":U0.utf8},Vte={...U0,...Kte};let Hte=0;var Eh={},Gte=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),Wx=Gte;Eh.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,i){t=function(a,o){a?i(a):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};Eh.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){Wx(()=>e(null,r))}).catch(function(r){Wx(()=>e(r))})};var wa={},Xy={};Xy.getCallback=function(t,e){return typeof t=="function"?t:e};Xy.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:Cv}=Eh,so=ga,{getOptions:Nv,getCallback:Yx}=Xy,Jd=Symbol("promise"),Fu=Symbol("callback"),xs=Symbol("working"),Cl=Symbol("handleOne"),Ua=Symbol("handleMany"),Bv=Symbol("autoClose"),Bd=Symbol("finishWork"),Js=Symbol("returnMany"),Uc=Symbol("closing"),qh=Symbol("handleClose"),Dm=Symbol("closed"),Kh=Symbol("closeCallbacks"),vd=Symbol("keyEncoding"),du=Symbol("valueEncoding"),Dv=Symbol("abortOnClose"),Mm=Symbol("legacy"),Mv=Symbol("keys"),Lv=Symbol("values"),Fc=Symbol("limit"),Uo=Symbol("count"),Lm=Object.freeze({}),Wte=()=>{};let Zx=!1;class u${constructor(e,r,n){if(typeof e!="object"||e===null){const i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[Dm]=!1,this[Kh]=[],this[xs]=!1,this[Uc]=!1,this[Bv]=!1,this[Fu]=null,this[Cl]=this[Cl].bind(this),this[Ua]=this[Ua].bind(this),this[qh]=this[qh].bind(this),this[vd]=r[vd],this[du]=r[du],this[Mm]=n,this[Fc]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Uo]=0,this[Dv]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Uo]}get limit(){return this[Fc]}next(e){let r;if(e===void 0)r=new Promise((n,i)=>{e=(a,o,s)=>{a?i(a):this[Mm]?o===void 0&&s===void 0?n():n([o,s]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Uc]?this.nextTick(e,new so("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[xs]?this.nextTick(e,new so("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[xs]=!0,this[Fu]=e,this[Uo]>=this[Fc]?this.nextTick(this[Cl],null):this._next(this[Cl])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=Yx(r,n),n=Cv(n,Jd),r=Nv(r,Lm),Number.isInteger(e)?(this[Uc]?this.nextTick(n,new so("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[xs]?this.nextTick(n,new so("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Fc]<1/0&&(e=Math.min(e,this[Fc]-this[Uo])),this[xs]=!0,this[Fu]=n,e<=0?this.nextTick(this[Ua],null,[]):this._nextv(e,r,this[Ua])),n[Jd]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Jd])}_nextv(e,r,n){const i=[],a=(o,s,d)=>{if(o)return n(o);if(this[Mm]?s===void 0&&d===void 0:s===void 0)return n(null,i);i.push(this[Mm]?[s,d]:s),i.length===e?n(null,i):this._next(a)};this._next(a)}all(e,r){return r=Yx(e,r),r=Cv(r,Jd),e=Nv(e,Lm),this[Uc]?this.nextTick(r,new so("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[xs]?this.nextTick(r,new so("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[xs]=!0,this[Fu]=r,this[Bv]=!0,this[Uo]>=this[Fc]?this.nextTick(this[Ua],null,[]):this._all(e,this[Ua])),r[Jd]}_all(e,r){let n=this[Uo];const i=[],a=()=>{const s=this[Fc]<1/0?Math.min(1e3,this[Fc]-n):1e3;s<=0?this.nextTick(r,null,i):this._nextv(s,Lm,o)},o=(s,d)=>{s?r(s):d.length===0?r(null,i):(i.push.apply(i,d),n+=d.length,a())};a()}[Bd](){const e=this[Fu];return this[Dv]&&e===null?Wte:(this[xs]=!1,this[Fu]=null,this[Uc]&&this._close(this[qh]),e)}[Js](e,r,n){this[Bv]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=Nv(r,Lm),!this[Uc]){if(this[xs])throw new so("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[vd]),i=n.format;r.keyEncoding!==i&&(r={...r,keyEncoding:i});const a=this.db.prefixKey(n.encode(e),i);this._seek(a,r)}}}_seek(e,r){throw new so("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=Cv(e,Jd),this[Dm]?this.nextTick(e):this[Uc]?this[Kh].push(e):(this[Uc]=!0,this[Kh].push(e),this[xs]?this[Dv]&&this[Bd]()(new so("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[qh])),e[Jd]}_close(e){this.nextTick(e)}[qh](){this[Dm]=!0,this.db.detachResource(this);const e=this[Kh];this[Kh]=[];for(const r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Dm]||await this.close()}}}let Jw=class extends u${constructor(e,r){super(e,r,!0),this[Mv]=r.keys!==!1,this[Lv]=r.values!==!1}[Cl](e,r,n){const i=this[Bd]();if(e)return i(e);try{r=this[Mv]&&r!==void 0?this[vd].decode(r):void 0,n=this[Lv]&&n!==void 0?this[du].decode(n):void 0}catch(a){return i(new Yf("entry",a))}r===void 0&&n===void 0||this[Uo]++,i(null,r,n)}[Ua](e,r){const n=this[Bd]();if(e)return this[Js](n,e);try{for(const i of r){const a=i[0],o=i[1];i[0]=this[Mv]&&a!==void 0?this[vd].decode(a):void 0,i[1]=this[Lv]&&o!==void 0?this[du].decode(o):void 0}}catch(i){return this[Js](n,new Yf("entries",i))}this[Uo]+=r.length,this[Js](n,null,r)}end(e){return!Zx&&typeof console<"u"&&(Zx=!0,console.warn(new so("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Yte=class extends u${constructor(e,r){super(e,r,!1)}[Cl](e,r){const n=this[Bd]();if(e)return n(e);try{r=r!==void 0?this[vd].decode(r):void 0}catch(i){return n(new Yf("key",i))}r!==void 0&&this[Uo]++,n(null,r)}[Ua](e,r){const n=this[Bd]();if(e)return this[Js](n,e);try{for(let i=0;i<r.length;i++){const a=r[i];r[i]=a!==void 0?this[vd].decode(a):void 0}}catch(i){return this[Js](n,new Yf("keys",i))}this[Uo]+=r.length,this[Js](n,null,r)}},Zte=class extends u${constructor(e,r){super(e,r,!1)}[Cl](e,r){const n=this[Bd]();if(e)return n(e);try{r=r!==void 0?this[du].decode(r):void 0}catch(i){return n(new Yf("value",i))}r!==void 0&&this[Uo]++,n(null,r)}[Ua](e,r){const n=this[Bd]();if(e)return this[Js](n,e);try{for(let i=0;i<r.length;i++){const a=r[i];r[i]=a!==void 0?this[du].decode(a):void 0}}catch(i){return this[Js](n,new Yf("values",i))}this[Uo]+=r.length,this[Js](n,null,r)}};class Yf extends so{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(Jw.prototype,t.split(" ")[0],{get(){throw new so(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new so(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});Jw.keyEncoding=vd;Jw.valueEncoding=du;wa.AbstractIterator=Jw;wa.AbstractKeyIterator=Yte;wa.AbstractValueIterator=Zte;var f$={};const{AbstractKeyIterator:Xte,AbstractValueIterator:Qte}=wa,Tl=Symbol("iterator"),Vh=Symbol("callback"),Zf=Symbol("handleOne"),Hl=Symbol("handleMany");let D_=class extends Xte{constructor(e,r){super(e,r),this[Tl]=e.iterator({...r,keys:!0,values:!1}),this[Zf]=this[Zf].bind(this),this[Hl]=this[Hl].bind(this)}},zj=class extends Qte{constructor(e,r){super(e,r),this[Tl]=e.iterator({...r,keys:!1,values:!0}),this[Zf]=this[Zf].bind(this),this[Hl]=this[Hl].bind(this)}};for(const t of[D_,zj]){const e=t===D_,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[Vh]=n,this[Tl].next(this[Zf])},t.prototype[Zf]=function(n,i,a){const o=this[Vh];n?o(n):o(null,e?i:a)},t.prototype._nextv=function(n,i,a){this[Vh]=a,this[Tl].nextv(n,i,this[Hl])},t.prototype._all=function(n,i){this[Vh]=i,this[Tl].all(n,this[Hl])},t.prototype[Hl]=function(n,i){const a=this[Vh];n?a(n):a(null,i.map(r))},t.prototype._seek=function(n,i){this[Tl].seek(n,i)},t.prototype._close=function(n){this[Tl].close(n)}}f$.DefaultKeyIterator=D_;f$.DefaultValueIterator=zj;var eb={};const{AbstractIterator:Jte,AbstractKeyIterator:ere,AbstractValueIterator:tre}=wa,Uv=ga,Mi=Symbol("nut"),tb=Symbol("undefer"),rb=Symbol("factory");let qj=class extends Jte{constructor(e,r){super(e,r),this[Mi]=null,this[rb]=()=>e.iterator(r),this.db.defer(()=>this[tb]())}},Kj=class extends ere{constructor(e,r){super(e,r),this[Mi]=null,this[rb]=()=>e.keys(r),this.db.defer(()=>this[tb]())}},Vj=class extends tre{constructor(e,r){super(e,r),this[Mi]=null,this[rb]=()=>e.values(r),this.db.defer(()=>this[tb]())}};for(const t of[qj,Kj,Vj])t.prototype[tb]=function(){this.db.status==="open"&&(this[Mi]=this[rb]())},t.prototype._next=function(e){this[Mi]!==null?this[Mi].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Uv("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Mi]!==null?this[Mi].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new Uv("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Mi]!==null?this[Mi].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new Uv("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Mi]!==null?this[Mi]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Mi]!==null?this[Mi].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};eb.DeferredIterator=qj;eb.DeferredKeyIterator=Kj;eb.DeferredValueIterator=Vj;var Hj={},h$={};const{fromCallback:Xx}=Eh,Um=ga,{getCallback:rre,getOptions:nre}=Xy,Fm=Symbol("promise"),So=Symbol("status"),zu=Symbol("operations"),Hh=Symbol("finishClose"),qu=Symbol("closeCallbacks");let ire=class{constructor(e){if(typeof e!="object"||e===null){const r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[zu]=[],this[qu]=[],this[So]="open",this[Hh]=this[Hh].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[zu].length}put(e,r,n){if(this[So]!=="open")throw new Um("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const i=this.db._checkKey(e)||this.db._checkValue(r);if(i)throw i;const a=n&&n.sublevel!=null?n.sublevel:this.db,o=n,s=a.keyEncoding(n&&n.keyEncoding),d=a.valueEncoding(n&&n.valueEncoding),l=s.format;n={...n,keyEncoding:l,valueEncoding:d.format},a!==this.db&&(n.sublevel=null);const c=a.prefixKey(s.encode(e),l),u=d.encode(r);return this._put(c,u,n),this[zu].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[So]!=="open")throw new Um("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const i=r&&r.sublevel!=null?r.sublevel:this.db,a=r,o=i.keyEncoding(r&&r.keyEncoding),s=o.format;return r={...r,keyEncoding:s},i!==this.db&&(r.sublevel=null),this._del(i.prefixKey(o.encode(e),s),r),this[zu].push({...a,type:"del",key:e}),this}_del(e,r){}clear(){if(this[So]!=="open")throw new Um("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[zu]=[],this}_clear(){}write(e,r){return r=rre(e,r),r=Xx(r,Fm),e=nre(e),this[So]!=="open"?this.nextTick(r,new Um("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[So]="writing",this._write(e,n=>{this[So]="closing",this[qu].push(()=>r(n)),n||this.db.emit("batch",this[zu]),this._close(this[Hh])})),r[Fm]}_write(e,r){}close(e){return e=Xx(e,Fm),this[So]==="closing"?this[qu].push(e):this[So]==="closed"?this.nextTick(e):(this[qu].push(e),this[So]!=="writing"&&(this[So]="closing",this._close(this[Hh]))),e[Fm]}_close(e){this.nextTick(e)}[Hh](){this[So]="closed",this.db.detachResource(this);const e=this[qu];this[qu]=[];for(const r of e)r()}};h$.AbstractChainedBatch=ire;const{AbstractChainedBatch:ore}=h$,sre=ga,Ku=Symbol("encoded");let are=class extends ore{constructor(e){super(e),this[Ku]=[]}_put(e,r,n){this[Ku].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Ku].push({...r,type:"del",key:e})}_clear(){this[Ku]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Ku].length===0?this.nextTick(r):this.db._batch(this[Ku],e,r):this.nextTick(r,new sre("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Hj.DefaultChainedBatch=are;const Qx=ga,cre=Object.prototype.hasOwnProperty,dre=new Set(["lt","lte","gt","gte"]);var lre=function(t,e){const r={};for(const n in t)if(cre.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new Qx(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new Qx("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});dre.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Jx;var Gj=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(Jx||(Jx=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),Fv,eI;function ure(){if(eI)return Fv;eI=1;const t=Gj;return Fv=function(e,...r){r.length===0?t(e):t(()=>e(...r))},Fv}var Gh={},tI;function fre(){if(tI)return Gh;tI=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=wa,n=Symbol("unfix"),i=Symbol("iterator"),a=Symbol("handleOne"),o=Symbol("handleMany"),s=Symbol("callback");class d extends t{constructor(h,y,p,f){super(h,y),this[i]=p,this[n]=f,this[a]=this[a].bind(this),this[o]=this[o].bind(this),this[s]=null}[a](h,y,p){const f=this[s];if(h)return f(h);y!==void 0&&(y=this[n](y)),f(h,y,p)}[o](h,y){const p=this[s];if(h)return p(h);for(const f of y){const g=f[0];g!==void 0&&(f[0]=this[n](g))}p(h,y)}}class l extends e{constructor(h,y,p,f){super(h,y),this[i]=p,this[n]=f,this[a]=this[a].bind(this),this[o]=this[o].bind(this),this[s]=null}[a](h,y){const p=this[s];if(h)return p(h);y!==void 0&&(y=this[n](y)),p(h,y)}[o](h,y){const p=this[s];if(h)return p(h);for(let f=0;f<y.length;f++){const g=y[f];g!==void 0&&(y[f]=this[n](g))}p(h,y)}}class c extends r{constructor(h,y,p){super(h,y),this[i]=p}}for(const u of[d,l])u.prototype._next=function(h){this[s]=h,this[i].next(this[a])},u.prototype._nextv=function(h,y,p){this[s]=p,this[i].nextv(h,y,this[o])},u.prototype._all=function(h,y){this[s]=y,this[i].all(h,this[o])};for(const u of[c])u.prototype._next=function(h){this[i].next(h)},u.prototype._nextv=function(h,y,p){this[i].nextv(h,y,p)},u.prototype._all=function(h,y){this[i].all(h,y)};for(const u of[d,l,c])u.prototype._seek=function(h,y){this[i].seek(h,y)},u.prototype._close=function(h){this[i].close(h)};return Gh.AbstractSublevelIterator=d,Gh.AbstractSublevelKeyIterator=l,Gh.AbstractSublevelValueIterator=c,Gh}var zv,rI;function hre(){if(rI)return zv;rI=1;const t=ga,{Buffer:e}=Dr||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:i}=fre(),a=Symbol("prefix"),o=Symbol("upperBound"),s=Symbol("prefixRange"),d=Symbol("parent"),l=Symbol("unfix"),c=new TextEncoder,u={separator:"!"};zv=function({AbstractLevel:v}){class b extends v{static defaults(w){if(typeof w=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(w&&w.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return w==null?u:w.separator?w:{...w,separator:"!"}}constructor(w,S,T){const{separator:x,manifest:I,...M}=b.defaults(T);S=g(S,x);const H=x.charCodeAt(0)+1,re=w[d]||w;if(!c.encode(S).every(oe=>oe>H&&oe<127))throw new t(`Prefix must use bytes > ${H} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(h(re,I),M);const J=(w.prefix||"")+x+S+x,z=J.slice(0,-1)+String.fromCharCode(H);this[d]=re,this[a]=new p(J),this[o]=new p(z),this[l]=new f,this.nextTick=re.nextTick}prefixKey(w,S){if(S==="utf8")return this[a].utf8+w;if(w.byteLength===0)return this[a][S];if(S==="view"){const T=this[a].view,x=new Uint8Array(T.byteLength+w.byteLength);return x.set(T,0),x.set(w,T.byteLength),x}else{const T=this[a].buffer;return e.concat([T,w],T.byteLength+w.byteLength)}}[s](w,S){w.gte!==void 0?w.gte=this.prefixKey(w.gte,S):w.gt!==void 0?w.gt=this.prefixKey(w.gt,S):w.gte=this[a][S],w.lte!==void 0?w.lte=this.prefixKey(w.lte,S):w.lt!==void 0?w.lt=this.prefixKey(w.lt,S):w.lte=this[o][S]}get prefix(){return this[a].utf8}get db(){return this[d]}_open(w,S){this[d].open({passive:!0},S)}_put(w,S,T,x){this[d].put(w,S,T,x)}_get(w,S,T){this[d].get(w,S,T)}_getMany(w,S,T){this[d].getMany(w,S,T)}_del(w,S,T){this[d].del(w,S,T)}_batch(w,S,T){this[d].batch(w,S,T)}_clear(w,S){this[s](w,w.keyEncoding),this[d].clear(w,S)}_iterator(w){this[s](w,w.keyEncoding);const S=this[d].iterator(w),T=this[l].get(this[a].utf8.length,w.keyEncoding);return new r(this,w,S,T)}_keys(w){this[s](w,w.keyEncoding);const S=this[d].keys(w),T=this[l].get(this[a].utf8.length,w.keyEncoding);return new n(this,w,S,T)}_values(w){this[s](w,w.keyEncoding);const S=this[d].values(w);return new i(this,w,S)}}return{AbstractSublevel:b}};const h=function(v,b){return{...v.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...b,encodings:{utf8:y(v,"utf8"),buffer:y(v,"buffer"),view:y(v,"view")}}},y=function(v,b){return v.supports.encodings[b]?v.keyEncoding(b).name===b:!1};class p{constructor(b){this.utf8=b,this.view=c.encode(b),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class f{constructor(){this.cache=new Map}get(b,m){let w=this.cache.get(m);return w===void 0&&(m==="view"?w=function(S,T){return T.subarray(S)}.bind(null,b):w=function(S,T){return T.slice(S)}.bind(null,b),this.cache.set(m,w)),w}}const g=function(v,b){let m=0,w=v.length;for(;m<w&&v[m]===b;)m++;for(;w>m&&v[w-1]===b;)w--;return v.slice(m,w)};return zv}const{supports:pre}=Dj,{Transcoder:yre}=Mj,{EventEmitter:mre}=fa,{fromCallback:zc}=Eh,rs=ga,{AbstractIterator:el}=wa,{DefaultKeyIterator:gre,DefaultValueIterator:wre}=f$,{DeferredIterator:bre,DeferredKeyIterator:vre,DeferredValueIterator:_re}=eb,{DefaultChainedBatch:nI}=Hj,{getCallback:tl,getOptions:qc}=Xy,zm=lre,Et=Symbol("promise"),Ta=Symbol("landed"),rl=Symbol("resources"),qv=Symbol("closeResources"),Wh=Symbol("operations"),Yh=Symbol("undefer"),qm=Symbol("deferOpen"),iI=Symbol("options"),jt=Symbol("status"),nl=Symbol("defaultOptions"),Vu=Symbol("transcoder"),Km=Symbol("keyEncoding"),Kv=Symbol("valueEncoding"),Ere=()=>{};let p$=class extends mre{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=qc(r);const{keyEncoding:n,valueEncoding:i,passive:a,...o}=r;this[rl]=new Set,this[Wh]=[],this[qm]=!0,this[iI]=o,this[jt]="opening",this.supports=pre(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Vu]=new yre(Sre(this)),this[Km]=this[Vu].encoding(n||"utf8"),this[Kv]=this[Vu].encoding(i||"utf8");for(const s of this[Vu].encodings())this.supports.encodings[s.commonName]||(this.supports.encodings[s.commonName]=!0);this[nl]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Km].commonName,valueEncoding:this[Kv].commonName}),key:Object.freeze({keyEncoding:this[Km].commonName})},this.nextTick(()=>{this[qm]&&this.open({passive:!1},Ere)})}get status(){return this[jt]}keyEncoding(e){return this[Vu].encoding(e??this[Km])}valueEncoding(e){return this[Vu].encoding(e??this[Kv])}open(e,r){r=tl(e,r),r=zc(r,Et),e={...this[iI],...qc(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=i=>{this[jt]==="closing"||this[jt]==="opening"?this.once(Ta,i?()=>n(i):n):this[jt]!=="open"?r(new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):r()};return e.passive?this[jt]==="opening"?this.once(Ta,n):this.nextTick(n):this[jt]==="closed"||this[qm]?(this[qm]=!1,this[jt]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[jt]="closed",this[qv](()=>{this.emit(Ta),n(i)}),this[Yh]();return}this[jt]="open",this[Yh](),this.emit(Ta),this[jt]==="open"&&this.emit("open"),this[jt]==="open"&&this.emit("ready"),n()})):this[jt]==="open"?this.nextTick(n):this.once(Ta,()=>this.open(e,r)),r[Et]}_open(e,r){this.nextTick(r)}close(e){e=zc(e,Et);const r=n=>{this[jt]==="opening"||this[jt]==="closing"?this.once(Ta,n?r(n):r):this[jt]!=="closed"?e(new rs("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[jt]==="open"){this[jt]="closing",this.emit("closing");const n=i=>{this[jt]="open",this[Yh](),this.emit(Ta),r(i)};this[qv](()=>{this._close(i=>{if(i)return n(i);this[jt]="closed",this[Yh](),this.emit(Ta),this[jt]==="closed"&&this.emit("closed"),r()})})}else this[jt]==="closed"?this.nextTick(r):this.once(Ta,()=>this.close(e));return e[Et]}[qv](e){if(this[rl].size===0)return this.nextTick(e);let r=this[rl].size,n=!0;const i=()=>{--r===0&&(n?this.nextTick(e):e())};for(const a of this[rl])a.close(i);n=!1,this[rl].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=tl(r,n),n=zc(n,Et),r=qc(r,this[nl].entry),this[jt]==="opening")return this.defer(()=>this.get(e,r,n)),n[Et];if(Hu(this,n))return n[Et];const i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Et];const a=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),s=a.format,d=o.format;return(r.keyEncoding!==s||r.valueEncoding!==d)&&(r=Object.assign({},r,{keyEncoding:s,valueEncoding:d})),this._get(this.prefixKey(a.encode(e),s),r,(l,c)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{c=o.decode(c)}catch(u){return n(new rs("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:u}))}n(null,c)}),n[Et]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=tl(r,n),n=zc(n,Et),r=qc(r,this[nl].entry),this[jt]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Et];if(Hu(this,n))return n[Et];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Et];if(e.length===0)return this.nextTick(n,null,[]),n[Et];const i=this.keyEncoding(r.keyEncoding),a=this.valueEncoding(r.valueEncoding),o=i.format,s=a.format;(r.keyEncoding!==o||r.valueEncoding!==s)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:s}));const d=new Array(e.length);for(let l=0;l<e.length;l++){const c=e[l],u=this._checkKey(c);if(u)return this.nextTick(n,u),n[Et];d[l]=this.prefixKey(i.encode(c),o)}return this._getMany(d,r,(l,c)=>{if(l)return n(l);try{for(let u=0;u<c.length;u++)c[u]!==void 0&&(c[u]=a.decode(c[u]))}catch(u){return n(new rs(`Could not decode one or more of ${c.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:u}))}n(null,c)}),n[Et]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,i){if(i=tl(n,i),i=zc(i,Et),n=qc(n,this[nl].entry),this[jt]==="opening")return this.defer(()=>this.put(e,r,n,i)),i[Et];if(Hu(this,i))return i[Et];const a=this._checkKey(e)||this._checkValue(r);if(a)return this.nextTick(i,a),i[Et];const o=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),d=o.format,l=s.format;(n.keyEncoding!==d||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:d,valueEncoding:l}));const c=this.prefixKey(o.encode(e),d),u=s.encode(r);return this._put(c,u,n,h=>{if(h)return i(h);this.emit("put",e,r),i()}),i[Et]}_put(e,r,n,i){this.nextTick(i)}del(e,r,n){if(n=tl(r,n),n=zc(n,Et),r=qc(r,this[nl].key),this[jt]==="opening")return this.defer(()=>this.del(e,r,n)),n[Et];if(Hu(this,n))return n[Et];const i=this._checkKey(e);if(i)return this.nextTick(n,i),n[Et];const a=this.keyEncoding(r.keyEncoding),o=a.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(a.encode(e),o),r,s=>{if(s)return n(s);this.emit("del",e),n()}),n[Et]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[jt]==="opening")return new nI(this);if(this[jt]!=="open")throw new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=tl(r,n),n=zc(n,Et),r=qc(r,this[nl].empty),this[jt]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Et];if(Hu(this,n))return n[Et];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Et];if(e.length===0)return this.nextTick(n),n[Et];const i=new Array(e.length),{keyEncoding:a,valueEncoding:o,...s}=r;for(let d=0;d<e.length;d++){if(typeof e[d]!="object"||e[d]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Et];const l=Object.assign({},e[d]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Et];const c=this._checkKey(l.key);if(c)return this.nextTick(n,c),n[Et];const u=l.sublevel!=null?l.sublevel:this,h=u.keyEncoding(l.keyEncoding||a),y=h.format;if(l.key=u.prefixKey(h.encode(l.key),y),l.keyEncoding=y,l.type==="put"){const p=this._checkValue(l.value);if(p)return this.nextTick(n,p),n[Et];const f=u.valueEncoding(l.valueEncoding||o);l.value=f.encode(l.value),l.valueEncoding=f.format}u!==this&&(l.sublevel=null),i[d]=l}return this._batch(i,s,d=>{if(d)return n(d);this.emit("batch",e),n()}),n[Et]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,M_.defaults(r))}_sublevel(e,r){return new M_(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=tl(e,r),r=zc(r,Et),e=qc(e,this[nl].empty),this[jt]==="opening")return this.defer(()=>this.clear(e,r)),r[Et];if(Hu(this,r))return r[Et];const n=e,i=this.keyEncoding(e.keyEncoding);return e=zm(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(r):this._clear(e,a=>{if(a)return r(a);this.emit("clear",n),r()}),r[Et]}_clear(e,r){this.nextTick(r)}iterator(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=zm(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[el.keyEncoding]=r,e[el.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[jt]==="opening")return new bre(this,e);if(this[jt]!=="open")throw new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new el(this,e)}keys(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=zm(e,r),e[el.keyEncoding]=r,e[el.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[jt]==="opening")return new vre(this,e);if(this[jt]!=="open")throw new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new gre(this,e)}values(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=zm(e,r),e[el.keyEncoding]=r,e[el.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[jt]==="opening")return new _re(this,e);if(this[jt]!=="open")throw new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new wre(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Wh].push(e)}[Yh](){if(this[Wh].length===0)return;const e=this[Wh];this[Wh]=[];for(const r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[rl].add(e)}detachResource(e){this[rl].delete(e)}_chainedBatch(){return new nI(this)}_checkKey(e){if(e==null)return new rs("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new rs("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};p$.prototype.nextTick=ure();const{AbstractSublevel:M_}=hre()({AbstractLevel:p$});Qw.AbstractLevel=p$;Qw.AbstractSublevel=M_;const Hu=function(t,e){return t[jt]!=="open"?(t.nextTick(e,new rs("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Sre=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};Hd.AbstractLevel=Qw.AbstractLevel;Hd.AbstractSublevel=Qw.AbstractSublevel;Hd.AbstractIterator=wa.AbstractIterator;Hd.AbstractKeyIterator=wa.AbstractKeyIterator;Hd.AbstractValueIterator=wa.AbstractValueIterator;Hd.AbstractChainedBatch=h$.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var $re=Are;const Tre=Gj;function Are(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,a,o,s,d=!0,l;Array.isArray(t)?(n=[],a=i=t.length):(o=Object.keys(t),n={},a=i=o.length);function c(h){function y(){r&&r(h,n),r=null}d?Tre(y):y()}function u(h,y,p){if(n[h]=p,y&&(s=!0),--a===0||y)c(y);else if(!s&&l<i){let f;o?(f=o[l],l+=1,t[f](function(g,v){u(f,g,v)})):(f=l,l+=1,t[f](function(g,v){u(f,g,v)}))}}l=e,a?o?o.some(function(h,y){return t[h](function(p,f){u(h,p,f)}),y===e-1}):t.some(function(h,y){return h(function(p,f){u(y,p,f)}),y===e-1}):c(null),d=!1}var Wj={},Yj=function(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,a=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,i,a):r!==void 0?IDBKeyRange.lowerBound(r,i):n!==void 0?IDBKeyRange.upperBound(n,a):null};const Pre=new TextEncoder;var Zj=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Pre.encode(t)};const{AbstractIterator:xre}=Hd,oI=Yj,Vm=Zj,Is=Symbol("cache"),Aa=Symbol("finished"),Xi=Symbol("options"),Pa=Symbol("currentOptions"),il=Symbol("position"),Vv=Symbol("location"),Gu=Symbol("first"),sI={};let Ire=class extends xre{constructor(e,r,n){super(e,n),this[Is]=[],this[Aa]=this.limit===0,this[Xi]=n,this[Pa]={...n},this[il]=void 0,this[Vv]=r,this[Gu]=!0}_nextv(e,r,n){if(this[Gu]=!1,this[Aa])return this.nextTick(n,null,[]);if(this[Is].length>0)return e=Math.min(e,this[Is].length),this.nextTick(n,null,this[Is].splice(0,e));this[il]!==void 0&&(this[Xi].reverse?(this[Pa].lt=this[il],this[Pa].lte=void 0):(this[Pa].gt=this[il],this[Pa].gte=void 0));let i;try{i=oI(this[Pa])}catch{return this[Aa]=!0,this.nextTick(n,null,[])}const a=this.db.db.transaction([this[Vv]],"readonly"),o=a.objectStore(this[Vv]),s=[];if(this[Xi].reverse){const d=!this[Xi].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[d](i,"prev").onsuccess=l=>{const c=l.target.result;if(c){const{key:u,value:h}=c;this[il]=u,s.push([this[Xi].keys&&u!==void 0?Vm(u):void 0,this[Xi].values&&h!==void 0?Vm(h):void 0]),s.length<e?c.continue():aI(a)}else this[Aa]=!0}}else{let d,l;const c=()=>{if(d===void 0||l===void 0)return;const u=Math.max(d.length,l.length);u===0||e===1/0?this[Aa]=!0:this[il]=d[u-1],s.length=u;for(let h=0;h<u;h++){const y=d[h],p=l[h];s[h]=[this[Xi].keys&&y!==void 0?Vm(y):void 0,this[Xi].values&&p!==void 0?Vm(p):void 0]}aI(a)};this[Xi].keys||e<1/0?o.getAllKeys(i,e<1/0?e:void 0).onsuccess=u=>{d=u.target.result,c()}:(d=[],this.nextTick(c)),this[Xi].values?o.getAll(i,e<1/0?e:void 0).onsuccess=u=>{l=u.target.result,c()}:(l=[],this.nextTick(c))}a.onabort=()=>{n(a.error||new Error("aborted by user")),n=null},a.oncomplete=()=>{n(null,s),n=null}}_next(e){if(this[Is].length>0){const[r,n]=this[Is].shift();this.nextTick(e,null,r,n)}else if(this[Aa])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Gu]&&(this[Gu]=!1,r=1),this._nextv(r,sI,(n,i)=>{if(n)return e(n);this[Is]=i,this._next(e)})}}_all(e,r){this[Gu]=!1;const n=this[Is].splice(0,this[Is].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(r,null,n);this._nextv(i,sI,(a,o)=>{if(a)return r(a);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Gu]=!0,this[Is]=[],this[Aa]=!1,this[il]=void 0,this[Pa]={...this[Xi]};let n;try{n=oI(this[Xi])}catch{this[Aa]=!0;return}n!==null&&!n.includes(e)?this[Aa]=!0:this[Xi].reverse?this[Pa].lte=e:this[Pa].gte=e}};Wj.Iterator=Ire;function aI(t){typeof t.commit=="function"&&t.commit()}var kre=function(e,r,n,i,a){if(i.limit===0)return e.nextTick(a);const o=e.db.transaction([r],"readwrite"),s=o.objectStore(r);let d=0;o.oncomplete=function(){a()},o.onabort=function(){a(o.error||new Error("aborted by user"))};const l=s.openKeyCursor?"openKeyCursor":"openCursor",c=i.reverse?"prev":"next";s[l](n,c).onsuccess=function(u){const h=u.target.result;h&&(s.delete(h.key).onsuccess=function(){(i.limit<=0||++d<i.limit)&&h.continue()})}};const{AbstractLevel:Ore}=Hd,cI=ga,Rre=$re,{fromCallback:jre}=Eh,{Iterator:Cre}=Wj,dI=Zj,Nre=kre,Bre=Yj,Xj="level-js-",Zh=Symbol("idb"),Hv=Symbol("namePrefix"),xa=Symbol("location"),Gv=Symbol("version"),ol=Symbol("store"),Xh=Symbol("onComplete"),lI=Symbol("promise");class Dre extends Ore{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new cI("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:i,version:a,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[xa]=e,this[Hv]=i??Xj,this[Gv]=parseInt(a||1,10),this[Zh]=null}get location(){return this[xa]}get namePrefix(){return this[Hv]}get version(){return this[Gv]}get db(){return this[Zh]}get type(){return"browser-level"}_open(e,r){const n=indexedDB.open(this[Hv]+this[xa],this[Gv]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Zh]=n.result,r()},n.onupgradeneeded=i=>{const a=i.target.result;a.objectStoreNames.contains(this[xa])||a.createObjectStore(this[xa])}}[ol](e){return this[Zh].transaction([this[xa]],e).objectStore(this[xa])}[Xh](e,r){const n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){const i=this[ol]("readonly");let a;try{a=i.get(e)}catch(o){return this.nextTick(n,o)}this[Xh](a,function(o,s){if(o)return n(o);if(s===void 0)return n(new cI("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,dI(s))})}_getMany(e,r,n){const i=this[ol]("readonly"),a=e.map(o=>s=>{let d;try{d=i.get(o)}catch(l){return s(l)}d.onsuccess=()=>{const l=d.result;s(null,l===void 0?l:dI(l))},d.onerror=l=>{l.stopPropagation(),s(d.error)}});Rre(a,16,n)}_del(e,r,n){const i=this[ol]("readwrite");let a;try{a=i.delete(e)}catch(o){return this.nextTick(n,o)}this[Xh](a,n)}_put(e,r,n,i){const a=this[ol]("readwrite");let o;try{o=a.put(r,e)}catch(s){return this.nextTick(i,s)}this[Xh](o,i)}_iterator(e){return new Cre(this,this[xa],e)}_batch(e,r,n){const i=this[ol]("readwrite"),a=i.transaction;let o=0,s;a.onabort=function(){n(s||a.error||new Error("aborted by user"))},a.oncomplete=function(){n()};function d(){const l=e[o++],c=l.key;let u;try{u=l.type==="del"?i.delete(c):i.put(l.value,c)}catch(h){s=h,a.abort();return}o<e.length?u.onsuccess=d:typeof a.commit=="function"&&a.commit()}d()}_clear(e,r){let n,i;try{n=Bre(e)}catch{return this.nextTick(r)}if(e.limit>=0)return Nre(this,this[xa],n,e,r);try{const a=this[ol]("readwrite");i=n?a.delete(n):a.clear()}catch(a){return this.nextTick(r,a)}this[Xh](i,r)}_close(e){this[Zh].close(),this.nextTick(e)}}Dre.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=Xj),r=jre(r,lI);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(i){r(i)},r[lI]};var Mre={exports:{}},Wv={exports:{}},hn={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array},Qj={exports:{}};(function(t){const e=Dr,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||e.Blob,i=typeof n<"u"?function(s){return s instanceof n}:function(s){return!1};class a extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let d="";for(let l=0;l<s.length;l++)d+=`    ${s[l].stack}
`;super(d),this.name="AggregateError",this.errors=s}}t.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(o){let s=!1;return function(...d){s||(s=!0,o.apply(this,d))}},createDeferredPromise:function(){let o,s;return{promise:new Promise((l,c)=>{o=l,s=c}),resolve:o,reject:s}},promisify(o){return new Promise((s,d)=>{o((l,...c)=>l?d(l):s(...c))})},debuglog(){return function(){}},format(o,...s){return o.replace(/%([sdifj])/g,function(...[d,l]){const c=s.shift();return l==="f"?c.toFixed(6):l==="j"?JSON.stringify(c):l==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}},types:{isAsyncFunction(o){return o instanceof r},isArrayBufferView(o){return ArrayBuffer.isView(o)}},isBlob:i},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Qj);var vc=Qj.exports,y$={};const{format:Lre,inspect:F0,AggregateError:Ure}=vc,Fre=globalThis.AggregateError||Ure,zre=Symbol("kIsNodeError"),qre=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Kre=/^([A-Z][a-z0-9]*)+$/,Vre="__node_internal_",nb={};function Gl(t,e){if(!t)throw new nb.ERR_INTERNAL_ASSERTION(e)}function uI(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Hre(t,e,r){if(typeof e=="function")return Gl(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const n=(e.match(/%[dfijoOs]/g)||[]).length;return Gl(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Lre(e,...r)}function ri(t,e,r){r||(r=Error);class n extends r{constructor(...a){super(Hre(t,e,a))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[zre]=!0,nb[t]=n}function fI(t){const e=Vre+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Gre(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new Fre([e,t],e.message);return r.code=e.code,r}return t||e}let Wre=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new nb.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ri("ERR_ASSERTION","%s",Error);ri("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Gl(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";const i=[],a=[],o=[];for(const d of e)Gl(typeof d=="string","All expected entries have to be of type string"),qre.includes(d)?i.push(d.toLowerCase()):Kre.test(d)?a.push(d):(Gl(d!=="object",'The value "object" should be written as "Object"'),o.push(d));if(a.length>0){const d=i.indexOf("object");d!==-1&&(i.splice(i,d,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const d=i.pop();n+=`one of type ${i.join(", ")}, or ${d}`}}(a.length>0||o.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const d=a.pop();n+=`an instance of ${a.join(", ")}, or ${d}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{const d=o.pop();n+=`one of ${o.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var s;if((s=r.constructor)!==null&&s!==void 0&&s.name)n+=`. Received an instance of ${r.constructor.name}`;else{const d=F0(r,{depth:-1});n+=`. Received ${d}`}}else{let d=F0(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);ri("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=F0(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ri("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ri("ERR_MISSING_ARGS",(...t)=>{Gl(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ri("ERR_OUT_OF_RANGE",(t,e,r)=>{Gl(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=uI(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=uI(n)),n+="n"):n=F0(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ri("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ri("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ri("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ri("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ri("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ri("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ri("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ri("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ri("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ri("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ri("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Gi={AbortError:Wre,aggregateTwoErrors:fI(Gre),hideStackFrames:fI,codes:nb};const{ArrayIsArray:m$,ArrayPrototypeIncludes:Jj,ArrayPrototypeJoin:e8,ArrayPrototypeMap:Yre,NumberIsInteger:g$,NumberIsNaN:Zre,NumberMAX_SAFE_INTEGER:Xre,NumberMIN_SAFE_INTEGER:Qre,NumberParseInt:Jre,ObjectPrototypeHasOwnProperty:ene,RegExpPrototypeExec:t8,String:tne,StringPrototypeToUpperCase:rne,StringPrototypeTrim:nne}=hn,{hideStackFrames:Wo,codes:{ERR_SOCKET_BAD_PORT:ine,ERR_INVALID_ARG_TYPE:Di,ERR_INVALID_ARG_VALUE:Sh,ERR_OUT_OF_RANGE:lu,ERR_UNKNOWN_SIGNAL:hI}}=Gi,{normalizeEncoding:one}=vc,{isAsyncFunction:sne,isArrayBufferView:ane}=vc.types,pI={};function cne(t){return t===(t|0)}function dne(t){return t===t>>>0}const lne=/^[0-7]+$/,une="must be a 32-bit unsigned integer or an octal string";function fne(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(t8(lne,t)===null)throw new Sh(e,t,une);t=Jre(t,8)}return r8(t,e),t}const hne=Wo((t,e,r=Qre,n=Xre)=>{if(typeof t!="number")throw new Di(e,"number",t);if(!g$(t))throw new lu(e,"an integer",t);if(t<r||t>n)throw new lu(e,`>= ${r} && <= ${n}`,t)}),pne=Wo((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Di(e,"number",t);if(!g$(t))throw new lu(e,"an integer",t);if(t<r||t>n)throw new lu(e,`>= ${r} && <= ${n}`,t)}),r8=Wo((t,e,r=!1)=>{if(typeof t!="number")throw new Di(e,"number",t);if(!g$(t))throw new lu(e,"an integer",t);const n=r?1:0,i=4294967295;if(t<n||t>i)throw new lu(e,`>= ${n} && <= ${i}`,t)});function w$(t,e){if(typeof t!="string")throw new Di(e,"string",t)}function yne(t,e,r=void 0,n){if(typeof t!="number")throw new Di(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Zre(t))throw new lu(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}const mne=Wo((t,e,r)=>{if(!Jj(r,t)){const i="must be one of: "+e8(Yre(r,a=>typeof a=="string"?`'${a}'`:tne(a)),", ");throw new Sh(e,t,i)}});function n8(t,e){if(typeof t!="boolean")throw new Di(e,"boolean",t)}function Yv(t,e,r){return t==null||!ene(t,e)?r:t[e]}const gne=Wo((t,e,r=null)=>{const n=Yv(r,"allowArray",!1),i=Yv(r,"allowFunction",!1);if(!Yv(r,"nullable",!1)&&t===null||!n&&m$(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Di(e,"Object",t)}),wne=Wo((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Di(e,"a dictionary",t)}),b$=Wo((t,e,r=0)=>{if(!m$(t))throw new Di(e,"Array",t);if(t.length<r){const n=`must be longer than ${r}`;throw new Sh(e,t,n)}});function bne(t,e){b$(t,e);for(let r=0;r<t.length;r++)w$(t[r],`${e}[${r}]`)}function vne(t,e){b$(t,e);for(let r=0;r<t.length;r++)n8(t[r],`${e}[${r}]`)}function _ne(t,e="signal"){if(w$(t,e),pI[t]===void 0)throw pI[rne(t)]!==void 0?new hI(t+" (signals must use all capital letters)"):new hI(t)}const Ene=Wo((t,e="buffer")=>{if(!ane(t))throw new Di(e,["Buffer","TypedArray","DataView"],t)});function Sne(t,e){const r=one(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Sh("encoding",e,`is invalid for data of length ${n}`)}function $ne(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&nne(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new ine(e,t,r);return t|0}const Tne=Wo((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Di(e,"AbortSignal",t)}),Ane=Wo((t,e)=>{if(typeof t!="function")throw new Di(e,"Function",t)}),Pne=Wo((t,e)=>{if(typeof t!="function"||sne(t))throw new Di(e,"Function",t)}),xne=Wo((t,e)=>{if(t!==void 0)throw new Di(e,"undefined",t)});function Ine(t,e,r){if(!Jj(r,t))throw new Di(e,`('${e8(r,"|")}')`,t)}const kne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function yI(t,e){if(typeof t>"u"||!t8(kne,t))throw new Sh(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function One(t){if(typeof t=="string")return yI(t,"hints"),t;if(m$(t)){const e=t.length;let r="";if(e===0)return r;for(let n=0;n<e;n++){const i=t[n];yI(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Sh("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var ib={isInt32:cne,isUint32:dne,parseFileMode:fne,validateArray:b$,validateStringArray:bne,validateBooleanArray:vne,validateBoolean:n8,validateBuffer:Ene,validateDictionary:wne,validateEncoding:Sne,validateFunction:Ane,validateInt32:pne,validateInteger:hne,validateNumber:yne,validateObject:gne,validateOneOf:mne,validatePlainFunction:Pne,validatePort:$ne,validateSignalName:_ne,validateString:w$,validateUint32:r8,validateUndefined:xne,validateUnion:Ine,validateAbortSignal:Tne,validateLinkHeaderValue:One},v$={exports:{}};const{Symbol:ob,SymbolAsyncIterator:mI,SymbolIterator:gI,SymbolFor:i8}=hn,o8=ob("kDestroyed"),s8=ob("kIsErrored"),L_=ob("kIsReadable"),a8=ob("kIsDisturbed"),Rne=i8("nodejs.webstream.isClosedPromise"),jne=i8("nodejs.webstream.controllerErrorFunction");function sb(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function ab(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Cne(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ba(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function c8(t){return!!(t&&!ba(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function d8(t){return!!(t&&!ba(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function l8(t){return!!(t&&!ba(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Nne(t){return c8(t)||d8(t)||l8(t)}function Bne(t,e){return t==null?!1:e===!0?typeof t[mI]=="function":e===!1?typeof t[gI]=="function":typeof t[mI]=="function"||typeof t[gI]=="function"}function cb(t){if(!ba(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[o8]||n!=null&&n.destroyed)}function u8(t){if(!ab(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Dne(t,e){if(!ab(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Mne(t){if(!sb(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function f8(t,e){if(!sb(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function h8(t){return t&&t[L_]!=null?t[L_]:typeof t?.readable!="boolean"?null:cb(t)?!1:sb(t)&&t.readable&&!f8(t)}function p8(t){return typeof t?.writable!="boolean"?null:cb(t)?!1:ab(t)&&t.writable&&!u8(t)}function Lne(t,e){return ba(t)?cb(t)?!0:!(e?.readable!==!1&&h8(t)||e?.writable!==!1&&p8(t)):null}function Une(t){var e,r;return ba(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Fne(t){var e,r;return ba(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function zne(t){if(!ba(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&y8(t)?t._closed:null}function y8(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function m8(t){return typeof t._sent100=="boolean"&&y8(t)}function qne(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Kne(t){if(!ba(t))return null;const e=t._writableState,r=t._readableState,n=e||r;return!n&&m8(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Vne(t){var e;return!!(t&&((e=t[a8])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Hne(t){var e,r,n,i,a,o,s,d,l,c;return!!(t&&((e=(r=(n=(i=(a=(o=t[s8])!==null&&o!==void 0?o:t.readableErrored)!==null&&a!==void 0?a:t.writableErrored)!==null&&i!==void 0?i:(s=t._readableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&n!==void 0?n:(d=t._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((c=t._writableState)===null||c===void 0)&&c.errored))}var _c={kDestroyed:o8,isDisturbed:Vne,kIsDisturbed:a8,isErrored:Hne,kIsErrored:s8,isReadable:h8,kIsReadable:L_,kIsClosedPromise:Rne,kControllerErrorFunction:jne,isClosed:zne,isDestroyed:cb,isDuplexNodeStream:Cne,isFinished:Lne,isIterable:Bne,isReadableNodeStream:sb,isReadableStream:c8,isReadableEnded:Mne,isReadableFinished:f8,isReadableErrored:Fne,isNodeStream:ba,isWebStream:Nne,isWritable:p8,isWritableNodeStream:ab,isWritableStream:d8,isWritableEnded:u8,isWritableFinished:Dne,isWritableErrored:Une,isServerRequest:qne,isServerResponse:m8,willEmitClose:Kne,isTransformStream:l8};const rd=Vi,{AbortError:g8,codes:Gne}=Gi,{ERR_INVALID_ARG_TYPE:Wne,ERR_STREAM_PREMATURE_CLOSE:wI}=Gne,{kEmptyObject:U_,once:F_}=vc,{validateAbortSignal:Yne,validateFunction:Zne,validateObject:Xne,validateBoolean:Qne}=ib,{Promise:Jne,PromisePrototypeThen:eie}=hn,{isClosed:tie,isReadable:bI,isReadableNodeStream:Zv,isReadableStream:rie,isReadableFinished:vI,isReadableErrored:_I,isWritable:EI,isWritableNodeStream:SI,isWritableStream:nie,isWritableFinished:$I,isWritableErrored:TI,isNodeStream:iie,willEmitClose:oie,kIsClosedPromise:sie}=_c;function aie(t){return t.setHeader&&typeof t.abort=="function"}const z_=()=>{};function w8(t,e,r){var n,i;if(arguments.length===2?(r=e,e=U_):e==null?e=U_:Xne(e,"options"),Zne(r,"callback"),Yne(e.signal,"options.signal"),r=F_(r),rie(t)||nie(t))return cie(t,e,r);if(!iie(t))throw new Wne("stream",["ReadableStream","WritableStream","Stream"],t);const a=(n=e.readable)!==null&&n!==void 0?n:Zv(t),o=(i=e.writable)!==null&&i!==void 0?i:SI(t),s=t._writableState,d=t._readableState,l=()=>{t.writable||h()};let c=oie(t)&&Zv(t)===a&&SI(t)===o,u=$I(t,!1);const h=()=>{u=!0,t.destroyed&&(c=!1),!(c&&(!t.readable||a))&&(!a||y)&&r.call(t)};let y=vI(t,!1);const p=()=>{y=!0,t.destroyed&&(c=!1),!(c&&(!t.writable||o))&&(!o||u)&&r.call(t)},f=S=>{r.call(t,S)};let g=tie(t);const v=()=>{g=!0;const S=TI(t)||_I(t);if(S&&typeof S!="boolean")return r.call(t,S);if(a&&!y&&Zv(t,!0)&&!vI(t,!1))return r.call(t,new wI);if(o&&!u&&!$I(t,!1))return r.call(t,new wI);r.call(t)},b=()=>{g=!0;const S=TI(t)||_I(t);if(S&&typeof S!="boolean")return r.call(t,S);r.call(t)},m=()=>{t.req.on("finish",h)};aie(t)?(t.on("complete",h),c||t.on("abort",v),t.req?m():t.on("request",m)):o&&!s&&(t.on("end",l),t.on("close",l)),!c&&typeof t.aborted=="boolean"&&t.on("aborted",v),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",f),t.on("close",v),g?rd.nextTick(v):s!=null&&s.errorEmitted||d!=null&&d.errorEmitted?c||rd.nextTick(b):(!a&&(!c||bI(t))&&(u||EI(t)===!1)||!o&&(!c||EI(t))&&(y||bI(t)===!1)||d&&t.req&&t.aborted)&&rd.nextTick(b);const w=()=>{r=z_,t.removeListener("aborted",v),t.removeListener("complete",h),t.removeListener("abort",v),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",f),t.removeListener("close",v)};if(e.signal&&!g){const S=()=>{const T=r;w(),T.call(t,new g8(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)rd.nextTick(S);else{const T=r;r=F_((...x)=>{e.signal.removeEventListener("abort",S),T.apply(t,x)}),e.signal.addEventListener("abort",S)}}return w}function cie(t,e,r){let n=!1,i=z_;if(e.signal)if(i=()=>{n=!0,r.call(t,new g8(void 0,{cause:e.signal.reason}))},e.signal.aborted)rd.nextTick(i);else{const o=r;r=F_((...s)=>{e.signal.removeEventListener("abort",i),o.apply(t,s)}),e.signal.addEventListener("abort",i)}const a=(...o)=>{n||rd.nextTick(()=>r.apply(t,o))};return eie(t[sie].promise,a,a),z_}function die(t,e){var r;let n=!1;return e===null&&(e=U_),(r=e)!==null&&r!==void 0&&r.cleanup&&(Qne(e.cleanup,"cleanup"),n=e.cleanup),new Jne((i,a)=>{const o=w8(t,e,s=>{n&&o(),s?a(s):i()})})}v$.exports=w8;v$.exports.finished=die;var Gd=v$.exports;const ea=Vi,{aggregateTwoErrors:lie,codes:{ERR_MULTIPLE_CALLBACK:uie},AbortError:fie}=Gi,{Symbol:b8}=hn,{kDestroyed:hie,isDestroyed:pie,isFinished:yie,isServerRequest:mie}=_c,v8=b8("kDestroy"),q_=b8("kConstruct");function _8(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function gie(t,e){const r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(_8(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?AI(this,t,e):this.once(v8,function(a){AI(this,lie(a,t),e)}),this)}function AI(t,e,r){let n=!1;function i(a){if(n)return;n=!0;const o=t._readableState,s=t._writableState;_8(a,s,o),s&&(s.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(a),a?ea.nextTick(wie,t,a):ea.nextTick(E8,t)}try{t._destroy(e||null,i)}catch(a){i(a)}}function wie(t,e){K_(t,e),E8(t)}function E8(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function K_(t,e){const r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function bie(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function V_(t,e,r){const n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?ea.nextTick(K_,t,e):K_(t,e))}function vie(t,e){if(typeof t._construct!="function")return;const r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(q_,e),!(t.listenerCount(q_)>1)&&ea.nextTick(_ie,t)}function _ie(t){let e=!1;function r(n){if(e){V_(t,n??new uie);return}e=!0;const i=t._readableState,a=t._writableState,o=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),o.destroyed?t.emit(v8,n):n?V_(t,n,!0):ea.nextTick(Eie,t)}try{t._construct(n=>{ea.nextTick(r,n)})}catch(n){ea.nextTick(r,n)}}function Eie(t){t.emit(q_)}function PI(t){return t?.setHeader&&typeof t.abort=="function"}function S8(t){t.emit("close")}function Sie(t,e){t.emit("error",e),ea.nextTick(S8,t)}function $ie(t,e){!t||pie(t)||(!e&&!yie(t)&&(e=new fie),mie(t)?(t.socket=null,t.destroy(e)):PI(t)?t.abort():PI(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ea.nextTick(Sie,t,e):ea.nextTick(S8,t),t.destroyed||(t[hie]=!0))}var $h={construct:vie,destroyer:$ie,destroy:gie,undestroy:bie,errorOrDestroy:V_};const{ArrayIsArray:Tie,ObjectSetPrototypeOf:$8}=hn,{EventEmitter:db}=fa;function lb(t){db.call(this,t)}$8(lb.prototype,db.prototype);$8(lb,db);lb.prototype.pipe=function(t,e){const r=this;function n(c){t.writable&&t.write(c)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",s));let a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,typeof t.destroy=="function"&&t.destroy())}function d(c){l(),db.listenerCount(this,"error")===0&&this.emit("error",c)}H_(r,"error",d),H_(t,"error",d);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",d),t.removeListener("error",d),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function H_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Tie(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var _$={Stream:lb,prependListener:H_},T8={exports:{}};(function(t){const{AbortError:e,codes:r}=Gi,{isNodeStream:n,isWebStream:i,kControllerErrorFunction:a}=_c,o=Gd,{ERR_INVALID_ARG_TYPE:s}=r,d=(l,c)=>{if(typeof l!="object"||!("aborted"in l))throw new s(c,"AbortSignal",l)};t.exports.addAbortSignal=function(c,u){if(d(c,"signal"),!n(u)&&!i(u))throw new s("stream",["ReadableStream","WritableStream","Stream"],u);return t.exports.addAbortSignalNoValidate(c,u)},t.exports.addAbortSignalNoValidate=function(l,c){if(typeof l!="object"||!("aborted"in l))return c;const u=n(c)?()=>{c.destroy(new e(void 0,{cause:l.reason}))}:()=>{c[a](new e(void 0,{cause:l.reason}))};return l.aborted?u():(l.addEventListener("abort",u),o(c,()=>l.removeEventListener("abort",u))),c}})(T8);var ub=T8.exports;const{StringPrototypeSlice:xI,SymbolIterator:Aie,TypedArrayPrototypeSet:Hm,Uint8Array:Pie}=hn,{Buffer:Xv}=Dr,{inspect:xie}=vc;var Iie=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Xv.alloc(0);const r=Xv.allocUnsafe(e>>>0);let n=this.head,i=0;for(;n;)Hm(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){const n=this.head.data;if(e<n.length){const i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Aie](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{const a=n.data;if(e>a.length)r+=a,e-=a.length;else{e===a.length?(r+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=xI(a,0,e),this.head=n,n.data=xI(a,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){const r=Xv.allocUnsafe(e),n=e;let i=this.head,a=0;do{const o=i.data;if(e>o.length)Hm(r,o,n-e),e-=o.length;else{e===o.length?(Hm(r,o,n-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(Hm(r,new Pie(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++a}while((i=i.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return xie(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:kie,NumberIsInteger:Oie}=hn,{ERR_INVALID_ARG_VALUE:Rie}=Gi.codes;function jie(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function A8(t){return t?16:16*1024}function Cie(t,e,r,n){const i=jie(e,n,r);if(i!=null){if(!Oie(i)||i<0){const a=n?`options.${r}`:"options.highWaterMark";throw new Rie(a,i)}return kie(i)}return A8(t.objectMode)}var E$={getHighWaterMark:Cie,getDefaultHighWaterMark:A8};const II=Vi,{PromisePrototypeThen:Nie,SymbolAsyncIterator:kI,SymbolIterator:OI}=hn,{Buffer:Bie}=Dr,{ERR_INVALID_ARG_TYPE:Die,ERR_STREAM_NULL_VALUES:Mie}=Gi.codes;function Lie(t,e,r){let n;if(typeof e=="string"||e instanceof Bie)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[kI])i=!0,n=e[kI]();else if(e&&e[OI])i=!1,n=e[OI]();else throw new Die("iterable",["Iterable"],e);const a=new t({objectMode:!0,highWaterMark:1,...r});let o=!1;a._read=function(){o||(o=!0,d())},a._destroy=function(l,c){Nie(s(l),()=>II.nextTick(c,l),u=>II.nextTick(c,u||l))};async function s(l){const c=l!=null,u=typeof n.throw=="function";if(c&&u){const{value:h,done:y}=await n.throw(l);if(await h,y)return}if(typeof n.return=="function"){const{value:h}=await n.return();await h}}async function d(){for(;;){try{const{value:l,done:c}=i?await n.next():n.next();if(c)a.push(null);else{const u=l&&typeof l.then=="function"?await l:l;if(u===null)throw o=!1,new Mie;if(a.push(u))continue;o=!1}}catch(l){a.destroy(l)}break}}return a}var P8=Lie,Qv,RI;function fb(){if(RI)return Qv;RI=1;const t=Vi,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:d,SafeSet:l,SymbolAsyncIterator:c,Symbol:u}=hn;Qv=B,B.ReadableState=R;const{EventEmitter:h}=fa,{Stream:y,prependListener:p}=_$,{Buffer:f}=Dr,{addAbortSignal:g}=ub,v=Gd;let b=vc.debuglog("stream",ie=>{b=ie});const m=Iie,w=$h,{getHighWaterMark:S,getDefaultHighWaterMark:T}=E$,{aggregateTwoErrors:x,codes:{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:M,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:re,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:J}}=Gi,{validateObject:z}=ib,oe=u("kPaused"),{StringDecoder:C}=Zp,V=P8;s(B.prototype,y.prototype),s(B,y);const q=()=>{},{errorOrDestroy:Q}=w;function R(ie,ce,K){typeof K!="boolean"&&(K=ce instanceof fc()),this.objectMode=!!(ie&&ie.objectMode),K&&(this.objectMode=this.objectMode||!!(ie&&ie.readableObjectMode)),this.highWaterMark=ie?S(this,ie,"readableHighWaterMark",K):T(!1),this.buffer=new m,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[oe]=null,this.errorEmitted=!1,this.emitClose=!ie||ie.emitClose!==!1,this.autoDestroy=!ie||ie.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=ie&&ie.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,ie&&ie.encoding&&(this.decoder=new C(ie.encoding),this.encoding=ie.encoding)}function B(ie){if(!(this instanceof B))return new B(ie);const ce=this instanceof fc();this._readableState=new R(ie,this,ce),ie&&(typeof ie.read=="function"&&(this._read=ie.read),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.construct=="function"&&(this._construct=ie.construct),ie.signal&&!ce&&g(ie.signal,this)),y.call(this,ie),w.construct(this,()=>{this._readableState.needReadable&&ee(this,this._readableState)})}B.prototype.destroy=w.destroy,B.prototype._undestroy=w.undestroy,B.prototype._destroy=function(ie,ce){ce(ie)},B.prototype[h.captureRejectionSymbol]=function(ie){this.destroy(ie)},B.prototype.push=function(ie,ce){return D(this,ie,ce,!1)},B.prototype.unshift=function(ie,ce){return D(this,ie,ce,!0)};function D(ie,ce,K,A){b("readableAddChunk",ce);const k=ie._readableState;let se;if(k.objectMode||(typeof ce=="string"?(K=K||k.defaultEncoding,k.encoding!==K&&(A&&k.encoding?ce=f.from(ce,K).toString(k.encoding):(ce=f.from(ce,K),K=""))):ce instanceof f?K="":y._isUint8Array(ce)?(ce=y._uint8ArrayToBuffer(ce),K=""):ce!=null&&(se=new I("chunk",["string","Buffer","Uint8Array"],ce))),se)Q(ie,se);else if(ce===null)k.reading=!1,O(ie,k);else if(k.objectMode||ce&&ce.length>0)if(A)if(k.endEmitted)Q(ie,new J);else{if(k.destroyed||k.errored)return!1;G(ie,k,ce,!0)}else if(k.ended)Q(ie,new re);else{if(k.destroyed||k.errored)return!1;k.reading=!1,k.decoder&&!K?(ce=k.decoder.write(ce),k.objectMode||ce.length!==0?G(ie,k,ce,!1):ee(ie,k)):G(ie,k,ce,!1)}else A||(k.reading=!1,ee(ie,k));return!k.ended&&(k.length<k.highWaterMark||k.length===0)}function G(ie,ce,K,A){ce.flowing&&ce.length===0&&!ce.sync&&ie.listenerCount("data")>0?(ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null,ce.dataEmitted=!0,ie.emit("data",K)):(ce.length+=ce.objectMode?1:K.length,A?ce.buffer.unshift(K):ce.buffer.push(K),ce.needReadable&&F(ie)),ee(ie,ce)}B.prototype.isPaused=function(){const ie=this._readableState;return ie[oe]===!0||ie.flowing===!1},B.prototype.setEncoding=function(ie){const ce=new C(ie);this._readableState.decoder=ce,this._readableState.encoding=this._readableState.decoder.encoding;const K=this._readableState.buffer;let A="";for(const k of K)A+=ce.write(k);return K.clear(),A!==""&&K.push(A),this._readableState.length=A.length,this};const Z=1073741824;function N(ie){if(ie>Z)throw new H("size","<= 1GiB",ie);return ie--,ie|=ie>>>1,ie|=ie>>>2,ie|=ie>>>4,ie|=ie>>>8,ie|=ie>>>16,ie++,ie}function W(ie,ce){return ie<=0||ce.length===0&&ce.ended?0:ce.objectMode?1:n(ie)?ce.flowing&&ce.length?ce.buffer.first().length:ce.length:ie<=ce.length?ie:ce.ended?ce.length:0}B.prototype.read=function(ie){b("read",ie),ie===void 0?ie=NaN:r(ie)||(ie=i(ie,10));const ce=this._readableState,K=ie;if(ie>ce.highWaterMark&&(ce.highWaterMark=N(ie)),ie!==0&&(ce.emittedReadable=!1),ie===0&&ce.needReadable&&((ce.highWaterMark!==0?ce.length>=ce.highWaterMark:ce.length>0)||ce.ended))return b("read: emitReadable",ce.length,ce.ended),ce.length===0&&ce.ended?Se(this):F(this),null;if(ie=W(ie,ce),ie===0&&ce.ended)return ce.length===0&&Se(this),null;let A=ce.needReadable;if(b("need readable",A),(ce.length===0||ce.length-ie<ce.highWaterMark)&&(A=!0,b("length less than watermark",A)),ce.ended||ce.reading||ce.destroyed||ce.errored||!ce.constructed)A=!1,b("reading, ended or constructing",A);else if(A){b("do read"),ce.reading=!0,ce.sync=!0,ce.length===0&&(ce.needReadable=!0);try{this._read(ce.highWaterMark)}catch(se){Q(this,se)}ce.sync=!1,ce.reading||(ie=W(K,ce))}let k;return ie>0?k=we(ie,ce):k=null,k===null?(ce.needReadable=ce.length<=ce.highWaterMark,ie=0):(ce.length-=ie,ce.multiAwaitDrain?ce.awaitDrainWriters.clear():ce.awaitDrainWriters=null),ce.length===0&&(ce.ended||(ce.needReadable=!0),K!==ie&&ce.ended&&Se(this)),k!==null&&!ce.errorEmitted&&!ce.closeEmitted&&(ce.dataEmitted=!0,this.emit("data",k)),k};function O(ie,ce){if(b("onEofChunk"),!ce.ended){if(ce.decoder){const K=ce.decoder.end();K&&K.length&&(ce.buffer.push(K),ce.length+=ce.objectMode?1:K.length)}ce.ended=!0,ce.sync?F(ie):(ce.needReadable=!1,ce.emittedReadable=!0,Y(ie))}}function F(ie){const ce=ie._readableState;b("emitReadable",ce.needReadable,ce.emittedReadable),ce.needReadable=!1,ce.emittedReadable||(b("emitReadable",ce.flowing),ce.emittedReadable=!0,t.nextTick(Y,ie))}function Y(ie){const ce=ie._readableState;b("emitReadable_",ce.destroyed,ce.length,ce.ended),!ce.destroyed&&!ce.errored&&(ce.length||ce.ended)&&(ie.emit("readable"),ce.emittedReadable=!1),ce.needReadable=!ce.flowing&&!ce.ended&&ce.length<=ce.highWaterMark,ne(ie)}function ee(ie,ce){!ce.readingMore&&ce.constructed&&(ce.readingMore=!0,t.nextTick(te,ie,ce))}function te(ie,ce){for(;!ce.reading&&!ce.ended&&(ce.length<ce.highWaterMark||ce.flowing&&ce.length===0);){const K=ce.length;if(b("maybeReadMore read 0"),ie.read(0),K===ce.length)break}ce.readingMore=!1}B.prototype._read=function(ie){throw new M("_read()")},B.prototype.pipe=function(ie,ce){const K=this,A=this._readableState;A.pipes.length===1&&(A.multiAwaitDrain||(A.multiAwaitDrain=!0,A.awaitDrainWriters=new l(A.awaitDrainWriters?[A.awaitDrainWriters]:[]))),A.pipes.push(ie),b("pipe count=%d opts=%j",A.pipes.length,ce);const se=(!ce||ce.end!==!1)&&ie!==t.stdout&&ie!==t.stderr?me:_s;A.endEmitted?t.nextTick(se):K.once("end",se),ie.on("unpipe",fe);function fe(Wi,Yi){b("onunpipe"),Wi===K&&Yi&&Yi.hasUnpiped===!1&&(Yi.hasUnpiped=!0,_t())}function me(){b("onend"),ie.end()}let be,Je=!1;function _t(){b("cleanup"),ie.removeListener("close",Ec),ie.removeListener("finish",vs),be&&ie.removeListener("drain",be),ie.removeListener("error",Pt),ie.removeListener("unpipe",fe),K.removeListener("end",me),K.removeListener("end",_s),K.removeListener("data",yt),Je=!0,be&&A.awaitDrainWriters&&(!ie._writableState||ie._writableState.needDrain)&&be()}function Rt(){Je||(A.pipes.length===1&&A.pipes[0]===ie?(b("false write response, pause",0),A.awaitDrainWriters=ie,A.multiAwaitDrain=!1):A.pipes.length>1&&A.pipes.includes(ie)&&(b("false write response, pause",A.awaitDrainWriters.size),A.awaitDrainWriters.add(ie)),K.pause()),be||(be=U(K,ie),ie.on("drain",be))}K.on("data",yt);function yt(Wi){b("ondata");const Yi=ie.write(Wi);b("dest.write",Yi),Yi===!1&&Rt()}function Pt(Wi){if(b("onerror",Wi),_s(),ie.removeListener("error",Pt),ie.listenerCount("error")===0){const Yi=ie._writableState||ie._readableState;Yi&&!Yi.errorEmitted?Q(ie,Wi):ie.emit("error",Wi)}}p(ie,"error",Pt);function Ec(){ie.removeListener("finish",vs),_s()}ie.once("close",Ec);function vs(){b("onfinish"),ie.removeListener("close",Ec),_s()}ie.once("finish",vs);function _s(){b("unpipe"),K.unpipe(ie)}return ie.emit("pipe",K),ie.writableNeedDrain===!0?A.flowing&&Rt():A.flowing||(b("pipe resume"),K.resume()),ie};function U(ie,ce){return function(){const A=ie._readableState;A.awaitDrainWriters===ce?(b("pipeOnDrain",1),A.awaitDrainWriters=null):A.multiAwaitDrain&&(b("pipeOnDrain",A.awaitDrainWriters.size),A.awaitDrainWriters.delete(ce)),(!A.awaitDrainWriters||A.awaitDrainWriters.size===0)&&ie.listenerCount("data")&&ie.resume()}}B.prototype.unpipe=function(ie){const ce=this._readableState,K={hasUnpiped:!1};if(ce.pipes.length===0)return this;if(!ie){const k=ce.pipes;ce.pipes=[],this.pause();for(let se=0;se<k.length;se++)k[se].emit("unpipe",this,{hasUnpiped:!1});return this}const A=e(ce.pipes,ie);return A===-1?this:(ce.pipes.splice(A,1),ce.pipes.length===0&&this.pause(),ie.emit("unpipe",this,K),this)},B.prototype.on=function(ie,ce){const K=y.prototype.on.call(this,ie,ce),A=this._readableState;return ie==="data"?(A.readableListening=this.listenerCount("readable")>0,A.flowing!==!1&&this.resume()):ie==="readable"&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,b("on readable",A.length,A.reading),A.length?F(this):A.reading||t.nextTick(P,this)),K},B.prototype.addListener=B.prototype.on,B.prototype.removeListener=function(ie,ce){const K=y.prototype.removeListener.call(this,ie,ce);return ie==="readable"&&t.nextTick(L,this),K},B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=function(ie){const ce=y.prototype.removeAllListeners.apply(this,arguments);return(ie==="readable"||ie===void 0)&&t.nextTick(L,this),ce};function L(ie){const ce=ie._readableState;ce.readableListening=ie.listenerCount("readable")>0,ce.resumeScheduled&&ce[oe]===!1?ce.flowing=!0:ie.listenerCount("data")>0?ie.resume():ce.readableListening||(ce.flowing=null)}function P(ie){b("readable nexttick read 0"),ie.read(0)}B.prototype.resume=function(){const ie=this._readableState;return ie.flowing||(b("resume"),ie.flowing=!ie.readableListening,j(this,ie)),ie[oe]=!1,this};function j(ie,ce){ce.resumeScheduled||(ce.resumeScheduled=!0,t.nextTick(X,ie,ce))}function X(ie,ce){b("resume",ce.reading),ce.reading||ie.read(0),ce.resumeScheduled=!1,ie.emit("resume"),ne(ie),ce.flowing&&!ce.reading&&ie.read(0)}B.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[oe]=!0,this};function ne(ie){const ce=ie._readableState;for(b("flow",ce.flowing);ce.flowing&&ie.read()!==null;);}B.prototype.wrap=function(ie){let ce=!1;ie.on("data",A=>{!this.push(A)&&ie.pause&&(ce=!0,ie.pause())}),ie.on("end",()=>{this.push(null)}),ie.on("error",A=>{Q(this,A)}),ie.on("close",()=>{this.destroy()}),ie.on("destroy",()=>{this.destroy()}),this._read=()=>{ce&&ie.resume&&(ce=!1,ie.resume())};const K=o(ie);for(let A=1;A<K.length;A++){const k=K[A];this[k]===void 0&&typeof ie[k]=="function"&&(this[k]=ie[k].bind(ie))}return this},B.prototype[c]=function(){return ae(this)},B.prototype.iterator=function(ie){return ie!==void 0&&z(ie,"options"),ae(this,ie)};function ae(ie,ce){typeof ie.read!="function"&&(ie=B.wrap(ie,{objectMode:!0}));const K=pe(ie,ce);return K.stream=ie,K}async function*pe(ie,ce){let K=q;function A(fe){this===ie?(K(),K=q):K=fe}ie.on("readable",A);let k;const se=v(ie,{writable:!1},fe=>{k=fe?x(k,fe):null,K(),K=q});try{for(;;){const fe=ie.destroyed?null:ie.read();if(fe!==null)yield fe;else{if(k)throw k;if(k===null)return;await new d(A)}}}catch(fe){throw k=x(k,fe),k}finally{(k||ce?.destroyOnReturn!==!1)&&(k===void 0||ie._readableState.autoDestroy)?w.destroyer(ie,null):(ie.off("readable",A),se())}}a(B.prototype,{readable:{__proto__:null,get(){const ie=this._readableState;return!!ie&&ie.readable!==!1&&!ie.destroyed&&!ie.errorEmitted&&!ie.endEmitted},set(ie){this._readableState&&(this._readableState.readable=!!ie)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ie){this._readableState&&(this._readableState.destroyed=ie)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(R.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[oe]!==!1},set(ie){this[oe]=!!ie}}}),B._fromList=we;function we(ie,ce){if(ce.length===0)return null;let K;return ce.objectMode?K=ce.buffer.shift():!ie||ie>=ce.length?(ce.decoder?K=ce.buffer.join(""):ce.buffer.length===1?K=ce.buffer.first():K=ce.buffer.concat(ce.length),ce.buffer.clear()):K=ce.buffer.consume(ie,ce.decoder),K}function Se(ie){const ce=ie._readableState;b("endReadable",ce.endEmitted),ce.endEmitted||(ce.ended=!0,t.nextTick(xe,ce,ie))}function xe(ie,ce){if(b("endReadableNT",ie.endEmitted,ie.length),!ie.errored&&!ie.closeEmitted&&!ie.endEmitted&&ie.length===0){if(ie.endEmitted=!0,ce.emit("end"),ce.writable&&ce.allowHalfOpen===!1)t.nextTick(Ee,ce);else if(ie.autoDestroy){const K=ce._writableState;(!K||K.autoDestroy&&(K.finished||K.writable===!1))&&ce.destroy()}}}function Ee(ie){ie.writable&&!ie.writableEnded&&!ie.destroyed&&ie.end()}B.from=function(ie,ce){return V(B,ie,ce)};let Ne;function Qe(){return Ne===void 0&&(Ne={}),Ne}return B.fromWeb=function(ie,ce){return Qe().newStreamReadableFromReadableStream(ie,ce)},B.toWeb=function(ie,ce){return Qe().newReadableStreamFromStreamReadable(ie,ce)},B.wrap=function(ie,ce){var K,A;return new B({objectMode:(K=(A=ie.readableObjectMode)!==null&&A!==void 0?A:ie.objectMode)!==null&&K!==void 0?K:!0,...ce,destroy(k,se){w.destroyer(ie,k),se(k)}}).wrap(ie)},Qv}var Jv,jI;function x8(){if(jI)return Jv;jI=1;const t=Vi,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:d,SymbolHasInstance:l}=hn;Jv=C,C.WritableState=z;const{EventEmitter:c}=fa,u=_$.Stream,{Buffer:h}=Dr,y=$h,{addAbortSignal:p}=ub,{getHighWaterMark:f,getDefaultHighWaterMark:g}=E$,{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:x,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:M}=Gi.codes,{errorOrDestroy:H}=y;o(C.prototype,u.prototype),o(C,u);function re(){}const J=d("kOnFinished");function z(P,j,X){typeof X!="boolean"&&(X=j instanceof fc()),this.objectMode=!!(P&&P.objectMode),X&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?f(this,P,"writableHighWaterMark",X):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(P&&P.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,j),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,oe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function oe(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}z.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function C(P){const j=this instanceof fc();if(!j&&!n(C,this))return new C(P);this._writableState=new z(P,this,j),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&p(P.signal,this)),u.call(this,P),y.construct(this,()=>{const X=this._writableState;X.writing||N(this,X),Y(this,X)})}i(C,l,{__proto__:null,value:function(P){return n(this,P)?!0:this!==C?!1:P&&P._writableState instanceof z}}),C.prototype.pipe=function(){H(this,new w)};function V(P,j,X,ne){const ae=P._writableState;if(typeof X=="function")ne=X,X=ae.defaultEncoding;else{if(!X)X=ae.defaultEncoding;else if(X!=="buffer"&&!h.isEncoding(X))throw new M(X);typeof ne!="function"&&(ne=re)}if(j===null)throw new x;if(!ae.objectMode)if(typeof j=="string")ae.decodeStrings!==!1&&(j=h.from(j,X),X="buffer");else if(j instanceof h)X="buffer";else if(u._isUint8Array(j))j=u._uint8ArrayToBuffer(j),X="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],j);let pe;return ae.ending?pe=new I:ae.destroyed&&(pe=new S("write")),pe?(t.nextTick(ne,pe),H(P,pe,!0),pe):(ae.pendingcb++,q(P,ae,j,X,ne))}C.prototype.write=function(P,j,X){return V(this,P,j,X)===!0},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const P=this._writableState;P.corked&&(P.corked--,P.writing||N(this,P))},C.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=s(j)),!h.isEncoding(j))throw new M(j);return this._writableState.defaultEncoding=j,this};function q(P,j,X,ne,ae){const pe=j.objectMode?1:X.length;j.length+=pe;const we=j.length<j.highWaterMark;return we||(j.needDrain=!0),j.writing||j.corked||j.errored||!j.constructed?(j.buffered.push({chunk:X,encoding:ne,callback:ae}),j.allBuffers&&ne!=="buffer"&&(j.allBuffers=!1),j.allNoop&&ae!==re&&(j.allNoop=!1)):(j.writelen=pe,j.writecb=ae,j.writing=!0,j.sync=!0,P._write(X,ne,j.onwrite),j.sync=!1),we&&!j.errored&&!j.destroyed}function Q(P,j,X,ne,ae,pe,we){j.writelen=ne,j.writecb=we,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new S("write")):X?P._writev(ae,j.onwrite):P._write(ae,pe,j.onwrite),j.sync=!1}function R(P,j,X,ne){--j.pendingcb,ne(X),Z(j),H(P,X)}function B(P,j){const X=P._writableState,ne=X.sync,ae=X.writecb;if(typeof ae!="function"){H(P,new m);return}X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0,j?(j.stack,X.errored||(X.errored=j),P._readableState&&!P._readableState.errored&&(P._readableState.errored=j),ne?t.nextTick(R,P,X,j,ae):R(P,X,j,ae)):(X.buffered.length>X.bufferedIndex&&N(P,X),ne?X.afterWriteTickInfo!==null&&X.afterWriteTickInfo.cb===ae?X.afterWriteTickInfo.count++:(X.afterWriteTickInfo={count:1,cb:ae,stream:P,state:X},t.nextTick(D,X.afterWriteTickInfo)):G(P,X,1,ae))}function D({stream:P,state:j,count:X,cb:ne}){return j.afterWriteTickInfo=null,G(P,j,X,ne)}function G(P,j,X,ne){for(!j.ending&&!P.destroyed&&j.length===0&&j.needDrain&&(j.needDrain=!1,P.emit("drain"));X-- >0;)j.pendingcb--,ne();j.destroyed&&Z(j),Y(P,j)}function Z(P){if(P.writing)return;for(let ae=P.bufferedIndex;ae<P.buffered.length;++ae){var j;const{chunk:pe,callback:we}=P.buffered[ae],Se=P.objectMode?1:pe.length;P.length-=Se,we((j=P.errored)!==null&&j!==void 0?j:new S("write"))}const X=P[J].splice(0);for(let ae=0;ae<X.length;ae++){var ne;X[ae]((ne=P.errored)!==null&&ne!==void 0?ne:new S("end"))}oe(P)}function N(P,j){if(j.corked||j.bufferProcessing||j.destroyed||!j.constructed)return;const{buffered:X,bufferedIndex:ne,objectMode:ae}=j,pe=X.length-ne;if(!pe)return;let we=ne;if(j.bufferProcessing=!0,pe>1&&P._writev){j.pendingcb-=pe-1;const Se=j.allNoop?re:Ee=>{for(let Ne=we;Ne<X.length;++Ne)X[Ne].callback(Ee)},xe=j.allNoop&&we===0?X:e(X,we);xe.allBuffers=j.allBuffers,Q(P,j,!0,j.length,xe,"",Se),oe(j)}else{do{const{chunk:Se,encoding:xe,callback:Ee}=X[we];X[we++]=null;const Ne=ae?1:Se.length;Q(P,j,!1,Ne,Se,xe,Ee)}while(we<X.length&&!j.writing);we===X.length?oe(j):we>256?(X.splice(0,we),j.bufferedIndex=0):j.bufferedIndex=we}j.bufferProcessing=!1}C.prototype._write=function(P,j,X){if(this._writev)this._writev([{chunk:P,encoding:j}],X);else throw new b("_write()")},C.prototype._writev=null,C.prototype.end=function(P,j,X){const ne=this._writableState;typeof P=="function"?(X=P,P=null,j=null):typeof j=="function"&&(X=j,j=null);let ae;if(P!=null){const pe=V(this,P,j);pe instanceof r&&(ae=pe)}return ne.corked&&(ne.corked=1,this.uncork()),ae||(!ne.errored&&!ne.ending?(ne.ending=!0,Y(this,ne,!0),ne.ended=!0):ne.finished?ae=new T("end"):ne.destroyed&&(ae=new S("end"))),typeof X=="function"&&(ae||ne.finished?t.nextTick(X,ae):ne[J].push(X)),this};function W(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function O(P,j){let X=!1;function ne(ae){if(X){H(P,ae??m());return}if(X=!0,j.pendingcb--,ae){const pe=j[J].splice(0);for(let we=0;we<pe.length;we++)pe[we](ae);H(P,ae,j.sync)}else W(j)&&(j.prefinished=!0,P.emit("prefinish"),j.pendingcb++,t.nextTick(ee,P,j))}j.sync=!0,j.pendingcb++;try{P._final(ne)}catch(ae){ne(ae)}j.sync=!1}function F(P,j){!j.prefinished&&!j.finalCalled&&(typeof P._final=="function"&&!j.destroyed?(j.finalCalled=!0,O(P,j)):(j.prefinished=!0,P.emit("prefinish")))}function Y(P,j,X){W(j)&&(F(P,j),j.pendingcb===0&&(X?(j.pendingcb++,t.nextTick((ne,ae)=>{W(ae)?ee(ne,ae):ae.pendingcb--},P,j)):W(j)&&(j.pendingcb++,ee(P,j))))}function ee(P,j){j.pendingcb--,j.finished=!0;const X=j[J].splice(0);for(let ne=0;ne<X.length;ne++)X[ne]();if(P.emit("finish"),j.autoDestroy){const ne=P._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&P.destroy()}}a(C.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){const P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const te=y.destroy;C.prototype.destroy=function(P,j){const X=this._writableState;return!X.destroyed&&(X.bufferedIndex<X.buffered.length||X[J].length)&&t.nextTick(Z,X),te.call(this,P,j),this},C.prototype._undestroy=y.undestroy,C.prototype._destroy=function(P,j){j(P)},C.prototype[c.captureRejectionSymbol]=function(P){this.destroy(P)};let U;function L(){return U===void 0&&(U={}),U}return C.fromWeb=function(P,j){return L().newStreamWritableFromWritableStream(P,j)},C.toWeb=function(P){return L().newWritableStreamFromStreamWritable(P)},Jv}var e1,CI;function Uie(){if(CI)return e1;CI=1;const t=Vi,e=Dr,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:d}=_c,l=Gd,{AbortError:c,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:h}}=Gi,{destroyer:y}=$h,p=fc(),f=fb(),{createDeferredPromise:g}=vc,v=P8,b=globalThis.Blob||e.Blob,m=typeof b<"u"?function(H){return H instanceof b}:function(H){return!1},w=globalThis.AbortController||Id().AbortController,{FunctionPrototypeCall:S}=hn;class T extends p{constructor(H){super(H),H?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),H?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}e1=function M(H,re){if(d(H))return H;if(o(H))return I({readable:H});if(s(H))return I({writable:H});if(a(H))return I({writable:!1,readable:!1});if(typeof H=="function"){const{value:z,write:oe,final:C,destroy:V}=x(H);if(i(z))return v(T,z,{objectMode:!0,write:oe,final:C,destroy:V});const q=z?.then;if(typeof q=="function"){let Q;const R=S(q,z,B=>{if(B!=null)throw new h("nully","body",B)},B=>{y(Q,B)});return Q=new T({objectMode:!0,readable:!1,write:oe,final(B){C(async()=>{try{await R,t.nextTick(B,null)}catch(D){t.nextTick(B,D)}})},destroy:V})}throw new h("Iterable, AsyncIterable or AsyncFunction",re,z)}if(m(H))return M(H.arrayBuffer());if(i(H))return v(T,H,{objectMode:!0,writable:!1});if(typeof H?.writable=="object"||typeof H?.readable=="object"){const z=H!=null&&H.readable?o(H?.readable)?H?.readable:M(H.readable):void 0,oe=H!=null&&H.writable?s(H?.writable)?H?.writable:M(H.writable):void 0;return I({readable:z,writable:oe})}const J=H?.then;if(typeof J=="function"){let z;return S(J,H,oe=>{oe!=null&&z.push(oe),z.push(null)},oe=>{y(z,oe)}),z=new T({objectMode:!0,writable:!1,read(){}})}throw new u(re,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],H)};function x(M){let{promise:H,resolve:re}=g();const J=new w,z=J.signal;return{value:M(async function*(){for(;;){const C=H;H=null;const{chunk:V,done:q,cb:Q}=await C;if(t.nextTick(Q),q)return;if(z.aborted)throw new c(void 0,{cause:z.reason});({promise:H,resolve:re}=g()),yield V}}(),{signal:z}),write(C,V,q){const Q=re;re=null,Q({chunk:C,done:!1,cb:q})},final(C){const V=re;re=null,V({done:!0,cb:C})},destroy(C,V){J.abort(),V(C)}}}function I(M){const H=M.readable&&typeof M.readable.read!="function"?f.wrap(M.readable):M.readable,re=M.writable;let J=!!r(H),z=!!n(re),oe,C,V,q,Q;function R(B){const D=q;q=null,D?D(B):B&&Q.destroy(B)}return Q=new T({readableObjectMode:!!(H!=null&&H.readableObjectMode),writableObjectMode:!!(re!=null&&re.writableObjectMode),readable:J,writable:z}),z&&(l(re,B=>{z=!1,B&&y(H,B),R(B)}),Q._write=function(B,D,G){re.write(B,D)?G():oe=G},Q._final=function(B){re.end(),C=B},re.on("drain",function(){if(oe){const B=oe;oe=null,B()}}),re.on("finish",function(){if(C){const B=C;C=null,B()}})),J&&(l(H,B=>{J=!1,B&&y(H,B),R(B)}),H.on("readable",function(){if(V){const B=V;V=null,B()}}),H.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){const B=H.read();if(B===null){V=Q._read;return}if(!Q.push(B))return}}),Q._destroy=function(B,D){!B&&q!==null&&(B=new c),V=null,oe=null,C=null,q===null?D(B):(q=D,y(re,B),y(H,B))},Q}return e1}var t1,NI;function fc(){if(NI)return t1;NI=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:n}=hn;t1=o;const i=fb(),a=x8();n(o.prototype,i.prototype),n(o,i);{const c=r(a.prototype);for(let u=0;u<c.length;u++){const h=c[u];o.prototype[h]||(o.prototype[h]=a.prototype[h])}}function o(c){if(!(this instanceof o))return new o(c);i.call(this,c),a.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(a.prototype,"writableLength")},writableFinished:{__proto__:null,...e(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let s;function d(){return s===void 0&&(s={}),s}o.fromWeb=function(c,u){return d().newStreamDuplexFromReadableWritablePair(c,u)},o.toWeb=function(c){return d().newReadableWritablePairFromDuplex(c)};let l;return o.from=function(c){return l||(l=Uie()),l(c,"body")},t1}const{ObjectSetPrototypeOf:I8,Symbol:Fie}=hn;var k8=hc;const{ERR_METHOD_NOT_IMPLEMENTED:zie}=Gi.codes,S$=fc(),{getHighWaterMark:qie}=E$;I8(hc.prototype,S$.prototype);I8(hc,S$);const Up=Fie("kCallback");function hc(t){if(!(this instanceof hc))return new hc(t);const e=t?qie(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),S$.call(this,t),this._readableState.sync=!1,this[Up]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Kie)}function G_(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Kie(){this._final!==G_&&G_.call(this)}hc.prototype._final=G_;hc.prototype._transform=function(t,e,r){throw new zie("_transform()")};hc.prototype._write=function(t,e,r){const n=this._readableState,i=this._writableState,a=n.length;this._transform(t,e,(o,s)=>{if(o){r(o);return}s!=null&&this.push(s),i.ended||a===n.length||n.length<n.highWaterMark?r():this[Up]=r})};hc.prototype._read=function(){if(this[Up]){const t=this[Up];this[Up]=null,t()}};const{ObjectSetPrototypeOf:O8}=hn;var R8=Xf;const $$=k8;O8(Xf.prototype,$$.prototype);O8(Xf,$$);function Xf(t){if(!(this instanceof Xf))return new Xf(t);$$.call(this,t)}Xf.prototype._transform=function(t,e,r){r(null,t)};const up=Vi,{ArrayIsArray:Vie,Promise:Hie,SymbolAsyncIterator:Gie}=hn,z0=Gd,{once:Wie}=vc,Yie=$h,BI=fc(),{aggregateTwoErrors:Zie,codes:{ERR_INVALID_ARG_TYPE:W_,ERR_INVALID_RETURN_VALUE:r1,ERR_MISSING_ARGS:Xie,ERR_STREAM_DESTROYED:Qie,ERR_STREAM_PREMATURE_CLOSE:Jie},AbortError:eoe}=Gi,{validateFunction:toe,validateAbortSignal:roe}=ib,{isIterable:fl,isReadable:n1,isReadableNodeStream:$g,isNodeStream:DI,isTransformStream:ef,isWebStream:noe,isReadableStream:i1,isReadableEnded:ioe}=_c,ooe=globalThis.AbortController||Id().AbortController;let o1,s1;function MI(t,e,r){let n=!1;t.on("close",()=>{n=!0});const i=z0(t,{readable:e,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,Yie.destroyer(t,a||new Qie("pipe")))},cleanup:i}}function soe(t){return toe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function a1(t){if(fl(t))return t;if($g(t))return aoe(t);throw new W_("val",["Readable","Iterable","AsyncIterable"],t)}async function*aoe(t){s1||(s1=fb()),yield*s1.prototype[Gie].call(t)}async function Gm(t,e,r,{end:n}){let i,a=null;const o=l=>{if(l&&(i=l),a){const c=a;a=null,c()}},s=()=>new Hie((l,c)=>{i?c(i):a=()=>{i?c(i):l()}});e.on("drain",o);const d=z0(e,{readable:!1},o);try{e.writableNeedDrain&&await s();for await(const l of t)e.write(l)||await s();n&&e.end(),await s(),r()}catch(l){r(i!==l?Zie(i,l):l)}finally{d(),e.off("drain",o)}}async function c1(t,e,r,{end:n}){ef(e)&&(e=e.writable);const i=e.getWriter();try{for await(const a of t)await i.ready,i.write(a).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(o){r(o)}}}function coe(...t){return j8(t,Wie(soe(t)))}function j8(t,e,r){if(t.length===1&&Vie(t[0])&&(t=t[0]),t.length<2)throw new Xie("streams");const n=new ooe,i=n.signal,a=r?.signal,o=[];roe(a,"options.signal");function s(){y(new eoe)}a?.addEventListener("abort",s);let d,l;const c=[];let u=0;function h(v){y(v,--u===0)}function y(v,b){if(v&&(!d||d.code==="ERR_STREAM_PREMATURE_CLOSE")&&(d=v),!(!d&&!b)){for(;c.length;)c.shift()(d);a?.removeEventListener("abort",s),n.abort(),b&&(d||o.forEach(m=>m()),up.nextTick(e,d,l))}}let p;for(let v=0;v<t.length;v++){const b=t[v],m=v<t.length-1,w=v>0,S=m||r?.end!==!1,T=v===t.length-1;if(DI(b)){let x=function(I){I&&I.name!=="AbortError"&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(I)};if(S){const{destroy:I,cleanup:M}=MI(b,m,w);c.push(I),n1(b)&&T&&o.push(M)}b.on("error",x),n1(b)&&T&&o.push(()=>{b.removeListener("error",x)})}if(v===0)if(typeof b=="function"){if(p=b({signal:i}),!fl(p))throw new r1("Iterable, AsyncIterable or Stream","source",p)}else fl(b)||$g(b)||ef(b)?p=b:p=BI.from(b);else if(typeof b=="function"){if(ef(p)){var f;p=a1((f=p)===null||f===void 0?void 0:f.readable)}else p=a1(p);if(p=b(p,{signal:i}),m){if(!fl(p,!0))throw new r1("AsyncIterable",`transform[${v-1}]`,p)}else{var g;o1||(o1=R8);const x=new o1({objectMode:!0}),I=(g=p)===null||g===void 0?void 0:g.then;if(typeof I=="function")u++,I.call(p,re=>{l=re,re!=null&&x.write(re),S&&x.end(),up.nextTick(h)},re=>{x.destroy(re),up.nextTick(h,re)});else if(fl(p,!0))u++,Gm(p,x,h,{end:S});else if(i1(p)||ef(p)){const re=p.readable||p;u++,Gm(re,x,h,{end:S})}else throw new r1("AsyncIterable or Promise","destination",p);p=x;const{destroy:M,cleanup:H}=MI(p,!1,!0);c.push(M),T&&o.push(H)}}else if(DI(b)){if($g(p)){u+=2;const x=doe(p,b,h,{end:S});n1(b)&&T&&o.push(x)}else if(ef(p)||i1(p)){const x=p.readable||p;u++,Gm(x,b,h,{end:S})}else if(fl(p))u++,Gm(p,b,h,{end:S});else throw new W_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=b}else if(noe(b)){if($g(p))u++,c1(a1(p),b,h,{end:S});else if(i1(p)||fl(p))u++,c1(p,b,h,{end:S});else if(ef(p))u++,c1(p.readable,b,h,{end:S});else throw new W_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=b}else p=BI.from(b)}return(i!=null&&i.aborted||a!=null&&a.aborted)&&up.nextTick(s),p}function doe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Jie)}),t.pipe(e,{end:!1}),n){let a=function(){i=!0,e.end()};ioe(t)?up.nextTick(a):t.once("end",a)}else r();return z0(t,{readable:!0,writable:!1},a=>{const o=t._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",r).once("error",r):r(a)}),z0(e,{readable:!1,writable:!0},r)}var T$={pipelineImpl:j8,pipeline:coe};const{pipeline:loe}=T$,Wm=fc(),{destroyer:uoe}=$h,{isNodeStream:Ym,isReadable:LI,isWritable:UI,isWebStream:d1,isTransformStream:sl,isWritableStream:FI,isReadableStream:zI}=_c,{AbortError:foe,codes:{ERR_INVALID_ARG_VALUE:qI,ERR_MISSING_ARGS:hoe}}=Gi,poe=Gd;var C8=function(...e){if(e.length===0)throw new hoe("streams");if(e.length===1)return Wm.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=Wm.from(e[0])),typeof e[e.length-1]=="function"){const y=e.length-1;e[y]=Wm.from(e[y])}for(let y=0;y<e.length;++y)if(!(!Ym(e[y])&&!d1(e[y]))){if(y<e.length-1&&!(LI(e[y])||zI(e[y])||sl(e[y])))throw new qI(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(UI(e[y])||FI(e[y])||sl(e[y])))throw new qI(`streams[${y}]`,r[y],"must be writable")}let n,i,a,o,s;function d(y){const p=o;o=null,p?p(y):y?s.destroy(y):!h&&!u&&s.destroy()}const l=e[0],c=loe(e,d),u=!!(UI(l)||FI(l)||sl(l)),h=!!(LI(c)||zI(c)||sl(c));if(s=new Wm({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(c!=null&&c.writableObjectMode),writable:u,readable:h}),u){if(Ym(l))s._write=function(p,f,g){l.write(p,f)?g():n=g},s._final=function(p){l.end(),i=p},l.on("drain",function(){if(n){const p=n;n=null,p()}});else if(d1(l)){const f=(sl(l)?l.writable:l).getWriter();s._write=async function(g,v,b){try{await f.ready,f.write(g).catch(()=>{}),b()}catch(m){b(m)}},s._final=async function(g){try{await f.ready,f.close().catch(()=>{}),i=g}catch(v){g(v)}}}const y=sl(c)?c.readable:c;poe(y,()=>{if(i){const p=i;i=null,p()}})}if(h){if(Ym(c))c.on("readable",function(){if(a){const y=a;a=null,y()}}),c.on("end",function(){s.push(null)}),s._read=function(){for(;;){const y=c.read();if(y===null){a=s._read;return}if(!s.push(y))return}};else if(d1(c)){const p=(sl(c)?c.readable:c).getReader();s._read=async function(){for(;;)try{const{value:f,done:g}=await p.read();if(!s.push(f))return;if(g){s.push(null);return}}catch{return}}}}return s._destroy=function(y,p){!y&&o!==null&&(y=new foe),a=null,n=null,i=null,o===null?p(y):(o=p,Ym(c)&&uoe(c,y))},s};const N8=globalThis.AbortController||Id().AbortController,{codes:{ERR_INVALID_ARG_VALUE:yoe,ERR_INVALID_ARG_TYPE:Qy,ERR_MISSING_ARGS:moe,ERR_OUT_OF_RANGE:goe},AbortError:aa}=Gi,{validateAbortSignal:xu,validateInteger:woe,validateObject:Iu}=ib,boe=hn.Symbol("kWeak"),{finished:voe}=Gd,_oe=C8,{addAbortSignalNoValidate:Eoe}=ub,{isWritable:Soe,isNodeStream:$oe}=_c,{ArrayPrototypePush:Toe,MathFloor:Aoe,Number:Poe,NumberIsNaN:xoe,Promise:KI,PromiseReject:VI,PromisePrototypeThen:Ioe,Symbol:B8}=hn,q0=B8("kEmpty"),HI=B8("kEof");function koe(t,e){if(e!=null&&Iu(e,"options"),e?.signal!=null&&xu(e.signal,"options.signal"),$oe(t)&&!Soe(t))throw new yoe("stream",t,"must be writable");const r=_oe(this,t);return e!=null&&e.signal&&Eoe(e.signal,r),r}function hb(t,e){if(typeof t!="function")throw new Qy("fn",["Function","AsyncFunction"],t);e!=null&&Iu(e,"options"),e?.signal!=null&&xu(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=Aoe(e.concurrency)),woe(r,"concurrency",1),async function*(){var i,a;const o=new N8,s=this,d=[],l=o.signal,c={signal:l},u=()=>o.abort();e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted&&u(),e==null||(a=e.signal)===null||a===void 0||a.addEventListener("abort",u);let h,y,p=!1;function f(){p=!0}async function g(){try{for await(let m of s){var v;if(p)return;if(l.aborted)throw new aa;try{m=t(m,c)}catch(w){m=VI(w)}m!==q0&&(typeof((v=m)===null||v===void 0?void 0:v.catch)=="function"&&m.catch(f),d.push(m),h&&(h(),h=null),!p&&d.length&&d.length>=r&&await new KI(w=>{y=w}))}d.push(HI)}catch(m){const w=VI(m);Ioe(w,void 0,f),d.push(w)}finally{var b;p=!0,h&&(h(),h=null),e==null||(b=e.signal)===null||b===void 0||b.removeEventListener("abort",u)}}g();try{for(;;){for(;d.length>0;){const v=await d[0];if(v===HI)return;if(l.aborted)throw new aa;v!==q0&&(yield v),d.shift(),y&&(y(),y=null)}await new KI(v=>{h=v})}}finally{o.abort(),p=!0,y&&(y(),y=null)}}.call(this)}function Ooe(t=void 0){return t!=null&&Iu(t,"options"),t?.signal!=null&&xu(t.signal,"options.signal"),async function*(){let r=0;for await(const i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new aa({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function D8(t,e=void 0){for await(const r of A$.call(this,t,e))return!0;return!1}async function Roe(t,e=void 0){if(typeof t!="function")throw new Qy("fn",["Function","AsyncFunction"],t);return!await D8.call(this,async(...r)=>!await t(...r),e)}async function joe(t,e){for await(const r of A$.call(this,t,e))return r}async function Coe(t,e){if(typeof t!="function")throw new Qy("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),q0}for await(const n of hb.call(this,r,e));}function A$(t,e){if(typeof t!="function")throw new Qy("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:q0}return hb.call(this,r,e)}class Noe extends moe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Boe(t,e,r){var n;if(typeof t!="function")throw new Qy("reducer",["Function","AsyncFunction"],t);r!=null&&Iu(r,"options"),r?.signal!=null&&xu(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const l=new aa(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await voe(this.destroy(l)),l}const a=new N8,o=a.signal;if(r!=null&&r.signal){const l={once:!0,[boe]:this};r.signal.addEventListener("abort",()=>a.abort(),l)}let s=!1;try{for await(const l of this){var d;if(s=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new aa;i?e=await t(e,l,{signal:o}):(e=l,i=!0)}if(!s&&!i)throw new Noe}finally{a.abort()}return e}async function Doe(t){t!=null&&Iu(t,"options"),t?.signal!=null&&xu(t.signal,"options.signal");const e=[];for await(const n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new aa(void 0,{cause:t.signal.reason});Toe(e,n)}return e}function Moe(t,e){const r=hb.call(this,t,e);return async function*(){for await(const i of r)yield*i}.call(this)}function M8(t){if(t=Poe(t),xoe(t))return 0;if(t<0)throw new goe("number",">= 0",t);return t}function Loe(t,e=void 0){return e!=null&&Iu(e,"options"),e?.signal!=null&&xu(e.signal,"options.signal"),t=M8(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new aa;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new aa;t--<=0&&(yield a)}}.call(this)}function Uoe(t,e=void 0){return e!=null&&Iu(e,"options"),e?.signal!=null&&xu(e.signal,"options.signal"),t=M8(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new aa;for await(const a of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new aa;if(t-- >0)yield a;else return}}.call(this)}y$.streamReturningOperators={asIndexedPairs:Ooe,drop:Loe,filter:A$,flatMap:Moe,map:hb,take:Uoe,compose:koe};y$.promiseReturningOperators={every:Roe,forEach:Coe,reduce:Boe,toArray:Doe,some:D8,find:joe};var l1,GI;function L8(){if(GI)return l1;GI=1;const{ArrayPrototypePop:t,Promise:e}=hn,{isIterable:r,isNodeStream:n,isWebStream:i}=_c,{pipelineImpl:a}=T$,{finished:o}=Gd;U8();function s(...d){return new e((l,c)=>{let u,h;const y=d[d.length-1];if(y&&typeof y=="object"&&!n(y)&&!r(y)&&!i(y)){const p=t(d);u=p.signal,h=p.end}a(d,(p,f)=>{p?c(p):l(f)},{signal:u,end:h})})}return l1={finished:o,pipeline:s},l1}var WI;function U8(){if(WI)return Wv.exports;WI=1;const{Buffer:t}=Dr,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:n}=hn,{promisify:{custom:i}}=vc,{streamReturningOperators:a,promiseReturningOperators:o}=y$,{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=Gi,d=C8,{pipeline:l}=T$,{destroyer:c}=$h,u=Gd,h=L8(),y=_c,p=Wv.exports=_$.Stream;p.isDisturbed=y.isDisturbed,p.isErrored=y.isErrored,p.isReadable=y.isReadable,p.Readable=fb();for(const g of r(a)){let b=function(...m){if(new.target)throw s();return p.Readable.from(n(v,this,m))};const v=a[g];e(b,"name",{__proto__:null,value:v.name}),e(b,"length",{__proto__:null,value:v.length}),e(p.Readable.prototype,g,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}for(const g of r(o)){let b=function(...m){if(new.target)throw s();return n(v,this,m)};const v=o[g];e(b,"name",{__proto__:null,value:v.name}),e(b,"length",{__proto__:null,value:v.length}),e(p.Readable.prototype,g,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}p.Writable=x8(),p.Duplex=fc(),p.Transform=k8,p.PassThrough=R8,p.pipeline=l;const{addAbortSignal:f}=ub;return p.addAbortSignal=f,p.finished=u,p.destroy=c,p.compose=d,e(p,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),e(l,i,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),e(u,i,{__proto__:null,enumerable:!0,get(){return h.finished}}),p.Stream=p,p._isUint8Array=function(v){return v instanceof Uint8Array},p._uint8ArrayToBuffer=function(v){return t.from(v.buffer,v.byteOffset,v.byteLength)},Wv.exports}(function(t){const e=U8(),r=L8(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(Mre);function YI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Foe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function F8(t,...e){if(!Foe(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function zoe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");YI(t.outputLen),YI(t.blockLen)}function K0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qoe(t,e){F8(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const u1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const f1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ks=(t,e)=>t<<32-e|t>>>e,Koe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Koe)throw new Error("Non little-endian hardware is not supported");function P$(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function x$(t){if(typeof t=="string"&&(t=P$(t)),!z8(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function q8(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];if(!z8(i))throw new Error("Uint8Array expected");e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const a=t[n];r.set(a,i),i+=a.length}return r}class K8{clone(){return this._cloneInto()}}function V8(t){const e=n=>t().update(x$(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function I$(t=32){if(u1&&typeof u1.getRandomValues=="function")return u1.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Voe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),d=n?4:0,l=n?0:4;t.setUint32(e+d,o,n),t.setUint32(e+l,s,n)}class H8 extends K8{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=f1(this.buffer)}update(e){K0(this);const{view:r,buffer:n,blockLen:i}=this;e=x$(e);const a=e.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const d=f1(e);for(;i<=a-o;o+=i)this.process(d,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){K0(this),qoe(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let u=o;u<i;u++)r[u]=0;Voe(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=f1(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=d/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)s.setUint32(4*u,c[u],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(n),e}}const Hoe=(t,e,r)=>t&e^~t&r,Goe=(t,e,r)=>t&e^t&r^e&r,Woe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vc=new Uint32Array(64);class Yoe extends H8{constructor(){super(64,32,8,!1),this.A=Kc[0]|0,this.B=Kc[1]|0,this.C=Kc[2]|0,this.D=Kc[3]|0,this.E=Kc[4]|0,this.F=Kc[5]|0,this.G=Kc[6]|0,this.H=Kc[7]|0}get(){const{A:e,B:r,C:n,D:i,E:a,F:o,G:s,H:d}=this;return[e,r,n,i,a,o,s,d]}set(e,r,n,i,a,o,s,d){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=d|0}process(e,r){for(let u=0;u<16;u++,r+=4)Vc[u]=e.getUint32(r,!1);for(let u=16;u<64;u++){const h=Vc[u-15],y=Vc[u-2],p=ks(h,7)^ks(h,18)^h>>>3,f=ks(y,17)^ks(y,19)^y>>>10;Vc[u]=f+Vc[u-7]+p+Vc[u-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:d,G:l,H:c}=this;for(let u=0;u<64;u++){const h=ks(s,6)^ks(s,11)^ks(s,25),y=c+h+Hoe(s,d,l)+Woe[u]+Vc[u]|0,f=(ks(n,2)^ks(n,13)^ks(n,22))+Goe(n,i,a)|0;c=l,l=d,d=s,s=o+y|0,o=a,a=i,i=n,n=y+f|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,d=d+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,i,a,o,s,d,l,c)}roundClean(){Vc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const uu=V8(()=>new Yoe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const G8=BigInt(0),pb=BigInt(1),Zoe=BigInt(2);function ca(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const Xoe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function fu(t){if(!ca(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Xoe[t[r]];return e}function W8(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function k$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ia={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ZI(t){if(t>=Ia._0&&t<=Ia._9)return t-Ia._0;if(t>=Ia._A&&t<=Ia._F)return t-(Ia._A-10);if(t>=Ia._a&&t<=Ia._f)return t-(Ia._a-10)}function Qf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const o=ZI(t.charCodeAt(a)),s=ZI(t.charCodeAt(a+1));if(o===void 0||s===void 0){const d=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}n[i]=o*16+s}return n}function Wl(t){return k$(fu(t))}function _d(t){if(!ca(t))throw new Error("Uint8Array expected");return k$(fu(Uint8Array.from(t).reverse()))}function da(t,e){return Qf(t.toString(16).padStart(e*2,"0"))}function Jf(t,e){return da(t,e).reverse()}function Qoe(t){return Qf(W8(t))}function Hr(t,e,r){let n;if(typeof e=="string")try{n=Qf(e)}catch(a){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${a}`)}else if(ca(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function hu(...t){let e=0;for(let i=0;i<t.length;i++){const a=t[i];if(!ca(a))throw new Error("Uint8Array expected");e+=a.length}let r=new Uint8Array(e),n=0;for(let i=0;i<t.length;i++){const a=t[i];r.set(a,n),n+=a.length}return r}function Joe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function ese(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function tse(t){let e;for(e=0;t>G8;t>>=pb,e+=1);return e}function rse(t,e){return t>>BigInt(e)&pb}const nse=(t,e,r)=>t|(r?pb:G8)<<BigInt(e),O$=t=>(Zoe<<BigInt(t-1))-pb,h1=t=>new Uint8Array(t),XI=t=>Uint8Array.from(t);function Y8(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=h1(t),i=h1(t),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=(...u)=>r(i,n,...u),d=(u=h1())=>{i=s(XI([0]),u),n=s(),u.length!==0&&(i=s(XI([1]),u),n=s())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<e;){n=s();const y=n.slice();h.push(y),u+=n.length}return hu(...h)};return(u,h)=>{o(),d(u);let y;for(;!(y=h(l()));)d();return o(),y}}const ise={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ca(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ku(t,e,r={}){const n=(i,a,o)=>{const s=ise[a];if(typeof s!="function")throw new Error(`Invalid validator "${a}", expected function`);const d=t[i];if(!(o&&d===void 0)&&!s(d,t))throw new Error(`Invalid param ${String(i)}=${d} (${typeof d}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(r))n(i,a,!0);return t}const ose=Object.freeze(Object.defineProperty({__proto__:null,bitGet:rse,bitLen:tse,bitMask:O$,bitSet:nse,bytesToHex:fu,bytesToNumberBE:Wl,bytesToNumberLE:_d,concatBytes:hu,createHmacDrbg:Y8,ensureBytes:Hr,equalBytes:Joe,hexToBytes:Qf,hexToNumber:k$,isBytes:ca,numberToBytesBE:da,numberToBytesLE:Jf,numberToHexUnpadded:W8,numberToVarBytesBE:Qoe,utf8ToBytes:ese,validateObject:ku},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const An=BigInt(0),xr=BigInt(1),Al=BigInt(2),sse=BigInt(3),Y_=BigInt(4),QI=BigInt(5),JI=BigInt(8);BigInt(9);BigInt(16);function pr(t,e){const r=t%e;return r>=An?r:e+r}function Z8(t,e,r){if(r<=An||e<An)throw new Error("Expected power/modulo > 0");if(r===xr)return An;let n=xr;for(;e>An;)e&xr&&(n=n*t%r),t=t*t%r,e>>=xr;return n}function Tr(t,e,r){let n=t;for(;e-- >An;)n*=n,n%=r;return n}function Z_(t,e){if(t===An||e<=An)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=pr(t,e),n=e,i=An,a=xr;for(;r!==An;){const s=n/r,d=n%r,l=i-a*s;n=r,r=d,i=a,a=l}if(n!==xr)throw new Error("invert: does not exist");return pr(i,e)}function ase(t){const e=(t-xr)/Al;let r,n,i;for(r=t-xr,n=0;r%Al===An;r/=Al,n++);for(i=Al;i<t&&Z8(i,e,t)!==t-xr;i++);if(n===1){const o=(t+xr)/Y_;return function(d,l){const c=d.pow(l,o);if(!d.eql(d.sqr(c),l))throw new Error("Cannot find square root");return c}}const a=(r+xr)/Al;return function(s,d){if(s.pow(d,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let l=n,c=s.pow(s.mul(s.ONE,i),r),u=s.pow(d,a),h=s.pow(d,r);for(;!s.eql(h,s.ONE);){if(s.eql(h,s.ZERO))return s.ZERO;let y=1;for(let f=s.sqr(h);y<l&&!s.eql(f,s.ONE);y++)f=s.sqr(f);const p=s.pow(c,xr<<BigInt(l-y-1));c=s.sqr(p),u=s.mul(u,p),h=s.mul(h,c),l=y}return u}}function cse(t){if(t%Y_===sse){const e=(t+xr)/Y_;return function(n,i){const a=n.pow(i,e);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%JI===QI){const e=(t-QI)/JI;return function(n,i){const a=n.mul(i,Al),o=n.pow(a,e),s=n.mul(i,o),d=n.mul(n.mul(s,Al),o),l=n.mul(s,n.sub(d,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return ase(t)}const dse=(t,e)=>(pr(t,e)&xr)===xr,lse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function use(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=lse.reduce((n,i)=>(n[i]="function",n),e);return ku(t,r)}function fse(t,e,r){if(r<An)throw new Error("Expected power > 0");if(r===An)return t.ONE;if(r===xr)return e;let n=t.ONE,i=e;for(;r>An;)r&xr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=xr;return n}function hse(t,e){const r=new Array(e.length),n=e.reduce((a,o,s)=>t.is0(o)?a:(r[s]=a,t.mul(a,o)),t.ONE),i=t.inv(n);return e.reduceRight((a,o,s)=>t.is0(o)?a:(r[s]=t.mul(a,r[s]),t.mul(a,o)),i),r}function X8(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function R$(t,e,r=!1,n={}){if(t<=An)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:a}=X8(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=cse(t),s=Object.freeze({ORDER:t,BITS:i,BYTES:a,MASK:O$(i),ZERO:An,ONE:xr,create:d=>pr(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return An<=d&&d<t},is0:d=>d===An,isOdd:d=>(d&xr)===xr,neg:d=>pr(-d,t),eql:(d,l)=>d===l,sqr:d=>pr(d*d,t),add:(d,l)=>pr(d+l,t),sub:(d,l)=>pr(d-l,t),mul:(d,l)=>pr(d*l,t),pow:(d,l)=>fse(s,d,l),div:(d,l)=>pr(d*Z_(l,t),t),sqrN:d=>d*d,addN:(d,l)=>d+l,subN:(d,l)=>d-l,mulN:(d,l)=>d*l,inv:d=>Z_(d,t),sqrt:n.sqrt||(d=>o(s,d)),invertBatch:d=>hse(s,d),cmov:(d,l,c)=>c?l:d,toBytes:d=>r?Jf(d,a):da(d,a),fromBytes:d=>{if(d.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${d.length}`);return r?_d(d):Wl(d)}});return Object.freeze(s)}function pse(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function Q8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function J8(t){const e=Q8(t);return e+Math.ceil(e/2)}function yse(t,e,r=!1){const n=t.length,i=Q8(e),a=J8(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=r?Wl(t):_d(t),s=pr(o,e-xr)+xr;return r?Jf(s,i):da(s,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mse=BigInt(0),p1=BigInt(1);function eC(t,e){const r=(i,a)=>{const o=a.negate();return i?o:a},n=i=>{const a=Math.ceil(e/i)+1,o=2**(i-1);return{windows:a,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,a){let o=t.ZERO,s=i;for(;a>mse;)a&p1&&(o=o.add(s)),s=s.double(),a>>=p1;return o},precomputeWindow(i,a){const{windows:o,windowSize:s}=n(a),d=[];let l=i,c=l;for(let u=0;u<o;u++){c=l,d.push(c);for(let h=1;h<s;h++)c=c.add(l),d.push(c);l=c.double()}return d},wNAF(i,a,o){const{windows:s,windowSize:d}=n(i);let l=t.ZERO,c=t.BASE;const u=BigInt(2**i-1),h=2**i,y=BigInt(i);for(let p=0;p<s;p++){const f=p*d;let g=Number(o&u);o>>=y,g>d&&(g-=h,o+=p1);const v=f,b=f+Math.abs(g)-1,m=p%2!==0,w=g<0;g===0?c=c.add(r(m,a[v])):l=l.add(r(w,a[b]))}return{p:l,f:c}},wNAFCached(i,a,o,s){const d=i._WINDOW_SIZE||1;let l=a.get(i);return l||(l=this.precomputeWindow(i,d),d!==1&&a.set(i,s(l))),this.wNAF(d,l,o)}}}function j$(t){return use(t.Fp),ku(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...X8(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gse(t){const e=j$(t);ku(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:wse,hexToBytes:bse}=ose,Nl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Nl;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:wse(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=Nl,r=typeof t=="string"?bse(t):t;if(!ca(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=Nl._parseInt(r.subarray(2)),{d:o,l:s}=Nl._parseInt(a);if(s.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,r=l=>{const c=l.toString(16);return c.length&1?`0${c}`:c},n=e(r(t.s)),i=e(r(t.r)),a=n.length/2,o=i.length/2,s=r(a),d=r(o);return`30${r(o+a+4)}02${d}${i}02${s}${n}`}},Ka=BigInt(0),No=BigInt(1);BigInt(2);const ek=BigInt(3);BigInt(4);function vse(t){const e=gse(t),{Fp:r}=e,n=e.toBytes||((p,f,g)=>{const v=f.toAffine();return hu(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),i=e.fromBytes||(p=>{const f=p.subarray(1),g=r.fromBytes(f.subarray(0,r.BYTES)),v=r.fromBytes(f.subarray(r.BYTES,2*r.BYTES));return{x:g,y:v}});function a(p){const{a:f,b:g}=e,v=r.sqr(p),b=r.mul(v,p);return r.add(r.add(b,r.mul(p,f)),g)}if(!r.eql(r.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ka<p&&p<e.n}function s(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(p){const{allowedPrivateKeyLengths:f,nByteLength:g,wrapPrivateKey:v,n:b}=e;if(f&&typeof p!="bigint"){if(ca(p)&&(p=fu(p)),typeof p!="string"||!f.includes(p.length))throw new Error("Invalid key");p=p.padStart(g*2,"0")}let m;try{m=typeof p=="bigint"?p:Wl(Hr("private key",p,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof p}`)}return v&&(m=pr(m,b)),s(m),m}const l=new Map;function c(p){if(!(p instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(f,g,v){if(this.px=f,this.py=g,this.pz=v,f==null||!r.isValid(f))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required")}static fromAffine(f){const{x:g,y:v}=f||{};if(!f||!r.isValid(g)||!r.isValid(v))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");const b=m=>r.eql(m,r.ZERO);return b(g)&&b(v)?u.ZERO:new u(g,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){const g=r.invertBatch(f.map(v=>v.pz));return f.map((v,b)=>v.toAffine(g[b])).map(u.fromAffine)}static fromHex(f){const g=u.fromAffine(i(Hr("pointHex",f)));return g.assertValidity(),g}static fromPrivateKey(f){return u.BASE.multiply(d(f))}_setWindowSize(f){this._WINDOW_SIZE=f,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:f,y:g}=this.toAffine();if(!r.isValid(f)||!r.isValid(g))throw new Error("bad point: x or y not FE");const v=r.sqr(g),b=a(f);if(!r.eql(v,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:f}=this.toAffine();if(r.isOdd)return!r.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);const{px:g,py:v,pz:b}=this,{px:m,py:w,pz:S}=f,T=r.eql(r.mul(g,S),r.mul(m,b)),x=r.eql(r.mul(v,S),r.mul(w,b));return T&&x}negate(){return new u(this.px,r.neg(this.py),this.pz)}double(){const{a:f,b:g}=e,v=r.mul(g,ek),{px:b,py:m,pz:w}=this;let S=r.ZERO,T=r.ZERO,x=r.ZERO,I=r.mul(b,b),M=r.mul(m,m),H=r.mul(w,w),re=r.mul(b,m);return re=r.add(re,re),x=r.mul(b,w),x=r.add(x,x),S=r.mul(f,x),T=r.mul(v,H),T=r.add(S,T),S=r.sub(M,T),T=r.add(M,T),T=r.mul(S,T),S=r.mul(re,S),x=r.mul(v,x),H=r.mul(f,H),re=r.sub(I,H),re=r.mul(f,re),re=r.add(re,x),x=r.add(I,I),I=r.add(x,I),I=r.add(I,H),I=r.mul(I,re),T=r.add(T,I),H=r.mul(m,w),H=r.add(H,H),I=r.mul(H,re),S=r.sub(S,I),x=r.mul(H,M),x=r.add(x,x),x=r.add(x,x),new u(S,T,x)}add(f){c(f);const{px:g,py:v,pz:b}=this,{px:m,py:w,pz:S}=f;let T=r.ZERO,x=r.ZERO,I=r.ZERO;const M=e.a,H=r.mul(e.b,ek);let re=r.mul(g,m),J=r.mul(v,w),z=r.mul(b,S),oe=r.add(g,v),C=r.add(m,w);oe=r.mul(oe,C),C=r.add(re,J),oe=r.sub(oe,C),C=r.add(g,b);let V=r.add(m,S);return C=r.mul(C,V),V=r.add(re,z),C=r.sub(C,V),V=r.add(v,b),T=r.add(w,S),V=r.mul(V,T),T=r.add(J,z),V=r.sub(V,T),I=r.mul(M,C),T=r.mul(H,z),I=r.add(T,I),T=r.sub(J,I),I=r.add(J,I),x=r.mul(T,I),J=r.add(re,re),J=r.add(J,re),z=r.mul(M,z),C=r.mul(H,C),J=r.add(J,z),z=r.sub(re,z),z=r.mul(M,z),C=r.add(C,z),re=r.mul(J,C),x=r.add(x,re),re=r.mul(V,C),T=r.mul(oe,T),T=r.sub(T,re),re=r.mul(oe,J),I=r.mul(V,I),I=r.add(I,re),new u(T,x,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return y.wNAFCached(this,l,f,g=>{const v=r.invertBatch(g.map(b=>b.pz));return g.map((b,m)=>b.toAffine(v[m])).map(u.fromAffine)})}multiplyUnsafe(f){const g=u.ZERO;if(f===Ka)return g;if(s(f),f===No)return this;const{endo:v}=e;if(!v)return y.unsafeLadder(this,f);let{k1neg:b,k1:m,k2neg:w,k2:S}=v.splitScalar(f),T=g,x=g,I=this;for(;m>Ka||S>Ka;)m&No&&(T=T.add(I)),S&No&&(x=x.add(I)),I=I.double(),m>>=No,S>>=No;return b&&(T=T.negate()),w&&(x=x.negate()),x=new u(r.mul(x.px,v.beta),x.py,x.pz),T.add(x)}multiply(f){s(f);let g=f,v,b;const{endo:m}=e;if(m){const{k1neg:w,k1:S,k2neg:T,k2:x}=m.splitScalar(g);let{p:I,f:M}=this.wNAF(S),{p:H,f:re}=this.wNAF(x);I=y.constTimeNegate(w,I),H=y.constTimeNegate(T,H),H=new u(r.mul(H.px,m.beta),H.py,H.pz),v=I.add(H),b=M.add(re)}else{const{p:w,f:S}=this.wNAF(g);v=w,b=S}return u.normalizeZ([v,b])[0]}multiplyAndAddUnsafe(f,g,v){const b=u.BASE,m=(S,T)=>T===Ka||T===No||!S.equals(b)?S.multiplyUnsafe(T):S.multiply(T),w=m(this,g).add(m(f,v));return w.is0()?void 0:w}toAffine(f){const{px:g,py:v,pz:b}=this,m=this.is0();f==null&&(f=m?r.ONE:r.inv(b));const w=r.mul(g,f),S=r.mul(v,f),T=r.mul(b,f);if(m)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:w,y:S}}isTorsionFree(){const{h:f,isTorsionFree:g}=e;if(f===No)return!0;if(g)return g(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:f,clearCofactor:g}=e;return f===No?this:g?g(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),n(u,this,f)}toHex(f=!0){return fu(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,r.ONE),u.ZERO=new u(r.ZERO,r.ONE,r.ZERO);const h=e.nBitLength,y=eC(u,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:o}}function _se(t){const e=j$(t);return ku(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Ese(t){const e=_se(t),{Fp:r,n}=e,i=r.BYTES+1,a=2*r.BYTES+1;function o(C){return Ka<C&&C<r.ORDER}function s(C){return pr(C,n)}function d(C){return Z_(C,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=vse({...e,toBytes(C,V,q){const Q=V.toAffine(),R=r.toBytes(Q.x),B=hu;return q?B(Uint8Array.from([V.hasEvenY()?2:3]),R):B(Uint8Array.from([4]),R,r.toBytes(Q.y))},fromBytes(C){const V=C.length,q=C[0],Q=C.subarray(1);if(V===i&&(q===2||q===3)){const R=Wl(Q);if(!o(R))throw new Error("Point is not on curve");const B=u(R);let D=r.sqrt(B);const G=(D&No)===No;return(q&1)===1!==G&&(D=r.neg(D)),{x:R,y:D}}else if(V===a&&q===4){const R=r.fromBytes(Q.subarray(0,r.BYTES)),B=r.fromBytes(Q.subarray(r.BYTES,2*r.BYTES));return{x:R,y:B}}else throw new Error(`Point of length ${V} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),y=C=>fu(da(C,e.nByteLength));function p(C){const V=n>>No;return C>V}function f(C){return p(C)?s(-C):C}const g=(C,V,q)=>Wl(C.slice(V,q));class v{constructor(V,q,Q){this.r=V,this.s=q,this.recovery=Q,this.assertValidity()}static fromCompact(V){const q=e.nByteLength;return V=Hr("compactSignature",V,q*2),new v(g(V,0,q),g(V,q,2*q))}static fromDER(V){const{r:q,s:Q}=Nl.toSig(Hr("DER",V));return new v(q,Q)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new v(this.r,this.s,V)}recoverPublicKey(V){const{r:q,s:Q,recovery:R}=this,B=x(Hr("msgHash",V));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const D=R===2||R===3?q+e.n:q;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const G=R&1?"03":"02",Z=l.fromHex(G+y(D)),N=d(D),W=s(-B*N),O=s(Q*N),F=l.BASE.multiplyAndAddUnsafe(Z,W,O);if(!F)throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Qf(this.toDERHex())}toDERHex(){return Nl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qf(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const b={isValidPrivateKey(C){try{return c(C),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const C=J8(e.n);return yse(e.randomBytes(C),e.n)},precompute(C=8,V=l.BASE){return V._setWindowSize(C),V.multiply(BigInt(3)),V}};function m(C,V=!0){return l.fromPrivateKey(C).toRawBytes(V)}function w(C){const V=ca(C),q=typeof C=="string",Q=(V||q)&&C.length;return V?Q===i||Q===a:q?Q===2*i||Q===2*a:C instanceof l}function S(C,V,q=!0){if(w(C))throw new Error("first arg must be private key");if(!w(V))throw new Error("second arg must be public key");return l.fromHex(V).multiply(c(C)).toRawBytes(q)}const T=e.bits2int||function(C){const V=Wl(C),q=C.length*8-e.nBitLength;return q>0?V>>BigInt(q):V},x=e.bits2int_modN||function(C){return s(T(C))},I=O$(e.nBitLength);function M(C){if(typeof C!="bigint")throw new Error("bigint expected");if(!(Ka<=C&&C<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return da(C,e.nByteLength)}function H(C,V,q=re){if(["recovered","canonical"].some(ee=>ee in q))throw new Error("sign() legacy options not supported");const{hash:Q,randomBytes:R}=e;let{lowS:B,prehash:D,extraEntropy:G}=q;B==null&&(B=!0),C=Hr("msgHash",C),D&&(C=Hr("prehashed msgHash",Q(C)));const Z=x(C),N=c(V),W=[M(N),M(Z)];if(G!=null){const ee=G===!0?R(r.BYTES):G;W.push(Hr("extraEntropy",ee))}const O=hu(...W),F=Z;function Y(ee){const te=T(ee);if(!h(te))return;const U=d(te),L=l.BASE.multiply(te).toAffine(),P=s(L.x);if(P===Ka)return;const j=s(U*s(F+P*N));if(j===Ka)return;let X=(L.x===P?0:2)|Number(L.y&No),ne=j;return B&&p(j)&&(ne=f(j),X^=1),new v(P,ne,X)}return{seed:O,k2sig:Y}}const re={lowS:e.lowS,prehash:!1},J={lowS:e.lowS,prehash:!1};function z(C,V,q=re){const{seed:Q,k2sig:R}=H(C,V,q),B=e;return Y8(B.hash.outputLen,B.nByteLength,B.hmac)(Q,R)}l.BASE._setWindowSize(8);function oe(C,V,q,Q=J){const R=C;if(V=Hr("msgHash",V),q=Hr("publicKey",q),"strict"in Q)throw new Error("options.strict was renamed to lowS");const{lowS:B,prehash:D}=Q;let G,Z;try{if(typeof R=="string"||ca(R))try{G=v.fromDER(R)}catch(L){if(!(L instanceof Nl.Err))throw L;G=v.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){const{r:L,s:P}=R;G=new v(L,P)}else throw new Error("PARSE");Z=l.fromHex(q)}catch(L){if(L.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&G.hasHighS())return!1;D&&(V=e.hash(V));const{r:N,s:W}=G,O=x(V),F=d(W),Y=s(O*F),ee=s(N*F),te=l.BASE.multiplyAndAddUnsafe(Z,Y,ee)?.toAffine();return te?s(te.x)===N:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:S,sign:z,verify:oe,ProjectivePoint:l,Signature:v,utils:b}}class tC extends K8{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,zoe(e);const n=x$(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(e){return K0(this),this.iHash.update(e),this}digestInto(e){K0(this),F8(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=o,e.outputLen=s,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const rC=(t,e,r)=>new tC(t,e).update(r).digest();rC.create=(t,e)=>new tC(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sse(t){return{hash:t,hmac:(e,...r)=>rC(t,e,q8(...r)),randomBytes:I$}}function nC(t,e){const r=n=>Ese({...t,...Sse(n)});return Object.freeze({...r(e),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iC=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tk=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$se=BigInt(1),X_=BigInt(2),rk=(t,e)=>(t+e/X_)/e;function Tse(t){const e=iC,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),d=BigInt(88),l=t*t*t%e,c=l*l*t%e,u=Tr(c,r,e)*c%e,h=Tr(u,r,e)*c%e,y=Tr(h,X_,e)*l%e,p=Tr(y,i,e)*y%e,f=Tr(p,a,e)*p%e,g=Tr(f,s,e)*f%e,v=Tr(g,d,e)*g%e,b=Tr(v,s,e)*f%e,m=Tr(b,r,e)*c%e,w=Tr(m,o,e)*p%e,S=Tr(w,n,e)*l%e,T=Tr(S,X_,e);if(!Q_.eql(Q_.sqr(T),t))throw new Error("Cannot find square root");return T}const Q_=R$(iC,void 0,void 0,{sqrt:Tse}),eo=nC({a:BigInt(0),b:BigInt(7),Fp:Q_,n:tk,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=tk,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-$se*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,o=BigInt("0x100000000000000000000000000000000"),s=rk(a*t,e),d=rk(-n*t,e);let l=pr(t-s*r-d*i,e),c=pr(-s*n-d*a,e);const u=l>o,h=c>o;if(u&&(l=e-l),h&&(c=e-c),l>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:l,k2neg:h,k2:c}}}},uu);BigInt(0);eo.ProjectivePoint;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oC=R$(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Ase=oC.create(BigInt("-3")),Pse=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),xse=nC({a:Ase,b:Pse,Fp:oC,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},uu),$o=xse,Zm=BigInt(2**32-1),J_=BigInt(32);function sC(t,e=!1){return e?{h:Number(t&Zm),l:Number(t>>J_&Zm)}:{h:Number(t>>J_&Zm)|0,l:Number(t&Zm)|0}}function Ise(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:o}=sC(t[i],e);[r[i],n[i]]=[a,o]}return[r,n]}const kse=(t,e)=>BigInt(t>>>0)<<J_|BigInt(e>>>0),Ose=(t,e,r)=>t>>>r,Rse=(t,e,r)=>t<<32-r|e>>>r,jse=(t,e,r)=>t>>>r|e<<32-r,Cse=(t,e,r)=>t<<32-r|e>>>r,Nse=(t,e,r)=>t<<64-r|e>>>r-32,Bse=(t,e,r)=>t>>>r-32|e<<64-r,Dse=(t,e)=>e,Mse=(t,e)=>t,Lse=(t,e,r)=>t<<r|e>>>32-r,Use=(t,e,r)=>e<<r|t>>>32-r,Fse=(t,e,r)=>e<<r-32|t>>>64-r,zse=(t,e,r)=>t<<r-32|e>>>64-r;function qse(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Kse=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Vse=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Hse=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Gse=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Wse=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Yse=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0,$t={fromBig:sC,split:Ise,toBig:kse,shrSH:Ose,shrSL:Rse,rotrSH:jse,rotrSL:Cse,rotrBH:Nse,rotrBL:Bse,rotr32H:Dse,rotr32L:Mse,rotlSH:Lse,rotlSL:Use,rotlBH:Fse,rotlBL:zse,add:qse,add3L:Kse,add3H:Vse,add4L:Hse,add4H:Gse,add5H:Yse,add5L:Wse},[Zse,Xse]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Hc=new Uint32Array(80),Gc=new Uint32Array(80);class Qse extends H8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:a,Cl:o,Dh:s,Dl:d,Eh:l,El:c,Fh:u,Fl:h,Gh:y,Gl:p,Hh:f,Hl:g}=this;return[e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g]}set(e,r,n,i,a,o,s,d,l,c,u,h,y,p,f,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=s|0,this.Dl=d|0,this.Eh=l|0,this.El=c|0,this.Fh=u|0,this.Fl=h|0,this.Gh=y|0,this.Gl=p|0,this.Hh=f|0,this.Hl=g|0}process(e,r){for(let m=0;m<16;m++,r+=4)Hc[m]=e.getUint32(r),Gc[m]=e.getUint32(r+=4);for(let m=16;m<80;m++){const w=Hc[m-15]|0,S=Gc[m-15]|0,T=$t.rotrSH(w,S,1)^$t.rotrSH(w,S,8)^$t.shrSH(w,S,7),x=$t.rotrSL(w,S,1)^$t.rotrSL(w,S,8)^$t.shrSL(w,S,7),I=Hc[m-2]|0,M=Gc[m-2]|0,H=$t.rotrSH(I,M,19)^$t.rotrBH(I,M,61)^$t.shrSH(I,M,6),re=$t.rotrSL(I,M,19)^$t.rotrBL(I,M,61)^$t.shrSL(I,M,6),J=$t.add4L(x,re,Gc[m-7],Gc[m-16]),z=$t.add4H(J,T,H,Hc[m-7],Hc[m-16]);Hc[m]=z|0,Gc[m]=J|0}let{Ah:n,Al:i,Bh:a,Bl:o,Ch:s,Cl:d,Dh:l,Dl:c,Eh:u,El:h,Fh:y,Fl:p,Gh:f,Gl:g,Hh:v,Hl:b}=this;for(let m=0;m<80;m++){const w=$t.rotrSH(u,h,14)^$t.rotrSH(u,h,18)^$t.rotrBH(u,h,41),S=$t.rotrSL(u,h,14)^$t.rotrSL(u,h,18)^$t.rotrBL(u,h,41),T=u&y^~u&f,x=h&p^~h&g,I=$t.add5L(b,S,x,Xse[m],Gc[m]),M=$t.add5H(I,v,w,T,Zse[m],Hc[m]),H=I|0,re=$t.rotrSH(n,i,28)^$t.rotrBH(n,i,34)^$t.rotrBH(n,i,39),J=$t.rotrSL(n,i,28)^$t.rotrBL(n,i,34)^$t.rotrBL(n,i,39),z=n&a^n&s^a&s,oe=i&o^i&d^o&d;v=f|0,b=g|0,f=y|0,g=p|0,y=u|0,p=h|0,{h:u,l:h}=$t.add(l|0,c|0,M|0,H|0),l=s|0,c=d|0,s=a|0,d=o|0,a=n|0,o=i|0;const C=$t.add3L(H,J,oe);n=$t.add3H(C,M,re,z),i=C|0}({h:n,l:i}=$t.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:o}=$t.add(this.Bh|0,this.Bl|0,a|0,o|0),{h:s,l:d}=$t.add(this.Ch|0,this.Cl|0,s|0,d|0),{h:l,l:c}=$t.add(this.Dh|0,this.Dl|0,l|0,c|0),{h:u,l:h}=$t.add(this.Eh|0,this.El|0,u|0,h|0),{h:y,l:p}=$t.add(this.Fh|0,this.Fl|0,y|0,p|0),{h:f,l:g}=$t.add(this.Gh|0,this.Gl|0,f|0,g|0),{h:v,l:b}=$t.add(this.Hh|0,this.Hl|0,v|0,b|0),this.set(n,i,a,o,s,d,l,c,u,h,y,p,f,g,v,b)}roundClean(){Hc.fill(0),Gc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const aC=V8(()=>new Qse);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jo=BigInt(0),Qi=BigInt(1),Xm=BigInt(2),Jse=BigInt(8),eae={zip215:!0};function tae(t){const e=j$(t);return ku(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function C$(t){const e=tae(t),{Fp:r,n,prehash:i,hash:a,randomBytes:o,nByteLength:s,h:d}=e,l=Xm<<BigInt(s*8)-Qi,c=r.create,u=e.uvRatio||((Q,R)=>{try{return{isValid:!0,value:r.sqrt(Q*r.inv(R))}}catch{return{isValid:!1,value:Jo}}}),h=e.adjustScalarBytes||(Q=>Q),y=e.domain||((Q,R,B)=>{if(R.length||B)throw new Error("Contexts/pre-hash are not supported");return Q}),p=Q=>typeof Q=="bigint"&&Jo<Q,f=(Q,R)=>p(Q)&&p(R)&&Q<R,g=Q=>Q===Jo||f(Q,l);function v(Q,R){if(f(Q,R))return Q;throw new Error(`Expected valid scalar < ${R}, got ${typeof Q} ${Q}`)}function b(Q){return Q===Jo?Q:v(Q,n)}const m=new Map;function w(Q){if(!(Q instanceof S))throw new Error("ExtendedPoint expected")}class S{constructor(R,B,D,G){if(this.ex=R,this.ey=B,this.ez=D,this.et=G,!g(R))throw new Error("x required");if(!g(B))throw new Error("y required");if(!g(D))throw new Error("z required");if(!g(G))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof S)throw new Error("extended point not allowed");const{x:B,y:D}=R||{};if(!g(B)||!g(D))throw new Error("invalid affine point");return new S(B,D,Qi,c(B*D))}static normalizeZ(R){const B=r.invertBatch(R.map(D=>D.ez));return R.map((D,G)=>D.toAffine(B[G])).map(S.fromAffine)}_setWindowSize(R){this._WINDOW_SIZE=R,m.delete(this)}assertValidity(){const{a:R,d:B}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:D,ey:G,ez:Z,et:N}=this,W=c(D*D),O=c(G*G),F=c(Z*Z),Y=c(F*F),ee=c(W*R),te=c(F*c(ee+O)),U=c(Y+c(B*c(W*O)));if(te!==U)throw new Error("bad point: equation left != right (1)");const L=c(D*G),P=c(Z*N);if(L!==P)throw new Error("bad point: equation left != right (2)")}equals(R){w(R);const{ex:B,ey:D,ez:G}=this,{ex:Z,ey:N,ez:W}=R,O=c(B*W),F=c(Z*G),Y=c(D*W),ee=c(N*G);return O===F&&Y===ee}is0(){return this.equals(S.ZERO)}negate(){return new S(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:R}=e,{ex:B,ey:D,ez:G}=this,Z=c(B*B),N=c(D*D),W=c(Xm*c(G*G)),O=c(R*Z),F=B+D,Y=c(c(F*F)-Z-N),ee=O+N,te=ee-W,U=O-N,L=c(Y*te),P=c(ee*U),j=c(Y*U),X=c(te*ee);return new S(L,P,X,j)}add(R){w(R);const{a:B,d:D}=e,{ex:G,ey:Z,ez:N,et:W}=this,{ex:O,ey:F,ez:Y,et:ee}=R;if(B===BigInt(-1)){const Ee=c((Z-G)*(F+O)),Ne=c((Z+G)*(F-O)),Qe=c(Ne-Ee);if(Qe===Jo)return this.double();const ie=c(N*Xm*ee),ce=c(W*Xm*Y),K=ce+ie,A=Ne+Ee,k=ce-ie,se=c(K*Qe),fe=c(A*k),me=c(K*k),be=c(Qe*A);return new S(se,fe,be,me)}const te=c(G*O),U=c(Z*F),L=c(W*D*ee),P=c(N*Y),j=c((G+Z)*(O+F)-te-U),X=P-L,ne=P+L,ae=c(U-B*te),pe=c(j*X),we=c(ne*ae),Se=c(j*ae),xe=c(X*ne);return new S(pe,we,xe,Se)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,m,R,S.normalizeZ)}multiply(R){const{p:B,f:D}=this.wNAF(v(R,n));return S.normalizeZ([B,D])[0]}multiplyUnsafe(R){let B=b(R);return B===Jo?x:this.equals(x)||B===Qi?this:this.equals(T)?this.wNAF(B).p:I.unsafeLadder(this,B)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(R){const{ex:B,ey:D,ez:G}=this,Z=this.is0();R==null&&(R=Z?Jse:r.inv(G));const N=c(B*R),W=c(D*R),O=c(G*R);if(Z)return{x:Jo,y:Qi};if(O!==Qi)throw new Error("invZ was invalid");return{x:N,y:W}}clearCofactor(){const{h:R}=e;return R===Qi?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:D,a:G}=e,Z=r.BYTES;R=Hr("pointHex",R,Z);const N=R.slice(),W=R[Z-1];N[Z-1]=W&-129;const O=_d(N);O===Jo||(B?v(O,l):v(O,r.ORDER));const F=c(O*O),Y=c(F-Qi),ee=c(D*F-G);let{isValid:te,value:U}=u(Y,ee);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const L=(U&Qi)===Qi,P=(W&128)!==0;if(!B&&U===Jo&&P)throw new Error("Point.fromHex: x=0 and x_0=1");return P!==L&&(U=c(-U)),S.fromAffine({x:U,y:O})}static fromPrivateKey(R){return re(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),D=Jf(B,r.BYTES);return D[D.length-1]|=R&Qi?128:0,D}toHex(){return fu(this.toRawBytes())}}S.BASE=new S(e.Gx,e.Gy,Qi,c(e.Gx*e.Gy)),S.ZERO=new S(Jo,Qi,Qi,Jo);const{BASE:T,ZERO:x}=S,I=eC(S,s*8);function M(Q){return pr(Q,n)}function H(Q){return M(_d(Q))}function re(Q){const R=s;Q=Hr("private key",Q,R);const B=Hr("hashed private key",a(Q),2*R),D=h(B.slice(0,R)),G=B.slice(R,2*R),Z=H(D),N=T.multiply(Z),W=N.toRawBytes();return{head:D,prefix:G,scalar:Z,point:N,pointBytes:W}}function J(Q){return re(Q).pointBytes}function z(Q=new Uint8Array,...R){const B=hu(...R);return H(a(y(B,Hr("context",Q),!!i)))}function oe(Q,R,B={}){Q=Hr("message",Q),i&&(Q=i(Q));const{prefix:D,scalar:G,pointBytes:Z}=re(R),N=z(B.context,D,Q),W=T.multiply(N).toRawBytes(),O=z(B.context,W,Z,Q),F=M(N+O*G);b(F);const Y=hu(W,Jf(F,r.BYTES));return Hr("result",Y,s*2)}const C=eae;function V(Q,R,B,D=C){const{context:G,zip215:Z}=D,N=r.BYTES;Q=Hr("signature",Q,2*N),R=Hr("message",R),i&&(R=i(R));const W=_d(Q.slice(N,2*N));let O,F,Y;try{O=S.fromHex(B,Z),F=S.fromHex(Q.slice(0,N),Z),Y=T.multiplyUnsafe(W)}catch{return!1}if(!Z&&O.isSmallOrder())return!1;const ee=z(G,F.toRawBytes(),O.toRawBytes(),R);return F.add(O.multiplyUnsafe(ee)).subtract(Y).clearCofactor().equals(S.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:J,sign:oe,verify:V,ExtendedPoint:S,utils:{getExtendedPublicKey:re,randomPrivateKey:()=>o(r.BYTES),precompute(Q=8,R=S.BASE){return R._setWindowSize(Q),R.multiply(BigInt(3)),R}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qh=BigInt(0),y1=BigInt(1);function rae(t){return ku(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function nae(t){const e=rae(t),{P:r}=e,n=m=>pr(m,r),i=e.montgomeryBits,a=Math.ceil(i/8),o=e.nByteLength,s=e.adjustScalarBytes||(m=>m),d=e.powPminus2||(m=>Z8(m,r-BigInt(2),r));function l(m,w,S){const T=n(m*(w-S));return w=n(w-T),S=n(S+T),[w,S]}function c(m){if(typeof m=="bigint"&&Qh<=m&&m<r)return m;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const u=(e.a-BigInt(2))/BigInt(4);function h(m,w){const S=c(m),T=c(w),x=S;let I=y1,M=Qh,H=S,re=y1,J=Qh,z;for(let C=BigInt(i-1);C>=Qh;C--){const V=T>>C&y1;J^=V,z=l(J,I,H),I=z[0],H=z[1],z=l(J,M,re),M=z[0],re=z[1],J=V;const q=I+M,Q=n(q*q),R=I-M,B=n(R*R),D=Q-B,G=H+re,Z=H-re,N=n(Z*q),W=n(G*R),O=N+W,F=N-W;H=n(O*O),re=n(x*n(F*F)),I=n(Q*B),M=n(D*(Q+n(u*D)))}z=l(J,I,H),I=z[0],H=z[1],z=l(J,M,re),M=z[0],re=z[1];const oe=d(M);return n(I*oe)}function y(m){return Jf(n(m),a)}function p(m){const w=Hr("u coordinate",m,a);return o===32&&(w[31]&=127),_d(w)}function f(m){const w=Hr("scalar",m),S=w.length;if(S!==a&&S!==o)throw new Error(`Expected ${a} or ${o} bytes, got ${S}`);return _d(s(w))}function g(m,w){const S=p(w),T=f(m),x=h(S,T);if(x===Qh)throw new Error("Invalid private or public key received");return y(x)}const v=y(e.Gu);function b(m){return g(m,v)}return{scalarMult:g,scalarMultBase:b,getSharedSecret:(m,w)=>g(m,w),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iy=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),nk=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const iae=BigInt(1),e2=BigInt(2),oae=BigInt(5),ik=BigInt(10),sae=BigInt(20),aae=BigInt(40),ok=BigInt(80);function cC(t){const e=iy,n=t*t%e*t%e,i=Tr(n,e2,e)*n%e,a=Tr(i,iae,e)*t%e,o=Tr(a,oae,e)*a%e,s=Tr(o,ik,e)*o%e,d=Tr(s,sae,e)*s%e,l=Tr(d,aae,e)*d%e,c=Tr(l,ok,e)*l%e,u=Tr(c,ok,e)*l%e,h=Tr(u,ik,e)*o%e;return{pow_p_5_8:Tr(h,e2,e)*t%e,b2:n}}function dC(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function cae(t,e){const r=iy,n=pr(e*e*e,r),i=pr(n*n*e,r),a=cC(t*i).pow_p_5_8;let o=pr(t*n*a,r);const s=pr(e*o*o,r),d=o,l=pr(o*nk,r),c=s===t,u=s===pr(-t,r),h=s===pr(-t*nk,r);return c&&(o=d),(u||h)&&(o=l),dse(o,r)&&(o=pr(-o,r)),{isValid:c||u,value:o}}const qo=R$(iy,void 0,!0),oy={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qo,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:aC,randomBytes:I$,adjustScalarBytes:dC,uvRatio:cae},hl=C$(oy);function lC(t,e,r){if(e.length>255)throw new Error("Context is too big");return q8(P$("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}({...oy});({...oy});const fp=nae({P:iy,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=iy,{pow_p_5_8:r,b2:n}=cC(t);return pr(Tr(r,BigInt(3),e)*n,e)},adjustScalarBytes:dC,randomBytes:I$});function dae(t){const{y:e}=hl.ExtendedPoint.fromHex(t),r=BigInt(1);return qo.toBytes(qo.create((r+e)*qo.inv(r-e)))}function lae(t){const e=oy.hash(t.subarray(0,32));return oy.adjustScalarBytes(e).subarray(0,32)}const uae=(qo.ORDER+BigInt(3))/BigInt(8);qo.pow(e2,uae);qo.sqrt(qo.neg(qo.ONE));(qo.ORDER-BigInt(5))/BigInt(8);BigInt(486662);pse(qo,qo.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function fae(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function hae(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function t2(t){const r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,i]=r;return i}var Jh=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},sk=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(s,d){o=t[a](o),i(s,d,o.done,o.value)})}}function i(a,o,s,d){Promise.resolve(d).then(function(l){a({value:l,done:s})},o)}};const Qm=new TextEncoder,al=new TextDecoder;class ze{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new ze(e,"ArrayBuffer")}static asyncIterable(e){if(!hae(e))throw new TypeError("Input must be of type AsyncIterable.");return new ze(e,"AsyncIterable")}static base32Z(e){return new ze(e,"Base32Z")}static base58Btc(e){return new ze(e,"Base58Btc")}static base64Url(e){return new ze(e,"Base64Url")}static bufferSource(e){return new ze(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new ze(e,"Hex")}static multibase(e){return new ze(e,"Multibase")}static object(e){return new ze(e,"Object")}static string(e){return new ze(e,"String")}static uint8Array(e){return new ze(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Lo.baseDecode(this.data).buffer;case"Base64Url":return no.baseDecode(this.data).buffer;case"BufferSource":{if(t2(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return fae(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Jh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return ZT.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return Lo.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Lo.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return no.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return no.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),r=Qm.encode(e);return no.baseEncode(r)}case"String":{const e=Qm.encode(this.data);return no.baseEncode(e)}case"Uint8Array":return no.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,i;return Jh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const d=[];try{for(var a=!0,o=sk(this.data),s;s=yield o.next(),e=s.done,!e;a=!0){i=s.value,a=!1;const c=i;d.push(c)}}catch(c){r={error:c}}finally{try{!a&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(d)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return ze.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return ze.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=no.baseDecode(this.data),r=al.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=al.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Jh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return al.decode(this.data);case"Base64Url":{const e=no.baseDecode(this.data);return al.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return al.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,i;return Jh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let d="";try{for(var a=!0,o=sk(this.data),s;s=yield o.next(),e=s.done,!e;a=!0){i=s.value,a=!1;const l=i;typeof l=="string"?d+=l:d+=al.decode(l,{stream:!0})}}catch(l){r={error:l}}finally{try{!a&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return d+=al.decode(void 0,{stream:!1}),d}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return ZT.baseDecode(this.data);case"Base58Btc":return Lo.baseDecode(this.data);case"Base64Url":return no.baseDecode(this.data);case"BufferSource":{const e=t2(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{const e=JSON.stringify(this.data);return Qm.encode(e)}case"String":return Qm.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Jh(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}}class rn{static addPrefix(e){var r;let{code:n,data:i,name:a}=e;if(!(a?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=rn.codeToName.has(n)?n:rn.nameToCode.get(a),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);const o=Vp(n),s=new Uint8Array(o+i.byteLength);return s.set(i,o),Kp(n,s),s}static getCodeFromData(e){const{prefixedData:r}=e,[n,i]=qp(r);return n}static getCodeFromName(e){const{name:r}=e,n=rn.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){const{code:r}=e,n=rn.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){rn.codeToName.set(e.code,e.name),rn.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:r}=e,[n,i]=qp(r),a=rn.codeToName.get(n);if(a===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(i),name:a}}}rn.codeToName=new Map;rn.nameToCode=new Map;rn.registerCodec({code:237,name:"ed25519-pub"});rn.registerCodec({code:4864,name:"ed25519-priv"});rn.registerCodec({code:236,name:"x25519-pub"});rn.registerCodec({code:4866,name:"x25519-priv"});rn.registerCodec({code:231,name:"secp256k1-pub"});rn.registerCodec({code:4865,name:"secp256k1-priv"});function uC(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&uC(t[e])})}var cl=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class pae{constructor(){this.store=new Map}clear(){return cl(this,void 0,void 0,function*(){this.store.clear()})}close(){return cl(this,void 0,void 0,function*(){})}delete(e){return cl(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return cl(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return cl(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return cl(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return cl(this,void 0,void 0,function*(){this.store.set(e,r)})}}/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const ak="0123456789abcdef",fC=[];for(let t=0;t<256;t++)fC[t]=ak[t>>4&15]+ak[t&15];const yae=t=>{const e=t.length;let r="",n=0;for(;n<e;)r+=fC[t[n++]];return r},mae=(t,e=0)=>{const r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}const n=new Uint8Array(e);let i=e,a=r;for(;a--;)i-=t[a].length,n.set(t[a],i);return n};var ck="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gae=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jm=0;Jm<ck.length;Jm++)gae[ck.charCodeAt(Jm)]=Jm;const wae=new TextDecoder,hC=(t,e)=>wae.decode(t),bae=new TextEncoder,pc=t=>bae.encode(t),dk=typeof window<"u"?window:self,lk=dk.crypto||dk.msCrypto||{};lk.subtle||lk.webkitSubtle;function Jy(t){const e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function pC(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Kt(t,e,r){const n=[];let i=null;return Kt._encode(n,t),i=mae(n),Kt.bytes=i.length,ArrayBuffer.isView(e)?(e.set(i,r),e):i}Kt.bytes=-1;Kt._floatConversionDetected=!1;Kt._encode=function(t,e){if(e!=null)switch(pC(e)){case"object":Kt.dict(t,e);break;case"map":Kt.dictMap(t,e);break;case"array":Kt.list(t,e);break;case"set":Kt.listSet(t,e);break;case"string":Kt.string(t,e);break;case"number":Kt.number(t,e);break;case"boolean":Kt.number(t,e);break;case"arraybufferview":Kt.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Kt.buffer(t,new Uint8Array(e));break}};const yb=new Uint8Array([101]),yC=new Uint8Array([100]),mC=new Uint8Array([108]);Kt.buffer=function(t,e){t.push(pc(e.length+":"),e)};Kt.string=function(t,e){t.push(pc(pc(e).byteLength+":"+e))};Kt.number=function(t,e){if(Number.isInteger(e))return t.push(pc("i"+BigInt(e)+"e"));const r=2147483648,n=e/r<<0,i=e%r<<0,a=n*r+i;t.push(pc("i"+a+"e")),a!==e&&!Kt._floatConversionDetected&&(Kt._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+a+'"'),console.trace())};Kt.dict=function(t,e){t.push(yC);let r=0,n;const i=Object.keys(e).sort(),a=i.length;for(;r<a;r++)n=i[r],e[n]!=null&&(Kt.string(t,n),Kt._encode(t,e[n]));t.push(yb)};Kt.dictMap=function(t,e){t.push(yC);const r=Array.from(e.keys()).sort();for(const n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Kt._encode(t,n):Kt.string(t,String(n)),Kt._encode(t,e.get(n)));t.push(yb)};Kt.list=function(t,e){let r=0;const n=e.length;for(t.push(mC);r<n;r++)e[r]!=null&&Kt._encode(t,e[r]);t.push(yb)};Kt.listSet=function(t,e){t.push(mC);for(const r of e)r!=null&&Kt._encode(t,r);t.push(yb)};const vae=105,_ae=58,Eae=100,Sae=108,N$=101;function gC(t,e,r){let n=0,i=1;for(let a=e;a<r;a++){const o=t[a];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(a===e&&o===43)){if(a===e&&o===45){i=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+a+"] = "+o)}}return n*i}function dt(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),dt.position=0,dt.encoding=n||null,dt.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):pc(t),dt.bytes=dt.data.length,dt.next())}dt.bytes=0;dt.position=0;dt.data=null;dt.encoding=null;dt.next=function(){switch(dt.data[dt.position]){case Eae:return dt.dictionary();case Sae:return dt.list();case vae:return dt.integer();default:return dt.buffer()}};dt.find=function(t){let e=dt.position;const r=dt.data.length,n=dt.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};dt.dictionary=function(){dt.position++;const t={};for(;dt.data[dt.position]!==N$;){const e=dt.buffer();let r=hC(e);r.includes("�")&&(r=yae(e)),t[r]=dt.next()}return dt.position++,t};dt.list=function(){dt.position++;const t=[];for(;dt.data[dt.position]!==N$;)t.push(dt.next());return dt.position++,t};dt.integer=function(){const t=dt.find(N$),e=gC(dt.data,dt.position+1,t);return dt.position+=t+1-dt.position,e};dt.buffer=function(){let t=dt.find(_ae);const e=gC(dt.data,dt.position,t),r=++t+e;return dt.position=r,dt.encoding?hC(dt.data.slice(t,r)):dt.data.slice(t,r)};function $ae(t){let e=2;for(const r of t)e+=em(r);return e}function Tae(t){let e=2;for(const[r,n]of t){const i=pc(r).byteLength;e+=Jy(i)+1+i,e+=em(n)}return e}function Aae(t){let e=2;const r=Object.keys(t);for(let n=0;n<r.length;n++){const i=pc(r[n]).byteLength;e+=Jy(i)+1+i,e+=em(t[r[n]])}return e}function Pae(t){const e=pc(t).byteLength;return Jy(e)+1+e}function xae(t){const e=t.byteLength-t.byteOffset;return Jy(e)+1+e}function em(t){if(t==null)return 0;const r=pC(t);switch(r){case"arraybufferview":return xae(t);case"string":return Pae(t);case"array":case"set":return $ae(t);case"number":return 1+Jy(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return Aae(t);case"map":return Tae(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}const Iae=em,uk={encode:Kt,decode:dt,byteLength:em,encodingLength:Iae},kae=/^(\d{1,3}\.){3,3}\d{1,3}$/,fk=4,Oae=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,eg=16,ta={name:"v4",size:fk,isFormat:t=>kae.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+fk);const n=t.length;let i=0;for(let a=0;a<n;){const o=t.charCodeAt(a++);o===46?(e[r++]=i,i=0):i=i*10+(o-48)}return e[r]=i,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Ed={name:"v6",size:eg,isFormat:t=>t.length>0&&Oae.test(t),encode(t,e,r){r=~~r;let n=r+eg,i=-1,a=0,o=0,s=!0,d=!1;e=e||new Uint8Array(r+eg);for(let l=0;l<t.length;l++){let c=t.charCodeAt(l);c===58?(s?i!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(i=r):(d===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=a>>8),r<n-1&&(e[r+1]=a&255),r+=2),a=0,o=0),s=!0,d=!1):c===46?(r<n&&(e[r]=o),r++,o=0,a=0,s=!1,d=!0):(s=!1,c>=97?c-=87:c>=65?c-=55:(c-=48,o=o*10+c),a=(a<<4)+c)}if(s===!1)d===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=a>>8),r<n-1&&(e[r+1]=a&255),r+=2);else if(i===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(i!==-1){r+=2;for(let l=Math.min(r-1,n-1);l>=i+2;l--)e[l]=e[l-2];e[i]=0,e[i+1]=0,i=r}if(i!==r&&i!==-1)for(r>n-2&&(r=n-2);n>i;)e[--n]=r<n&&r>i?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<eg;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function wC(t){if(ta.isFormat(t))return ta.size;if(Ed.isFormat(t))return Ed.size;throw Error(`Invalid ip address: ${t}`)}function Rae(t){return wC(t)===ta.size?1:2}function jae(t,e,r){r=~~r;const n=wC(t);return typeof e=="function"&&(e=e(r+n)),n===ta.size?ta.encode(t,e,r):Ed.encode(t,e,r)}function Cae(t,e,r){if(e=~~e,r=r||t.length-e,r===ta.size)return ta.decode(t,e,r);if(r===Ed.size)return Ed.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${ta.size} for v4 or ${Ed.size} for v6.`)}function mb(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function sy(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function Nae(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function Bae(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function bC(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function vC(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function Dae(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function hk(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}const B$=55296,ay=56320;function _C(t){let e=0;const r=t.length;for(let n=0;n<r;n+=1){const i=t.charCodeAt(n);if(i<=127)e+=1;else if(i<=2047)e+=2;else if((i&63488)!==B$)e+=3;else{const a=n+1;a===r||i>=ay||(t.charCodeAt(a)&64512)!==ay?e+=3:(n=a,e+=4)}}return e}function cy(t,e,r){const n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(_C(t)+r));let i=r;for(let a=0;a<n;a+=1){let o=t.charCodeAt(a);if(o<=127)e[i++]=o;else if(o<=2047)e[i++]=192|(o&1984)>>6,e[i++]=128|o&63;else if((o&63488)!==B$)e[i++]=224|(o&61440)>>12,e[i++]=128|(o&4032)>>6,e[i++]=128|o&63;else{const s=a+1;if(s===n||o>=ay)e[i++]=239,e[i++]=191,e[i++]=189;else{const d=t.charCodeAt(s);(d&64512)!==ay?(e[i++]=239,e[i++]=191,e[i++]=189):(a=s,o=65536|(o&1023)<<10|d&1023,e[i++]=240|(o&1835008)>>18,e[i++]=128|(o&258048)>>12,e[i++]=128|(o&4032)>>6,e[i++]=128|o&63)}}}return cy.bytes=i-r,e}cy.bytes=0;function tm(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let i=e;i<r;){const a=t[i++];let o;if(a<=128)o=a;else if(a>191&&a<224)o=(a&31)<<6|t[i++]&63;else if(a>239&&a<365){o=((a&7)<<18|(t[i++]&63)<<12|(t[i++]&63)<<6|t[i++]&63)-65536;const s=B$|o>>10&1023;n+=String.fromCharCode(s),o=ay|o&1023}else o=(a&15)<<12|(t[i++]&63)<<6|t[i++]&63;n+=String.fromCharCode(o)}return tm.bytes=r-e,n}tm.bytes=0;const pu=t=>t instanceof Uint8Array;function Wd(t){return typeof t=="string"?_C(t):t.byteLength}function D$(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):cy(t)}function M$(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return cy(e,t,r),cy.bytes}const hp={},EC=new Array(255);for(let t=0;t<=15;t+=1){const e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){const i=n.toString(16),a=i.toUpperCase(),o=t<<4|n,s=`${e}${i}`;EC[o]=s,hp[s]=o,hp[`${r}${i}`]=o,hp[`${e}${a}`]=o,hp[`${r}${a}`]=o}}function Mae(t,e,r){let n="";for(let i=e;i<r;){const a=t[i++];n+=EC[a]}return n}function pk(t){return t.length>>>1}function Lae(t,e,r,n){let i=0;for(;r<n;){const a=e.substr(i,2),o=hp[a];if(o===void 0)return;t[r++]=o,i+=2}return t}const Uae=Math.pow(2,24),Fae=Math.pow(2,16),zae=Math.pow(2,8),Va=(t,e)=>t[e]*Uae+t[e+1]*Fae+t[e+2]*zae+t[e+3],At=(t,e)=>t[e]<<8|t[e+1],Ha=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),rt=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Ko(t,e,r,n,i){return r<0&&(n-=r,r=0),n<0&&(n=0),i<0?new Uint8Array(0):r>=e.length||n>=i?0:qae(t,e,r,n,i)}function qae(t,e,r,n,i){i-n>e.length-r&&(i=n+e.length-r);let a=i-n;const o=t.length-n;return a>o&&(a=o),(n!==0||i<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,a)),e.set(t,r),a}const Kae=0,yk=32768,r2=32768,Vae=~r2,SC=32768,Hae=~SC;function cr({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}const Ke=cr({encode(t,e,r){e||(e=new Uint8Array(Ke.encodingLength(t))),r||(r=0);const n=r,i=t.replace(/^\.|\.$/gm,"");if(i.length){const a=i.split(".");for(let o=0;o<a.length;o++){const s=M$(e,a[o],r+1);e[r]=s,r+=s+1}}return e[r++]=0,Ke.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=[];let n=e,i=0,a=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");const s=t[e++];if(a+=o?0:1,s===0)break;if(s&192)if((s&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");const d=At(t,e-1)-49152;if(d>=n)throw new Error("Cannot decode name (bad pointer)");e=d,n=d,a+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+s>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=s+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(tm(t,e,e+s)),e+=s,a+=o?0:s}}return Ke.decode.bytes=a,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:Wd(t.replace(/^\.|\.$/gm,""))+2}}),on=cr({encode(t,e,r){e||(e=new Uint8Array(on.encodingLength(t))),r||(r=0);const n=M$(e,t,r+1);return e[r]=n,on.encode.bytes=n+1,e},decode(t,e){e||(e=0);const r=t[e],n=tm(t,e+1,e+1+r);return on.decode.bytes=r+1,n},encodingLength(t){return Wd(t)+1}}),tf=cr({bytes:12,encode(t,e,r){e||(e=new Uint8Array(tf.encodingLength(t))),r||(r=0);const n=(t.flags||0)&32767,i=t.type==="response"?yk:Kae;return rt(e,t.id||0,r),rt(e,n|i,r+2),rt(e,t.questions.length,r+4),rt(e,t.answers.length,r+6),rt(e,t.authorities.length,r+8),rt(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");const r=At(t,e+2);return{id:At(t,e),type:r&yk?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:Bae(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:Nae(r&15),questions:new Array(At(t,e+4)),answers:new Array(At(t,e+6)),authorities:new Array(At(t,e+8)),additionals:new Array(At(t,e+10))}},encodingLength(){return 12}}),Tg=cr({encode(t,e,r){e||(e=new Uint8Array(Tg.encodingLength(t))),r||(r=0);const n=t.length;return rt(e,n,r),Ko(t,e,r+2,0,n),Tg.encode.bytes=n+2,e},decode(t,e){e||(e=0);const r=At(t,e),n=t.slice(e+2,e+2+r);return Tg.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),Ag=cr({encode(t,e,r){return e||(e=new Uint8Array(Ag.encodingLength(t))),r||(r=0),Ke.encode(t,e,r+2),rt(e,Ke.encode.bytes,r),Ag.encode.bytes=Ke.encode.bytes+2,e},decode(t,e){e||(e=0);const r=At(t,e),n=Ke.decode(t,e+2);return Ag.decode.bytes=r+2,n},encodingLength(t){return Ke.encodingLength(t)+2}}),Pg=cr({encode(t,e,r){e||(e=new Uint8Array(Pg.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ke.encode(t.mname,e,r),r+=Ke.encode.bytes,Ke.encode(t.rname,e,r),r+=Ke.encode.bytes,Ha(e,t.serial||0,r),r+=4,Ha(e,t.refresh||0,r),r+=4,Ha(e,t.retry||0,r),r+=4,Ha(e,t.expire||0,r),r+=4,Ha(e,t.minimum||0,r),r+=4,rt(e,r-n-2,n),Pg.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.mname=Ke.decode(t,e),e+=Ke.decode.bytes,n.rname=Ke.decode(t,e),e+=Ke.decode.bytes,n.serial=Va(t,e),e+=4,n.refresh=Va(t,e),e+=4,n.retry=Va(t,e),e+=4,n.expire=Va(t,e),e+=4,n.minimum=Va(t,e),e+=4,Pg.decode.bytes=e-r,n},encodingLength(t){return 22+Ke.encodingLength(t.mname)+Ke.encodingLength(t.rname)}}),xg=cr({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let i=0;i<t.length;i++)if(typeof t[i]=="string"&&(t[i]=D$(t[i])),!pu(t[i]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(xg.encodingLength(t))),r||(r=0);const n=r;return r+=2,t.forEach(function(i){e[r++]=i.length,Ko(i,e,r,0,i.length),r+=i.length}),rt(e,r-n-2,n),xg.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e;let n=At(t,e);e+=2;const i=[];for(;n>0;){const a=t[e++];if(--n,n<a)throw new Error("Buffer overflow");i.push(t.slice(e,e+a)),e+=a,n-=a}return xg.decode.bytes=e-r,i},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=Wd(r)+1:e+=r.length+1}),e}}),Ig=cr({encode(t,e,r){e||(e=new Uint8Array(Ig.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=D$(t)),t||(t=new Uint8Array(0));const n=r;r+=2;const i=t.length;return Ko(t,e,r,0,i),r+=i,rt(e,r-n-2,n),Ig.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n=At(t,e);e+=2;const i=t.slice(e,e+n);return e+=n,Ig.decode.bytes=e-r,i},encodingLength(t){return t?(pu(t)?t.length:Wd(t))+2:2}}),kg=cr({encode(t,e,r){e||(e=new Uint8Array(kg.encodingLength(t))),r||(r=0);const n=r;return r+=2,on.encode(t.cpu,e,r),r+=on.encode.bytes,on.encode(t.os,e,r),r+=on.encode.bytes,rt(e,r-n-2,n),kg.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.cpu=on.decode(t,e),e+=on.decode.bytes,n.os=on.decode(t,e),e+=on.decode.bytes,kg.decode.bytes=e-r,n},encodingLength(t){return on.encodingLength(t.cpu)+on.encodingLength(t.os)+2}}),$f=cr({encode(t,e,r){return e||(e=new Uint8Array($f.encodingLength(t))),r||(r=0),Ke.encode(t,e,r+2),rt(e,Ke.encode.bytes,r),$f.encode.bytes=Ke.encode.bytes+2,e},decode(t,e){e||(e=0);const r=Ke.decode(t,e+2);return $f.decode.bytes=Ke.decode.bytes+2,r},encodingLength(t){return Ke.encodingLength(t)+2}}),Og=cr({encode(t,e,r){e||(e=new Uint8Array(Og.encodingLength(t))),r||(r=0),rt(e,t.priority||0,r+2),rt(e,t.weight||0,r+4),rt(e,t.port||0,r+6),Ke.encode(t.target,e,r+8);const n=Ke.encode.bytes+6;return rt(e,n,r),Og.encode.bytes=n+2,e},decode(t,e){e||(e=0);const r=At(t,e),n={};return n.priority=At(t,e+2),n.weight=At(t,e+4),n.port=At(t,e+6),n.target=Ke.decode(t,e+8),Og.decode.bytes=r+2,n},encodingLength(t){return 8+Ke.encodingLength(t.target)}}),nd=cr({encode(t,e,r){const n=nd.encodingLength(t);return e||(e=new Uint8Array(nd.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=nd.ISSUER_CRITICAL),rt(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,on.encode(t.tag,e,r),r+=on.encode.bytes,M$(e,t.value,r),r+=Wd(t.value),nd.encode.bytes=n,e},decode(t,e){e||(e=0);const r=At(t,e);e+=2;const n=e,i={};return i.flags=t[e],e+=1,i.tag=on.decode(t,e),e+=on.decode.bytes,i.value=tm(t,e,n+r),i.issuerCritical=!!(i.flags&nd.ISSUER_CRITICAL),nd.decode.bytes=r+2,i},encodingLength(t){return on.encodingLength(t.tag)+on.encodingLength(t.value)+2}});nd.ISSUER_CRITICAL=128;const Rg=cr({encode(t,e,r){e||(e=new Uint8Array(Rg.encodingLength(t))),r||(r=0);const n=r;return r+=2,rt(e,t.preference||0,r),r+=2,Ke.encode(t.exchange,e,r),r+=Ke.encode.bytes,rt(e,r-n-2,n),Rg.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.preference=At(t,e),e+=2,n.exchange=Ke.decode(t,e),e+=Ke.decode.bytes,Rg.decode.bytes=e-r,n},encodingLength(t){return 4+Ke.encodingLength(t.exchange)}}),$C=cr({encode(t,e,r){return e||(e=new Uint8Array($C.encodingLength(t))),r||(r=0),rt(e,4,r),r+=2,ta.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,ta.decode(t,e)},bytes:6}),jg=cr({encode(t,e,r){return e||(e=new Uint8Array(jg.encodingLength(t))),r||(r=0),rt(e,16,r),r+=2,Ed.encode(t,e,r),jg.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;const r=Ed.decode(t,e);return jg.decode.bytes=18,r},bytes:18}),Gae=t=>new Uint8Array(t),Fa=cr({encode(t,e,r){e||(e=new Uint8Array(Fa.encodingLength(t))),r||(r=0);const n=r,i=hk(t.code);if(rt(e,i,r),r+=2,t.data)rt(e,t.data.length,r),r+=2,Ko(t.data,e,r),r+=t.data.length;else switch(i){case 8:{const a=t.sourcePrefixLength||0,o=t.family||Rae(t.ip),s=jae(t.ip,Gae),d=Math.ceil(a/8);rt(e,d+4,r),r+=2,rt(e,o,r),r+=2,e[r++]=a,e[r++]=t.scopePrefixLength||0,Ko(s,e,r,0,d),r+=d}break;case 11:t.timeout?(rt(e,2,r),r+=2,rt(e,t.timeout,r),r+=2):(rt(e,0,r),r+=2);break;case 12:{const a=t.length||0;rt(e,a,r),r+=2,e.fill(0,r,r+a),r+=a}break;case 14:{const a=t.tags.length*2;rt(e,a,r),r+=2;for(const o of t.tags)rt(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Fa.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r={};r.code=At(t,e),r.type=Dae(r.code),e+=2;const n=At(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=At(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{const i=new Uint8Array(r.family===1?4:16);Ko(t,i,0,e,e+n-4),r.ip=Cae(i)}break;case 11:n>0&&(r.timeout=At(t,e),e+=2);break;case 14:r.tags=[];for(let i=0;i<n;i+=2)r.tags.push(At(t,e)),e+=2}return Fa.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(hk(t.code)){case 8:{const r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),md=cr({encode(t,e,r){e||(e=new Uint8Array(md.encodingLength(t))),r||(r=0);const n=r,i=af(t,Fa);return rt(e,i,r),r=bp(t,Fa,e,r+2),md.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r=e,n=[];let i=At(t,e);e+=2;let a=0;for(;i>0;)n[a++]=Fa.decode(t,e),e+=Fa.decode.bytes,i-=Fa.decode.bytes;return md.decode.bytes=e-r,n},encodingLength(t){return 2+af(t||[],Fa)}}),Us=cr({encode(t,e,r){e||(e=new Uint8Array(Us.encodingLength(t))),r||(r=0);const n=r,i=t.key;if(!pu(i))throw new Error("Key must be a Buffer");return r+=2,rt(e,t.flags,r),r+=2,e[r]=Us.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Ko(i,e,r,0,i.length),r+=i.length,Us.encode.bytes=r-n,rt(e,Us.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},i=At(t,e);if(e+=2,n.flags=At(t,e),e+=2,t[e]!==Us.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,Us.decode.bytes=e-r,n},encodingLength(t){return 6+Wd(t.key)}});Us.PROTOCOL_DNSSEC=3;Us.ZONE_KEY=128;Us.SECURE_ENTRYPOINT=32768;const pp=cr({encode(t,e,r){e||(e=new Uint8Array(pp.encodingLength(t))),r||(r=0);const n=r,i=t.signature;if(!pu(i))throw new Error("Signature must be a Buffer");return r+=2,rt(e,sy(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Ha(e,t.originalTTL,r),r+=4,Ha(e,t.expiration,r),r+=4,Ha(e,t.inception,r),r+=4,rt(e,t.keyTag,r),r+=2,Ke.encode(t.signersName,e,r),r+=Ke.encode.bytes,Ko(i,e,r,0,i.length),r+=i.length,pp.encode.bytes=r-n,rt(e,pp.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},i=At(t,e);return e+=2,n.typeCovered=mb(At(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Va(t,e),e+=4,n.expiration=Va(t,e),e+=4,n.inception=Va(t,e),e+=4,n.keyTag=At(t,e),e+=2,n.signersName=Ke.decode(t,e),e+=Ke.decode.bytes,n.signature=t.slice(e,r+i+2),e+=n.signature.length,pp.decode.bytes=e-r,n},encodingLength(t){return 20+Ke.encodingLength(t.signersName)+Wd(t.signature)}}),yp=cr({encode(t,e,r){e||(e=new Uint8Array(yp.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ke.encode(t.mbox||".",e,r),r+=Ke.encode.bytes,Ke.encode(t.txt||".",e,r),r+=Ke.encode.bytes,yp.encode.bytes=r-n,rt(e,yp.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={};return e+=2,n.mbox=Ke.decode(t,e)||".",e+=Ke.decode.bytes,n.txt=Ke.decode(t,e)||".",e+=Ke.decode.bytes,yp.decode.bytes=e-r,n},encodingLength(t){return 2+Ke.encodingLength(t.mbox||".")+Ke.encodingLength(t.txt||".")}}),po=cr({encode(t,e,r){e||(e=new Uint8Array(po.encodingLength(t))),r||(r=0);const n=r,i=[];for(let a=0;a<t.length;a++){const o=sy(t[a]);i[o>>8]===void 0&&(i[o>>8]=[]),i[o>>8][o>>3&31]|=1<<7-(o&7)}for(let a=0;a<i.length;a++)if(i[a]!==void 0){const o=D$(i[a]);e[r]=a,r+=1,e[r]=o.length,r+=1,Ko(o,e,r,0,o.length),r+=o.length}return po.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);const n=e,i=[];for(;e-n<r;){const a=t[e];e+=1;const o=t[e];e+=1;for(let s=0;s<o;s++){const d=t[e+s];for(let l=0;l<8;l++)if(d&1<<7-l){const c=mb(a<<8|s<<3|l);i.push(c)}}e+=o}return po.decode.bytes=e-n,i},encodingLength(t){const e=[];for(let n=0;n<t.length;n++){const i=sy(t[n]);e[i>>8]=Math.max(e[i>>8]||0,i&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),mp=cr({encode(t,e,r){e||(e=new Uint8Array(mp.encodingLength(t))),r||(r=0);const n=r;return r+=2,Ke.encode(t.nextDomain,e,r),r+=Ke.encode.bytes,po.encode(t.rrtypes,e,r),r+=po.encode.bytes,mp.encode.bytes=r-n,rt(e,mp.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},i=At(t,e);return e+=2,n.nextDomain=Ke.decode(t,e),e+=Ke.decode.bytes,n.rrtypes=po.decode(t,e,i-(e-r)),e+=po.decode.bytes,mp.decode.bytes=e-r,n},encodingLength(t){return 2+Ke.encodingLength(t.nextDomain)+po.encodingLength(t.rrtypes)}}),gp=cr({encode(t,e,r){e||(e=new Uint8Array(gp.encodingLength(t))),r||(r=0);const n=r,i=t.salt;if(!pu(i))throw new Error("salt must be a Buffer");const a=t.nextDomain;if(!pu(a))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,rt(e,t.iterations,r),r+=2,e[r]=i.length,r+=1,Ko(i,e,r,0,i.length),r+=i.length,e[r]=a.length,r+=1,Ko(a,e,r,0,a.length),r+=a.length,po.encode(t.rrtypes,e,r),r+=po.encode.bytes,gp.encode.bytes=r-n,rt(e,gp.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},i=At(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=At(t,e),e+=2;const a=t[e];e+=1,n.salt=t.slice(e,e+a),e+=a;const o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=po.decode(t,e,i-(e-r)),e+=po.decode.bytes,gp.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+po.encodingLength(t.rrtypes)}}),wp=cr({encode(t,e,r){e||(e=new Uint8Array(wp.encodingLength(t))),r||(r=0);const n=r,i=t.digest;if(!pu(i))throw new Error("Digest must be a Buffer");return r+=2,rt(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Ko(i,e,r,0,i.length),r+=i.length,wp.encode.bytes=r-n,rt(e,wp.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={},i=At(t,e);return e+=2,n.keyTag=At(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,wp.decode.bytes=e-r,n},encodingLength(t){return 6+Wd(t.digest)}}),sf=cr({encode(t,e,r){e||(e=new Uint8Array(sf.encodingLength(t))),r||(r=0);const n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;const i=pk(t.fingerprint),a=n2(t.hash);if(i!==a)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${i} != ${a}`);return Lae(e,t.fingerprint,r,r+=i),sf.encode.bytes=r-n,rt(e,sf.encode.bytes-2,n),e},decode(t,e){e||(e=0);const r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;const i=n2(n.hash);return n.fingerprint=Mae(t,e,e+i),e+=i,sf.decode.bytes=e-r,n},encodingLength(t){return 4+pk(t.fingerprint)}});function n2(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}sf.getFingerprintLengthForHashType=n2;function m1(t){switch(t.toUpperCase()){case"A":return $C;case"PTR":return $f;case"CNAME":return $f;case"DNAME":return $f;case"TXT":return xg;case"NULL":return Ig;case"AAAA":return jg;case"SRV":return Og;case"HINFO":return kg;case"CAA":return nd;case"NS":return Ag;case"SOA":return Pg;case"MX":return Rg;case"OPT":return md;case"DNSKEY":return Us;case"RRSIG":return pp;case"RP":return yp;case"NSEC":return mp;case"NSEC3":return gp;case"SSHFP":return sf;case"DS":return wp}return Tg}const Ro=cr({encode(t,e,r){e||(e=new Uint8Array(Ro.encodingLength(t))),r||(r=0);const n=r;if(Ke.encode(t.name,e,r),r+=Ke.encode.bytes,rt(e,sy(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");rt(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,rt(e,t.flags||0,r+6),r+=8,md.encode(t.options||[],e,r),r+=md.encode.bytes}else{let i=vC(t.class===void 0?"IN":t.class);t.flush&&(i|=r2),rt(e,i,r+2),Ha(e,t.ttl||0,r+4),r+=8;const a=m1(t.type);a.encode(t.data,e,r),r+=a.encode.bytes}return Ro.encode.bytes=r-n,e},decode(t,e){e||(e=0);const r={},n=e;if(r.name=Ke.decode(t,e),e+=Ke.decode.bytes,r.type=mb(At(t,e)),r.type==="OPT")r.udpPayloadSize=At(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=At(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=md.decode(t,e+8),e+=8+md.decode.bytes;else{const i=At(t,e+2);r.ttl=Va(t,e+4),r.class=bC(i&Vae),r.flush=!!(i&r2);const a=m1(r.type);r.data=a.decode(t,e+8),e+=8+a.decode.bytes}return Ro.decode.bytes=e-n,r},encodingLength(t){const e=t.data!==null&&t.data!==void 0?t.data:t.options;return Ke.encodingLength(t.name)+8+m1(t.type).encodingLength(e)}}),Tf=cr({encode(t,e,r){e||(e=new Uint8Array(Tf.encodingLength(t))),r||(r=0);const n=r;return Ke.encode(t.name,e,r),r+=Ke.encode.bytes,rt(e,sy(t.type),r),r+=2,rt(e,vC(t.class===void 0?"IN":t.class),r),r+=2,Tf.encode.bytes=r-n,t},decode(t,e){e||(e=0);const r=e,n={};return n.name=Ke.decode(t,e),e+=Ke.decode.bytes,n.type=mb(At(t,e)),e+=2,n.class=bC(At(t,e)),e+=2,!!(n.class&SC)&&(n.class&=Hae),Tf.decode.bytes=e-r,n},encodingLength(t){return Ke.encodingLength(t.name)+4}}),Wae=1024,yu={encode:function(t,e,r){const n=!e;n&&(e=new Uint8Array(Zae(t))),r||(r=0);const i=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),tf.encode(t,e,r),r+=tf.encode.bytes,r=bp(t.questions,Tf,e,r),r=bp(t.answers,Ro,e,r),r=bp(t.authorities,Ro,e,r),r=bp(t.additionals,Ro,e,r),yu.encode.bytes=r-i,n&&i2.bytes!==e.length?e.slice(0,i2.bytes):e},decode:function(t,e){e||(e=0);const r=e,n=tf.decode(t,e);return e+=tf.decode.bytes,e=tg(n.questions,Tf,t,e),e=tg(n.answers,Ro,t,e),e=tg(n.authorities,Ro,t,e),e=tg(n.additionals,Ro,t,e),yu.decode.bytes=e-r,n},encodingLength:function(t){return tf.encodingLength(t)+af(t.questions||[],Tf)+af(t.answers||[],Ro)+af(t.authorities||[],Ro)+af(t.additionals||[],Ro)}};yu.encode.bytes=0;yu.decode.bytes=0;const i2=yu.encode,Yae=yu.decode,Zae=yu.encodingLength;function af(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function bp(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function tg(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}var mk;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(mk||(mk={}));var lo;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(lo||(lo={}));var gk;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(gk||(gk={}));lo.Ed25519,lo.secp256k1,lo.secp256r1,lo.secp256r1,lo.secp256k1,lo.secp256r1,lo.X25519;lo.Ed25519+"",lo.secp256k1+"",lo.secp256r1+"",lo.X25519+"";const Kr={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};class Vr extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}class ra{static encode(e){return W1.baseEncode(e)}static decodeAsBytes(e,r){if(!ra.isBase64UrlString(e))throw new Vr(Kr.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return W1.baseDecode(e)}static decodeAsString(e,r){const n=ra.decodeAsBytes(e,r);return ra.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}}var o2;(function(t){t.Public="public",t.Private="private"})(o2||(o2={}));const Ns=o2;class Ji{static validateEs256kOperationKey(e,r){const n=new Set(["kty","crv","x","y"]);r===Ns.Private&&n.add("d");for(const i in e)if(!n.has(i))throw new Vr(Kr.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${i}'.`);if(e.crv!=="secp256k1")throw new Vr(Kr.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Vr(Kr.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Vr(Kr.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Vr(Kr.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===Ns.Private&&(e.d===void 0||e.d.length!==43))throw new Vr(Kr.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Vr(Kr.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!ra.isBase64UrlString(e))throw new Vr(Kr.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;const r=new Set;for(const n of e){if(r.has(n))throw new Vr(Kr.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}}class fo{}fo.hashAlgorithmInMultihashCode=18;fo.maxCanonicalizedDeltaSizeInBytes=1e3;var Xae=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,a,o)=>`${i}${o===0?"":","}${t(a===void 0||typeof a=="symbol"?null:a)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;const a=n.length===0?"":",";return`${n}${a}${t(i)}:${t(e[i])}`},"")}}`};const Qae=th(Xae);class Dd{static canonicalizeAsBytes(e){const r=Dd.removeAllUndefinedProperties(e),n=Qae(r);return ra.stringToBytes(n)}static removeAllUndefinedProperties(e){for(const r in e)typeof e[r]=="object"?Dd.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}}var ep=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class wn{static hash(e,r){return ep(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield uA.digest(e)).bytes;break;default:throw new Vr(Kr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return ep(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield uA.encode(e);break;default:throw new Vr(Kr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return ep(this,void 0,void 0,function*(){const n=Dd.canonicalizeAsBytes(e);return yield wn.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return ep(this,void 0,void 0,function*(){const n=Dd.canonicalizeAsBytes(e),i=yield wn.hashAsNonMultihashBytes(n,r);return yield wn.hashThenEncode(i,r)})}static hashThenEncode(e,r){return ep(this,void 0,void 0,function*(){const n=yield wn.hash(e,r);return ra.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n;const i=ra.decodeAsBytes(e,r);try{n=oO(i)}catch{throw new Vr(Kr.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}const a=fo.hashAlgorithmInMultihashCode;if(a!==n.code)throw new Vr(Kr.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${a} or change IonSdkConfig to desired hashing algorithm.`)}}var s2;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(s2||(s2={}));const rg=s2;var a2;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(a2||(a2={}));const Wu=a2;var ng=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Li{static createCreateRequest(e){return ng(this,void 0,void 0,function*(){const r=e.recoveryKey,n=e.updateKey,i=e.document.publicKeys,a=e.document.services;Ji.validateEs256kOperationKey(r,Ns.Public),Ji.validateEs256kOperationKey(n,Ns.Public),Li.validateDidDocumentKeys(i),Li.validateServices(a);const o=fo.hashAlgorithmInMultihashCode,s=[{action:Wu.Replace,document:e.document}],d={updateCommitment:yield wn.canonicalizeThenDoubleHashThenEncode(n,o),patches:s};Li.validateDeltaSize(d);const c={deltaHash:yield wn.canonicalizeThenHashThenEncode(d,o),recoveryCommitment:yield wn.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:rg.Create,suffixData:c,delta:d}})}static createDeactivateRequest(e){return ng(this,void 0,void 0,function*(){Li.validateDidSuffix(e.didSuffix),Ji.validateEs256kOperationKey(e.recoveryPublicKey,Ns.Public);const r=fo.hashAlgorithmInMultihashCode,n=yield wn.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},a=yield e.signer.sign({alg:"ES256K"},i);return{type:rg.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:a}})}static createRecoverRequest(e){return ng(this,void 0,void 0,function*(){Li.validateDidSuffix(e.didSuffix),Ji.validateEs256kOperationKey(e.recoveryPublicKey,Ns.Public),Ji.validateEs256kOperationKey(e.nextRecoveryPublicKey,Ns.Public),Ji.validateEs256kOperationKey(e.nextUpdatePublicKey,Ns.Public),Li.validateDidDocumentKeys(e.document.publicKeys),Li.validateServices(e.document.services);const r=fo.hashAlgorithmInMultihashCode,n=yield wn.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),i=[{action:Wu.Replace,document:e.document}],a=yield wn.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:i,updateCommitment:a},s=yield wn.canonicalizeThenHashThenEncode(o,r),l={recoveryCommitment:yield wn.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:s},c=yield e.signer.sign({alg:"ES256K"},l);return{type:rg.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:c}})}static createUpdateRequest(e){return ng(this,void 0,void 0,function*(){if(Li.validateDidSuffix(e.didSuffix),Ji.validateEs256kOperationKey(e.updatePublicKey,Ns.Public),Ji.validateEs256kOperationKey(e.nextUpdatePublicKey,Ns.Public),Li.validateServices(e.servicesToAdd),Li.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(const p of e.idsOfServicesToRemove)Ji.validateId(p);if(e.idsOfPublicKeysToRemove!==void 0)for(const p of e.idsOfPublicKeysToRemove)Ji.validateId(p);const r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){const p={action:Wu.AddServices,services:n};r.push(p)}const i=e.idsOfServicesToRemove;if(i!==void 0&&i.length>0){const p={action:Wu.RemoveServices,ids:i};r.push(p)}const a=e.publicKeysToAdd;if(a!==void 0&&a.length>0){const p={action:Wu.AddPublicKeys,publicKeys:a};r.push(p)}const o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){const p={action:Wu.RemovePublicKeys,ids:o};r.push(p)}const s=fo.hashAlgorithmInMultihashCode,d=yield wn.canonicalizeThenHashThenEncode(e.updatePublicKey,s),l=yield wn.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,s),c={patches:r,updateCommitment:l},u=yield wn.canonicalizeThenHashThenEncode(c,s),h={updateKey:e.updatePublicKey,deltaHash:u},y=yield e.signer.sign({alg:"ES256K"},h);return{type:rg.Update,didSuffix:e.didSuffix,revealValue:d,delta:c,signedData:y}})}static validateDidSuffix(e){wn.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;const r=new Set;for(const n of e){if(Array.isArray(n.publicKeyJwk))throw new Vr(Kr.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Ji.validateId(n.id),r.has(n.id))throw new Vr(Kr.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Ji.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){const r=new Set;for(const n of e){if(Li.validateService(n),r.has(n.id))throw new Vr(Kr.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Ji.validateId(e.id);const r=30;if(e.type.length>r){const n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Vr(Kr.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){const n="Service endpoint value cannot be an array.";throw new Vr(Kr.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&_j.parse(e.serviceEndpoint).error!==void 0)throw new Vr(Kr.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){const r=Dd.canonicalizeAsBytes(e);if(r.length>fo.maxCanonicalizedDeltaSizeInBytes){const n=`Delta of ${r.length} bytes exceeded limit of ${fo.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Vr(Kr.DeltaExceedsMaximumSize,n)}}}var wk=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class L${static createLongFormDid(e){return wk(this,void 0,void 0,function*(){const r=yield Li.createCreateRequest(e),n=yield L$.computeDidUniqueSuffix(r.suffixData);let i;fo.network===void 0||fo.network==="mainnet"?i=`did:ion:${n}`:i=`did:ion:${fo.network}:${n}`;const a={suffixData:r.suffixData,delta:r.delta},o=Dd.canonicalizeAsBytes(a),s=ra.encode(o);return`${i}:${s}`})}static computeDidUniqueSuffix(e){return wk(this,void 0,void 0,function*(){const r=Dd.canonicalizeAsBytes(e),n=yield wn.hash(r,fo.hashAlgorithmInMultihashCode);return ra.encode(n)})}}var bk;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(bk||(bk={}));var vk;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(vk||(vk={}));var id;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(id||(id={}));id.Ed25519,id.secp256k1,id.secp256r1,id.secp256r1,id.secp256k1,id.secp256r1;var ja;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(ja||(ja={}));ja.Ed25519,ja.secp256k1,ja.secp256r1,ja.secp256r1,ja.secp256k1,ja.secp256r1,ja.X25519;var Jae={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,l,c){this.fn=d,this.context=l,this.once=c||!1}function a(d,l,c,u,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var y=new i(c,u||d,h),p=r?r+l:l;return d._events[p]?d._events[p].fn?d._events[p]=[d._events[p],y]:d._events[p].push(y):(d._events[p]=y,d._eventsCount++),d}function o(d,l){--d._eventsCount===0?d._events=new n:delete d._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)e.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,y=u.length,p=new Array(y);h<y;h++)p[h]=u[h].fn;return p},s.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},s.prototype.emit=function(l,c,u,h,y,p){var f=r?r+l:l;if(!this._events[f])return!1;var g=this._events[f],v=arguments.length,b,m;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,h),!0;case 5:return g.fn.call(g.context,c,u,h,y),!0;case 6:return g.fn.call(g.context,c,u,h,y,p),!0}for(m=1,b=new Array(v-1);m<v;m++)b[m-1]=arguments[m];g.fn.apply(g.context,b)}else{var w=g.length,S;for(m=0;m<w;m++)switch(g[m].once&&this.removeListener(l,g[m].fn,void 0,!0),v){case 1:g[m].fn.call(g[m].context);break;case 2:g[m].fn.call(g[m].context,c);break;case 3:g[m].fn.call(g[m].context,c,u);break;case 4:g[m].fn.call(g[m].context,c,u,h);break;default:if(!b)for(S=1,b=new Array(v-1);S<v;S++)b[S-1]=arguments[S];g[m].fn.apply(g[m].context,b)}}return!0},s.prototype.on=function(l,c,u){return a(this,l,c,u,!1)},s.prototype.once=function(l,c,u){return a(this,l,c,u,!0)},s.prototype.removeListener=function(l,c,u,h){var y=r?r+l:l;if(!this._events[y])return this;if(!c)return o(this,y),this;var p=this._events[y];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&o(this,y);else{for(var f=0,g=[],v=p.length;f<v;f++)(p[f].fn!==c||h&&!p[f].once||u&&p[f].context!==u)&&g.push(p[f]);g.length?this._events[y]=g.length===1?g[0]:g:o(this,y)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(Jae);var ko;(function(t){t.MessagesQuery="MessagesQuery",t.MessagesRead="MessagesRead",t.MessagesSubscribe="MessagesSubscribe",t.ProtocolsConfigure="ProtocolsConfigure",t.ProtocolsQuery="ProtocolsQuery",t.RecordsDelete="RecordsDelete",t.RecordsQuery="RecordsQuery",t.RecordsRead="RecordsRead",t.RecordsSubscribe="RecordsSubscribe",t.RecordsWrite="RecordsWrite"})(ko||(ko={}));ko.MessagesQuery+"",ko.MessagesRead+"",ko.MessagesSubscribe+"",ko.ProtocolsConfigure+"",ko.ProtocolsQuery+"",ko.RecordsDelete+"",ko.RecordsQuery+"",ko.RecordsRead+"",ko.RecordsSubscribe+"",ko.RecordsWrite+"";var _k;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(_k||(_k={}));var Ek;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(Ek||(Ek={}));var Sk;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(Sk||(Sk={}));var uo;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(uo||(uo={}));var $k;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})($k||($k={}));uo.Ed25519,uo.secp256k1,uo.secp256r1,uo.secp256r1,uo.secp256k1,uo.secp256r1,uo.X25519;uo.Ed25519+"",uo.secp256k1+"",uo.secp256r1+"",uo.X25519+"";var od;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(od||(od={}));od.Ed25519,od.secp256k1,od.secp256r1,od.secp256r1,od.secp256k1,od.secp256r1;var Ca;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Ca||(Ca={}));Ca.Ed25519,Ca.secp256k1,Ca.secp256r1,Ca.secp256r1,Ca.secp256k1,Ca.secp256r1,Ca.X25519;var Tk;(function(t){t.AlgorithmNotSupported="algorithmNotSupported",t.EncodingError="encodingError",t.InvalidJwe="invalidJwe",t.InvalidJwk="invalidJwk",t.OperationNotSupported="operationNotSupported"})(Tk||(Tk={}));var Ak;(function(t){t.Create="Create",t.Resolve="Resolve"})(Ak||(Ak={}));var U$={},c2={exports:{}},TC=fa.EventEmitter,g1,Pk;function ece(){if(Pk)return g1;Pk=1;function t(p,f){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);f&&(v=v.filter(function(b){return Object.getOwnPropertyDescriptor(p,b).enumerable})),g.push.apply(g,v)}return g}function e(p){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?t(Object(g),!0).forEach(function(v){r(p,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):t(Object(g)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(g,v))})}return p}function r(p,f,g){return f=o(f),f in p?Object.defineProperty(p,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):p[f]=g,p}function n(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function i(p,f){for(var g=0;g<f.length;g++){var v=f[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,o(v.key),v)}}function a(p,f,g){return f&&i(p.prototype,f),Object.defineProperty(p,"prototype",{writable:!1}),p}function o(p){var f=s(p,"string");return typeof f=="symbol"?f:String(f)}function s(p,f){if(typeof p!="object"||p===null)return p;var g=p[Symbol.toPrimitive];if(g!==void 0){var v=g.call(p,f||"default");if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(p)}var d=Dr,l=d.Buffer,c=vE,u=c.inspect,h=u&&u.custom||"inspect";function y(p,f,g){l.prototype.copy.call(p,f,g)}return g1=function(){function p(){n(this,p),this.head=null,this.tail=null,this.length=0}return a(p,[{key:"push",value:function(g){var v={data:g,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(g){var v={data:g,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var v=this.head,b=""+v.data;v=v.next;)b+=g+v.data;return b}},{key:"concat",value:function(g){if(this.length===0)return l.alloc(0);for(var v=l.allocUnsafe(g>>>0),b=this.head,m=0;b;)y(b.data,v,m),m+=b.data.length,b=b.next;return v}},{key:"consume",value:function(g,v){var b;return g<this.head.data.length?(b=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?b=this.shift():b=v?this._getString(g):this._getBuffer(g),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var v=this.head,b=1,m=v.data;for(g-=m.length;v=v.next;){var w=v.data,S=g>w.length?w.length:g;if(S===w.length?m+=w:m+=w.slice(0,g),g-=S,g===0){S===w.length?(++b,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=w.slice(S));break}++b}return this.length-=b,m}},{key:"_getBuffer",value:function(g){var v=l.allocUnsafe(g),b=this.head,m=1;for(b.data.copy(v),g-=b.data.length;b=b.next;){var w=b.data,S=g>w.length?w.length:g;if(w.copy(v,v.length-g,0,S),g-=S,g===0){S===w.length?(++m,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=w.slice(S));break}++m}return this.length-=m,v}},{key:h,value:function(g,v){return u(this,e(e({},v),{},{depth:0,customInspect:!1}))}}]),p}(),g1}function tce(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(d2,this,t)):process.nextTick(d2,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?r._writableState?r._writableState.errorEmitted?process.nextTick(Cg,r):(r._writableState.errorEmitted=!0,process.nextTick(xk,r,a)):process.nextTick(xk,r,a):e?(process.nextTick(Cg,r),e(a)):process.nextTick(Cg,r)}),this)}function xk(t,e){d2(t,e),Cg(t)}function Cg(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function rce(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d2(t,e){t.emit("error",e)}function nce(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var AC={destroy:tce,undestroy:rce,errorOrDestroy:nce},Ou={};function ice(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var PC={};function Yo(t,e,r){r||(r=Error);function n(a,o,s){return typeof e=="string"?e:e(a,o,s)}var i=function(a){ice(o,a);function o(s,d,l){return a.call(this,n(s,d,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,PC[t]=i}function Ik(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function oce(t,e,r){return t.substr(0,e.length)===e}function sce(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function ace(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Yo("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Yo("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&oce(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(sce(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Ik(e,"type"));else{var a=ace(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(a," ").concat(n," ").concat(Ik(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Yo("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Yo("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Yo("ERR_STREAM_PREMATURE_CLOSE","Premature close");Yo("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Yo("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Yo("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Yo("ERR_STREAM_WRITE_AFTER_END","write after end");Yo("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Yo("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Yo("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Ou.codes=PC;var cce=Ou.codes.ERR_INVALID_OPT_VALUE;function dce(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function lce(t,e,r,n){var i=dce(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var a=n?r:"highWaterMark";throw new cce(a,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var xC={getHighWaterMark:lce},l2={exports:{}};typeof Object.create=="function"?l2.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:l2.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var rm=l2.exports,uce=fce;function fce(t,e){if(w1("noDeprecation"))return t;var r=!1;function n(){if(!r){if(w1("throwDeprecation"))throw new Error(e);w1("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function w1(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var b1,kk;function IC(){if(kk)return b1;kk=1,b1=I;function t(O){var F=this;this.next=null,this.entry=null,this.finish=function(){W(F,O)}}var e;I.WritableState=T;var r={deprecate:uce},n=TC,i=Dr.Buffer,a=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(O){return i.from(O)}function s(O){return i.isBuffer(O)||O instanceof a}var d=AC,l=xC,c=l.getHighWaterMark,u=Ou.codes,h=u.ERR_INVALID_ARG_TYPE,y=u.ERR_METHOD_NOT_IMPLEMENTED,p=u.ERR_MULTIPLE_CALLBACK,f=u.ERR_STREAM_CANNOT_PIPE,g=u.ERR_STREAM_DESTROYED,v=u.ERR_STREAM_NULL_VALUES,b=u.ERR_STREAM_WRITE_AFTER_END,m=u.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;rm(I,n);function S(){}function T(O,F,Y){e=e||eh(),O=O||{},typeof Y!="boolean"&&(Y=F instanceof e),this.objectMode=!!O.objectMode,Y&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=c(this,O,"writableHighWaterMark",Y),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=O.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){V(F,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}T.prototype.getBuffer=function(){for(var F=this.bufferedRequest,Y=[];F;)Y.push(F),F=F.next;return Y},function(){try{Object.defineProperty(T.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var x;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(F){return x.call(this,F)?!0:this!==I?!1:F&&F._writableState instanceof T}})):x=function(F){return F instanceof this};function I(O){e=e||eh();var F=this instanceof e;if(!F&&!x.call(I,this))return new I(O);this._writableState=new T(O,this,F),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),n.call(this)}I.prototype.pipe=function(){w(this,new f)};function M(O,F){var Y=new b;w(O,Y),process.nextTick(F,Y)}function H(O,F,Y,ee){var te;return Y===null?te=new v:typeof Y!="string"&&!F.objectMode&&(te=new h("chunk",["string","Buffer"],Y)),te?(w(O,te),process.nextTick(ee,te),!1):!0}I.prototype.write=function(O,F,Y){var ee=this._writableState,te=!1,U=!ee.objectMode&&s(O);return U&&!i.isBuffer(O)&&(O=o(O)),typeof F=="function"&&(Y=F,F=null),U?F="buffer":F||(F=ee.defaultEncoding),typeof Y!="function"&&(Y=S),ee.ending?M(this,Y):(U||H(this,ee,O,Y))&&(ee.pendingcb++,te=J(this,ee,U,O,F,Y)),te},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&R(this,O))},I.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new m(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function re(O,F,Y){return!O.objectMode&&O.decodeStrings!==!1&&typeof F=="string"&&(F=i.from(F,Y)),F}Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function J(O,F,Y,ee,te,U){if(!Y){var L=re(F,ee,te);ee!==L&&(Y=!0,te="buffer",ee=L)}var P=F.objectMode?1:ee.length;F.length+=P;var j=F.length<F.highWaterMark;if(j||(F.needDrain=!0),F.writing||F.corked){var X=F.lastBufferedRequest;F.lastBufferedRequest={chunk:ee,encoding:te,isBuf:Y,callback:U,next:null},X?X.next=F.lastBufferedRequest:F.bufferedRequest=F.lastBufferedRequest,F.bufferedRequestCount+=1}else z(O,F,!1,P,ee,te,U);return j}function z(O,F,Y,ee,te,U,L){F.writelen=ee,F.writecb=L,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new g("write")):Y?O._writev(te,F.onwrite):O._write(te,U,F.onwrite),F.sync=!1}function oe(O,F,Y,ee,te){--F.pendingcb,Y?(process.nextTick(te,ee),process.nextTick(Z,O,F),O._writableState.errorEmitted=!0,w(O,ee)):(te(ee),O._writableState.errorEmitted=!0,w(O,ee),Z(O,F))}function C(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function V(O,F){var Y=O._writableState,ee=Y.sync,te=Y.writecb;if(typeof te!="function")throw new p;if(C(Y),F)oe(O,Y,ee,F,te);else{var U=B(Y)||O.destroyed;!U&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&R(O,Y),ee?process.nextTick(q,O,Y,U,te):q(O,Y,U,te)}}function q(O,F,Y,ee){Y||Q(O,F),F.pendingcb--,ee(),Z(O,F)}function Q(O,F){F.length===0&&F.needDrain&&(F.needDrain=!1,O.emit("drain"))}function R(O,F){F.bufferProcessing=!0;var Y=F.bufferedRequest;if(O._writev&&Y&&Y.next){var ee=F.bufferedRequestCount,te=new Array(ee),U=F.corkedRequestsFree;U.entry=Y;for(var L=0,P=!0;Y;)te[L]=Y,Y.isBuf||(P=!1),Y=Y.next,L+=1;te.allBuffers=P,z(O,F,!0,F.length,te,"",U.finish),F.pendingcb++,F.lastBufferedRequest=null,U.next?(F.corkedRequestsFree=U.next,U.next=null):F.corkedRequestsFree=new t(F),F.bufferedRequestCount=0}else{for(;Y;){var j=Y.chunk,X=Y.encoding,ne=Y.callback,ae=F.objectMode?1:j.length;if(z(O,F,!1,ae,j,X,ne),Y=Y.next,F.bufferedRequestCount--,F.writing)break}Y===null&&(F.lastBufferedRequest=null)}F.bufferedRequest=Y,F.bufferProcessing=!1}I.prototype._write=function(O,F,Y){Y(new y("_write()"))},I.prototype._writev=null,I.prototype.end=function(O,F,Y){var ee=this._writableState;return typeof O=="function"?(Y=O,O=null,F=null):typeof F=="function"&&(Y=F,F=null),O!=null&&this.write(O,F),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||N(this,ee,Y),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function B(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function D(O,F){O._final(function(Y){F.pendingcb--,Y&&w(O,Y),F.prefinished=!0,O.emit("prefinish"),Z(O,F)})}function G(O,F){!F.prefinished&&!F.finalCalled&&(typeof O._final=="function"&&!F.destroyed?(F.pendingcb++,F.finalCalled=!0,process.nextTick(D,O,F)):(F.prefinished=!0,O.emit("prefinish")))}function Z(O,F){var Y=B(F);if(Y&&(G(O,F),F.pendingcb===0&&(F.finished=!0,O.emit("finish"),F.autoDestroy))){var ee=O._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&O.destroy()}return Y}function N(O,F,Y){F.ending=!0,Z(O,F),Y&&(F.finished?process.nextTick(Y):O.once("finish",Y)),F.ended=!0,O.writable=!1}function W(O,F,Y){var ee=O.entry;for(O.entry=null;ee;){var te=ee.callback;F.pendingcb--,te(Y),ee=ee.next}F.corkedRequestsFree.next=O}return Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),I.prototype.destroy=d.destroy,I.prototype._undestroy=d.undestroy,I.prototype._destroy=function(O,F){F(O)},b1}var v1,Ok;function eh(){if(Ok)return v1;Ok=1;var t=Object.keys||function(l){var c=[];for(var u in l)c.push(u);return c};v1=o;var e=OC(),r=IC();rm(o,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var a=n[i];o.prototype[a]||(o.prototype[a]=r.prototype[a])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),r.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",s)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s(){this._writableState.ended||process.nextTick(d,this)}function d(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),v1}var Rk=Ou.codes.ERR_STREAM_PREMATURE_CLOSE;function hce(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function pce(){}function yce(t){return t.setHeader&&typeof t.abort=="function"}function kC(t,e,r){if(typeof e=="function")return kC(t,null,e);e||(e={}),r=hce(r||pce);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||s()},o=t._writableState&&t._writableState.finished,s=function(){i=!1,o=!0,n||r.call(t)},d=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,d=!0,i||r.call(t)},c=function(p){r.call(t,p)},u=function(){var p;if(n&&!d)return(!t._readableState||!t._readableState.ended)&&(p=new Rk),r.call(t,p);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(p=new Rk),r.call(t,p)},h=function(){t.req.on("finish",s)};return yce(t)?(t.on("complete",s),t.on("abort",u),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",l),t.on("finish",s),e.error!==!1&&t.on("error",c),t.on("close",u),function(){t.removeListener("complete",s),t.removeListener("abort",u),t.removeListener("request",h),t.req&&t.req.removeListener("finish",s),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",s),t.removeListener("end",l),t.removeListener("error",c),t.removeListener("close",u)}}var F$=kC,_1,jk;function mce(){if(jk)return _1;jk=1;var t;function e(m,w,S){return w=r(w),w in m?Object.defineProperty(m,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):m[w]=S,m}function r(m){var w=n(m,"string");return typeof w=="symbol"?w:String(w)}function n(m,w){if(typeof m!="object"||m===null)return m;var S=m[Symbol.toPrimitive];if(S!==void 0){var T=S.call(m,w||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}var i=F$,a=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),d=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function h(m,w){return{value:m,done:w}}function y(m){var w=m[a];if(w!==null){var S=m[u].read();S!==null&&(m[l]=null,m[a]=null,m[o]=null,w(h(S,!1)))}}function p(m){process.nextTick(y,m)}function f(m,w){return function(S,T){m.then(function(){if(w[d]){S(h(void 0,!0));return}w[c](S,T)},T)}}var g=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((t={get stream(){return this[u]},next:function(){var w=this,S=this[s];if(S!==null)return Promise.reject(S);if(this[d])return Promise.resolve(h(void 0,!0));if(this[u].destroyed)return new Promise(function(M,H){process.nextTick(function(){w[s]?H(w[s]):M(h(void 0,!0))})});var T=this[l],x;if(T)x=new Promise(f(T,this));else{var I=this[u].read();if(I!==null)return Promise.resolve(h(I,!1));x=new Promise(this[c])}return this[l]=x,x}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var w=this;return new Promise(function(S,T){w[u].destroy(null,function(x){if(x){T(x);return}S(h(void 0,!0))})})}),t),g),b=function(w){var S,T=Object.create(v,(S={},e(S,u,{value:w,writable:!0}),e(S,a,{value:null,writable:!0}),e(S,o,{value:null,writable:!0}),e(S,s,{value:null,writable:!0}),e(S,d,{value:w._readableState.endEmitted,writable:!0}),e(S,c,{value:function(I,M){var H=T[u].read();H?(T[l]=null,T[a]=null,T[o]=null,I(h(H,!1))):(T[a]=I,T[o]=M)},writable:!0}),S));return T[l]=null,i(w,function(x){if(x&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"){var I=T[o];I!==null&&(T[l]=null,T[a]=null,T[o]=null,I(x)),T[s]=x;return}var M=T[a];M!==null&&(T[l]=null,T[a]=null,T[o]=null,M(h(void 0,!0))),T[d]=!0}),w.on("readable",p.bind(null,T)),T};return _1=b,_1}var E1,Ck;function gce(){return Ck||(Ck=1,E1=function(){throw new Error("Readable.from is not available in the browser")}),E1}var S1,Nk;function OC(){if(Nk)return S1;Nk=1,S1=M;var t;M.ReadableState=I,fa.EventEmitter;var e=function(L,P){return L.listeners(P).length},r=TC,n=Dr.Buffer,i=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(U){return n.from(U)}function o(U){return n.isBuffer(U)||U instanceof i}var s=vE,d;s&&s.debuglog?d=s.debuglog("stream"):d=function(){};var l=ece(),c=AC,u=xC,h=u.getHighWaterMark,y=Ou.codes,p=y.ERR_INVALID_ARG_TYPE,f=y.ERR_STREAM_PUSH_AFTER_EOF,g=y.ERR_METHOD_NOT_IMPLEMENTED,v=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b,m,w;rm(M,r);var S=c.errorOrDestroy,T=["error","close","destroy","pause","resume"];function x(U,L,P){if(typeof U.prependListener=="function")return U.prependListener(L,P);!U._events||!U._events[L]?U.on(L,P):Array.isArray(U._events[L])?U._events[L].unshift(P):U._events[L]=[P,U._events[L]]}function I(U,L,P){t=t||eh(),U=U||{},typeof P!="boolean"&&(P=L instanceof t),this.objectMode=!!U.objectMode,P&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=h(this,U,"readableHighWaterMark",P),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(b||(b=Zp.StringDecoder),this.decoder=new b(U.encoding),this.encoding=U.encoding)}function M(U){if(t=t||eh(),!(this instanceof M))return new M(U);var L=this instanceof t;this._readableState=new I(U,this,L),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),r.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),M.prototype.destroy=c.destroy,M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(U,L){L(U)},M.prototype.push=function(U,L){var P=this._readableState,j;return P.objectMode?j=!0:typeof U=="string"&&(L=L||P.defaultEncoding,L!==P.encoding&&(U=n.from(U,L),L=""),j=!0),H(this,U,L,!1,j)},M.prototype.unshift=function(U){return H(this,U,null,!0,!1)};function H(U,L,P,j,X){d("readableAddChunk",L);var ne=U._readableState;if(L===null)ne.reading=!1,V(U,ne);else{var ae;if(X||(ae=J(ne,L)),ae)S(U,ae);else if(ne.objectMode||L&&L.length>0)if(typeof L!="string"&&!ne.objectMode&&Object.getPrototypeOf(L)!==n.prototype&&(L=a(L)),j)ne.endEmitted?S(U,new v):re(U,ne,L,!0);else if(ne.ended)S(U,new f);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!P?(L=ne.decoder.write(L),ne.objectMode||L.length!==0?re(U,ne,L,!1):R(U,ne)):re(U,ne,L,!1)}else j||(ne.reading=!1,R(U,ne))}return!ne.ended&&(ne.length<ne.highWaterMark||ne.length===0)}function re(U,L,P,j){L.flowing&&L.length===0&&!L.sync?(L.awaitDrain=0,U.emit("data",P)):(L.length+=L.objectMode?1:P.length,j?L.buffer.unshift(P):L.buffer.push(P),L.needReadable&&q(U)),R(U,L)}function J(U,L){var P;return!o(L)&&typeof L!="string"&&L!==void 0&&!U.objectMode&&(P=new p("chunk",["string","Buffer","Uint8Array"],L)),P}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(U){b||(b=Zp.StringDecoder);var L=new b(U);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var P=this._readableState.buffer.head,j="";P!==null;)j+=L.write(P.data),P=P.next;return this._readableState.buffer.clear(),j!==""&&this._readableState.buffer.push(j),this._readableState.length=j.length,this};var z=1073741824;function oe(U){return U>=z?U=z:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function C(U,L){return U<=0||L.length===0&&L.ended?0:L.objectMode?1:U!==U?L.flowing&&L.length?L.buffer.head.data.length:L.length:(U>L.highWaterMark&&(L.highWaterMark=oe(U)),U<=L.length?U:L.ended?L.length:(L.needReadable=!0,0))}M.prototype.read=function(U){d("read",U),U=parseInt(U,10);var L=this._readableState,P=U;if(U!==0&&(L.emittedReadable=!1),U===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return d("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?Y(this):q(this),null;if(U=C(U,L),U===0&&L.ended)return L.length===0&&Y(this),null;var j=L.needReadable;d("need readable",j),(L.length===0||L.length-U<L.highWaterMark)&&(j=!0,d("length less than watermark",j)),L.ended||L.reading?(j=!1,d("reading or ended",j)):j&&(d("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(U=C(P,L)));var X;return U>0?X=F(U,L):X=null,X===null?(L.needReadable=L.length<=L.highWaterMark,U=0):(L.length-=U,L.awaitDrain=0),L.length===0&&(L.ended||(L.needReadable=!0),P!==U&&L.ended&&Y(this)),X!==null&&this.emit("data",X),X};function V(U,L){if(d("onEofChunk"),!L.ended){if(L.decoder){var P=L.decoder.end();P&&P.length&&(L.buffer.push(P),L.length+=L.objectMode?1:P.length)}L.ended=!0,L.sync?q(U):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,Q(U)))}}function q(U){var L=U._readableState;d("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(d("emitReadable",L.flowing),L.emittedReadable=!0,process.nextTick(Q,U))}function Q(U){var L=U._readableState;d("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&(L.length||L.ended)&&(U.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,O(U)}function R(U,L){L.readingMore||(L.readingMore=!0,process.nextTick(B,U,L))}function B(U,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){var P=L.length;if(d("maybeReadMore read 0"),U.read(0),P===L.length)break}L.readingMore=!1}M.prototype._read=function(U){S(this,new g("_read()"))},M.prototype.pipe=function(U,L){var P=this,j=this._readableState;switch(j.pipesCount){case 0:j.pipes=U;break;case 1:j.pipes=[j.pipes,U];break;default:j.pipes.push(U);break}j.pipesCount+=1,d("pipe count=%d opts=%j",j.pipesCount,L);var X=(!L||L.end!==!1)&&U!==process.stdout&&U!==process.stderr,ne=X?pe:ce;j.endEmitted?process.nextTick(ne):P.once("end",ne),U.on("unpipe",ae);function ae(K,A){d("onunpipe"),K===P&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,xe())}function pe(){d("onend"),U.end()}var we=D(P);U.on("drain",we);var Se=!1;function xe(){d("cleanup"),U.removeListener("close",Qe),U.removeListener("finish",ie),U.removeListener("drain",we),U.removeListener("error",Ne),U.removeListener("unpipe",ae),P.removeListener("end",pe),P.removeListener("end",ce),P.removeListener("data",Ee),Se=!0,j.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&we()}P.on("data",Ee);function Ee(K){d("ondata");var A=U.write(K);d("dest.write",A),A===!1&&((j.pipesCount===1&&j.pipes===U||j.pipesCount>1&&te(j.pipes,U)!==-1)&&!Se&&(d("false write response, pause",j.awaitDrain),j.awaitDrain++),P.pause())}function Ne(K){d("onerror",K),ce(),U.removeListener("error",Ne),e(U,"error")===0&&S(U,K)}x(U,"error",Ne);function Qe(){U.removeListener("finish",ie),ce()}U.once("close",Qe);function ie(){d("onfinish"),U.removeListener("close",Qe),ce()}U.once("finish",ie);function ce(){d("unpipe"),P.unpipe(U)}return U.emit("pipe",P),j.flowing||(d("pipe resume"),P.resume()),U};function D(U){return function(){var P=U._readableState;d("pipeOnDrain",P.awaitDrain),P.awaitDrain&&P.awaitDrain--,P.awaitDrain===0&&e(U,"data")&&(P.flowing=!0,O(U))}}M.prototype.unpipe=function(U){var L=this._readableState,P={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return U&&U!==L.pipes?this:(U||(U=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,U&&U.emit("unpipe",this,P),this);if(!U){var j=L.pipes,X=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var ne=0;ne<X;ne++)j[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=te(L.pipes,U);return ae===-1?this:(L.pipes.splice(ae,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),U.emit("unpipe",this,P),this)},M.prototype.on=function(U,L){var P=r.prototype.on.call(this,U,L),j=this._readableState;return U==="data"?(j.readableListening=this.listenerCount("readable")>0,j.flowing!==!1&&this.resume()):U==="readable"&&!j.endEmitted&&!j.readableListening&&(j.readableListening=j.needReadable=!0,j.flowing=!1,j.emittedReadable=!1,d("on readable",j.length,j.reading),j.length?q(this):j.reading||process.nextTick(Z,this)),P},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(U,L){var P=r.prototype.removeListener.call(this,U,L);return U==="readable"&&process.nextTick(G,this),P},M.prototype.removeAllListeners=function(U){var L=r.prototype.removeAllListeners.apply(this,arguments);return(U==="readable"||U===void 0)&&process.nextTick(G,this),L};function G(U){var L=U._readableState;L.readableListening=U.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:U.listenerCount("data")>0&&U.resume()}function Z(U){d("readable nexttick read 0"),U.read(0)}M.prototype.resume=function(){var U=this._readableState;return U.flowing||(d("resume"),U.flowing=!U.readableListening,N(this,U)),U.paused=!1,this};function N(U,L){L.resumeScheduled||(L.resumeScheduled=!0,process.nextTick(W,U,L))}function W(U,L){d("resume",L.reading),L.reading||U.read(0),L.resumeScheduled=!1,U.emit("resume"),O(U),L.flowing&&!L.reading&&U.read(0)}M.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(U){var L=U._readableState;for(d("flow",L.flowing);L.flowing&&U.read()!==null;);}M.prototype.wrap=function(U){var L=this,P=this._readableState,j=!1;U.on("end",function(){if(d("wrapped end"),P.decoder&&!P.ended){var ae=P.decoder.end();ae&&ae.length&&L.push(ae)}L.push(null)}),U.on("data",function(ae){if(d("wrapped data"),P.decoder&&(ae=P.decoder.write(ae)),!(P.objectMode&&ae==null)&&!(!P.objectMode&&(!ae||!ae.length))){var pe=L.push(ae);pe||(j=!0,U.pause())}});for(var X in U)this[X]===void 0&&typeof U[X]=="function"&&(this[X]=function(pe){return function(){return U[pe].apply(U,arguments)}}(X));for(var ne=0;ne<T.length;ne++)U.on(T[ne],this.emit.bind(this,T[ne]));return this._read=function(ae){d("wrapped _read",ae),j&&(j=!1,U.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=mce()),m(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),M._fromList=F,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function F(U,L){if(L.length===0)return null;var P;return L.objectMode?P=L.buffer.shift():!U||U>=L.length?(L.decoder?P=L.buffer.join(""):L.buffer.length===1?P=L.buffer.first():P=L.buffer.concat(L.length),L.buffer.clear()):P=L.buffer.consume(U,L.decoder),P}function Y(U){var L=U._readableState;d("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,process.nextTick(ee,L,U))}function ee(U,L){if(d("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&U.length===0&&(U.endEmitted=!0,L.readable=!1,L.emit("end"),U.autoDestroy)){var P=L._writableState;(!P||P.autoDestroy&&P.finished)&&L.destroy()}}typeof Symbol=="function"&&(M.from=function(U,L){return w===void 0&&(w=gce()),w(M,U,L)});function te(U,L){for(var P=0,j=U.length;P<j;P++)if(U[P]===L)return P;return-1}return S1}var RC=yc,gb=Ou.codes,wce=gb.ERR_METHOD_NOT_IMPLEMENTED,bce=gb.ERR_MULTIPLE_CALLBACK,vce=gb.ERR_TRANSFORM_ALREADY_TRANSFORMING,_ce=gb.ERR_TRANSFORM_WITH_LENGTH_0,wb=eh();rm(yc,wb);function Ece(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new bce);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function yc(t){if(!(this instanceof yc))return new yc(t);wb.call(this,t),this._transformState={afterTransform:Ece.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Sce)}function Sce(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Bk(t,e,r)}):Bk(this,null,null)}yc.prototype.push=function(t,e){return this._transformState.needTransform=!1,wb.prototype.push.call(this,t,e)};yc.prototype._transform=function(t,e,r){r(new wce("_transform()"))};yc.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};yc.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};yc.prototype._destroy=function(t,e){wb.prototype._destroy.call(this,t,function(r){e(r)})};function Bk(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new _ce;if(t._transformState.transforming)throw new vce;return t.push(null)}var $ce=dy,jC=RC;rm(dy,jC);function dy(t){if(!(this instanceof dy))return new dy(t);jC.call(this,t)}dy.prototype._transform=function(t,e,r){r(null,t)};var $1;function Tce(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var CC=Ou.codes,Ace=CC.ERR_MISSING_ARGS,Pce=CC.ERR_STREAM_DESTROYED;function Dk(t){if(t)throw t}function xce(t){return t.setHeader&&typeof t.abort=="function"}function Ice(t,e,r,n){n=Tce(n);var i=!1;t.on("close",function(){i=!0}),$1===void 0&&($1=F$),$1(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var a=!1;return function(o){if(!i&&!a){if(a=!0,xce(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Pce("pipe"))}}}function Mk(t){t()}function kce(t,e){return t.pipe(e)}function Oce(t){return!t.length||typeof t[t.length-1]!="function"?Dk:t.pop()}function Rce(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Oce(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Ace("streams");var i,a=e.map(function(o,s){var d=s<e.length-1,l=s>0;return Ice(o,d,l,function(c){i||(i=c),c&&a.forEach(Mk),!d&&(a.forEach(Mk),n(i))})});return e.reduce(kce)}var jce=Rce;(function(t,e){e=t.exports=OC(),e.Stream=e,e.Readable=e,e.Writable=IC(),e.Duplex=eh(),e.Transform=RC,e.PassThrough=$ce,e.finished=F$,e.pipeline=jce})(c2,c2.exports);var Cce=c2.exports;Object.defineProperty(U$,"__esModule",{value:!0});U$.ReadableWebToNodeStream=void 0;const Nce=Cce;class Bce extends Nce.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}U$.ReadableWebToNodeStream=Bce;/*! micro-ed25519-hdkey - MIT License (c) 2022 Paul Miller (paulmillr.com) */P$("ed25519 seed");var Lk;(function(t){t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.ParseError=-32700]="ParseError",t[t.TransportError=-32300]="TransportError",t[t.BadRequest=-50400]="BadRequest",t[t.Unauthorized=-50401]="Unauthorized",t[t.Forbidden=-50403]="Forbidden",t[t.Conflict=-50409]="Conflict"})(Lk||(Lk={}));var Uk;(function(t){t.Create="did.create",t.Resolve="did.resolve"})(Uk||(Uk={}));class as{static check(e,r){let n=as.cache.get(e);return n?n.has(r):!1}static set(e,r){let n=as.cache.get(e)||new Set;if(as.cache.delete(e),as.cache.set(e,n),this.cache.size>as.sendCacheLimit){const i=as.cache.keys().next().value;as.cache.delete(i)}if(n.delete(r),n.add(r),n.size>as.sendCacheLimit){const i=n.keys().next().value;n.delete(i)}}}as.cache=new Map;as.sendCacheLimit=100;var ly;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(ly||(ly={}));const Zn={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class Ft{constructor({method:e,id:r,path:n,query:i,fragment:a,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=i,this.fragment=a,this.params=o}static parse(e){if(!e)return null;const r=Ft.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;const{method:n,id:i,path:a,query:o,fragment:s}=r.groups,d={uri:`did:${n}:${i}`,method:n,id:i};if(a&&(d.path=a),o&&(d.query=o.slice(1)),s&&(d.fragment=s.slice(1)),o){const l={},c=o.slice(1).split("&");for(const u of c){const[h,y]=u.split("=");l[h]=y}d.params=l}return d}}Ft.METHOD_PATTERN="([a-z0-9]+)";Ft.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Ft.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Ft.PCT_ENCODED_PATTERN})`;Ft.METHOD_ID_PATTERN=`((?:${Ft.ID_CHAR_PATTERN}*:)*(${Ft.ID_CHAR_PATTERN}+))`;Ft.PATH_PATTERN="(/[^#?]*)?";Ft.QUERY_PATTERN="([?][^#]*)?";Ft.FRAGMENT_PATTERN="(#.*)?";Ft.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Ft.METHOD_PATTERN}):(?<id>${Ft.METHOD_ID_PATTERN})(?<path>${Ft.PATH_PATTERN})(?<query>${Ft.QUERY_PATTERN})(?<fragment>${Ft.FRAGMENT_PATTERN})$`);class Xe extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe)}}var Ye;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(Ye||(Ye={}));var Dce=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class NC{static digest({data:e}){return Dce(this,void 0,void 0,function*(){return uu(e)})}}class z${}var Mce=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Lce extends z${digest({algorithm:e,data:r}){return Mce(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield NC.digest({data:r})}})}}function Uce(t){const e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n).sort(),a={};for(const o of i)a[o]=e(n[o]);return a}return n},r=e(t);return JSON.stringify(r)}var Fce=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};const Fk="urn:jwk:";function tr({jwk:t}){return Fce(this,void 0,void 0,function*(){const e=t.kty;let r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);uC(r);const n=Uce(r),i=ze.string(n).toUint8Array(),a=yield NC.digest({data:i});return ze.uint8Array(a).toBase64Url()})}function Yl(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function q$(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Zl(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function K$(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function zce(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var kn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},qce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Pr{static adjustSignatureToLowS({signature:e}){return kn(this,void 0,void 0,function*(){const r=eo.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return kn(this,void 0,void 0,function*(){const r=yield Pr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:ze.uint8Array(e).toBase64Url(),x:ze.uint8Array(r.x).toBase64Url(),y:ze.uint8Array(r.y).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return kn(this,void 0,void 0,function*(){const r=yield Pr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:ze.uint8Array(r.x).toBase64Url(),y:ze.uint8Array(r.y).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return kn(this,void 0,void 0,function*(){return eo.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return kn(this,void 0,void 0,function*(){const r=yield Pr.privateKeyToBytes({privateKey:e}),n=yield Pr.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"secp256k1",x:ze.uint8Array(n.x).toBase64Url(),y:ze.uint8Array(n.y).toBase64Url()};return i.kid=yield tr({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return kn(this,void 0,void 0,function*(){return eo.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return kn(this,void 0,void 0,function*(){return eo.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return kn(this,void 0,void 0,function*(){const e=eo.utils.randomPrivateKey(),r=yield Pr.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield tr({jwk:r}),r})}static getPublicKey({key:e}){var r;return kn(this,void 0,void 0,function*(){if(!(Yl(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let n=qce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield tr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return kn(this,void 0,void 0,function*(){if(!Yl(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ze.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return kn(this,void 0,void 0,function*(){if(!(q$(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=ze.base64Url(e.x).toUint8Array(),i=ze.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return kn(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield Pr.privateKeyToBytes({privateKey:e}),i=yield Pr.publicKeyToBytes({publicKey:r});return eo.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return kn(this,void 0,void 0,function*(){const n=yield Pr.privateKeyToBytes({privateKey:r}),i=uu(e);return eo.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return kn(this,void 0,void 0,function*(){return eo.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return kn(this,void 0,void 0,function*(){try{eo.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return kn(this,void 0,void 0,function*(){const i=yield Pr.publicKeyToBytes({publicKey:e}),a=uu(n);return eo.verify(r,a,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return kn(this,void 0,void 0,function*(){e.byteLength===32&&(e=eo.getPublicKey(e));const r=eo.ProjectivePoint.fromHex(e),n=da(r.x,32),i=da(r.y,32);return{x:n,y:i}})}}var On=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Kce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Nr{static adjustSignatureToLowS({signature:e}){return On(this,void 0,void 0,function*(){const r=$o.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return On(this,void 0,void 0,function*(){const r=yield Nr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:ze.uint8Array(e).toBase64Url(),x:ze.uint8Array(r.x).toBase64Url(),y:ze.uint8Array(r.y).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return On(this,void 0,void 0,function*(){const r=yield Nr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:ze.uint8Array(r.x).toBase64Url(),y:ze.uint8Array(r.y).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return On(this,void 0,void 0,function*(){return $o.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return On(this,void 0,void 0,function*(){const r=yield Nr.privateKeyToBytes({privateKey:e}),n=yield Nr.getCurvePoint({keyBytes:r}),i={kty:"EC",crv:"P-256",x:ze.uint8Array(n.x).toBase64Url(),y:ze.uint8Array(n.y).toBase64Url()};return i.kid=yield tr({jwk:i}),i})}static convertDerToCompactSignature({derSignature:e}){return On(this,void 0,void 0,function*(){return $o.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return On(this,void 0,void 0,function*(){return $o.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return On(this,void 0,void 0,function*(){const e=$o.utils.randomPrivateKey(),r=yield Nr.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield tr({jwk:r}),r})}static getPublicKey({key:e}){var r;return On(this,void 0,void 0,function*(){if(!(Yl(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let n=Kce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield tr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return On(this,void 0,void 0,function*(){if(!Yl(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ze.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return On(this,void 0,void 0,function*(){if(!(q$(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),n=ze.base64Url(e.x).toUint8Array(),i=ze.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...i])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return On(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield Nr.privateKeyToBytes({privateKey:e}),i=yield Nr.publicKeyToBytes({publicKey:r});return $o.getSharedSecret(n,i,!0).slice(1)})}static sign({data:e,key:r}){return On(this,void 0,void 0,function*(){const n=yield Nr.privateKeyToBytes({privateKey:r}),i=uu(e);return $o.sign(i,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return On(this,void 0,void 0,function*(){return $o.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return On(this,void 0,void 0,function*(){try{$o.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return On(this,void 0,void 0,function*(){const i=yield Nr.publicKeyToBytes({publicKey:e}),a=uu(n);return $o.verify(r,a,i,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return On(this,void 0,void 0,function*(){e.byteLength===32&&(e=$o.getPublicKey(e));const r=$o.ProjectivePoint.fromHex(e),n=da(r.x,32),i=da(r.y,32);return{x:n,y:i}})}}var tp=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class zk extends z${computePublicKey({key:e}){return tp(this,void 0,void 0,function*(){if(!Yl(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield Pr.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Nr.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return tp(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{const r=yield Pr.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Nr.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return tp(this,void 0,void 0,function*(){if(!Yl(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const r=yield Pr.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{const r=yield Nr.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return tp(this,void 0,void 0,function*(){if(!Yl(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield Pr.sign({key:e,data:r});case"P-256":return yield Nr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return tp(this,void 0,void 0,function*(){if(!q$(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield Pr.verify({key:e,signature:r,data:n});case"P-256":return yield Nr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}}var To=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Vce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Br{static bytesToPrivateKey({privateKeyBytes:e}){return To(this,void 0,void 0,function*(){const r=hl.getPublicKey(e),n={crv:"Ed25519",d:ze.uint8Array(e).toBase64Url(),kty:"OKP",x:ze.uint8Array(r).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return To(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:ze.uint8Array(e).toBase64Url()};return r.kid=yield tr({jwk:r}),r})}static computePublicKey({key:e}){return To(this,void 0,void 0,function*(){const r=yield Br.privateKeyToBytes({privateKey:e}),n=hl.getPublicKey(r),i={kty:"OKP",crv:"Ed25519",x:ze.uint8Array(n).toBase64Url()};return i.kid=yield tr({jwk:i}),i})}static convertPrivateKeyToX25519({privateKey:e}){return To(this,void 0,void 0,function*(){const r=yield Br.privateKeyToBytes({privateKey:e}),n=lae(r),i=fp.getPublicKey(n),a={kty:"OKP",crv:"X25519",d:ze.uint8Array(n).toBase64Url(),x:ze.uint8Array(i).toBase64Url()};return a.kid=yield tr({jwk:a}),a})}static convertPublicKeyToX25519({publicKey:e}){return To(this,void 0,void 0,function*(){const r=yield Br.publicKeyToBytes({publicKey:e});if(!(yield Br.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const i=dae(r),a={kty:"OKP",crv:"X25519",x:ze.uint8Array(i).toBase64Url()};return a.kid=yield tr({jwk:a}),a})}static generateKey(){return To(this,void 0,void 0,function*(){const e=hl.utils.randomPrivateKey(),r=yield Br.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield tr({jwk:r}),r})}static getPublicKey({key:e}){var r;return To(this,void 0,void 0,function*(){if(!(Zl(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let n=Vce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield tr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return To(this,void 0,void 0,function*(){if(!Zl(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ze.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return To(this,void 0,void 0,function*(){if(!K$(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ze.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return To(this,void 0,void 0,function*(){const n=yield Br.privateKeyToBytes({privateKey:e});return hl.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return To(this,void 0,void 0,function*(){try{hl.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return To(this,void 0,void 0,function*(){const i=yield Br.publicKeyToBytes({publicKey:e});return hl.verify(r,n,i)})}}var rp=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class Hce extends z${computePublicKey({key:e}){return rp(this,void 0,void 0,function*(){if(!Zl(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Br.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return rp(this,void 0,void 0,function*(){switch(e){case"Ed25519":{const r=yield Br.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return rp(this,void 0,void 0,function*(){if(!Zl(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const r=yield Br.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return rp(this,void 0,void 0,function*(){if(!Zl(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Br.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return rp(this,void 0,void 0,function*(){if(!K$(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Br.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}}var ka=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};const T1={Ed25519:{implementation:Hce,names:["Ed25519"]},secp256k1:{implementation:zk,names:["ES256K","secp256k1"]},secp256r1:{implementation:zk,names:["ES256","secp256r1"]},"SHA-256":{implementation:Lce,names:["SHA-256"]}};class mc{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new pae}digest({algorithm:e,data:r}){return ka(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return ka(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return ka(this,void 0,void 0,function*(){const n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");const i=`${Fk}${n.kid}`;return yield this._keyStore.set(i,n),i})}getKeyUri({key:e}){return ka(this,void 0,void 0,function*(){const r=yield tr({jwk:e});return`${Fk}${r}`})}getPublicKey({keyUri:e}){return ka(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return ka(this,void 0,void 0,function*(){if(!zce(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield tr({jwk:n}));const i=yield this.getKeyUri({key:n});return yield this._keyStore.set(i,n),i})}sign({keyUri:e,data:r}){return ka(this,void 0,void 0,function*(){const n=yield this.getPrivateKey({keyUri:e}),i=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:i}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return ka(this,void 0,void 0,function*(){const i=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:i}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;const n=(r=T1[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){const r=e.alg,n=e.crv;for(const i in T1){const a=T1[i];if(r&&a.names.includes(r))return i;if(n&&a.names.includes(n))return i}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return ka(this,void 0,void 0,function*(){const r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}}function Gce(t){const e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const BC=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function DC(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const Wce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Wce)throw new Error("Non little-endian hardware is not supported");function V$(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function u2(t){if(typeof t=="string")t=V$(t);else if(DC(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Yce(t,e){if(!DC(t))throw new Error("Uint8Array expected");if(t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function Zce(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function Xce(t,...e){if(!Zce(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function qk(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Qce(t,e){Xce(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Wc=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Jce=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class Bl{static bytesToPrivateKey({privateKeyBytes:e}){return Wc(this,void 0,void 0,function*(){const r=fp.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:ze.uint8Array(e).toBase64Url(),x:ze.uint8Array(r).toBase64Url()};return n.kid=yield tr({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Wc(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:ze.uint8Array(e).toBase64Url()};return r.kid=yield tr({jwk:r}),r})}static computePublicKey({key:e}){return Wc(this,void 0,void 0,function*(){const r=yield Bl.privateKeyToBytes({privateKey:e}),n=fp.getPublicKey(r),i={kty:"OKP",crv:"X25519",x:ze.uint8Array(n).toBase64Url()};return i.kid=yield tr({jwk:i}),i})}static generateKey(){return Wc(this,void 0,void 0,function*(){const e=fp.utils.randomPrivateKey(),r=yield Bl.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield tr({jwk:r}),r})}static getPublicKey({key:e}){var r;return Wc(this,void 0,void 0,function*(){if(!(Zl(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let n=Jce(e,["d"]);return(r=n.kid)!==null&&r!==void 0||(n.kid=yield tr({jwk:n})),n})}static privateKeyToBytes({privateKey:e}){return Wc(this,void 0,void 0,function*(){if(!Zl(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return ze.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Wc(this,void 0,void 0,function*(){if(!K$(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return ze.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Wc(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const n=yield Bl.privateKeyToBytes({privateKey:e}),i=yield Bl.publicKeyToBytes({publicKey:r});return fp.getSharedSecret(n,i)})}}const Rn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class ede{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=u2(e),Yce(e,32);const r=Rn(e,0),n=Rn(e,2),i=Rn(e,4),a=Rn(e,6),o=Rn(e,8),s=Rn(e,10),d=Rn(e,12),l=Rn(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|a<<9)&8191,this.r[4]=(a>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|s<<2)&8191,this.r[7]=(s>>>11|d<<5)&8065,this.r[8]=(d>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let c=0;c<8;c++)this.pad[c]=Rn(e,16+2*c)}process(e,r,n=!1){const i=n?0:2048,{h:a,r:o}=this,s=o[0],d=o[1],l=o[2],c=o[3],u=o[4],h=o[5],y=o[6],p=o[7],f=o[8],g=o[9],v=Rn(e,r+0),b=Rn(e,r+2),m=Rn(e,r+4),w=Rn(e,r+6),S=Rn(e,r+8),T=Rn(e,r+10),x=Rn(e,r+12),I=Rn(e,r+14);let M=a[0]+(v&8191),H=a[1]+((v>>>13|b<<3)&8191),re=a[2]+((b>>>10|m<<6)&8191),J=a[3]+((m>>>7|w<<9)&8191),z=a[4]+((w>>>4|S<<12)&8191),oe=a[5]+(S>>>1&8191),C=a[6]+((S>>>14|T<<2)&8191),V=a[7]+((T>>>11|x<<5)&8191),q=a[8]+((x>>>8|I<<8)&8191),Q=a[9]+(I>>>5|i),R=0,B=R+M*s+H*(5*g)+re*(5*f)+J*(5*p)+z*(5*y);R=B>>>13,B&=8191,B+=oe*(5*h)+C*(5*u)+V*(5*c)+q*(5*l)+Q*(5*d),R+=B>>>13,B&=8191;let D=R+M*d+H*s+re*(5*g)+J*(5*f)+z*(5*p);R=D>>>13,D&=8191,D+=oe*(5*y)+C*(5*h)+V*(5*u)+q*(5*c)+Q*(5*l),R+=D>>>13,D&=8191;let G=R+M*l+H*d+re*s+J*(5*g)+z*(5*f);R=G>>>13,G&=8191,G+=oe*(5*p)+C*(5*y)+V*(5*h)+q*(5*u)+Q*(5*c),R+=G>>>13,G&=8191;let Z=R+M*c+H*l+re*d+J*s+z*(5*g);R=Z>>>13,Z&=8191,Z+=oe*(5*f)+C*(5*p)+V*(5*y)+q*(5*h)+Q*(5*u),R+=Z>>>13,Z&=8191;let N=R+M*u+H*c+re*l+J*d+z*s;R=N>>>13,N&=8191,N+=oe*(5*g)+C*(5*f)+V*(5*p)+q*(5*y)+Q*(5*h),R+=N>>>13,N&=8191;let W=R+M*h+H*u+re*c+J*l+z*d;R=W>>>13,W&=8191,W+=oe*s+C*(5*g)+V*(5*f)+q*(5*p)+Q*(5*y),R+=W>>>13,W&=8191;let O=R+M*y+H*h+re*u+J*c+z*l;R=O>>>13,O&=8191,O+=oe*d+C*s+V*(5*g)+q*(5*f)+Q*(5*p),R+=O>>>13,O&=8191;let F=R+M*p+H*y+re*h+J*u+z*c;R=F>>>13,F&=8191,F+=oe*l+C*d+V*s+q*(5*g)+Q*(5*f),R+=F>>>13,F&=8191;let Y=R+M*f+H*p+re*y+J*h+z*u;R=Y>>>13,Y&=8191,Y+=oe*c+C*l+V*d+q*s+Q*(5*g),R+=Y>>>13,Y&=8191;let ee=R+M*g+H*f+re*p+J*y+z*h;R=ee>>>13,ee&=8191,ee+=oe*u+C*c+V*l+q*d+Q*s,R+=ee>>>13,ee&=8191,R=(R<<2)+R|0,R=R+B|0,B=R&8191,R=R>>>13,D+=R,a[0]=B,a[1]=D,a[2]=G,a[3]=Z,a[4]=N,a[5]=W,a[6]=O,a[7]=F,a[8]=Y,a[9]=ee}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=i,i=e[s]>>>13,e[s]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=e[s]+i,i=n[s]>>>13,n[s]&=8191;n[9]-=8192;let a=(i^1)-1;for(let s=0;s<10;s++)n[s]&=a;a=~a;for(let s=0;s<10;s++)e[s]=e[s]&a|n[s];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let s=1;s<8;s++)o=(e[s]+r[s]|0)+(o>>>16)|0,e[s]=o&65535}update(e){qk(this);const{buffer:r,blockLen:n}=this;e=u2(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o===n){for(;n<=i-a;a+=n)this.process(e,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){qk(this),Qce(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let a=0;for(let o=0;o<8;o++)e[a++]=n[o]>>>0,e[a++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function tde(t){const e=(n,i)=>t(i).update(u2(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}tde(t=>new ede(t));const rde=V$("expand 16-byte k"),nde=V$("expand 32-byte k");BC(rde);BC(nde);function ps(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function MC({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");const n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(f2))!==null&&r!==void 0?r:[]),Object.keys(ly).forEach(i=>{var a,o;n.push(...(o=(a=t[i])===null||a===void 0?void 0:a.filter(f2))!==null&&o!==void 0?o:[])}),n}function ide({didDocument:t}){const r=MC({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function ode({didDocument:t,methodId:e}){const r=[];return Object.keys(ly).forEach(n=>{if(Array.isArray(t[n])){const i=t[n],a=ps(e);i.some(s=>{const d=ps(s)===a,l=f2(s)&&ps(s.id)===a;return d||l})&&r.push(n)}}),r}function f2(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function LC({keyBytes:t,multicodecCode:e,multicodecName:r}){const n=rn.addPrefix({code:e,data:t,name:r}),i=ze.uint8Array(n).toBase58Btc();return ze.base58Btc(i).toMultibase()}function Kk({multibaseKeyId:t}){try{const e=ze.multibase(t).toBase58Btc(),r=ze.base58Btc(e).toUint8Array(),{code:n,data:i,name:a}=rn.removePrefix({prefixedData:r});return{keyBytes:i,multicodecCode:n,multicodecName:a}}catch{throw new Xe(Ye.InvalidDid,`Invalid multibase identifier: ${t}`)}}var np=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class la{constructor({uri:e,document:r,metadata:n,keyManager:i}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=i}export(){return np(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);const i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),a=yield this.keyManager.exportKey({keyUri:i});r.push(Object.assign({},a))}e.privateKeys=r}return e})}getSigner(e){return np(this,void 0,void 0,function*(){var r;const n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(d=>{var l,c;return ps(d.id)===((l=ps(e?.methodId))!==null&&l!==void 0?l:ps((c=this.document.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(n&&n.publicKeyJwk))throw new Xe(Ye.InternalError,"A verification method intended for signing could not be determined from the DID Document");const i=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),a=yield this.keyManager.getPublicKey({keyUri:i}),o=this.keyManager;return{algorithm:Gce(a),keyId:n.id,sign(d){return np(this,arguments,void 0,function*({data:l}){return yield o.sign({data:l,keyUri:i})})},verify(d){return np(this,arguments,void 0,function*({data:l,signature:c}){return yield o.verify({data:l,key:a,signature:c})})}}})}static import(e){return np(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mc}){var i;const a=MC({didDocument:r.document});if(a.length===0)throw new Xe(Ye.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let s of(i=r.privateKeys)!==null&&i!==void 0?i:[])yield n.importKey({key:s});for(let s of a){if(!s.publicKeyJwk)throw new Error(`Verification method '${s.id}' does not contain a public key in JWK format`);const d=yield n.getKeyUri({key:s.publicKeyJwk});yield n.getPublicKey({keyUri:d})}return new la({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}}var Vk=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class nm{static getSigningMethod(e){return Vk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return Vk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}}var _n=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Hk=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Gk="https://diddht.tbddev.org",sde=0,Yc=7200,Ng=";",Ei=",";var h2;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(h2||(h2={}));var xi;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(xi||(xi={}));var p2;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(p2||(p2={}));const UC={Ed25519:xi.Ed25519,ES256K:xi.secp256k1,ES256:xi.secp256r1,"P-256":xi.secp256r1,secp256k1:xi.secp256k1,secp256r1:xi.secp256r1,X25519:xi.X25519},Wk={[xi.Ed25519]:"Ed25519",[xi.secp256k1]:"ES256K",[xi.secp256r1]:"ES256",[xi.X25519]:"ECDH-ES+A256KW"};class mu extends nm{static create(){return _n(this,arguments,void 0,function*({keyManager:e=new mc,options:r={}}={}){var n,i,a,o,s,d,l,c,u,h,y;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in UC)))throw new Error("One or more verification method algorithms are not supported");const p=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(S=>"id"in S).map(S=>S.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((a=r.services)===null||a===void 0)&&a.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const f=yield e.generateKey({algorithm:"Ed25519"}),g=yield e.getPublicKey({keyUri:f}),v=yield Jr.identityKeyToIdentifier({identityKey:g}),b=Object.assign(Object.assign({id:v},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),m=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];m?.some(S=>{var T;return((T=S.id)===null||T===void 0?void 0:T.split("#").pop())==="0"})||m.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const S of m){const T=S.id&&S.id.split("#").pop()==="0"?f:yield e.generateKey({algorithm:S.algorithm}),x=yield e.getPublicKey({keyUri:T});let I=(d=(s=S.id)!==null&&s!==void 0?s:x.kid)!==null&&d!==void 0?d:yield tr({jwk:x});I=`${v}#${ps(I)}`,(l=b.verificationMethod)!==null&&l!==void 0||(b.verificationMethod=[]),b.verificationMethod.push({id:I,type:"JsonWebKey",controller:(c=S.controller)!==null&&c!==void 0?c:v,publicKeyJwk:x});for(const M of(u=S.purposes)!==null&&u!==void 0?u:[])b[M]||(b[M]=[]),b[M].push(I)}(h=r.services)===null||h===void 0||h.forEach(S=>{var T;(T=b.service)!==null&&T!==void 0||(b.service=[]),S.id=`${v}#${S.id.split("#").pop()}`,b.service.push(S)});const w=new la({uri:v,document:b,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((y=r.publish)!==null&&y!==void 0)||y){const S=yield mu.publish({did:w,gatewayUri:r.gatewayUri});w.metadata=S.didDocumentMetadata}return w})}static import(e){return _n(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mc}){var i;const a=Ft.parse(r.uri);if(a?.method!==mu.methodName)throw new Xe(Ye.MethodNotSupported,"Method not supported");const o=yield la.import({portableDid:r,keyManager:n});if(!(!((i=o.document.verificationMethod)===null||i===void 0)&&i.some(s=>{var d;return((d=s.id)===null||d===void 0?void 0:d.split("#").pop())==="0"})))throw new Xe(Ye.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return _n(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var i;const a=Ft.parse(r.id);if(a&&a.method!==this.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${a.method}`);const o=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(s=>{var d,l;return ps(s.id)===((d=ps(n))!==null&&d!==void 0?d:ps((l=r.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(o&&o.publicKeyJwk))throw new Xe(Ye.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return _n(this,arguments,void 0,function*({did:r,gatewayUri:n=Gk}){return yield za.put({did:r,gatewayUri:n})})}static resolve(e){return _n(this,arguments,void 0,function*(r,n={}){var i;const a=(i=n?.gatewayUri)!==null&&i!==void 0?i:Gk;try{yield Jr.identifierToIdentityKey({didUri:r});const{didDocument:o,didDocumentMetadata:s}=yield za.get({didUri:r,gatewayUri:a});return Object.assign(Object.assign({},Zn),{didDocument:o,didDocumentMetadata:s})}catch(o){if(!(o instanceof Xe))throw new Error(o);return Object.assign(Object.assign({},Zn),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}}mu.methodName="dht";class za{static get(e){return _n(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){const i=Jr.identifierToIdentityKeyBytes({didUri:r}),a=yield za.pkarrGet({gatewayUri:n,publicKeyBytes:i}),o=yield Jr.parseBep44GetMessage({bep44Message:a}),s=yield za.fromDnsPacket({didUri:r,dnsPacket:o});return s.didDocumentMetadata.versionId=a.seq.toString(),s})}static put(e){return _n(this,arguments,void 0,function*({did:r,gatewayUri:n}){const i=yield za.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),a=yield Jr.createBep44PutMessage({dnsPacket:i,publicKeyBytes:Jr.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield za.pkarrPut({gatewayUri:n,bep44Message:a});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:a.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return _n(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){const i=ze.uint8Array(n).toBase32Z(),a=new URL(i,r).href;let o;try{if(o=yield fetch(a,{method:"GET"}),!o.ok)throw new Xe(Ye.NotFound,`Pkarr record not found for: ${i}`)}catch(l){throw l instanceof Xe?l:new Xe(Ye.InternalError,`Failed to fetch Pkarr record: ${l.message}`)}const s=yield o.arrayBuffer();if(!s)throw new Xe(Ye.NotFound,`Pkarr record not found for: ${i}`);if(s.byteLength<72)throw new Xe(Ye.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${s.byteLength}`);if(s.byteLength>1072)throw new Xe(Ye.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${s.byteLength}`);return{k:n,seq:Number(new DataView(s).getBigUint64(64)),sig:new Uint8Array(s,0,64),v:new Uint8Array(s,72)}})}static pkarrPut(e){return _n(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){const i=ze.uint8Array(n.k).toBase32Z(),a=new URL(i,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let s;try{s=yield fetch(a,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(d){throw new Xe(Ye.InternalError,`Failed to put Pkarr record for identifier ${i}: ${d.message}`)}return s.ok})}static fromDnsPacket(e){return _n(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var i,a,o;const s={id:r},d={published:!0},l=new Map;for(const c of(i=n?.answers)!==null&&i!==void 0?i:[]){if(c.type!=="TXT")continue;const u=c.name.split(".")[0].substring(1);switch(!0){case u.startsWith("aka"):{const h=Jr.parseTxtDataToString(c.data);s.alsoKnownAs=h.split(Ei);break}case u.startsWith("cnt"):{const h=Jr.parseTxtDataToString(c.data);s.controller=h.includes(Ei)?h.split(Ei):h;break}case u.startsWith("k"):{const{id:h,t:y,k:p,c:f,a:g}=Jr.parseTxtDataToObject(c.data),v=ze.base64Url(p).toUint8Array(),b=xi[Number(y)];let m=yield Jr.keyConverter(b).bytesToPublicKey({publicKeyBytes:v});m.alg=g||Wk[Number(y)];const w=u==="k0"?"0":h!==void 0?h:yield tr({jwk:m});(a=s.verificationMethod)!==null&&a!==void 0||(s.verificationMethod=[]);const S=`${r}#${w}`;s.verificationMethod.push({id:S,type:"JsonWebKey",controller:f??r,publicKeyJwk:m}),l.set(u,S);break}case u.startsWith("s"):{const h=Jr.parseTxtDataToObject(c.data),{id:y,t:p,se:f}=h,g=Hk(h,["id","t","se"]),v=f.includes(Ei)?f.split(Ei):[f],b=Object.fromEntries(Object.entries(g).map(([m,w])=>[m,w.includes(Ei)?w.split(Ei):w]));(o=s.service)!==null&&o!==void 0||(s.service=[]),s.service.push(Object.assign(Object.assign({},b),{id:`${r}#${y}`,type:p,serviceEndpoint:v}));break}case u.startsWith("typ"):{const{id:h}=Jr.parseTxtDataToObject(c.data);d.types=h.split(Ei).map(y=>Number(y));break}case u.startsWith("did"):{const h=b=>b.split(Ei).map(m=>l.get(m)).filter(m=>typeof m=="string"),{auth:y,asm:p,del:f,inv:g,agm:v}=Jr.parseTxtDataToObject(c.data);y&&(s.authentication=h(y)),p&&(s.assertionMethod=h(p)),f&&(s.capabilityDelegation=h(f)),g&&(s.capabilityInvocation=h(g)),v&&(s.keyAgreement=h(v));break}}}return{didDocument:s,didDocumentMetadata:d,didResolutionMetadata:{}}})}static toDnsPacket(e){return _n(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:i,previousDidProof:a}){var o,s,d,l,c;const u=[],h=[],y=new Map,p=[],f=[];if(a!==void 0){const{signature:b,previousDid:m}=a;yield Jr.validatePreviousDidProof({newDid:r.id,previousDidProof:a}),u.push({type:"TXT",name:"_prv._did.",ttl:Yc,data:`id=${m};s=${b}`})}if(r.alsoKnownAs&&u.push({type:"TXT",name:"_aka._did.",ttl:Yc,data:r.alsoKnownAs.join(Ei)}),r.controller){const b=Array.isArray(r.controller)?r.controller.join(Ei):r.controller;u.push({type:"TXT",name:"_cnt._did.",ttl:Yc,data:b})}for(const[b,m]of(s=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&s!==void 0?s:[]){const w=`k${b}`;f.push(w);let S=m.id.split("#").pop();y.set(S,w);const T=m.publicKeyJwk;if(!(T?.crv&&T.crv in UC))throw new Xe(Ye.InvalidPublicKeyType,`Verification method '${m.id}' contains an unsupported key type: ${(d=T?.crv)!==null&&d!==void 0?d:"undefined"}`);const x=xi[T.crv],I=yield Jr.keyConverter(T.crv).publicKeyToBytes({publicKey:T}),M=ze.uint8Array(I).toBase64Url(),H=[`t=${x}`,`k=${M}`];S!=="0"&&(yield tr({jwk:T}))!==S&&H.unshift(`id=${S}`),T.alg!==Wk[x]&&H.push(`a=${T.alg}`),m.controller!==r.id&&H.push(`c=${m.controller}`),u.push({type:"TXT",name:`_${w}._did.`,ttl:Yc,data:H.join(Ng)})}(l=r.service)===null||l===void 0||l.forEach((b,m)=>{const w=`s${m}`;p.push(w);let{id:S,type:T,serviceEndpoint:x}=b,I=Hk(b,["id","type","serviceEndpoint"]);S=ps(S),x=Array.isArray(x)?x.join(","):x;const H=Object.entries(Object.assign({id:S,t:T,se:x},I)).map(([J,z])=>`${J}=${z}`).join(Ng),re=Jr.chunkDataIfNeeded(H);u.push({type:"TXT",name:`_${w}._did.`,ttl:Yc,data:re})});const g=[`v=${sde}`];if(f.length&&g.push(`vm=${f.join(Ei)}`),Object.keys(ly).forEach(b=>{var m;const w=(m=r[b])===null||m===void 0?void 0:m.map(S=>y.get(S.split("#").pop()));if(w){const S=p2[b];g.push(`${S}=${w.join(Ei)}`)}}),p.length&&g.push(`svc=${p.join(Ei)}`),!((c=n.types)===null||c===void 0)&&c.length){const m=n.types.map(w=>typeof w=="string"?h2[w]:w);u.push({type:"TXT",name:"_typ._did.",ttl:Yc,data:`id=${m.join(Ei)}`})}u.push({type:"TXT",name:"_did."+za.getUniqueDidSuffix(r.id)+".",ttl:Yc,data:g.join(Ng)});for(const b of i||[])h.push({type:"NS",name:"_did."+za.getUniqueDidSuffix(r.id)+".",ttl:Yc,data:b+"."});return{id:0,type:"response",flags:Wae,answers:[...u,...h]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}}class Jr{static createBep44PutMessage(e){return _n(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:i}){const a=Math.ceil(Date.now()/1e3),o=i2(r),s=uk.encode({seq:a,v:o}).subarray(1,-1);if(s.length>1e3)throw new Xe(Ye.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${s.length} bytes`);const d=yield i.sign({data:s});return{k:n,seq:a,sig:d,v:o}})}static identifierToIdentityKey(e){return _n(this,arguments,void 0,function*({didUri:r}){let n=Jr.identifierToIdentityKeyBytes({didUri:r});return yield Br.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){const r=Ft.parse(e);if(!r)throw new Xe(Ye.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==mu.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ze.base32Z(r.id).toUint8Array()}catch{throw new Xe(Ye.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Xe(Ye.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return _n(this,arguments,void 0,function*({identityKey:r}){const n=yield Br.publicKeyToBytes({publicKey:r}),i=ze.uint8Array(n).toBase32Z();return`did:${mu.methodName}:${i}`})}static keyConverter(e){const n={Ed25519:Br,"P-256":{publicKeyToBytes:i=>_n(this,[i],void 0,function*({publicKey:a}){const o=yield Nr.publicKeyToBytes({publicKey:a});return yield Nr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Nr.bytesToPublicKey,privateKeyToBytes:Nr.privateKeyToBytes,bytesToPrivateKey:Nr.bytesToPrivateKey},secp256k1:{publicKeyToBytes:i=>_n(this,[i],void 0,function*({publicKey:a}){const o=yield Pr.publicKeyToBytes({publicKey:a});return yield Pr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Pr.bytesToPublicKey,privateKeyToBytes:Pr.privateKeyToBytes,bytesToPrivateKey:Pr.bytesToPrivateKey},X25519:Bl}[e];if(!n)throw new Xe(Ye.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return _n(this,arguments,void 0,function*({bep44Message:r}){const n=yield Br.bytesToPublicKey({publicKeyBytes:r.k}),i=uk.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Br.verify({key:n,signature:r.sig,data:i})))throw new Xe(Ye.InvalidSignature,"Invalid signature for DHT BEP44 message");return Yae(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(Ng).reduce((r,n)=>{const[i,a]=n.split("=");return r[i]=a,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return ze.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Xe(Ye.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return _n(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){const i=yield Jr.identifierToIdentityKey({didUri:n.previousDid}),a=Jr.identifierToIdentityKeyBytes({didUri:r}),o=ze.base64Url(n.signature).toUint8Array();if(!(yield Br.verify({key:i,data:a,signature:o})))throw new Xe(Ye.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;const r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}}var dd=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Fs;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Fs||(Fs={}));const ade={Ed25519:Fs.Ed25519,ES256K:Fs.secp256k1,ES256:Fs.secp256r1,"P-256":Fs.secp256r1,secp256k1:Fs.secp256k1,secp256r1:Fs.secp256r1},Yk="https://ion.tbd.engineering";class cf extends nm{static create(){return dd(this,arguments,void 0,function*({keyManager:e=new mc,options:r={}}={}){var n,i,a,o,s,d,l;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(S=>!(S.algorithm in ade)))throw new Error("One or more verification method algorithms are not supported");const c=(i=r.verificationMethods)===null||i===void 0?void 0:i.filter(S=>"id"in S).map(S=>S.id);if(c&&c.length!==new Set(c).size)throw new Error("One or more verification method IDs are not unique");if(!((a=r.services)===null||a===void 0)&&a.some(S=>!S.id||!S.type||!S.serviceEndpoint))throw new Error("One or more services are missing required properties");const u={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(const S of(o=r.verificationMethods)!==null&&o!==void 0?o:[u]){const T=yield e.generateKey({algorithm:S.algorithm}),x=yield e.getPublicKey({keyUri:T});h.push({id:S.id,publicKeyJwk:x,purposes:(s=S.purposes)!==null&&s!==void 0?s:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const y=yield e.generateKey({algorithm:Fs.secp256k1}),p=yield e.getPublicKey({keyUri:y}),f=yield e.generateKey({algorithm:Fs.secp256k1}),g=yield e.getPublicKey({keyUri:f}),v=yield Fo.computeLongFormDidUri({recoveryKey:p,updateKey:g,services:(d=r.services)!==null&&d!==void 0?d:[],verificationMethods:h}),{didDocument:b,didResolutionMetadata:m}=yield cf.resolve(v,{gatewayUri:r.gatewayUri});if(b===null)throw new Error(`Unable to resolve DID during creation: ${m?.error}`);const w=new la({uri:v,document:b,metadata:{published:!1,canonicalId:v.split(":",3).join(":"),recoveryKey:p,updateKey:g},keyManager:e});if(!((l=r.publish)!==null&&l!==void 0)||l){const S=yield cf.publish({did:w,gatewayUri:r.gatewayUri});w.metadata=S.didDocumentMetadata}return w})}static getSigningMethod(e){return dd(this,arguments,void 0,function*({didDocument:r,methodId:n}){var i;const a=Ft.parse(r.id);if(a&&a.method!==this.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${a.method}`);const o=(i=r.verificationMethod)===null||i===void 0?void 0:i.find(s=>{var d;return s.id===(n??((d=r.assertionMethod)===null||d===void 0?void 0:d[0]))});if(!(o&&o.publicKeyJwk))throw new Xe(Ye.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return dd(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mc}){const i=Ft.parse(r.uri);if(i?.method!==cf.methodName)throw new Xe(Ye.MethodNotSupported,"Method not supported");return yield la.import({portableDid:r,keyManager:n})})}static publish(e){return dd(this,arguments,void 0,function*({did:r,gatewayUri:n=Yk}){var i,a,o;const s=(a=(i=r.document.verificationMethod)===null||i===void 0?void 0:i.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:ode({didDocument:r.document,methodId:c.id})})))!==null&&a!==void 0?a:[],d=yield Fo.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:s}),l=yield Fo.constructCreateRequest({ionDocument:d,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{const c=Fo.appendPathToUrl({baseUrl:n,path:"/operations"}),u=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:u.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:Ye.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return dd(this,arguments,void 0,function*(r,n={}){var i,a;const o=Ft.parse(r);if(!o)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==cf.methodName)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"methodNotSupported"}});const s=(i=n?.gatewayUri)!==null&&i!==void 0?i:Yk;try{const d=Fo.appendPathToUrl({baseUrl:s,path:`/identifiers/${r}`}),l=yield fetch(d);if(!l.ok)throw new Xe(Ye.NotFound,`Unable to find DID document for: ${r}`);const{didDocument:c,didDocumentMetadata:u}=yield l.json();return Object.assign(Object.assign(Object.assign({},Zn),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(a=u?.method)===null||a===void 0?void 0:a.published},u)})}catch(d){if(!(d instanceof Xe))throw new Error(d);return Object.assign(Object.assign({},Zn),{didResolutionMetadata:Object.assign({error:d.code},d.message&&{errorMessage:d.message})})}})}}cf.methodName="ion";class Fo{static appendPathToUrl({baseUrl:e,path:r}){const n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return dd(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:i,verificationMethods:a}){const o=yield Fo.createIonDocument({services:i,verificationMethods:a}),s=Fo.normalizeJwk(r),d=Fo.normalizeJwk(n);return yield L$.createLongFormDid({document:o,recoveryKey:s,updateKey:d})})}static constructCreateRequest(e){return dd(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:i}){return yield Li.createCreateRequest({document:r,recoveryKey:Fo.normalizeJwk(n),updateKey:Fo.normalizeJwk(i)})})}static createIonDocument(e){return dd(this,arguments,void 0,function*({services:r,verificationMethods:n}){var i,a;const o=[];for(const l of n){let c=(a=(i=l.id)!==null&&i!==void 0?i:l.publicKeyJwk.kid)!==null&&a!==void 0?a:yield tr({jwk:l.publicKeyJwk});c=`${c.split("#").pop()}`;const u={id:c,publicKeyJwk:Fo.normalizeJwk(l.publicKeyJwk),purposes:l.purposes,type:"JsonWebKey2020"};o.push(u)}const s=r.map(l=>Object.assign(Object.assign({},l),{id:`${l.id.split("#").pop()}`}));return{publicKeys:o,services:s}})}static normalizeJwk(e){const r=e.kty;let n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}}var ig=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class df extends nm{static create(){return ig(this,arguments,void 0,function*({keyManager:e=new mc,options:r={}}={}){var n,i,a,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const s=(o=(n=r.algorithm)!==null&&n!==void 0?n:(a=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.algorithm)!==null&&o!==void 0?o:"Ed25519",d=yield e.generateKey({algorithm:s}),l=yield e.getPublicKey({keyUri:d}),c=ze.object(l).toBase64Url(),u=`did:${df.methodName}:${c}`,y=(yield df.resolve(u)).didDocument;return new la({uri:u,document:y,metadata:{},keyManager:e})})}static getSigningMethod(e){return ig(this,arguments,void 0,function*({didDocument:r}){var n;const i=Ft.parse(r.id);if(i&&i.method!==this.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${i.method}`);const[a]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(a&&a.publicKeyJwk))throw new Xe(Ye.InternalError,"A verification method intended for signing could not be determined from the DID Document");return a})}static import(e){return ig(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mc}){const i=Ft.parse(r.uri);if(i?.method!==df.methodName)throw new Xe(Ye.MethodNotSupported,"Method not supported");const a=yield la.import({portableDid:r,keyManager:n});if(a.document.verificationMethod.length!==1)throw new Xe(Ye.InvalidDidDocument,"DID document must contain exactly one verification method");return a})}static resolve(e,r){return ig(this,void 0,void 0,function*(){const n=Ft.parse(e);let i;try{i=ze.base64Url(n.id).toObject()}catch{}if(!n||!i)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==df.methodName)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"methodNotSupported"}});const a={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${a.id}#0`;switch(a.verificationMethod=[{id:o,type:"JsonWebKey",controller:a.id,publicKeyJwk:i}],a.authentication=[o],a.assertionMethod=[o],a.capabilityInvocation=[o],a.capabilityDelegation=[o],a.keyAgreement=[o],i.use){case"sig":{delete a.keyAgreement;break}case"enc":{delete a.authentication,delete a.assertionMethod,delete a.capabilityInvocation,delete a.capabilityDelegation;break}}return Object.assign(Object.assign({},Zn),{didDocument:a})})}}df.methodName="jwk";var cs=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})},Na;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Na||(Na={}));const A1={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},cde={Ed25519:Na.Ed25519,ES256K:Na.secp256k1,ES256:Na.secp256r1,"P-256":Na.secp256r1,secp256k1:Na.secp256k1,secp256r1:Na.secp256r1,X25519:Na.X25519};class Bs extends nm{static create(){return cs(this,arguments,void 0,function*({keyManager:e=new mc,options:r={}}={}){var n,i,a,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const s=(o=(n=r.algorithm)!==null&&n!==void 0?n:(a=(i=r.verificationMethods)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.algorithm)!==null&&o!==void 0?o:"Ed25519",d=yield e.generateKey({algorithm:s}),l=yield e.getPublicKey({keyUri:d}),c=yield bn.publicKeyToMultibaseId({publicKey:l}),u=`did:${Bs.methodName}:${c}`,y=(yield Bs.resolve(u,r)).didDocument;return new la({uri:u,document:y,metadata:{},keyManager:e})})}static getSigningMethod(e){return cs(this,arguments,void 0,function*({didDocument:r}){var n;const i=Ft.parse(r.id);if(i&&i.method!==this.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${i.method}`);const[a]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(s=>s.id===a);if(!(o&&o.publicKeyJwk))throw new Xe(Ye.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return cs(this,arguments,void 0,function*({portableDid:r,keyManager:n=new mc}){const i=Ft.parse(r.uri);if(i?.method!==Bs.methodName)throw new Xe(Ye.MethodNotSupported,"Method not supported");const a=yield la.import({portableDid:r,keyManager:n});if(a.document.verificationMethod.length!==1)throw new Xe(Ye.InvalidDidDocument,"DID document must contain exactly one verification method");return a})}static resolve(e,r){return cs(this,void 0,void 0,function*(){try{const n=yield Bs.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},Zn),{didDocument:n})}catch(n){if(!(n instanceof Xe))throw new Error(n);return Object.assign(Object.assign({},Zn),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return cs(this,arguments,void 0,function*({didUri:r,options:n={}}){const{defaultContext:i="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:a=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:s="JsonWebKey2020"}=n,d={id:""},l=Ft.parse(r);if(!l)throw new Xe(Ye.InvalidDid,`Invalid DID URI: ${r}`);const c=l.id;if(l.method!==Bs.methodName)throw new Xe(Ye.MethodNotSupported,`Method not supported: ${l.method}`);if(!Bs.validateIdentifier(l))throw new Xe(Ye.InvalidDid,`Invalid DID URI: ${r}`);const u=yield Bs.createSignatureMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:s}});if(d.id=l.uri,d.verificationMethod=[u],d.authentication=[u.id],d.assertionMethod=[u.id],d.capabilityInvocation=[u.id],d.capabilityDelegation=[u.id],a===!0){const p=s==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",f=yield this.createEncryptionMethod({didUri:r,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:p}});d.verificationMethod.push(f),d.keyAgreement=[f.id]}const h=[i];return ide({didDocument:d}).forEach(p=>{const f=A1[p];h.push(f)}),d["@context"]=h,d})}static createEncryptionMethod(e){return cs(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){const{enableExperimentalPublicKeyTypes:a,publicKeyFormat:o}=i,s={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:l}=yield Bs.deriveEncryptionKey({multibaseValue:n}),c=d.byteLength,u=bn.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(c!==u)throw new Xe(Ye.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${u}`);const h=LC({keyBytes:d,multicodecCode:l});s.id=`${r}#${h}`;try{new URL(s.id)}catch{throw new Xe(Ye.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in A1))throw new Xe(Ye.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(a===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new Xe(Ye.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(s.type=o,s.controller=r,o==="X25519KeyAgreementKey2020"&&(s.publicKeyMultibase=h),o==="JsonWebKey2020"){const{crv:p}=yield bn.multicodecToJwk({code:l});s.publicKeyJwk=yield bn.keyConverter(p).bytesToPublicKey({publicKeyBytes:d})}return s})}static createSignatureMethod(e){return cs(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:i}){const{enableExperimentalPublicKeyTypes:a,publicKeyFormat:o}=i,s={id:"",type:"",controller:""},{keyBytes:d,multicodecCode:l,multicodecName:c}=Kk({multibaseKeyId:n}),u=d.byteLength,h=bn.MULTICODEC_PUBLIC_KEY_LENGTH[l];if(u!==h)throw new Xe(Ye.InvalidPublicKeyLength,`Expected ${u} bytes. Actual: ${h}`);let y=!1;switch(c){case"secp256k1-pub":y=yield Pr.validatePublicKey({publicKeyBytes:d});break;case"ed25519-pub":y=yield Br.validatePublicKey({publicKeyBytes:d});break;case"x25519-pub":y=!0;break}if(!y)throw new Xe(Ye.InvalidPublicKey,"Invalid public key detected.");s.id=`${r}#${n}`;try{new URL(s.id)}catch{throw new Xe(Ye.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in A1))throw new Xe(Ye.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(a===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new Xe(Ye.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(s.type=o,s.controller=r,o==="Ed25519VerificationKey2020"&&(s.publicKeyMultibase=n),o==="JsonWebKey2020"){const{crv:f}=yield bn.multicodecToJwk({code:l});s.publicKeyJwk=yield bn.keyConverter(f).bytesToPublicKey({publicKeyBytes:d})}return s})}static deriveEncryptionKey(e){return cs(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:i,multicodecCode:a}=Kk({multibaseKeyId:r});if(a===237){const o=yield bn.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:i}),s=yield Br.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield bn.keyConverter("Ed25519").publicKeyToBytes({publicKey:s}),multicodecCode:236}}return n})}static validateIdentifier(e){const{method:r,id:n}=e,[i]=e.uri.split(":",1);return i==="did"&&r==="key"&&Number("1")>0&&t2(n)==="String"&&n.startsWith("z")}}Bs.methodName="key";class bn{static jwkToMulticodec(e){return cs(this,arguments,void 0,function*({jwk:r}){const n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));const i=n.join(":"),a=bn.JWK_TO_MULTICODEC[i];if(a===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${i}'`);return{code:rn.getCodeFromName({name:a}),name:a}})}static keyCompressor(e){const n={"P-256":Nr.compressPublicKey,secp256k1:Pr.compressPublicKey}[e];if(!n)throw new Xe(Ye.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){const n={Ed25519:Br,"P-256":Nr,secp256k1:Pr,X25519:Bl}[e];if(!n)throw new Xe(Ye.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return cs(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?rn.getNameFromCode({code:r}):n;const i=n,a=bn.MULTICODEC_TO_JWK[i];if(a===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},a)})}static publicKeyToMultibaseId(e){return cs(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in cde))throw new Xe(Ye.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let i=yield bn.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(i=yield bn.keyCompressor(r.crv)({publicKeyBytes:i}));const{name:a}=yield bn.jwkToMulticodec({jwk:r});return LC({keyBytes:i,multicodecName:a})})}}bn.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};bn.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};bn.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var dde=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class bb extends nm{static resolve(e,r){return dde(this,void 0,void 0,function*(){const n=Ft.parse(e);if(!n)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==bb.methodName)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"methodNotSupported"}});let i=`https://${n.id.replace(/:/g,"/")}`;i=decodeURIComponent(i);const a=n.id.includes(":")?`${i}/did.json`:`${i}/.well-known/did.json`;try{const o=yield fetch(a);if(!o.ok)throw new Error("HTTP error status code returned");const s=yield o.json();return Object.assign(Object.assign({},Zn),{didDocument:s})}catch{return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:"notFound"}})}})}}bb.methodName="web";const lde={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var Zk=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,e||[])).next())})};class ude{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||lde;for(const n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return Zk(this,void 0,void 0,function*(){const n=Ft.parse(e);if(!n)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:Ye.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});const i=this.didResolvers.get(n.method);if(!i)return Object.assign(Object.assign({},Zn),{didResolutionMetadata:{error:Ye.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});const a=yield this.cache.get(n.uri);if(a)return a;{const o=yield i.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return Zk(this,void 0,void 0,function*(){const n=Ft.parse(e);if(!n)return{dereferencingMetadata:{error:Ye.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:i,didResolutionMetadata:a,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!i)return{dereferencingMetadata:{error:a.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:i,contentMetadata:o};const{service:s=[],verificationMethod:d=[]}=i,l=new Set([e,n.fragment,`#${n.fragment}`]);let c;for(let u of d)if(l.has(u.id)){c=u;break}for(let u of s)if(l.has(u.id)){c=u;break}return c?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:c,contentMetadata:a}:{dereferencingMetadata:{error:Ye.NotFound},contentStream:null,contentMetadata:{}}})}}var Md=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function d(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){c.done?a(c.value):i(c.value).then(s,d)}l((n=n.apply(t,[])).next())})};const FC=new ude({didResolvers:[mu,bb]}),y2=/^https?:\/\/dweb\/([^/]+)\/?(.*)?$/,zC=/^http:/,V0=/\/$/;function fde(){try{return new Function("return import.meta")()}catch{return}}function qC(t){var e,r;return Md(this,void 0,void 0,function*(){const{didDocument:n}=yield FC.resolve(t);let i=(r=(e=n?.service)===null||e===void 0?void 0:e.find(a=>a.type==="DecentralizedWebNode"))===null||r===void 0?void 0:r.serviceEndpoint;return(Array.isArray(i)?i:[i]).filter(a=>a.startsWith("http"))})}function hde(t,e,r,n){return Md(this,void 0,void 0,function*(){const i=t.request.url.replace(zC,"https:").replace(V0,""),a=yield caches.open("drl"),o=yield a.match(i);if(o){if(!navigator.onLine)return o;const s=yield n?.onCacheCheck(t,i);if(s){const d=o.headers.get("dwn-cache-time");if(d&&Date.now()<Number(d)+(Number(s.ttl)||0))return o}}try{if(r)return yield pde(t,e,i,r,a,n);{const s=yield FC.resolve(e);return new Response(JSON.stringify(s),{status:200,headers:{"Content-Type":"application/json"}})}}catch(s){return s instanceof Response?s:(console.log(`Error in DID URL fetch: ${s}`),new Response("DID URL fetch error",{status:500}))}})}function pde(t,e,r,n,i,a){return Md(this,void 0,void 0,function*(){const o=yield qC(e);if(!o?.length)throw new Response("DWeb Node resolution failed: no valid endpoints found.",{status:530});for(const s of o)try{const d=`${s.replace(V0,"")}/${e}/${n}`,l=yield fetch(d,{headers:t.request.headers});return l.ok?((yield a?.onCacheCheck(t,r))&&yde(r,d,l,i),l):(console.log(`DWN endpoint error: ${l.status}`),new Response("DWeb Node request failed",{status:l.status}))}catch(d){return console.log(`DWN endpoint error: ${d}`),new Response("DWeb Node request failed: "+d,{status:500})}})}function yde(t,e,r,n){return Md(this,void 0,void 0,function*(){const i=r.clone(),a=new Headers(i.headers);a.append("dwn-cache-time",Date.now().toString()),a.append("dwn-composed-url",e);const o=new Response(i.body,{headers:a});n.put(t,o)})}function mde(t={}){var e,r,n;return Md(this,void 0,void 0,function*(){const i=self;try{if(typeof ServiceWorkerGlobalScope<"u"&&i instanceof ServiceWorkerGlobalScope)i.skipWaiting(),i.addEventListener("activate",a=>{a.waitUntil(i.clients.claim())}),i.addEventListener("fetch",a=>{const o=a.request.url.match(y2);o&&a.respondWith(hde(a,o[1],o[2],t))});else if(!((e=globalThis?.navigator)===null||e===void 0)&&e.serviceWorker){if(!(yield navigator.serviceWorker.getRegistration("/"))){const o=t.path||(globalThis.document?(r=document?.currentScript)===null||r===void 0?void 0:r.src:(n=fde())===null||n===void 0?void 0:n.url);o&&navigator.serviceWorker.register(o,{type:"module"}).catch(s=>{console.error("DWeb networking feature installation failed: ",s)})}}else throw new Error("DWeb networking features are not available for install in this environment")}catch(a){console.error("Error in installing networking features:",a)}})}const KC=`
  .drl-loading-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    color: #fff;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    z-index: 1000000;
  }

  .drl-loading-overlay > div {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .drl-loading-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
  }

    .drl-loading-spinner div {
      position: relative;
      width: 2em;
      height: 2em;
      margin: 0.1em 0.25em 0 0;
    }
    .drl-loading-spinner div::after,
    .drl-loading-spinner div::before {
      content: '';  
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 0.1em solid #FFF;
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      animation: drl-loading-spinner 2s linear infinite;
    }
    .drl-loading-spinner div::after {
      animation-delay: 1s;
    }

  .drl-loading-overlay span {
    --text-opacity: 2;
    display: flex;
    align-items: center;
    margin: 2em auto 0;
    padding: 0.2em 0.75em 0.25em;
    text-align: center;
    border-radius: 5em;
    background: rgba(255 255 255 / 8%);
    opacity: 0.8;
    transition: opacity 0.3s ease;
    cursor: pointer;
  }

    .drl-loading-overlay span:focus {
      opacity: 1;
    }

    .drl-loading-overlay span:hover {
      opacity: 1;
    }

    .drl-loading-overlay span::before {
      content: "✕ ";
      margin: 0 0.4em 0 0;
      color: red;
      font-size: 65%;
      font-weight: bold;
    }

    .drl-loading-overlay span::after {
      content: "stop";
      display: block;
      font-size: 60%;
      line-height: 0;
      color: rgba(255 255 255 / 60%);
    }

    .drl-loading-overlay.new-tab-overlay span::after {
      content: "close";
    }
  
  @keyframes drl-loading-spinner {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 0;
    }
  }
`,gde=`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading DRL...</title>
  <style>
    html, body {
      background-color: #151518;
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    ${KC}
  </style>
</head>
<body>
  <div class="drl-loading-overlay new-tab-overlay">
    <div class="drl-loading-spinner">
      <div></div>
      Loading DRL
    </div>
    <span onclick="window.close()" tabindex="0"></span>
  </div>
</body>
</html>
`;let Xk=!1;function Qk(){if(Xk)return;const t=document.createElement("style");t.innerHTML=`
    ${KC}

    .drl-loading-overlay {
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    :root[drl-link-loading] .drl-loading-overlay {
      opacity: 1;
      pointer-events: all;
    }
  `,document.head.append(t);let e=document.createElement("div");e.classList.add("drl-loading-overlay"),e.innerHTML=`
    <div class="drl-loading-spinner">
      <div></div>
      Loading DRL
    </div> 
    <span tabindex="0"></span>
  `,e.lastElementChild.addEventListener("click",VC),document.body.prepend(e),Xk=!0}function VC(){document.documentElement.removeAttribute("drl-link-loading"),Bg=null}let Bg,Jk=!1;function wde(){Jk||(document.addEventListener("click",t=>Md(this,void 0,void 0,function*(){let e=t.target.closest("a");if(e){let r=e.href;const n=r.match(y2);if(n){let i=n[1],a=n[2];const o=e.target==="_blank";t.preventDefault();try{let s;o?(s=window.open("","_blank"),s.document.write(gde)):(Bg=a,setTimeout(()=>document.documentElement.setAttribute("drl-link-loading",""),50));const d=yield qC(i);if(!d.length)throw null;let l=`${d[0].replace(V0,"")}/${i}/${a}`;o?s.closed||(s.location.href=l):Bg===a&&(window.location.href=l)}catch{throw Bg===a&&VC(),new Error(`DID endpoint resolution failed for the DRL: ${r}`)}}}})),document.addEventListener("pointercancel",og),document.addEventListener("pointerdown",t=>Md(this,void 0,void 0,function*(){var e;const r=t.composedPath()[0];if(t.pointerType==="mouse"&&t.button===2||t.pointerType==="touch"&&t.isPrimary){if(og(),r&&(!((e=r?.src)===null||e===void 0)&&e.match(y2))){Pl=r,r.__src__=r.src;const n=r.src.replace(zC,"https:").replace(V0,""),o=(yield(yield caches.open("drl")).match(n)).headers.get("dwn-composed-url");o&&(r.src=o),r.addEventListener("pointerup",og,{once:!0})}}else r===Pl&&og()})),Jk=!0)}let Pl;function og(t){return Md(this,void 0,void 0,function*(){t?.type==="pointerup"&&(yield new Promise(e=>requestAnimationFrame(e))),Pl&&(Pl.src=Pl.__src__,delete Pl.__src__,Pl=null)})}function bde(t={}){t.serviceWorker!==!1&&mde(t),typeof window<"u"&&typeof window.document<"u"&&(t.injectStyles!==!1&&(document.readyState!=="loading"?Qk():document.addEventListener("DOMContentLoaded",Qk,{once:!0})),t.links!==!1&&wde())}E4([{"revision":"10b5f88323fdad31bf50c90668d3e84a","url":"apple-touch-icon-180x180.png"},{"revision":null,"url":"assets/icons/0-circle-fill.svg"},{"revision":null,"url":"assets/icons/0-circle.svg"},{"revision":null,"url":"assets/icons/0-square-fill.svg"},{"revision":null,"url":"assets/icons/0-square.svg"},{"revision":null,"url":"assets/icons/1-circle-fill.svg"},{"revision":null,"url":"assets/icons/1-circle.svg"},{"revision":null,"url":"assets/icons/1-square-fill.svg"},{"revision":null,"url":"assets/icons/1-square.svg"},{"revision":null,"url":"assets/icons/123.svg"},{"revision":null,"url":"assets/icons/2-circle-fill.svg"},{"revision":null,"url":"assets/icons/2-circle.svg"},{"revision":null,"url":"assets/icons/2-square-fill.svg"},{"revision":null,"url":"assets/icons/2-square.svg"},{"revision":null,"url":"assets/icons/3-circle-fill.svg"},{"revision":null,"url":"assets/icons/3-circle.svg"},{"revision":null,"url":"assets/icons/3-square-fill.svg"},{"revision":null,"url":"assets/icons/3-square.svg"},{"revision":null,"url":"assets/icons/4-circle-fill.svg"},{"revision":null,"url":"assets/icons/4-circle.svg"},{"revision":null,"url":"assets/icons/4-square-fill.svg"},{"revision":null,"url":"assets/icons/4-square.svg"},{"revision":null,"url":"assets/icons/5-circle-fill.svg"},{"revision":null,"url":"assets/icons/5-circle.svg"},{"revision":null,"url":"assets/icons/5-square-fill.svg"},{"revision":null,"url":"assets/icons/5-square.svg"},{"revision":null,"url":"assets/icons/6-circle-fill.svg"},{"revision":null,"url":"assets/icons/6-circle.svg"},{"revision":null,"url":"assets/icons/6-square-fill.svg"},{"revision":null,"url":"assets/icons/6-square.svg"},{"revision":null,"url":"assets/icons/7-circle-fill.svg"},{"revision":null,"url":"assets/icons/7-circle.svg"},{"revision":null,"url":"assets/icons/7-square-fill.svg"},{"revision":null,"url":"assets/icons/7-square.svg"},{"revision":null,"url":"assets/icons/8-circle-fill.svg"},{"revision":null,"url":"assets/icons/8-circle.svg"},{"revision":null,"url":"assets/icons/8-square-fill.svg"},{"revision":null,"url":"assets/icons/8-square.svg"},{"revision":null,"url":"assets/icons/9-circle-fill.svg"},{"revision":null,"url":"assets/icons/9-circle.svg"},{"revision":null,"url":"assets/icons/9-square-fill.svg"},{"revision":null,"url":"assets/icons/9-square.svg"},{"revision":null,"url":"assets/icons/activity.svg"},{"revision":null,"url":"assets/icons/airplane-engines-fill.svg"},{"revision":null,"url":"assets/icons/airplane-engines.svg"},{"revision":null,"url":"assets/icons/airplane-fill.svg"},{"revision":null,"url":"assets/icons/airplane.svg"},{"revision":null,"url":"assets/icons/alarm-fill.svg"},{"revision":null,"url":"assets/icons/alarm.svg"},{"revision":null,"url":"assets/icons/alexa.svg"},{"revision":null,"url":"assets/icons/align-bottom.svg"},{"revision":null,"url":"assets/icons/align-center.svg"},{"revision":null,"url":"assets/icons/align-end.svg"},{"revision":null,"url":"assets/icons/align-middle.svg"},{"revision":null,"url":"assets/icons/align-start.svg"},{"revision":null,"url":"assets/icons/align-top.svg"},{"revision":null,"url":"assets/icons/alipay.svg"},{"revision":null,"url":"assets/icons/alt.svg"},{"revision":null,"url":"assets/icons/amd.svg"},{"revision":null,"url":"assets/icons/android.svg"},{"revision":null,"url":"assets/icons/android2.svg"},{"revision":null,"url":"assets/icons/app-indicator.svg"},{"revision":null,"url":"assets/icons/app-logo.svg"},{"revision":null,"url":"assets/icons/app.svg"},{"revision":null,"url":"assets/icons/apple.svg"},{"revision":null,"url":"assets/icons/archive-fill.svg"},{"revision":null,"url":"assets/icons/archive.svg"},{"revision":null,"url":"assets/icons/arrow-90deg-down.svg"},{"revision":null,"url":"assets/icons/arrow-90deg-left.svg"},{"revision":null,"url":"assets/icons/arrow-90deg-right.svg"},{"revision":null,"url":"assets/icons/arrow-90deg-up.svg"},{"revision":null,"url":"assets/icons/arrow-bar-down.svg"},{"revision":null,"url":"assets/icons/arrow-bar-left.svg"},{"revision":null,"url":"assets/icons/arrow-bar-right.svg"},{"revision":null,"url":"assets/icons/arrow-bar-up.svg"},{"revision":null,"url":"assets/icons/arrow-clockwise.svg"},{"revision":null,"url":"assets/icons/arrow-counterclockwise.svg"},{"revision":null,"url":"assets/icons/arrow-down-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-circle.svg"},{"revision":null,"url":"assets/icons/arrow-down-left-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-left-circle.svg"},{"revision":null,"url":"assets/icons/arrow-down-left-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-left-square.svg"},{"revision":null,"url":"assets/icons/arrow-down-left.svg"},{"revision":null,"url":"assets/icons/arrow-down-right-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-right-circle.svg"},{"revision":null,"url":"assets/icons/arrow-down-right-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-right-square.svg"},{"revision":null,"url":"assets/icons/arrow-down-right.svg"},{"revision":null,"url":"assets/icons/arrow-down-short.svg"},{"revision":null,"url":"assets/icons/arrow-down-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-down-square.svg"},{"revision":null,"url":"assets/icons/arrow-down-up.svg"},{"revision":null,"url":"assets/icons/arrow-down.svg"},{"revision":null,"url":"assets/icons/arrow-left-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-left-circle.svg"},{"revision":null,"url":"assets/icons/arrow-left-right.svg"},{"revision":null,"url":"assets/icons/arrow-left-short.svg"},{"revision":null,"url":"assets/icons/arrow-left-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-left-square.svg"},{"revision":null,"url":"assets/icons/arrow-left.svg"},{"revision":null,"url":"assets/icons/arrow-repeat.svg"},{"revision":null,"url":"assets/icons/arrow-return-left.svg"},{"revision":null,"url":"assets/icons/arrow-return-right.svg"},{"revision":null,"url":"assets/icons/arrow-right-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-right-circle.svg"},{"revision":null,"url":"assets/icons/arrow-right-short.svg"},{"revision":null,"url":"assets/icons/arrow-right-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-right-square.svg"},{"revision":null,"url":"assets/icons/arrow-right.svg"},{"revision":null,"url":"assets/icons/arrow-through-heart-fill.svg"},{"revision":null,"url":"assets/icons/arrow-through-heart.svg"},{"revision":null,"url":"assets/icons/arrow-up-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-circle.svg"},{"revision":null,"url":"assets/icons/arrow-up-left-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-left-circle.svg"},{"revision":null,"url":"assets/icons/arrow-up-left-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-left-square.svg"},{"revision":null,"url":"assets/icons/arrow-up-left.svg"},{"revision":null,"url":"assets/icons/arrow-up-right-circle-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-right-circle.svg"},{"revision":null,"url":"assets/icons/arrow-up-right-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-right-square.svg"},{"revision":null,"url":"assets/icons/arrow-up-right.svg"},{"revision":null,"url":"assets/icons/arrow-up-short.svg"},{"revision":null,"url":"assets/icons/arrow-up-square-fill.svg"},{"revision":null,"url":"assets/icons/arrow-up-square.svg"},{"revision":null,"url":"assets/icons/arrow-up.svg"},{"revision":null,"url":"assets/icons/arrows-angle-contract.svg"},{"revision":null,"url":"assets/icons/arrows-angle-expand.svg"},{"revision":null,"url":"assets/icons/arrows-collapse.svg"},{"revision":null,"url":"assets/icons/arrows-expand.svg"},{"revision":null,"url":"assets/icons/arrows-fullscreen.svg"},{"revision":null,"url":"assets/icons/arrows-move.svg"},{"revision":null,"url":"assets/icons/aspect-ratio-fill.svg"},{"revision":null,"url":"assets/icons/aspect-ratio.svg"},{"revision":null,"url":"assets/icons/asterisk.svg"},{"revision":null,"url":"assets/icons/at.svg"},{"revision":null,"url":"assets/icons/award-fill.svg"},{"revision":null,"url":"assets/icons/award.svg"},{"revision":null,"url":"assets/icons/back.svg"},{"revision":null,"url":"assets/icons/background-scene-1.svg"},{"revision":null,"url":"assets/icons/backspace-fill.svg"},{"revision":null,"url":"assets/icons/backspace-reverse-fill.svg"},{"revision":null,"url":"assets/icons/backspace-reverse.svg"},{"revision":null,"url":"assets/icons/backspace.svg"},{"revision":null,"url":"assets/icons/badge-3d-fill.svg"},{"revision":null,"url":"assets/icons/badge-3d.svg"},{"revision":null,"url":"assets/icons/badge-4k-fill.svg"},{"revision":null,"url":"assets/icons/badge-4k.svg"},{"revision":null,"url":"assets/icons/badge-8k-fill.svg"},{"revision":null,"url":"assets/icons/badge-8k.svg"},{"revision":null,"url":"assets/icons/badge-ad-fill.svg"},{"revision":null,"url":"assets/icons/badge-ad.svg"},{"revision":null,"url":"assets/icons/badge-ar-fill.svg"},{"revision":null,"url":"assets/icons/badge-ar.svg"},{"revision":null,"url":"assets/icons/badge-cc-fill.svg"},{"revision":null,"url":"assets/icons/badge-cc.svg"},{"revision":null,"url":"assets/icons/badge-hd-fill.svg"},{"revision":null,"url":"assets/icons/badge-hd.svg"},{"revision":null,"url":"assets/icons/badge-sd-fill.svg"},{"revision":null,"url":"assets/icons/badge-sd.svg"},{"revision":null,"url":"assets/icons/badge-tm-fill.svg"},{"revision":null,"url":"assets/icons/badge-tm.svg"},{"revision":null,"url":"assets/icons/badge-vo-fill.svg"},{"revision":null,"url":"assets/icons/badge-vo.svg"},{"revision":null,"url":"assets/icons/badge-vr-fill.svg"},{"revision":null,"url":"assets/icons/badge-vr.svg"},{"revision":null,"url":"assets/icons/badge-wc-fill.svg"},{"revision":null,"url":"assets/icons/badge-wc.svg"},{"revision":null,"url":"assets/icons/bag-check-fill.svg"},{"revision":null,"url":"assets/icons/bag-check.svg"},{"revision":null,"url":"assets/icons/bag-dash-fill.svg"},{"revision":null,"url":"assets/icons/bag-dash.svg"},{"revision":null,"url":"assets/icons/bag-fill.svg"},{"revision":null,"url":"assets/icons/bag-heart-fill.svg"},{"revision":null,"url":"assets/icons/bag-heart.svg"},{"revision":null,"url":"assets/icons/bag-plus-fill.svg"},{"revision":null,"url":"assets/icons/bag-plus.svg"},{"revision":null,"url":"assets/icons/bag-x-fill.svg"},{"revision":null,"url":"assets/icons/bag-x.svg"},{"revision":null,"url":"assets/icons/bag.svg"},{"revision":null,"url":"assets/icons/balloon-fill.svg"},{"revision":null,"url":"assets/icons/balloon-heart-fill.svg"},{"revision":null,"url":"assets/icons/balloon-heart.svg"},{"revision":null,"url":"assets/icons/balloon.svg"},{"revision":null,"url":"assets/icons/bandaid-fill.svg"},{"revision":null,"url":"assets/icons/bandaid.svg"},{"revision":null,"url":"assets/icons/bank.svg"},{"revision":null,"url":"assets/icons/bank2.svg"},{"revision":null,"url":"assets/icons/bar-chart-fill.svg"},{"revision":null,"url":"assets/icons/bar-chart-line-fill.svg"},{"revision":null,"url":"assets/icons/bar-chart-line.svg"},{"revision":null,"url":"assets/icons/bar-chart-steps.svg"},{"revision":null,"url":"assets/icons/bar-chart.svg"},{"revision":null,"url":"assets/icons/basket-fill.svg"},{"revision":null,"url":"assets/icons/basket.svg"},{"revision":null,"url":"assets/icons/basket2-fill.svg"},{"revision":null,"url":"assets/icons/basket2.svg"},{"revision":null,"url":"assets/icons/basket3-fill.svg"},{"revision":null,"url":"assets/icons/basket3.svg"},{"revision":null,"url":"assets/icons/battery-charging.svg"},{"revision":null,"url":"assets/icons/battery-full.svg"},{"revision":null,"url":"assets/icons/battery-half.svg"},{"revision":null,"url":"assets/icons/battery.svg"},{"revision":null,"url":"assets/icons/behance.svg"},{"revision":null,"url":"assets/icons/bell-fill.svg"},{"revision":null,"url":"assets/icons/bell-slash-fill.svg"},{"revision":null,"url":"assets/icons/bell-slash.svg"},{"revision":null,"url":"assets/icons/bell.svg"},{"revision":null,"url":"assets/icons/bezier.svg"},{"revision":null,"url":"assets/icons/bezier2.svg"},{"revision":null,"url":"assets/icons/bicycle.svg"},{"revision":null,"url":"assets/icons/binoculars-fill.svg"},{"revision":null,"url":"assets/icons/binoculars.svg"},{"revision":null,"url":"assets/icons/blockquote-left.svg"},{"revision":null,"url":"assets/icons/blockquote-right.svg"},{"revision":null,"url":"assets/icons/bluetooth.svg"},{"revision":null,"url":"assets/icons/body-text.svg"},{"revision":null,"url":"assets/icons/book-fill.svg"},{"revision":null,"url":"assets/icons/book-half.svg"},{"revision":null,"url":"assets/icons/book.svg"},{"revision":null,"url":"assets/icons/bookmark-check-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-check.svg"},{"revision":null,"url":"assets/icons/bookmark-dash-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-dash.svg"},{"revision":null,"url":"assets/icons/bookmark-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-heart-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-heart.svg"},{"revision":null,"url":"assets/icons/bookmark-plus-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-plus.svg"},{"revision":null,"url":"assets/icons/bookmark-star-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-star.svg"},{"revision":null,"url":"assets/icons/bookmark-x-fill.svg"},{"revision":null,"url":"assets/icons/bookmark-x.svg"},{"revision":null,"url":"assets/icons/bookmark.svg"},{"revision":null,"url":"assets/icons/bookmarks-fill.svg"},{"revision":null,"url":"assets/icons/bookmarks.svg"},{"revision":null,"url":"assets/icons/bookshelf.svg"},{"revision":null,"url":"assets/icons/boombox-fill.svg"},{"revision":null,"url":"assets/icons/boombox.svg"},{"revision":null,"url":"assets/icons/bootstrap-fill.svg"},{"revision":null,"url":"assets/icons/bootstrap-reboot.svg"},{"revision":null,"url":"assets/icons/bootstrap.svg"},{"revision":null,"url":"assets/icons/border-all.svg"},{"revision":null,"url":"assets/icons/border-bottom.svg"},{"revision":null,"url":"assets/icons/border-center.svg"},{"revision":null,"url":"assets/icons/border-inner.svg"},{"revision":null,"url":"assets/icons/border-left.svg"},{"revision":null,"url":"assets/icons/border-middle.svg"},{"revision":null,"url":"assets/icons/border-outer.svg"},{"revision":null,"url":"assets/icons/border-right.svg"},{"revision":null,"url":"assets/icons/border-style.svg"},{"revision":null,"url":"assets/icons/border-top.svg"},{"revision":null,"url":"assets/icons/border-width.svg"},{"revision":null,"url":"assets/icons/border.svg"},{"revision":null,"url":"assets/icons/bounding-box-circles.svg"},{"revision":null,"url":"assets/icons/bounding-box.svg"},{"revision":null,"url":"assets/icons/box-arrow-down-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-down-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-down.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-down-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-down-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-down.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-up-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-up-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-in-up.svg"},{"revision":null,"url":"assets/icons/box-arrow-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-up-left.svg"},{"revision":null,"url":"assets/icons/box-arrow-up-right.svg"},{"revision":null,"url":"assets/icons/box-arrow-up.svg"},{"revision":null,"url":"assets/icons/box-fill.svg"},{"revision":null,"url":"assets/icons/box-seam-fill.svg"},{"revision":null,"url":"assets/icons/box-seam.svg"},{"revision":null,"url":"assets/icons/box.svg"},{"revision":null,"url":"assets/icons/box2-fill.svg"},{"revision":null,"url":"assets/icons/box2-heart-fill.svg"},{"revision":null,"url":"assets/icons/box2-heart.svg"},{"revision":null,"url":"assets/icons/box2.svg"},{"revision":null,"url":"assets/icons/boxes.svg"},{"revision":null,"url":"assets/icons/braces-asterisk.svg"},{"revision":null,"url":"assets/icons/braces.svg"},{"revision":null,"url":"assets/icons/bricks.svg"},{"revision":null,"url":"assets/icons/briefcase-fill.svg"},{"revision":null,"url":"assets/icons/briefcase.svg"},{"revision":null,"url":"assets/icons/brightness-alt-high-fill.svg"},{"revision":null,"url":"assets/icons/brightness-alt-high.svg"},{"revision":null,"url":"assets/icons/brightness-alt-low-fill.svg"},{"revision":null,"url":"assets/icons/brightness-alt-low.svg"},{"revision":null,"url":"assets/icons/brightness-high-fill.svg"},{"revision":null,"url":"assets/icons/brightness-high.svg"},{"revision":null,"url":"assets/icons/brightness-low-fill.svg"},{"revision":null,"url":"assets/icons/brightness-low.svg"},{"revision":null,"url":"assets/icons/broadcast-pin.svg"},{"revision":null,"url":"assets/icons/broadcast.svg"},{"revision":null,"url":"assets/icons/browser-chrome.svg"},{"revision":null,"url":"assets/icons/browser-edge.svg"},{"revision":null,"url":"assets/icons/browser-firefox.svg"},{"revision":null,"url":"assets/icons/browser-safari.svg"},{"revision":null,"url":"assets/icons/brush-fill.svg"},{"revision":null,"url":"assets/icons/brush.svg"},{"revision":null,"url":"assets/icons/bucket-fill.svg"},{"revision":null,"url":"assets/icons/bucket.svg"},{"revision":null,"url":"assets/icons/bug-fill.svg"},{"revision":null,"url":"assets/icons/bug.svg"},{"revision":null,"url":"assets/icons/building-add.svg"},{"revision":null,"url":"assets/icons/building-check.svg"},{"revision":null,"url":"assets/icons/building-dash.svg"},{"revision":null,"url":"assets/icons/building-down.svg"},{"revision":null,"url":"assets/icons/building-exclamation.svg"},{"revision":null,"url":"assets/icons/building-fill-add.svg"},{"revision":null,"url":"assets/icons/building-fill-check.svg"},{"revision":null,"url":"assets/icons/building-fill-dash.svg"},{"revision":null,"url":"assets/icons/building-fill-down.svg"},{"revision":null,"url":"assets/icons/building-fill-exclamation.svg"},{"revision":null,"url":"assets/icons/building-fill-gear.svg"},{"revision":null,"url":"assets/icons/building-fill-lock.svg"},{"revision":null,"url":"assets/icons/building-fill-slash.svg"},{"revision":null,"url":"assets/icons/building-fill-up.svg"},{"revision":null,"url":"assets/icons/building-fill-x.svg"},{"revision":null,"url":"assets/icons/building-fill.svg"},{"revision":null,"url":"assets/icons/building-gear.svg"},{"revision":null,"url":"assets/icons/building-lock.svg"},{"revision":null,"url":"assets/icons/building-slash.svg"},{"revision":null,"url":"assets/icons/building-up.svg"},{"revision":null,"url":"assets/icons/building-x.svg"},{"revision":null,"url":"assets/icons/building.svg"},{"revision":null,"url":"assets/icons/buildings-fill.svg"},{"revision":null,"url":"assets/icons/buildings.svg"},{"revision":null,"url":"assets/icons/bullseye.svg"},{"revision":null,"url":"assets/icons/bus-front-fill.svg"},{"revision":null,"url":"assets/icons/bus-front.svg"},{"revision":null,"url":"assets/icons/c-circle-fill.svg"},{"revision":null,"url":"assets/icons/c-circle.svg"},{"revision":null,"url":"assets/icons/c-square-fill.svg"},{"revision":null,"url":"assets/icons/c-square.svg"},{"revision":null,"url":"assets/icons/calculator-fill.svg"},{"revision":null,"url":"assets/icons/calculator.svg"},{"revision":null,"url":"assets/icons/calendar-check-fill.svg"},{"revision":null,"url":"assets/icons/calendar-check.svg"},{"revision":null,"url":"assets/icons/calendar-date-fill.svg"},{"revision":null,"url":"assets/icons/calendar-date.svg"},{"revision":null,"url":"assets/icons/calendar-day-fill.svg"},{"revision":null,"url":"assets/icons/calendar-day.svg"},{"revision":null,"url":"assets/icons/calendar-event-fill.svg"},{"revision":null,"url":"assets/icons/calendar-event.svg"},{"revision":null,"url":"assets/icons/calendar-fill.svg"},{"revision":null,"url":"assets/icons/calendar-heart-fill.svg"},{"revision":null,"url":"assets/icons/calendar-heart.svg"},{"revision":null,"url":"assets/icons/calendar-minus-fill.svg"},{"revision":null,"url":"assets/icons/calendar-minus.svg"},{"revision":null,"url":"assets/icons/calendar-month-fill.svg"},{"revision":null,"url":"assets/icons/calendar-month.svg"},{"revision":null,"url":"assets/icons/calendar-plus-fill.svg"},{"revision":null,"url":"assets/icons/calendar-plus.svg"},{"revision":null,"url":"assets/icons/calendar-range-fill.svg"},{"revision":null,"url":"assets/icons/calendar-range.svg"},{"revision":null,"url":"assets/icons/calendar-week-fill.svg"},{"revision":null,"url":"assets/icons/calendar-week.svg"},{"revision":null,"url":"assets/icons/calendar-x-fill.svg"},{"revision":null,"url":"assets/icons/calendar-x.svg"},{"revision":null,"url":"assets/icons/calendar.svg"},{"revision":null,"url":"assets/icons/calendar2-check-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-check.svg"},{"revision":null,"url":"assets/icons/calendar2-date-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-date.svg"},{"revision":null,"url":"assets/icons/calendar2-day-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-day.svg"},{"revision":null,"url":"assets/icons/calendar2-event-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-event.svg"},{"revision":null,"url":"assets/icons/calendar2-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-heart-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-heart.svg"},{"revision":null,"url":"assets/icons/calendar2-minus-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-minus.svg"},{"revision":null,"url":"assets/icons/calendar2-month-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-month.svg"},{"revision":null,"url":"assets/icons/calendar2-plus-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-plus.svg"},{"revision":null,"url":"assets/icons/calendar2-range-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-range.svg"},{"revision":null,"url":"assets/icons/calendar2-week-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-week.svg"},{"revision":null,"url":"assets/icons/calendar2-x-fill.svg"},{"revision":null,"url":"assets/icons/calendar2-x.svg"},{"revision":null,"url":"assets/icons/calendar2.svg"},{"revision":null,"url":"assets/icons/calendar3-event-fill.svg"},{"revision":null,"url":"assets/icons/calendar3-event.svg"},{"revision":null,"url":"assets/icons/calendar3-fill.svg"},{"revision":null,"url":"assets/icons/calendar3-range-fill.svg"},{"revision":null,"url":"assets/icons/calendar3-range.svg"},{"revision":null,"url":"assets/icons/calendar3-week-fill.svg"},{"revision":null,"url":"assets/icons/calendar3-week.svg"},{"revision":null,"url":"assets/icons/calendar3.svg"},{"revision":null,"url":"assets/icons/calendar4-event.svg"},{"revision":null,"url":"assets/icons/calendar4-range.svg"},{"revision":null,"url":"assets/icons/calendar4-week.svg"},{"revision":null,"url":"assets/icons/calendar4.svg"},{"revision":null,"url":"assets/icons/camera-fill.svg"},{"revision":null,"url":"assets/icons/camera-reels-fill.svg"},{"revision":null,"url":"assets/icons/camera-reels.svg"},{"revision":null,"url":"assets/icons/camera-video-fill.svg"},{"revision":null,"url":"assets/icons/camera-video-off-fill.svg"},{"revision":null,"url":"assets/icons/camera-video-off.svg"},{"revision":null,"url":"assets/icons/camera-video.svg"},{"revision":null,"url":"assets/icons/camera.svg"},{"revision":null,"url":"assets/icons/camera2.svg"},{"revision":null,"url":"assets/icons/capslock-fill.svg"},{"revision":null,"url":"assets/icons/capslock.svg"},{"revision":null,"url":"assets/icons/capsule-pill.svg"},{"revision":null,"url":"assets/icons/capsule.svg"},{"revision":null,"url":"assets/icons/car-front-fill.svg"},{"revision":null,"url":"assets/icons/car-front.svg"},{"revision":null,"url":"assets/icons/card-checklist.svg"},{"revision":null,"url":"assets/icons/card-heading.svg"},{"revision":null,"url":"assets/icons/card-image.svg"},{"revision":null,"url":"assets/icons/card-list.svg"},{"revision":null,"url":"assets/icons/card-text.svg"},{"revision":null,"url":"assets/icons/caret-down-fill.svg"},{"revision":null,"url":"assets/icons/caret-down-square-fill.svg"},{"revision":null,"url":"assets/icons/caret-down-square.svg"},{"revision":null,"url":"assets/icons/caret-down.svg"},{"revision":null,"url":"assets/icons/caret-left-fill.svg"},{"revision":null,"url":"assets/icons/caret-left-square-fill.svg"},{"revision":null,"url":"assets/icons/caret-left-square.svg"},{"revision":null,"url":"assets/icons/caret-left.svg"},{"revision":null,"url":"assets/icons/caret-right-fill.svg"},{"revision":null,"url":"assets/icons/caret-right-square-fill.svg"},{"revision":null,"url":"assets/icons/caret-right-square.svg"},{"revision":null,"url":"assets/icons/caret-right.svg"},{"revision":null,"url":"assets/icons/caret-up-fill.svg"},{"revision":null,"url":"assets/icons/caret-up-square-fill.svg"},{"revision":null,"url":"assets/icons/caret-up-square.svg"},{"revision":null,"url":"assets/icons/caret-up.svg"},{"revision":null,"url":"assets/icons/cart-check-fill.svg"},{"revision":null,"url":"assets/icons/cart-check.svg"},{"revision":null,"url":"assets/icons/cart-dash-fill.svg"},{"revision":null,"url":"assets/icons/cart-dash.svg"},{"revision":null,"url":"assets/icons/cart-fill.svg"},{"revision":null,"url":"assets/icons/cart-plus-fill.svg"},{"revision":null,"url":"assets/icons/cart-plus.svg"},{"revision":null,"url":"assets/icons/cart-x-fill.svg"},{"revision":null,"url":"assets/icons/cart-x.svg"},{"revision":null,"url":"assets/icons/cart.svg"},{"revision":null,"url":"assets/icons/cart2.svg"},{"revision":null,"url":"assets/icons/cart3.svg"},{"revision":null,"url":"assets/icons/cart4.svg"},{"revision":null,"url":"assets/icons/cash-app.svg"},{"revision":null,"url":"assets/icons/cash-coin.svg"},{"revision":null,"url":"assets/icons/cash-stack.svg"},{"revision":null,"url":"assets/icons/cash.svg"},{"revision":null,"url":"assets/icons/cassette-fill.svg"},{"revision":null,"url":"assets/icons/cassette.svg"},{"revision":null,"url":"assets/icons/cast.svg"},{"revision":null,"url":"assets/icons/cc-circle-fill.svg"},{"revision":null,"url":"assets/icons/cc-circle.svg"},{"revision":null,"url":"assets/icons/cc-square-fill.svg"},{"revision":null,"url":"assets/icons/cc-square.svg"},{"revision":null,"url":"assets/icons/chat-dots-fill.svg"},{"revision":null,"url":"assets/icons/chat-dots.svg"},{"revision":null,"url":"assets/icons/chat-fill.svg"},{"revision":null,"url":"assets/icons/chat-heart-fill.svg"},{"revision":null,"url":"assets/icons/chat-heart.svg"},{"revision":null,"url":"assets/icons/chat-left-dots-fill.svg"},{"revision":null,"url":"assets/icons/chat-left-dots.svg"},{"revision":null,"url":"assets/icons/chat-left-fill.svg"},{"revision":null,"url":"assets/icons/chat-left-heart-fill.svg"},{"revision":null,"url":"assets/icons/chat-left-heart.svg"},{"revision":null,"url":"assets/icons/chat-left-quote-fill.svg"},{"revision":null,"url":"assets/icons/chat-left-quote.svg"},{"revision":null,"url":"assets/icons/chat-left-text-fill.svg"},{"revision":null,"url":"assets/icons/chat-left-text.svg"},{"revision":null,"url":"assets/icons/chat-left.svg"},{"revision":null,"url":"assets/icons/chat-quote-fill.svg"},{"revision":null,"url":"assets/icons/chat-quote.svg"},{"revision":null,"url":"assets/icons/chat-right-dots-fill.svg"},{"revision":null,"url":"assets/icons/chat-right-dots.svg"},{"revision":null,"url":"assets/icons/chat-right-fill.svg"},{"revision":null,"url":"assets/icons/chat-right-heart-fill.svg"},{"revision":null,"url":"assets/icons/chat-right-heart.svg"},{"revision":null,"url":"assets/icons/chat-right-quote-fill.svg"},{"revision":null,"url":"assets/icons/chat-right-quote.svg"},{"revision":null,"url":"assets/icons/chat-right-text-fill.svg"},{"revision":null,"url":"assets/icons/chat-right-text.svg"},{"revision":null,"url":"assets/icons/chat-right.svg"},{"revision":null,"url":"assets/icons/chat-square-dots-fill.svg"},{"revision":null,"url":"assets/icons/chat-square-dots.svg"},{"revision":null,"url":"assets/icons/chat-square-fill.svg"},{"revision":null,"url":"assets/icons/chat-square-heart-fill.svg"},{"revision":null,"url":"assets/icons/chat-square-heart.svg"},{"revision":null,"url":"assets/icons/chat-square-quote-fill.svg"},{"revision":null,"url":"assets/icons/chat-square-quote.svg"},{"revision":null,"url":"assets/icons/chat-square-text-fill.svg"},{"revision":null,"url":"assets/icons/chat-square-text.svg"},{"revision":null,"url":"assets/icons/chat-square.svg"},{"revision":null,"url":"assets/icons/chat-text-fill.svg"},{"revision":null,"url":"assets/icons/chat-text.svg"},{"revision":null,"url":"assets/icons/chat.svg"},{"revision":null,"url":"assets/icons/check-all.svg"},{"revision":null,"url":"assets/icons/check-circle-fill.svg"},{"revision":null,"url":"assets/icons/check-circle.svg"},{"revision":null,"url":"assets/icons/check-lg.svg"},{"revision":null,"url":"assets/icons/check-square-fill.svg"},{"revision":null,"url":"assets/icons/check-square.svg"},{"revision":null,"url":"assets/icons/check.svg"},{"revision":null,"url":"assets/icons/check2-all.svg"},{"revision":null,"url":"assets/icons/check2-circle.svg"},{"revision":null,"url":"assets/icons/check2-square.svg"},{"revision":null,"url":"assets/icons/check2.svg"},{"revision":null,"url":"assets/icons/chevron-bar-contract.svg"},{"revision":null,"url":"assets/icons/chevron-bar-down.svg"},{"revision":null,"url":"assets/icons/chevron-bar-expand.svg"},{"revision":null,"url":"assets/icons/chevron-bar-left.svg"},{"revision":null,"url":"assets/icons/chevron-bar-right.svg"},{"revision":null,"url":"assets/icons/chevron-bar-up.svg"},{"revision":null,"url":"assets/icons/chevron-compact-down.svg"},{"revision":null,"url":"assets/icons/chevron-compact-left.svg"},{"revision":null,"url":"assets/icons/chevron-compact-right.svg"},{"revision":null,"url":"assets/icons/chevron-compact-up.svg"},{"revision":null,"url":"assets/icons/chevron-contract.svg"},{"revision":null,"url":"assets/icons/chevron-double-down.svg"},{"revision":null,"url":"assets/icons/chevron-double-left.svg"},{"revision":null,"url":"assets/icons/chevron-double-right.svg"},{"revision":null,"url":"assets/icons/chevron-double-up.svg"},{"revision":null,"url":"assets/icons/chevron-down.svg"},{"revision":null,"url":"assets/icons/chevron-expand.svg"},{"revision":null,"url":"assets/icons/chevron-left.svg"},{"revision":null,"url":"assets/icons/chevron-right.svg"},{"revision":null,"url":"assets/icons/chevron-up.svg"},{"revision":null,"url":"assets/icons/circle-fill.svg"},{"revision":null,"url":"assets/icons/circle-half.svg"},{"revision":null,"url":"assets/icons/circle-square.svg"},{"revision":null,"url":"assets/icons/circle.svg"},{"revision":null,"url":"assets/icons/clipboard-check-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-check.svg"},{"revision":null,"url":"assets/icons/clipboard-data-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-data.svg"},{"revision":null,"url":"assets/icons/clipboard-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-heart-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-heart.svg"},{"revision":null,"url":"assets/icons/clipboard-minus-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-minus.svg"},{"revision":null,"url":"assets/icons/clipboard-plus-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-plus.svg"},{"revision":null,"url":"assets/icons/clipboard-pulse.svg"},{"revision":null,"url":"assets/icons/clipboard-x-fill.svg"},{"revision":null,"url":"assets/icons/clipboard-x.svg"},{"revision":null,"url":"assets/icons/clipboard.svg"},{"revision":null,"url":"assets/icons/clipboard2-check-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-check.svg"},{"revision":null,"url":"assets/icons/clipboard2-data-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-data.svg"},{"revision":null,"url":"assets/icons/clipboard2-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-heart-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-heart.svg"},{"revision":null,"url":"assets/icons/clipboard2-minus-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-minus.svg"},{"revision":null,"url":"assets/icons/clipboard2-plus-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-plus.svg"},{"revision":null,"url":"assets/icons/clipboard2-pulse-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-pulse.svg"},{"revision":null,"url":"assets/icons/clipboard2-x-fill.svg"},{"revision":null,"url":"assets/icons/clipboard2-x.svg"},{"revision":null,"url":"assets/icons/clipboard2.svg"},{"revision":null,"url":"assets/icons/clock-fill.svg"},{"revision":null,"url":"assets/icons/clock-history.svg"},{"revision":null,"url":"assets/icons/clock.svg"},{"revision":null,"url":"assets/icons/cloud-arrow-down-fill.svg"},{"revision":null,"url":"assets/icons/cloud-arrow-down.svg"},{"revision":null,"url":"assets/icons/cloud-arrow-up-fill.svg"},{"revision":null,"url":"assets/icons/cloud-arrow-up.svg"},{"revision":null,"url":"assets/icons/cloud-check-fill.svg"},{"revision":null,"url":"assets/icons/cloud-check.svg"},{"revision":null,"url":"assets/icons/cloud-download-fill.svg"},{"revision":null,"url":"assets/icons/cloud-download.svg"},{"revision":null,"url":"assets/icons/cloud-drizzle-fill.svg"},{"revision":null,"url":"assets/icons/cloud-drizzle.svg"},{"revision":null,"url":"assets/icons/cloud-fill.svg"},{"revision":null,"url":"assets/icons/cloud-fog-fill.svg"},{"revision":null,"url":"assets/icons/cloud-fog.svg"},{"revision":null,"url":"assets/icons/cloud-fog2-fill.svg"},{"revision":null,"url":"assets/icons/cloud-fog2.svg"},{"revision":null,"url":"assets/icons/cloud-hail-fill.svg"},{"revision":null,"url":"assets/icons/cloud-hail.svg"},{"revision":null,"url":"assets/icons/cloud-haze-fill.svg"},{"revision":null,"url":"assets/icons/cloud-haze.svg"},{"revision":null,"url":"assets/icons/cloud-haze2-fill.svg"},{"revision":null,"url":"assets/icons/cloud-haze2.svg"},{"revision":null,"url":"assets/icons/cloud-lightning-fill.svg"},{"revision":null,"url":"assets/icons/cloud-lightning-rain-fill.svg"},{"revision":null,"url":"assets/icons/cloud-lightning-rain.svg"},{"revision":null,"url":"assets/icons/cloud-lightning.svg"},{"revision":null,"url":"assets/icons/cloud-minus-fill.svg"},{"revision":null,"url":"assets/icons/cloud-minus.svg"},{"revision":null,"url":"assets/icons/cloud-moon-fill.svg"},{"revision":null,"url":"assets/icons/cloud-moon.svg"},{"revision":null,"url":"assets/icons/cloud-plus-fill.svg"},{"revision":null,"url":"assets/icons/cloud-plus.svg"},{"revision":null,"url":"assets/icons/cloud-rain-fill.svg"},{"revision":null,"url":"assets/icons/cloud-rain-heavy-fill.svg"},{"revision":null,"url":"assets/icons/cloud-rain-heavy.svg"},{"revision":null,"url":"assets/icons/cloud-rain.svg"},{"revision":null,"url":"assets/icons/cloud-slash-fill.svg"},{"revision":null,"url":"assets/icons/cloud-slash.svg"},{"revision":null,"url":"assets/icons/cloud-sleet-fill.svg"},{"revision":null,"url":"assets/icons/cloud-sleet.svg"},{"revision":null,"url":"assets/icons/cloud-snow-fill.svg"},{"revision":null,"url":"assets/icons/cloud-snow.svg"},{"revision":null,"url":"assets/icons/cloud-sun-fill.svg"},{"revision":null,"url":"assets/icons/cloud-sun.svg"},{"revision":null,"url":"assets/icons/cloud-upload-fill.svg"},{"revision":null,"url":"assets/icons/cloud-upload.svg"},{"revision":null,"url":"assets/icons/cloud.svg"},{"revision":null,"url":"assets/icons/clouds-fill.svg"},{"revision":null,"url":"assets/icons/clouds.svg"},{"revision":null,"url":"assets/icons/cloudy-fill.svg"},{"revision":null,"url":"assets/icons/cloudy.svg"},{"revision":null,"url":"assets/icons/code-slash.svg"},{"revision":null,"url":"assets/icons/code-square.svg"},{"revision":null,"url":"assets/icons/code.svg"},{"revision":null,"url":"assets/icons/coin.svg"},{"revision":null,"url":"assets/icons/collection-fill.svg"},{"revision":null,"url":"assets/icons/collection-play-fill.svg"},{"revision":null,"url":"assets/icons/collection-play.svg"},{"revision":null,"url":"assets/icons/collection.svg"},{"revision":null,"url":"assets/icons/columns-gap.svg"},{"revision":null,"url":"assets/icons/columns.svg"},{"revision":null,"url":"assets/icons/command.svg"},{"revision":null,"url":"assets/icons/compass-fill.svg"},{"revision":null,"url":"assets/icons/compass.svg"},{"revision":null,"url":"assets/icons/cone-striped.svg"},{"revision":null,"url":"assets/icons/cone.svg"},{"revision":null,"url":"assets/icons/controller.svg"},{"revision":null,"url":"assets/icons/cpu-fill.svg"},{"revision":null,"url":"assets/icons/cpu.svg"},{"revision":null,"url":"assets/icons/credit-card-2-back-fill.svg"},{"revision":null,"url":"assets/icons/credit-card-2-back.svg"},{"revision":null,"url":"assets/icons/credit-card-2-front-fill.svg"},{"revision":null,"url":"assets/icons/credit-card-2-front.svg"},{"revision":null,"url":"assets/icons/credit-card-fill.svg"},{"revision":null,"url":"assets/icons/credit-card.svg"},{"revision":null,"url":"assets/icons/crop.svg"},{"revision":null,"url":"assets/icons/cup-fill.svg"},{"revision":null,"url":"assets/icons/cup-hot-fill.svg"},{"revision":null,"url":"assets/icons/cup-hot.svg"},{"revision":null,"url":"assets/icons/cup-straw.svg"},{"revision":null,"url":"assets/icons/cup.svg"},{"revision":null,"url":"assets/icons/currency-bitcoin.svg"},{"revision":null,"url":"assets/icons/currency-dollar.svg"},{"revision":null,"url":"assets/icons/currency-euro.svg"},{"revision":null,"url":"assets/icons/currency-exchange.svg"},{"revision":null,"url":"assets/icons/currency-pound.svg"},{"revision":null,"url":"assets/icons/currency-rupee.svg"},{"revision":null,"url":"assets/icons/currency-yen.svg"},{"revision":null,"url":"assets/icons/cursor-fill.svg"},{"revision":null,"url":"assets/icons/cursor-text.svg"},{"revision":null,"url":"assets/icons/cursor.svg"},{"revision":null,"url":"assets/icons/dap-white.svg"},{"revision":null,"url":"assets/icons/dash-circle-dotted.svg"},{"revision":null,"url":"assets/icons/dash-circle-fill.svg"},{"revision":null,"url":"assets/icons/dash-circle.svg"},{"revision":null,"url":"assets/icons/dash-lg.svg"},{"revision":null,"url":"assets/icons/dash-square-dotted.svg"},{"revision":null,"url":"assets/icons/dash-square-fill.svg"},{"revision":null,"url":"assets/icons/dash-square.svg"},{"revision":null,"url":"assets/icons/dash.svg"},{"revision":null,"url":"assets/icons/database-add.svg"},{"revision":null,"url":"assets/icons/database-check.svg"},{"revision":null,"url":"assets/icons/database-dash.svg"},{"revision":null,"url":"assets/icons/database-down.svg"},{"revision":null,"url":"assets/icons/database-exclamation.svg"},{"revision":null,"url":"assets/icons/database-fill-add.svg"},{"revision":null,"url":"assets/icons/database-fill-check.svg"},{"revision":null,"url":"assets/icons/database-fill-dash.svg"},{"revision":null,"url":"assets/icons/database-fill-down.svg"},{"revision":null,"url":"assets/icons/database-fill-exclamation.svg"},{"revision":null,"url":"assets/icons/database-fill-gear.svg"},{"revision":null,"url":"assets/icons/database-fill-lock.svg"},{"revision":null,"url":"assets/icons/database-fill-slash.svg"},{"revision":null,"url":"assets/icons/database-fill-up.svg"},{"revision":null,"url":"assets/icons/database-fill-x.svg"},{"revision":null,"url":"assets/icons/database-fill.svg"},{"revision":null,"url":"assets/icons/database-gear.svg"},{"revision":null,"url":"assets/icons/database-lock.svg"},{"revision":null,"url":"assets/icons/database-slash.svg"},{"revision":null,"url":"assets/icons/database-up.svg"},{"revision":null,"url":"assets/icons/database-x.svg"},{"revision":null,"url":"assets/icons/database.svg"},{"revision":null,"url":"assets/icons/device-hdd-fill.svg"},{"revision":null,"url":"assets/icons/device-hdd.svg"},{"revision":null,"url":"assets/icons/device-ssd-fill.svg"},{"revision":null,"url":"assets/icons/device-ssd.svg"},{"revision":null,"url":"assets/icons/diagram-2-fill.svg"},{"revision":null,"url":"assets/icons/diagram-2.svg"},{"revision":null,"url":"assets/icons/diagram-3-fill.svg"},{"revision":null,"url":"assets/icons/diagram-3.svg"},{"revision":null,"url":"assets/icons/diamond-fill.svg"},{"revision":null,"url":"assets/icons/diamond-half.svg"},{"revision":null,"url":"assets/icons/diamond.svg"},{"revision":null,"url":"assets/icons/dice-1-fill.svg"},{"revision":null,"url":"assets/icons/dice-1.svg"},{"revision":null,"url":"assets/icons/dice-2-fill.svg"},{"revision":null,"url":"assets/icons/dice-2.svg"},{"revision":null,"url":"assets/icons/dice-3-fill.svg"},{"revision":null,"url":"assets/icons/dice-3.svg"},{"revision":null,"url":"assets/icons/dice-4-fill.svg"},{"revision":null,"url":"assets/icons/dice-4.svg"},{"revision":null,"url":"assets/icons/dice-5-fill.svg"},{"revision":null,"url":"assets/icons/dice-5.svg"},{"revision":null,"url":"assets/icons/dice-6-fill.svg"},{"revision":null,"url":"assets/icons/dice-6.svg"},{"revision":null,"url":"assets/icons/disc-fill.svg"},{"revision":null,"url":"assets/icons/disc.svg"},{"revision":null,"url":"assets/icons/discord.svg"},{"revision":null,"url":"assets/icons/display-fill.svg"},{"revision":null,"url":"assets/icons/display.svg"},{"revision":null,"url":"assets/icons/displayport-fill.svg"},{"revision":null,"url":"assets/icons/displayport.svg"},{"revision":null,"url":"assets/icons/distribute-horizontal.svg"},{"revision":null,"url":"assets/icons/distribute-vertical.svg"},{"revision":null,"url":"assets/icons/door-closed-fill.svg"},{"revision":null,"url":"assets/icons/door-closed.svg"},{"revision":null,"url":"assets/icons/door-open-fill.svg"},{"revision":null,"url":"assets/icons/door-open.svg"},{"revision":null,"url":"assets/icons/dot.svg"},{"revision":null,"url":"assets/icons/double-quote.svg"},{"revision":null,"url":"assets/icons/download.svg"},{"revision":null,"url":"assets/icons/dpad-fill.svg"},{"revision":null,"url":"assets/icons/dpad.svg"},{"revision":null,"url":"assets/icons/dribbble.svg"},{"revision":null,"url":"assets/icons/dropbox.svg"},{"revision":null,"url":"assets/icons/droplet-fill.svg"},{"revision":null,"url":"assets/icons/droplet-half.svg"},{"revision":null,"url":"assets/icons/droplet.svg"},{"revision":null,"url":"assets/icons/ear-fill.svg"},{"revision":null,"url":"assets/icons/ear.svg"},{"revision":null,"url":"assets/icons/earbuds.svg"},{"revision":null,"url":"assets/icons/easel-fill.svg"},{"revision":null,"url":"assets/icons/easel.svg"},{"revision":null,"url":"assets/icons/easel2-fill.svg"},{"revision":null,"url":"assets/icons/easel2.svg"},{"revision":null,"url":"assets/icons/easel3-fill.svg"},{"revision":null,"url":"assets/icons/easel3.svg"},{"revision":null,"url":"assets/icons/egg-fill.svg"},{"revision":null,"url":"assets/icons/egg-fried.svg"},{"revision":null,"url":"assets/icons/egg.svg"},{"revision":null,"url":"assets/icons/eject-fill.svg"},{"revision":null,"url":"assets/icons/eject.svg"},{"revision":null,"url":"assets/icons/emoji-angry-fill.svg"},{"revision":null,"url":"assets/icons/emoji-angry.svg"},{"revision":null,"url":"assets/icons/emoji-dizzy-fill.svg"},{"revision":null,"url":"assets/icons/emoji-dizzy.svg"},{"revision":null,"url":"assets/icons/emoji-expressionless-fill.svg"},{"revision":null,"url":"assets/icons/emoji-expressionless.svg"},{"revision":null,"url":"assets/icons/emoji-frown-fill.svg"},{"revision":null,"url":"assets/icons/emoji-frown.svg"},{"revision":null,"url":"assets/icons/emoji-heart-eyes-fill.svg"},{"revision":null,"url":"assets/icons/emoji-heart-eyes.svg"},{"revision":null,"url":"assets/icons/emoji-kiss-fill.svg"},{"revision":null,"url":"assets/icons/emoji-kiss.svg"},{"revision":null,"url":"assets/icons/emoji-laughing-fill.svg"},{"revision":null,"url":"assets/icons/emoji-laughing.svg"},{"revision":null,"url":"assets/icons/emoji-neutral-fill.svg"},{"revision":null,"url":"assets/icons/emoji-neutral.svg"},{"revision":null,"url":"assets/icons/emoji-smile-fill.svg"},{"revision":null,"url":"assets/icons/emoji-smile-upside-down-fill.svg"},{"revision":null,"url":"assets/icons/emoji-smile-upside-down.svg"},{"revision":null,"url":"assets/icons/emoji-smile.svg"},{"revision":null,"url":"assets/icons/emoji-sunglasses-fill.svg"},{"revision":null,"url":"assets/icons/emoji-sunglasses.svg"},{"revision":null,"url":"assets/icons/emoji-wink-fill.svg"},{"revision":null,"url":"assets/icons/emoji-wink.svg"},{"revision":null,"url":"assets/icons/envelope-at-fill.svg"},{"revision":null,"url":"assets/icons/envelope-at.svg"},{"revision":null,"url":"assets/icons/envelope-check-fill.svg"},{"revision":null,"url":"assets/icons/envelope-check.svg"},{"revision":null,"url":"assets/icons/envelope-dash-fill.svg"},{"revision":null,"url":"assets/icons/envelope-dash.svg"},{"revision":null,"url":"assets/icons/envelope-exclamation-fill.svg"},{"revision":null,"url":"assets/icons/envelope-exclamation.svg"},{"revision":null,"url":"assets/icons/envelope-fill.svg"},{"revision":null,"url":"assets/icons/envelope-heart-fill.svg"},{"revision":null,"url":"assets/icons/envelope-heart.svg"},{"revision":null,"url":"assets/icons/envelope-open-fill.svg"},{"revision":null,"url":"assets/icons/envelope-open-heart-fill.svg"},{"revision":null,"url":"assets/icons/envelope-open-heart.svg"},{"revision":null,"url":"assets/icons/envelope-open.svg"},{"revision":null,"url":"assets/icons/envelope-paper-fill.svg"},{"revision":null,"url":"assets/icons/envelope-paper-heart-fill.svg"},{"revision":null,"url":"assets/icons/envelope-paper-heart.svg"},{"revision":null,"url":"assets/icons/envelope-paper.svg"},{"revision":null,"url":"assets/icons/envelope-plus-fill.svg"},{"revision":null,"url":"assets/icons/envelope-plus.svg"},{"revision":null,"url":"assets/icons/envelope-slash-fill.svg"},{"revision":null,"url":"assets/icons/envelope-slash.svg"},{"revision":null,"url":"assets/icons/envelope-x-fill.svg"},{"revision":null,"url":"assets/icons/envelope-x.svg"},{"revision":null,"url":"assets/icons/envelope.svg"},{"revision":null,"url":"assets/icons/eraser-fill.svg"},{"revision":null,"url":"assets/icons/eraser.svg"},{"revision":null,"url":"assets/icons/escape.svg"},{"revision":null,"url":"assets/icons/ethernet.svg"},{"revision":null,"url":"assets/icons/ev-front-fill.svg"},{"revision":null,"url":"assets/icons/ev-front.svg"},{"revision":null,"url":"assets/icons/ev-station-fill.svg"},{"revision":null,"url":"assets/icons/ev-station.svg"},{"revision":null,"url":"assets/icons/exclamation-circle-fill.svg"},{"revision":null,"url":"assets/icons/exclamation-circle.svg"},{"revision":null,"url":"assets/icons/exclamation-diamond-fill.svg"},{"revision":null,"url":"assets/icons/exclamation-diamond.svg"},{"revision":null,"url":"assets/icons/exclamation-lg.svg"},{"revision":null,"url":"assets/icons/exclamation-octagon-fill.svg"},{"revision":null,"url":"assets/icons/exclamation-octagon.svg"},{"revision":null,"url":"assets/icons/exclamation-square-fill.svg"},{"revision":null,"url":"assets/icons/exclamation-square.svg"},{"revision":null,"url":"assets/icons/exclamation-triangle-fill.svg"},{"revision":null,"url":"assets/icons/exclamation-triangle.svg"},{"revision":null,"url":"assets/icons/exclamation.svg"},{"revision":null,"url":"assets/icons/exclude.svg"},{"revision":null,"url":"assets/icons/explicit-fill.svg"},{"revision":null,"url":"assets/icons/explicit.svg"},{"revision":null,"url":"assets/icons/eye-fill.svg"},{"revision":null,"url":"assets/icons/eye-slash-fill.svg"},{"revision":null,"url":"assets/icons/eye-slash.svg"},{"revision":null,"url":"assets/icons/eye.svg"},{"revision":null,"url":"assets/icons/eyedropper.svg"},{"revision":null,"url":"assets/icons/eyeglasses.svg"},{"revision":null,"url":"assets/icons/facebook.svg"},{"revision":null,"url":"assets/icons/fan.svg"},{"revision":null,"url":"assets/icons/fast-forward-btn-fill.svg"},{"revision":null,"url":"assets/icons/fast-forward-btn.svg"},{"revision":null,"url":"assets/icons/fast-forward-circle-fill.svg"},{"revision":null,"url":"assets/icons/fast-forward-circle.svg"},{"revision":null,"url":"assets/icons/fast-forward-fill.svg"},{"revision":null,"url":"assets/icons/fast-forward.svg"},{"revision":null,"url":"assets/icons/fawkes-mask.svg"},{"revision":null,"url":"assets/icons/feather.svg"},{"revision":null,"url":"assets/icons/file-arrow-down-fill.svg"},{"revision":null,"url":"assets/icons/file-arrow-down.svg"},{"revision":null,"url":"assets/icons/file-arrow-up-fill.svg"},{"revision":null,"url":"assets/icons/file-arrow-up.svg"},{"revision":null,"url":"assets/icons/file-bar-graph-fill.svg"},{"revision":null,"url":"assets/icons/file-bar-graph.svg"},{"revision":null,"url":"assets/icons/file-binary-fill.svg"},{"revision":null,"url":"assets/icons/file-binary.svg"},{"revision":null,"url":"assets/icons/file-break-fill.svg"},{"revision":null,"url":"assets/icons/file-break.svg"},{"revision":null,"url":"assets/icons/file-check-fill.svg"},{"revision":null,"url":"assets/icons/file-check.svg"},{"revision":null,"url":"assets/icons/file-code-fill.svg"},{"revision":null,"url":"assets/icons/file-code.svg"},{"revision":null,"url":"assets/icons/file-diff-fill.svg"},{"revision":null,"url":"assets/icons/file-diff.svg"},{"revision":null,"url":"assets/icons/file-earmark-arrow-down-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-arrow-down.svg"},{"revision":null,"url":"assets/icons/file-earmark-arrow-up-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-arrow-up.svg"},{"revision":null,"url":"assets/icons/file-earmark-bar-graph-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-bar-graph.svg"},{"revision":null,"url":"assets/icons/file-earmark-binary-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-binary.svg"},{"revision":null,"url":"assets/icons/file-earmark-break-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-break.svg"},{"revision":null,"url":"assets/icons/file-earmark-check-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-check.svg"},{"revision":null,"url":"assets/icons/file-earmark-code-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-code.svg"},{"revision":null,"url":"assets/icons/file-earmark-diff-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-diff.svg"},{"revision":null,"url":"assets/icons/file-earmark-easel-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-easel.svg"},{"revision":null,"url":"assets/icons/file-earmark-excel-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-excel.svg"},{"revision":null,"url":"assets/icons/file-earmark-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-font-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-font.svg"},{"revision":null,"url":"assets/icons/file-earmark-image-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-image.svg"},{"revision":null,"url":"assets/icons/file-earmark-lock-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-lock.svg"},{"revision":null,"url":"assets/icons/file-earmark-lock2-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-lock2.svg"},{"revision":null,"url":"assets/icons/file-earmark-medical-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-medical.svg"},{"revision":null,"url":"assets/icons/file-earmark-minus-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-minus.svg"},{"revision":null,"url":"assets/icons/file-earmark-music-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-music.svg"},{"revision":null,"url":"assets/icons/file-earmark-pdf-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-pdf.svg"},{"revision":null,"url":"assets/icons/file-earmark-person-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-person.svg"},{"revision":null,"url":"assets/icons/file-earmark-play-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-play.svg"},{"revision":null,"url":"assets/icons/file-earmark-plus-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-plus.svg"},{"revision":null,"url":"assets/icons/file-earmark-post-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-post.svg"},{"revision":null,"url":"assets/icons/file-earmark-ppt-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-ppt.svg"},{"revision":null,"url":"assets/icons/file-earmark-richtext-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-richtext.svg"},{"revision":null,"url":"assets/icons/file-earmark-ruled-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-ruled.svg"},{"revision":null,"url":"assets/icons/file-earmark-slides-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-slides.svg"},{"revision":null,"url":"assets/icons/file-earmark-spreadsheet-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-spreadsheet.svg"},{"revision":null,"url":"assets/icons/file-earmark-text-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-text.svg"},{"revision":null,"url":"assets/icons/file-earmark-word-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-word.svg"},{"revision":null,"url":"assets/icons/file-earmark-x-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-x.svg"},{"revision":null,"url":"assets/icons/file-earmark-zip-fill.svg"},{"revision":null,"url":"assets/icons/file-earmark-zip.svg"},{"revision":null,"url":"assets/icons/file-earmark.svg"},{"revision":null,"url":"assets/icons/file-easel-fill.svg"},{"revision":null,"url":"assets/icons/file-easel.svg"},{"revision":null,"url":"assets/icons/file-excel-fill.svg"},{"revision":null,"url":"assets/icons/file-excel.svg"},{"revision":null,"url":"assets/icons/file-fill.svg"},{"revision":null,"url":"assets/icons/file-font-fill.svg"},{"revision":null,"url":"assets/icons/file-font.svg"},{"revision":null,"url":"assets/icons/file-image-fill.svg"},{"revision":null,"url":"assets/icons/file-image.svg"},{"revision":null,"url":"assets/icons/file-lock-fill.svg"},{"revision":null,"url":"assets/icons/file-lock.svg"},{"revision":null,"url":"assets/icons/file-lock2-fill.svg"},{"revision":null,"url":"assets/icons/file-lock2.svg"},{"revision":null,"url":"assets/icons/file-medical-fill.svg"},{"revision":null,"url":"assets/icons/file-medical.svg"},{"revision":null,"url":"assets/icons/file-minus-fill.svg"},{"revision":null,"url":"assets/icons/file-minus.svg"},{"revision":null,"url":"assets/icons/file-music-fill.svg"},{"revision":null,"url":"assets/icons/file-music.svg"},{"revision":null,"url":"assets/icons/file-pdf-fill.svg"},{"revision":null,"url":"assets/icons/file-pdf.svg"},{"revision":null,"url":"assets/icons/file-person-fill.svg"},{"revision":null,"url":"assets/icons/file-person.svg"},{"revision":null,"url":"assets/icons/file-play-fill.svg"},{"revision":null,"url":"assets/icons/file-play.svg"},{"revision":null,"url":"assets/icons/file-plus-fill.svg"},{"revision":null,"url":"assets/icons/file-plus.svg"},{"revision":null,"url":"assets/icons/file-post-fill.svg"},{"revision":null,"url":"assets/icons/file-post.svg"},{"revision":null,"url":"assets/icons/file-ppt-fill.svg"},{"revision":null,"url":"assets/icons/file-ppt.svg"},{"revision":null,"url":"assets/icons/file-richtext-fill.svg"},{"revision":null,"url":"assets/icons/file-richtext.svg"},{"revision":null,"url":"assets/icons/file-ruled-fill.svg"},{"revision":null,"url":"assets/icons/file-ruled.svg"},{"revision":null,"url":"assets/icons/file-slides-fill.svg"},{"revision":null,"url":"assets/icons/file-slides.svg"},{"revision":null,"url":"assets/icons/file-spreadsheet-fill.svg"},{"revision":null,"url":"assets/icons/file-spreadsheet.svg"},{"revision":null,"url":"assets/icons/file-text-fill.svg"},{"revision":null,"url":"assets/icons/file-text.svg"},{"revision":null,"url":"assets/icons/file-word-fill.svg"},{"revision":null,"url":"assets/icons/file-word.svg"},{"revision":null,"url":"assets/icons/file-x-fill.svg"},{"revision":null,"url":"assets/icons/file-x.svg"},{"revision":null,"url":"assets/icons/file-zip-fill.svg"},{"revision":null,"url":"assets/icons/file-zip.svg"},{"revision":null,"url":"assets/icons/file.svg"},{"revision":null,"url":"assets/icons/files-alt.svg"},{"revision":null,"url":"assets/icons/files.svg"},{"revision":null,"url":"assets/icons/filetype-aac.svg"},{"revision":null,"url":"assets/icons/filetype-ai.svg"},{"revision":null,"url":"assets/icons/filetype-bmp.svg"},{"revision":null,"url":"assets/icons/filetype-cs.svg"},{"revision":null,"url":"assets/icons/filetype-css.svg"},{"revision":null,"url":"assets/icons/filetype-csv.svg"},{"revision":null,"url":"assets/icons/filetype-doc.svg"},{"revision":null,"url":"assets/icons/filetype-docx.svg"},{"revision":null,"url":"assets/icons/filetype-exe.svg"},{"revision":null,"url":"assets/icons/filetype-gif.svg"},{"revision":null,"url":"assets/icons/filetype-heic.svg"},{"revision":null,"url":"assets/icons/filetype-html.svg"},{"revision":null,"url":"assets/icons/filetype-java.svg"},{"revision":null,"url":"assets/icons/filetype-jpg.svg"},{"revision":null,"url":"assets/icons/filetype-js.svg"},{"revision":null,"url":"assets/icons/filetype-json.svg"},{"revision":null,"url":"assets/icons/filetype-jsx.svg"},{"revision":null,"url":"assets/icons/filetype-key.svg"},{"revision":null,"url":"assets/icons/filetype-m4p.svg"},{"revision":null,"url":"assets/icons/filetype-md.svg"},{"revision":null,"url":"assets/icons/filetype-mdx.svg"},{"revision":null,"url":"assets/icons/filetype-mov.svg"},{"revision":null,"url":"assets/icons/filetype-mp3.svg"},{"revision":null,"url":"assets/icons/filetype-mp4.svg"},{"revision":null,"url":"assets/icons/filetype-otf.svg"},{"revision":null,"url":"assets/icons/filetype-pdf.svg"},{"revision":null,"url":"assets/icons/filetype-php.svg"},{"revision":null,"url":"assets/icons/filetype-png.svg"},{"revision":null,"url":"assets/icons/filetype-ppt.svg"},{"revision":null,"url":"assets/icons/filetype-pptx.svg"},{"revision":null,"url":"assets/icons/filetype-psd.svg"},{"revision":null,"url":"assets/icons/filetype-py.svg"},{"revision":null,"url":"assets/icons/filetype-raw.svg"},{"revision":null,"url":"assets/icons/filetype-rb.svg"},{"revision":null,"url":"assets/icons/filetype-sass.svg"},{"revision":null,"url":"assets/icons/filetype-scss.svg"},{"revision":null,"url":"assets/icons/filetype-sh.svg"},{"revision":null,"url":"assets/icons/filetype-sql.svg"},{"revision":null,"url":"assets/icons/filetype-svg.svg"},{"revision":null,"url":"assets/icons/filetype-tiff.svg"},{"revision":null,"url":"assets/icons/filetype-tsx.svg"},{"revision":null,"url":"assets/icons/filetype-ttf.svg"},{"revision":null,"url":"assets/icons/filetype-txt.svg"},{"revision":null,"url":"assets/icons/filetype-wav.svg"},{"revision":null,"url":"assets/icons/filetype-woff.svg"},{"revision":null,"url":"assets/icons/filetype-xls.svg"},{"revision":null,"url":"assets/icons/filetype-xlsx.svg"},{"revision":null,"url":"assets/icons/filetype-xml.svg"},{"revision":null,"url":"assets/icons/filetype-yml.svg"},{"revision":null,"url":"assets/icons/film.svg"},{"revision":null,"url":"assets/icons/filter-circle-fill.svg"},{"revision":null,"url":"assets/icons/filter-circle.svg"},{"revision":null,"url":"assets/icons/filter-left.svg"},{"revision":null,"url":"assets/icons/filter-right.svg"},{"revision":null,"url":"assets/icons/filter-square-fill.svg"},{"revision":null,"url":"assets/icons/filter-square.svg"},{"revision":null,"url":"assets/icons/filter.svg"},{"revision":null,"url":"assets/icons/fingerprint.svg"},{"revision":null,"url":"assets/icons/fire.svg"},{"revision":null,"url":"assets/icons/flag-fill.svg"},{"revision":null,"url":"assets/icons/flag.svg"},{"revision":null,"url":"assets/icons/flower1.svg"},{"revision":null,"url":"assets/icons/flower2.svg"},{"revision":null,"url":"assets/icons/flower3.svg"},{"revision":null,"url":"assets/icons/folder-check.svg"},{"revision":null,"url":"assets/icons/folder-fill.svg"},{"revision":null,"url":"assets/icons/folder-minus.svg"},{"revision":null,"url":"assets/icons/folder-plus.svg"},{"revision":null,"url":"assets/icons/folder-symlink-fill.svg"},{"revision":null,"url":"assets/icons/folder-symlink.svg"},{"revision":null,"url":"assets/icons/folder-x.svg"},{"revision":null,"url":"assets/icons/folder.svg"},{"revision":null,"url":"assets/icons/folder2-open.svg"},{"revision":null,"url":"assets/icons/folder2.svg"},{"revision":null,"url":"assets/icons/fonts.svg"},{"revision":null,"url":"assets/icons/forward-fill.svg"},{"revision":null,"url":"assets/icons/forward.svg"},{"revision":null,"url":"assets/icons/front.svg"},{"revision":null,"url":"assets/icons/fuel-pump-diesel-fill.svg"},{"revision":null,"url":"assets/icons/fuel-pump-diesel.svg"},{"revision":null,"url":"assets/icons/fuel-pump-fill.svg"},{"revision":null,"url":"assets/icons/fuel-pump.svg"},{"revision":null,"url":"assets/icons/fullscreen-exit.svg"},{"revision":null,"url":"assets/icons/fullscreen.svg"},{"revision":null,"url":"assets/icons/funnel-fill.svg"},{"revision":null,"url":"assets/icons/funnel.svg"},{"revision":null,"url":"assets/icons/gear-fill.svg"},{"revision":null,"url":"assets/icons/gear-wide-connected.svg"},{"revision":null,"url":"assets/icons/gear-wide.svg"},{"revision":null,"url":"assets/icons/gear.svg"},{"revision":null,"url":"assets/icons/gem.svg"},{"revision":null,"url":"assets/icons/gender-ambiguous.svg"},{"revision":null,"url":"assets/icons/gender-female.svg"},{"revision":null,"url":"assets/icons/gender-male.svg"},{"revision":null,"url":"assets/icons/gender-trans.svg"},{"revision":null,"url":"assets/icons/geo-alt-fill.svg"},{"revision":null,"url":"assets/icons/geo-alt.svg"},{"revision":null,"url":"assets/icons/geo-fill.svg"},{"revision":null,"url":"assets/icons/geo.svg"},{"revision":null,"url":"assets/icons/gift-fill.svg"},{"revision":null,"url":"assets/icons/gift.svg"},{"revision":null,"url":"assets/icons/git.svg"},{"revision":null,"url":"assets/icons/github.svg"},{"revision":null,"url":"assets/icons/globe-americas.svg"},{"revision":null,"url":"assets/icons/globe-asia-australia.svg"},{"revision":null,"url":"assets/icons/globe-central-south-asia.svg"},{"revision":null,"url":"assets/icons/globe-europe-africa.svg"},{"revision":null,"url":"assets/icons/globe.svg"},{"revision":null,"url":"assets/icons/globe2.svg"},{"revision":null,"url":"assets/icons/google-play.svg"},{"revision":null,"url":"assets/icons/google.svg"},{"revision":null,"url":"assets/icons/gpu-card.svg"},{"revision":null,"url":"assets/icons/graph-down-arrow.svg"},{"revision":null,"url":"assets/icons/graph-down.svg"},{"revision":null,"url":"assets/icons/graph-up-arrow.svg"},{"revision":null,"url":"assets/icons/graph-up.svg"},{"revision":null,"url":"assets/icons/grid-1x2-fill.svg"},{"revision":null,"url":"assets/icons/grid-1x2.svg"},{"revision":null,"url":"assets/icons/grid-3x2-gap-fill.svg"},{"revision":null,"url":"assets/icons/grid-3x2-gap.svg"},{"revision":null,"url":"assets/icons/grid-3x2.svg"},{"revision":null,"url":"assets/icons/grid-3x3-gap-fill.svg"},{"revision":null,"url":"assets/icons/grid-3x3-gap.svg"},{"revision":null,"url":"assets/icons/grid-3x3.svg"},{"revision":null,"url":"assets/icons/grid-fill.svg"},{"revision":null,"url":"assets/icons/grid.svg"},{"revision":null,"url":"assets/icons/grip-horizontal.svg"},{"revision":null,"url":"assets/icons/grip-vertical.svg"},{"revision":null,"url":"assets/icons/h-circle-fill.svg"},{"revision":null,"url":"assets/icons/h-circle.svg"},{"revision":null,"url":"assets/icons/h-square-fill.svg"},{"revision":null,"url":"assets/icons/h-square.svg"},{"revision":null,"url":"assets/icons/hammer.svg"},{"revision":null,"url":"assets/icons/hand-index-fill.svg"},{"revision":null,"url":"assets/icons/hand-index-thumb-fill.svg"},{"revision":null,"url":"assets/icons/hand-index-thumb.svg"},{"revision":null,"url":"assets/icons/hand-index.svg"},{"revision":null,"url":"assets/icons/hand-thumbs-down-fill.svg"},{"revision":null,"url":"assets/icons/hand-thumbs-down.svg"},{"revision":null,"url":"assets/icons/hand-thumbs-up-fill.svg"},{"revision":null,"url":"assets/icons/hand-thumbs-up.svg"},{"revision":null,"url":"assets/icons/handbag-fill.svg"},{"revision":null,"url":"assets/icons/handbag.svg"},{"revision":null,"url":"assets/icons/hash.svg"},{"revision":null,"url":"assets/icons/hdd-fill.svg"},{"revision":null,"url":"assets/icons/hdd-network-fill.svg"},{"revision":null,"url":"assets/icons/hdd-network.svg"},{"revision":null,"url":"assets/icons/hdd-rack-fill.svg"},{"revision":null,"url":"assets/icons/hdd-rack.svg"},{"revision":null,"url":"assets/icons/hdd-stack-fill.svg"},{"revision":null,"url":"assets/icons/hdd-stack.svg"},{"revision":null,"url":"assets/icons/hdd.svg"},{"revision":null,"url":"assets/icons/hdmi-fill.svg"},{"revision":null,"url":"assets/icons/hdmi.svg"},{"revision":null,"url":"assets/icons/headphones.svg"},{"revision":null,"url":"assets/icons/headset-vr.svg"},{"revision":null,"url":"assets/icons/headset.svg"},{"revision":null,"url":"assets/icons/heart-arrow.svg"},{"revision":null,"url":"assets/icons/heart-fill.svg"},{"revision":null,"url":"assets/icons/heart-half.svg"},{"revision":null,"url":"assets/icons/heart-pulse-fill.svg"},{"revision":null,"url":"assets/icons/heart-pulse.svg"},{"revision":null,"url":"assets/icons/heart.svg"},{"revision":null,"url":"assets/icons/heartbreak-fill.svg"},{"revision":null,"url":"assets/icons/heartbreak.svg"},{"revision":null,"url":"assets/icons/hearts.svg"},{"revision":null,"url":"assets/icons/heptagon-fill.svg"},{"revision":null,"url":"assets/icons/heptagon-half.svg"},{"revision":null,"url":"assets/icons/heptagon.svg"},{"revision":null,"url":"assets/icons/hexagon-fill.svg"},{"revision":null,"url":"assets/icons/hexagon-half.svg"},{"revision":null,"url":"assets/icons/hexagon.svg"},{"revision":null,"url":"assets/icons/hood.svg"},{"revision":null,"url":"assets/icons/hospital-fill.svg"},{"revision":null,"url":"assets/icons/hospital.svg"},{"revision":null,"url":"assets/icons/hourglass-bottom.svg"},{"revision":null,"url":"assets/icons/hourglass-split.svg"},{"revision":null,"url":"assets/icons/hourglass-top.svg"},{"revision":null,"url":"assets/icons/hourglass.svg"},{"revision":null,"url":"assets/icons/house-add-fill.svg"},{"revision":null,"url":"assets/icons/house-add.svg"},{"revision":null,"url":"assets/icons/house-check-fill.svg"},{"revision":null,"url":"assets/icons/house-check.svg"},{"revision":null,"url":"assets/icons/house-dash-fill.svg"},{"revision":null,"url":"assets/icons/house-dash.svg"},{"revision":null,"url":"assets/icons/house-door-fill.svg"},{"revision":null,"url":"assets/icons/house-door.svg"},{"revision":null,"url":"assets/icons/house-down-fill.svg"},{"revision":null,"url":"assets/icons/house-down.svg"},{"revision":null,"url":"assets/icons/house-exclamation-fill.svg"},{"revision":null,"url":"assets/icons/house-exclamation.svg"},{"revision":null,"url":"assets/icons/house-fill.svg"},{"revision":null,"url":"assets/icons/house-gear-fill.svg"},{"revision":null,"url":"assets/icons/house-gear.svg"},{"revision":null,"url":"assets/icons/house-heart-fill.svg"},{"revision":null,"url":"assets/icons/house-heart.svg"},{"revision":null,"url":"assets/icons/house-lock-fill.svg"},{"revision":null,"url":"assets/icons/house-lock.svg"},{"revision":null,"url":"assets/icons/house-slash-fill.svg"},{"revision":null,"url":"assets/icons/house-slash.svg"},{"revision":null,"url":"assets/icons/house-up-fill.svg"},{"revision":null,"url":"assets/icons/house-up.svg"},{"revision":null,"url":"assets/icons/house-x-fill.svg"},{"revision":null,"url":"assets/icons/house-x.svg"},{"revision":null,"url":"assets/icons/house.svg"},{"revision":null,"url":"assets/icons/houses-fill.svg"},{"revision":null,"url":"assets/icons/houses.svg"},{"revision":null,"url":"assets/icons/hr.svg"},{"revision":null,"url":"assets/icons/hurricane.svg"},{"revision":null,"url":"assets/icons/hypnotize.svg"},{"revision":null,"url":"assets/icons/image-alt.svg"},{"revision":null,"url":"assets/icons/image-fill.svg"},{"revision":null,"url":"assets/icons/image.svg"},{"revision":null,"url":"assets/icons/images.svg"},{"revision":null,"url":"assets/icons/inbox-fill.svg"},{"revision":null,"url":"assets/icons/inbox.svg"},{"revision":null,"url":"assets/icons/inboxes-fill.svg"},{"revision":null,"url":"assets/icons/inboxes.svg"},{"revision":null,"url":"assets/icons/incognito.svg"},{"revision":null,"url":"assets/icons/indent.svg"},{"revision":null,"url":"assets/icons/infinity.svg"},{"revision":null,"url":"assets/icons/info-circle-fill.svg"},{"revision":null,"url":"assets/icons/info-circle.svg"},{"revision":null,"url":"assets/icons/info-lg.svg"},{"revision":null,"url":"assets/icons/info-square-fill.svg"},{"revision":null,"url":"assets/icons/info-square.svg"},{"revision":null,"url":"assets/icons/info.svg"},{"revision":null,"url":"assets/icons/input-cursor-text.svg"},{"revision":null,"url":"assets/icons/input-cursor.svg"},{"revision":null,"url":"assets/icons/instagram.svg"},{"revision":null,"url":"assets/icons/intersect.svg"},{"revision":null,"url":"assets/icons/journal-album.svg"},{"revision":null,"url":"assets/icons/journal-arrow-down.svg"},{"revision":null,"url":"assets/icons/journal-arrow-up.svg"},{"revision":null,"url":"assets/icons/journal-bookmark-fill.svg"},{"revision":null,"url":"assets/icons/journal-bookmark.svg"},{"revision":null,"url":"assets/icons/journal-check.svg"},{"revision":null,"url":"assets/icons/journal-code.svg"},{"revision":null,"url":"assets/icons/journal-medical.svg"},{"revision":null,"url":"assets/icons/journal-minus.svg"},{"revision":null,"url":"assets/icons/journal-plus.svg"},{"revision":null,"url":"assets/icons/journal-richtext.svg"},{"revision":null,"url":"assets/icons/journal-text.svg"},{"revision":null,"url":"assets/icons/journal-x.svg"},{"revision":null,"url":"assets/icons/journal.svg"},{"revision":null,"url":"assets/icons/journals.svg"},{"revision":null,"url":"assets/icons/joystick.svg"},{"revision":null,"url":"assets/icons/justify-left.svg"},{"revision":null,"url":"assets/icons/justify-right.svg"},{"revision":null,"url":"assets/icons/justify.svg"},{"revision":null,"url":"assets/icons/kanban-fill.svg"},{"revision":null,"url":"assets/icons/kanban.svg"},{"revision":null,"url":"assets/icons/key-fill.svg"},{"revision":null,"url":"assets/icons/key.svg"},{"revision":null,"url":"assets/icons/keyboard-fill.svg"},{"revision":null,"url":"assets/icons/keyboard.svg"},{"revision":null,"url":"assets/icons/ladder.svg"},{"revision":null,"url":"assets/icons/lamp-fill.svg"},{"revision":null,"url":"assets/icons/lamp.svg"},{"revision":null,"url":"assets/icons/laptop-fill.svg"},{"revision":null,"url":"assets/icons/laptop.svg"},{"revision":null,"url":"assets/icons/layer-backward.svg"},{"revision":null,"url":"assets/icons/layer-forward.svg"},{"revision":null,"url":"assets/icons/layers-fill.svg"},{"revision":null,"url":"assets/icons/layers-half.svg"},{"revision":null,"url":"assets/icons/layers.svg"},{"revision":null,"url":"assets/icons/layout-sidebar-inset-reverse.svg"},{"revision":null,"url":"assets/icons/layout-sidebar-inset.svg"},{"revision":null,"url":"assets/icons/layout-sidebar-reverse.svg"},{"revision":null,"url":"assets/icons/layout-sidebar.svg"},{"revision":null,"url":"assets/icons/layout-split.svg"},{"revision":null,"url":"assets/icons/layout-text-sidebar-reverse.svg"},{"revision":null,"url":"assets/icons/layout-text-sidebar.svg"},{"revision":null,"url":"assets/icons/layout-text-window-reverse.svg"},{"revision":null,"url":"assets/icons/layout-text-window.svg"},{"revision":null,"url":"assets/icons/layout-three-columns.svg"},{"revision":null,"url":"assets/icons/layout-wtf.svg"},{"revision":null,"url":"assets/icons/life-preserver.svg"},{"revision":null,"url":"assets/icons/lightbulb-fill.svg"},{"revision":null,"url":"assets/icons/lightbulb-off-fill.svg"},{"revision":null,"url":"assets/icons/lightbulb-off.svg"},{"revision":null,"url":"assets/icons/lightbulb.svg"},{"revision":null,"url":"assets/icons/lightning-charge-fill.svg"},{"revision":null,"url":"assets/icons/lightning-charge.svg"},{"revision":null,"url":"assets/icons/lightning-fill.svg"},{"revision":null,"url":"assets/icons/lightning.svg"},{"revision":null,"url":"assets/icons/line.svg"},{"revision":null,"url":"assets/icons/link-45deg.svg"},{"revision":null,"url":"assets/icons/link.svg"},{"revision":null,"url":"assets/icons/linkedin.svg"},{"revision":null,"url":"assets/icons/list-check.svg"},{"revision":null,"url":"assets/icons/list-columns-reverse.svg"},{"revision":null,"url":"assets/icons/list-columns.svg"},{"revision":null,"url":"assets/icons/list-nested.svg"},{"revision":null,"url":"assets/icons/list-ol.svg"},{"revision":null,"url":"assets/icons/list-stars.svg"},{"revision":null,"url":"assets/icons/list-task.svg"},{"revision":null,"url":"assets/icons/list-ul.svg"},{"revision":null,"url":"assets/icons/list.svg"},{"revision":null,"url":"assets/icons/lock-fill.svg"},{"revision":null,"url":"assets/icons/lock.svg"},{"revision":null,"url":"assets/icons/lungs-fill.svg"},{"revision":null,"url":"assets/icons/lungs.svg"},{"revision":null,"url":"assets/icons/magic.svg"},{"revision":null,"url":"assets/icons/magnet-fill.svg"},{"revision":null,"url":"assets/icons/magnet.svg"},{"revision":null,"url":"assets/icons/mailbox.svg"},{"revision":null,"url":"assets/icons/mailbox2.svg"},{"revision":null,"url":"assets/icons/map-fill.svg"},{"revision":null,"url":"assets/icons/map.svg"},{"revision":null,"url":"assets/icons/markdown-fill.svg"},{"revision":null,"url":"assets/icons/markdown.svg"},{"revision":null,"url":"assets/icons/mask.svg"},{"revision":null,"url":"assets/icons/masked-figure.svg"},{"revision":null,"url":"assets/icons/masked.svg"},{"revision":null,"url":"assets/icons/mastodon.svg"},{"revision":null,"url":"assets/icons/medium.svg"},{"revision":null,"url":"assets/icons/megaphone-fill.svg"},{"revision":null,"url":"assets/icons/megaphone.svg"},{"revision":null,"url":"assets/icons/memory.svg"},{"revision":null,"url":"assets/icons/menu-app-fill.svg"},{"revision":null,"url":"assets/icons/menu-app.svg"},{"revision":null,"url":"assets/icons/menu-button-fill.svg"},{"revision":null,"url":"assets/icons/menu-button-wide-fill.svg"},{"revision":null,"url":"assets/icons/menu-button-wide.svg"},{"revision":null,"url":"assets/icons/menu-button.svg"},{"revision":null,"url":"assets/icons/menu-down.svg"},{"revision":null,"url":"assets/icons/menu-up.svg"},{"revision":null,"url":"assets/icons/messenger.svg"},{"revision":null,"url":"assets/icons/meta.svg"},{"revision":null,"url":"assets/icons/mic-fill.svg"},{"revision":null,"url":"assets/icons/mic-mute-fill.svg"},{"revision":null,"url":"assets/icons/mic-mute.svg"},{"revision":null,"url":"assets/icons/mic.svg"},{"revision":null,"url":"assets/icons/microsoft-teams.svg"},{"revision":null,"url":"assets/icons/microsoft.svg"},{"revision":null,"url":"assets/icons/minecart-loaded.svg"},{"revision":null,"url":"assets/icons/minecart.svg"},{"revision":null,"url":"assets/icons/modem-fill.svg"},{"revision":null,"url":"assets/icons/modem.svg"},{"revision":null,"url":"assets/icons/moisture.svg"},{"revision":null,"url":"assets/icons/moon-fill.svg"},{"revision":null,"url":"assets/icons/moon-stars-fill.svg"},{"revision":null,"url":"assets/icons/moon-stars.svg"},{"revision":null,"url":"assets/icons/moon.svg"},{"revision":null,"url":"assets/icons/mortarboard-fill.svg"},{"revision":null,"url":"assets/icons/mortarboard.svg"},{"revision":null,"url":"assets/icons/motherboard-fill.svg"},{"revision":null,"url":"assets/icons/motherboard.svg"},{"revision":null,"url":"assets/icons/mouse-fill.svg"},{"revision":null,"url":"assets/icons/mouse.svg"},{"revision":null,"url":"assets/icons/mouse2-fill.svg"},{"revision":null,"url":"assets/icons/mouse2.svg"},{"revision":null,"url":"assets/icons/mouse3-fill.svg"},{"revision":null,"url":"assets/icons/mouse3.svg"},{"revision":null,"url":"assets/icons/music-note-beamed.svg"},{"revision":null,"url":"assets/icons/music-note-list.svg"},{"revision":null,"url":"assets/icons/music-note.svg"},{"revision":null,"url":"assets/icons/music-player-fill.svg"},{"revision":null,"url":"assets/icons/music-player.svg"},{"revision":null,"url":"assets/icons/musical-note.svg"},{"revision":null,"url":"assets/icons/news.svg"},{"revision":null,"url":"assets/icons/newspaper.svg"},{"revision":null,"url":"assets/icons/nintendo-switch.svg"},{"revision":null,"url":"assets/icons/node-minus-fill.svg"},{"revision":null,"url":"assets/icons/node-minus.svg"},{"revision":null,"url":"assets/icons/node-plus-fill.svg"},{"revision":null,"url":"assets/icons/node-plus.svg"},{"revision":null,"url":"assets/icons/nut-fill.svg"},{"revision":null,"url":"assets/icons/nut.svg"},{"revision":null,"url":"assets/icons/nvidia.svg"},{"revision":null,"url":"assets/icons/octagon-fill.svg"},{"revision":null,"url":"assets/icons/octagon-half.svg"},{"revision":null,"url":"assets/icons/octagon.svg"},{"revision":null,"url":"assets/icons/optical-audio-fill.svg"},{"revision":null,"url":"assets/icons/optical-audio.svg"},{"revision":null,"url":"assets/icons/option.svg"},{"revision":null,"url":"assets/icons/outlet.svg"},{"revision":null,"url":"assets/icons/p-circle-fill.svg"},{"revision":null,"url":"assets/icons/p-circle.svg"},{"revision":null,"url":"assets/icons/p-square-fill.svg"},{"revision":null,"url":"assets/icons/p-square.svg"},{"revision":null,"url":"assets/icons/paint-bucket.svg"},{"revision":null,"url":"assets/icons/palette-fill.svg"},{"revision":null,"url":"assets/icons/palette.svg"},{"revision":null,"url":"assets/icons/palette2.svg"},{"revision":null,"url":"assets/icons/paperclip.svg"},{"revision":null,"url":"assets/icons/paragraph.svg"},{"revision":null,"url":"assets/icons/pass-fill.svg"},{"revision":null,"url":"assets/icons/pass.svg"},{"revision":null,"url":"assets/icons/passport.svg"},{"revision":null,"url":"assets/icons/patch-check-fill.svg"},{"revision":null,"url":"assets/icons/patch-check.svg"},{"revision":null,"url":"assets/icons/patch-exclamation-fill.svg"},{"revision":null,"url":"assets/icons/patch-exclamation.svg"},{"revision":null,"url":"assets/icons/patch-minus-fill.svg"},{"revision":null,"url":"assets/icons/patch-minus.svg"},{"revision":null,"url":"assets/icons/patch-plus-fill.svg"},{"revision":null,"url":"assets/icons/patch-plus.svg"},{"revision":null,"url":"assets/icons/patch-question-fill.svg"},{"revision":null,"url":"assets/icons/patch-question.svg"},{"revision":null,"url":"assets/icons/pause-btn-fill.svg"},{"revision":null,"url":"assets/icons/pause-btn.svg"},{"revision":null,"url":"assets/icons/pause-circle-fill.svg"},{"revision":null,"url":"assets/icons/pause-circle.svg"},{"revision":null,"url":"assets/icons/pause-fill.svg"},{"revision":null,"url":"assets/icons/pause.svg"},{"revision":null,"url":"assets/icons/paypal.svg"},{"revision":null,"url":"assets/icons/pc-display-horizontal.svg"},{"revision":null,"url":"assets/icons/pc-display.svg"},{"revision":null,"url":"assets/icons/pc-horizontal.svg"},{"revision":null,"url":"assets/icons/pc.svg"},{"revision":null,"url":"assets/icons/pci-card.svg"},{"revision":null,"url":"assets/icons/peace-fill.svg"},{"revision":null,"url":"assets/icons/peace.svg"},{"revision":null,"url":"assets/icons/pen-fill.svg"},{"revision":null,"url":"assets/icons/pen.svg"},{"revision":null,"url":"assets/icons/pencil-fill.svg"},{"revision":null,"url":"assets/icons/pencil-square.svg"},{"revision":null,"url":"assets/icons/pencil.svg"},{"revision":null,"url":"assets/icons/pentagon-fill.svg"},{"revision":null,"url":"assets/icons/pentagon-half.svg"},{"revision":null,"url":"assets/icons/pentagon.svg"},{"revision":null,"url":"assets/icons/people-fill.svg"},{"revision":null,"url":"assets/icons/people-group.svg"},{"revision":null,"url":"assets/icons/people.svg"},{"revision":null,"url":"assets/icons/percent.svg"},{"revision":null,"url":"assets/icons/person-add.svg"},{"revision":null,"url":"assets/icons/person-badge-fill.svg"},{"revision":null,"url":"assets/icons/person-badge.svg"},{"revision":null,"url":"assets/icons/person-bounding-box.svg"},{"revision":null,"url":"assets/icons/person-check-fill.svg"},{"revision":null,"url":"assets/icons/person-check.svg"},{"revision":null,"url":"assets/icons/person-circle.svg"},{"revision":null,"url":"assets/icons/person-dash-fill.svg"},{"revision":null,"url":"assets/icons/person-dash.svg"},{"revision":null,"url":"assets/icons/person-down.svg"},{"revision":null,"url":"assets/icons/person-exclamation.svg"},{"revision":null,"url":"assets/icons/person-fill-add.svg"},{"revision":null,"url":"assets/icons/person-fill-check.svg"},{"revision":null,"url":"assets/icons/person-fill-dash.svg"},{"revision":null,"url":"assets/icons/person-fill-down.svg"},{"revision":null,"url":"assets/icons/person-fill-exclamation.svg"},{"revision":null,"url":"assets/icons/person-fill-gear.svg"},{"revision":null,"url":"assets/icons/person-fill-lock.svg"},{"revision":null,"url":"assets/icons/person-fill-slash.svg"},{"revision":null,"url":"assets/icons/person-fill-up.svg"},{"revision":null,"url":"assets/icons/person-fill-x.svg"},{"revision":null,"url":"assets/icons/person-fill.svg"},{"revision":null,"url":"assets/icons/person-gear.svg"},{"revision":null,"url":"assets/icons/person-heart.svg"},{"revision":null,"url":"assets/icons/person-hearts.svg"},{"revision":null,"url":"assets/icons/person-lines-fill.svg"},{"revision":null,"url":"assets/icons/person-lock.svg"},{"revision":null,"url":"assets/icons/person-plus-fill.svg"},{"revision":null,"url":"assets/icons/person-plus.svg"},{"revision":null,"url":"assets/icons/person-rolodex.svg"},{"revision":null,"url":"assets/icons/person-slash.svg"},{"revision":null,"url":"assets/icons/person-square.svg"},{"revision":null,"url":"assets/icons/person-up.svg"},{"revision":null,"url":"assets/icons/person-vcard-fill.svg"},{"revision":null,"url":"assets/icons/person-vcard.svg"},{"revision":null,"url":"assets/icons/person-video.svg"},{"revision":null,"url":"assets/icons/person-video2.svg"},{"revision":null,"url":"assets/icons/person-video3.svg"},{"revision":null,"url":"assets/icons/person-workspace.svg"},{"revision":null,"url":"assets/icons/person-x-fill.svg"},{"revision":null,"url":"assets/icons/person-x.svg"},{"revision":null,"url":"assets/icons/person.svg"},{"revision":null,"url":"assets/icons/phone-fill.svg"},{"revision":null,"url":"assets/icons/phone-flip.svg"},{"revision":null,"url":"assets/icons/phone-landscape-fill.svg"},{"revision":null,"url":"assets/icons/phone-landscape.svg"},{"revision":null,"url":"assets/icons/phone-vibrate-fill.svg"},{"revision":null,"url":"assets/icons/phone-vibrate.svg"},{"revision":null,"url":"assets/icons/phone.svg"},{"revision":null,"url":"assets/icons/pie-chart-fill.svg"},{"revision":null,"url":"assets/icons/pie-chart.svg"},{"revision":null,"url":"assets/icons/piggy-bank-fill.svg"},{"revision":null,"url":"assets/icons/piggy-bank.svg"},{"revision":null,"url":"assets/icons/pin-angle-fill.svg"},{"revision":null,"url":"assets/icons/pin-angle.svg"},{"revision":null,"url":"assets/icons/pin-fill.svg"},{"revision":null,"url":"assets/icons/pin-map-fill.svg"},{"revision":null,"url":"assets/icons/pin-map.svg"},{"revision":null,"url":"assets/icons/pin.svg"},{"revision":null,"url":"assets/icons/pinterest.svg"},{"revision":null,"url":"assets/icons/pip-fill.svg"},{"revision":null,"url":"assets/icons/pip.svg"},{"revision":null,"url":"assets/icons/play-btn-fill.svg"},{"revision":null,"url":"assets/icons/play-btn.svg"},{"revision":null,"url":"assets/icons/play-circle-fill.svg"},{"revision":null,"url":"assets/icons/play-circle.svg"},{"revision":null,"url":"assets/icons/play-fill.svg"},{"revision":null,"url":"assets/icons/play.svg"},{"revision":null,"url":"assets/icons/playstation.svg"},{"revision":null,"url":"assets/icons/plug-fill.svg"},{"revision":null,"url":"assets/icons/plug.svg"},{"revision":null,"url":"assets/icons/plugin.svg"},{"revision":null,"url":"assets/icons/plus-circle-dotted.svg"},{"revision":null,"url":"assets/icons/plus-circle-fill.svg"},{"revision":null,"url":"assets/icons/plus-circle.svg"},{"revision":null,"url":"assets/icons/plus-lg.svg"},{"revision":null,"url":"assets/icons/plus-slash-minus.svg"},{"revision":null,"url":"assets/icons/plus-square-dotted.svg"},{"revision":null,"url":"assets/icons/plus-square-fill.svg"},{"revision":null,"url":"assets/icons/plus-square.svg"},{"revision":null,"url":"assets/icons/plus.svg"},{"revision":null,"url":"assets/icons/postage-fill.svg"},{"revision":null,"url":"assets/icons/postage-heart-fill.svg"},{"revision":null,"url":"assets/icons/postage-heart.svg"},{"revision":null,"url":"assets/icons/postage.svg"},{"revision":null,"url":"assets/icons/postcard-fill.svg"},{"revision":null,"url":"assets/icons/postcard-heart-fill.svg"},{"revision":null,"url":"assets/icons/postcard-heart.svg"},{"revision":null,"url":"assets/icons/postcard.svg"},{"revision":null,"url":"assets/icons/power.svg"},{"revision":null,"url":"assets/icons/prescription.svg"},{"revision":null,"url":"assets/icons/prescription2.svg"},{"revision":null,"url":"assets/icons/printer-fill.svg"},{"revision":null,"url":"assets/icons/printer.svg"},{"revision":null,"url":"assets/icons/projector-fill.svg"},{"revision":null,"url":"assets/icons/projector.svg"},{"revision":null,"url":"assets/icons/puzzle-fill.svg"},{"revision":null,"url":"assets/icons/puzzle.svg"},{"revision":null,"url":"assets/icons/qr-code-scan.svg"},{"revision":null,"url":"assets/icons/qr-code.svg"},{"revision":null,"url":"assets/icons/question-circle-fill.svg"},{"revision":null,"url":"assets/icons/question-circle.svg"},{"revision":null,"url":"assets/icons/question-diamond-fill.svg"},{"revision":null,"url":"assets/icons/question-diamond.svg"},{"revision":null,"url":"assets/icons/question-lg.svg"},{"revision":null,"url":"assets/icons/question-octagon-fill.svg"},{"revision":null,"url":"assets/icons/question-octagon.svg"},{"revision":null,"url":"assets/icons/question-square-fill.svg"},{"revision":null,"url":"assets/icons/question-square.svg"},{"revision":null,"url":"assets/icons/question.svg"},{"revision":null,"url":"assets/icons/quill.svg"},{"revision":null,"url":"assets/icons/quora.svg"},{"revision":null,"url":"assets/icons/quote-box.svg"},{"revision":null,"url":"assets/icons/quote.svg"},{"revision":null,"url":"assets/icons/r-circle-fill.svg"},{"revision":null,"url":"assets/icons/r-circle.svg"},{"revision":null,"url":"assets/icons/r-square-fill.svg"},{"revision":null,"url":"assets/icons/r-square.svg"},{"revision":null,"url":"assets/icons/radioactive.svg"},{"revision":null,"url":"assets/icons/rainbow.svg"},{"revision":null,"url":"assets/icons/receipt-cutoff.svg"},{"revision":null,"url":"assets/icons/receipt.svg"},{"revision":null,"url":"assets/icons/reception-0.svg"},{"revision":null,"url":"assets/icons/reception-1.svg"},{"revision":null,"url":"assets/icons/reception-2.svg"},{"revision":null,"url":"assets/icons/reception-3.svg"},{"revision":null,"url":"assets/icons/reception-4.svg"},{"revision":null,"url":"assets/icons/record-btn-fill.svg"},{"revision":null,"url":"assets/icons/record-btn.svg"},{"revision":null,"url":"assets/icons/record-circle-fill.svg"},{"revision":null,"url":"assets/icons/record-circle.svg"},{"revision":null,"url":"assets/icons/record-fill.svg"},{"revision":null,"url":"assets/icons/record.svg"},{"revision":null,"url":"assets/icons/record2-fill.svg"},{"revision":null,"url":"assets/icons/record2.svg"},{"revision":null,"url":"assets/icons/recycle.svg"},{"revision":null,"url":"assets/icons/reddit.svg"},{"revision":null,"url":"assets/icons/regex.svg"},{"revision":null,"url":"assets/icons/repeat-1.svg"},{"revision":null,"url":"assets/icons/repeat.svg"},{"revision":null,"url":"assets/icons/reply-all-fill.svg"},{"revision":null,"url":"assets/icons/reply-all.svg"},{"revision":null,"url":"assets/icons/reply-fill.svg"},{"revision":null,"url":"assets/icons/reply.svg"},{"revision":null,"url":"assets/icons/rewind-btn-fill.svg"},{"revision":null,"url":"assets/icons/rewind-btn.svg"},{"revision":null,"url":"assets/icons/rewind-circle-fill.svg"},{"revision":null,"url":"assets/icons/rewind-circle.svg"},{"revision":null,"url":"assets/icons/rewind-fill.svg"},{"revision":null,"url":"assets/icons/rewind.svg"},{"revision":null,"url":"assets/icons/robot.svg"},{"revision":null,"url":"assets/icons/rocket-fill.svg"},{"revision":null,"url":"assets/icons/rocket-takeoff-fill.svg"},{"revision":null,"url":"assets/icons/rocket-takeoff.svg"},{"revision":null,"url":"assets/icons/rocket.svg"},{"revision":null,"url":"assets/icons/router-fill.svg"},{"revision":null,"url":"assets/icons/router.svg"},{"revision":null,"url":"assets/icons/rss-fill.svg"},{"revision":null,"url":"assets/icons/rss.svg"},{"revision":null,"url":"assets/icons/rulers.svg"},{"revision":null,"url":"assets/icons/safe-fill.svg"},{"revision":null,"url":"assets/icons/safe.svg"},{"revision":null,"url":"assets/icons/safe2-fill.svg"},{"revision":null,"url":"assets/icons/safe2.svg"},{"revision":null,"url":"assets/icons/save-fill.svg"},{"revision":null,"url":"assets/icons/save.svg"},{"revision":null,"url":"assets/icons/save2-fill.svg"},{"revision":null,"url":"assets/icons/save2.svg"},{"revision":null,"url":"assets/icons/scissors.svg"},{"revision":null,"url":"assets/icons/scooter.svg"},{"revision":null,"url":"assets/icons/screwdriver.svg"},{"revision":null,"url":"assets/icons/sd-card-fill.svg"},{"revision":null,"url":"assets/icons/sd-card.svg"},{"revision":null,"url":"assets/icons/search-heart-fill.svg"},{"revision":null,"url":"assets/icons/search-heart.svg"},{"revision":null,"url":"assets/icons/search-square.svg"},{"revision":null,"url":"assets/icons/search.svg"},{"revision":null,"url":"assets/icons/segmented-nav.svg"},{"revision":null,"url":"assets/icons/send-check-fill.svg"},{"revision":null,"url":"assets/icons/send-check.svg"},{"revision":null,"url":"assets/icons/send-dash-fill.svg"},{"revision":null,"url":"assets/icons/send-dash.svg"},{"revision":null,"url":"assets/icons/send-exclamation-fill.svg"},{"revision":null,"url":"assets/icons/send-exclamation.svg"},{"revision":null,"url":"assets/icons/send-fill.svg"},{"revision":null,"url":"assets/icons/send-plus-fill.svg"},{"revision":null,"url":"assets/icons/send-plus.svg"},{"revision":null,"url":"assets/icons/send-slash-fill.svg"},{"revision":null,"url":"assets/icons/send-slash.svg"},{"revision":null,"url":"assets/icons/send-x-fill.svg"},{"revision":null,"url":"assets/icons/send-x.svg"},{"revision":null,"url":"assets/icons/send.svg"},{"revision":null,"url":"assets/icons/server.svg"},{"revision":null,"url":"assets/icons/share-fill.svg"},{"revision":null,"url":"assets/icons/share.svg"},{"revision":null,"url":"assets/icons/shield-check.svg"},{"revision":null,"url":"assets/icons/shield-exclamation.svg"},{"revision":null,"url":"assets/icons/shield-fill-check.svg"},{"revision":null,"url":"assets/icons/shield-fill-exclamation.svg"},{"revision":null,"url":"assets/icons/shield-fill-minus.svg"},{"revision":null,"url":"assets/icons/shield-fill-plus.svg"},{"revision":null,"url":"assets/icons/shield-fill-x.svg"},{"revision":null,"url":"assets/icons/shield-fill.svg"},{"revision":null,"url":"assets/icons/shield-lock-fill.svg"},{"revision":null,"url":"assets/icons/shield-lock.svg"},{"revision":null,"url":"assets/icons/shield-minus.svg"},{"revision":null,"url":"assets/icons/shield-plus.svg"},{"revision":null,"url":"assets/icons/shield-shaded.svg"},{"revision":null,"url":"assets/icons/shield-slash-fill.svg"},{"revision":null,"url":"assets/icons/shield-slash.svg"},{"revision":null,"url":"assets/icons/shield-x.svg"},{"revision":null,"url":"assets/icons/shield.svg"},{"revision":null,"url":"assets/icons/shift-fill.svg"},{"revision":null,"url":"assets/icons/shift.svg"},{"revision":null,"url":"assets/icons/shop-window.svg"},{"revision":null,"url":"assets/icons/shop.svg"},{"revision":null,"url":"assets/icons/shuffle.svg"},{"revision":null,"url":"assets/icons/sign-dead-end-fill.svg"},{"revision":null,"url":"assets/icons/sign-dead-end.svg"},{"revision":null,"url":"assets/icons/sign-do-not-enter-fill.svg"},{"revision":null,"url":"assets/icons/sign-do-not-enter.svg"},{"revision":null,"url":"assets/icons/sign-intersection-fill.svg"},{"revision":null,"url":"assets/icons/sign-intersection-side-fill.svg"},{"revision":null,"url":"assets/icons/sign-intersection-side.svg"},{"revision":null,"url":"assets/icons/sign-intersection-t-fill.svg"},{"revision":null,"url":"assets/icons/sign-intersection-t.svg"},{"revision":null,"url":"assets/icons/sign-intersection-y-fill.svg"},{"revision":null,"url":"assets/icons/sign-intersection-y.svg"},{"revision":null,"url":"assets/icons/sign-intersection.svg"},{"revision":null,"url":"assets/icons/sign-merge-left-fill.svg"},{"revision":null,"url":"assets/icons/sign-merge-left.svg"},{"revision":null,"url":"assets/icons/sign-merge-right-fill.svg"},{"revision":null,"url":"assets/icons/sign-merge-right.svg"},{"revision":null,"url":"assets/icons/sign-no-left-turn-fill.svg"},{"revision":null,"url":"assets/icons/sign-no-left-turn.svg"},{"revision":null,"url":"assets/icons/sign-no-parking-fill.svg"},{"revision":null,"url":"assets/icons/sign-no-parking.svg"},{"revision":null,"url":"assets/icons/sign-no-right-turn-fill.svg"},{"revision":null,"url":"assets/icons/sign-no-right-turn.svg"},{"revision":null,"url":"assets/icons/sign-railroad-fill.svg"},{"revision":null,"url":"assets/icons/sign-railroad.svg"},{"revision":null,"url":"assets/icons/sign-stop-fill.svg"},{"revision":null,"url":"assets/icons/sign-stop-lights-fill.svg"},{"revision":null,"url":"assets/icons/sign-stop-lights.svg"},{"revision":null,"url":"assets/icons/sign-stop.svg"},{"revision":null,"url":"assets/icons/sign-turn-left-fill.svg"},{"revision":null,"url":"assets/icons/sign-turn-left.svg"},{"revision":null,"url":"assets/icons/sign-turn-right-fill.svg"},{"revision":null,"url":"assets/icons/sign-turn-right.svg"},{"revision":null,"url":"assets/icons/sign-turn-slight-left-fill.svg"},{"revision":null,"url":"assets/icons/sign-turn-slight-left.svg"},{"revision":null,"url":"assets/icons/sign-turn-slight-right-fill.svg"},{"revision":null,"url":"assets/icons/sign-turn-slight-right.svg"},{"revision":null,"url":"assets/icons/sign-yield-fill.svg"},{"revision":null,"url":"assets/icons/sign-yield.svg"},{"revision":null,"url":"assets/icons/signal.svg"},{"revision":null,"url":"assets/icons/signpost-2-fill.svg"},{"revision":null,"url":"assets/icons/signpost-2.svg"},{"revision":null,"url":"assets/icons/signpost-fill.svg"},{"revision":null,"url":"assets/icons/signpost-split-fill.svg"},{"revision":null,"url":"assets/icons/signpost-split.svg"},{"revision":null,"url":"assets/icons/signpost.svg"},{"revision":null,"url":"assets/icons/sim-fill.svg"},{"revision":null,"url":"assets/icons/sim.svg"},{"revision":null,"url":"assets/icons/simple-qr.svg"},{"revision":null,"url":"assets/icons/sina-weibo.svg"},{"revision":null,"url":"assets/icons/skip-backward-btn-fill.svg"},{"revision":null,"url":"assets/icons/skip-backward-btn.svg"},{"revision":null,"url":"assets/icons/skip-backward-circle-fill.svg"},{"revision":null,"url":"assets/icons/skip-backward-circle.svg"},{"revision":null,"url":"assets/icons/skip-backward-fill.svg"},{"revision":null,"url":"assets/icons/skip-backward.svg"},{"revision":null,"url":"assets/icons/skip-end-btn-fill.svg"},{"revision":null,"url":"assets/icons/skip-end-btn.svg"},{"revision":null,"url":"assets/icons/skip-end-circle-fill.svg"},{"revision":null,"url":"assets/icons/skip-end-circle.svg"},{"revision":null,"url":"assets/icons/skip-end-fill.svg"},{"revision":null,"url":"assets/icons/skip-end.svg"},{"revision":null,"url":"assets/icons/skip-forward-btn-fill.svg"},{"revision":null,"url":"assets/icons/skip-forward-btn.svg"},{"revision":null,"url":"assets/icons/skip-forward-circle-fill.svg"},{"revision":null,"url":"assets/icons/skip-forward-circle.svg"},{"revision":null,"url":"assets/icons/skip-forward-fill.svg"},{"revision":null,"url":"assets/icons/skip-forward.svg"},{"revision":null,"url":"assets/icons/skip-start-btn-fill.svg"},{"revision":null,"url":"assets/icons/skip-start-btn.svg"},{"revision":null,"url":"assets/icons/skip-start-circle-fill.svg"},{"revision":null,"url":"assets/icons/skip-start-circle.svg"},{"revision":null,"url":"assets/icons/skip-start-fill.svg"},{"revision":null,"url":"assets/icons/skip-start.svg"},{"revision":null,"url":"assets/icons/skype.svg"},{"revision":null,"url":"assets/icons/slack.svg"},{"revision":null,"url":"assets/icons/slash-circle-fill.svg"},{"revision":null,"url":"assets/icons/slash-circle.svg"},{"revision":null,"url":"assets/icons/slash-lg.svg"},{"revision":null,"url":"assets/icons/slash-square-fill.svg"},{"revision":null,"url":"assets/icons/slash-square.svg"},{"revision":null,"url":"assets/icons/slash.svg"},{"revision":null,"url":"assets/icons/sliders.svg"},{"revision":null,"url":"assets/icons/sliders2-vertical.svg"},{"revision":null,"url":"assets/icons/sliders2.svg"},{"revision":null,"url":"assets/icons/smartwatch.svg"},{"revision":null,"url":"assets/icons/snapchat.svg"},{"revision":null,"url":"assets/icons/snow.svg"},{"revision":null,"url":"assets/icons/snow2.svg"},{"revision":null,"url":"assets/icons/snow3.svg"},{"revision":null,"url":"assets/icons/sort-alpha-down-alt.svg"},{"revision":null,"url":"assets/icons/sort-alpha-down.svg"},{"revision":null,"url":"assets/icons/sort-alpha-up-alt.svg"},{"revision":null,"url":"assets/icons/sort-alpha-up.svg"},{"revision":null,"url":"assets/icons/sort-down-alt.svg"},{"revision":null,"url":"assets/icons/sort-down.svg"},{"revision":null,"url":"assets/icons/sort-numeric-down-alt.svg"},{"revision":null,"url":"assets/icons/sort-numeric-down.svg"},{"revision":null,"url":"assets/icons/sort-numeric-up-alt.svg"},{"revision":null,"url":"assets/icons/sort-numeric-up.svg"},{"revision":null,"url":"assets/icons/sort-up-alt.svg"},{"revision":null,"url":"assets/icons/sort-up.svg"},{"revision":null,"url":"assets/icons/soundwave.svg"},{"revision":null,"url":"assets/icons/speaker-fill.svg"},{"revision":null,"url":"assets/icons/speaker.svg"},{"revision":null,"url":"assets/icons/speedometer.svg"},{"revision":null,"url":"assets/icons/speedometer2.svg"},{"revision":null,"url":"assets/icons/spellcheck.svg"},{"revision":null,"url":"assets/icons/spotify.svg"},{"revision":null,"url":"assets/icons/square-fill.svg"},{"revision":null,"url":"assets/icons/square-half.svg"},{"revision":null,"url":"assets/icons/square.svg"},{"revision":null,"url":"assets/icons/stack-overflow.svg"},{"revision":null,"url":"assets/icons/stack.svg"},{"revision":null,"url":"assets/icons/star-fill.svg"},{"revision":null,"url":"assets/icons/star-half.svg"},{"revision":null,"url":"assets/icons/star.svg"},{"revision":null,"url":"assets/icons/stars.svg"},{"revision":null,"url":"assets/icons/steam.svg"},{"revision":null,"url":"assets/icons/stickies-fill.svg"},{"revision":null,"url":"assets/icons/stickies.svg"},{"revision":null,"url":"assets/icons/sticky-fill.svg"},{"revision":null,"url":"assets/icons/sticky.svg"},{"revision":null,"url":"assets/icons/stop-btn-fill.svg"},{"revision":null,"url":"assets/icons/stop-btn.svg"},{"revision":null,"url":"assets/icons/stop-circle-fill.svg"},{"revision":null,"url":"assets/icons/stop-circle.svg"},{"revision":null,"url":"assets/icons/stop-fill.svg"},{"revision":null,"url":"assets/icons/stop.svg"},{"revision":null,"url":"assets/icons/stoplights-fill.svg"},{"revision":null,"url":"assets/icons/stoplights.svg"},{"revision":null,"url":"assets/icons/stopwatch-fill.svg"},{"revision":null,"url":"assets/icons/stopwatch.svg"},{"revision":null,"url":"assets/icons/strava.svg"},{"revision":null,"url":"assets/icons/stripe.svg"},{"revision":null,"url":"assets/icons/subscript.svg"},{"revision":null,"url":"assets/icons/subtract.svg"},{"revision":null,"url":"assets/icons/suit-club-fill.svg"},{"revision":null,"url":"assets/icons/suit-club.svg"},{"revision":null,"url":"assets/icons/suit-diamond-fill.svg"},{"revision":null,"url":"assets/icons/suit-diamond.svg"},{"revision":null,"url":"assets/icons/suit-heart-fill.svg"},{"revision":null,"url":"assets/icons/suit-heart.svg"},{"revision":null,"url":"assets/icons/suit-spade-fill.svg"},{"revision":null,"url":"assets/icons/suit-spade.svg"},{"revision":null,"url":"assets/icons/sun-fill.svg"},{"revision":null,"url":"assets/icons/sun.svg"},{"revision":null,"url":"assets/icons/sunglasses.svg"},{"revision":null,"url":"assets/icons/sunrise-fill.svg"},{"revision":null,"url":"assets/icons/sunrise.svg"},{"revision":null,"url":"assets/icons/sunset-fill.svg"},{"revision":null,"url":"assets/icons/sunset.svg"},{"revision":null,"url":"assets/icons/superscript.svg"},{"revision":null,"url":"assets/icons/symmetry-horizontal.svg"},{"revision":null,"url":"assets/icons/symmetry-vertical.svg"},{"revision":null,"url":"assets/icons/table.svg"},{"revision":null,"url":"assets/icons/tablet-fill.svg"},{"revision":null,"url":"assets/icons/tablet-landscape-fill.svg"},{"revision":null,"url":"assets/icons/tablet-landscape.svg"},{"revision":null,"url":"assets/icons/tablet.svg"},{"revision":null,"url":"assets/icons/tag-fill.svg"},{"revision":null,"url":"assets/icons/tag.svg"},{"revision":null,"url":"assets/icons/tags-fill.svg"},{"revision":null,"url":"assets/icons/tags.svg"},{"revision":null,"url":"assets/icons/taxi-front-fill.svg"},{"revision":null,"url":"assets/icons/taxi-front.svg"},{"revision":null,"url":"assets/icons/telegram.svg"},{"revision":null,"url":"assets/icons/telephone-fill.svg"},{"revision":null,"url":"assets/icons/telephone-forward-fill.svg"},{"revision":null,"url":"assets/icons/telephone-forward.svg"},{"revision":null,"url":"assets/icons/telephone-inbound-fill.svg"},{"revision":null,"url":"assets/icons/telephone-inbound.svg"},{"revision":null,"url":"assets/icons/telephone-minus-fill.svg"},{"revision":null,"url":"assets/icons/telephone-minus.svg"},{"revision":null,"url":"assets/icons/telephone-outbound-fill.svg"},{"revision":null,"url":"assets/icons/telephone-outbound.svg"},{"revision":null,"url":"assets/icons/telephone-plus-fill.svg"},{"revision":null,"url":"assets/icons/telephone-plus.svg"},{"revision":null,"url":"assets/icons/telephone-x-fill.svg"},{"revision":null,"url":"assets/icons/telephone-x.svg"},{"revision":null,"url":"assets/icons/telephone.svg"},{"revision":null,"url":"assets/icons/tencent-qq.svg"},{"revision":null,"url":"assets/icons/terminal-dash.svg"},{"revision":null,"url":"assets/icons/terminal-fill.svg"},{"revision":null,"url":"assets/icons/terminal-plus.svg"},{"revision":null,"url":"assets/icons/terminal-split.svg"},{"revision":null,"url":"assets/icons/terminal-x.svg"},{"revision":null,"url":"assets/icons/terminal.svg"},{"revision":null,"url":"assets/icons/text-center.svg"},{"revision":null,"url":"assets/icons/text-indent-left.svg"},{"revision":null,"url":"assets/icons/text-indent-right.svg"},{"revision":null,"url":"assets/icons/text-left.svg"},{"revision":null,"url":"assets/icons/text-paragraph.svg"},{"revision":null,"url":"assets/icons/text-right.svg"},{"revision":null,"url":"assets/icons/text-wrap.svg"},{"revision":null,"url":"assets/icons/textarea-resize.svg"},{"revision":null,"url":"assets/icons/textarea-t.svg"},{"revision":null,"url":"assets/icons/textarea.svg"},{"revision":null,"url":"assets/icons/thermometer-half.svg"},{"revision":null,"url":"assets/icons/thermometer-high.svg"},{"revision":null,"url":"assets/icons/thermometer-low.svg"},{"revision":null,"url":"assets/icons/thermometer-snow.svg"},{"revision":null,"url":"assets/icons/thermometer-sun.svg"},{"revision":null,"url":"assets/icons/thermometer.svg"},{"revision":null,"url":"assets/icons/three-dots-vertical.svg"},{"revision":null,"url":"assets/icons/three-dots.svg"},{"revision":null,"url":"assets/icons/thunderbolt-fill.svg"},{"revision":null,"url":"assets/icons/thunderbolt.svg"},{"revision":null,"url":"assets/icons/ticket-detailed-fill.svg"},{"revision":null,"url":"assets/icons/ticket-detailed.svg"},{"revision":null,"url":"assets/icons/ticket-fill.svg"},{"revision":null,"url":"assets/icons/ticket-perforated-fill.svg"},{"revision":null,"url":"assets/icons/ticket-perforated.svg"},{"revision":null,"url":"assets/icons/ticket.svg"},{"revision":null,"url":"assets/icons/tiktok.svg"},{"revision":null,"url":"assets/icons/toggle-off.svg"},{"revision":null,"url":"assets/icons/toggle-on.svg"},{"revision":null,"url":"assets/icons/toggle2-off.svg"},{"revision":null,"url":"assets/icons/toggle2-on.svg"},{"revision":null,"url":"assets/icons/toggles.svg"},{"revision":null,"url":"assets/icons/toggles2.svg"},{"revision":null,"url":"assets/icons/tools.svg"},{"revision":null,"url":"assets/icons/tornado.svg"},{"revision":null,"url":"assets/icons/train-freight-front-fill.svg"},{"revision":null,"url":"assets/icons/train-freight-front.svg"},{"revision":null,"url":"assets/icons/train-front-fill.svg"},{"revision":null,"url":"assets/icons/train-front.svg"},{"revision":null,"url":"assets/icons/train-lightrail-front-fill.svg"},{"revision":null,"url":"assets/icons/train-lightrail-front.svg"},{"revision":null,"url":"assets/icons/translate.svg"},{"revision":null,"url":"assets/icons/trash-fill.svg"},{"revision":null,"url":"assets/icons/trash.svg"},{"revision":null,"url":"assets/icons/trash2-fill.svg"},{"revision":null,"url":"assets/icons/trash2.svg"},{"revision":null,"url":"assets/icons/trash3-fill.svg"},{"revision":null,"url":"assets/icons/trash3.svg"},{"revision":null,"url":"assets/icons/tree-fill.svg"},{"revision":null,"url":"assets/icons/tree.svg"},{"revision":null,"url":"assets/icons/trello.svg"},{"revision":null,"url":"assets/icons/triangle-fill.svg"},{"revision":null,"url":"assets/icons/triangle-half.svg"},{"revision":null,"url":"assets/icons/triangle.svg"},{"revision":null,"url":"assets/icons/trophy-fill.svg"},{"revision":null,"url":"assets/icons/trophy.svg"},{"revision":null,"url":"assets/icons/tropical-storm.svg"},{"revision":null,"url":"assets/icons/truck-flatbed.svg"},{"revision":null,"url":"assets/icons/truck-front-fill.svg"},{"revision":null,"url":"assets/icons/truck-front.svg"},{"revision":null,"url":"assets/icons/truck.svg"},{"revision":null,"url":"assets/icons/tsunami.svg"},{"revision":null,"url":"assets/icons/tv-fill.svg"},{"revision":null,"url":"assets/icons/tv.svg"},{"revision":null,"url":"assets/icons/twitch.svg"},{"revision":null,"url":"assets/icons/twitter.svg"},{"revision":null,"url":"assets/icons/type-bold.svg"},{"revision":null,"url":"assets/icons/type-h1.svg"},{"revision":null,"url":"assets/icons/type-h2.svg"},{"revision":null,"url":"assets/icons/type-h3.svg"},{"revision":null,"url":"assets/icons/type-italic.svg"},{"revision":null,"url":"assets/icons/type-strikethrough.svg"},{"revision":null,"url":"assets/icons/type-underline.svg"},{"revision":null,"url":"assets/icons/type.svg"},{"revision":null,"url":"assets/icons/ubuntu.svg"},{"revision":null,"url":"assets/icons/ui-checks-grid.svg"},{"revision":null,"url":"assets/icons/ui-checks.svg"},{"revision":null,"url":"assets/icons/ui-radios-grid.svg"},{"revision":null,"url":"assets/icons/ui-radios.svg"},{"revision":null,"url":"assets/icons/umbrella-fill.svg"},{"revision":null,"url":"assets/icons/umbrella.svg"},{"revision":null,"url":"assets/icons/unindent.svg"},{"revision":null,"url":"assets/icons/union.svg"},{"revision":null,"url":"assets/icons/unity.svg"},{"revision":null,"url":"assets/icons/universal-access-circle.svg"},{"revision":null,"url":"assets/icons/universal-access.svg"},{"revision":null,"url":"assets/icons/unlock-fill.svg"},{"revision":null,"url":"assets/icons/unlock.svg"},{"revision":null,"url":"assets/icons/upc-scan.svg"},{"revision":null,"url":"assets/icons/upc.svg"},{"revision":null,"url":"assets/icons/upload.svg"},{"revision":null,"url":"assets/icons/usb-c-fill.svg"},{"revision":null,"url":"assets/icons/usb-c.svg"},{"revision":null,"url":"assets/icons/usb-drive-fill.svg"},{"revision":null,"url":"assets/icons/usb-drive.svg"},{"revision":null,"url":"assets/icons/usb-fill.svg"},{"revision":null,"url":"assets/icons/usb-micro-fill.svg"},{"revision":null,"url":"assets/icons/usb-micro.svg"},{"revision":null,"url":"assets/icons/usb-mini-fill.svg"},{"revision":null,"url":"assets/icons/usb-mini.svg"},{"revision":null,"url":"assets/icons/usb-plug-fill.svg"},{"revision":null,"url":"assets/icons/usb-plug.svg"},{"revision":null,"url":"assets/icons/usb-symbol.svg"},{"revision":null,"url":"assets/icons/usb.svg"},{"revision":null,"url":"assets/icons/user-search.svg"},{"revision":null,"url":"assets/icons/valentine.svg"},{"revision":null,"url":"assets/icons/valentine2.svg"},{"revision":null,"url":"assets/icons/vector-pen.svg"},{"revision":null,"url":"assets/icons/view-list.svg"},{"revision":null,"url":"assets/icons/view-stacked.svg"},{"revision":null,"url":"assets/icons/vimeo.svg"},{"revision":null,"url":"assets/icons/vinyl-fill.svg"},{"revision":null,"url":"assets/icons/vinyl.svg"},{"revision":null,"url":"assets/icons/virus.svg"},{"revision":null,"url":"assets/icons/virus2.svg"},{"revision":null,"url":"assets/icons/voicemail.svg"},{"revision":null,"url":"assets/icons/volume-down-fill.svg"},{"revision":null,"url":"assets/icons/volume-down.svg"},{"revision":null,"url":"assets/icons/volume-mute-fill.svg"},{"revision":null,"url":"assets/icons/volume-mute.svg"},{"revision":null,"url":"assets/icons/volume-off-fill.svg"},{"revision":null,"url":"assets/icons/volume-off.svg"},{"revision":null,"url":"assets/icons/volume-up-fill.svg"},{"revision":null,"url":"assets/icons/volume-up.svg"},{"revision":null,"url":"assets/icons/vr.svg"},{"revision":null,"url":"assets/icons/wallet-fill.svg"},{"revision":null,"url":"assets/icons/wallet.svg"},{"revision":null,"url":"assets/icons/wallet2.svg"},{"revision":null,"url":"assets/icons/watch.svg"},{"revision":null,"url":"assets/icons/water.svg"},{"revision":null,"url":"assets/icons/webcam-fill.svg"},{"revision":null,"url":"assets/icons/webcam.svg"},{"revision":null,"url":"assets/icons/wechat.svg"},{"revision":null,"url":"assets/icons/whatsapp.svg"},{"revision":null,"url":"assets/icons/wifi-1.svg"},{"revision":null,"url":"assets/icons/wifi-2.svg"},{"revision":null,"url":"assets/icons/wifi-off.svg"},{"revision":null,"url":"assets/icons/wifi.svg"},{"revision":null,"url":"assets/icons/wikipedia.svg"},{"revision":null,"url":"assets/icons/wind.svg"},{"revision":null,"url":"assets/icons/window-dash.svg"},{"revision":null,"url":"assets/icons/window-desktop.svg"},{"revision":null,"url":"assets/icons/window-dock.svg"},{"revision":null,"url":"assets/icons/window-fullscreen.svg"},{"revision":null,"url":"assets/icons/window-plus.svg"},{"revision":null,"url":"assets/icons/window-sidebar.svg"},{"revision":null,"url":"assets/icons/window-split.svg"},{"revision":null,"url":"assets/icons/window-stack.svg"},{"revision":null,"url":"assets/icons/window-x.svg"},{"revision":null,"url":"assets/icons/window.svg"},{"revision":null,"url":"assets/icons/windows.svg"},{"revision":null,"url":"assets/icons/wordpress.svg"},{"revision":null,"url":"assets/icons/workplace.svg"},{"revision":null,"url":"assets/icons/workspace.svg"},{"revision":null,"url":"assets/icons/wrench-adjustable-circle-fill.svg"},{"revision":null,"url":"assets/icons/wrench-adjustable-circle.svg"},{"revision":null,"url":"assets/icons/wrench-adjustable.svg"},{"revision":null,"url":"assets/icons/wrench.svg"},{"revision":null,"url":"assets/icons/x-circle-fill.svg"},{"revision":null,"url":"assets/icons/x-circle.svg"},{"revision":null,"url":"assets/icons/x-diamond-fill.svg"},{"revision":null,"url":"assets/icons/x-diamond.svg"},{"revision":null,"url":"assets/icons/x-lg.svg"},{"revision":null,"url":"assets/icons/x-octagon-fill.svg"},{"revision":null,"url":"assets/icons/x-octagon.svg"},{"revision":null,"url":"assets/icons/x-square-fill.svg"},{"revision":null,"url":"assets/icons/x-square.svg"},{"revision":null,"url":"assets/icons/x.svg"},{"revision":null,"url":"assets/icons/xbox.svg"},{"revision":null,"url":"assets/icons/yelp.svg"},{"revision":null,"url":"assets/icons/yin-yang.svg"},{"revision":null,"url":"assets/icons/youtube.svg"},{"revision":null,"url":"assets/icons/zoom-in.svg"},{"revision":null,"url":"assets/icons/zoom-out.svg"},{"revision":null,"url":"assets/index-Bsn_yZpY.css"},{"revision":null,"url":"assets/index-CBloBB_n.js"},{"revision":null,"url":"assets/workbox-window.prod.es5-D5gOYdM7.js"},{"revision":"89099cfae0775e3e086613bca3190493","url":"favicon.ico"},{"revision":"71dcfd191507c31dc79efe3341dfa3b9","url":"favicon.svg"},{"revision":"b7e8a63f6ad75658f99e2fbfbd024215","url":"index.html"},{"revision":"126c55dc030a58db716758479c41c570","url":"maskable-icon-512x512.png"},{"revision":"14a23cc23a2f5a3157ac52e78135346c","url":"pwa-192x192.png"},{"revision":"5a051418936d2f633fc164f78b1662e1","url":"pwa-512x512.png"},{"revision":"3cce535eec4a1c5ce2a2c060fc6323ab","url":"pwa-64x64.png"},{"revision":"70b2e7dddd569ade4466a253ab7b40a9","url":"manifest.webmanifest"}]);b4();let vde;t3(new $4(v4("index.html"),{allowlist:vde}));self.skipWaiting();S4();bde({onCacheCheck(t,e){return{ttl:6e4*5}}});
