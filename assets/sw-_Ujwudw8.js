var vi=Object.defineProperty;var wi=(_t,e,$t)=>e in _t?vi(_t,e,{enumerable:!0,configurable:!0,writable:!0,value:$t}):_t[e]=$t;var _i=(_t,e)=>()=>(e||_t((e={exports:{}}).exports,e),e.exports);var dn=(_t,e,$t)=>wi(_t,typeof e!="symbol"?e+"":e,$t);var $i=_i(exports=>{try{self["workbox:core:7.0.0"]&&_()}catch{}const fallback=(_t,...e)=>{let $t=_t;return e.length>0&&($t+=` :: ${JSON.stringify(e)}`),$t},messageGenerator=fallback;class WorkboxError extends Error{constructor(e,$t){const xt=messageGenerator(e,$t);super(xt),this.name=e,this.details=$t}}const _cacheNameDetails={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},_createCacheName=_t=>[_cacheNameDetails.prefix,_t,_cacheNameDetails.suffix].filter(e=>e&&e.length>0).join("-"),eachCacheNameDetail=_t=>{for(const e of Object.keys(_cacheNameDetails))_t(e)},cacheNames={updateDetails:_t=>{eachCacheNameDetail(e=>{typeof _t[e]=="string"&&(_cacheNameDetails[e]=_t[e])})},getGoogleAnalyticsName:_t=>_t||_createCacheName(_cacheNameDetails.googleAnalytics),getPrecacheName:_t=>_t||_createCacheName(_cacheNameDetails.precache),getPrefix:()=>_cacheNameDetails.prefix,getRuntimeName:_t=>_t||_createCacheName(_cacheNameDetails.runtime),getSuffix:()=>_cacheNameDetails.suffix},logger=null;function waitUntil(_t,e){const $t=e();return _t.waitUntil($t),$t}try{self["workbox:precaching:7.0.0"]&&_()}catch{}const REVISION_SEARCH_PARAM="__WB_REVISION__";function createCacheKey(_t){if(!_t)throw new WorkboxError("add-to-cache-list-unexpected-type",{entry:_t});if(typeof _t=="string"){const kt=new URL(_t,location.href);return{cacheKey:kt.href,url:kt.href}}const{revision:e,url:$t}=_t;if(!$t)throw new WorkboxError("add-to-cache-list-unexpected-type",{entry:_t});if(!e){const kt=new URL($t,location.href);return{cacheKey:kt.href,url:kt.href}}const xt=new URL($t,location.href),At=new URL($t,location.href);return xt.searchParams.set(REVISION_SEARCH_PARAM,e),{cacheKey:xt.href,url:At.href}}class PrecacheInstallReportPlugin{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:$t})=>{$t&&($t.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:$t,cachedResponse:xt})=>{if(e.type==="install"&&$t&&$t.originalRequest&&$t.originalRequest instanceof Request){const At=$t.originalRequest.url;xt?this.notUpdatedURLs.push(At):this.updatedURLs.push(At)}return xt}}}class PrecacheCacheKeyPlugin{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:$t,params:xt})=>{const At=(xt==null?void 0:xt.cacheKey)||this._precacheController.getCacheKeyForURL($t.url);return At?new Request(At,{headers:$t.headers}):$t},this._precacheController=e}}let supportStatus;function canConstructResponseFromBodyStream(){if(supportStatus===void 0){const _t=new Response("");if("body"in _t)try{new Response(_t.body),supportStatus=!0}catch{supportStatus=!1}supportStatus=!1}return supportStatus}async function copyResponse(_t,e){let $t=null;if(_t.url&&($t=new URL(_t.url).origin),$t!==self.location.origin)throw new WorkboxError("cross-origin-copy-response",{origin:$t});const xt=_t.clone(),kt={headers:new Headers(xt.headers),status:xt.status,statusText:xt.statusText},Bt=canConstructResponseFromBodyStream()?xt.body:await xt.blob();return new Response(Bt,kt)}const getFriendlyURL=_t=>new URL(String(_t),location.href).href.replace(new RegExp(`^${location.origin}`),"");function stripParams(_t,e){const $t=new URL(_t);for(const xt of e)$t.searchParams.delete(xt);return $t.href}async function cacheMatchIgnoreParams(_t,e,$t,xt){const At=stripParams(e.url,$t);if(e.url===At)return _t.match(e,xt);const kt=Object.assign(Object.assign({},xt),{ignoreSearch:!0}),Bt=await _t.keys(e,kt);for(const jt of Bt){const Lt=stripParams(jt.url,$t);if(At===Lt)return _t.match(jt,xt)}}class Deferred{constructor(){this.promise=new Promise((e,$t)=>{this.resolve=e,this.reject=$t})}}const quotaErrorCallbacks=new Set;async function executeQuotaErrorCallbacks(){for(const _t of quotaErrorCallbacks)await _t()}function timeout(_t){return new Promise(e=>setTimeout(e,_t))}try{self["workbox:strategies:7.0.0"]&&_()}catch{}function toRequest(_t){return typeof _t=="string"?new Request(_t):_t}class StrategyHandler{constructor(e,$t){this._cacheKeys={},Object.assign(this,$t),this.event=$t.event,this._strategy=e,this._handlerDeferred=new Deferred,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const xt of this._plugins)this._pluginStateMap.set(xt,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:$t}=this;let xt=toRequest(e);if(xt.mode==="navigate"&&$t instanceof FetchEvent&&$t.preloadResponse){const Bt=await $t.preloadResponse;if(Bt)return Bt}const At=this.hasCallback("fetchDidFail")?xt.clone():null;try{for(const Bt of this.iterateCallbacks("requestWillFetch"))xt=await Bt({request:xt.clone(),event:$t})}catch(Bt){if(Bt instanceof Error)throw new WorkboxError("plugin-error-request-will-fetch",{thrownErrorMessage:Bt.message})}const kt=xt.clone();try{let Bt;Bt=await fetch(xt,xt.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const jt of this.iterateCallbacks("fetchDidSucceed"))Bt=await jt({event:$t,request:kt,response:Bt});return Bt}catch(Bt){throw At&&await this.runCallbacks("fetchDidFail",{error:Bt,event:$t,originalRequest:At.clone(),request:kt.clone()}),Bt}}async fetchAndCachePut(e){const $t=await this.fetch(e),xt=$t.clone();return this.waitUntil(this.cachePut(e,xt)),$t}async cacheMatch(e){const $t=toRequest(e);let xt;const{cacheName:At,matchOptions:kt}=this._strategy,Bt=await this.getCacheKey($t,"read"),jt=Object.assign(Object.assign({},kt),{cacheName:At});xt=await caches.match(Bt,jt);for(const Lt of this.iterateCallbacks("cachedResponseWillBeUsed"))xt=await Lt({cacheName:At,matchOptions:kt,cachedResponse:xt,request:Bt,event:this.event})||void 0;return xt}async cachePut(e,$t){const xt=toRequest(e);await timeout(0);const At=await this.getCacheKey(xt,"write");if(!$t)throw new WorkboxError("cache-put-with-no-response",{url:getFriendlyURL(At.url)});const kt=await this._ensureResponseSafeToCache($t);if(!kt)return!1;const{cacheName:Bt,matchOptions:jt}=this._strategy,Lt=await self.caches.open(Bt),Ut=this.hasCallback("cacheDidUpdate"),Nt=Ut?await cacheMatchIgnoreParams(Lt,At.clone(),["__WB_REVISION__"],jt):null;try{await Lt.put(At,Ut?kt.clone():kt)}catch(qt){if(qt instanceof Error)throw qt.name==="QuotaExceededError"&&await executeQuotaErrorCallbacks(),qt}for(const qt of this.iterateCallbacks("cacheDidUpdate"))await qt({cacheName:Bt,oldResponse:Nt,newResponse:kt.clone(),request:At,event:this.event});return!0}async getCacheKey(e,$t){const xt=`${e.url} | ${$t}`;if(!this._cacheKeys[xt]){let At=e;for(const kt of this.iterateCallbacks("cacheKeyWillBeUsed"))At=toRequest(await kt({mode:$t,request:At,event:this.event,params:this.params}));this._cacheKeys[xt]=At}return this._cacheKeys[xt]}hasCallback(e){for(const $t of this._strategy.plugins)if(e in $t)return!0;return!1}async runCallbacks(e,$t){for(const xt of this.iterateCallbacks(e))await xt($t)}*iterateCallbacks(e){for(const $t of this._strategy.plugins)if(typeof $t[e]=="function"){const xt=this._pluginStateMap.get($t);yield kt=>{const Bt=Object.assign(Object.assign({},kt),{state:xt});return $t[e](Bt)}}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let $t=e,xt=!1;for(const At of this.iterateCallbacks("cacheWillUpdate"))if($t=await At({request:this.request,response:$t,event:this.event})||void 0,xt=!0,!$t)break;return xt||$t&&$t.status!==200&&($t=void 0),$t}}class Strategy{constructor(e={}){this.cacheName=cacheNames.getRuntimeName(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[$t]=this.handleAll(e);return $t}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const $t=e.event,xt=typeof e.request=="string"?new Request(e.request):e.request,At="params"in e?e.params:void 0,kt=new StrategyHandler(this,{event:$t,request:xt,params:At}),Bt=this._getResponse(kt,xt,$t),jt=this._awaitComplete(Bt,kt,xt,$t);return[Bt,jt]}async _getResponse(e,$t,xt){await e.runCallbacks("handlerWillStart",{event:xt,request:$t});let At;try{if(At=await this._handle($t,e),!At||At.type==="error")throw new WorkboxError("no-response",{url:$t.url})}catch(kt){if(kt instanceof Error){for(const Bt of e.iterateCallbacks("handlerDidError"))if(At=await Bt({error:kt,event:xt,request:$t}),At)break}if(!At)throw kt}for(const kt of e.iterateCallbacks("handlerWillRespond"))At=await kt({event:xt,request:$t,response:At});return At}async _awaitComplete(e,$t,xt,At){let kt,Bt;try{kt=await e}catch{}try{await $t.runCallbacks("handlerDidRespond",{event:At,request:xt,response:kt}),await $t.doneWaiting()}catch(jt){jt instanceof Error&&(Bt=jt)}if(await $t.runCallbacks("handlerDidComplete",{event:At,request:xt,response:kt,error:Bt}),$t.destroy(),Bt)throw Bt}}class PrecacheStrategy extends Strategy{constructor(e={}){e.cacheName=cacheNames.getPrecacheName(e.cacheName),super(e),this._fallbackToNetwork=e.fallbackToNetwork!==!1,this.plugins.push(PrecacheStrategy.copyRedirectedCacheableResponsesPlugin)}async _handle(e,$t){const xt=await $t.cacheMatch(e);return xt||($t.event&&$t.event.type==="install"?await this._handleInstall(e,$t):await this._handleFetch(e,$t))}async _handleFetch(e,$t){let xt;const At=$t.params||{};if(this._fallbackToNetwork){const kt=At.integrity,Bt=e.integrity,jt=!Bt||Bt===kt;xt=await $t.fetch(new Request(e,{integrity:e.mode!=="no-cors"?Bt||kt:void 0})),kt&&jt&&e.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await $t.cachePut(e,xt.clone()))}else throw new WorkboxError("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return xt}async _handleInstall(e,$t){this._useDefaultCacheabilityPluginIfNeeded();const xt=await $t.fetch(e);if(!await $t.cachePut(e,xt.clone()))throw new WorkboxError("bad-precaching-response",{url:e.url,status:xt.status});return xt}_useDefaultCacheabilityPluginIfNeeded(){let e=null,$t=0;for(const[xt,At]of this.plugins.entries())At!==PrecacheStrategy.copyRedirectedCacheableResponsesPlugin&&(At===PrecacheStrategy.defaultPrecacheCacheabilityPlugin&&(e=xt),At.cacheWillUpdate&&$t++);$t===0?this.plugins.push(PrecacheStrategy.defaultPrecacheCacheabilityPlugin):$t>1&&e!==null&&this.plugins.splice(e,1)}}PrecacheStrategy.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:_t}){return!_t||_t.status>=400?null:_t}};PrecacheStrategy.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:_t}){return _t.redirected?await copyResponse(_t):_t}};class PrecacheController{constructor({cacheName:e,plugins:$t=[],fallbackToNetwork:xt=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new PrecacheStrategy({cacheName:cacheNames.getPrecacheName(e),plugins:[...$t,new PrecacheCacheKeyPlugin({precacheController:this})],fallbackToNetwork:xt}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){const $t=[];for(const xt of e){typeof xt=="string"?$t.push(xt):xt&&xt.revision===void 0&&$t.push(xt.url);const{cacheKey:At,url:kt}=createCacheKey(xt),Bt=typeof xt!="string"&&xt.revision?"reload":"default";if(this._urlsToCacheKeys.has(kt)&&this._urlsToCacheKeys.get(kt)!==At)throw new WorkboxError("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(kt),secondEntry:At});if(typeof xt!="string"&&xt.integrity){if(this._cacheKeysToIntegrities.has(At)&&this._cacheKeysToIntegrities.get(At)!==xt.integrity)throw new WorkboxError("add-to-cache-list-conflicting-integrities",{url:kt});this._cacheKeysToIntegrities.set(At,xt.integrity)}if(this._urlsToCacheKeys.set(kt,At),this._urlsToCacheModes.set(kt,Bt),$t.length>0){const jt=`Workbox is precaching URLs without revision info: ${$t.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(jt)}}}install(e){return waitUntil(e,async()=>{const $t=new PrecacheInstallReportPlugin;this.strategy.plugins.push($t);for(const[kt,Bt]of this._urlsToCacheKeys){const jt=this._cacheKeysToIntegrities.get(Bt),Lt=this._urlsToCacheModes.get(kt),Ut=new Request(kt,{integrity:jt,cache:Lt,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:Bt},request:Ut,event:e}))}const{updatedURLs:xt,notUpdatedURLs:At}=$t;return{updatedURLs:xt,notUpdatedURLs:At}})}activate(e){return waitUntil(e,async()=>{const $t=await self.caches.open(this.strategy.cacheName),xt=await $t.keys(),At=new Set(this._urlsToCacheKeys.values()),kt=[];for(const Bt of xt)At.has(Bt.url)||(await $t.delete(Bt),kt.push(Bt.url));return{deletedURLs:kt}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){const $t=new URL(e,location.href);return this._urlsToCacheKeys.get($t.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){const $t=e instanceof Request?e.url:e,xt=this.getCacheKeyForURL($t);if(xt)return(await self.caches.open(this.strategy.cacheName)).match(xt)}createHandlerBoundToURL(e){const $t=this.getCacheKeyForURL(e);if(!$t)throw new WorkboxError("non-precached-url",{url:e});return xt=>(xt.request=new Request(e),xt.params=Object.assign({cacheKey:$t},xt.params),this.strategy.handle(xt))}}let precacheController;const getOrCreatePrecacheController=()=>(precacheController||(precacheController=new PrecacheController),precacheController);try{self["workbox:routing:7.0.0"]&&_()}catch{}const defaultMethod="GET",normalizeHandler=_t=>_t&&typeof _t=="object"?_t:{handle:_t};class Route{constructor(e,$t,xt=defaultMethod){this.handler=normalizeHandler($t),this.match=e,this.method=xt}setCatchHandler(e){this.catchHandler=normalizeHandler(e)}}class RegExpRoute extends Route{constructor(e,$t,xt){const At=({url:kt})=>{const Bt=e.exec(kt.href);if(Bt&&!(kt.origin!==location.origin&&Bt.index!==0))return Bt.slice(1)};super(At,$t,xt)}}class Router{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{const{request:$t}=e,xt=this.handleRequest({request:$t,event:e});xt&&e.respondWith(xt)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&e.data.type==="CACHE_URLS"){const{payload:$t}=e.data,xt=Promise.all($t.urlsToCache.map(At=>{typeof At=="string"&&(At=[At]);const kt=new Request(...At);return this.handleRequest({request:kt,event:e})}));e.waitUntil(xt),e.ports&&e.ports[0]&&xt.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:$t}){const xt=new URL(e.url,location.href);if(!xt.protocol.startsWith("http"))return;const At=xt.origin===location.origin,{params:kt,route:Bt}=this.findMatchingRoute({event:$t,request:e,sameOrigin:At,url:xt});let jt=Bt&&Bt.handler;const Lt=e.method;if(!jt&&this._defaultHandlerMap.has(Lt)&&(jt=this._defaultHandlerMap.get(Lt)),!jt)return;let Ut;try{Ut=jt.handle({url:xt,request:e,event:$t,params:kt})}catch(qt){Ut=Promise.reject(qt)}const Nt=Bt&&Bt.catchHandler;return Ut instanceof Promise&&(this._catchHandler||Nt)&&(Ut=Ut.catch(async qt=>{if(Nt)try{return await Nt.handle({url:xt,request:e,event:$t,params:kt})}catch(Kt){Kt instanceof Error&&(qt=Kt)}if(this._catchHandler)return this._catchHandler.handle({url:xt,request:e,event:$t});throw qt})),Ut}findMatchingRoute({url:e,sameOrigin:$t,request:xt,event:At}){const kt=this._routes.get(xt.method)||[];for(const Bt of kt){let jt;const Lt=Bt.match({url:e,sameOrigin:$t,request:xt,event:At});if(Lt)return jt=Lt,(Array.isArray(jt)&&jt.length===0||Lt.constructor===Object&&Object.keys(Lt).length===0||typeof Lt=="boolean")&&(jt=void 0),{route:Bt,params:jt}}return{}}setDefaultHandler(e,$t=defaultMethod){this._defaultHandlerMap.set($t,normalizeHandler(e))}setCatchHandler(e){this._catchHandler=normalizeHandler(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new WorkboxError("unregister-route-but-not-found-with-method",{method:e.method});const $t=this._routes.get(e.method).indexOf(e);if($t>-1)this._routes.get(e.method).splice($t,1);else throw new WorkboxError("unregister-route-route-not-registered")}}let defaultRouter;const getOrCreateDefaultRouter=()=>(defaultRouter||(defaultRouter=new Router,defaultRouter.addFetchListener(),defaultRouter.addCacheListener()),defaultRouter);function registerRoute(_t,e,$t){let xt;if(typeof _t=="string"){const kt=new URL(_t,location.href),Bt=({url:jt})=>jt.href===kt.href;xt=new Route(Bt,e,$t)}else if(_t instanceof RegExp)xt=new RegExpRoute(_t,e,$t);else if(typeof _t=="function")xt=new Route(_t,e,$t);else if(_t instanceof Route)xt=_t;else throw new WorkboxError("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return getOrCreateDefaultRouter().registerRoute(xt),xt}function removeIgnoredSearchParams(_t,e=[]){for(const $t of[..._t.searchParams.keys()])e.some(xt=>xt.test($t))&&_t.searchParams.delete($t);return _t}function*generateURLVariations(_t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:$t="index.html",cleanURLs:xt=!0,urlManipulation:At}={}){const kt=new URL(_t,location.href);kt.hash="",yield kt.href;const Bt=removeIgnoredSearchParams(kt,e);if(yield Bt.href,$t&&Bt.pathname.endsWith("/")){const jt=new URL(Bt.href);jt.pathname+=$t,yield jt.href}if(xt){const jt=new URL(Bt.href);jt.pathname+=".html",yield jt.href}if(At){const jt=At({url:kt});for(const Lt of jt)yield Lt.href}}class PrecacheRoute extends Route{constructor(e,$t){const xt=({request:At})=>{const kt=e.getURLsToCacheKeys();for(const Bt of generateURLVariations(At.url,$t)){const jt=kt.get(Bt);if(jt){const Lt=e.getIntegrityForCacheKey(jt);return{cacheKey:jt,integrity:Lt}}}};super(xt,e.strategy)}}function addRoute(_t){const e=getOrCreatePrecacheController(),$t=new PrecacheRoute(e,_t);registerRoute($t)}const SUBSTRING_TO_FIND="-precache-",deleteOutdatedCaches=async(_t,e=SUBSTRING_TO_FIND)=>{const xt=(await self.caches.keys()).filter(At=>At.includes(e)&&At.includes(self.registration.scope)&&At!==_t);return await Promise.all(xt.map(At=>self.caches.delete(At))),xt};function cleanupOutdatedCaches(){self.addEventListener("activate",_t=>{const e=cacheNames.getPrecacheName();_t.waitUntil(deleteOutdatedCaches(e).then($t=>{}))})}function createHandlerBoundToURL(_t){return getOrCreatePrecacheController().createHandlerBoundToURL(_t)}function precache(_t){getOrCreatePrecacheController().precache(_t)}function precacheAndRoute(_t,e){precache(_t),addRoute(e)}function clientsClaim(){self.addEventListener("activate",()=>self.clients.claim())}class NavigationRoute extends Route{constructor(e,{allowlist:$t=[/./],denylist:xt=[]}={}){super(At=>this._match(At),e),this._allowlist=$t,this._denylist=xt}_match({url:e,request:$t}){if($t&&$t.mode!=="navigate")return!1;const xt=e.pathname+e.search;for(const At of this._denylist)if(At.test(xt))return!1;return!!this._allowlist.some(At=>At.test(xt))}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function getDefaultExportFromCjs(_t){return _t&&_t.__esModule&&Object.prototype.hasOwnProperty.call(_t,"default")?_t.default:_t}function getAugmentedNamespace(_t){if(_t.__esModule)return _t;var e=_t.default;if(typeof e=="function"){var $t=function xt(){return this instanceof xt?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};$t.prototype=e.prototype}else $t={};return Object.defineProperty($t,"__esModule",{value:!0}),Object.keys(_t).forEach(function(xt){var At=Object.getOwnPropertyDescriptor(_t,xt);Object.defineProperty($t,xt,At.get?At:{enumerable:!0,get:function(){return _t[xt]}})}),$t}var freeGlobal$1=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$a=root.Symbol,_Symbol=Symbol$a,Symbol$9=_Symbol,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty,nativeObjectToString$1=objectProto$2.toString,symToStringTag$1=Symbol$9?Symbol$9.toStringTag:void 0;function getRawTag$1(_t){var e=hasOwnProperty$3.call(_t,symToStringTag$1),$t=_t[symToStringTag$1];try{_t[symToStringTag$1]=void 0;var xt=!0}catch{}var At=nativeObjectToString$1.call(_t);return xt&&(e?_t[symToStringTag$1]=$t:delete _t[symToStringTag$1]),At}var _getRawTag=getRawTag$1,objectProto$1=Object.prototype,nativeObjectToString=objectProto$1.toString;function objectToString$2(_t){return nativeObjectToString.call(_t)}var _objectToString=objectToString$2,Symbol$8=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$8?Symbol$8.toStringTag:void 0;function baseGetTag$1(_t){return _t==null?_t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_t)?getRawTag(_t):objectToString$1(_t)}var _baseGetTag=baseGetTag$1;function overArg$1(_t,e){return function($t){return _t(e($t))}}var _overArg=overArg$1,overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1;function isObjectLike$1(_t){return _t!=null&&typeof _t=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(_t){if(!isObjectLike(_t)||baseGetTag(_t)!=objectTag)return!1;var e=getPrototype(_t);if(e===null)return!0;var $t=hasOwnProperty$2.call(e,"constructor")&&e.constructor;return typeof $t=="function"&&$t instanceof $t&&funcToString.call($t)==objectCtorString}var isPlainObject_1=isPlainObject;const isPlainObject$1=getDefaultExportFromCjs(isPlainObject_1);function base$5(_t,e){if(_t.length>=255)throw new TypeError("Alphabet too long");for(var $t=new Uint8Array(256),xt=0;xt<$t.length;xt++)$t[xt]=255;for(var At=0;At<_t.length;At++){var kt=_t.charAt(At),Bt=kt.charCodeAt(0);if($t[Bt]!==255)throw new TypeError(kt+" is ambiguous");$t[Bt]=At}var jt=_t.length,Lt=_t.charAt(0),Ut=Math.log(jt)/Math.log(256),Nt=Math.log(256)/Math.log(jt);function qt(Vt){if(Vt instanceof Uint8Array||(ArrayBuffer.isView(Vt)?Vt=new Uint8Array(Vt.buffer,Vt.byteOffset,Vt.byteLength):Array.isArray(Vt)&&(Vt=Uint8Array.from(Vt))),!(Vt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Vt.length===0)return"";for(var Ht=0,Jt=0,rr=0,Qt=Vt.length;rr!==Qt&&Vt[rr]===0;)rr++,Ht++;for(var Wt=(Qt-rr)*Nt+1>>>0,nr=new Uint8Array(Wt);rr!==Qt;){for(var yr=Vt[rr],vr=0,Ir=Wt-1;(yr!==0||vr<Jt)&&Ir!==-1;Ir--,vr++)yr+=256*nr[Ir]>>>0,nr[Ir]=yr%jt>>>0,yr=yr/jt>>>0;if(yr!==0)throw new Error("Non-zero carry");Jt=vr,rr++}for(var xr=Wt-Jt;xr!==Wt&&nr[xr]===0;)xr++;for(var Or=Lt.repeat(Ht);xr<Wt;++xr)Or+=_t.charAt(nr[xr]);return Or}function Kt(Vt){if(typeof Vt!="string")throw new TypeError("Expected String");if(Vt.length===0)return new Uint8Array;var Ht=0;if(Vt[Ht]!==" "){for(var Jt=0,rr=0;Vt[Ht]===Lt;)Jt++,Ht++;for(var Qt=(Vt.length-Ht)*Ut+1>>>0,Wt=new Uint8Array(Qt);Vt[Ht];){var nr=$t[Vt.charCodeAt(Ht)];if(nr===255)return;for(var yr=0,vr=Qt-1;(nr!==0||yr<rr)&&vr!==-1;vr--,yr++)nr+=jt*Wt[vr]>>>0,Wt[vr]=nr%256>>>0,nr=nr/256>>>0;if(nr!==0)throw new Error("Non-zero carry");rr=yr,Ht++}if(Vt[Ht]!==" "){for(var Ir=Qt-rr;Ir!==Qt&&Wt[Ir]===0;)Ir++;for(var xr=new Uint8Array(Jt+(Qt-Ir)),Or=Jt;Ir!==Qt;)xr[Or++]=Wt[Ir++];return xr}}}function zt(Vt){var Ht=Kt(Vt);if(Ht)return Ht;throw new Error(`Non-${e} character`)}return{encode:qt,decodeUnsafe:Kt,decode:zt}}var src$3=base$5,_brrp__multiformats_scope_baseX$3=src$3;const equals$6=(_t,e)=>{if(_t===e)return!0;if(_t.byteLength!==e.byteLength)return!1;for(let $t=0;$t<_t.byteLength;$t++)if(_t[$t]!==e[$t])return!1;return!0},coerce$3=_t=>{if(_t instanceof Uint8Array&&_t.constructor.name==="Uint8Array")return _t;if(_t instanceof ArrayBuffer)return new Uint8Array(_t);if(ArrayBuffer.isView(_t))return new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$5=class{constructor(e,$t,xt){this.name=e,this.prefix=$t,this.baseEncode=xt}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(e,$t,xt){if(this.name=e,this.prefix=$t,$t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$t.codePointAt(0),this.baseDecode=xt}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}},ComposedDecoder$3=class{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const $t=e[0],xt=this.decoders[$t];if(xt)return xt.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(_t,e)=>new ComposedDecoder$3({..._t.decoders||{[_t.prefix]:_t},...e.decoders||{[e.prefix]:e}});let Codec$3=class{constructor(e,$t,xt,At){this.name=e,this.prefix=$t,this.baseEncode=xt,this.baseDecode=At,this.encoder=new Encoder$5(e,$t,xt),this.decoder=new Decoder$3(e,$t,At)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$a=({name:_t,prefix:e,encode:$t,decode:xt})=>new Codec$3(_t,e,$t,xt),baseX$3=({prefix:_t,name:e,alphabet:$t})=>{const{encode:xt,decode:At}=_brrp__multiformats_scope_baseX$3($t,e);return from$a({prefix:_t,name:e,encode:xt,decode:kt=>coerce$3(At(kt))})},decode$o=(_t,e,$t,xt)=>{const At={};for(let Nt=0;Nt<e.length;++Nt)At[e[Nt]]=Nt;let kt=_t.length;for(;_t[kt-1]==="=";)--kt;const Bt=new Uint8Array(kt*$t/8|0);let jt=0,Lt=0,Ut=0;for(let Nt=0;Nt<kt;++Nt){const qt=At[_t[Nt]];if(qt===void 0)throw new SyntaxError(`Non-${xt} character`);Lt=Lt<<$t|qt,jt+=$t,jt>=8&&(jt-=8,Bt[Ut++]=255&Lt>>jt)}if(jt>=$t||255&Lt<<8-jt)throw new SyntaxError("Unexpected end of data");return Bt},encode$h=(_t,e,$t)=>{const xt=e[e.length-1]==="=",At=(1<<$t)-1;let kt="",Bt=0,jt=0;for(let Lt=0;Lt<_t.length;++Lt)for(jt=jt<<8|_t[Lt],Bt+=8;Bt>$t;)Bt-=$t,kt+=e[At&jt>>Bt];if(Bt&&(kt+=e[At&jt<<$t-Bt]),xt)for(;kt.length*$t&7;)kt+="=";return kt},rfc4648$3=({name:_t,prefix:e,bitsPerChar:$t,alphabet:xt})=>from$a({prefix:e,name:_t,encode(At){return encode$h(At,xt,$t)},decode(At){return decode$o(At,xt,$t,_t)}});rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const base64url$2=rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const textEncoder$6=new TextEncoder,textDecoder$4=new TextDecoder;let Encoder$4=class ui{static base64UrlToBytes(e){return base64url$2.baseDecode(e)}static base64UrlToObject(e){const $t=base64url$2.baseDecode(e);return ui.bytesToObject($t)}static bytesToBase64Url(e){return base64url$2.baseEncode(e)}static bytesToString(e){return textDecoder$4.decode(e)}static bytesToObject(e){const $t=ui.bytesToString(e);return JSON.parse($t)}static objectToBytes(e){const $t=JSON.stringify(e);return textEncoder$6.encode($t)}static stringToBase64Url(e){const $t=textEncoder$6.encode(e);return base64url$2.baseEncode($t)}static stringToBytes(e){return textEncoder$6.encode(e)}};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const P$2=2n**255n-19n,N$2=2n**252n+27742317777372353535851937790883648493n,Gx$1=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gy$1=0x6666666666666666666666666666666666666666666666666666666666666658n,CURVE$1={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:P$2,n:N$2,h:8,Gx:Gx$1,Gy:Gy$1},err$1=(_t="")=>{throw new Error(_t)},str$1=_t=>typeof _t=="string",au8$1=(_t,e)=>!(_t instanceof Uint8Array)||typeof e=="number"&&e>0&&_t.length!==e?err$1("Uint8Array expected"):_t,u8n$4=_t=>new Uint8Array(_t),toU8$1=(_t,e)=>au8$1(str$1(_t)?h2b$3(_t):u8n$4(_t),e),mod$4=(_t,e=P$2)=>{let $t=_t%e;return $t>=0n?$t:e+$t},isPoint$1=_t=>_t instanceof Point$4?_t:err$1("Point expected");let Gpows$1,Point$4=class oi{constructor(e,$t,xt,At){this.ex=e,this.ey=$t,this.ez=xt,this.et=At}static fromAffine(e){return new oi(e.x,e.y,1n,mod$4(e.x*e.y))}static fromHex(e,$t=!0){const{d:xt}=CURVE$1;e=toU8$1(e,32);const At=e.slice();At[31]=e[31]&-129;const kt=b2n_LE(At);kt===0n||($t&&!(0n<kt&&kt<P$2)&&err$1("bad y coord 1"),!$t&&!(0n<kt&&kt<2n**256n)&&err$1("bad y coord 2"));const Bt=mod$4(kt*kt),jt=mod$4(Bt-1n),Lt=mod$4(xt*Bt+1n);let{isValid:Ut,value:Nt}=uvRatio$1(jt,Lt);Ut||err$1("bad y coordinate 3");const qt=(Nt&1n)===1n;return(e[31]&128)!==0!==qt&&(Nt=mod$4(-Nt)),new oi(Nt,kt,1n,mod$4(Nt*kt))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:$t,ey:xt,ez:At}=this,{ex:kt,ey:Bt,ez:jt}=isPoint$1(e),Lt=mod$4($t*jt),Ut=mod$4(kt*At),Nt=mod$4(xt*jt),qt=mod$4(Bt*At);return Lt===Ut&&Nt===qt}is0(){return this.equals(I$2)}negate(){return new oi(mod$4(-this.ex),this.ey,this.ez,mod$4(-this.et))}double(){const{ex:e,ey:$t,ez:xt}=this,{a:At}=CURVE$1,kt=mod$4(e*e),Bt=mod$4($t*$t),jt=mod$4(2n*mod$4(xt*xt)),Lt=mod$4(At*kt),Ut=e+$t,Nt=mod$4(mod$4(Ut*Ut)-kt-Bt),qt=Lt+Bt,Kt=qt-jt,zt=Lt-Bt,Vt=mod$4(Nt*Kt),Ht=mod$4(qt*zt),Jt=mod$4(Nt*zt),rr=mod$4(Kt*qt);return new oi(Vt,Ht,rr,Jt)}add(e){const{ex:$t,ey:xt,ez:At,et:kt}=this,{ex:Bt,ey:jt,ez:Lt,et:Ut}=isPoint$1(e),{a:Nt,d:qt}=CURVE$1,Kt=mod$4($t*Bt),zt=mod$4(xt*jt),Vt=mod$4(kt*qt*Ut),Ht=mod$4(At*Lt),Jt=mod$4(($t+xt)*(Bt+jt)-Kt-zt),rr=mod$4(Ht-Vt),Qt=mod$4(Ht+Vt),Wt=mod$4(zt-Nt*Kt),nr=mod$4(Jt*rr),yr=mod$4(Qt*Wt),vr=mod$4(Jt*Wt),Ir=mod$4(rr*Qt);return new oi(nr,yr,Ir,vr)}mul(e,$t=!0){if(e===0n)return $t===!0?err$1("cannot multiply by 0"):I$2;if(typeof e=="bigint"&&0n<e&&e<N$2||err$1("invalid scalar, must be < L"),!$t&&this.is0()||e===1n)return this;if(this.equals(G$3))return wNAF$4(e).p;let xt=I$2,At=G$3;for(let kt=this;e>0n;kt=kt.double(),e>>=1n)e&1n?xt=xt.add(kt):$t&&(At=At.add(kt));return xt}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(CURVE$1.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(N$2/2n,!1).double();return N$2%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:$t,ez:xt}=this;if(this.is0())return{x:0n,y:0n};const At=invert$3(xt);return mod$4(xt*At)!==1n&&err$1("invalid inverse"),{x:mod$4(e*At),y:mod$4($t*At)}}toRawBytes(){const{x:e,y:$t}=this.toAffine(),xt=n2b_32LE($t);return xt[31]|=e&1n?128:0,xt}toHex(){return b2h$1(this.toRawBytes())}};Point$4.BASE=new Point$4(Gx$1,Gy$1,1n,mod$4(Gx$1*Gy$1));Point$4.ZERO=new Point$4(0n,1n,1n,0n);const{BASE:G$3,ZERO:I$2}=Point$4,padh$1=(_t,e)=>_t.toString(16).padStart(e,"0"),b2h$1=_t=>Array.from(_t).map(e=>padh$1(e,2)).join(""),h2b$3=_t=>{const e=_t.length;(!str$1(_t)||e%2)&&err$1("hex invalid 1");const $t=u8n$4(e/2);for(let xt=0;xt<$t.length;xt++){const At=xt*2,kt=_t.slice(At,At+2),Bt=Number.parseInt(kt,16);(Number.isNaN(Bt)||Bt<0)&&err$1("hex invalid 2"),$t[xt]=Bt}return $t},n2b_32LE=_t=>h2b$3(padh$1(_t,32*2)).reverse(),b2n_LE=_t=>BigInt("0x"+b2h$1(u8n$4(au8$1(_t)).reverse())),concatB$1=(..._t)=>{const e=u8n$4(_t.reduce((xt,At)=>xt+au8$1(At).length,0));let $t=0;return _t.forEach(xt=>{e.set(xt,$t),$t+=xt.length}),e},invert$3=(_t,e=P$2)=>{(_t===0n||e<=0n)&&err$1("no inverse n="+_t+" mod="+e);let $t=mod$4(_t,e),xt=e,At=0n,kt=1n;for(;$t!==0n;){const Bt=xt/$t,jt=xt%$t,Lt=At-kt*Bt;xt=$t,$t=jt,At=kt,kt=Lt}return xt===1n?mod$4(At,e):err$1("no inverse")},pow2$2=(_t,e)=>{let $t=_t;for(;e-- >0n;)$t*=$t,$t%=P$2;return $t},pow_2_252_3=_t=>{const $t=_t*_t%P$2*_t%P$2,xt=pow2$2($t,2n)*$t%P$2,At=pow2$2(xt,1n)*_t%P$2,kt=pow2$2(At,5n)*At%P$2,Bt=pow2$2(kt,10n)*kt%P$2,jt=pow2$2(Bt,20n)*Bt%P$2,Lt=pow2$2(jt,40n)*jt%P$2,Ut=pow2$2(Lt,80n)*Lt%P$2,Nt=pow2$2(Ut,80n)*Lt%P$2,qt=pow2$2(Nt,10n)*kt%P$2;return{pow_p_5_8:pow2$2(qt,2n)*_t%P$2,b2:$t}},RM1=19681161376707505956807079304988542015446066515923890162744021073123829784752n,uvRatio$1=(_t,e)=>{const $t=mod$4(e*e*e),xt=mod$4($t*$t*e),At=pow_2_252_3(_t*xt).pow_p_5_8;let kt=mod$4(_t*$t*At);const Bt=mod$4(e*kt*kt),jt=kt,Lt=mod$4(kt*RM1),Ut=Bt===_t,Nt=Bt===mod$4(-_t),qt=Bt===mod$4(-_t*RM1);return Ut&&(kt=jt),(Nt||qt)&&(kt=Lt),(mod$4(kt)&1n)===1n&&(kt=mod$4(-kt)),{isValid:Ut||Nt,value:kt}},modL_LE=_t=>mod$4(b2n_LE(_t),N$2);let _shaS;const sha512a=(..._t)=>etc$1.sha512Async(..._t),sha512s=(..._t)=>typeof _shaS=="function"?_shaS(..._t):err$1("etc.sha512Sync not set"),hash2extK=_t=>{const e=_t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const $t=_t.slice(32,64),xt=modL_LE(e),At=G$3.mul(xt),kt=At.toRawBytes();return{head:e,prefix:$t,scalar:xt,point:At,pointBytes:kt}},getExtendedPublicKeyAsync=_t=>sha512a(toU8$1(_t,32)).then(hash2extK),getExtendedPublicKey=_t=>hash2extK(sha512s(toU8$1(_t,32))),getPublicKeyAsync=_t=>getExtendedPublicKeyAsync(_t).then(e=>e.pointBytes);function hashFinish(_t,e){return sha512a(e.hashable).then(e.finish)}const _sign=(_t,e,$t)=>{const{pointBytes:xt,scalar:At}=_t,kt=modL_LE(e),Bt=G$3.mul(kt).toRawBytes();return{hashable:concatB$1(Bt,xt,$t),finish:Ut=>{const Nt=mod$4(kt+modL_LE(Ut)*At,N$2);return au8$1(concatB$1(Bt,n2b_32LE(Nt)),64)}}},signAsync$1=async(_t,e)=>{const $t=toU8$1(_t),xt=await getExtendedPublicKeyAsync(e),At=await sha512a(xt.prefix,$t);return hashFinish(!0,_sign(xt,At,$t))},_verify=(_t,e,$t)=>{e=toU8$1(e),_t=toU8$1(_t,64);const xt=Point$4.fromHex($t,!1),At=Point$4.fromHex(_t.slice(0,32),!1),kt=b2n_LE(_t.slice(32,64)),Bt=G$3.mul(kt,!1);return{hashable:concatB$1(At.toRawBytes(),xt.toRawBytes(),e),finish:Ut=>{const Nt=modL_LE(Ut);return At.add(xt.mul(Nt,!1)).add(Bt.negate()).clearCofactor().is0()}}},verifyAsync=async(_t,e,$t)=>hashFinish(!0,_verify(_t,e,$t)),cr$2=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,etc$1={bytesToHex:b2h$1,hexToBytes:h2b$3,concatBytes:concatB$1,mod:mod$4,invert:invert$3,randomBytes:_t=>{const e=cr$2();return e||err$1("crypto.getRandomValues must be defined"),e.getRandomValues(u8n$4(_t))},sha512Async:async(..._t)=>{const e=cr$2();e||err$1("crypto.subtle or etc.sha512Async must be defined");const $t=concatB$1(..._t);return u8n$4(await e.subtle.digest("SHA-512",$t.buffer))},sha512Sync:void 0};Object.defineProperties(etc$1,{sha512Sync:{configurable:!1,get(){return _shaS},set(_t){_shaS||(_shaS=_t)}}});const utils$x={getExtendedPublicKeyAsync,getExtendedPublicKey,randomPrivateKey:()=>etc$1.randomBytes(32),precompute(_t=8,e=G$3){return e.multiply(3n),e}},W$8=8,precompute$1=()=>{const _t=[],e=256/W$8+1;let $t=G$3,xt=$t;for(let At=0;At<e;At++){xt=$t,_t.push(xt);for(let kt=1;kt<2**(W$8-1);kt++)xt=xt.add($t),_t.push(xt);$t=xt.double()}return _t},wNAF$4=_t=>{const e=Gpows$1||(Gpows$1=precompute$1()),$t=(Nt,qt)=>{let Kt=qt.negate();return Nt?Kt:qt};let xt=I$2,At=G$3;const kt=1+256/W$8,Bt=2**(W$8-1),jt=BigInt(2**W$8-1),Lt=2**W$8,Ut=BigInt(W$8);for(let Nt=0;Nt<kt;Nt++){const qt=Nt*Bt;let Kt=Number(_t&jt);_t>>=Ut,Kt>Bt&&(Kt-=Lt,_t+=1n);const zt=qt,Vt=qt+Math.abs(Kt)-1,Ht=Nt%2!==0,Jt=Kt<0;Kt===0?At=At.add($t(Ht,e[zt])):xt=xt.add($t(Jt,e[Vt]))}return{p:xt,f:At}};class DwnError extends Error{constructor(e,$t){super(`${e}: ${$t}`),this.code=e,this.name="DwnError"}}var DwnErrorCode;(function(_t){_t.AuthenticateJwsMissing="AuthenticateJwsMissing",_t.AuthenticateDescriptorCidMismatch="AuthenticateDescriptorCidMismatch",_t.AuthenticationMoreThanOneSignatureNotSupported="AuthenticationMoreThanOneSignatureNotSupported",_t.AuthorizationNotGrantedToAuthor="AuthorizationNotGrantedToAuthor",_t.ComputeCidCodecNotSupported="ComputeCidCodecNotSupported",_t.ComputeCidMultihashNotSupported="ComputeCidMultihashNotSupported",_t.Ed25519InvalidJwk="Ed25519InvalidJwk",_t.EventEmitterStreamNotOpenError="EventEmitterStreamNotOpenError",_t.MessagesGrantAuthorizationMismatchedProtocol="EventsGrantAuthorizationMismatchedProtocol",_t.MessagesSubscribeAuthorizationFailed="MessagesSubscribeAuthorizationFailed",_t.MessagesSubscribeEventStreamUnimplemented="MessagesSubscribeEventStreamUnimplemented",_t.GeneralJwsVerifierGetPublicKeyNotFound="GeneralJwsVerifierGetPublicKeyNotFound",_t.GeneralJwsVerifierInvalidSignature="GeneralJwsVerifierInvalidSignature",_t.GrantAuthorizationGrantExpired="GrantAuthorizationGrantExpired",_t.GrantAuthorizationGrantMissing="GrantAuthorizationGrantMissing",_t.GrantAuthorizationGrantRevoked="GrantAuthorizationGrantRevoked",_t.GrantAuthorizationInterfaceMismatch="GrantAuthorizationInterfaceMismatch",_t.GrantAuthorizationMethodMismatch="GrantAuthorizationMethodMismatch",_t.GrantAuthorizationNotGrantedForTenant="GrantAuthorizationNotGrantedForTenant",_t.GrantAuthorizationNotGrantedToAuthor="GrantAuthorizationNotGrantedToAuthor",_t.GrantAuthorizationGrantNotYetActive="GrantAuthorizationGrantNotYetActive",_t.HdKeyDerivationPathInvalid="HdKeyDerivationPathInvalid",_t.JwsVerifySignatureUnsupportedCrv="JwsVerifySignatureUnsupportedCrv",_t.IndexInvalidCursorValueType="IndexInvalidCursorValueType",_t.IndexInvalidCursorSortProperty="IndexInvalidCursorSortProperty",_t.IndexInvalidSortPropertyInMemory="IndexInvalidSortPropertyInMemory",_t.IndexMissingIndexableProperty="IndexMissingIndexableProperty",_t.JwsDecodePlainObjectPayloadInvalid="JwsDecodePlainObjectPayloadInvalid",_t.MessagesReadInvalidCid="MessagesReadInvalidCid",_t.MessagesReadAuthorizationFailed="MessagesReadAuthorizationFailed",_t.MessageGetInvalidCid="MessageGetInvalidCid",_t.MessagesQueryAuthorizationFailed="MessagesQueryAuthorizationFailed",_t.MessagesReadVerifyScopeFailed="MessagesReadVerifyScopeFailed",_t.ParseCidCodecNotSupported="ParseCidCodecNotSupported",_t.ParseCidMultihashNotSupported="ParseCidMultihashNotSupported",_t.PermissionsProtocolCreateGrantRecordsScopeMissingProtocol="PermissionsProtocolCreateGrantRecordsScopeMissingProtocol",_t.PermissionsProtocolCreateRequestRecordsScopeMissingProtocol="PermissionsProtocolCreateRequestRecordsScopeMissingProtocol",_t.PermissionsProtocolGetScopeInvalidProtocol="PermissionsProtocolGetScopeInvalidProtocol",_t.PermissionsProtocolValidateSchemaUnexpectedRecord="PermissionsProtocolValidateSchemaUnexpectedRecord",_t.PermissionsProtocolValidateScopeContextIdProhibitedProperties="PermissionsProtocolValidateScopeContextIdProhibitedProperties",_t.PermissionsProtocolValidateScopeProtocolMismatch="PermissionsProtocolValidateScopeProtocolMismatch",_t.PermissionsProtocolValidateScopeMissingProtocolTag="PermissionsProtocolValidateScopeMissingProtocolTag",_t.PermissionsProtocolValidateRevocationProtocolTagMismatch="PermissionsProtocolValidateRevocationProtocolTagMismatch",_t.PrivateKeySignerUnableToDeduceAlgorithm="PrivateKeySignerUnableToDeduceAlgorithm",_t.PrivateKeySignerUnableToDeduceKeyId="PrivateKeySignerUnableToDeduceKeyId",_t.PrivateKeySignerUnsupportedCurve="PrivateKeySignerUnsupportedCurve",_t.ProtocolAuthorizationActionNotAllowed="ProtocolAuthorizationActionNotAllowed",_t.ProtocolAuthorizationActionRulesNotFound="ProtocolAuthorizationActionRulesNotFound",_t.ProtocolAuthorizationIncorrectDataFormat="ProtocolAuthorizationIncorrectDataFormat",_t.ProtocolAuthorizationIncorrectContextId="ProtocolAuthorizationIncorrectContextId",_t.ProtocolAuthorizationIncorrectProtocolPath="ProtocolAuthorizationIncorrectProtocolPath",_t.ProtocolAuthorizationDuplicateRoleRecipient="ProtocolAuthorizationDuplicateRoleRecipient",_t.ProtocolAuthorizationInvalidSchema="ProtocolAuthorizationInvalidSchema",_t.ProtocolAuthorizationInvalidType="ProtocolAuthorizationInvalidType",_t.ProtocolAuthorizationMatchingRoleRecordNotFound="ProtocolAuthorizationMatchingRoleRecordNotFound",_t.ProtocolAuthorizationMaxSizeInvalid="ProtocolAuthorizationMaxSizeInvalid",_t.ProtocolAuthorizationMinSizeInvalid="ProtocolAuthorizationMinSizeInvalid",_t.ProtocolAuthorizationMissingContextId="ProtocolAuthorizationMissingContextId",_t.ProtocolAuthorizationMissingRuleSet="ProtocolAuthorizationMissingRuleSet",_t.ProtocolAuthorizationParentlessIncorrectProtocolPath="ProtocolAuthorizationParentlessIncorrectProtocolPath",_t.ProtocolAuthorizationNotARole="ProtocolAuthorizationNotARole",_t.ProtocolAuthorizationParentNotFoundConstructingRecordChain="ProtocolAuthorizationParentNotFoundConstructingRecordChain",_t.ProtocolAuthorizationProtocolNotFound="ProtocolAuthorizationProtocolNotFound",_t.ProtocolAuthorizationRoleMissingRecipient="ProtocolAuthorizationRoleMissingRecipient",_t.ProtocolAuthorizationTagsInvalidSchema="ProtocolAuthorizationTagsInvalidSchema",_t.ProtocolsConfigureAuthorizationFailed="ProtocolsConfigureAuthorizationFailed",_t.ProtocolsConfigureDuplicateActorInRuleSet="ProtocolsConfigureDuplicateActorInRuleSet",_t.ProtocolsConfigureDuplicateRoleInRuleSet="ProtocolsConfigureDuplicateRoleInRuleSet",_t.ProtocolsConfigureInvalidSize="ProtocolsConfigureInvalidSize",_t.ProtocolsConfigureInvalidActionMissingOf="ProtocolsConfigureInvalidActionMissingOf",_t.ProtocolsConfigureInvalidActionOfNotAllowed="ProtocolsConfigureInvalidActionOfNotAllowed",_t.ProtocolsConfigureInvalidActionDeleteWithoutCreate="ProtocolsConfigureInvalidActionDeleteWithoutCreate",_t.ProtocolsConfigureInvalidActionUpdateWithoutCreate="ProtocolsConfigureInvalidActionUpdateWithoutCreate",_t.ProtocolsConfigureInvalidRecipientOfAction="ProtocolsConfigureInvalidRecipientOfAction",_t.ProtocolsConfigureInvalidRuleSetRecordType="ProtocolsConfigureInvalidRuleSetRecordType",_t.ProtocolsConfigureInvalidTagSchema="ProtocolsConfigureInvalidTagSchema",_t.ProtocolsConfigureRecordNestingDepthExceeded="ProtocolsConfigureRecordNestingDepthExceeded",_t.ProtocolsConfigureRoleDoesNotExistAtGivenPath="ProtocolsConfigureRoleDoesNotExistAtGivenPath",_t.ProtocolsGrantAuthorizationQueryProtocolScopeMismatch="ProtocolsGrantAuthorizationQueryProtocolScopeMismatch",_t.ProtocolsGrantAuthorizationScopeProtocolMismatch="ProtocolsGrantAuthorizationScopeProtocolMismatch",_t.ProtocolsQueryUnauthorized="ProtocolsQueryUnauthorized",_t.RecordsAuthorDelegatedGrantAndIdExistenceMismatch="RecordsAuthorDelegatedGrantAndIdExistenceMismatch",_t.RecordsAuthorDelegatedGrantCidMismatch="RecordsAuthorDelegatedGrantCidMismatch",_t.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",_t.RecordsAuthorDelegatedGrantNotADelegatedGrant="RecordsAuthorDelegatedGrantNotADelegatedGrant",_t.RecordsDecryptNoMatchingKeyEncryptedFound="RecordsDecryptNoMatchingKeyEncryptedFound",_t.RecordsDeleteAuthorizationFailed="RecordsDeleteAuthorizationFailed",_t.RecordsQueryCreateFilterPublishedSortInvalid="RecordsQueryCreateFilterPublishedSortInvalid",_t.RecordsQueryParseFilterPublishedSortInvalid="RecordsQueryParseFilterPublishedSortInvalid",_t.RecordsGrantAuthorizationConditionPublicationProhibited="RecordsGrantAuthorizationConditionPublicationProhibited",_t.RecordsGrantAuthorizationConditionPublicationRequired="RecordsGrantAuthorizationConditionPublicationRequired",_t.RecordsGrantAuthorizationDeleteProtocolScopeMismatch="RecordsGrantAuthorizationDeleteProtocolScopeMismatch",_t.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch="RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",_t.RecordsGrantAuthorizationScopeContextIdMismatch="RecordsGrantAuthorizationScopeContextIdMismatch",_t.RecordsGrantAuthorizationScopeProtocolMismatch="RecordsGrantAuthorizationScopeProtocolMismatch",_t.RecordsGrantAuthorizationScopeProtocolPathMismatch="RecordsGrantAuthorizationScopeProtocolPathMismatch",_t.RecordsDerivePrivateKeyUnSupportedCurve="RecordsDerivePrivateKeyUnSupportedCurve",_t.RecordsInvalidAncestorKeyDerivationSegment="RecordsInvalidAncestorKeyDerivationSegment",_t.RecordsOwnerDelegatedGrantAndIdExistenceMismatch="RecordsOwnerDelegatedGrantAndIdExistenceMismatch",_t.RecordsOwnerDelegatedGrantCidMismatch="RecordsOwnerDelegatedGrantCidMismatch",_t.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",_t.RecordsOwnerDelegatedGrantNotADelegatedGrant="RecordsOwnerDelegatedGrantNotADelegatedGrant",_t.RecordsProtocolContextDerivationSchemeMissingContextId="RecordsProtocolContextDerivationSchemeMissingContextId",_t.RecordsProtocolPathDerivationSchemeMissingProtocol="RecordsProtocolPathDerivationSchemeMissingProtocol",_t.RecordsQueryFilterMissingRequiredProperties="RecordsQueryFilterMissingRequiredProperties",_t.RecordsReadReturnedMultiple="RecordsReadReturnedMultiple",_t.RecordsReadAuthorizationFailed="RecordsReadAuthorizationFailed",_t.RecordsSubscribeEventStreamUnimplemented="RecordsSubscribeEventStreamUnimplemented",_t.RecordsSubscribeFilterMissingRequiredProperties="RecordsSubscribeFilterMissingRequiredProperties",_t.RecordsSchemasDerivationSchemeMissingSchema="RecordsSchemasDerivationSchemeMissingSchema",_t.RecordsWriteAttestationIntegrityMoreThanOneSignature="RecordsWriteAttestationIntegrityMoreThanOneSignature",_t.RecordsWriteAttestationIntegrityDescriptorCidMismatch="RecordsWriteAttestationIntegrityDescriptorCidMismatch",_t.RecordsWriteAttestationIntegrityInvalidPayloadProperty="RecordsWriteAttestationIntegrityInvalidPayloadProperty",_t.RecordsWriteAuthorizationFailed="RecordsWriteAuthorizationFailed",_t.RecordsWriteCreateMissingSigner="RecordsWriteCreateMissingSigner",_t.RecordsWriteCreateDataAndDataCidMutuallyExclusive="RecordsWriteCreateDataAndDataCidMutuallyExclusive",_t.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive="RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive",_t.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive="RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive",_t.RecordsWriteDataCidMismatch="RecordsWriteDataCidMismatch",_t.RecordsWriteDataSizeMismatch="RecordsWriteDataSizeMismatch",_t.RecordsWriteGetEntryIdUndefinedAuthor="RecordsWriteGetEntryIdUndefinedAuthor",_t.RecordsWriteGetNewestWriteRecordNotFound="RecordsWriteGetNewestWriteRecordNotFound",_t.RecordsWriteGetInitialWriteNotFound="RecordsWriteGetInitialWriteNotFound",_t.RecordsWriteImmutablePropertyChanged="RecordsWriteImmutablePropertyChanged",_t.RecordsWriteMissingSigner="RecordsWriteMissingSigner",_t.RecordsWriteMissingDataInPrevious="RecordsWriteMissingDataInPrevious",_t.RecordsWriteMissingEncodedDataInPrevious="RecordsWriteMissingEncodedDataInPrevious",_t.RecordsWriteMissingProtocol="RecordsWriteMissingProtocol",_t.RecordsWriteMissingSchema="RecordsWriteMissingSchema",_t.RecordsWriteNotAllowedAfterDelete="RecordsWriteNotAllowedAfterDelete",_t.RecordsWriteOwnerAndTenantMismatch="RecordsWriteOwnerAndTenantMismatch",_t.RecordsWriteSignAsOwnerDelegateUnknownAuthor="RecordsWriteSignAsOwnerDelegateUnknownAuthor",_t.RecordsWriteSignAsOwnerUnknownAuthor="RecordsWriteSignAsOwnerUnknownAuthor",_t.RecordsWriteValidateIntegrityAttestationMismatch="RecordsWriteValidateIntegrityAttestationMismatch",_t.RecordsWriteValidateIntegrityContextIdMismatch="RecordsWriteValidateIntegrityContextIdMismatch",_t.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload="RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",_t.RecordsWriteValidateIntegrityDateCreatedMismatch="RecordsWriteValidateIntegrityDateCreatedMismatch",_t.RecordsWriteValidateIntegrityEncryptionCidMismatch="RecordsWriteValidateIntegrityEncryptionCidMismatch",_t.RecordsWriteValidateIntegrityRecordIdUnauthorized="RecordsWriteValidateIntegrityRecordIdUnauthorized",_t.SchemaValidatorAdditionalPropertyNotAllowed="SchemaValidatorAdditionalPropertyNotAllowed",_t.SchemaValidatorFailure="SchemaValidatorFailure",_t.SchemaValidatorSchemaNotFound="SchemaValidatorSchemaNotFound",_t.SchemaValidatorUnevaluatedPropertyNotAllowed="SchemaValidatorUnevaluatedPropertyNotAllowed",_t.Secp256k1KeyNotValid="Secp256k1KeyNotValid",_t.Secp256r1KeyNotValid="Secp256r1KeyNotValid",_t.TimestampInvalid="TimestampInvalid",_t.UrlProtocolNotNormalized="UrlProtocolNotNormalized",_t.UrlProtocolNotNormalizable="UrlProtocolNotNormalizable",_t.UrlSchemaNotNormalized="UrlSchemaNotNormalized"})(DwnErrorCode||(DwnErrorCode={}));var __awaiter$Q=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};function validateKey(_t){if(_t.kty!=="OKP"||_t.crv!=="Ed25519")throw new DwnError(DwnErrorCode.Ed25519InvalidJwk,"invalid jwk. kty MUST be OKP. crv MUST be Ed25519")}function publicKeyToJwk(_t){return{alg:"EdDSA",kty:"OKP",crv:"Ed25519",x:Encoder$4.bytesToBase64Url(_t)}}const ed25519$2={sign:(_t,e)=>__awaiter$Q(void 0,void 0,void 0,function*(){validateKey(e);const $t=Encoder$4.base64UrlToBytes(e.d);return signAsync$1(_t,$t)}),verify:(_t,e,$t)=>__awaiter$Q(void 0,void 0,void 0,function*(){validateKey($t);const xt=Encoder$4.base64UrlToBytes($t.x);return verifyAsync(e,_t,xt)}),generateKeyPair:()=>__awaiter$Q(void 0,void 0,void 0,function*(){const _t=utils$x.randomPrivateKey(),e=yield getPublicKeyAsync(_t),$t=Encoder$4.bytesToBase64Url(_t),xt=publicKeyToJwk(e),At=Object.assign(Object.assign({},xt),{d:$t});return{publicJwk:xt,privateJwk:At}}),publicKeyToJwk:_t=>__awaiter$Q(void 0,void 0,void 0,function*(){return publicKeyToJwk(_t)})};/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const B256=2n**256n,P$1=B256-0x1000003d1n,N$1=B256-0x14551231950b75fc4402da1732fc9bebfn,Gx=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Gy=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,CURVE={p:P$1,n:N$1,a:0n,b:7n,Gx,Gy},fLen=32,crv=_t=>mod$3(mod$3(_t*_t)*_t+CURVE.b),err=(_t="")=>{throw new Error(_t)},big=_t=>typeof _t=="bigint",str=_t=>typeof _t=="string",fe$1=_t=>big(_t)&&0n<_t&&_t<P$1,ge$1=_t=>big(_t)&&0n<_t&&_t<N$1,au8=(_t,e)=>!(_t instanceof Uint8Array)||typeof e=="number"&&e>0&&_t.length!==e?err("Uint8Array expected"):_t,u8n$3=_t=>new Uint8Array(_t),toU8=(_t,e)=>au8(str(_t)?h2b$2(_t):u8n$3(_t),e),mod$3=(_t,e=P$1)=>{let $t=_t%e;return $t>=0n?$t:e+$t},isPoint=_t=>_t instanceof Point$3?_t:err("Point expected");let Gpows,Point$3=class si{constructor(e,$t,xt){this.px=e,this.py=$t,this.pz=xt}static fromAffine(e){return new si(e.x,e.y,1n)}static fromHex(e){e=toU8(e);let $t;const xt=e[0],At=e.subarray(1),kt=slcNum(At,0,fLen),Bt=e.length;if(Bt===33&&[2,3].includes(xt)){fe$1(kt)||err("Point hex invalid: x not FE");let jt=sqrt(crv(kt));const Lt=(jt&1n)===1n;(xt&1)===1!==Lt&&(jt=mod$3(-jt)),$t=new si(kt,jt,1n)}return Bt===65&&xt===4&&($t=new si(kt,slcNum(At,fLen,2*fLen),1n)),$t?$t.ok():err("Point is not on curve")}static fromPrivateKey(e){return G$2.mul(toPriv(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){const{px:$t,py:xt,pz:At}=this,{px:kt,py:Bt,pz:jt}=isPoint(e),Lt=mod$3($t*jt),Ut=mod$3(kt*At),Nt=mod$3(xt*jt),qt=mod$3(Bt*At);return Lt===Ut&&Nt===qt}negate(){return new si(this.px,mod$3(-this.py),this.pz)}double(){return this.add(this)}add(e){const{px:$t,py:xt,pz:At}=this,{px:kt,py:Bt,pz:jt}=isPoint(e),{a:Lt,b:Ut}=CURVE;let Nt=0n,qt=0n,Kt=0n;const zt=mod$3(Ut*3n);let Vt=mod$3($t*kt),Ht=mod$3(xt*Bt),Jt=mod$3(At*jt),rr=mod$3($t+xt),Qt=mod$3(kt+Bt);rr=mod$3(rr*Qt),Qt=mod$3(Vt+Ht),rr=mod$3(rr-Qt),Qt=mod$3($t+At);let Wt=mod$3(kt+jt);return Qt=mod$3(Qt*Wt),Wt=mod$3(Vt+Jt),Qt=mod$3(Qt-Wt),Wt=mod$3(xt+At),Nt=mod$3(Bt+jt),Wt=mod$3(Wt*Nt),Nt=mod$3(Ht+Jt),Wt=mod$3(Wt-Nt),Kt=mod$3(Lt*Qt),Nt=mod$3(zt*Jt),Kt=mod$3(Nt+Kt),Nt=mod$3(Ht-Kt),Kt=mod$3(Ht+Kt),qt=mod$3(Nt*Kt),Ht=mod$3(Vt+Vt),Ht=mod$3(Ht+Vt),Jt=mod$3(Lt*Jt),Qt=mod$3(zt*Qt),Ht=mod$3(Ht+Jt),Jt=mod$3(Vt-Jt),Jt=mod$3(Lt*Jt),Qt=mod$3(Qt+Jt),Vt=mod$3(Ht*Qt),qt=mod$3(qt+Vt),Vt=mod$3(Wt*Qt),Nt=mod$3(rr*Nt),Nt=mod$3(Nt-Vt),Vt=mod$3(rr*Ht),Kt=mod$3(Wt*Kt),Kt=mod$3(Kt+Vt),new si(Nt,qt,Kt)}mul(e,$t=!0){if(!$t&&e===0n)return I$1;if(ge$1(e)||err("invalid scalar"),this.equals(G$2))return wNAF$3(e).p;let xt=I$1,At=G$2;for(let kt=this;e>0n;kt=kt.double(),e>>=1n)e&1n?xt=xt.add(kt):$t&&(At=At.add(kt));return xt}mulAddQUns(e,$t,xt){return this.mul($t,!1).add(e.mul(xt,!1)).ok()}toAffine(){const{px:e,py:$t,pz:xt}=this;if(this.equals(I$1))return{x:0n,y:0n};if(xt===1n)return{x:e,y:$t};const At=inv(xt);return mod$3(xt*At)!==1n&&err("invalid inverse"),{x:mod$3(e*At),y:mod$3($t*At)}}assertValidity(){const{x:e,y:$t}=this.aff();return(!fe$1(e)||!fe$1($t))&&err("Point invalid: x or y"),mod$3($t*$t)===crv(e)?this:err("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){const{x:$t,y:xt}=this.aff();return(e?(xt&1n)===0n?"02":"03":"04")+n2h($t)+(e?"":n2h(xt))}toRawBytes(e=!0){return h2b$2(this.toHex(e))}};Point$3.BASE=new Point$3(Gx,Gy,1n);Point$3.ZERO=new Point$3(0n,1n,0n);const{BASE:G$2,ZERO:I$1}=Point$3,padh=(_t,e)=>_t.toString(16).padStart(e,"0"),b2h=_t=>Array.from(_t).map(e=>padh(e,2)).join(""),h2b$2=_t=>{const e=_t.length;(!str(_t)||e%2)&&err("hex invalid 1");const $t=u8n$3(e/2);for(let xt=0;xt<$t.length;xt++){const At=xt*2,kt=_t.slice(At,At+2),Bt=Number.parseInt(kt,16);(Number.isNaN(Bt)||Bt<0)&&err("hex invalid 2"),$t[xt]=Bt}return $t},b2n$2=_t=>BigInt("0x"+(b2h(_t)||"0")),slcNum=(_t,e,$t)=>b2n$2(_t.slice(e,$t)),n2b=_t=>big(_t)&&_t>=0n&&_t<B256?h2b$2(padh(_t,2*fLen)):err("bigint expected"),n2h=_t=>b2h(n2b(_t)),concatB=(..._t)=>{const e=u8n$3(_t.reduce((xt,At)=>xt+au8(At).length,0));let $t=0;return _t.forEach(xt=>{e.set(xt,$t),$t+=xt.length}),e},inv=(_t,e=P$1)=>{(_t===0n||e<=0n)&&err("no inverse n="+_t+" mod="+e);let $t=mod$3(_t,e),xt=e,At=0n,kt=1n;for(;$t!==0n;){const Bt=xt/$t,jt=xt%$t,Lt=At-kt*Bt;xt=$t,$t=jt,At=kt,kt=Lt}return xt===1n?mod$3(At,e):err("no inverse")},sqrt=_t=>{let e=1n;for(let $t=_t,xt=(P$1+1n)/4n;xt>0n;xt>>=1n)xt&1n&&(e=e*$t%P$1),$t=$t*$t%P$1;return mod$3(e*e)===_t?e:err("sqrt invalid")},toPriv=_t=>(big(_t)||(_t=b2n$2(toU8(_t,fLen))),ge$1(_t)?_t:err("private key out of range")),moreThanHalfN=_t=>_t>N$1>>1n;function getPublicKey$1(_t,e=!0){return Point$3.fromPrivateKey(_t).toRawBytes(e)}let Signature$3=class fi{constructor(e,$t,xt){this.r=e,this.s=$t,this.recovery=xt,this.assertValidity()}static fromCompact(e){return e=toU8(e,64),new fi(slcNum(e,0,fLen),slcNum(e,fLen,2*fLen))}assertValidity(){return ge$1(this.r)&&ge$1(this.s)?this:err()}addRecoveryBit(e){return new fi(this.r,this.s,e)}hasHighS(){return moreThanHalfN(this.s)}recoverPublicKey(e){const{r:$t,s:xt,recovery:At}=this;[0,1,2,3].includes(At)||err("recovery id invalid");const kt=bits2int_modN(toU8(e,32)),Bt=At===2||At===3?$t+N$1:$t;Bt>=P$1&&err("q.x invalid");const jt=At&1?"03":"02",Lt=Point$3.fromHex(jt+n2h(Bt)),Ut=inv(Bt,N$1),Nt=mod$3(-kt*Ut,N$1),qt=mod$3(xt*Ut,N$1);return G$2.mulAddQUns(Lt,Nt,qt)}toCompactRawBytes(){return h2b$2(this.toCompactHex())}toCompactHex(){return n2h(this.r)+n2h(this.s)}};const bits2int=_t=>{const e=_t.length*8-256,$t=b2n$2(_t);return e>0?$t>>BigInt(e):$t},bits2int_modN=_t=>mod$3(bits2int(_t),N$1),i2o=_t=>n2b(_t),cr$1=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let _hmacSync;const optS={lowS:!0},optV={lowS:!0};function prepSig(_t,e,$t=optS){["der","recovered","canonical"].some(qt=>qt in $t)&&err("sign() legacy options not supported");let{lowS:xt}=$t;xt==null&&(xt=!0);const At=bits2int_modN(toU8(_t)),kt=i2o(At),Bt=toPriv(e),jt=[i2o(Bt),kt];let Lt=$t.extraEntropy;if(Lt){Lt===!0&&(Lt=etc.randomBytes(fLen));const qt=toU8(Lt);qt.length!==fLen&&err(),jt.push(qt)}const Ut=At,Nt=qt=>{const Kt=bits2int(qt);if(!ge$1(Kt))return;const zt=inv(Kt,N$1),Vt=G$2.mul(Kt).aff(),Ht=mod$3(Vt.x,N$1);if(Ht===0n)return;const Jt=mod$3(zt*mod$3(Ut+mod$3(Bt*Ht,N$1),N$1),N$1);if(Jt===0n)return;let rr=Jt,Qt=(Vt.x===Ht?0:2)|Number(Vt.y&1n);return xt&&moreThanHalfN(Jt)&&(rr=mod$3(-Jt,N$1),Qt^=1),new Signature$3(Ht,rr,Qt)};return{seed:concatB(...jt),k2sig:Nt}}function hmacDrbg$1(_t){let e=u8n$3(fLen),$t=u8n$3(fLen),xt=0;const At=()=>{e.fill(1),$t.fill(0),xt=0},kt="drbg: tried 1000 values";{const Bt=(...Ut)=>etc.hmacSha256Async($t,e,...Ut),jt=async(Ut=u8n$3())=>{$t=await Bt(u8n$3([0]),Ut),e=await Bt(),Ut.length!==0&&($t=await Bt(u8n$3([1]),Ut),e=await Bt())},Lt=async()=>(xt++>=1e3&&err(kt),e=await Bt(),e);return async(Ut,Nt)=>{At(),await jt(Ut);let qt;for(;!(qt=Nt(await Lt()));)await jt();return At(),qt}}}async function signAsync(_t,e,$t=optS){const{seed:xt,k2sig:At}=prepSig(_t,e,$t);return hmacDrbg$1()(xt,At)}function verify(_t,e,$t,xt=optV){let{lowS:At}=xt;At==null&&(At=!0),"strict"in xt&&err("verify() legacy options not supported");let kt,Bt,jt;const Lt=_t&&typeof _t=="object"&&"r"in _t;!Lt&&toU8(_t).length!==2*fLen&&err("signature must be 64 bytes");try{kt=Lt?new Signature$3(_t.r,_t.s).assertValidity():Signature$3.fromCompact(_t),Bt=bits2int_modN(toU8(e,fLen)),jt=$t instanceof Point$3?$t.ok():Point$3.fromHex($t)}catch{return!1}if(!kt)return!1;const{r:Ut,s:Nt}=kt;if(At&&moreThanHalfN(Nt))return!1;let qt;try{const zt=inv(Nt,N$1),Vt=mod$3(Bt*zt,N$1),Ht=mod$3(Ut*zt,N$1);qt=G$2.mulAddQUns(jt,Vt,Ht).aff()}catch{return!1}return qt?mod$3(qt.x,N$1)===Ut:!1}function hashToPrivateKey(_t){_t=toU8(_t);const e=fLen+8;(_t.length<e||_t.length>1024)&&err("expected proper params");const $t=mod$3(b2n$2(_t),N$1-1n)+1n;return n2b($t)}const etc={hexToBytes:h2b$2,bytesToHex:b2h,concatBytes:concatB,bytesToNumberBE:b2n$2,numberToBytesBE:n2b,mod:mod$3,invert:inv,hmacSha256Async:async(_t,...e)=>{const $t=cr$1();if(!$t)return err("etc.hmacSha256Async not set");const xt=$t.subtle,At=await xt.importKey("raw",_t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return u8n$3(await xt.sign("HMAC",At,concatB(...e)))},hmacSha256Sync:_hmacSync,hashToPrivateKey,randomBytes:_t=>{const e=cr$1();return e||err("crypto.getRandomValues must be defined"),e.getRandomValues(u8n$3(_t))}},utils$w={normPrivateKeyToScalar:toPriv,isValidPrivateKey:_t=>{try{return!!toPriv(_t)}catch{return!1}},randomPrivateKey:()=>hashToPrivateKey(etc.randomBytes(fLen+8)),precompute(_t=8,e=G$2){return e.multiply(3n),e}};Object.defineProperties(etc,{hmacSha256Sync:{configurable:!1,get(){return _hmacSync},set(_t){_hmacSync||(_hmacSync=_t)}}});const W$7=8,precompute=()=>{const _t=[],e=256/W$7+1;let $t=G$2,xt=$t;for(let At=0;At<e;At++){xt=$t,_t.push(xt);for(let kt=1;kt<2**(W$7-1);kt++)xt=xt.add($t),_t.push(xt);$t=xt.double()}return _t},wNAF$3=_t=>{const e=Gpows||(Gpows=precompute()),$t=(Nt,qt)=>{let Kt=qt.negate();return Nt?Kt:qt};let xt=I$1,At=G$2;const kt=1+256/W$7,Bt=2**(W$7-1),jt=BigInt(2**W$7-1),Lt=2**W$7,Ut=BigInt(W$7);for(let Nt=0;Nt<kt;Nt++){const qt=Nt*Bt;let Kt=Number(_t&jt);_t>>=Ut,Kt>Bt&&(Kt-=Lt,_t+=1n);const zt=qt,Vt=qt+Math.abs(Kt)-1,Ht=Nt%2!==0,Jt=Kt<0;Kt===0?At=At.add($t(Ht,e[zt])):xt=xt.add($t(Jt,e[Vt]))}return{p:xt,f:At}};var encode_1$3=encode$g,MSB$5=128,REST$5=127,MSBALL$3=~REST$5,INT$3=Math.pow(2,31);function encode$g(_t,e,$t){e=e||[],$t=$t||0;for(var xt=$t;_t>=INT$3;)e[$t++]=_t&255|MSB$5,_t/=128;for(;_t&MSBALL$3;)e[$t++]=_t&255|MSB$5,_t>>>=7;return e[$t]=_t|0,encode$g.bytes=$t-xt+1,e}var decode$n=read$4,MSB$1$3=128,REST$1$3=127;function read$4(_t,xt){var $t=0,xt=xt||0,At=0,kt=xt,Bt,jt=_t.length;do{if(kt>=jt)throw read$4.bytes=0,new RangeError("Could not decode varint");Bt=_t[kt++],$t+=At<28?(Bt&REST$1$3)<<At:(Bt&REST$1$3)*Math.pow(2,At),At+=7}while(Bt>=MSB$1$3);return read$4.bytes=kt-xt,$t}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$4=function(_t){return _t<N1$4?1:_t<N2$4?2:_t<N3$4?3:_t<N4$4?4:_t<N5$4?5:_t<N6$4?6:_t<N7$4?7:_t<N8$3?8:_t<N9$3?9:10},varint$3={encode:encode_1$3,decode:decode$n,encodingLength:length$4},_brrp_varint$3=varint$3;const decode$m=(_t,e=0)=>[_brrp_varint$3.decode(_t,e),_brrp_varint$3.decode.bytes],encodeTo$3=(_t,e,$t=0)=>(_brrp_varint$3.encode(_t,e,$t),e),encodingLength$8=_t=>_brrp_varint$3.encodingLength(_t),create$2=(_t,e)=>{const $t=e.byteLength,xt=encodingLength$8(_t),At=xt+encodingLength$8($t),kt=new Uint8Array(At+$t);return encodeTo$3(_t,kt,0),encodeTo$3($t,kt,xt),kt.set(e,At),new Digest$2(_t,$t,e,kt)},decode$l=_t=>{const e=coerce$3(_t),[$t,xt]=decode$m(e),[At,kt]=decode$m(e.subarray(xt)),Bt=e.subarray(xt+kt);if(Bt.byteLength!==At)throw new Error("Incorrect length");return new Digest$2($t,At,Bt,e)},equals$5=(_t,e)=>{if(_t===e)return!0;{const $t=e;return _t.code===$t.code&&_t.size===$t.size&&$t.bytes instanceof Uint8Array&&equals$6(_t.bytes,$t.bytes)}};let Digest$2=class{constructor(e,$t,xt,At){this.code=e,this.size=$t,this.digest=xt,this.bytes=At}};const from$9=({name:_t,code:e,encode:$t})=>new Hasher$2(_t,e,$t);let Hasher$2=class{constructor(e,$t,xt){this.name=e,this.code=$t,this.encode=xt}digest(e){if(e instanceof Uint8Array){const $t=this.encode(e);return $t instanceof Uint8Array?create$2(this.code,$t):$t.then(xt=>create$2(this.code,xt))}else throw Error("Unknown type, must be binary type")}};const sha$6=_t=>async e=>new Uint8Array(await crypto.subtle.digest(_t,e)),sha256$7=from$9({name:"sha2-256",code:18,encode:sha$6("SHA-256")});var __awaiter$P=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$8=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};let Secp256k1$1=class ei{static validateKey(e){if(e.kty!=="EC"||e.crv!=="secp256k1")throw new DwnError(DwnErrorCode.Secp256k1KeyNotValid,"Invalid SECP256K1 JWK: `kty` MUST be `EC`. `crv` MUST be `secp256k1`")}static publicKeyToJwk(e){return __awaiter$P(this,void 0,void 0,function*(){let $t;e.byteLength===33?$t=Point$3.fromHex(e).toRawBytes(!1):$t=e;const xt=Encoder$4.bytesToBase64Url($t.subarray(1,33)),At=Encoder$4.bytesToBase64Url($t.subarray(33,65));return{alg:"ES256K",kty:"EC",crv:"secp256k1",x:xt,y:At}})}static privateKeyToJwk(e){return __awaiter$P(this,void 0,void 0,function*(){const $t=yield ei.getPublicKey(e),xt=yield ei.publicKeyToJwk($t);return xt.d=Encoder$4.bytesToBase64Url(e),xt})}static publicJwkToBytes(e){const $t=Encoder$4.base64UrlToBytes(e.x),xt=Encoder$4.base64UrlToBytes(e.y);return Point$3.fromAffine({x:etc.bytesToNumberBE($t),y:etc.bytesToNumberBE(xt)}).toRawBytes(!0)}static privateJwkToBytes(e){return Encoder$4.base64UrlToBytes(e.d)}static sign(e,$t){return __awaiter$P(this,void 0,void 0,function*(){ei.validateKey($t);const xt=yield sha256$7.encode(e),At=ei.privateJwkToBytes($t);return(yield signAsync(xt,At)).toCompactRawBytes()})}static verify(e,$t,xt){return __awaiter$P(this,void 0,void 0,function*(){ei.validateKey(xt);const At=ei.publicJwkToBytes(xt),kt=yield sha256$7.encode(e);return verify($t,kt,At)})}static generateKeyPair(){return __awaiter$P(this,void 0,void 0,function*(){const e=utils$w.randomPrivateKey(),$t=getPublicKey$1(e,!1),xt=Encoder$4.bytesToBase64Url(e),At=yield ei.publicKeyToJwk($t),kt=Object.assign(Object.assign({},At),{d:xt});return{publicJwk:At,privateJwk:kt}})}static generateKeyPairRaw(){return __awaiter$P(this,void 0,void 0,function*(){const e=utils$w.randomPrivateKey();return{publicKey:getPublicKey$1(e,!0),privateKey:e}})}static getPublicKey(e){return __awaiter$P(this,void 0,void 0,function*(){return getPublicKey$1(e,!0)})}static getPublicJwk(e){return __awaiter$P(this,void 0,void 0,function*(){return __rest$8(e,["d"])})}};function number$3(_t){if(!Number.isSafeInteger(_t)||_t<0)throw new Error(`positive integer expected, not ${_t}`)}function isBytes$9(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}function bytes$4(_t,...e){if(!isBytes$9(_t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(_t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${_t.length}`)}function hash$7(_t){if(typeof _t!="function"||typeof _t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$3(_t.outputLen),number$3(_t.blockLen)}function exists$5(_t,e=!0){if(_t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&_t.finished)throw new Error("Hash#digest() has already been called")}function output$4(_t,e){bytes$4(_t);const $t=e.outputLen;if(_t.length<$t)throw new Error(`digestInto() expects output buffer of length at least ${$t}`)}const crypto$7=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$8(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}const u8=_t=>new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength),u32$1=_t=>new Uint32Array(_t.buffer,_t.byteOffset,Math.floor(_t.byteLength/4)),createView$1=_t=>new DataView(_t.buffer,_t.byteOffset,_t.byteLength),rotr$1=(_t,e)=>_t<<32-e|_t>>>e,rotl$2=(_t,e)=>_t<<e|_t>>>32-e>>>0,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,byteSwap=_t=>_t<<24&4278190080|_t<<8&16711680|_t>>>8&65280|_t>>>24&255,byteSwapIfBE=isLE$2?_t=>_t:_t=>byteSwap(_t);function byteSwap32(_t){for(let e=0;e<_t.length;e++)_t[e]=byteSwap(_t[e])}const hexes$3=Array.from({length:256},(_t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$3(_t){bytes$4(_t);let e="";for(let $t=0;$t<_t.length;$t++)e+=hexes$3[_t[$t]];return e}const asciis$3={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$3(_t){if(_t>=asciis$3._0&&_t<=asciis$3._9)return _t-asciis$3._0;if(_t>=asciis$3._A&&_t<=asciis$3._F)return _t-(asciis$3._A-10);if(_t>=asciis$3._a&&_t<=asciis$3._f)return _t-(asciis$3._a-10)}function hexToBytes$3(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);const e=_t.length,$t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const xt=new Uint8Array($t);for(let At=0,kt=0;At<$t;At++,kt+=2){const Bt=asciiToBase16$3(_t.charCodeAt(kt)),jt=asciiToBase16$3(_t.charCodeAt(kt+1));if(Bt===void 0||jt===void 0){const Lt=_t[kt]+_t[kt+1];throw new Error('hex string expected, got non-hex character "'+Lt+'" at index '+kt)}xt[At]=Bt*16+jt}return xt}const nextTick$3=async()=>{};async function asyncLoop(_t,e,$t){let xt=Date.now();for(let At=0;At<_t;At++){$t(At);const kt=Date.now()-xt;kt>=0&&kt<e||(await nextTick$3(),xt+=kt)}}function utf8ToBytes$6(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function toBytes$2(_t){return typeof _t=="string"&&(_t=utf8ToBytes$6(_t)),bytes$4(_t),_t}function concatBytes$4(..._t){let e=0;for(let xt=0;xt<_t.length;xt++){const At=_t[xt];bytes$4(At),e+=At.length}const $t=new Uint8Array(e);for(let xt=0,At=0;xt<_t.length;xt++){const kt=_t[xt];$t.set(kt,At),At+=kt.length}return $t}let Hash$9=class{clone(){return this._cloneInto()}};const toStr$4={}.toString;function checkOpts(_t,e){if(e!==void 0&&toStr$4.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(_t,e)}function wrapConstructor$1(_t){const e=xt=>_t().update(toBytes$2(xt)).digest(),$t=_t();return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=()=>_t(),e}function wrapConstructorWithOpts(_t){const e=(xt,At)=>_t(At).update(toBytes$2(xt)).digest(),$t=_t({});return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=xt=>_t(xt),e}function wrapXOFConstructorWithOpts(_t){const e=(xt,At)=>_t(At).update(toBytes$2(xt)).digest(),$t=_t({});return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=xt=>_t(xt),e}function randomBytes$5(_t=32){if(crypto$7&&typeof crypto$7.getRandomValues=="function")return crypto$7.getRandomValues(new Uint8Array(_t));throw new Error("crypto.getRandomValues must be defined")}const utils$v=Object.freeze(Object.defineProperty({__proto__:null,Hash:Hash$9,asyncLoop,byteSwap,byteSwap32,byteSwapIfBE,bytesToHex:bytesToHex$3,checkOpts,concatBytes:concatBytes$4,createView:createView$1,hexToBytes:hexToBytes$3,isBytes:isBytes$8,isLE:isLE$2,nextTick:nextTick$3,randomBytes:randomBytes$5,rotl:rotl$2,rotr:rotr$1,toBytes:toBytes$2,u32:u32$1,u8,utf8ToBytes:utf8ToBytes$6,wrapConstructor:wrapConstructor$1,wrapConstructorWithOpts,wrapXOFConstructorWithOpts},Symbol.toStringTag,{value:"Module"}));function setBigUint64$2(_t,e,$t,xt){if(typeof _t.setBigUint64=="function")return _t.setBigUint64(e,$t,xt);const At=BigInt(32),kt=BigInt(4294967295),Bt=Number($t>>At&kt),jt=Number($t&kt),Lt=xt?4:0,Ut=xt?0:4;_t.setUint32(e+Lt,Bt,xt),_t.setUint32(e+Ut,jt,xt)}const Chi$2=(_t,e,$t)=>_t&e^~_t&$t,Maj$2=(_t,e,$t)=>_t&e^_t&$t^e&$t;let HashMD$1=class extends Hash$9{constructor(e,$t,xt,At){super(),this.blockLen=e,this.outputLen=$t,this.padOffset=xt,this.isLE=At,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){exists$5(this);const{view:$t,buffer:xt,blockLen:At}=this;e=toBytes$2(e);const kt=e.length;for(let Bt=0;Bt<kt;){const jt=Math.min(At-this.pos,kt-Bt);if(jt===At){const Lt=createView$1(e);for(;At<=kt-Bt;Bt+=At)this.process(Lt,Bt);continue}xt.set(e.subarray(Bt,Bt+jt),this.pos),this.pos+=jt,Bt+=jt,this.pos===At&&(this.process($t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$5(this),output$4(e,this),this.finished=!0;const{buffer:$t,view:xt,blockLen:At,isLE:kt}=this;let{pos:Bt}=this;$t[Bt++]=128,this.buffer.subarray(Bt).fill(0),this.padOffset>At-Bt&&(this.process(xt,0),Bt=0);for(let qt=Bt;qt<At;qt++)$t[qt]=0;setBigUint64$2(xt,At-8,BigInt(this.length*8),kt),this.process(xt,0);const jt=createView$1(e),Lt=this.outputLen;if(Lt%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const Ut=Lt/4,Nt=this.get();if(Ut>Nt.length)throw new Error("_sha2: outputLen bigger than state");for(let qt=0;qt<Ut;qt++)jt.setUint32(4*qt,Nt[qt],kt)}digest(){const{buffer:e,outputLen:$t}=this;this.digestInto(e);const xt=e.slice(0,$t);return this.destroy(),xt}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:$t,buffer:xt,length:At,finished:kt,destroyed:Bt,pos:jt}=this;return e.length=At,e.pos=jt,e.finished=kt,e.destroyed=Bt,At%$t&&e.buffer.set(xt),e}};const SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$4=class extends HashMD$1{constructor(){super(64,32,8,!1),this.A=SHA256_IV$1[0]|0,this.B=SHA256_IV$1[1]|0,this.C=SHA256_IV$1[2]|0,this.D=SHA256_IV$1[3]|0,this.E=SHA256_IV$1[4]|0,this.F=SHA256_IV$1[5]|0,this.G=SHA256_IV$1[6]|0,this.H=SHA256_IV$1[7]|0}get(){const{A:e,B:$t,C:xt,D:At,E:kt,F:Bt,G:jt,H:Lt}=this;return[e,$t,xt,At,kt,Bt,jt,Lt]}set(e,$t,xt,At,kt,Bt,jt,Lt){this.A=e|0,this.B=$t|0,this.C=xt|0,this.D=At|0,this.E=kt|0,this.F=Bt|0,this.G=jt|0,this.H=Lt|0}process(e,$t){for(let qt=0;qt<16;qt++,$t+=4)SHA256_W$2[qt]=e.getUint32($t,!1);for(let qt=16;qt<64;qt++){const Kt=SHA256_W$2[qt-15],zt=SHA256_W$2[qt-2],Vt=rotr$1(Kt,7)^rotr$1(Kt,18)^Kt>>>3,Ht=rotr$1(zt,17)^rotr$1(zt,19)^zt>>>10;SHA256_W$2[qt]=Ht+SHA256_W$2[qt-7]+Vt+SHA256_W$2[qt-16]|0}let{A:xt,B:At,C:kt,D:Bt,E:jt,F:Lt,G:Ut,H:Nt}=this;for(let qt=0;qt<64;qt++){const Kt=rotr$1(jt,6)^rotr$1(jt,11)^rotr$1(jt,25),zt=Nt+Kt+Chi$2(jt,Lt,Ut)+SHA256_K$2[qt]+SHA256_W$2[qt]|0,Ht=(rotr$1(xt,2)^rotr$1(xt,13)^rotr$1(xt,22))+Maj$2(xt,At,kt)|0;Nt=Ut,Ut=Lt,Lt=jt,jt=Bt+zt|0,Bt=kt,kt=At,At=xt,xt=zt+Ht|0}xt=xt+this.A|0,At=At+this.B|0,kt=kt+this.C|0,Bt=Bt+this.D|0,jt=jt+this.E|0,Lt=Lt+this.F|0,Ut=Ut+this.G|0,Nt=Nt+this.H|0,this.set(xt,At,kt,Bt,jt,Lt,Ut,Nt)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},SHA224$2=class extends SHA256$4{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const sha256$5=wrapConstructor$1(()=>new SHA256$4),sha224$2=wrapConstructor$1(()=>new SHA224$2),sha256$6=Object.freeze(Object.defineProperty({__proto__:null,sha224:sha224$2,sha256:sha256$5},Symbol.toStringTag,{value:"Module"}));let HMAC$1=class extends Hash$9{constructor(e,$t){super(),this.finished=!1,this.destroyed=!1,hash$7(e);const xt=toBytes$2($t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const At=this.blockLen,kt=new Uint8Array(At);kt.set(xt.length>At?e.create().update(xt).digest():xt);for(let Bt=0;Bt<kt.length;Bt++)kt[Bt]^=54;this.iHash.update(kt),this.oHash=e.create();for(let Bt=0;Bt<kt.length;Bt++)kt[Bt]^=106;this.oHash.update(kt),kt.fill(0)}update(e){return exists$5(this),this.iHash.update(e),this}digestInto(e){exists$5(this),bytes$4(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:$t,iHash:xt,finished:At,destroyed:kt,blockLen:Bt,outputLen:jt}=this;return e=e,e.finished=At,e.destroyed=kt,e.blockLen=Bt,e.outputLen=jt,e.oHash=$t._cloneInto(e.oHash),e.iHash=xt._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$3=(_t,e,$t)=>new HMAC$1(_t,e).update($t).digest();hmac$3.create=(_t,e)=>new HMAC$1(_t,e);const hmac$4=Object.freeze(Object.defineProperty({__proto__:null,HMAC:HMAC$1,hmac:hmac$3},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$e=BigInt(0),_1n$g=BigInt(1),_2n$9=BigInt(2);function isBytes$7(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}function abytes$1(_t){if(!isBytes$7(_t))throw new Error("Uint8Array expected")}const hexes$2=Array.from({length:256},(_t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(_t){abytes$1(_t);let e="";for(let $t=0;$t<_t.length;$t++)e+=hexes$2[_t[$t]];return e}function numberToHexUnpadded$2(_t){const e=_t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber$2(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);return BigInt(_t===""?"0":`0x${_t}`)}const asciis$2={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$2(_t){if(_t>=asciis$2._0&&_t<=asciis$2._9)return _t-asciis$2._0;if(_t>=asciis$2._A&&_t<=asciis$2._F)return _t-(asciis$2._A-10);if(_t>=asciis$2._a&&_t<=asciis$2._f)return _t-(asciis$2._a-10)}function hexToBytes$2(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);const e=_t.length,$t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const xt=new Uint8Array($t);for(let At=0,kt=0;At<$t;At++,kt+=2){const Bt=asciiToBase16$2(_t.charCodeAt(kt)),jt=asciiToBase16$2(_t.charCodeAt(kt+1));if(Bt===void 0||jt===void 0){const Lt=_t[kt]+_t[kt+1];throw new Error('hex string expected, got non-hex character "'+Lt+'" at index '+kt)}xt[At]=Bt*16+jt}return xt}function bytesToNumberBE$2(_t){return hexToNumber$2(bytesToHex$2(_t))}function bytesToNumberLE$2(_t){return abytes$1(_t),hexToNumber$2(bytesToHex$2(Uint8Array.from(_t).reverse()))}function numberToBytesBE$2(_t,e){return hexToBytes$2(_t.toString(16).padStart(e*2,"0"))}function numberToBytesLE$2(_t,e){return numberToBytesBE$2(_t,e).reverse()}function numberToVarBytesBE$2(_t){return hexToBytes$2(numberToHexUnpadded$2(_t))}function ensureBytes$3(_t,e,$t){let xt;if(typeof e=="string")try{xt=hexToBytes$2(e)}catch(kt){throw new Error(`${_t} must be valid hex string, got "${e}". Cause: ${kt}`)}else if(isBytes$7(e))xt=Uint8Array.from(e);else throw new Error(`${_t} must be hex string or Uint8Array`);const At=xt.length;if(typeof $t=="number"&&At!==$t)throw new Error(`${_t} expected ${$t} bytes, got ${At}`);return xt}function concatBytes$3(..._t){let e=0;for(let xt=0;xt<_t.length;xt++){const At=_t[xt];abytes$1(At),e+=At.length}const $t=new Uint8Array(e);for(let xt=0,At=0;xt<_t.length;xt++){const kt=_t[xt];$t.set(kt,At),At+=kt.length}return $t}function equalBytes$2(_t,e){if(_t.length!==e.length)return!1;let $t=0;for(let xt=0;xt<_t.length;xt++)$t|=_t[xt]^e[xt];return $t===0}function utf8ToBytes$5(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function bitLen$2(_t){let e;for(e=0;_t>_0n$e;_t>>=_1n$g,e+=1);return e}function bitGet$2(_t,e){return _t>>BigInt(e)&_1n$g}function bitSet$2(_t,e,$t){return _t|($t?_1n$g:_0n$e)<<BigInt(e)}const bitMask$2=_t=>(_2n$9<<BigInt(_t-1))-_1n$g,u8n$2=_t=>new Uint8Array(_t),u8fr$2=_t=>Uint8Array.from(_t);function createHmacDrbg$2(_t,e,$t){if(typeof _t!="number"||_t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof $t!="function")throw new Error("hmacFn must be a function");let xt=u8n$2(_t),At=u8n$2(_t),kt=0;const Bt=()=>{xt.fill(1),At.fill(0),kt=0},jt=(...qt)=>$t(At,xt,...qt),Lt=(qt=u8n$2())=>{At=jt(u8fr$2([0]),qt),xt=jt(),qt.length!==0&&(At=jt(u8fr$2([1]),qt),xt=jt())},Ut=()=>{if(kt++>=1e3)throw new Error("drbg: tried 1000 values");let qt=0;const Kt=[];for(;qt<e;){xt=jt();const zt=xt.slice();Kt.push(zt),qt+=xt.length}return concatBytes$3(...Kt)};return(qt,Kt)=>{Bt(),Lt(qt);let zt;for(;!(zt=Kt(Ut()));)Lt();return Bt(),zt}}const validatorFns$2={bigint:_t=>typeof _t=="bigint",function:_t=>typeof _t=="function",boolean:_t=>typeof _t=="boolean",string:_t=>typeof _t=="string",stringOrUint8Array:_t=>typeof _t=="string"||isBytes$7(_t),isSafeInteger:_t=>Number.isSafeInteger(_t),array:_t=>Array.isArray(_t),field:(_t,e)=>e.Fp.isValid(_t),hash:_t=>typeof _t=="function"&&Number.isSafeInteger(_t.outputLen)};function validateObject$8(_t,e,$t={}){const xt=(At,kt,Bt)=>{const jt=validatorFns$2[kt];if(typeof jt!="function")throw new Error(`Invalid validator "${kt}", expected function`);const Lt=_t[At];if(!(Bt&&Lt===void 0)&&!jt(Lt,_t))throw new Error(`Invalid param ${String(At)}=${Lt} (${typeof Lt}), expected ${kt}`)};for(const[At,kt]of Object.entries(e))xt(At,kt,!1);for(const[At,kt]of Object.entries($t))xt(At,kt,!0);return _t}const ut$2=Object.freeze(Object.defineProperty({__proto__:null,abytes:abytes$1,bitGet:bitGet$2,bitLen:bitLen$2,bitMask:bitMask$2,bitSet:bitSet$2,bytesToHex:bytesToHex$2,bytesToNumberBE:bytesToNumberBE$2,bytesToNumberLE:bytesToNumberLE$2,concatBytes:concatBytes$3,createHmacDrbg:createHmacDrbg$2,ensureBytes:ensureBytes$3,equalBytes:equalBytes$2,hexToBytes:hexToBytes$2,hexToNumber:hexToNumber$2,isBytes:isBytes$7,numberToBytesBE:numberToBytesBE$2,numberToBytesLE:numberToBytesLE$2,numberToHexUnpadded:numberToHexUnpadded$2,numberToVarBytesBE:numberToVarBytesBE$2,utf8ToBytes:utf8ToBytes$5,validateObject:validateObject$8},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$d=BigInt(0),_1n$f=BigInt(1),_2n$8=BigInt(2),_3n$4=BigInt(3),_4n$2=BigInt(4),_5n$3=BigInt(5),_8n$4=BigInt(8);BigInt(9);BigInt(16);function mod$2(_t,e){const $t=_t%e;return $t>=_0n$d?$t:e+$t}function pow$2(_t,e,$t){if($t<=_0n$d||e<_0n$d)throw new Error("Expected power/modulo > 0");if($t===_1n$f)return _0n$d;let xt=_1n$f;for(;e>_0n$d;)e&_1n$f&&(xt=xt*_t%$t),_t=_t*_t%$t,e>>=_1n$f;return xt}function invert$2(_t,e){if(_t===_0n$d||e<=_0n$d)throw new Error(`invert: expected positive integers, got n=${_t} mod=${e}`);let $t=mod$2(_t,e),xt=e,At=_0n$d,kt=_1n$f;for(;$t!==_0n$d;){const jt=xt/$t,Lt=xt%$t,Ut=At-kt*jt;xt=$t,$t=Lt,At=kt,kt=Ut}if(xt!==_1n$f)throw new Error("invert: does not exist");return mod$2(At,e)}function tonelliShanks$2(_t){const e=(_t-_1n$f)/_2n$8;let $t,xt,At;for($t=_t-_1n$f,xt=0;$t%_2n$8===_0n$d;$t/=_2n$8,xt++);for(At=_2n$8;At<_t&&pow$2(At,e,_t)!==_t-_1n$f;At++);if(xt===1){const Bt=(_t+_1n$f)/_4n$2;return function(Lt,Ut){const Nt=Lt.pow(Ut,Bt);if(!Lt.eql(Lt.sqr(Nt),Ut))throw new Error("Cannot find square root");return Nt}}const kt=($t+_1n$f)/_2n$8;return function(jt,Lt){if(jt.pow(Lt,e)===jt.neg(jt.ONE))throw new Error("Cannot find square root");let Ut=xt,Nt=jt.pow(jt.mul(jt.ONE,At),$t),qt=jt.pow(Lt,kt),Kt=jt.pow(Lt,$t);for(;!jt.eql(Kt,jt.ONE);){if(jt.eql(Kt,jt.ZERO))return jt.ZERO;let zt=1;for(let Ht=jt.sqr(Kt);zt<Ut&&!jt.eql(Ht,jt.ONE);zt++)Ht=jt.sqr(Ht);const Vt=jt.pow(Nt,_1n$f<<BigInt(Ut-zt-1));Nt=jt.sqr(Vt),qt=jt.mul(qt,Vt),Kt=jt.mul(Kt,Nt),Ut=zt}return qt}}function FpSqrt$2(_t){if(_t%_4n$2===_3n$4){const e=(_t+_1n$f)/_4n$2;return function(xt,At){const kt=xt.pow(At,e);if(!xt.eql(xt.sqr(kt),At))throw new Error("Cannot find square root");return kt}}if(_t%_8n$4===_5n$3){const e=(_t-_5n$3)/_8n$4;return function(xt,At){const kt=xt.mul(At,_2n$8),Bt=xt.pow(kt,e),jt=xt.mul(At,Bt),Lt=xt.mul(xt.mul(jt,_2n$8),Bt),Ut=xt.mul(jt,xt.sub(Lt,xt.ONE));if(!xt.eql(xt.sqr(Ut),At))throw new Error("Cannot find square root");return Ut}}return tonelliShanks$2(_t)}const FIELD_FIELDS$2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$2(_t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},$t=FIELD_FIELDS$2.reduce((xt,At)=>(xt[At]="function",xt),e);return validateObject$8(_t,$t)}function FpPow$2(_t,e,$t){if($t<_0n$d)throw new Error("Expected power > 0");if($t===_0n$d)return _t.ONE;if($t===_1n$f)return e;let xt=_t.ONE,At=e;for(;$t>_0n$d;)$t&_1n$f&&(xt=_t.mul(xt,At)),At=_t.sqr(At),$t>>=_1n$f;return xt}function FpInvertBatch$2(_t,e){const $t=new Array(e.length),xt=e.reduce((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=kt,_t.mul(kt,Bt)),_t.ONE),At=_t.inv(xt);return e.reduceRight((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=_t.mul(kt,$t[jt]),_t.mul(kt,Bt)),At),$t}function nLength$2(_t,e){const $t=e!==void 0?e:_t.toString(2).length,xt=Math.ceil($t/8);return{nBitLength:$t,nByteLength:xt}}function Field$2(_t,e,$t=!1,xt={}){if(_t<=_0n$d)throw new Error(`Expected Field ORDER > 0, got ${_t}`);const{nBitLength:At,nByteLength:kt}=nLength$2(_t,e);if(kt>2048)throw new Error("Field lengths over 2048 bytes are not supported");const Bt=FpSqrt$2(_t),jt=Object.freeze({ORDER:_t,BITS:At,BYTES:kt,MASK:bitMask$2(At),ZERO:_0n$d,ONE:_1n$f,create:Lt=>mod$2(Lt,_t),isValid:Lt=>{if(typeof Lt!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof Lt}`);return _0n$d<=Lt&&Lt<_t},is0:Lt=>Lt===_0n$d,isOdd:Lt=>(Lt&_1n$f)===_1n$f,neg:Lt=>mod$2(-Lt,_t),eql:(Lt,Ut)=>Lt===Ut,sqr:Lt=>mod$2(Lt*Lt,_t),add:(Lt,Ut)=>mod$2(Lt+Ut,_t),sub:(Lt,Ut)=>mod$2(Lt-Ut,_t),mul:(Lt,Ut)=>mod$2(Lt*Ut,_t),pow:(Lt,Ut)=>FpPow$2(jt,Lt,Ut),div:(Lt,Ut)=>mod$2(Lt*invert$2(Ut,_t),_t),sqrN:Lt=>Lt*Lt,addN:(Lt,Ut)=>Lt+Ut,subN:(Lt,Ut)=>Lt-Ut,mulN:(Lt,Ut)=>Lt*Ut,inv:Lt=>invert$2(Lt,_t),sqrt:xt.sqrt||(Lt=>Bt(jt,Lt)),invertBatch:Lt=>FpInvertBatch$2(jt,Lt),cmov:(Lt,Ut,Nt)=>Nt?Ut:Lt,toBytes:Lt=>$t?numberToBytesLE$2(Lt,kt):numberToBytesBE$2(Lt,kt),fromBytes:Lt=>{if(Lt.length!==kt)throw new Error(`Fp.fromBytes: expected ${kt}, got ${Lt.length}`);return $t?bytesToNumberLE$2(Lt):bytesToNumberBE$2(Lt)}});return Object.freeze(jt)}function getFieldBytesLength$2(_t){if(typeof _t!="bigint")throw new Error("field order must be bigint");const e=_t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$2(_t){const e=getFieldBytesLength$2(_t);return e+Math.ceil(e/2)}function mapHashToField$2(_t,e,$t=!1){const xt=_t.length,At=getFieldBytesLength$2(e),kt=getMinHashLength$2(e);if(xt<16||xt<kt||xt>1024)throw new Error(`expected ${kt}-1024 bytes of input, got ${xt}`);const Bt=$t?bytesToNumberBE$2(_t):bytesToNumberLE$2(_t),jt=mod$2(Bt,e-_1n$f)+_1n$f;return $t?numberToBytesLE$2(jt,At):numberToBytesBE$2(jt,At)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$c=BigInt(0),_1n$e=BigInt(1);function wNAF$2(_t,e){const $t=(At,kt)=>{const Bt=kt.negate();return At?Bt:kt},xt=At=>{const kt=Math.ceil(e/At)+1,Bt=2**(At-1);return{windows:kt,windowSize:Bt}};return{constTimeNegate:$t,unsafeLadder(At,kt){let Bt=_t.ZERO,jt=At;for(;kt>_0n$c;)kt&_1n$e&&(Bt=Bt.add(jt)),jt=jt.double(),kt>>=_1n$e;return Bt},precomputeWindow(At,kt){const{windows:Bt,windowSize:jt}=xt(kt),Lt=[];let Ut=At,Nt=Ut;for(let qt=0;qt<Bt;qt++){Nt=Ut,Lt.push(Nt);for(let Kt=1;Kt<jt;Kt++)Nt=Nt.add(Ut),Lt.push(Nt);Ut=Nt.double()}return Lt},wNAF(At,kt,Bt){const{windows:jt,windowSize:Lt}=xt(At);let Ut=_t.ZERO,Nt=_t.BASE;const qt=BigInt(2**At-1),Kt=2**At,zt=BigInt(At);for(let Vt=0;Vt<jt;Vt++){const Ht=Vt*Lt;let Jt=Number(Bt&qt);Bt>>=zt,Jt>Lt&&(Jt-=Kt,Bt+=_1n$e);const rr=Ht,Qt=Ht+Math.abs(Jt)-1,Wt=Vt%2!==0,nr=Jt<0;Jt===0?Nt=Nt.add($t(Wt,kt[rr])):Ut=Ut.add($t(nr,kt[Qt]))}return{p:Ut,f:Nt}},wNAFCached(At,kt,Bt,jt){const Lt=At._WINDOW_SIZE||1;let Ut=kt.get(At);return Ut||(Ut=this.precomputeWindow(At,Lt),Lt!==1&&kt.set(At,jt(Ut))),this.wNAF(Lt,Ut,Bt)}}}function validateBasic$2(_t){return validateField$2(_t.Fp),validateObject$8(_t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$2(_t.n,_t.nBitLength),..._t,p:_t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts$1(_t){const e=validateBasic$2(_t);validateObject$8(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:$t,Fp:xt,a:At}=e;if($t){if(!xt.eql(At,xt.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof $t!="object"||typeof $t.beta!="bigint"||typeof $t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n$1,hexToBytes:h2b$1}=ut$2,DER$1={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(_t){const{Err:e}=DER$1;if(_t.length<2||_t[0]!==2)throw new e("Invalid signature integer tag");const $t=_t[1],xt=_t.subarray(2,$t+2);if(!$t||xt.length!==$t)throw new e("Invalid signature integer: wrong length");if(xt[0]&128)throw new e("Invalid signature integer: negative");if(xt[0]===0&&!(xt[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n$1(xt),l:_t.subarray($t+2)}},toSig(_t){const{Err:e}=DER$1,$t=typeof _t=="string"?h2b$1(_t):_t;abytes$1($t);let xt=$t.length;if(xt<2||$t[0]!=48)throw new e("Invalid signature tag");if($t[1]!==xt-2)throw new e("Invalid signature: incorrect length");const{d:At,l:kt}=DER$1._parseInt($t.subarray(2)),{d:Bt,l:jt}=DER$1._parseInt(kt);if(jt.length)throw new e("Invalid signature: left bytes after parsing");return{r:At,s:Bt}},hexFromSig(_t){const e=Ut=>Number.parseInt(Ut[0],16)&8?"00"+Ut:Ut,$t=Ut=>{const Nt=Ut.toString(16);return Nt.length&1?`0${Nt}`:Nt},xt=e($t(_t.s)),At=e($t(_t.r)),kt=xt.length/2,Bt=At.length/2,jt=$t(kt),Lt=$t(Bt);return`30${$t(Bt+kt+4)}02${Lt}${At}02${jt}${xt}`}},_0n$b=BigInt(0),_1n$d=BigInt(1);BigInt(2);const _3n$3=BigInt(3);BigInt(4);function weierstrassPoints$1(_t){const e=validatePointOpts$1(_t),{Fp:$t}=e,xt=e.toBytes||((Vt,Ht,Jt)=>{const rr=Ht.toAffine();return concatBytes$3(Uint8Array.from([4]),$t.toBytes(rr.x),$t.toBytes(rr.y))}),At=e.fromBytes||(Vt=>{const Ht=Vt.subarray(1),Jt=$t.fromBytes(Ht.subarray(0,$t.BYTES)),rr=$t.fromBytes(Ht.subarray($t.BYTES,2*$t.BYTES));return{x:Jt,y:rr}});function kt(Vt){const{a:Ht,b:Jt}=e,rr=$t.sqr(Vt),Qt=$t.mul(rr,Vt);return $t.add($t.add(Qt,$t.mul(Vt,Ht)),Jt)}if(!$t.eql($t.sqr(e.Gy),kt(e.Gx)))throw new Error("bad generator point: equation left != right");function Bt(Vt){return typeof Vt=="bigint"&&_0n$b<Vt&&Vt<e.n}function jt(Vt){if(!Bt(Vt))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function Lt(Vt){const{allowedPrivateKeyLengths:Ht,nByteLength:Jt,wrapPrivateKey:rr,n:Qt}=e;if(Ht&&typeof Vt!="bigint"){if(isBytes$7(Vt)&&(Vt=bytesToHex$2(Vt)),typeof Vt!="string"||!Ht.includes(Vt.length))throw new Error("Invalid key");Vt=Vt.padStart(Jt*2,"0")}let Wt;try{Wt=typeof Vt=="bigint"?Vt:bytesToNumberBE$2(ensureBytes$3("private key",Vt,Jt))}catch{throw new Error(`private key must be ${Jt} bytes, hex or bigint, not ${typeof Vt}`)}return rr&&(Wt=mod$2(Wt,Qt)),jt(Wt),Wt}const Ut=new Map;function Nt(Vt){if(!(Vt instanceof qt))throw new Error("ProjectivePoint expected")}class qt{constructor(Ht,Jt,rr){if(this.px=Ht,this.py=Jt,this.pz=rr,Ht==null||!$t.isValid(Ht))throw new Error("x required");if(Jt==null||!$t.isValid(Jt))throw new Error("y required");if(rr==null||!$t.isValid(rr))throw new Error("z required")}static fromAffine(Ht){const{x:Jt,y:rr}=Ht||{};if(!Ht||!$t.isValid(Jt)||!$t.isValid(rr))throw new Error("invalid affine point");if(Ht instanceof qt)throw new Error("projective point not allowed");const Qt=Wt=>$t.eql(Wt,$t.ZERO);return Qt(Jt)&&Qt(rr)?qt.ZERO:new qt(Jt,rr,$t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Ht){const Jt=$t.invertBatch(Ht.map(rr=>rr.pz));return Ht.map((rr,Qt)=>rr.toAffine(Jt[Qt])).map(qt.fromAffine)}static fromHex(Ht){const Jt=qt.fromAffine(At(ensureBytes$3("pointHex",Ht)));return Jt.assertValidity(),Jt}static fromPrivateKey(Ht){return qt.BASE.multiply(Lt(Ht))}_setWindowSize(Ht){this._WINDOW_SIZE=Ht,Ut.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!$t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Ht,y:Jt}=this.toAffine();if(!$t.isValid(Ht)||!$t.isValid(Jt))throw new Error("bad point: x or y not FE");const rr=$t.sqr(Jt),Qt=kt(Ht);if(!$t.eql(rr,Qt))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Ht}=this.toAffine();if($t.isOdd)return!$t.isOdd(Ht);throw new Error("Field doesn't support isOdd")}equals(Ht){Nt(Ht);const{px:Jt,py:rr,pz:Qt}=this,{px:Wt,py:nr,pz:yr}=Ht,vr=$t.eql($t.mul(Jt,yr),$t.mul(Wt,Qt)),Ir=$t.eql($t.mul(rr,yr),$t.mul(nr,Qt));return vr&&Ir}negate(){return new qt(this.px,$t.neg(this.py),this.pz)}double(){const{a:Ht,b:Jt}=e,rr=$t.mul(Jt,_3n$3),{px:Qt,py:Wt,pz:nr}=this;let yr=$t.ZERO,vr=$t.ZERO,Ir=$t.ZERO,xr=$t.mul(Qt,Qt),Or=$t.mul(Wt,Wt),Nr=$t.mul(nr,nr),kr=$t.mul(Qt,Wt);return kr=$t.add(kr,kr),Ir=$t.mul(Qt,nr),Ir=$t.add(Ir,Ir),yr=$t.mul(Ht,Ir),vr=$t.mul(rr,Nr),vr=$t.add(yr,vr),yr=$t.sub(Or,vr),vr=$t.add(Or,vr),vr=$t.mul(yr,vr),yr=$t.mul(kr,yr),Ir=$t.mul(rr,Ir),Nr=$t.mul(Ht,Nr),kr=$t.sub(xr,Nr),kr=$t.mul(Ht,kr),kr=$t.add(kr,Ir),Ir=$t.add(xr,xr),xr=$t.add(Ir,xr),xr=$t.add(xr,Nr),xr=$t.mul(xr,kr),vr=$t.add(vr,xr),Nr=$t.mul(Wt,nr),Nr=$t.add(Nr,Nr),xr=$t.mul(Nr,kr),yr=$t.sub(yr,xr),Ir=$t.mul(Nr,Or),Ir=$t.add(Ir,Ir),Ir=$t.add(Ir,Ir),new qt(yr,vr,Ir)}add(Ht){Nt(Ht);const{px:Jt,py:rr,pz:Qt}=this,{px:Wt,py:nr,pz:yr}=Ht;let vr=$t.ZERO,Ir=$t.ZERO,xr=$t.ZERO;const Or=e.a,Nr=$t.mul(e.b,_3n$3);let kr=$t.mul(Jt,Wt),lr=$t.mul(rr,nr),ir=$t.mul(Qt,yr),Xt=$t.add(Jt,rr),er=$t.add(Wt,nr);Xt=$t.mul(Xt,er),er=$t.add(kr,lr),Xt=$t.sub(Xt,er),er=$t.add(Jt,Qt);let pr=$t.add(Wt,yr);return er=$t.mul(er,pr),pr=$t.add(kr,ir),er=$t.sub(er,pr),pr=$t.add(rr,Qt),vr=$t.add(nr,yr),pr=$t.mul(pr,vr),vr=$t.add(lr,ir),pr=$t.sub(pr,vr),xr=$t.mul(Or,er),vr=$t.mul(Nr,ir),xr=$t.add(vr,xr),vr=$t.sub(lr,xr),xr=$t.add(lr,xr),Ir=$t.mul(vr,xr),lr=$t.add(kr,kr),lr=$t.add(lr,kr),ir=$t.mul(Or,ir),er=$t.mul(Nr,er),lr=$t.add(lr,ir),ir=$t.sub(kr,ir),ir=$t.mul(Or,ir),er=$t.add(er,ir),kr=$t.mul(lr,er),Ir=$t.add(Ir,kr),kr=$t.mul(pr,er),vr=$t.mul(Xt,vr),vr=$t.sub(vr,kr),kr=$t.mul(Xt,lr),xr=$t.mul(pr,xr),xr=$t.add(xr,kr),new qt(vr,Ir,xr)}subtract(Ht){return this.add(Ht.negate())}is0(){return this.equals(qt.ZERO)}wNAF(Ht){return zt.wNAFCached(this,Ut,Ht,Jt=>{const rr=$t.invertBatch(Jt.map(Qt=>Qt.pz));return Jt.map((Qt,Wt)=>Qt.toAffine(rr[Wt])).map(qt.fromAffine)})}multiplyUnsafe(Ht){const Jt=qt.ZERO;if(Ht===_0n$b)return Jt;if(jt(Ht),Ht===_1n$d)return this;const{endo:rr}=e;if(!rr)return zt.unsafeLadder(this,Ht);let{k1neg:Qt,k1:Wt,k2neg:nr,k2:yr}=rr.splitScalar(Ht),vr=Jt,Ir=Jt,xr=this;for(;Wt>_0n$b||yr>_0n$b;)Wt&_1n$d&&(vr=vr.add(xr)),yr&_1n$d&&(Ir=Ir.add(xr)),xr=xr.double(),Wt>>=_1n$d,yr>>=_1n$d;return Qt&&(vr=vr.negate()),nr&&(Ir=Ir.negate()),Ir=new qt($t.mul(Ir.px,rr.beta),Ir.py,Ir.pz),vr.add(Ir)}multiply(Ht){jt(Ht);let Jt=Ht,rr,Qt;const{endo:Wt}=e;if(Wt){const{k1neg:nr,k1:yr,k2neg:vr,k2:Ir}=Wt.splitScalar(Jt);let{p:xr,f:Or}=this.wNAF(yr),{p:Nr,f:kr}=this.wNAF(Ir);xr=zt.constTimeNegate(nr,xr),Nr=zt.constTimeNegate(vr,Nr),Nr=new qt($t.mul(Nr.px,Wt.beta),Nr.py,Nr.pz),rr=xr.add(Nr),Qt=Or.add(kr)}else{const{p:nr,f:yr}=this.wNAF(Jt);rr=nr,Qt=yr}return qt.normalizeZ([rr,Qt])[0]}multiplyAndAddUnsafe(Ht,Jt,rr){const Qt=qt.BASE,Wt=(yr,vr)=>vr===_0n$b||vr===_1n$d||!yr.equals(Qt)?yr.multiplyUnsafe(vr):yr.multiply(vr),nr=Wt(this,Jt).add(Wt(Ht,rr));return nr.is0()?void 0:nr}toAffine(Ht){const{px:Jt,py:rr,pz:Qt}=this,Wt=this.is0();Ht==null&&(Ht=Wt?$t.ONE:$t.inv(Qt));const nr=$t.mul(Jt,Ht),yr=$t.mul(rr,Ht),vr=$t.mul(Qt,Ht);if(Wt)return{x:$t.ZERO,y:$t.ZERO};if(!$t.eql(vr,$t.ONE))throw new Error("invZ was invalid");return{x:nr,y:yr}}isTorsionFree(){const{h:Ht,isTorsionFree:Jt}=e;if(Ht===_1n$d)return!0;if(Jt)return Jt(qt,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Ht,clearCofactor:Jt}=e;return Ht===_1n$d?this:Jt?Jt(qt,this):this.multiplyUnsafe(e.h)}toRawBytes(Ht=!0){return this.assertValidity(),xt(qt,this,Ht)}toHex(Ht=!0){return bytesToHex$2(this.toRawBytes(Ht))}}qt.BASE=new qt(e.Gx,e.Gy,$t.ONE),qt.ZERO=new qt($t.ZERO,$t.ONE,$t.ZERO);const Kt=e.nBitLength,zt=wNAF$2(qt,e.endo?Math.ceil(Kt/2):Kt);return{CURVE:e,ProjectivePoint:qt,normPrivateKeyToScalar:Lt,weierstrassEquation:kt,isWithinCurveOrder:Bt}}function validateOpts$5(_t){const e=validateBasic$2(_t);return validateObject$8(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass$2(_t){const e=validateOpts$5(_t),{Fp:$t,n:xt}=e,At=$t.BYTES+1,kt=2*$t.BYTES+1;function Bt(er){return _0n$b<er&&er<$t.ORDER}function jt(er){return mod$2(er,xt)}function Lt(er){return invert$2(er,xt)}const{ProjectivePoint:Ut,normPrivateKeyToScalar:Nt,weierstrassEquation:qt,isWithinCurveOrder:Kt}=weierstrassPoints$1({...e,toBytes(er,pr,ur){const gr=pr.toAffine(),ar=$t.toBytes(gr.x),tr=concatBytes$3;return ur?tr(Uint8Array.from([pr.hasEvenY()?2:3]),ar):tr(Uint8Array.from([4]),ar,$t.toBytes(gr.y))},fromBytes(er){const pr=er.length,ur=er[0],gr=er.subarray(1);if(pr===At&&(ur===2||ur===3)){const ar=bytesToNumberBE$2(gr);if(!Bt(ar))throw new Error("Point is not on curve");const tr=qt(ar);let dr;try{dr=$t.sqrt(tr)}catch(Sr){const Dr=Sr instanceof Error?": "+Sr.message:"";throw new Error("Point is not on curve"+Dr)}const fr=(dr&_1n$d)===_1n$d;return(ur&1)===1!==fr&&(dr=$t.neg(dr)),{x:ar,y:dr}}else if(pr===kt&&ur===4){const ar=$t.fromBytes(gr.subarray(0,$t.BYTES)),tr=$t.fromBytes(gr.subarray($t.BYTES,2*$t.BYTES));return{x:ar,y:tr}}else throw new Error(`Point of length ${pr} was invalid. Expected ${At} compressed bytes or ${kt} uncompressed bytes`)}}),zt=er=>bytesToHex$2(numberToBytesBE$2(er,e.nByteLength));function Vt(er){const pr=xt>>_1n$d;return er>pr}function Ht(er){return Vt(er)?jt(-er):er}const Jt=(er,pr,ur)=>bytesToNumberBE$2(er.slice(pr,ur));class rr{constructor(pr,ur,gr){this.r=pr,this.s=ur,this.recovery=gr,this.assertValidity()}static fromCompact(pr){const ur=e.nByteLength;return pr=ensureBytes$3("compactSignature",pr,ur*2),new rr(Jt(pr,0,ur),Jt(pr,ur,2*ur))}static fromDER(pr){const{r:ur,s:gr}=DER$1.toSig(ensureBytes$3("DER",pr));return new rr(ur,gr)}assertValidity(){if(!Kt(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Kt(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(pr){return new rr(this.r,this.s,pr)}recoverPublicKey(pr){const{r:ur,s:gr,recovery:ar}=this,tr=Ir(ensureBytes$3("msgHash",pr));if(ar==null||![0,1,2,3].includes(ar))throw new Error("recovery id invalid");const dr=ar===2||ar===3?ur+e.n:ur;if(dr>=$t.ORDER)throw new Error("recovery id 2 or 3 invalid");const fr=ar&1?"03":"02",br=Ut.fromHex(fr+zt(dr)),Sr=Lt(dr),Dr=jt(-tr*Sr),Er=jt(gr*Sr),wr=Ut.BASE.multiplyAndAddUnsafe(br,Dr,Er);if(!wr)throw new Error("point at infinify");return wr.assertValidity(),wr}hasHighS(){return Vt(this.s)}normalizeS(){return this.hasHighS()?new rr(this.r,jt(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return zt(this.r)+zt(this.s)}}const Qt={isValidPrivateKey(er){try{return Nt(er),!0}catch{return!1}},normPrivateKeyToScalar:Nt,randomPrivateKey:()=>{const er=getMinHashLength$2(e.n);return mapHashToField$2(e.randomBytes(er),e.n)},precompute(er=8,pr=Ut.BASE){return pr._setWindowSize(er),pr.multiply(BigInt(3)),pr}};function Wt(er,pr=!0){return Ut.fromPrivateKey(er).toRawBytes(pr)}function nr(er){const pr=isBytes$7(er),ur=typeof er=="string",gr=(pr||ur)&&er.length;return pr?gr===At||gr===kt:ur?gr===2*At||gr===2*kt:er instanceof Ut}function yr(er,pr,ur=!0){if(nr(er))throw new Error("first arg must be private key");if(!nr(pr))throw new Error("second arg must be public key");return Ut.fromHex(pr).multiply(Nt(er)).toRawBytes(ur)}const vr=e.bits2int||function(er){const pr=bytesToNumberBE$2(er),ur=er.length*8-e.nBitLength;return ur>0?pr>>BigInt(ur):pr},Ir=e.bits2int_modN||function(er){return jt(vr(er))},xr=bitMask$2(e.nBitLength);function Or(er){if(typeof er!="bigint")throw new Error("bigint expected");if(!(_0n$b<=er&&er<xr))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE$2(er,e.nByteLength)}function Nr(er,pr,ur=kr){if(["recovered","canonical"].some(Mr=>Mr in ur))throw new Error("sign() legacy options not supported");const{hash:gr,randomBytes:ar}=e;let{lowS:tr,prehash:dr,extraEntropy:fr}=ur;tr==null&&(tr=!0),er=ensureBytes$3("msgHash",er),dr&&(er=ensureBytes$3("prehashed msgHash",gr(er)));const br=Ir(er),Sr=Nt(pr),Dr=[Or(Sr),Or(br)];if(fr!=null&&fr!==!1){const Mr=fr===!0?ar($t.BYTES):fr;Dr.push(ensureBytes$3("extraEntropy",Mr))}const Er=concatBytes$3(...Dr),wr=br;function Tr(Mr){const Lr=vr(Mr);if(!Kt(Lr))return;const Cr=Lt(Lr),Br=Ut.BASE.multiply(Lr).toAffine(),$r=jt(Br.x);if($r===_0n$b)return;const Rr=jt(Cr*jt(wr+$r*Sr));if(Rr===_0n$b)return;let Ur=(Br.x===$r?0:2)|Number(Br.y&_1n$d),Pr=Rr;return tr&&Vt(Rr)&&(Pr=Ht(Rr),Ur^=1),new rr($r,Pr,Ur)}return{seed:Er,k2sig:Tr}}const kr={lowS:e.lowS,prehash:!1},lr={lowS:e.lowS,prehash:!1};function ir(er,pr,ur=kr){const{seed:gr,k2sig:ar}=Nr(er,pr,ur),tr=e;return createHmacDrbg$2(tr.hash.outputLen,tr.nByteLength,tr.hmac)(gr,ar)}Ut.BASE._setWindowSize(8);function Xt(er,pr,ur,gr=lr){var Br;const ar=er;if(pr=ensureBytes$3("msgHash",pr),ur=ensureBytes$3("publicKey",ur),"strict"in gr)throw new Error("options.strict was renamed to lowS");const{lowS:tr,prehash:dr}=gr;let fr,br;try{if(typeof ar=="string"||isBytes$7(ar))try{fr=rr.fromDER(ar)}catch($r){if(!($r instanceof DER$1.Err))throw $r;fr=rr.fromCompact(ar)}else if(typeof ar=="object"&&typeof ar.r=="bigint"&&typeof ar.s=="bigint"){const{r:$r,s:Rr}=ar;fr=new rr($r,Rr)}else throw new Error("PARSE");br=Ut.fromHex(ur)}catch($r){if($r.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(tr&&fr.hasHighS())return!1;dr&&(pr=e.hash(pr));const{r:Sr,s:Dr}=fr,Er=Ir(pr),wr=Lt(Dr),Tr=jt(Er*wr),Mr=jt(Sr*wr),Lr=(Br=Ut.BASE.multiplyAndAddUnsafe(br,Tr,Mr))==null?void 0:Br.toAffine();return Lr?jt(Lr.x)===Sr:!1}return{CURVE:e,getPublicKey:Wt,getSharedSecret:yr,sign:ir,verify:Xt,ProjectivePoint:Ut,Signature:rr,utils:Qt}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$2(_t){return{hash:_t,hmac:(e,...$t)=>hmac$3(_t,e,concatBytes$4(...$t)),randomBytes:randomBytes$5}}function createCurve$2(_t,e){const $t=xt=>weierstrass$2({..._t,...getHash$2(xt)});return Object.freeze({...$t(e),create:$t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fp$3=Field$2(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),CURVE_A$1=Fp$3.create(BigInt("-3")),CURVE_B$1=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),p256$1=createCurve$2({a:CURVE_A$1,b:CURVE_B$1,Fp:Fp$3,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},sha256$5),secp256r1$1=p256$1;function equals$4(_t,e){if(_t===e)return!0;if(_t.byteLength!==e.byteLength)return!1;for(let $t=0;$t<_t.byteLength;$t++)if(_t[$t]!==e[$t])return!1;return!0}function alloc$3(_t=0){return new Uint8Array(_t)}function allocUnsafe$1(_t=0){return new Uint8Array(_t)}function asUint8Array$1(_t){return _t}function concat$2(_t,e){e==null&&(e=_t.reduce((At,kt)=>At+kt.length,0));const $t=allocUnsafe$1(e);let xt=0;for(const At of _t)$t.set(At,xt),xt+=At.length;return $t}const empty=new Uint8Array(0);function fromHex(_t){const e=_t.match(/../g);return e!=null?new Uint8Array(e.map($t=>parseInt($t,16))):empty}function equals$3(_t,e){if(_t===e)return!0;if(_t.byteLength!==e.byteLength)return!1;for(let $t=0;$t<_t.byteLength;$t++)if(_t[$t]!==e[$t])return!1;return!0}function coerce$2(_t){if(_t instanceof Uint8Array&&_t.constructor.name==="Uint8Array")return _t;if(_t instanceof ArrayBuffer)return new Uint8Array(_t);if(ArrayBuffer.isView(_t))return new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength);throw new Error("Unknown type, must be binary type")}function fromString$4(_t){return new TextEncoder().encode(_t)}function toString$9(_t){return new TextDecoder().decode(_t)}function base$4(_t,e){if(_t.length>=255)throw new TypeError("Alphabet too long");for(var $t=new Uint8Array(256),xt=0;xt<$t.length;xt++)$t[xt]=255;for(var At=0;At<_t.length;At++){var kt=_t.charAt(At),Bt=kt.charCodeAt(0);if($t[Bt]!==255)throw new TypeError(kt+" is ambiguous");$t[Bt]=At}var jt=_t.length,Lt=_t.charAt(0),Ut=Math.log(jt)/Math.log(256),Nt=Math.log(256)/Math.log(jt);function qt(Vt){if(Vt instanceof Uint8Array||(ArrayBuffer.isView(Vt)?Vt=new Uint8Array(Vt.buffer,Vt.byteOffset,Vt.byteLength):Array.isArray(Vt)&&(Vt=Uint8Array.from(Vt))),!(Vt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Vt.length===0)return"";for(var Ht=0,Jt=0,rr=0,Qt=Vt.length;rr!==Qt&&Vt[rr]===0;)rr++,Ht++;for(var Wt=(Qt-rr)*Nt+1>>>0,nr=new Uint8Array(Wt);rr!==Qt;){for(var yr=Vt[rr],vr=0,Ir=Wt-1;(yr!==0||vr<Jt)&&Ir!==-1;Ir--,vr++)yr+=256*nr[Ir]>>>0,nr[Ir]=yr%jt>>>0,yr=yr/jt>>>0;if(yr!==0)throw new Error("Non-zero carry");Jt=vr,rr++}for(var xr=Wt-Jt;xr!==Wt&&nr[xr]===0;)xr++;for(var Or=Lt.repeat(Ht);xr<Wt;++xr)Or+=_t.charAt(nr[xr]);return Or}function Kt(Vt){if(typeof Vt!="string")throw new TypeError("Expected String");if(Vt.length===0)return new Uint8Array;var Ht=0;if(Vt[Ht]!==" "){for(var Jt=0,rr=0;Vt[Ht]===Lt;)Jt++,Ht++;for(var Qt=(Vt.length-Ht)*Ut+1>>>0,Wt=new Uint8Array(Qt);Vt[Ht];){var nr=$t[Vt.charCodeAt(Ht)];if(nr===255)return;for(var yr=0,vr=Qt-1;(nr!==0||yr<rr)&&vr!==-1;vr--,yr++)nr+=jt*Wt[vr]>>>0,Wt[vr]=nr%256>>>0,nr=nr/256>>>0;if(nr!==0)throw new Error("Non-zero carry");rr=yr,Ht++}if(Vt[Ht]!==" "){for(var Ir=Qt-rr;Ir!==Qt&&Wt[Ir]===0;)Ir++;for(var xr=new Uint8Array(Jt+(Qt-Ir)),Or=Jt;Ir!==Qt;)xr[Or++]=Wt[Ir++];return xr}}}function zt(Vt){var Ht=Kt(Vt);if(Ht)return Ht;throw new Error(`Non-${e} character`)}return{encode:qt,decodeUnsafe:Kt,decode:zt}}var src$2=base$4,_brrp__multiformats_scope_baseX$2=src$2;let Encoder$3=class{constructor(e,$t,xt){dn(this,"name");dn(this,"prefix");dn(this,"baseEncode");this.name=e,this.prefix=$t,this.baseEncode=xt}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{constructor(e,$t,xt){dn(this,"name");dn(this,"prefix");dn(this,"baseDecode");dn(this,"prefixCodePoint");if(this.name=e,this.prefix=$t,$t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$t.codePointAt(0),this.baseDecode=xt}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}},ComposedDecoder$2=class{constructor(e){dn(this,"decoders");this.decoders=e}or(e){return or$2(this,e)}decode(e){const $t=e[0],xt=this.decoders[$t];if(xt!=null)return xt.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$2(_t,e){return new ComposedDecoder$2({..._t.decoders??{[_t.prefix]:_t},...e.decoders??{[e.prefix]:e}})}let Codec$2=class{constructor(e,$t,xt,At){dn(this,"name");dn(this,"prefix");dn(this,"baseEncode");dn(this,"baseDecode");dn(this,"encoder");dn(this,"decoder");this.name=e,this.prefix=$t,this.baseEncode=xt,this.baseDecode=At,this.encoder=new Encoder$3(e,$t,xt),this.decoder=new Decoder$2(e,$t,At)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function from$8({name:_t,prefix:e,encode:$t,decode:xt}){return new Codec$2(_t,e,$t,xt)}function baseX$2({name:_t,prefix:e,alphabet:$t}){const{encode:xt,decode:At}=_brrp__multiformats_scope_baseX$2($t,_t);return from$8({prefix:e,name:_t,encode:xt,decode:kt=>coerce$2(At(kt))})}function decode$k(_t,e,$t,xt){const At={};for(let Nt=0;Nt<e.length;++Nt)At[e[Nt]]=Nt;let kt=_t.length;for(;_t[kt-1]==="=";)--kt;const Bt=new Uint8Array(kt*$t/8|0);let jt=0,Lt=0,Ut=0;for(let Nt=0;Nt<kt;++Nt){const qt=At[_t[Nt]];if(qt===void 0)throw new SyntaxError(`Non-${xt} character`);Lt=Lt<<$t|qt,jt+=$t,jt>=8&&(jt-=8,Bt[Ut++]=255&Lt>>jt)}if(jt>=$t||255&Lt<<8-jt)throw new SyntaxError("Unexpected end of data");return Bt}function encode$f(_t,e,$t){const xt=e[e.length-1]==="=",At=(1<<$t)-1;let kt="",Bt=0,jt=0;for(let Lt=0;Lt<_t.length;++Lt)for(jt=jt<<8|_t[Lt],Bt+=8;Bt>$t;)Bt-=$t,kt+=e[At&jt>>Bt];if(Bt!==0&&(kt+=e[At&jt<<$t-Bt]),xt)for(;kt.length*$t&7;)kt+="=";return kt}function rfc4648$2({name:_t,prefix:e,bitsPerChar:$t,alphabet:xt}){return from$8({prefix:e,name:_t,encode(At){return encode$f(At,xt,$t)},decode(At){return decode$k(At,xt,$t,_t)}})}const base10$2=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars$1=alphabet$2.reduce((_t,e,$t)=>(_t[$t]=e,_t),[]),alphabetCharsToBytes$1=alphabet$2.reduce((_t,e,$t)=>(_t[e.codePointAt(0)]=$t,_t),[]);function encode$e(_t){return _t.reduce((e,$t)=>(e+=alphabetBytesToChars$1[$t],e),"")}function decode$j(_t){const e=[];for(const $t of _t){const xt=alphabetCharsToBytes$1[$t.codePointAt(0)];if(xt===void 0)throw new Error(`Non-base256emoji character: ${$t}`);e.push(xt)}return new Uint8Array(e)}const base256emoji$2=from$8({prefix:"🚀",name:"base256emoji",encode:encode$e,decode:decode$j}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$4=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$3,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$2},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$2=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),identity$2=from$8({prefix:"\0",name:"identity",encode:_t=>toString$9(_t),decode:_t=>fromString$4(_t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;var encode_1$2=encode$d,MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$d(_t,e,$t){e=e||[],$t=$t||0;for(var xt=$t;_t>=INT$2;)e[$t++]=_t&255|MSB$4,_t/=128;for(;_t&MSBALL$2;)e[$t++]=_t&255|MSB$4,_t>>>=7;return e[$t]=_t|0,encode$d.bytes=$t-xt+1,e}var decode$i=read$3,MSB$1$2=128,REST$1$2=127;function read$3(_t,xt){var $t=0,xt=xt||0,At=0,kt=xt,Bt,jt=_t.length;do{if(kt>=jt)throw read$3.bytes=0,new RangeError("Could not decode varint");Bt=_t[kt++],$t+=At<28?(Bt&REST$1$2)<<At:(Bt&REST$1$2)*Math.pow(2,At),At+=7}while(Bt>=MSB$1$2);return read$3.bytes=kt-xt,$t}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(_t){return _t<N1$3?1:_t<N2$3?2:_t<N3$3?3:_t<N4$3?4:_t<N5$3?5:_t<N6$3?6:_t<N7$3?7:_t<N8$2?8:_t<N9$2?9:10},varint$2={encode:encode_1$2,decode:decode$i,encodingLength:length$3},_brrp_varint$2=varint$2;function decode$h(_t,e=0){return[_brrp_varint$2.decode(_t,e),_brrp_varint$2.decode.bytes]}function encodeTo$2(_t,e,$t=0){return _brrp_varint$2.encode(_t,e,$t),e}function encodingLength$7(_t){return _brrp_varint$2.encodingLength(_t)}function create$1(_t,e){const $t=e.byteLength,xt=encodingLength$7(_t),At=xt+encodingLength$7($t),kt=new Uint8Array(At+$t);return encodeTo$2(_t,kt,0),encodeTo$2($t,kt,xt),kt.set(e,At),new Digest$1(_t,$t,e,kt)}function decode$g(_t){const e=coerce$2(_t),[$t,xt]=decode$h(e),[At,kt]=decode$h(e.subarray(xt)),Bt=e.subarray(xt+kt);if(Bt.byteLength!==At)throw new Error("Incorrect length");return new Digest$1($t,At,Bt,e)}function equals$2(_t,e){if(_t===e)return!0;{const $t=e;return _t.code===$t.code&&_t.size===$t.size&&$t.bytes instanceof Uint8Array&&equals$3(_t.bytes,$t.bytes)}}let Digest$1=class{constructor(e,$t,xt,At){dn(this,"code");dn(this,"size");dn(this,"digest");dn(this,"bytes");this.code=e,this.size=$t,this.digest=xt,this.bytes=At}};function from$7({name:_t,code:e,encode:$t}){return new Hasher$1(_t,e,$t)}let Hasher$1=class{constructor(e,$t,xt){dn(this,"name");dn(this,"code");dn(this,"encode");this.name=e,this.code=$t,this.encode=xt}digest(e){if(e instanceof Uint8Array){const $t=this.encode(e);return $t instanceof Uint8Array?create$1(this.code,$t):$t.then(xt=>create$1(this.code,xt))}else throw Error("Unknown type, must be binary type")}};function format$8(_t,e){const{bytes:$t,version:xt}=_t;switch(xt){case 0:return toStringV0$2($t,baseCache$2(_t),e??base58btc$2.encoder);default:return toStringV1$2($t,baseCache$2(_t),e??base32$3.encoder)}}const cache$3=new WeakMap;function baseCache$2(_t){const e=cache$3.get(_t);if(e==null){const $t=new Map;return cache$3.set(_t,$t),$t}return e}var mi;let CID$2=class Wn{constructor(e,$t,xt,At){dn(this,"code");dn(this,"version");dn(this,"multihash");dn(this,"bytes");dn(this,"/");dn(this,mi,"CID");this.code=$t,this.version=e,this.multihash=xt,this.bytes=At,this["/"]=At}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:$t}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if($t.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Wn.createV0($t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:$t}=this.multihash,xt=create$1(e,$t);return Wn.createV1(this.code,xt)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Wn.equals(this,e)}static equals(e,$t){const xt=$t;return xt!=null&&e.code===xt.code&&e.version===xt.version&&equals$2(e.multihash,xt.multihash)}toString(e){return format$8(this,e)}toJSON(){return{"/":format$8(this)}}link(){return this}[(mi=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const $t=e;if($t instanceof Wn)return $t;if($t["/"]!=null&&$t["/"]===$t.bytes||$t.asCID===$t){const{version:xt,code:At,multihash:kt,bytes:Bt}=$t;return new Wn(xt,At,kt,Bt??encodeCID$2(xt,At,kt.bytes))}else if($t[cidSymbol$2]===!0){const{version:xt,multihash:At,code:kt}=$t,Bt=decode$g(At);return Wn.create(xt,kt,Bt)}else return null}static create(e,$t,xt){if(typeof $t!="number")throw new Error("String codecs are no longer supported");if(!(xt.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if($t!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new Wn(e,$t,xt,xt.bytes)}case 1:{const At=encodeCID$2(e,$t,xt.bytes);return new Wn(e,$t,xt,At)}default:throw new Error("Invalid version")}}static createV0(e){return Wn.create(0,DAG_PB_CODE$2,e)}static createV1(e,$t){return Wn.create(1,e,$t)}static decode(e){const[$t,xt]=Wn.decodeFirst(e);if(xt.length!==0)throw new Error("Incorrect length");return $t}static decodeFirst(e){const $t=Wn.inspectBytes(e),xt=$t.size-$t.multihashSize,At=coerce$2(e.subarray(xt,xt+$t.multihashSize));if(At.byteLength!==$t.multihashSize)throw new Error("Incorrect length");const kt=At.subarray($t.multihashSize-$t.digestSize),Bt=new Digest$1($t.multihashCode,$t.digestSize,kt,At);return[$t.version===0?Wn.createV0(Bt):Wn.createV1($t.codec,Bt),e.subarray($t.size)]}static inspectBytes(e){let $t=0;const xt=()=>{const[qt,Kt]=decode$h(e.subarray($t));return $t+=Kt,qt};let At=xt(),kt=DAG_PB_CODE$2;if(At===18?(At=0,$t=0):kt=xt(),At!==0&&At!==1)throw new RangeError(`Invalid CID version ${At}`);const Bt=$t,jt=xt(),Lt=xt(),Ut=$t+Lt,Nt=Ut-Bt;return{version:At,codec:kt,multihashCode:jt,digestSize:Lt,multihashSize:Nt,size:Ut}}static parse(e,$t){const[xt,At]=parseCIDtoBytes$2(e,$t),kt=Wn.decode(At);if(kt.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$2(kt).set(xt,e),kt}};function parseCIDtoBytes$2(_t,e){switch(_t[0]){case"Q":{const $t=e??base58btc$2;return[base58btc$2.prefix,$t.decode(`${base58btc$2.prefix}${_t}`)]}case base58btc$2.prefix:{const $t=e??base58btc$2;return[base58btc$2.prefix,$t.decode(_t)]}case base32$3.prefix:{const $t=e??base32$3;return[base32$3.prefix,$t.decode(_t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[_t[0],e.decode(_t)]}}}function toStringV0$2(_t,e,$t){const{prefix:xt}=$t;if(xt!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${$t.name} encoding`);const At=e.get(xt);if(At==null){const kt=$t.encode(_t).slice(1);return e.set(xt,kt),kt}else return At}function toStringV1$2(_t,e,$t){const{prefix:xt}=$t,At=e.get(xt);if(At==null){const kt=$t.encode(_t);return e.set(xt,kt),kt}else return At}const DAG_PB_CODE$2=112,SHA_256_CODE$2=18;function encodeCID$2(_t,e,$t){const xt=encodingLength$7(_t),At=xt+encodingLength$7(e),kt=new Uint8Array(At+$t.byteLength);return encodeTo$2(_t,kt,0),encodeTo$2(e,kt,xt),kt.set($t,At),kt}const cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$4,...base36$3,...base58$1,...base64$3,...base256emoji$3};function createCodec$2(_t,e,$t,xt){return{name:_t,prefix:e,encoder:{name:_t,prefix:e,encode:$t},decoder:{decode:xt}}}const string$2=createCodec$2("utf8","u",_t=>"u"+new TextDecoder("utf8").decode(_t),_t=>new TextEncoder().encode(_t.substring(1))),ascii$1=createCodec$2("ascii","a",_t=>{let e="a";for(let $t=0;$t<_t.length;$t++)e+=String.fromCharCode(_t[$t]);return e},_t=>{_t=_t.substring(1);const e=allocUnsafe$1(_t.length);for(let $t=0;$t<_t.length;$t++)e[$t]=_t.charCodeAt($t);return e}),BASES$1={utf8:string$2,"utf-8":string$2,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function fromString$3(_t,e="utf8"){const $t=BASES$1[e];if($t==null)throw new Error(`Unsupported encoding "${e}"`);return $t.decoder.decode(`${$t.prefix}${_t}`)}function toString$8(_t,e="utf8"){const $t=BASES$1[e];if($t==null)throw new Error(`Unsupported encoding "${e}"`);return $t.encoder.encode(_t).substring(1)}var __awaiter$O=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};const u8a={toString:toString$8,fromString:fromString$3};let Secp256r1$1=class ri{static validateKey(e){if(e.kty!=="EC"||e.crv!=="P-256")throw new DwnError(DwnErrorCode.Secp256r1KeyNotValid,"Invalid SECP256R1 JWK: `kty` MUST be `EC`. `crv` MUST be `P-256`")}static publicKeyToJwk(e){return __awaiter$O(this,void 0,void 0,function*(){let $t;e.byteLength===33?$t=p256$1.ProjectivePoint.fromHex(e).toRawBytes(!1):$t=e;const xt=Encoder$4.bytesToBase64Url($t.subarray(1,33)),At=Encoder$4.bytesToBase64Url($t.subarray(33,65));return{alg:"ES256",kty:"EC",crv:"P-256",x:xt,y:At}})}static privateJwkToBytes(e){return Encoder$4.base64UrlToBytes(e.d)}static sign(e,$t){return __awaiter$O(this,void 0,void 0,function*(){ri.validateKey($t);const xt=yield sha256$7.encode(e),At=ri.privateJwkToBytes($t);return Promise.resolve(p256$1.sign(xt,At).toCompactRawBytes())})}static verify(e,$t,xt){return __awaiter$O(this,void 0,void 0,function*(){ri.validateKey(xt);let At;$t.length===64?At=p256$1.Signature.fromCompact($t):At=p256$1.Signature.fromDER($t);const kt=yield sha256$7.encode(e),Bt=p256$1.ProjectivePoint.fromAffine({x:ri.bytesToBigInt(Encoder$4.base64UrlToBytes(xt.x)),y:ri.bytesToBigInt(Encoder$4.base64UrlToBytes(xt.y))}).toRawBytes(!1);return p256$1.verify(At,kt,Bt)})}static generateKeyPair(){return __awaiter$O(this,void 0,void 0,function*(){const e=p256$1.utils.randomPrivateKey(),$t=secp256r1$1.getPublicKey(e,!1),xt=Encoder$4.bytesToBase64Url(e),At=yield ri.publicKeyToJwk($t),kt=Object.assign(Object.assign({},At),{d:xt});return{publicJwk:At,privateJwk:kt}})}static bytesToBigInt(e){return BigInt("0x"+u8a.toString(e,"base16"))}};const signatureAlgorithms={Ed25519:ed25519$2,secp256k1:{sign:Secp256k1$1.sign,verify:Secp256k1$1.verify,generateKeyPair:Secp256k1$1.generateKeyPair,publicKeyToJwk:Secp256k1$1.publicKeyToJwk},"P-256":{sign:Secp256r1$1.sign,verify:Secp256r1$1.verify,generateKeyPair:Secp256r1$1.generateKeyPair,publicKeyToJwk:Secp256r1$1.publicKeyToJwk}};var __awaiter$N=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class PrivateKeySigner{constructor(e){var $t,xt;if(e.keyId===void 0&&e.privateJwk.kid===void 0)throw new DwnError(DwnErrorCode.PrivateKeySignerUnableToDeduceKeyId,"Unable to deduce the key ID");if(e.algorithm===void 0&&e.privateJwk.alg===void 0)throw new DwnError(DwnErrorCode.PrivateKeySignerUnableToDeduceAlgorithm,"Unable to deduce the signature algorithm");if(this.keyId=($t=e.keyId)!==null&&$t!==void 0?$t:e.privateJwk.kid,this.algorithm=(xt=e.algorithm)!==null&&xt!==void 0?xt:e.privateJwk.alg,this.privateJwk=e.privateJwk,this.signatureAlgorithm=signatureAlgorithms[e.privateJwk.crv],!this.signatureAlgorithm)throw new DwnError(DwnErrorCode.PrivateKeySignerUnsupportedCurve,`Unsupported crv ${e.privateJwk.crv}, crv must be one of ${Object.keys(signatureAlgorithms)}`)}sign(e){return __awaiter$N(this,void 0,void 0,function*(){return yield this.signatureAlgorithm.sign(e,this.privateJwk)})}}var __awaiter$M=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Jws{static getKid(e){const{kid:$t}=Encoder$4.base64UrlToObject(e.protected);return $t}static getSignerDid(e){const $t=Jws.getKid(e);return Jws.extractDid($t)}static verifySignature(e,$t,xt){return __awaiter$M(this,void 0,void 0,function*(){const At=signatureAlgorithms[xt.crv];if(!At)throw new DwnError(DwnErrorCode.JwsVerifySignatureUnsupportedCrv,`unsupported crv. crv must be one of ${Object.keys(signatureAlgorithms)}`);const kt=Encoder$4.stringToBytes(`${$t.protected}.${e}`),Bt=Encoder$4.base64UrlToBytes($t.signature);return yield At.verify(kt,Bt,xt)})}static decodePlainObjectPayload(e){let $t;try{$t=Encoder$4.base64UrlToObject(e.payload)}catch{throw new DwnError(DwnErrorCode.JwsDecodePlainObjectPayloadInvalid,"payload is not a JSON object")}if(!isPlainObject$1($t))throw new DwnError(DwnErrorCode.JwsDecodePlainObjectPayloadInvalid,"signed payload must be a plain object");return $t}static extractDid(e){const[$t]=e.split("#");return $t}static createSigners(e){return e.map(xt=>Jws.createSigner(xt))}static createSigner(e){const $t=e.keyPair.privateJwk,xt=e.keyId;return new PrivateKeySigner({privateJwk:$t,keyId:xt})}}var buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$2=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$2=0,len=code$5.length;i$2<len;++i$2)lookup$2[i$2]=code$5[i$2],revLookup[code$5.charCodeAt(i$2)]=i$2;revLookup[45]=62;revLookup[95]=63;function getLens(_t){var e=_t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var $t=_t.indexOf("=");$t===-1&&($t=e);var xt=$t===e?0:4-$t%4;return[$t,xt]}function byteLength(_t){var e=getLens(_t),$t=e[0],xt=e[1];return($t+xt)*3/4-xt}function _byteLength(_t,e,$t){return(e+$t)*3/4-$t}function toByteArray(_t){var e,$t=getLens(_t),xt=$t[0],At=$t[1],kt=new Arr(_byteLength(_t,xt,At)),Bt=0,jt=At>0?xt-4:xt,Lt;for(Lt=0;Lt<jt;Lt+=4)e=revLookup[_t.charCodeAt(Lt)]<<18|revLookup[_t.charCodeAt(Lt+1)]<<12|revLookup[_t.charCodeAt(Lt+2)]<<6|revLookup[_t.charCodeAt(Lt+3)],kt[Bt++]=e>>16&255,kt[Bt++]=e>>8&255,kt[Bt++]=e&255;return At===2&&(e=revLookup[_t.charCodeAt(Lt)]<<2|revLookup[_t.charCodeAt(Lt+1)]>>4,kt[Bt++]=e&255),At===1&&(e=revLookup[_t.charCodeAt(Lt)]<<10|revLookup[_t.charCodeAt(Lt+1)]<<4|revLookup[_t.charCodeAt(Lt+2)]>>2,kt[Bt++]=e>>8&255,kt[Bt++]=e&255),kt}function tripletToBase64(_t){return lookup$2[_t>>18&63]+lookup$2[_t>>12&63]+lookup$2[_t>>6&63]+lookup$2[_t&63]}function encodeChunk(_t,e,$t){for(var xt,At=[],kt=e;kt<$t;kt+=3)xt=(_t[kt]<<16&16711680)+(_t[kt+1]<<8&65280)+(_t[kt+2]&255),At.push(tripletToBase64(xt));return At.join("")}function fromByteArray(_t){for(var e,$t=_t.length,xt=$t%3,At=[],kt=16383,Bt=0,jt=$t-xt;Bt<jt;Bt+=kt)At.push(encodeChunk(_t,Bt,Bt+kt>jt?jt:Bt+kt));return xt===1?(e=_t[$t-1],At.push(lookup$2[e>>2]+lookup$2[e<<4&63]+"==")):xt===2&&(e=(_t[$t-2]<<8)+_t[$t-1],At.push(lookup$2[e>>10]+lookup$2[e>>4&63]+lookup$2[e<<2&63]+"=")),At.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(_t,e,$t,xt,At){var kt,Bt,jt=At*8-xt-1,Lt=(1<<jt)-1,Ut=Lt>>1,Nt=-7,qt=$t?At-1:0,Kt=$t?-1:1,zt=_t[e+qt];for(qt+=Kt,kt=zt&(1<<-Nt)-1,zt>>=-Nt,Nt+=jt;Nt>0;kt=kt*256+_t[e+qt],qt+=Kt,Nt-=8);for(Bt=kt&(1<<-Nt)-1,kt>>=-Nt,Nt+=xt;Nt>0;Bt=Bt*256+_t[e+qt],qt+=Kt,Nt-=8);if(kt===0)kt=1-Ut;else{if(kt===Lt)return Bt?NaN:(zt?-1:1)*(1/0);Bt=Bt+Math.pow(2,xt),kt=kt-Ut}return(zt?-1:1)*Bt*Math.pow(2,kt-xt)};ieee754.write=function(_t,e,$t,xt,At,kt){var Bt,jt,Lt,Ut=kt*8-At-1,Nt=(1<<Ut)-1,qt=Nt>>1,Kt=At===23?Math.pow(2,-24)-Math.pow(2,-77):0,zt=xt?0:kt-1,Vt=xt?1:-1,Ht=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(jt=isNaN(e)?1:0,Bt=Nt):(Bt=Math.floor(Math.log(e)/Math.LN2),e*(Lt=Math.pow(2,-Bt))<1&&(Bt--,Lt*=2),Bt+qt>=1?e+=Kt/Lt:e+=Kt*Math.pow(2,1-qt),e*Lt>=2&&(Bt++,Lt/=2),Bt+qt>=Nt?(jt=0,Bt=Nt):Bt+qt>=1?(jt=(e*Lt-1)*Math.pow(2,At),Bt=Bt+qt):(jt=e*Math.pow(2,qt-1)*Math.pow(2,At),Bt=0));At>=8;_t[$t+zt]=jt&255,zt+=Vt,jt/=256,At-=8);for(Bt=Bt<<At|jt,Ut+=At;Ut>0;_t[$t+zt]=Bt&255,zt+=Vt,Bt/=256,Ut-=8);_t[$t+zt-Vt]|=Ht*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_t){var e=base64Js,$t=ieee754,xt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_t.Buffer=jt,_t.SlowBuffer=Qt,_t.INSPECT_MAX_BYTES=50;var At=2147483647;_t.kMaxLength=At,jt.TYPED_ARRAY_SUPPORT=kt(),!jt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function kt(){try{var Pr=new Uint8Array(1),_r={foo:function(){return 42}};return Object.setPrototypeOf(_r,Uint8Array.prototype),Object.setPrototypeOf(Pr,_r),Pr.foo()===42}catch{return!1}}Object.defineProperty(jt.prototype,"parent",{enumerable:!0,get:function(){if(jt.isBuffer(this))return this.buffer}}),Object.defineProperty(jt.prototype,"offset",{enumerable:!0,get:function(){if(jt.isBuffer(this))return this.byteOffset}});function Bt(Pr){if(Pr>At)throw new RangeError('The value "'+Pr+'" is invalid for option "size"');var _r=new Uint8Array(Pr);return Object.setPrototypeOf(_r,jt.prototype),_r}function jt(Pr,_r,Ar){if(typeof Pr=="number"){if(typeof _r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return qt(Pr)}return Lt(Pr,_r,Ar)}jt.poolSize=8192;function Lt(Pr,_r,Ar){if(typeof Pr=="string")return Kt(Pr,_r);if(ArrayBuffer.isView(Pr))return Vt(Pr);if(Pr==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pr);if($r(Pr,ArrayBuffer)||Pr&&$r(Pr.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($r(Pr,SharedArrayBuffer)||Pr&&$r(Pr.buffer,SharedArrayBuffer)))return Ht(Pr,_r,Ar);if(typeof Pr=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var jr=Pr.valueOf&&Pr.valueOf();if(jr!=null&&jr!==Pr)return jt.from(jr,_r,Ar);var Kr=Jt(Pr);if(Kr)return Kr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Pr[Symbol.toPrimitive]=="function")return jt.from(Pr[Symbol.toPrimitive]("string"),_r,Ar);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Pr)}jt.from=function(Pr,_r,Ar){return Lt(Pr,_r,Ar)},Object.setPrototypeOf(jt.prototype,Uint8Array.prototype),Object.setPrototypeOf(jt,Uint8Array);function Ut(Pr){if(typeof Pr!="number")throw new TypeError('"size" argument must be of type number');if(Pr<0)throw new RangeError('The value "'+Pr+'" is invalid for option "size"')}function Nt(Pr,_r,Ar){return Ut(Pr),Pr<=0?Bt(Pr):_r!==void 0?typeof Ar=="string"?Bt(Pr).fill(_r,Ar):Bt(Pr).fill(_r):Bt(Pr)}jt.alloc=function(Pr,_r,Ar){return Nt(Pr,_r,Ar)};function qt(Pr){return Ut(Pr),Bt(Pr<0?0:rr(Pr)|0)}jt.allocUnsafe=function(Pr){return qt(Pr)},jt.allocUnsafeSlow=function(Pr){return qt(Pr)};function Kt(Pr,_r){if((typeof _r!="string"||_r==="")&&(_r="utf8"),!jt.isEncoding(_r))throw new TypeError("Unknown encoding: "+_r);var Ar=Wt(Pr,_r)|0,jr=Bt(Ar),Kr=jr.write(Pr,_r);return Kr!==Ar&&(jr=jr.slice(0,Kr)),jr}function zt(Pr){for(var _r=Pr.length<0?0:rr(Pr.length)|0,Ar=Bt(_r),jr=0;jr<_r;jr+=1)Ar[jr]=Pr[jr]&255;return Ar}function Vt(Pr){if($r(Pr,Uint8Array)){var _r=new Uint8Array(Pr);return Ht(_r.buffer,_r.byteOffset,_r.byteLength)}return zt(Pr)}function Ht(Pr,_r,Ar){if(_r<0||Pr.byteLength<_r)throw new RangeError('"offset" is outside of buffer bounds');if(Pr.byteLength<_r+(Ar||0))throw new RangeError('"length" is outside of buffer bounds');var jr;return _r===void 0&&Ar===void 0?jr=new Uint8Array(Pr):Ar===void 0?jr=new Uint8Array(Pr,_r):jr=new Uint8Array(Pr,_r,Ar),Object.setPrototypeOf(jr,jt.prototype),jr}function Jt(Pr){if(jt.isBuffer(Pr)){var _r=rr(Pr.length)|0,Ar=Bt(_r);return Ar.length===0||Pr.copy(Ar,0,0,_r),Ar}if(Pr.length!==void 0)return typeof Pr.length!="number"||Rr(Pr.length)?Bt(0):zt(Pr);if(Pr.type==="Buffer"&&Array.isArray(Pr.data))return zt(Pr.data)}function rr(Pr){if(Pr>=At)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+At.toString(16)+" bytes");return Pr|0}function Qt(Pr){return+Pr!=Pr&&(Pr=0),jt.alloc(+Pr)}jt.isBuffer=function(_r){return _r!=null&&_r._isBuffer===!0&&_r!==jt.prototype},jt.compare=function(_r,Ar){if($r(_r,Uint8Array)&&(_r=jt.from(_r,_r.offset,_r.byteLength)),$r(Ar,Uint8Array)&&(Ar=jt.from(Ar,Ar.offset,Ar.byteLength)),!jt.isBuffer(_r)||!jt.isBuffer(Ar))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_r===Ar)return 0;for(var jr=_r.length,Kr=Ar.length,Zr=0,Jr=Math.min(jr,Kr);Zr<Jr;++Zr)if(_r[Zr]!==Ar[Zr]){jr=_r[Zr],Kr=Ar[Zr];break}return jr<Kr?-1:Kr<jr?1:0},jt.isEncoding=function(_r){switch(String(_r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},jt.concat=function(_r,Ar){if(!Array.isArray(_r))throw new TypeError('"list" argument must be an Array of Buffers');if(_r.length===0)return jt.alloc(0);var jr;if(Ar===void 0)for(Ar=0,jr=0;jr<_r.length;++jr)Ar+=_r[jr].length;var Kr=jt.allocUnsafe(Ar),Zr=0;for(jr=0;jr<_r.length;++jr){var Jr=_r[jr];if($r(Jr,Uint8Array))Zr+Jr.length>Kr.length?jt.from(Jr).copy(Kr,Zr):Uint8Array.prototype.set.call(Kr,Jr,Zr);else if(jt.isBuffer(Jr))Jr.copy(Kr,Zr);else throw new TypeError('"list" argument must be an Array of Buffers');Zr+=Jr.length}return Kr};function Wt(Pr,_r){if(jt.isBuffer(Pr))return Pr.length;if(ArrayBuffer.isView(Pr)||$r(Pr,ArrayBuffer))return Pr.byteLength;if(typeof Pr!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Pr);var Ar=Pr.length,jr=arguments.length>2&&arguments[2]===!0;if(!jr&&Ar===0)return 0;for(var Kr=!1;;)switch(_r){case"ascii":case"latin1":case"binary":return Ar;case"utf8":case"utf-8":return Tr(Pr).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ar*2;case"hex":return Ar>>>1;case"base64":return Cr(Pr).length;default:if(Kr)return jr?-1:Tr(Pr).length;_r=(""+_r).toLowerCase(),Kr=!0}}jt.byteLength=Wt;function nr(Pr,_r,Ar){var jr=!1;if((_r===void 0||_r<0)&&(_r=0),_r>this.length||((Ar===void 0||Ar>this.length)&&(Ar=this.length),Ar<=0)||(Ar>>>=0,_r>>>=0,Ar<=_r))return"";for(Pr||(Pr="utf8");;)switch(Pr){case"hex":return ar(this,_r,Ar);case"utf8":case"utf-8":return Xt(this,_r,Ar);case"ascii":return ur(this,_r,Ar);case"latin1":case"binary":return gr(this,_r,Ar);case"base64":return ir(this,_r,Ar);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tr(this,_r,Ar);default:if(jr)throw new TypeError("Unknown encoding: "+Pr);Pr=(Pr+"").toLowerCase(),jr=!0}}jt.prototype._isBuffer=!0;function yr(Pr,_r,Ar){var jr=Pr[_r];Pr[_r]=Pr[Ar],Pr[Ar]=jr}jt.prototype.swap16=function(){var _r=this.length;if(_r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ar=0;Ar<_r;Ar+=2)yr(this,Ar,Ar+1);return this},jt.prototype.swap32=function(){var _r=this.length;if(_r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ar=0;Ar<_r;Ar+=4)yr(this,Ar,Ar+3),yr(this,Ar+1,Ar+2);return this},jt.prototype.swap64=function(){var _r=this.length;if(_r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ar=0;Ar<_r;Ar+=8)yr(this,Ar,Ar+7),yr(this,Ar+1,Ar+6),yr(this,Ar+2,Ar+5),yr(this,Ar+3,Ar+4);return this},jt.prototype.toString=function(){var _r=this.length;return _r===0?"":arguments.length===0?Xt(this,0,_r):nr.apply(this,arguments)},jt.prototype.toLocaleString=jt.prototype.toString,jt.prototype.equals=function(_r){if(!jt.isBuffer(_r))throw new TypeError("Argument must be a Buffer");return this===_r?!0:jt.compare(this,_r)===0},jt.prototype.inspect=function(){var _r="",Ar=_t.INSPECT_MAX_BYTES;return _r=this.toString("hex",0,Ar).replace(/(.{2})/g,"$1 ").trim(),this.length>Ar&&(_r+=" ... "),"<Buffer "+_r+">"},xt&&(jt.prototype[xt]=jt.prototype.inspect),jt.prototype.compare=function(_r,Ar,jr,Kr,Zr){if($r(_r,Uint8Array)&&(_r=jt.from(_r,_r.offset,_r.byteLength)),!jt.isBuffer(_r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _r);if(Ar===void 0&&(Ar=0),jr===void 0&&(jr=_r?_r.length:0),Kr===void 0&&(Kr=0),Zr===void 0&&(Zr=this.length),Ar<0||jr>_r.length||Kr<0||Zr>this.length)throw new RangeError("out of range index");if(Kr>=Zr&&Ar>=jr)return 0;if(Kr>=Zr)return-1;if(Ar>=jr)return 1;if(Ar>>>=0,jr>>>=0,Kr>>>=0,Zr>>>=0,this===_r)return 0;for(var Jr=Zr-Kr,nn=jr-Ar,on=Math.min(Jr,nn),Gr=this.slice(Kr,Zr),Fr=_r.slice(Ar,jr),Xr=0;Xr<on;++Xr)if(Gr[Xr]!==Fr[Xr]){Jr=Gr[Xr],nn=Fr[Xr];break}return Jr<nn?-1:nn<Jr?1:0};function vr(Pr,_r,Ar,jr,Kr){if(Pr.length===0)return-1;if(typeof Ar=="string"?(jr=Ar,Ar=0):Ar>2147483647?Ar=2147483647:Ar<-2147483648&&(Ar=-2147483648),Ar=+Ar,Rr(Ar)&&(Ar=Kr?0:Pr.length-1),Ar<0&&(Ar=Pr.length+Ar),Ar>=Pr.length){if(Kr)return-1;Ar=Pr.length-1}else if(Ar<0)if(Kr)Ar=0;else return-1;if(typeof _r=="string"&&(_r=jt.from(_r,jr)),jt.isBuffer(_r))return _r.length===0?-1:Ir(Pr,_r,Ar,jr,Kr);if(typeof _r=="number")return _r=_r&255,typeof Uint8Array.prototype.indexOf=="function"?Kr?Uint8Array.prototype.indexOf.call(Pr,_r,Ar):Uint8Array.prototype.lastIndexOf.call(Pr,_r,Ar):Ir(Pr,[_r],Ar,jr,Kr);throw new TypeError("val must be string, number or Buffer")}function Ir(Pr,_r,Ar,jr,Kr){var Zr=1,Jr=Pr.length,nn=_r.length;if(jr!==void 0&&(jr=String(jr).toLowerCase(),jr==="ucs2"||jr==="ucs-2"||jr==="utf16le"||jr==="utf-16le")){if(Pr.length<2||_r.length<2)return-1;Zr=2,Jr/=2,nn/=2,Ar/=2}function on(en,un){return Zr===1?en[un]:en.readUInt16BE(un*Zr)}var Gr;if(Kr){var Fr=-1;for(Gr=Ar;Gr<Jr;Gr++)if(on(Pr,Gr)===on(_r,Fr===-1?0:Gr-Fr)){if(Fr===-1&&(Fr=Gr),Gr-Fr+1===nn)return Fr*Zr}else Fr!==-1&&(Gr-=Gr-Fr),Fr=-1}else for(Ar+nn>Jr&&(Ar=Jr-nn),Gr=Ar;Gr>=0;Gr--){for(var Xr=!0,tn=0;tn<nn;tn++)if(on(Pr,Gr+tn)!==on(_r,tn)){Xr=!1;break}if(Xr)return Gr}return-1}jt.prototype.includes=function(_r,Ar,jr){return this.indexOf(_r,Ar,jr)!==-1},jt.prototype.indexOf=function(_r,Ar,jr){return vr(this,_r,Ar,jr,!0)},jt.prototype.lastIndexOf=function(_r,Ar,jr){return vr(this,_r,Ar,jr,!1)};function xr(Pr,_r,Ar,jr){Ar=Number(Ar)||0;var Kr=Pr.length-Ar;jr?(jr=Number(jr),jr>Kr&&(jr=Kr)):jr=Kr;var Zr=_r.length;jr>Zr/2&&(jr=Zr/2);for(var Jr=0;Jr<jr;++Jr){var nn=parseInt(_r.substr(Jr*2,2),16);if(Rr(nn))return Jr;Pr[Ar+Jr]=nn}return Jr}function Or(Pr,_r,Ar,jr){return Br(Tr(_r,Pr.length-Ar),Pr,Ar,jr)}function Nr(Pr,_r,Ar,jr){return Br(Mr(_r),Pr,Ar,jr)}function kr(Pr,_r,Ar,jr){return Br(Cr(_r),Pr,Ar,jr)}function lr(Pr,_r,Ar,jr){return Br(Lr(_r,Pr.length-Ar),Pr,Ar,jr)}jt.prototype.write=function(_r,Ar,jr,Kr){if(Ar===void 0)Kr="utf8",jr=this.length,Ar=0;else if(jr===void 0&&typeof Ar=="string")Kr=Ar,jr=this.length,Ar=0;else if(isFinite(Ar))Ar=Ar>>>0,isFinite(jr)?(jr=jr>>>0,Kr===void 0&&(Kr="utf8")):(Kr=jr,jr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Zr=this.length-Ar;if((jr===void 0||jr>Zr)&&(jr=Zr),_r.length>0&&(jr<0||Ar<0)||Ar>this.length)throw new RangeError("Attempt to write outside buffer bounds");Kr||(Kr="utf8");for(var Jr=!1;;)switch(Kr){case"hex":return xr(this,_r,Ar,jr);case"utf8":case"utf-8":return Or(this,_r,Ar,jr);case"ascii":case"latin1":case"binary":return Nr(this,_r,Ar,jr);case"base64":return kr(this,_r,Ar,jr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lr(this,_r,Ar,jr);default:if(Jr)throw new TypeError("Unknown encoding: "+Kr);Kr=(""+Kr).toLowerCase(),Jr=!0}},jt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ir(Pr,_r,Ar){return _r===0&&Ar===Pr.length?e.fromByteArray(Pr):e.fromByteArray(Pr.slice(_r,Ar))}function Xt(Pr,_r,Ar){Ar=Math.min(Pr.length,Ar);for(var jr=[],Kr=_r;Kr<Ar;){var Zr=Pr[Kr],Jr=null,nn=Zr>239?4:Zr>223?3:Zr>191?2:1;if(Kr+nn<=Ar){var on,Gr,Fr,Xr;switch(nn){case 1:Zr<128&&(Jr=Zr);break;case 2:on=Pr[Kr+1],(on&192)===128&&(Xr=(Zr&31)<<6|on&63,Xr>127&&(Jr=Xr));break;case 3:on=Pr[Kr+1],Gr=Pr[Kr+2],(on&192)===128&&(Gr&192)===128&&(Xr=(Zr&15)<<12|(on&63)<<6|Gr&63,Xr>2047&&(Xr<55296||Xr>57343)&&(Jr=Xr));break;case 4:on=Pr[Kr+1],Gr=Pr[Kr+2],Fr=Pr[Kr+3],(on&192)===128&&(Gr&192)===128&&(Fr&192)===128&&(Xr=(Zr&15)<<18|(on&63)<<12|(Gr&63)<<6|Fr&63,Xr>65535&&Xr<1114112&&(Jr=Xr))}}Jr===null?(Jr=65533,nn=1):Jr>65535&&(Jr-=65536,jr.push(Jr>>>10&1023|55296),Jr=56320|Jr&1023),jr.push(Jr),Kr+=nn}return pr(jr)}var er=4096;function pr(Pr){var _r=Pr.length;if(_r<=er)return String.fromCharCode.apply(String,Pr);for(var Ar="",jr=0;jr<_r;)Ar+=String.fromCharCode.apply(String,Pr.slice(jr,jr+=er));return Ar}function ur(Pr,_r,Ar){var jr="";Ar=Math.min(Pr.length,Ar);for(var Kr=_r;Kr<Ar;++Kr)jr+=String.fromCharCode(Pr[Kr]&127);return jr}function gr(Pr,_r,Ar){var jr="";Ar=Math.min(Pr.length,Ar);for(var Kr=_r;Kr<Ar;++Kr)jr+=String.fromCharCode(Pr[Kr]);return jr}function ar(Pr,_r,Ar){var jr=Pr.length;(!_r||_r<0)&&(_r=0),(!Ar||Ar<0||Ar>jr)&&(Ar=jr);for(var Kr="",Zr=_r;Zr<Ar;++Zr)Kr+=Ur[Pr[Zr]];return Kr}function tr(Pr,_r,Ar){for(var jr=Pr.slice(_r,Ar),Kr="",Zr=0;Zr<jr.length-1;Zr+=2)Kr+=String.fromCharCode(jr[Zr]+jr[Zr+1]*256);return Kr}jt.prototype.slice=function(_r,Ar){var jr=this.length;_r=~~_r,Ar=Ar===void 0?jr:~~Ar,_r<0?(_r+=jr,_r<0&&(_r=0)):_r>jr&&(_r=jr),Ar<0?(Ar+=jr,Ar<0&&(Ar=0)):Ar>jr&&(Ar=jr),Ar<_r&&(Ar=_r);var Kr=this.subarray(_r,Ar);return Object.setPrototypeOf(Kr,jt.prototype),Kr};function dr(Pr,_r,Ar){if(Pr%1!==0||Pr<0)throw new RangeError("offset is not uint");if(Pr+_r>Ar)throw new RangeError("Trying to access beyond buffer length")}jt.prototype.readUintLE=jt.prototype.readUIntLE=function(_r,Ar,jr){_r=_r>>>0,Ar=Ar>>>0,jr||dr(_r,Ar,this.length);for(var Kr=this[_r],Zr=1,Jr=0;++Jr<Ar&&(Zr*=256);)Kr+=this[_r+Jr]*Zr;return Kr},jt.prototype.readUintBE=jt.prototype.readUIntBE=function(_r,Ar,jr){_r=_r>>>0,Ar=Ar>>>0,jr||dr(_r,Ar,this.length);for(var Kr=this[_r+--Ar],Zr=1;Ar>0&&(Zr*=256);)Kr+=this[_r+--Ar]*Zr;return Kr},jt.prototype.readUint8=jt.prototype.readUInt8=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,1,this.length),this[_r]},jt.prototype.readUint16LE=jt.prototype.readUInt16LE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,2,this.length),this[_r]|this[_r+1]<<8},jt.prototype.readUint16BE=jt.prototype.readUInt16BE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,2,this.length),this[_r]<<8|this[_r+1]},jt.prototype.readUint32LE=jt.prototype.readUInt32LE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),(this[_r]|this[_r+1]<<8|this[_r+2]<<16)+this[_r+3]*16777216},jt.prototype.readUint32BE=jt.prototype.readUInt32BE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),this[_r]*16777216+(this[_r+1]<<16|this[_r+2]<<8|this[_r+3])},jt.prototype.readIntLE=function(_r,Ar,jr){_r=_r>>>0,Ar=Ar>>>0,jr||dr(_r,Ar,this.length);for(var Kr=this[_r],Zr=1,Jr=0;++Jr<Ar&&(Zr*=256);)Kr+=this[_r+Jr]*Zr;return Zr*=128,Kr>=Zr&&(Kr-=Math.pow(2,8*Ar)),Kr},jt.prototype.readIntBE=function(_r,Ar,jr){_r=_r>>>0,Ar=Ar>>>0,jr||dr(_r,Ar,this.length);for(var Kr=Ar,Zr=1,Jr=this[_r+--Kr];Kr>0&&(Zr*=256);)Jr+=this[_r+--Kr]*Zr;return Zr*=128,Jr>=Zr&&(Jr-=Math.pow(2,8*Ar)),Jr},jt.prototype.readInt8=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,1,this.length),this[_r]&128?(255-this[_r]+1)*-1:this[_r]},jt.prototype.readInt16LE=function(_r,Ar){_r=_r>>>0,Ar||dr(_r,2,this.length);var jr=this[_r]|this[_r+1]<<8;return jr&32768?jr|4294901760:jr},jt.prototype.readInt16BE=function(_r,Ar){_r=_r>>>0,Ar||dr(_r,2,this.length);var jr=this[_r+1]|this[_r]<<8;return jr&32768?jr|4294901760:jr},jt.prototype.readInt32LE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),this[_r]|this[_r+1]<<8|this[_r+2]<<16|this[_r+3]<<24},jt.prototype.readInt32BE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),this[_r]<<24|this[_r+1]<<16|this[_r+2]<<8|this[_r+3]},jt.prototype.readFloatLE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),$t.read(this,_r,!0,23,4)},jt.prototype.readFloatBE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,4,this.length),$t.read(this,_r,!1,23,4)},jt.prototype.readDoubleLE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,8,this.length),$t.read(this,_r,!0,52,8)},jt.prototype.readDoubleBE=function(_r,Ar){return _r=_r>>>0,Ar||dr(_r,8,this.length),$t.read(this,_r,!1,52,8)};function fr(Pr,_r,Ar,jr,Kr,Zr){if(!jt.isBuffer(Pr))throw new TypeError('"buffer" argument must be a Buffer instance');if(_r>Kr||_r<Zr)throw new RangeError('"value" argument is out of bounds');if(Ar+jr>Pr.length)throw new RangeError("Index out of range")}jt.prototype.writeUintLE=jt.prototype.writeUIntLE=function(_r,Ar,jr,Kr){if(_r=+_r,Ar=Ar>>>0,jr=jr>>>0,!Kr){var Zr=Math.pow(2,8*jr)-1;fr(this,_r,Ar,jr,Zr,0)}var Jr=1,nn=0;for(this[Ar]=_r&255;++nn<jr&&(Jr*=256);)this[Ar+nn]=_r/Jr&255;return Ar+jr},jt.prototype.writeUintBE=jt.prototype.writeUIntBE=function(_r,Ar,jr,Kr){if(_r=+_r,Ar=Ar>>>0,jr=jr>>>0,!Kr){var Zr=Math.pow(2,8*jr)-1;fr(this,_r,Ar,jr,Zr,0)}var Jr=jr-1,nn=1;for(this[Ar+Jr]=_r&255;--Jr>=0&&(nn*=256);)this[Ar+Jr]=_r/nn&255;return Ar+jr},jt.prototype.writeUint8=jt.prototype.writeUInt8=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,1,255,0),this[Ar]=_r&255,Ar+1},jt.prototype.writeUint16LE=jt.prototype.writeUInt16LE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,2,65535,0),this[Ar]=_r&255,this[Ar+1]=_r>>>8,Ar+2},jt.prototype.writeUint16BE=jt.prototype.writeUInt16BE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,2,65535,0),this[Ar]=_r>>>8,this[Ar+1]=_r&255,Ar+2},jt.prototype.writeUint32LE=jt.prototype.writeUInt32LE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,4,4294967295,0),this[Ar+3]=_r>>>24,this[Ar+2]=_r>>>16,this[Ar+1]=_r>>>8,this[Ar]=_r&255,Ar+4},jt.prototype.writeUint32BE=jt.prototype.writeUInt32BE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,4,4294967295,0),this[Ar]=_r>>>24,this[Ar+1]=_r>>>16,this[Ar+2]=_r>>>8,this[Ar+3]=_r&255,Ar+4},jt.prototype.writeIntLE=function(_r,Ar,jr,Kr){if(_r=+_r,Ar=Ar>>>0,!Kr){var Zr=Math.pow(2,8*jr-1);fr(this,_r,Ar,jr,Zr-1,-Zr)}var Jr=0,nn=1,on=0;for(this[Ar]=_r&255;++Jr<jr&&(nn*=256);)_r<0&&on===0&&this[Ar+Jr-1]!==0&&(on=1),this[Ar+Jr]=(_r/nn>>0)-on&255;return Ar+jr},jt.prototype.writeIntBE=function(_r,Ar,jr,Kr){if(_r=+_r,Ar=Ar>>>0,!Kr){var Zr=Math.pow(2,8*jr-1);fr(this,_r,Ar,jr,Zr-1,-Zr)}var Jr=jr-1,nn=1,on=0;for(this[Ar+Jr]=_r&255;--Jr>=0&&(nn*=256);)_r<0&&on===0&&this[Ar+Jr+1]!==0&&(on=1),this[Ar+Jr]=(_r/nn>>0)-on&255;return Ar+jr},jt.prototype.writeInt8=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,1,127,-128),_r<0&&(_r=255+_r+1),this[Ar]=_r&255,Ar+1},jt.prototype.writeInt16LE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,2,32767,-32768),this[Ar]=_r&255,this[Ar+1]=_r>>>8,Ar+2},jt.prototype.writeInt16BE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,2,32767,-32768),this[Ar]=_r>>>8,this[Ar+1]=_r&255,Ar+2},jt.prototype.writeInt32LE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,4,2147483647,-2147483648),this[Ar]=_r&255,this[Ar+1]=_r>>>8,this[Ar+2]=_r>>>16,this[Ar+3]=_r>>>24,Ar+4},jt.prototype.writeInt32BE=function(_r,Ar,jr){return _r=+_r,Ar=Ar>>>0,jr||fr(this,_r,Ar,4,2147483647,-2147483648),_r<0&&(_r=4294967295+_r+1),this[Ar]=_r>>>24,this[Ar+1]=_r>>>16,this[Ar+2]=_r>>>8,this[Ar+3]=_r&255,Ar+4};function br(Pr,_r,Ar,jr,Kr,Zr){if(Ar+jr>Pr.length)throw new RangeError("Index out of range");if(Ar<0)throw new RangeError("Index out of range")}function Sr(Pr,_r,Ar,jr,Kr){return _r=+_r,Ar=Ar>>>0,Kr||br(Pr,_r,Ar,4),$t.write(Pr,_r,Ar,jr,23,4),Ar+4}jt.prototype.writeFloatLE=function(_r,Ar,jr){return Sr(this,_r,Ar,!0,jr)},jt.prototype.writeFloatBE=function(_r,Ar,jr){return Sr(this,_r,Ar,!1,jr)};function Dr(Pr,_r,Ar,jr,Kr){return _r=+_r,Ar=Ar>>>0,Kr||br(Pr,_r,Ar,8),$t.write(Pr,_r,Ar,jr,52,8),Ar+8}jt.prototype.writeDoubleLE=function(_r,Ar,jr){return Dr(this,_r,Ar,!0,jr)},jt.prototype.writeDoubleBE=function(_r,Ar,jr){return Dr(this,_r,Ar,!1,jr)},jt.prototype.copy=function(_r,Ar,jr,Kr){if(!jt.isBuffer(_r))throw new TypeError("argument should be a Buffer");if(jr||(jr=0),!Kr&&Kr!==0&&(Kr=this.length),Ar>=_r.length&&(Ar=_r.length),Ar||(Ar=0),Kr>0&&Kr<jr&&(Kr=jr),Kr===jr||_r.length===0||this.length===0)return 0;if(Ar<0)throw new RangeError("targetStart out of bounds");if(jr<0||jr>=this.length)throw new RangeError("Index out of range");if(Kr<0)throw new RangeError("sourceEnd out of bounds");Kr>this.length&&(Kr=this.length),_r.length-Ar<Kr-jr&&(Kr=_r.length-Ar+jr);var Zr=Kr-jr;return this===_r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ar,jr,Kr):Uint8Array.prototype.set.call(_r,this.subarray(jr,Kr),Ar),Zr},jt.prototype.fill=function(_r,Ar,jr,Kr){if(typeof _r=="string"){if(typeof Ar=="string"?(Kr=Ar,Ar=0,jr=this.length):typeof jr=="string"&&(Kr=jr,jr=this.length),Kr!==void 0&&typeof Kr!="string")throw new TypeError("encoding must be a string");if(typeof Kr=="string"&&!jt.isEncoding(Kr))throw new TypeError("Unknown encoding: "+Kr);if(_r.length===1){var Zr=_r.charCodeAt(0);(Kr==="utf8"&&Zr<128||Kr==="latin1")&&(_r=Zr)}}else typeof _r=="number"?_r=_r&255:typeof _r=="boolean"&&(_r=Number(_r));if(Ar<0||this.length<Ar||this.length<jr)throw new RangeError("Out of range index");if(jr<=Ar)return this;Ar=Ar>>>0,jr=jr===void 0?this.length:jr>>>0,_r||(_r=0);var Jr;if(typeof _r=="number")for(Jr=Ar;Jr<jr;++Jr)this[Jr]=_r;else{var nn=jt.isBuffer(_r)?_r:jt.from(_r,Kr),on=nn.length;if(on===0)throw new TypeError('The value "'+_r+'" is invalid for argument "value"');for(Jr=0;Jr<jr-Ar;++Jr)this[Jr+Ar]=nn[Jr%on]}return this};var Er=/[^+/0-9A-Za-z-_]/g;function wr(Pr){if(Pr=Pr.split("=")[0],Pr=Pr.trim().replace(Er,""),Pr.length<2)return"";for(;Pr.length%4!==0;)Pr=Pr+"=";return Pr}function Tr(Pr,_r){_r=_r||1/0;for(var Ar,jr=Pr.length,Kr=null,Zr=[],Jr=0;Jr<jr;++Jr){if(Ar=Pr.charCodeAt(Jr),Ar>55295&&Ar<57344){if(!Kr){if(Ar>56319){(_r-=3)>-1&&Zr.push(239,191,189);continue}else if(Jr+1===jr){(_r-=3)>-1&&Zr.push(239,191,189);continue}Kr=Ar;continue}if(Ar<56320){(_r-=3)>-1&&Zr.push(239,191,189),Kr=Ar;continue}Ar=(Kr-55296<<10|Ar-56320)+65536}else Kr&&(_r-=3)>-1&&Zr.push(239,191,189);if(Kr=null,Ar<128){if((_r-=1)<0)break;Zr.push(Ar)}else if(Ar<2048){if((_r-=2)<0)break;Zr.push(Ar>>6|192,Ar&63|128)}else if(Ar<65536){if((_r-=3)<0)break;Zr.push(Ar>>12|224,Ar>>6&63|128,Ar&63|128)}else if(Ar<1114112){if((_r-=4)<0)break;Zr.push(Ar>>18|240,Ar>>12&63|128,Ar>>6&63|128,Ar&63|128)}else throw new Error("Invalid code point")}return Zr}function Mr(Pr){for(var _r=[],Ar=0;Ar<Pr.length;++Ar)_r.push(Pr.charCodeAt(Ar)&255);return _r}function Lr(Pr,_r){for(var Ar,jr,Kr,Zr=[],Jr=0;Jr<Pr.length&&!((_r-=2)<0);++Jr)Ar=Pr.charCodeAt(Jr),jr=Ar>>8,Kr=Ar%256,Zr.push(Kr),Zr.push(jr);return Zr}function Cr(Pr){return e.toByteArray(wr(Pr))}function Br(Pr,_r,Ar,jr){for(var Kr=0;Kr<jr&&!(Kr+Ar>=_r.length||Kr>=Pr.length);++Kr)_r[Kr+Ar]=Pr[Kr];return Kr}function $r(Pr,_r){return Pr instanceof _r||Pr!=null&&Pr.constructor!=null&&Pr.constructor.name!=null&&Pr.constructor.name===_r.name}function Rr(Pr){return Pr!==Pr}var Ur=function(){for(var Pr="0123456789abcdef",_r=new Array(256),Ar=0;Ar<16;++Ar)for(var jr=Ar*16,Kr=0;Kr<16;++Kr)_r[jr+Kr]=Pr[Ar]+Pr[Kr];return _r}()})(buffer$2);var browser$f={exports:{}},process$8=browser$f.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(_t){if(cachedSetTimeout===setTimeout)return setTimeout(_t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(_t,0);try{return cachedSetTimeout(_t,0)}catch{try{return cachedSetTimeout.call(null,_t,0)}catch{return cachedSetTimeout.call(this,_t,0)}}}function runClearTimeout(_t){if(cachedClearTimeout===clearTimeout)return clearTimeout(_t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(_t);try{return cachedClearTimeout(_t)}catch{try{return cachedClearTimeout.call(null,_t)}catch{return cachedClearTimeout.call(this,_t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var _t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(_t)}}process$8.nextTick=function(_t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var $t=1;$t<arguments.length;$t++)e[$t-1]=arguments[$t];queue.push(new Item(_t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(_t,e){this.fun=_t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$8.title="browser";process$8.browser=!0;process$8.env={};process$8.argv=[];process$8.version="";process$8.versions={};function noop$5(){}process$8.on=noop$5;process$8.addListener=noop$5;process$8.once=noop$5;process$8.off=noop$5;process$8.removeListener=noop$5;process$8.removeAllListeners=noop$5;process$8.emit=noop$5;process$8.prependListener=noop$5;process$8.prependOnceListener=noop$5;process$8.listeners=function(_t){return[]};process$8.binding=function(_t){throw new Error("process.binding is not supported")};process$8.cwd=function(){return"/"};process$8.chdir=function(_t){throw new Error("process.chdir is not supported")};process$8.umask=function(){return 0};var browserExports$2=browser$f.exports;const process$9=getDefaultExportFromCjs(browserExports$2);(function(_t){function e(){var xt=this||self;return delete _t.prototype.__magic__,xt}if(typeof globalThis=="object")return globalThis;if(this)return e();_t.defineProperty(_t.prototype,"__magic__",{configurable:!0,get:e});var $t=__magic__;return $t})(Object);const Authorization=validate20,pattern4=new RegExp("^[A-Za-z0-9_-]+$","u");function validate21(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate21.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){for(const Kt in _t)if(!(Kt==="payload"||Kt==="signatures"))return validate21.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Kt},message:"must NOT have additional properties"}],!1;{if(_t.payload!==void 0){let Kt=_t.payload;const zt=jt;if(typeof Kt=="string"){if(!pattern4.test(Kt))return validate21.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate21.errors=[{instancePath:e+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.signatures!==void 0){let Kt=_t.signatures;const zt=jt;if(Array.isArray(Kt)){if(Kt.length<1)return validate21.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var Nt=!0;const Ht=Kt.length;for(let Jt=0;Jt<Ht;Jt++){let rr=Kt[Jt];const Qt=jt;if(rr&&typeof rr=="object"&&!Array.isArray(rr)){if(rr.protected!==void 0){let nr=rr.protected;const yr=jt;if(typeof nr=="string"){if(!pattern4.test(nr))return validate21.errors=[{instancePath:e+"/signatures/"+Jt+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate21.errors=[{instancePath:e+"/signatures/"+Jt+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qt=yr===jt}else var qt=!0;if(qt)if(rr.signature!==void 0){let nr=rr.signature;const yr=jt;if(typeof nr=="string"){if(!pattern4.test(nr))return validate21.errors=[{instancePath:e+"/signatures/"+Jt+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate21.errors=[{instancePath:e+"/signatures/"+Jt+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qt=yr===jt}else var qt=!0}else return validate21.errors=[{instancePath:e+"/signatures/"+Jt,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=Qt===jt;if(!Nt)break}}}else return validate21.errors=[{instancePath:e+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var Ut=zt===jt}else var Ut=!0}}else return validate21.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate21.errors=Bt,jt===0}validate21.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function validate20(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate20.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){const Ut=jt;for(const Nt in _t)if(Nt!=="signature")return validate20.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Nt},message:"must NOT have additional properties"}],!1;Ut===jt&&_t.signature!==void 0&&(validate21(_t.signature,{instancePath:e+"/signature",parentData:_t,parentDataProperty:"signature",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate21.errors:Bt.concat(validate21.errors),jt=Bt.length))}else return validate20.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate20.errors=Bt,jt===0}validate20.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const AuthorizationDelegatedGrant=validate24,schema39={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-write-unidentified.json",type:"object",required:["descriptor"],properties:{recordId:{type:"string"},contextId:{type:"string",pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},tags:{type:"object",minProperties:1,maxProperties:10,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"array",minItems:1,maxItems:10,items:{type:"string"}},{type:"array",minItems:1,maxItems:10,items:{type:"number"}}]}},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}},$comment:"rule defining `protocol` and `contextId` relationship",anyOf:[{properties:{descriptor:{type:"object",required:["protocol","protocolPath"]}},required:["contextId"]},{allOf:[{not:{required:["contextId"]}},{properties:{descriptor:{type:"object",not:{required:["protocol"]}}}},{properties:{descriptor:{type:"object",not:{required:["protocolPath"]}}}}]}]},pattern7=new RegExp("^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$","u"),pattern12=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u"),pattern13=new RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u"),pattern14=new RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u"),wrapper0={validate:validate26};function validate29(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate29.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){const Nt=jt;for(const qt in _t)if(!(qt==="signature"||qt==="authorDelegatedGrant"||qt==="ownerSignature"||qt==="ownerDelegatedGrant"))return validate29.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;if(Nt===jt){let qt;if(_t.ownerSignature!==void 0&&_t.signature===void 0&&(qt="signature"))return validate29.errors=[{instancePath:e,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:qt,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(_t.signature!==void 0){const Kt=jt;validate21(_t.signature,{instancePath:e+"/signature",parentData:_t,parentDataProperty:"signature",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate21.errors:Bt.concat(validate21.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.authorDelegatedGrant!==void 0){const Kt=jt;wrapper0.validate(_t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:_t,parentDataProperty:"authorDelegatedGrant",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?wrapper0.validate.errors:Bt.concat(wrapper0.validate.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.ownerSignature!==void 0){const Kt=jt;validate21(_t.ownerSignature,{instancePath:e+"/ownerSignature",parentData:_t,parentDataProperty:"ownerSignature",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate21.errors:Bt.concat(validate21.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0;if(Ut)if(_t.ownerDelegatedGrant!==void 0){const Kt=jt;wrapper0.validate(_t.ownerDelegatedGrant,{instancePath:e+"/ownerDelegatedGrant",parentData:_t,parentDataProperty:"ownerDelegatedGrant",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?wrapper0.validate.errors:Bt.concat(wrapper0.validate.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0}}}}else return validate29.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate29.errors=Bt,jt===0}validate29.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const schema43={$id:"https://identity.foundation/dwn/json-schemas/general-jwk.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",required:["kty"],properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}},oneOf:[{properties:{kty:{const:"EC"},crv:{type:"string"},x:{type:"string"},y:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"OKP"},crv:{type:"string"},x:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"RSA"},n:{type:"string"},e:{type:"string"},d:{type:"string"},p:{type:"string"},q:{type:"string"},dp:{type:"string"},dq:{type:"string"},qi:{type:"string"},oth:{type:"object"}},required:["n","e"]},{properties:{kty:{const:"oct"},k:{type:"string"}},required:["k"]}]};function validate33(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate33.evaluated;Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0);const Ut=jt,Nt=jt;let qt=!1,Kt=null;const zt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Xt;if(_t.crv===void 0&&(Xt="crv")||_t.x===void 0&&(Xt="x")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:Xt},message:"must have required property '"+Xt+"'"};Bt===null?Bt=[er]:Bt.push(er),jt++}else{if(_t.kty!==void 0){const er=jt;if(_t.kty!=="EC"){const pr={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Vt=er===jt}else var Vt=!0;if(Vt){if(_t.crv!==void 0){const er=jt;if(typeof _t.crv!="string"){const ur={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var Vt=er===jt}else var Vt=!0;if(Vt){if(_t.x!==void 0){const er=jt;if(typeof _t.x!="string"){const ur={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var Vt=er===jt}else var Vt=!0;if(Vt){if(_t.y!==void 0){const er=jt;if(typeof _t.y!="string"){const ur={instancePath:e+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var Vt=er===jt}else var Vt=!0;if(Vt)if(_t.d!==void 0){const er=jt;if(typeof _t.d!="string"){const ur={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var Vt=er===jt}else var Vt=!0}}}}}var Qt=zt===jt;if(Qt){qt=!0,Kt=0;var Ht={};Ht.kty=!0,Ht.crv=!0,Ht.x=!0,Ht.y=!0,Ht.d=!0}const Jt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Xt;if(_t.crv===void 0&&(Xt="crv")||_t.x===void 0&&(Xt="x")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:Xt},message:"must have required property '"+Xt+"'"};Bt===null?Bt=[er]:Bt.push(er),jt++}else{if(_t.kty!==void 0){const er=jt;if(_t.kty!=="OKP"){const pr={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var rr=er===jt}else var rr=!0;if(rr){if(_t.crv!==void 0){const er=jt;if(typeof _t.crv!="string"){const ur={instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var rr=er===jt}else var rr=!0;if(rr){if(_t.x!==void 0){const er=jt;if(typeof _t.x!="string"){const ur={instancePath:e+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var rr=er===jt}else var rr=!0;if(rr)if(_t.d!==void 0){const er=jt;if(typeof _t.d!="string"){const ur={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}var rr=er===jt}else var rr=!0}}}}var Qt=Jt===jt;if(Qt&&qt)qt=!1,Kt=[Kt,1];else{Qt&&(qt=!0,Kt=1,Ht!==!0&&(Ht=Ht||{},Ht.kty=!0,Ht.crv=!0,Ht.x=!0,Ht.d=!0));const Xt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let pr;if(_t.n===void 0&&(pr="n")||_t.e===void 0&&(pr="e")){const ur={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:pr},message:"must have required property '"+pr+"'"};Bt===null?Bt=[ur]:Bt.push(ur),jt++}else{if(_t.kty!==void 0){const ur=jt;if(_t.kty!=="RSA"){const gr={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};Bt===null?Bt=[gr]:Bt.push(gr),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.n!==void 0){const ur=jt;if(typeof _t.n!="string"){const ar={instancePath:e+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.e!==void 0){const ur=jt;if(typeof _t.e!="string"){const ar={instancePath:e+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.d!==void 0){const ur=jt;if(typeof _t.d!="string"){const ar={instancePath:e+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.p!==void 0){const ur=jt;if(typeof _t.p!="string"){const ar={instancePath:e+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.q!==void 0){const ur=jt;if(typeof _t.q!="string"){const ar={instancePath:e+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.dp!==void 0){const ur=jt;if(typeof _t.dp!="string"){const ar={instancePath:e+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.dq!==void 0){const ur=jt;if(typeof _t.dq!="string"){const ar={instancePath:e+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt){if(_t.qi!==void 0){const ur=jt;if(typeof _t.qi!="string"){const ar={instancePath:e+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var Wt=ur===jt}else var Wt=!0;if(Wt)if(_t.oth!==void 0){let ur=_t.oth;const gr=jt;if(!(ur&&typeof ur=="object"&&!Array.isArray(ur))){const tr={instancePath:e+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[tr]:Bt.push(tr),jt++}var Wt=gr===jt}else var Wt=!0}}}}}}}}}}var Qt=Xt===jt;if(Qt&&qt)qt=!1,Kt=[Kt,2];else{Qt&&(qt=!0,Kt=2,Ht!==!0&&(Ht=Ht||{},Ht.kty=!0,Ht.n=!0,Ht.e=!0,Ht.d=!0,Ht.p=!0,Ht.q=!0,Ht.dp=!0,Ht.dq=!0,Ht.qi=!0,Ht.oth=!0));const pr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let gr;if(_t.k===void 0&&(gr="k")){const ar={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:gr},message:"must have required property '"+gr+"'"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}else{if(_t.kty!==void 0){const ar=jt;if(_t.kty!=="oct"){const tr={instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};Bt===null?Bt=[tr]:Bt.push(tr),jt++}var nr=ar===jt}else var nr=!0;if(nr)if(_t.k!==void 0){const ar=jt;if(typeof _t.k!="string"){const dr={instancePath:e+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var nr=ar===jt}else var nr=!0}}var Qt=pr===jt;Qt&&qt?(qt=!1,Kt=[Kt,3]):Qt&&(qt=!0,Kt=3,Ht!==!0&&(Ht=Ht||{},Ht.kty=!0,Ht.k=!0))}}if(qt)jt=Nt,Bt!==null&&(Nt?Bt.length=Nt:Bt=null);else{const Xt={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:Kt},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[Xt]:Bt.push(Xt),jt++,validate33.errors=Bt,!1}if(jt===Ut)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Xt;if(_t.kty===void 0&&(Xt="kty"))return validate33.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:Xt},message:"must have required property '"+Xt+"'"}],!1;if(Ht!==!0&&(Ht=Ht||{},Ht.alg=!0,Ht.kid=!0,Ht.kty=!0,Ht.crv=!0,Ht.use=!0,Ht.key_ops=!0,Ht.x5u=!0,Ht.x5c=!0,Ht.x5t=!0,Ht["x5t#S256"]=!0),_t.alg!==void 0){const er=jt;if(typeof _t.alg!="string")return validate33.errors=[{instancePath:e+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.kid!==void 0){const er=jt;if(typeof _t.kid!="string")return validate33.errors=[{instancePath:e+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.kty!==void 0){let er=_t.kty;const pr=jt;if(!(er==="EC"||er==="RSA"||er==="oct"||er==="OKP"))return validate33.errors=[{instancePath:e+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:schema43.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var yr=pr===jt}else var yr=!0;if(yr){if(_t.crv!==void 0){const er=jt;if(typeof _t.crv!="string")return validate33.errors=[{instancePath:e+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.use!==void 0){const er=jt;if(typeof _t.use!="string")return validate33.errors=[{instancePath:e+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.key_ops!==void 0){const er=jt;if(typeof _t.key_ops!="string")return validate33.errors=[{instancePath:e+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.x5u!==void 0){const er=jt;if(typeof _t.x5u!="string")return validate33.errors=[{instancePath:e+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.x5c!==void 0){const er=jt;if(typeof _t.x5c!="string")return validate33.errors=[{instancePath:e+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr){if(_t.x5t!==void 0){const er=jt;if(typeof _t.x5t!="string")return validate33.errors=[{instancePath:e+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0;if(yr)if(_t["x5t#S256"]!==void 0){const er=jt;if(typeof _t["x5t#S256"]!="string")return validate33.errors=[{instancePath:e+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var yr=er===jt}else var yr=!0}}}}}}}}}else return validate33.errors=[{instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var vr=Ut===jt;if(vr){const Xt=jt,er=jt,pr=jt;let ur=!1;const gr=jt,ar=jt;let tr=!1;const dr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.d===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Ir=dr===jt;if(tr=tr||Ir,tr)jt=ar,Bt!==null&&(ar?Bt.length=ar:Bt=null);else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}if(jt===gr)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(_t.kty!==void 0&&_t.kty!=="EC"){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}}else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var lr=gr===jt;if(ur=ur||lr,lr){var xr={};xr.kty=!0}const fr=jt,br=jt;let Sr=!1;const Dr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.d===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Or=Dr===jt;if(Sr=Sr||Or,Sr)jt=br,Bt!==null&&(br?Bt.length=br:Bt=null);else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}if(jt===fr)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(_t.kty!==void 0&&_t.kty!=="OKP"){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}}else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var lr=fr===jt;ur=ur||lr,lr&&xr!==!0&&(xr=xr||{},xr.kty=!0);const Er=jt,wr=jt;let Tr=!1;const Mr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.d===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Mr===jt;Tr=Tr||Nr;const Lr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.p===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Lr===jt;Tr=Tr||Nr;const Cr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.q===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Cr===jt;Tr=Tr||Nr;const Br=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.dp===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Br===jt;Tr=Tr||Nr;const $r=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.dq===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=$r===jt;Tr=Tr||Nr;const Rr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.qi===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Rr===jt;Tr=Tr||Nr;const Ur=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.oth===void 0){const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Ur===jt;if(Tr=Tr||Nr,Tr)jt=wr,Bt!==null&&(wr?Bt.length=wr:Bt=null);else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}if(jt===Er)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(_t.kty!==void 0){const Pr=jt;if(_t.kty!=="RSA"){const _r={};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var kr=Pr===jt}else var kr=!0;if(kr)if(_t.oth!==void 0){let Pr=_t.oth;const _r=jt;if(!(Pr&&typeof Pr=="object"&&!Array.isArray(Pr))){const jr={};Bt===null?Bt=[jr]:Bt.push(jr),jt++}var kr=_r===jt}else var kr=!0}else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var lr=Er===jt;if(ur=ur||lr,lr&&xr!==!0&&(xr=xr||{},xr.kty=!0,xr.d=!0,xr.p=!0,xr.q=!0,xr.dp=!0,xr.dq=!0,xr.qi=!0,xr.oth=!0),ur)jt=pr,Bt!==null&&(pr?Bt.length=pr:Bt=null);else{const Pr={};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var ir=er===jt;if(ir)return validate33.errors=[{instancePath:e,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=Xt,Bt!==null&&(Xt?Bt.length=Xt:Bt=null)}return validate33.errors=Bt,Lt.props=Ht,jt===0}validate33.evaluated={dynamicProps:!0,dynamicItems:!1};const func1=Object.prototype.hasOwnProperty;function validate27(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate27.evaluated;Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0);const Ut=jt;let Nt=!1;const qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let dr;if(_t.contextId===void 0&&(dr="contextId")){const fr={instancePath:e,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:dr},message:"must have required property '"+dr+"'"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}else if(_t.descriptor!==void 0){let fr=_t.descriptor;if(jt===jt)if(fr&&typeof fr=="object"&&!Array.isArray(fr)){let Sr;if(fr.protocol===void 0&&(Sr="protocol")||fr.protocolPath===void 0&&(Sr="protocolPath")){const Dr={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:Sr},message:"must have required property '"+Sr+"'"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}}else{const Sr={instancePath:e+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++}}}var yr=qt===jt;if(Nt=Nt||yr,yr){var Kt={};Kt.descriptor=!0}const zt=jt,Vt=jt,Ht=jt,Jt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.contextId===void 0){const dr={};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var rr=Jt===jt;if(rr){const dr={instancePath:e,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}else jt=Ht,Bt!==null&&(Ht?Bt.length=Ht:Bt=null);var Qt=Vt===jt;if(Qt){const dr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.descriptor!==void 0){let br=_t.descriptor;if(!(br&&typeof br=="object"&&!Array.isArray(br))){const Er={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Er]:Bt.push(Er),jt++}const Sr=jt,Dr=jt;if(br&&typeof br=="object"&&!Array.isArray(br)&&br.protocol===void 0){const Er={};Bt===null?Bt=[Er]:Bt.push(Er),jt++}var Wt=Dr===jt;if(Wt){const Er={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[Er]:Bt.push(Er),jt++}else jt=Sr,Bt!==null&&(Sr?Bt.length=Sr:Bt=null)}var Qt=dr===jt;if(Qt){const br=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.descriptor!==void 0){let Dr=_t.descriptor;if(!(Dr&&typeof Dr=="object"&&!Array.isArray(Dr))){const Tr={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}const Er=jt,wr=jt;if(Dr&&typeof Dr=="object"&&!Array.isArray(Dr)&&Dr.protocolPath===void 0){const Tr={};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var nr=wr===jt;if(nr){const Tr={instancePath:e+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}else jt=Er,Bt!==null&&(Er?Bt.length=Er:Bt=null)}var Qt=br===jt}}var yr=zt===jt;if(Nt=Nt||yr,yr&&Kt!==!0&&(Kt=Kt||{},Kt.descriptor=!0),Nt)jt=Ut,Bt!==null&&(Ut?Bt.length=Ut:Bt=null);else{const dr={instancePath:e,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return Bt===null?Bt=[dr]:Bt.push(dr),jt++,validate27.errors=Bt,!1}if(jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let dr;if(_t.descriptor===void 0&&(dr="descriptor"))return validate27.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:dr},message:"must have required property '"+dr+"'"}],!1;if(Kt!==!0&&(Kt=Kt||{},Kt.recordId=!0,Kt.contextId=!0,Kt.attestation=!0,Kt.authorization=!0,Kt.encryption=!0,Kt.descriptor=!0),_t.recordId!==void 0){const fr=jt;if(typeof _t.recordId!="string")return validate27.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var vr=fr===jt}else var vr=!0;if(vr){if(_t.contextId!==void 0){let fr=_t.contextId;const br=jt;if(jt===br)if(typeof fr=="string"){if(!pattern7.test(fr))return validate27.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},message:'must match pattern "^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"'}],!1}else return validate27.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var vr=br===jt}else var vr=!0;if(vr){if(_t.attestation!==void 0){const fr=jt;validate21(_t.attestation,{instancePath:e+"/attestation",parentData:_t,parentDataProperty:"attestation",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate21.errors:Bt.concat(validate21.errors),jt=Bt.length);var vr=fr===jt}else var vr=!0;if(vr){if(_t.authorization!==void 0){const fr=jt;validate29(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate29.errors:Bt.concat(validate29.errors),jt=Bt.length);var vr=fr===jt}else var vr=!0;if(vr){if(_t.encryption!==void 0){let fr=_t.encryption;const br=jt;if(jt===br)if(fr&&typeof fr=="object"&&!Array.isArray(fr)){let Dr;if(fr.algorithm===void 0&&(Dr="algorithm")||fr.initializationVector===void 0&&(Dr="initializationVector")||fr.keyEncryption===void 0&&(Dr="keyEncryption"))return validate27.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:Dr},message:"must have required property '"+Dr+"'"}],!1;{const Er=jt;for(const wr in fr)if(!(wr==="algorithm"||wr==="initializationVector"||wr==="keyEncryption"))return validate27.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:wr},message:"must NOT have additional properties"}],!1;if(Er===jt){if(fr.algorithm!==void 0){let wr=fr.algorithm;const Tr=jt;if(typeof wr!="string")return validate27.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(wr!=="A256CTR")return validate27.errors=[{instancePath:e+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:schema39.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var Ir=Tr===jt}else var Ir=!0;if(Ir){if(fr.initializationVector!==void 0){let wr=fr.initializationVector;const Tr=jt;if(jt===jt)if(typeof wr=="string"){if(!pattern4.test(wr))return validate27.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate27.errors=[{instancePath:e+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ir=Tr===jt}else var Ir=!0;if(Ir)if(fr.keyEncryption!==void 0){let wr=fr.keyEncryption;const Tr=jt;if(jt===Tr)if(Array.isArray(wr)){if(wr.length<1)return validate27.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var xr=!0;const Lr=wr.length;for(let Cr=0;Cr<Lr;Cr++){let Br=wr[Cr];const $r=jt;if(jt===$r)if(Br&&typeof Br=="object"&&!Array.isArray(Br)){let Ur;if(Br.rootKeyId===void 0&&(Ur="rootKeyId")||Br.derivationScheme===void 0&&(Ur="derivationScheme")||Br.algorithm===void 0&&(Ur="algorithm")||Br.encryptedKey===void 0&&(Ur="encryptedKey")||Br.initializationVector===void 0&&(Ur="initializationVector")||Br.ephemeralPublicKey===void 0&&(Ur="ephemeralPublicKey")||Br.messageAuthenticationCode===void 0&&(Ur="messageAuthenticationCode"))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:Ur},message:"must have required property '"+Ur+"'"}],!1;{const Pr=jt;for(const _r in Br)if(!(_r==="rootKeyId"||_r==="derivationScheme"||_r==="derivedPublicKey"||_r==="algorithm"||_r==="encryptedKey"||_r==="initializationVector"||_r==="ephemeralPublicKey"||_r==="messageAuthenticationCode"))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_r},message:"must NOT have additional properties"}],!1;if(Pr===jt){if(Br.rootKeyId!==void 0){const _r=jt;if(typeof Br.rootKeyId!="string")return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Or=_r===jt}else var Or=!0;if(Or){if(Br.derivationScheme!==void 0){let _r=Br.derivationScheme;const Ar=jt;if(typeof _r!="string")return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(_r==="dataFormats"||_r==="protocolContext"||_r==="protocolPath"||_r==="schemas"))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:schema39.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;var Or=Ar===jt}else var Or=!0;if(Or){if(Br.derivedPublicKey!==void 0){const _r=jt;validate33(Br.derivedPublicKey,{instancePath:e+"/encryption/keyEncryption/"+Cr+"/derivedPublicKey",parentData:Br,parentDataProperty:"derivedPublicKey",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate33.errors:Bt.concat(validate33.errors),jt=Bt.length);var Or=_r===jt}else var Or=!0;if(Or){if(Br.algorithm!==void 0){let _r=Br.algorithm;const Ar=jt;if(typeof _r!="string")return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(_r!=="ECIES-ES256K")return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:schema39.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var Or=Ar===jt}else var Or=!0;if(Or){if(Br.encryptedKey!==void 0){let _r=Br.encryptedKey;const Ar=jt;if(jt===jt)if(typeof _r=="string"){if(!pattern4.test(_r))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Or=Ar===jt}else var Or=!0;if(Or){if(Br.initializationVector!==void 0){let _r=Br.initializationVector;const Ar=jt;if(jt===jt)if(typeof _r=="string"){if(!pattern4.test(_r))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Or=Ar===jt}else var Or=!0;if(Or){if(Br.ephemeralPublicKey!==void 0){const _r=jt;validate33(Br.ephemeralPublicKey,{instancePath:e+"/encryption/keyEncryption/"+Cr+"/ephemeralPublicKey",parentData:Br,parentDataProperty:"ephemeralPublicKey",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate33.errors:Bt.concat(validate33.errors),jt=Bt.length);var Or=_r===jt}else var Or=!0;if(Or)if(Br.messageAuthenticationCode!==void 0){let _r=Br.messageAuthenticationCode;const Ar=jt;if(jt===jt)if(typeof _r=="string"){if(!pattern4.test(_r))return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}else return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Or=Ar===jt}else var Or=!0}}}}}}}}}else return validate27.errors=[{instancePath:e+"/encryption/keyEncryption/"+Cr,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var xr=$r===jt;if(!xr)break}}}else return validate27.errors=[{instancePath:e+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var Ir=Tr===jt}else var Ir=!0}}}}else return validate27.errors=[{instancePath:e+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var vr=br===jt}else var vr=!0;if(vr)if(_t.descriptor!==void 0){let fr=_t.descriptor;const br=jt,Sr=jt;let Dr=!1;const Er=jt;if(fr&&typeof fr=="object"&&!Array.isArray(fr)){let Ur;if(fr.published===void 0&&(Ur="published")||fr.datePublished===void 0&&(Ur="datePublished")){const Pr={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:Ur},message:"must have required property '"+Ur+"'"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}else if(fr.published!==void 0){let Pr=fr.published;if(typeof Pr!="boolean"){const _r={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}if(Pr!==!0){const _r={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:schema39.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}}}var er=Er===jt;if(Dr=Dr||er,er){var Nr={};Nr.published=!0}const wr=jt,Tr=jt,Mr=jt;if(fr&&typeof fr=="object"&&!Array.isArray(fr)&&fr.datePublished===void 0){const Ur={};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var kr=Mr===jt;if(kr){const Ur={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}else jt=Tr,Bt!==null&&(Tr?Bt.length=Tr:Bt=null);if(jt===wr&&fr&&typeof fr=="object"&&!Array.isArray(fr)&&fr.published!==void 0){let Ur=fr.published;if(typeof Ur!="boolean"){const Pr={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}if(Ur!==!1){const Pr={instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:schema39.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}}var er=wr===jt;Dr=Dr||er,er&&Nr!==!0&&(Nr=Nr||{},Nr.published=!0);const Lr=jt,Cr=jt,Br=jt,$r=jt;if(fr&&typeof fr=="object"&&!Array.isArray(fr)&&fr.published===void 0){const Ur={};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var lr=$r===jt;if(lr){const Ur={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}else jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var ir=Cr===jt;if(ir){const Ur=jt,Pr=jt,_r=jt;if(fr&&typeof fr=="object"&&!Array.isArray(fr)&&fr.datePublished===void 0){const jr={};Bt===null?Bt=[jr]:Bt.push(jr),jt++}var Xt=_r===jt;if(Xt){const jr={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[jr]:Bt.push(jr),jt++}else jt=Pr,Bt!==null&&(Pr?Bt.length=Pr:Bt=null);var ir=Ur===jt}var er=Lr===jt;if(Dr=Dr||er,Dr)jt=Sr,Bt!==null&&(Sr?Bt.length=Sr:Bt=null);else{const Ur={instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return Bt===null?Bt=[Ur]:Bt.push(Ur),jt++,validate27.errors=Bt,!1}if(jt===br)if(fr&&typeof fr=="object"&&!Array.isArray(fr)){let Ur;if(fr.interface===void 0&&(Ur="interface")||fr.method===void 0&&(Ur="method")||fr.dataCid===void 0&&(Ur="dataCid")||fr.dataSize===void 0&&(Ur="dataSize")||fr.dateCreated===void 0&&(Ur="dateCreated")||fr.messageTimestamp===void 0&&(Ur="messageTimestamp")||fr.dataFormat===void 0&&(Ur="dataFormat"))return validate27.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Ur},message:"must have required property '"+Ur+"'"}],!1;{const Pr=jt;for(const _r in fr)if(!func1.call(schema39.properties.descriptor.properties,_r))return validate27.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_r},message:"must NOT have additional properties"}],!1;if(Pr===jt){let _r;if(fr.parentId!==void 0&&fr.protocol===void 0&&(_r="protocol"))return validate27.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:_r,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(fr.interface!==void 0){let Ar=fr.interface;const jr=jt;if(typeof Ar!="string")return validate27.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ar!=="Records")return validate27.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema39.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.method!==void 0){let Ar=fr.method;const jr=jt;if(typeof Ar!="string")return validate27.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Ar!=="Write")return validate27.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema39.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.recipient!==void 0){let Ar=fr.recipient;const jr=jt;if(jt===jt)if(typeof Ar=="string"){if(!pattern12.test(Ar))return validate27.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return validate27.errors=[{instancePath:e+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.protocol!==void 0){const Ar=jt;if(typeof fr.protocol!="string")return validate27.errors=[{instancePath:e+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=Ar===jt}else var pr=!0;if(pr){if(fr.protocolPath!==void 0){let Ar=fr.protocolPath;const jr=jt;if(jt===jr)if(typeof Ar=="string"){if(!pattern13.test(Ar))return validate27.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}else return validate27.errors=[{instancePath:e+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.schema!==void 0){const Ar=jt;if(typeof fr.schema!="string")return validate27.errors=[{instancePath:e+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=Ar===jt}else var pr=!0;if(pr){if(fr.tags!==void 0){let Ar=fr.tags;const jr=jt;if(jt===jr)if(Ar&&typeof Ar=="object"&&!Array.isArray(Ar)){if(Object.keys(Ar).length>10)return validate27.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/maxProperties",keyword:"maxProperties",params:{limit:10},message:"must NOT have more than 10 properties"}],!1;if(Object.keys(Ar).length<1)return validate27.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const Zr in Ar){let Jr=Ar[Zr];const nn=jt,on=jt;let Gr=!1,Fr=null;const Xr=jt;if(typeof Jr!="string"){const en={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[en]:Bt.push(en),jt++}var ur=Xr===jt;ur&&(Gr=!0,Fr=0);const tn=jt;if(!(typeof Jr=="number"&&isFinite(Jr))){const en={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[en]:Bt.push(en),jt++}var ur=tn===jt;if(ur&&Gr)Gr=!1,Fr=[Fr,1];else{ur&&(Gr=!0,Fr=1);const en=jt;if(typeof Jr!="boolean"){const hn={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};Bt===null?Bt=[hn]:Bt.push(hn),jt++}var ur=en===jt;if(ur&&Gr)Gr=!1,Fr=[Fr,2];else{ur&&(Gr=!0,Fr=2);const hn=jt;if(jt===hn)if(Array.isArray(Jr))if(Jr.length>10){const pn={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};Bt===null?Bt=[pn]:Bt.push(pn),jt++}else if(Jr.length<1){const pn={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};Bt===null?Bt=[pn]:Bt.push(pn),jt++}else{var gr=!0;const pn=Jr.length;for(let Dn=0;Dn<pn;Dn++){const An=jt;if(typeof Jr[Dn]!="string"){const In={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Dn,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/items/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[In]:Bt.push(In),jt++}var gr=An===jt;if(!gr)break}}else{const pn={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[pn]:Bt.push(pn),jt++}var ur=hn===jt;if(ur&&Gr)Gr=!1,Fr=[Fr,3];else{ur&&(Gr=!0,Fr=3);const pn=jt;if(jt===pn)if(Array.isArray(Jr))if(Jr.length>10){const An={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};Bt===null?Bt=[An]:Bt.push(An),jt++}else if(Jr.length<1){const An={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};Bt===null?Bt=[An]:Bt.push(An),jt++}else{var ar=!0;const An=Jr.length;for(let vn=0;vn<An;vn++){let In=Jr[vn];const Rn=jt;if(!(typeof In=="number"&&isFinite(In))){const On={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+vn,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/items/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[On]:Bt.push(On),jt++}var ar=Rn===jt;if(!ar)break}}else{const An={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[An]:Bt.push(An),jt++}var ur=pn===jt;ur&&Gr?(Gr=!1,Fr=[Fr,4]):ur&&(Gr=!0,Fr=4)}}}if(Gr)jt=on,Bt!==null&&(on?Bt.length=on:Bt=null);else{const en={instancePath:e+"/descriptor/tags/"+Zr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:Fr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[en]:Bt.push(en),jt++,validate27.errors=Bt,!1}var tr=nn===jt;if(!tr)break}}else return validate27.errors=[{instancePath:e+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.parentId!==void 0){const Ar=jt;if(typeof fr.parentId!="string")return validate27.errors=[{instancePath:e+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=Ar===jt}else var pr=!0;if(pr){if(fr.dataCid!==void 0){const Ar=jt;if(typeof fr.dataCid!="string")return validate27.errors=[{instancePath:e+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=Ar===jt}else var pr=!0;if(pr){if(fr.dataSize!==void 0){let Ar=fr.dataSize;const jr=jt;if(!(typeof Ar=="number"&&isFinite(Ar)))return validate27.errors=[{instancePath:e+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.dateCreated!==void 0){let Ar=fr.dateCreated;const jr=jt;if(jt===jt)if(typeof Ar=="string"){if(!pattern14.test(Ar))return validate27.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate27.errors=[{instancePath:e+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.messageTimestamp!==void 0){let Ar=fr.messageTimestamp;const jr=jt;if(jt===jt)if(typeof Ar=="string"){if(!pattern14.test(Ar))return validate27.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate27.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=jr===jt}else var pr=!0;if(pr){if(fr.published!==void 0){const Ar=jt;if(typeof fr.published!="boolean")return validate27.errors=[{instancePath:e+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var pr=Ar===jt}else var pr=!0;if(pr){if(fr.datePublished!==void 0){let Ar=fr.datePublished;const jr=jt;if(jt===jt)if(typeof Ar=="string"){if(!pattern14.test(Ar))return validate27.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate27.errors=[{instancePath:e+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=jr===jt}else var pr=!0;if(pr)if(fr.dataFormat!==void 0){const Ar=jt;if(typeof fr.dataFormat!="string")return validate27.errors=[{instancePath:e+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pr=Ar===jt}else var pr=!0}}}}}}}}}}}}}}}}else return validate27.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var vr=br===jt}else var vr=!0}}}}}else return validate27.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate27.errors=Bt,Lt.props=Kt,jt===0}validate27.evaluated={dynamicProps:!0,dynamicItems:!1};function validate26(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate26.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),!validate27(_t,{instancePath:e,parentData:$t,parentDataProperty:xt,rootData:At,dynamicAnchors:kt}))Bt=Bt===null?validate27.errors:Bt.concat(validate27.errors),jt=Bt.length;else var Ut=validate27.evaluated.props;if(jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.recordId===void 0&&(qt="recordId")||_t.authorization===void 0&&(qt="authorization")||_t.encodedData===void 0&&(qt="encodedData"))return validate26.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;if(Ut!==!0&&(Ut=Ut||{},Ut.encodedData=!0),_t.encodedData!==void 0){const Kt=jt;if(typeof _t.encodedData!="string")return validate26.errors=[{instancePath:e+"/encodedData",schemaPath:"#/properties/encodedData/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Kt===jt}else var Nt=!0;if(Nt&&Ut!==!0){for(const Kt in _t)if(!Ut||!Ut[Kt])return validate26.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:Kt},message:"must NOT have unevaluated properties"}],!1}}else return validate26.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate26.errors=Bt,jt===0}validate26.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function validate24(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate24.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){const Nt=jt;for(const qt in _t)if(!(qt==="signature"||qt==="authorDelegatedGrant"))return validate24.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;if(Nt===jt){if(_t.signature!==void 0){const qt=jt;validate21(_t.signature,{instancePath:e+"/signature",parentData:_t,parentDataProperty:"signature",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate21.errors:Bt.concat(validate21.errors),jt=Bt.length);var Ut=qt===jt}else var Ut=!0;if(Ut)if(_t.authorDelegatedGrant!==void 0){const qt=jt;validate26(_t.authorDelegatedGrant,{instancePath:e+"/authorDelegatedGrant",parentData:_t,parentDataProperty:"authorDelegatedGrant",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate26.errors:Bt.concat(validate26.errors),jt=Bt.length);var Ut=qt===jt}else var Ut=!0}}else return validate24.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate24.errors=Bt,jt===0}validate24.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const AuthorizationOwner=validate29,RecordsDelete$1=validate38,schema51={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-delete.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId","prune"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},recordId:{type:"string"},prune:{type:"boolean"}}}}};function validate38(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate38.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.authorization===void 0&&(qt="authorization")||_t.descriptor===void 0&&(qt="descriptor"))return validate38.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;{const Kt=jt;for(const zt in _t)if(!(zt==="authorization"||zt==="descriptor"))return validate38.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:zt},message:"must NOT have additional properties"}],!1;if(Kt===jt){if(_t.authorization!==void 0){const zt=jt;validate24(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate24.errors:Bt.concat(validate24.errors),jt=Bt.length);var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let zt=_t.descriptor;const Vt=jt;if(jt===Vt)if(zt&&typeof zt=="object"&&!Array.isArray(zt)){let Jt;if(zt.interface===void 0&&(Jt="interface")||zt.method===void 0&&(Jt="method")||zt.messageTimestamp===void 0&&(Jt="messageTimestamp")||zt.recordId===void 0&&(Jt="recordId")||zt.prune===void 0&&(Jt="prune"))return validate38.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Jt},message:"must have required property '"+Jt+"'"}],!1;{const rr=jt;for(const Qt in zt)if(!(Qt==="interface"||Qt==="method"||Qt==="messageTimestamp"||Qt==="recordId"||Qt==="prune"))return validate38.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qt},message:"must NOT have additional properties"}],!1;if(rr===jt){if(zt.interface!==void 0){let Qt=zt.interface;const Wt=jt;if(typeof Qt!="string")return validate38.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Records")return validate38.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema51.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.method!==void 0){let Qt=zt.method;const Wt=jt;if(typeof Qt!="string")return validate38.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Delete")return validate38.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema51.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.messageTimestamp!==void 0){let Qt=zt.messageTimestamp;const Wt=jt;if(jt===jt)if(typeof Qt=="string"){if(!pattern14.test(Qt))return validate38.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate38.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.recordId!==void 0){const Qt=jt;if(typeof zt.recordId!="string")return validate38.errors=[{instancePath:e+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Qt===jt}else var Nt=!0;if(Nt)if(zt.prune!==void 0){const Qt=jt;if(typeof zt.prune!="boolean")return validate38.errors=[{instancePath:e+"/descriptor/prune",schemaPath:"#/properties/descriptor/properties/prune/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var Nt=Qt===jt}else var Nt=!0}}}}}}else return validate38.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Vt===jt}else var Ut=!0}}}else return validate38.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate38.errors=Bt,jt===0}validate38.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsQuery$1=validate40,schema53={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},schema70={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json",type:"object",minProperties:1,additionalProperties:!1,required:["messageCid","value"],properties:{messageCid:{type:"string"},value:{type:["string","number"]}}},schema55={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-filter.json",type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},recipient:{oneOf:[{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}]},contextId:{type:"string"},schema:{type:"string"},tags:{type:"object",minProperties:1,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"object",minProperties:1,additionalProperties:!1,properties:{startsWith:{type:"string"}}},{$ref:"https://identity.foundation/dwn/json-schemas/string-range-filter.json"},{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"}]}},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function validate42(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate42.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(Object.keys(_t).length<1)return validate42.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Dr=jt;for(const Er in _t)if(!func1.call(schema55.properties,Er))return validate42.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Er},message:"must NOT have additional properties"}],!1;if(Dr===jt){if(_t.datePublished!==void 0){const Er=jt,wr=jt;let Tr=!1,Mr=null;const Lr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Rr;if(_t.published===void 0&&(Rr="published")){const Ur={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:Rr},message:"must have required property '"+Rr+"'"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}else if(_t.published!==void 0&&_t.published!==!0){const Ur={instancePath:e+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:schema55.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}}var qt=Lr===jt;if(qt){Tr=!0,Mr=0;var Ut={};Ut.published=!0}const Cr=jt,Br=jt,$r=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.published===void 0){const Rr={};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Nt=$r===jt;if(Nt){const Rr={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}else jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var qt=Cr===jt;if(qt&&Tr?(Tr=!1,Mr=[Mr,1]):qt&&(Tr=!0,Mr=1),Tr)jt=wr,Bt!==null&&(wr?Bt.length=wr:Bt=null);else{const Rr={instancePath:e,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:Mr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[Rr]:Bt.push(Rr),jt++,validate42.errors=Bt,!1}var Kt=Er===jt}else var Kt=!0;if(Kt){if(_t.protocol!==void 0){const Er=jt;if(typeof _t.protocol!="string")return validate42.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.protocolPath!==void 0){const Er=jt;if(typeof _t.protocolPath!="string")return validate42.errors=[{instancePath:e+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.author!==void 0){let Er=_t.author;const wr=jt,Tr=jt;let Mr=!1,Lr=null;const Cr=jt;if(jt===jt)if(typeof Er=="string"){if(!pattern12.test(Er)){const Ur={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}}else{const Ur={instancePath:e+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var Ht=Cr===jt;Ht&&(Mr=!0,Lr=0);const $r=jt;if(jt===$r)if(Array.isArray(Er)){var Vt=!0;const Ur=Er.length;for(let Pr=0;Pr<Ur;Pr++){let _r=Er[Pr];const Ar=jt;if(jt===jt)if(typeof _r=="string"){if(!pattern12.test(_r)){const Zr={instancePath:e+"/author/"+Pr,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}}else{const Zr={instancePath:e+"/author/"+Pr,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}var Vt=Ar===jt;if(!Vt)break}}else{const Ur={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var Ht=$r===jt;if(Ht&&Mr?(Mr=!1,Lr=[Lr,1]):Ht&&(Mr=!0,Lr=1),Mr)jt=Tr,Bt!==null&&(Tr?Bt.length=Tr:Bt=null);else{const Ur={instancePath:e+"/author",schemaPath:"#/properties/author/oneOf",keyword:"oneOf",params:{passingSchemas:Lr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[Ur]:Bt.push(Ur),jt++,validate42.errors=Bt,!1}var zt=wr===jt}else var zt=!0;if(zt){if(_t.attester!==void 0){let Er=_t.attester;const wr=jt;if(jt===jt)if(typeof Er=="string"){if(!pattern12.test(Er))return validate42.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return validate42.errors=[{instancePath:e+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=wr===jt}else var zt=!0;if(zt){if(_t.recipient!==void 0){let Er=_t.recipient;const wr=jt,Tr=jt;let Mr=!1,Lr=null;const Cr=jt;if(jt===jt)if(typeof Er=="string"){if(!pattern12.test(Er)){const Ur={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}}else{const Ur={instancePath:e+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var rr=Cr===jt;rr&&(Mr=!0,Lr=0);const $r=jt;if(jt===$r)if(Array.isArray(Er)){var Jt=!0;const Ur=Er.length;for(let Pr=0;Pr<Ur;Pr++){let _r=Er[Pr];const Ar=jt;if(jt===jt)if(typeof _r=="string"){if(!pattern12.test(_r)){const Zr={instancePath:e+"/recipient/"+Pr,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}}else{const Zr={instancePath:e+"/recipient/"+Pr,schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}var Jt=Ar===jt;if(!Jt)break}}else{const Ur={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var rr=$r===jt;if(rr&&Mr?(Mr=!1,Lr=[Lr,1]):rr&&(Mr=!0,Lr=1),Mr)jt=Tr,Bt!==null&&(Tr?Bt.length=Tr:Bt=null);else{const Ur={instancePath:e+"/recipient",schemaPath:"#/properties/recipient/oneOf",keyword:"oneOf",params:{passingSchemas:Lr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[Ur]:Bt.push(Ur),jt++,validate42.errors=Bt,!1}var zt=wr===jt}else var zt=!0;if(zt){if(_t.contextId!==void 0){const Er=jt;if(typeof _t.contextId!="string")return validate42.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.schema!==void 0){const Er=jt;if(typeof _t.schema!="string")return validate42.errors=[{instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.tags!==void 0){let Er=_t.tags;const wr=jt;if(jt===wr)if(Er&&typeof Er=="object"&&!Array.isArray(Er)){if(Object.keys(Er).length<1)return validate42.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const Mr in Er){let Lr=Er[Mr];const Cr=jt,Br=jt;let $r=!1,Rr=null;const Ur=jt;if(typeof Lr!="string"){const _r={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Qt=Ur===jt;Qt&&($r=!0,Rr=0);const Pr=jt;if(!(typeof Lr=="number"&&isFinite(Lr))){const _r={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Qt=Pr===jt;if(Qt&&$r)$r=!1,Rr=[Rr,1];else{Qt&&($r=!0,Rr=1);const _r=jt;if(typeof Lr!="boolean"){const jr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};Bt===null?Bt=[jr]:Bt.push(jr),jt++}var Qt=_r===jt;if(Qt&&$r)$r=!1,Rr=[Rr,2];else{Qt&&($r=!0,Rr=2);const jr=jt;if(jt===jr)if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr))if(Object.keys(Lr).length<1){const Zr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}else{const Zr=jt;for(const Jr in Lr)if(Jr!=="startsWith"){const nn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Jr},message:"must NOT have additional properties"};Bt===null?Bt=[nn]:Bt.push(nn),jt++;break}if(Zr===jt&&Lr.startsWith!==void 0&&typeof Lr.startsWith!="string"){const Jr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/startsWith",schemaPath:"#/properties/tags/additionalProperties/oneOf/3/properties/startsWith/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Jr]:Bt.push(Jr),jt++}}else{const Zr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Zr]:Bt.push(Zr),jt++}var Qt=jr===jt;if(Qt&&$r)$r=!1,Rr=[Rr,3];else{Qt&&($r=!0,Rr=3);const Zr=jt;if(jt===jt)if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr))if(Object.keys(Lr).length<1){const on={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};Bt===null?Bt=[on]:Bt.push(on),jt++}else{const on=jt;for(const Gr in Lr)if(!(Gr==="gt"||Gr==="gte"||Gr==="lt"||Gr==="lte")){const Fr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Gr},message:"must NOT have additional properties"};Bt===null?Bt=[Fr]:Bt.push(Fr),jt++;break}if(on===jt){if(Lr.gt!==void 0){const Gr=jt,Fr=jt,Xr=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.gte===void 0){const tn={};Bt===null?Bt=[tn]:Bt.push(tn),jt++}var Wt=Xr===jt;if(Wt){const tn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[tn]:Bt.push(tn),jt++}else jt=Fr,Bt!==null&&(Fr?Bt.length=Fr:Bt=null);var nr=Gr===jt}else var nr=!0;if(nr){if(Lr.gte!==void 0){const Gr=jt,Fr=jt,Xr=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.gt===void 0){const en={};Bt===null?Bt=[en]:Bt.push(en),jt++}var yr=Xr===jt;if(yr){const en={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[en]:Bt.push(en),jt++}else jt=Fr,Bt!==null&&(Fr?Bt.length=Fr:Bt=null);var nr=Gr===jt}else var nr=!0;if(nr){if(Lr.lt!==void 0){const Gr=jt,Fr=jt,Xr=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.lte===void 0){const en={};Bt===null?Bt=[en]:Bt.push(en),jt++}var vr=Xr===jt;if(vr){const en={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[en]:Bt.push(en),jt++}else jt=Fr,Bt!==null&&(Fr?Bt.length=Fr:Bt=null);var nr=Gr===jt}else var nr=!0;if(nr){if(Lr.lte!==void 0){const Gr=jt,Fr=jt,Xr=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.lt===void 0){const en={};Bt===null?Bt=[en]:Bt.push(en),jt++}var Ir=Xr===jt;if(Ir){const en={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[en]:Bt.push(en),jt++}else jt=Fr,Bt!==null&&(Fr?Bt.length=Fr:Bt=null);var nr=Gr===jt}else var nr=!0;if(nr){if(Lr.gt!==void 0){const Gr=jt;if(typeof Lr.gt!="string"){const Fr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Fr]:Bt.push(Fr),jt++}var xr=Gr===jt}else var xr=!0;if(xr){if(Lr.gte!==void 0){const Gr=jt;if(typeof Lr.gte!="string"){const Xr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Xr]:Bt.push(Xr),jt++}var xr=Gr===jt}else var xr=!0;if(xr){if(Lr.lt!==void 0){const Gr=jt;if(typeof Lr.lt!="string"){const Xr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Xr]:Bt.push(Xr),jt++}var xr=Gr===jt}else var xr=!0;if(xr)if(Lr.lte!==void 0){const Gr=jt;if(typeof Lr.lte!="string"){const Xr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Xr]:Bt.push(Xr),jt++}var xr=Gr===jt}else var xr=!0}}}}}}}}else{const on={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[on]:Bt.push(on),jt++}var Qt=Zr===jt;if(Qt&&$r)$r=!1,Rr=[Rr,4];else{Qt&&($r=!0,Rr=4);const on=jt;if(jt===jt)if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr))if(Object.keys(Lr).length<1){const Xr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};Bt===null?Bt=[Xr]:Bt.push(Xr),jt++}else{const Xr=jt;for(const tn in Lr)if(!(tn==="gt"||tn==="gte"||tn==="lt"||tn==="lte")){const en={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:tn},message:"must NOT have additional properties"};Bt===null?Bt=[en]:Bt.push(en),jt++;break}if(Xr===jt){if(Lr.gt!==void 0){const tn=jt,en=jt,un=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.gte===void 0){const hn={};Bt===null?Bt=[hn]:Bt.push(hn),jt++}var Or=un===jt;if(Or){const hn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[hn]:Bt.push(hn),jt++}else jt=en,Bt!==null&&(en?Bt.length=en:Bt=null);var Nr=tn===jt}else var Nr=!0;if(Nr){if(Lr.gte!==void 0){const tn=jt,en=jt,un=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.gt===void 0){const yn={};Bt===null?Bt=[yn]:Bt.push(yn),jt++}var kr=un===jt;if(kr){const yn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[yn]:Bt.push(yn),jt++}else jt=en,Bt!==null&&(en?Bt.length=en:Bt=null);var Nr=tn===jt}else var Nr=!0;if(Nr){if(Lr.lt!==void 0){const tn=jt,en=jt,un=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.lte===void 0){const yn={};Bt===null?Bt=[yn]:Bt.push(yn),jt++}var lr=un===jt;if(lr){const yn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[yn]:Bt.push(yn),jt++}else jt=en,Bt!==null&&(en?Bt.length=en:Bt=null);var Nr=tn===jt}else var Nr=!0;if(Nr){if(Lr.lte!==void 0){const tn=jt,en=jt,un=jt;if(Lr&&typeof Lr=="object"&&!Array.isArray(Lr)&&Lr.lt===void 0){const yn={};Bt===null?Bt=[yn]:Bt.push(yn),jt++}var ir=un===jt;if(ir){const yn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};Bt===null?Bt=[yn]:Bt.push(yn),jt++}else jt=en,Bt!==null&&(en?Bt.length=en:Bt=null);var Nr=tn===jt}else var Nr=!0;if(Nr){if(Lr.gt!==void 0){let tn=Lr.gt;const en=jt;if(!(typeof tn=="number"&&isFinite(tn))){const un={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[un]:Bt.push(un),jt++}var Xt=en===jt}else var Xt=!0;if(Xt){if(Lr.gte!==void 0){let tn=Lr.gte;const en=jt;if(!(typeof tn=="number"&&isFinite(tn))){const hn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[hn]:Bt.push(hn),jt++}var Xt=en===jt}else var Xt=!0;if(Xt){if(Lr.lt!==void 0){let tn=Lr.lt;const en=jt;if(!(typeof tn=="number"&&isFinite(tn))){const hn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[hn]:Bt.push(hn),jt++}var Xt=en===jt}else var Xt=!0;if(Xt)if(Lr.lte!==void 0){let tn=Lr.lte;const en=jt;if(!(typeof tn=="number"&&isFinite(tn))){const hn={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"};Bt===null?Bt=[hn]:Bt.push(hn),jt++}var Xt=en===jt}else var Xt=!0}}}}}}}}else{const Xr={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Xr]:Bt.push(Xr),jt++}var Qt=on===jt;Qt&&$r?($r=!1,Rr=[Rr,5]):Qt&&($r=!0,Rr=5)}}}}if($r)jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);else{const _r={instancePath:e+"/tags/"+Mr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:Rr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[_r]:Bt.push(_r),jt++,validate42.errors=Bt,!1}var er=Cr===jt;if(!er)break}}else return validate42.errors=[{instancePath:e+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var zt=wr===jt}else var zt=!0;if(zt){if(_t.recordId!==void 0){const Er=jt;if(typeof _t.recordId!="string")return validate42.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.parentId!==void 0){const Er=jt;if(typeof _t.parentId!="string")return validate42.errors=[{instancePath:e+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.published!==void 0){const Er=jt;if(typeof _t.published!="boolean")return validate42.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.dataFormat!==void 0){const Er=jt;if(typeof _t.dataFormat!="string")return validate42.errors=[{instancePath:e+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.dataSize!==void 0){let Er=_t.dataSize;const wr=jt;if(jt===jt)if(Er&&typeof Er=="object"&&!Array.isArray(Er)){if(Object.keys(Er).length<1)return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Lr=jt;for(const Cr in Er)if(!(Cr==="gt"||Cr==="gte"||Cr==="lt"||Cr==="lte"))return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Cr},message:"must NOT have additional properties"}],!1;if(Lr===jt){if(Er.gt!==void 0){const Cr=jt,Br=jt,$r=jt;if(Er&&typeof Er=="object"&&!Array.isArray(Er)&&Er.gte===void 0){const Rr={};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var pr=$r===jt;if(pr)return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var ur=Cr===jt}else var ur=!0;if(ur){if(Er.gte!==void 0){const Cr=jt,Br=jt,$r=jt;if(Er&&typeof Er=="object"&&!Array.isArray(Er)&&Er.gt===void 0){const Ur={};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var gr=$r===jt;if(gr)return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var ur=Cr===jt}else var ur=!0;if(ur){if(Er.lt!==void 0){const Cr=jt,Br=jt,$r=jt;if(Er&&typeof Er=="object"&&!Array.isArray(Er)&&Er.lte===void 0){const Ur={};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var ar=$r===jt;if(ar)return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var ur=Cr===jt}else var ur=!0;if(ur){if(Er.lte!==void 0){const Cr=jt,Br=jt,$r=jt;if(Er&&typeof Er=="object"&&!Array.isArray(Er)&&Er.lt===void 0){const Ur={};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var tr=$r===jt;if(tr)return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=Br,Bt!==null&&(Br?Bt.length=Br:Bt=null);var ur=Cr===jt}else var ur=!0;if(ur){if(Er.gt!==void 0){let Cr=Er.gt;const Br=jt;if(!(typeof Cr=="number"&&isFinite(Cr)))return validate42.errors=[{instancePath:e+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var dr=Br===jt}else var dr=!0;if(dr){if(Er.gte!==void 0){let Cr=Er.gte;const Br=jt;if(!(typeof Cr=="number"&&isFinite(Cr)))return validate42.errors=[{instancePath:e+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var dr=Br===jt}else var dr=!0;if(dr){if(Er.lt!==void 0){let Cr=Er.lt;const Br=jt;if(!(typeof Cr=="number"&&isFinite(Cr)))return validate42.errors=[{instancePath:e+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var dr=Br===jt}else var dr=!0;if(dr)if(Er.lte!==void 0){let Cr=Er.lte;const Br=jt;if(!(typeof Cr=="number"&&isFinite(Cr)))return validate42.errors=[{instancePath:e+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var dr=Br===jt}else var dr=!0}}}}}}}}}else return validate42.errors=[{instancePath:e+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var zt=wr===jt}else var zt=!0;if(zt){if(_t.dataCid!==void 0){const Er=jt;if(typeof _t.dataCid!="string")return validate42.errors=[{instancePath:e+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zt=Er===jt}else var zt=!0;if(zt){if(_t.dateCreated!==void 0){let Er=_t.dateCreated;const wr=jt;if(jt===wr)if(Er&&typeof Er=="object"&&!Array.isArray(Er)){if(Object.keys(Er).length<1)return validate42.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Mr=jt;for(const Lr in Er)if(!(Lr==="from"||Lr==="to"))return validate42.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Lr},message:"must NOT have additional properties"}],!1;if(Mr===jt){if(Er.from!==void 0){let Lr=Er.from;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var fr=Cr===jt}else var fr=!0;if(fr)if(Er.to!==void 0){let Lr=Er.to;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var fr=Cr===jt}else var fr=!0}}}else return validate42.errors=[{instancePath:e+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var zt=wr===jt}else var zt=!0;if(zt){if(_t.datePublished!==void 0){let Er=_t.datePublished;const wr=jt;if(jt===wr)if(Er&&typeof Er=="object"&&!Array.isArray(Er)){if(Object.keys(Er).length<1)return validate42.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Mr=jt;for(const Lr in Er)if(!(Lr==="from"||Lr==="to"))return validate42.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Lr},message:"must NOT have additional properties"}],!1;if(Mr===jt){if(Er.from!==void 0){let Lr=Er.from;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var br=Cr===jt}else var br=!0;if(br)if(Er.to!==void 0){let Lr=Er.to;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var br=Cr===jt}else var br=!0}}}else return validate42.errors=[{instancePath:e+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var zt=wr===jt}else var zt=!0;if(zt)if(_t.dateUpdated!==void 0){let Er=_t.dateUpdated;const wr=jt;if(jt===wr)if(Er&&typeof Er=="object"&&!Array.isArray(Er)){if(Object.keys(Er).length<1)return validate42.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Mr=jt;for(const Lr in Er)if(!(Lr==="from"||Lr==="to"))return validate42.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Lr},message:"must NOT have additional properties"}],!1;if(Mr===jt){if(Er.from!==void 0){let Lr=Er.from;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Sr=Cr===jt}else var Sr=!0;if(Sr)if(Er.to!==void 0){let Lr=Er.to;const Cr=jt;if(jt===jt)if(typeof Lr=="string"){if(!pattern14.test(Lr))return validate42.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate42.errors=[{instancePath:e+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Sr=Cr===jt}else var Sr=!0}}}else return validate42.errors=[{instancePath:e+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var zt=wr===jt}else var zt=!0}}}}}}}}}}}}}}}}}}}else return validate42.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate42.errors=Bt,jt===0}validate42.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function validate40(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate40.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let zt;if(_t.descriptor===void 0&&(zt="descriptor"))return validate40.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:zt},message:"must have required property '"+zt+"'"}],!1;{const Vt=jt;for(const Ht in _t)if(!(Ht==="authorization"||Ht==="descriptor"))return validate40.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ht},message:"must NOT have additional properties"}],!1;if(Vt===jt){if(_t.authorization!==void 0){const Ht=jt;validate24(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate24.errors:Bt.concat(validate24.errors),jt=Bt.length);var Ut=Ht===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let Ht=_t.descriptor;const Jt=jt;if(jt===Jt)if(Ht&&typeof Ht=="object"&&!Array.isArray(Ht)){let Qt;if(Ht.interface===void 0&&(Qt="interface")||Ht.method===void 0&&(Qt="method")||Ht.messageTimestamp===void 0&&(Qt="messageTimestamp")||Ht.filter===void 0&&(Qt="filter"))return validate40.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Qt},message:"must have required property '"+Qt+"'"}],!1;{const Wt=jt;for(const nr in Ht)if(!(nr==="interface"||nr==="method"||nr==="messageTimestamp"||nr==="filter"||nr==="pagination"||nr==="dateSort"))return validate40.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:nr},message:"must NOT have additional properties"}],!1;if(Wt===jt){if(Ht.interface!==void 0){let nr=Ht.interface;const yr=jt;if(typeof nr!="string")return validate40.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(nr!=="Records")return validate40.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema53.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.method!==void 0){let nr=Ht.method;const yr=jt;if(typeof nr!="string")return validate40.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(nr!=="Query")return validate40.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema53.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.messageTimestamp!==void 0){let nr=Ht.messageTimestamp;const yr=jt;if(jt===jt)if(typeof nr=="string"){if(!pattern14.test(nr))return validate40.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate40.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.filter!==void 0){const nr=jt;validate42(Ht.filter,{instancePath:e+"/descriptor/filter",parentData:Ht,parentDataProperty:"filter",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate42.errors:Bt.concat(validate42.errors),jt=Bt.length);var Nt=nr===jt}else var Nt=!0;if(Nt){if(Ht.pagination!==void 0){let nr=Ht.pagination;const yr=jt;if(jt===yr)if(nr&&typeof nr=="object"&&!Array.isArray(nr)){const Ir=jt;for(const xr in nr)if(!(xr==="limit"||xr==="cursor"))return validate40.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:xr},message:"must NOT have additional properties"}],!1;if(Ir===jt){if(nr.limit!==void 0){let xr=nr.limit;const Or=jt;if(jt===Or)if(typeof xr=="number"&&isFinite(xr)){if(xr<1||isNaN(xr))return validate40.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}else return validate40.errors=[{instancePath:e+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var qt=Or===jt}else var qt=!0;if(qt)if(nr.cursor!==void 0){let xr=nr.cursor;const Or=jt;if(jt===jt)if(xr&&typeof xr=="object"&&!Array.isArray(xr)){if(Object.keys(xr).length<1)return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let lr;if(xr.messageCid===void 0&&(lr="messageCid")||xr.value===void 0&&(lr="value"))return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"}],!1;{const ir=jt;for(const Xt in xr)if(!(Xt==="messageCid"||Xt==="value"))return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Xt},message:"must NOT have additional properties"}],!1;if(ir===jt){if(xr.messageCid!==void 0){const Xt=jt;if(typeof xr.messageCid!="string")return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Kt=Xt===jt}else var Kt=!0;if(Kt)if(xr.value!==void 0){let Xt=xr.value;const er=jt;if(typeof Xt!="string"&&!(typeof Xt=="number"&&isFinite(Xt)))return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:schema70.properties.value.type},message:"must be string,number"}],!1;var Kt=er===jt}else var Kt=!0}}}}else return validate40.errors=[{instancePath:e+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var qt=Or===jt}else var qt=!0}}else return validate40.errors=[{instancePath:e+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt)if(Ht.dateSort!==void 0){let nr=Ht.dateSort;const yr=jt;if(typeof nr!="string")return validate40.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(nr==="createdAscending"||nr==="createdDescending"||nr==="publishedAscending"||nr==="publishedDescending"))return validate40.errors=[{instancePath:e+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:schema53.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=yr===jt}else var Nt=!0}}}}}}}else return validate40.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Jt===jt}else var Ut=!0}}}else return validate40.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate40.errors=Bt,jt===0}validate40.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsSubscribe$1=validate44,schema71={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function validate44(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate44.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.descriptor===void 0&&(qt="descriptor"))return validate44.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;{const Kt=jt;for(const zt in _t)if(!(zt==="authorization"||zt==="descriptor"))return validate44.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:zt},message:"must NOT have additional properties"}],!1;if(Kt===jt){if(_t.authorization!==void 0){const zt=jt;validate24(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate24.errors:Bt.concat(validate24.errors),jt=Bt.length);var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let zt=_t.descriptor;const Vt=jt;if(jt===Vt)if(zt&&typeof zt=="object"&&!Array.isArray(zt)){let Jt;if(zt.interface===void 0&&(Jt="interface")||zt.method===void 0&&(Jt="method")||zt.messageTimestamp===void 0&&(Jt="messageTimestamp")||zt.filter===void 0&&(Jt="filter"))return validate44.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Jt},message:"must have required property '"+Jt+"'"}],!1;{const rr=jt;for(const Qt in zt)if(!(Qt==="interface"||Qt==="method"||Qt==="messageTimestamp"||Qt==="filter"))return validate44.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qt},message:"must NOT have additional properties"}],!1;if(rr===jt){if(zt.interface!==void 0){let Qt=zt.interface;const Wt=jt;if(typeof Qt!="string")return validate44.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Records")return validate44.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema71.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.method!==void 0){let Qt=zt.method;const Wt=jt;if(typeof Qt!="string")return validate44.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Subscribe")return validate44.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema71.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.messageTimestamp!==void 0){let Qt=zt.messageTimestamp;const Wt=jt;if(jt===jt)if(typeof Qt=="string"){if(!pattern14.test(Qt))return validate44.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate44.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt)if(zt.filter!==void 0){const Qt=jt;validate42(zt.filter,{instancePath:e+"/descriptor/filter",parentData:zt,parentDataProperty:"filter",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate42.errors:Bt.concat(validate42.errors),jt=Bt.length);var Nt=Qt===jt}else var Nt=!0}}}}}else return validate44.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Vt===jt}else var Ut=!0}}}else return validate44.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate44.errors=Bt,jt===0}validate44.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsWrite$1=validate47;function validate47(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate47.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),!validate27(_t,{instancePath:e,parentData:$t,parentDataProperty:xt,rootData:At,dynamicAnchors:kt}))Bt=Bt===null?validate27.errors:Bt.concat(validate27.errors),jt=Bt.length;else var Ut=validate27.evaluated.props;if(jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.recordId===void 0&&(Nt="recordId")||_t.authorization===void 0&&(Nt="authorization"))return validate47.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;if(Ut!==!0){for(const qt in _t)if(!Ut||!Ut[qt])return validate47.errors=[{instancePath:e,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:qt},message:"must NOT have unevaluated properties"}],!1}}else return validate47.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate47.errors=Bt,jt===0}validate47.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsWriteDataEncoded=validate26,RecordsWriteUnidentified=validate27,Definitions=validate22;function validate22(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate22.evaluated;return Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)?(validate22.errors=Bt,jt===0):(validate22.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}validate22.evaluated={dynamicProps:!1,dynamicItems:!1};const GeneralJwk=validate49;function validate49(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate49.evaluated;Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0);const Ut=jt;let Nt=!1,qt=null;const Kt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let yr;if(_t.crv===void 0&&(yr="crv")||_t.x===void 0&&(yr="x")){const vr={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:yr},message:"must have required property '"+yr+"'"};Bt===null?Bt=[vr]:Bt.push(vr),jt++}else{if(_t.kty!==void 0){const vr=jt;if(_t.kty!=="EC"){const Ir={instancePath:e+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};Bt===null?Bt=[Ir]:Bt.push(Ir),jt++}var zt=vr===jt}else var zt=!0;if(zt){if(_t.crv!==void 0){const vr=jt;if(typeof _t.crv!="string"){const xr={instancePath:e+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var zt=vr===jt}else var zt=!0;if(zt){if(_t.x!==void 0){const vr=jt;if(typeof _t.x!="string"){const xr={instancePath:e+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var zt=vr===jt}else var zt=!0;if(zt){if(_t.y!==void 0){const vr=jt;if(typeof _t.y!="string"){const xr={instancePath:e+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var zt=vr===jt}else var zt=!0;if(zt)if(_t.d!==void 0){const vr=jt;if(typeof _t.d!="string"){const xr={instancePath:e+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var zt=vr===jt}else var zt=!0}}}}}var rr=Kt===jt;if(rr){Nt=!0,qt=0;var Vt={};Vt.kty=!0,Vt.crv=!0,Vt.x=!0,Vt.y=!0,Vt.d=!0}const Ht=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let yr;if(_t.crv===void 0&&(yr="crv")||_t.x===void 0&&(yr="x")){const vr={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:yr},message:"must have required property '"+yr+"'"};Bt===null?Bt=[vr]:Bt.push(vr),jt++}else{if(_t.kty!==void 0){const vr=jt;if(_t.kty!=="OKP"){const Ir={instancePath:e+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};Bt===null?Bt=[Ir]:Bt.push(Ir),jt++}var Jt=vr===jt}else var Jt=!0;if(Jt){if(_t.crv!==void 0){const vr=jt;if(typeof _t.crv!="string"){const xr={instancePath:e+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var Jt=vr===jt}else var Jt=!0;if(Jt){if(_t.x!==void 0){const vr=jt;if(typeof _t.x!="string"){const xr={instancePath:e+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var Jt=vr===jt}else var Jt=!0;if(Jt)if(_t.d!==void 0){const vr=jt;if(typeof _t.d!="string"){const xr={instancePath:e+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}var Jt=vr===jt}else var Jt=!0}}}}var rr=Ht===jt;if(rr&&Nt)Nt=!1,qt=[qt,1];else{rr&&(Nt=!0,qt=1,Vt!==!0&&(Vt=Vt||{},Vt.kty=!0,Vt.crv=!0,Vt.x=!0,Vt.d=!0));const yr=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Ir;if(_t.n===void 0&&(Ir="n")||_t.e===void 0&&(Ir="e")){const xr={instancePath:e,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:Ir},message:"must have required property '"+Ir+"'"};Bt===null?Bt=[xr]:Bt.push(xr),jt++}else{if(_t.kty!==void 0){const xr=jt;if(_t.kty!=="RSA"){const Or={instancePath:e+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};Bt===null?Bt=[Or]:Bt.push(Or),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.n!==void 0){const xr=jt;if(typeof _t.n!="string"){const Nr={instancePath:e+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.e!==void 0){const xr=jt;if(typeof _t.e!="string"){const Nr={instancePath:e+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.d!==void 0){const xr=jt;if(typeof _t.d!="string"){const Nr={instancePath:e+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.p!==void 0){const xr=jt;if(typeof _t.p!="string"){const Nr={instancePath:e+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.q!==void 0){const xr=jt;if(typeof _t.q!="string"){const Nr={instancePath:e+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.dp!==void 0){const xr=jt;if(typeof _t.dp!="string"){const Nr={instancePath:e+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.dq!==void 0){const xr=jt;if(typeof _t.dq!="string"){const Nr={instancePath:e+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt){if(_t.qi!==void 0){const xr=jt;if(typeof _t.qi!="string"){const Nr={instancePath:e+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}var Qt=xr===jt}else var Qt=!0;if(Qt)if(_t.oth!==void 0){let xr=_t.oth;const Or=jt;if(!(xr&&typeof xr=="object"&&!Array.isArray(xr))){const kr={instancePath:e+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[kr]:Bt.push(kr),jt++}var Qt=Or===jt}else var Qt=!0}}}}}}}}}}var rr=yr===jt;if(rr&&Nt)Nt=!1,qt=[qt,2];else{rr&&(Nt=!0,qt=2,Vt!==!0&&(Vt=Vt||{},Vt.kty=!0,Vt.n=!0,Vt.e=!0,Vt.d=!0,Vt.p=!0,Vt.q=!0,Vt.dp=!0,Vt.dq=!0,Vt.qi=!0,Vt.oth=!0));const Ir=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Or;if(_t.k===void 0&&(Or="k")){const Nr={instancePath:e,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:Or},message:"must have required property '"+Or+"'"};Bt===null?Bt=[Nr]:Bt.push(Nr),jt++}else{if(_t.kty!==void 0){const Nr=jt;if(_t.kty!=="oct"){const kr={instancePath:e+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};Bt===null?Bt=[kr]:Bt.push(kr),jt++}var Wt=Nr===jt}else var Wt=!0;if(Wt)if(_t.k!==void 0){const Nr=jt;if(typeof _t.k!="string"){const lr={instancePath:e+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[lr]:Bt.push(lr),jt++}var Wt=Nr===jt}else var Wt=!0}}var rr=Ir===jt;rr&&Nt?(Nt=!1,qt=[qt,3]):rr&&(Nt=!0,qt=3,Vt!==!0&&(Vt=Vt||{},Vt.kty=!0,Vt.k=!0))}}if(Nt)jt=Ut,Bt!==null&&(Ut?Bt.length=Ut:Bt=null);else{const yr={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:qt},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[yr]:Bt.push(yr),jt++,validate49.errors=Bt,!1}if(jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let yr;if(_t.kty===void 0&&(yr="kty"))return validate49.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:yr},message:"must have required property '"+yr+"'"}],!1;if(Vt!==!0&&(Vt=Vt||{},Vt.alg=!0,Vt.kid=!0,Vt.kty=!0,Vt.crv=!0,Vt.use=!0,Vt.key_ops=!0,Vt.x5u=!0,Vt.x5c=!0,Vt.x5t=!0,Vt["x5t#S256"]=!0),_t.alg!==void 0){const vr=jt;if(typeof _t.alg!="string")return validate49.errors=[{instancePath:e+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.kid!==void 0){const vr=jt;if(typeof _t.kid!="string")return validate49.errors=[{instancePath:e+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.kty!==void 0){let vr=_t.kty;const Ir=jt;if(!(vr==="EC"||vr==="RSA"||vr==="oct"||vr==="OKP"))return validate49.errors=[{instancePath:e+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:schema43.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var nr=Ir===jt}else var nr=!0;if(nr){if(_t.crv!==void 0){const vr=jt;if(typeof _t.crv!="string")return validate49.errors=[{instancePath:e+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.use!==void 0){const vr=jt;if(typeof _t.use!="string")return validate49.errors=[{instancePath:e+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.key_ops!==void 0){const vr=jt;if(typeof _t.key_ops!="string")return validate49.errors=[{instancePath:e+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.x5u!==void 0){const vr=jt;if(typeof _t.x5u!="string")return validate49.errors=[{instancePath:e+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.x5c!==void 0){const vr=jt;if(typeof _t.x5c!="string")return validate49.errors=[{instancePath:e+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr){if(_t.x5t!==void 0){const vr=jt;if(typeof _t.x5t!="string")return validate49.errors=[{instancePath:e+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0;if(nr)if(_t["x5t#S256"]!==void 0){const vr=jt;if(typeof _t["x5t#S256"]!="string")return validate49.errors=[{instancePath:e+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var nr=vr===jt}else var nr=!0}}}}}}}}}else return validate49.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate49.errors=Bt,Lt.props=Vt,jt===0}validate49.evaluated={dynamicProps:!0,dynamicItems:!1};const GeneralJws=validate21,JwkVerificationMethod=validate50,schema75={$id:"https://identity.foundation/dwn/json-schemas/jwk-verification-method.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,required:["id","type","controller","publicKeyJwk"],properties:{id:{type:"string"},type:{enum:["JsonWebKey","JsonWebKey2020"]},controller:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}};function validate50(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate50.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.id===void 0&&(Nt="id")||_t.type===void 0&&(Nt="type")||_t.controller===void 0&&(Nt="controller")||_t.publicKeyJwk===void 0&&(Nt="publicKeyJwk"))return validate50.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;{const qt=jt;for(const Kt in _t)if(!(Kt==="id"||Kt==="type"||Kt==="controller"||Kt==="publicKeyJwk"))return validate50.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Kt},message:"must NOT have additional properties"}],!1;if(qt===jt){if(_t.id!==void 0){const Kt=jt;if(typeof _t.id!="string")return validate50.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.type!==void 0){let Kt=_t.type;const zt=jt;if(!(Kt==="JsonWebKey"||Kt==="JsonWebKey2020"))return validate50.errors=[{instancePath:e+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:schema75.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var Ut=zt===jt}else var Ut=!0;if(Ut){if(_t.controller!==void 0){let Kt=_t.controller;const zt=jt;if(jt===jt)if(typeof Kt=="string"){if(!pattern12.test(Kt))return validate50.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return validate50.errors=[{instancePath:e+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.publicKeyJwk!==void 0){const Kt=jt;validate33(_t.publicKeyJwk,{instancePath:e+"/publicKeyJwk",parentData:_t,parentDataProperty:"publicKeyJwk",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate33.errors:Bt.concat(validate33.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0}}}}}else return validate50.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate50.errors=Bt,jt===0}validate50.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const MessagesFilter=validate52,schema77={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-filter.json",type:"object",additionalProperties:!1,minProperties:1,properties:{interface:{enum:["Protocols","Records"],type:"string"},method:{enum:["Configure","Delete","Write"],type:"string"},protocol:{type:"string"},messageTimestamp:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}}};function validate52(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate52.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){if(Object.keys(_t).length<1)return validate52.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const qt in _t)if(!(qt==="interface"||qt==="method"||qt==="protocol"||qt==="messageTimestamp"))return validate52.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;{if(_t.interface!==void 0){let qt=_t.interface;const Kt=jt;if(typeof qt!="string")return validate52.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(qt==="Protocols"||qt==="Records"))return validate52.errors=[{instancePath:e+"/interface",schemaPath:"#/properties/interface/enum",keyword:"enum",params:{allowedValues:schema77.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.method!==void 0){let qt=_t.method;const Kt=jt;if(typeof qt!="string")return validate52.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(qt==="Configure"||qt==="Delete"||qt==="Write"))return validate52.errors=[{instancePath:e+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:schema77.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.protocol!==void 0){const qt=jt;if(typeof _t.protocol!="string")return validate52.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut)if(_t.messageTimestamp!==void 0){let qt=_t.messageTimestamp;const Kt=jt;if(qt&&typeof qt=="object"&&!Array.isArray(qt)){if(Object.keys(qt).length<1)return validate52.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const Vt in qt)if(!(Vt==="from"||Vt==="to"))return validate52.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Vt},message:"must NOT have additional properties"}],!1;{if(qt.from!==void 0){let Vt=qt.from;const Ht=jt;if(typeof Vt=="string"){if(!pattern14.test(Vt))return validate52.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate52.errors=[{instancePath:e+"/messageTimestamp/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Ht===jt}else var Nt=!0;if(Nt)if(qt.to!==void 0){let Vt=qt.to;const Ht=jt;if(typeof Vt=="string"){if(!pattern14.test(Vt))return validate52.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate52.errors=[{instancePath:e+"/messageTimestamp/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Ht===jt}else var Nt=!0}}else return validate52.errors=[{instancePath:e+"/messageTimestamp",schemaPath:"#/properties/messageTimestamp/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Kt===jt}else var Ut=!0}}}}else return validate52.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate52.errors=Bt,jt===0}validate52.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const MessagesQuery$1=validate53,schema80={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-query.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function validate53(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate53.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let zt;if(_t.authorization===void 0&&(zt="authorization")||_t.descriptor===void 0&&(zt="descriptor"))return validate53.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:zt},message:"must have required property '"+zt+"'"}],!1;{const Vt=jt;for(const Ht in _t)if(!(Ht==="authorization"||Ht==="descriptor"))return validate53.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ht},message:"must NOT have additional properties"}],!1;if(Vt===jt){if(_t.authorization!==void 0){const Ht=jt;validate20(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate20.errors:Bt.concat(validate20.errors),jt=Bt.length);var Ut=Ht===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let Ht=_t.descriptor;const Jt=jt;if(jt===Jt)if(Ht&&typeof Ht=="object"&&!Array.isArray(Ht)){let Qt;if(Ht.interface===void 0&&(Qt="interface")||Ht.method===void 0&&(Qt="method")||Ht.messageTimestamp===void 0&&(Qt="messageTimestamp")||Ht.filters===void 0&&(Qt="filters"))return validate53.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Qt},message:"must have required property '"+Qt+"'"}],!1;{const Wt=jt;for(const nr in Ht)if(!(nr==="interface"||nr==="method"||nr==="messageTimestamp"||nr==="filters"||nr==="cursor"))return validate53.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:nr},message:"must NOT have additional properties"}],!1;if(Wt===jt){if(Ht.interface!==void 0){let nr=Ht.interface;const yr=jt;if(typeof nr!="string")return validate53.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(nr!=="Messages")return validate53.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema80.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.method!==void 0){let nr=Ht.method;const yr=jt;if(typeof nr!="string")return validate53.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(nr!=="Query")return validate53.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema80.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.messageTimestamp!==void 0){let nr=Ht.messageTimestamp;const yr=jt;if(jt===jt)if(typeof nr=="string"){if(!pattern14.test(nr))return validate53.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate53.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt){if(Ht.filters!==void 0){let nr=Ht.filters;const yr=jt;if(jt===yr)if(Array.isArray(nr)){var qt=!0;const Ir=nr.length;for(let xr=0;xr<Ir;xr++){const Or=jt;validate52(nr[xr],{instancePath:e+"/descriptor/filters/"+xr,parentData:nr,parentDataProperty:xr,rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate52.errors:Bt.concat(validate52.errors),jt=Bt.length);var qt=Or===jt;if(!qt)break}}else return validate53.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var Nt=yr===jt}else var Nt=!0;if(Nt)if(Ht.cursor!==void 0){let nr=Ht.cursor;const yr=jt;if(jt===jt)if(nr&&typeof nr=="object"&&!Array.isArray(nr)){if(Object.keys(nr).length<1)return validate53.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let xr;if(nr.messageCid===void 0&&(xr="messageCid")||nr.value===void 0&&(xr="value"))return validate53.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:xr},message:"must have required property '"+xr+"'"}],!1;{const Or=jt;for(const Nr in nr)if(!(Nr==="messageCid"||Nr==="value"))return validate53.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Nr},message:"must NOT have additional properties"}],!1;if(Or===jt){if(nr.messageCid!==void 0){const Nr=jt;if(typeof nr.messageCid!="string")return validate53.errors=[{instancePath:e+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Kt=Nr===jt}else var Kt=!0;if(Kt)if(nr.value!==void 0){let Nr=nr.value;const kr=jt;if(typeof Nr!="string"&&!(typeof Nr=="number"&&isFinite(Nr)))return validate53.errors=[{instancePath:e+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:schema70.properties.value.type},message:"must be string,number"}],!1;var Kt=kr===jt}else var Kt=!0}}}}else return validate53.errors=[{instancePath:e+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=yr===jt}else var Nt=!0}}}}}}else return validate53.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Jt===jt}else var Ut=!0}}}else return validate53.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate53.errors=Bt,jt===0}validate53.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const MessagesRead$1=validate56,schema83={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-read.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageCid:{type:"string"}}}}};function validate56(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate56.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.authorization===void 0&&(qt="authorization")||_t.descriptor===void 0&&(qt="descriptor"))return validate56.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;{const Kt=jt;for(const zt in _t)if(!(zt==="authorization"||zt==="descriptor"))return validate56.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:zt},message:"must NOT have additional properties"}],!1;if(Kt===jt){if(_t.authorization!==void 0){const zt=jt;validate20(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate20.errors:Bt.concat(validate20.errors),jt=Bt.length);var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let zt=_t.descriptor;const Vt=jt;if(jt===Vt)if(zt&&typeof zt=="object"&&!Array.isArray(zt)){let Jt;if(zt.interface===void 0&&(Jt="interface")||zt.method===void 0&&(Jt="method")||zt.messageTimestamp===void 0&&(Jt="messageTimestamp"))return validate56.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Jt},message:"must have required property '"+Jt+"'"}],!1;{const rr=jt;for(const Qt in zt)if(!(Qt==="interface"||Qt==="method"||Qt==="messageTimestamp"||Qt==="messageCid"))return validate56.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qt},message:"must NOT have additional properties"}],!1;if(rr===jt){if(zt.interface!==void 0){let Qt=zt.interface;const Wt=jt;if(typeof Qt!="string")return validate56.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Messages")return validate56.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema83.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.method!==void 0){let Qt=zt.method;const Wt=jt;if(typeof Qt!="string")return validate56.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Read")return validate56.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema83.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.messageTimestamp!==void 0){let Qt=zt.messageTimestamp;const Wt=jt;if(jt===jt)if(typeof Qt=="string"){if(!pattern14.test(Qt))return validate56.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate56.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt)if(zt.messageCid!==void 0){const Qt=jt;if(typeof zt.messageCid!="string")return validate56.errors=[{instancePath:e+"/descriptor/messageCid",schemaPath:"#/properties/descriptor/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Qt===jt}else var Nt=!0}}}}}else return validate56.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Vt===jt}else var Ut=!0}}}else return validate56.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate56.errors=Bt,jt===0}validate56.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const MessagesSubscribe$1=validate58,schema85={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor","authorization"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{type:"string"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/messages-filter.json"}}}}}};function validate58(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate58.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Kt;if(_t.descriptor===void 0&&(Kt="descriptor")||_t.authorization===void 0&&(Kt="authorization"))return validate58.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Kt},message:"must have required property '"+Kt+"'"}],!1;{const zt=jt;for(const Vt in _t)if(!(Vt==="authorization"||Vt==="descriptor"))return validate58.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Vt},message:"must NOT have additional properties"}],!1;if(zt===jt){if(_t.authorization!==void 0){const Vt=jt;validate20(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate20.errors:Bt.concat(validate20.errors),jt=Bt.length);var Ut=Vt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let Vt=_t.descriptor;const Ht=jt;if(jt===Ht)if(Vt&&typeof Vt=="object"&&!Array.isArray(Vt)){let rr;if(Vt.interface===void 0&&(rr="interface")||Vt.method===void 0&&(rr="method")||Vt.messageTimestamp===void 0&&(rr="messageTimestamp")||Vt.filters===void 0&&(rr="filters"))return validate58.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:rr},message:"must have required property '"+rr+"'"}],!1;{const Qt=jt;for(const Wt in Vt)if(!(Wt==="interface"||Wt==="method"||Wt==="messageTimestamp"||Wt==="filters"))return validate58.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Wt},message:"must NOT have additional properties"}],!1;if(Qt===jt){if(Vt.interface!==void 0){let Wt=Vt.interface;const nr=jt;if(typeof Wt!="string")return validate58.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Wt!=="Messages")return validate58.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema85.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=nr===jt}else var Nt=!0;if(Nt){if(Vt.method!==void 0){let Wt=Vt.method;const nr=jt;if(typeof Wt!="string")return validate58.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Wt!=="Subscribe")return validate58.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema85.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=nr===jt}else var Nt=!0;if(Nt){if(Vt.messageTimestamp!==void 0){const Wt=jt;if(typeof Vt.messageTimestamp!="string")return validate58.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt)if(Vt.filters!==void 0){let Wt=Vt.filters;const nr=jt;if(jt===nr)if(Array.isArray(Wt)){var qt=!0;const vr=Wt.length;for(let Ir=0;Ir<vr;Ir++){const xr=jt;validate52(Wt[Ir],{instancePath:e+"/descriptor/filters/"+Ir,parentData:Wt,parentDataProperty:Ir,rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate52.errors:Bt.concat(validate52.errors),jt=Bt.length);var qt=xr===jt;if(!qt)break}}else return validate58.errors=[{instancePath:e+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var Nt=nr===jt}else var Nt=!0}}}}}else return validate58.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Ht===jt}else var Ut=!0}}}else return validate58.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate58.errors=Bt,jt===0}validate58.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const NumberRangeFilter=validate61;function validate61(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate61.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(Object.keys(_t).length<1)return validate61.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Ht=jt;for(const Jt in _t)if(!(Jt==="gt"||Jt==="gte"||Jt==="lt"||Jt==="lte"))return validate61.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Jt},message:"must NOT have additional properties"}],!1;if(Ht===jt){if(_t.gt!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.gte===void 0){const Wt={};Bt===null?Bt=[Wt]:Bt.push(Wt),jt++}var Ut=Qt===jt;if(Ut)return validate61.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.gte!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.gt===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var qt=Qt===jt;if(qt)return validate61.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.lt!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.lte===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var Kt=Qt===jt;if(Kt)return validate61.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.lte!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.lt===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var zt=Qt===jt;if(zt)return validate61.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.gt!==void 0){let Jt=_t.gt;const rr=jt;if(!(typeof Jt=="number"&&isFinite(Jt)))return validate61.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Vt=rr===jt}else var Vt=!0;if(Vt){if(_t.gte!==void 0){let Jt=_t.gte;const rr=jt;if(!(typeof Jt=="number"&&isFinite(Jt)))return validate61.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Vt=rr===jt}else var Vt=!0;if(Vt){if(_t.lt!==void 0){let Jt=_t.lt;const rr=jt;if(!(typeof Jt=="number"&&isFinite(Jt)))return validate61.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Vt=rr===jt}else var Vt=!0;if(Vt)if(_t.lte!==void 0){let Jt=_t.lte;const rr=jt;if(!(typeof Jt=="number"&&isFinite(Jt)))return validate61.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Vt=rr===jt}else var Vt=!0}}}}}}}}}else return validate61.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate61.errors=Bt,jt===0}validate61.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const PaginationCursor=validate62;function validate62(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate62.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){if(Object.keys(_t).length<1)return validate62.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let Nt;if(_t.messageCid===void 0&&(Nt="messageCid")||_t.value===void 0&&(Nt="value"))return validate62.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;for(const qt in _t)if(!(qt==="messageCid"||qt==="value"))return validate62.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;{if(_t.messageCid!==void 0){const qt=jt;if(typeof _t.messageCid!="string")return validate62.errors=[{instancePath:e+"/messageCid",schemaPath:"#/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut)if(_t.value!==void 0){let qt=_t.value;const Kt=jt;if(typeof qt!="string"&&!(typeof qt=="number"&&isFinite(qt)))return validate62.errors=[{instancePath:e+"/value",schemaPath:"#/properties/value/type",keyword:"type",params:{type:schema70.properties.value.type},message:"must be string,number"}],!1;var Ut=Kt===jt}else var Ut=!0}}}else return validate62.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate62.errors=Bt,jt===0}validate62.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const PermissionGrantData=validate63,schema103={type:"object",additionalProperties:!1,properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function validate65(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate65.evaluated;Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0);const Ut=jt;let Nt=!1,qt=null;const Kt=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let lr;if(_t.interface===void 0&&(lr="interface")||_t.method===void 0&&(lr="method")){const ir={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"};Bt===null?Bt=[ir]:Bt.push(ir),jt++}else{const ir=jt;for(const Xt in _t)if(!(Xt==="interface"||Xt==="method"||Xt==="protocol")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Xt},message:"must NOT have additional properties"};Bt===null?Bt=[er]:Bt.push(er),jt++;break}if(ir===jt){if(_t.interface!==void 0){const Xt=jt;if(_t.interface!=="Messages"){const er={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Vt=Xt===jt}else var Vt=!0;if(Vt){if(_t.method!==void 0){const Xt=jt;if(_t.method!=="Query"){const pr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Vt=Xt===jt}else var Vt=!0;if(Vt)if(_t.protocol!==void 0){const Xt=jt;if(typeof _t.protocol!="string"){const pr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Vt=Xt===jt}else var Vt=!0}}}}else{const lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[lr]:Bt.push(lr),jt++}var Wt=Kt===jt;if(Wt){Nt=!0,qt=0;var Ht=!0}const Jt=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let lr;if(_t.interface===void 0&&(lr="interface")||_t.method===void 0&&(lr="method")){const ir={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"};Bt===null?Bt=[ir]:Bt.push(ir),jt++}else{const ir=jt;for(const Xt in _t)if(!(Xt==="interface"||Xt==="method"||Xt==="protocol")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Xt},message:"must NOT have additional properties"};Bt===null?Bt=[er]:Bt.push(er),jt++;break}if(ir===jt){if(_t.interface!==void 0){const Xt=jt;if(_t.interface!=="Messages"){const er={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Qt=Xt===jt}else var Qt=!0;if(Qt){if(_t.method!==void 0){const Xt=jt;if(_t.method!=="Read"){const pr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Qt=Xt===jt}else var Qt=!0;if(Qt)if(_t.protocol!==void 0){const Xt=jt;if(typeof _t.protocol!="string"){const pr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Qt=Xt===jt}else var Qt=!0}}}}else{const lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[lr]:Bt.push(lr),jt++}var Wt=Jt===jt;if(Wt&&Nt)Nt=!1,qt=[qt,1];else{Wt&&(Nt=!0,qt=1,Ht!==!0&&(Ht=!0));const lr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let er;if(_t.interface===void 0&&(er="interface")||_t.method===void 0&&(er="method")){const pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:er},message:"must have required property '"+er+"'"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}else{const pr=jt;for(const ur in _t)if(!(ur==="interface"||ur==="method"||ur==="protocol")){const gr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ur},message:"must NOT have additional properties"};Bt===null?Bt=[gr]:Bt.push(gr),jt++;break}if(pr===jt){if(_t.interface!==void 0){const ur=jt;if(_t.interface!=="Messages"){const gr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[gr]:Bt.push(gr),jt++}var nr=ur===jt}else var nr=!0;if(nr){if(_t.method!==void 0){const ur=jt;if(_t.method!=="Subscribe"){const ar={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var nr=ur===jt}else var nr=!0;if(nr)if(_t.protocol!==void 0){const ur=jt;if(typeof _t.protocol!="string"){const ar={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var nr=ur===jt}else var nr=!0}}}}else{const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Wt=lr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,2];else{Wt&&(Nt=!0,qt=2,Ht!==!0&&(Ht=!0));const er=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let gr;if(_t.interface===void 0&&(gr="interface")||_t.method===void 0&&(gr="method")){const ar={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/required",keyword:"required",params:{missingProperty:gr},message:"must have required property '"+gr+"'"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}else{const ar=jt;for(const tr in _t)if(!(tr==="interface"||tr==="method"||tr==="protocol")){const dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:tr},message:"must NOT have additional properties"};Bt===null?Bt=[dr]:Bt.push(dr),jt++;break}if(ar===jt){if(_t.interface!==void 0){const tr=jt;if(_t.interface!=="Protocols"){const dr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var yr=tr===jt}else var yr=!0;if(yr){if(_t.method!==void 0){const tr=jt;if(_t.method!=="Configure"){const fr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/method/const",keyword:"const",params:{allowedValue:"Configure"},message:"must be equal to constant"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}var yr=tr===jt}else var yr=!0;if(yr)if(_t.protocol!==void 0){const tr=jt;if(typeof _t.protocol!="string"){const fr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}var yr=tr===jt}else var yr=!0}}}}else{const gr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[gr]:Bt.push(gr),jt++}var Wt=er===jt;if(Wt&&Nt)Nt=!1,qt=[qt,3];else{Wt&&(Nt=!0,qt=3,Ht!==!0&&(Ht=!0));const gr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let dr;if(_t.interface===void 0&&(dr="interface")||_t.method===void 0&&(dr="method")){const fr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:dr},message:"must have required property '"+dr+"'"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}else{const fr=jt;for(const br in _t)if(!(br==="interface"||br==="method"||br==="protocol")){const Sr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:br},message:"must NOT have additional properties"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++;break}if(fr===jt){if(_t.interface!==void 0){const br=jt;if(_t.interface!=="Protocols"){const Sr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++}var vr=br===jt}else var vr=!0;if(vr){if(_t.method!==void 0){const br=jt;if(_t.method!=="Query"){const Dr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}var vr=br===jt}else var vr=!0;if(vr)if(_t.protocol!==void 0){const br=jt;if(typeof _t.protocol!="string"){const Dr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}var vr=br===jt}else var vr=!0}}}}else{const dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var Wt=gr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,4];else{Wt&&(Nt=!0,qt=4,Ht!==!0&&(Ht=!0));const dr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Sr;if(_t.interface===void 0&&(Sr="interface")||_t.method===void 0&&(Sr="method")){const Dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:Sr},message:"must have required property '"+Sr+"'"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}else{const Dr=jt;for(const Er in _t)if(!(Er==="interface"||Er==="method"||Er==="protocol"||Er==="contextId"||Er==="protocolPath")){const wr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Er},message:"must NOT have additional properties"};Bt===null?Bt=[wr]:Bt.push(wr),jt++;break}if(Dr===jt){if(_t.interface!==void 0){const Er=jt;if(_t.interface!=="Records"){const wr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.method!==void 0){const Er=jt;if(_t.method!=="Read"){const Tr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.protocol!==void 0){const Er=jt;if(typeof _t.protocol!="string"){const Tr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.contextId!==void 0){const Er=jt;if(typeof _t.contextId!="string"){const Tr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir)if(_t.protocolPath!==void 0){const Er=jt;if(typeof _t.protocolPath!="string"){const Tr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0}}}}}}else{const Sr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++}var Wt=dr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,5];else{Wt&&(Nt=!0,qt=5,Ht!==!0&&(Ht=!0));const Sr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let wr;if(_t.interface===void 0&&(wr="interface")||_t.method===void 0&&(wr="method")){const Tr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:wr},message:"must have required property '"+wr+"'"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}else{const Tr=jt;for(const Mr in _t)if(!(Mr==="interface"||Mr==="method"||Mr==="protocol"||Mr==="contextId"||Mr==="protocolPath")){const Lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Mr},message:"must NOT have additional properties"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++;break}if(Tr===jt){if(_t.interface!==void 0){const Mr=jt;if(_t.interface!=="Records"){const Lr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.method!==void 0){const Mr=jt;if(_t.method!=="Delete"){const Cr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.protocol!==void 0){const Mr=jt;if(typeof _t.protocol!="string"){const Cr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.contextId!==void 0){const Mr=jt;if(typeof _t.contextId!="string"){const Cr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr)if(_t.protocolPath!==void 0){const Mr=jt;if(typeof _t.protocolPath!="string"){const Cr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0}}}}}}else{const wr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}var Wt=Sr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,6];else{Wt&&(Nt=!0,qt=6,Ht!==!0&&(Ht=!0));const wr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Lr;if(_t.interface===void 0&&(Lr="interface")||_t.method===void 0&&(Lr="method")){const Cr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:Lr},message:"must have required property '"+Lr+"'"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}else{const Cr=jt;for(const Br in _t)if(!(Br==="interface"||Br==="method"||Br==="protocol"||Br==="contextId"||Br==="protocolPath")){const $r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Br},message:"must NOT have additional properties"};Bt===null?Bt=[$r]:Bt.push($r),jt++;break}if(Cr===jt){if(_t.interface!==void 0){const Br=jt;if(_t.interface!=="Records"){const $r={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[$r]:Bt.push($r),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.method!==void 0){const Br=jt;if(_t.method!=="Write"){const Rr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.protocol!==void 0){const Br=jt;if(typeof _t.protocol!="string"){const Rr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.contextId!==void 0){const Br=jt;if(typeof _t.contextId!="string"){const Rr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or)if(_t.protocolPath!==void 0){const Br=jt;if(typeof _t.protocolPath!="string"){const Rr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0}}}}}}else{const Lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var Wt=wr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,7];else{Wt&&(Nt=!0,qt=7,Ht!==!0&&(Ht=!0));const Lr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let $r;if(_t.interface===void 0&&($r="interface")||_t.method===void 0&&($r="method")){const Rr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:$r},message:"must have required property '"+$r+"'"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}else{const Rr=jt;for(const Ur in _t)if(!(Ur==="interface"||Ur==="method"||Ur==="protocol"||Ur==="contextId"||Ur==="protocolPath")){const Pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ur},message:"must NOT have additional properties"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++;break}if(Rr===jt){if(_t.interface!==void 0){const Ur=jt;if(_t.interface!=="Records"){const Pr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.method!==void 0){const Ur=jt;if(_t.method!=="Query"){const _r={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.protocol!==void 0){const Ur=jt;if(typeof _t.protocol!="string"){const _r={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.contextId!==void 0){const Ur=jt;if(typeof _t.contextId!="string"){const _r={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr)if(_t.protocolPath!==void 0){const Ur=jt;if(typeof _t.protocolPath!="string"){const _r={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0}}}}}}else{const $r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[$r]:Bt.push($r),jt++}var Wt=Lr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,8];else{Wt&&(Nt=!0,qt=8,Ht!==!0&&(Ht=!0));const $r=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Pr;if(_t.interface===void 0&&(Pr="interface")||_t.method===void 0&&(Pr="method")){const _r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:Pr},message:"must have required property '"+Pr+"'"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}else{const _r=jt;for(const Ar in _t)if(!(Ar==="interface"||Ar==="method"||Ar==="protocol"||Ar==="contextId"||Ar==="protocolPath")){const jr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ar},message:"must NOT have additional properties"};Bt===null?Bt=[jr]:Bt.push(jr),jt++;break}if(_r===jt){if(_t.interface!==void 0){const Ar=jt;if(_t.interface!=="Records"){const jr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[jr]:Bt.push(jr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.method!==void 0){const Ar=jt;if(_t.method!=="Subscribe"){const Kr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.protocol!==void 0){const Ar=jt;if(typeof _t.protocol!="string"){const Kr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.contextId!==void 0){const Ar=jt;if(typeof _t.contextId!="string"){const Kr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr)if(_t.protocolPath!==void 0){const Ar=jt;if(typeof _t.protocolPath!="string"){const Kr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0}}}}}}else{const Pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Wt=$r===jt;Wt&&Nt?(Nt=!1,qt=[qt,9]):Wt&&(Nt=!0,qt=9,Ht!==!0&&(Ht=!0))}}}}}}}}if(Nt)jt=Ut,Bt!==null&&(Ut?Bt.length=Ut:Bt=null);else{const lr={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:qt},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[lr]:Bt.push(lr),jt++,validate65.errors=Bt,!1}return validate65.errors=Bt,Lt.props=Ht,jt===0}validate65.evaluated={dynamicProps:!0,dynamicItems:!1};function validate63(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate63.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.dateExpires===void 0&&(Nt="dateExpires")||_t.scope===void 0&&(Nt="scope"))return validate63.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;{const qt=jt;for(const Kt in _t)if(!(Kt==="description"||Kt==="dateExpires"||Kt==="requestId"||Kt==="delegated"||Kt==="scope"||Kt==="conditions"))return validate63.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Kt},message:"must NOT have additional properties"}],!1;if(qt===jt){if(_t.description!==void 0){const Kt=jt;if(typeof _t.description!="string")return validate63.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.dateExpires!==void 0){let Kt=_t.dateExpires;const zt=jt;if(jt===jt)if(typeof Kt=="string"){if(!pattern14.test(Kt))return validate63.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate63.errors=[{instancePath:e+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=zt===jt}else var Ut=!0;if(Ut){if(_t.requestId!==void 0){const Kt=jt;if(typeof _t.requestId!="string")return validate63.errors=[{instancePath:e+"/requestId",schemaPath:"#/properties/requestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.delegated!==void 0){const Kt=jt;if(typeof _t.delegated!="boolean")return validate63.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.scope!==void 0){const Kt=jt;validate65(_t.scope,{instancePath:e+"/scope",parentData:_t,parentDataProperty:"scope",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate65.errors:Bt.concat(validate65.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0;if(Ut)if(_t.conditions!==void 0){let Kt=_t.conditions;const zt=jt;if(jt===jt)if(Kt&&typeof Kt=="object"&&!Array.isArray(Kt)){const Jt=jt;for(const rr in Kt)if(rr!=="publication")return validate63.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:rr},message:"must NOT have additional properties"}],!1;if(Jt===jt&&Kt.publication!==void 0){let rr=Kt.publication;if(typeof rr!="string")return validate63.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(rr==="Required"||rr==="Prohibited"))return validate63.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:schema103.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return validate63.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=zt===jt}else var Ut=!0}}}}}}}else return validate63.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate63.errors=Bt,jt===0}validate63.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const PermissionRequestData=validate68;function validate69(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate69.evaluated;Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0);const Ut=jt;let Nt=!1,qt=null;const Kt=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let lr;if(_t.interface===void 0&&(lr="interface")||_t.method===void 0&&(lr="method")){const ir={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"};Bt===null?Bt=[ir]:Bt.push(ir),jt++}else{const ir=jt;for(const Xt in _t)if(!(Xt==="interface"||Xt==="method"||Xt==="protocol")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Xt},message:"must NOT have additional properties"};Bt===null?Bt=[er]:Bt.push(er),jt++;break}if(ir===jt){if(_t.interface!==void 0){const Xt=jt;if(_t.interface!=="Messages"){const er={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Vt=Xt===jt}else var Vt=!0;if(Vt){if(_t.method!==void 0){const Xt=jt;if(_t.method!=="Query"){const pr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Vt=Xt===jt}else var Vt=!0;if(Vt)if(_t.protocol!==void 0){const Xt=jt;if(typeof _t.protocol!="string"){const pr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Vt=Xt===jt}else var Vt=!0}}}}else{const lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[lr]:Bt.push(lr),jt++}var Wt=Kt===jt;if(Wt){Nt=!0,qt=0;var Ht=!0}const Jt=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let lr;if(_t.interface===void 0&&(lr="interface")||_t.method===void 0&&(lr="method")){const ir={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"};Bt===null?Bt=[ir]:Bt.push(ir),jt++}else{const ir=jt;for(const Xt in _t)if(!(Xt==="interface"||Xt==="method"||Xt==="protocol")){const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Xt},message:"must NOT have additional properties"};Bt===null?Bt=[er]:Bt.push(er),jt++;break}if(ir===jt){if(_t.interface!==void 0){const Xt=jt;if(_t.interface!=="Messages"){const er={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Qt=Xt===jt}else var Qt=!0;if(Qt){if(_t.method!==void 0){const Xt=jt;if(_t.method!=="Read"){const pr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Qt=Xt===jt}else var Qt=!0;if(Qt)if(_t.protocol!==void 0){const Xt=jt;if(typeof _t.protocol!="string"){const pr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}var Qt=Xt===jt}else var Qt=!0}}}}else{const lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[lr]:Bt.push(lr),jt++}var Wt=Jt===jt;if(Wt&&Nt)Nt=!1,qt=[qt,1];else{Wt&&(Nt=!0,qt=1,Ht!==!0&&(Ht=!0));const lr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let er;if(_t.interface===void 0&&(er="interface")||_t.method===void 0&&(er="method")){const pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/required",keyword:"required",params:{missingProperty:er},message:"must have required property '"+er+"'"};Bt===null?Bt=[pr]:Bt.push(pr),jt++}else{const pr=jt;for(const ur in _t)if(!(ur==="interface"||ur==="method"||ur==="protocol")){const gr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ur},message:"must NOT have additional properties"};Bt===null?Bt=[gr]:Bt.push(gr),jt++;break}if(pr===jt){if(_t.interface!==void 0){const ur=jt;if(_t.interface!=="Messages"){const gr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Messages"},message:"must be equal to constant"};Bt===null?Bt=[gr]:Bt.push(gr),jt++}var nr=ur===jt}else var nr=!0;if(nr){if(_t.method!==void 0){const ur=jt;if(_t.method!=="Subscribe"){const ar={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var nr=ur===jt}else var nr=!0;if(nr)if(_t.protocol!==void 0){const ur=jt;if(typeof _t.protocol!="string"){const ar={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}var nr=ur===jt}else var nr=!0}}}}else{const er={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/messages-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[er]:Bt.push(er),jt++}var Wt=lr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,2];else{Wt&&(Nt=!0,qt=2,Ht!==!0&&(Ht=!0));const er=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let gr;if(_t.interface===void 0&&(gr="interface")||_t.method===void 0&&(gr="method")){const ar={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/required",keyword:"required",params:{missingProperty:gr},message:"must have required property '"+gr+"'"};Bt===null?Bt=[ar]:Bt.push(ar),jt++}else{const ar=jt;for(const tr in _t)if(!(tr==="interface"||tr==="method"||tr==="protocol")){const dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:tr},message:"must NOT have additional properties"};Bt===null?Bt=[dr]:Bt.push(dr),jt++;break}if(ar===jt){if(_t.interface!==void 0){const tr=jt;if(_t.interface!=="Protocols"){const dr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var yr=tr===jt}else var yr=!0;if(yr){if(_t.method!==void 0){const tr=jt;if(_t.method!=="Configure"){const fr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/method/const",keyword:"const",params:{allowedValue:"Configure"},message:"must be equal to constant"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}var yr=tr===jt}else var yr=!0;if(yr)if(_t.protocol!==void 0){const tr=jt;if(typeof _t.protocol!="string"){const fr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}var yr=tr===jt}else var yr=!0}}}}else{const gr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-configure-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[gr]:Bt.push(gr),jt++}var Wt=er===jt;if(Wt&&Nt)Nt=!1,qt=[qt,3];else{Wt&&(Nt=!0,qt=3,Ht!==!0&&(Ht=!0));const gr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let dr;if(_t.interface===void 0&&(dr="interface")||_t.method===void 0&&(dr="method")){const fr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/required",keyword:"required",params:{missingProperty:dr},message:"must have required property '"+dr+"'"};Bt===null?Bt=[fr]:Bt.push(fr),jt++}else{const fr=jt;for(const br in _t)if(!(br==="interface"||br==="method"||br==="protocol")){const Sr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:br},message:"must NOT have additional properties"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++;break}if(fr===jt){if(_t.interface!==void 0){const br=jt;if(_t.interface!=="Protocols"){const Sr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++}var vr=br===jt}else var vr=!0;if(vr){if(_t.method!==void 0){const br=jt;if(_t.method!=="Query"){const Dr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}var vr=br===jt}else var vr=!0;if(vr)if(_t.protocol!==void 0){const br=jt;if(typeof _t.protocol!="string"){const Dr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}var vr=br===jt}else var vr=!0}}}}else{const dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[dr]:Bt.push(dr),jt++}var Wt=gr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,4];else{Wt&&(Nt=!0,qt=4,Ht!==!0&&(Ht=!0));const dr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Sr;if(_t.interface===void 0&&(Sr="interface")||_t.method===void 0&&(Sr="method")){const Dr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:Sr},message:"must have required property '"+Sr+"'"};Bt===null?Bt=[Dr]:Bt.push(Dr),jt++}else{const Dr=jt;for(const Er in _t)if(!(Er==="interface"||Er==="method"||Er==="protocol"||Er==="contextId"||Er==="protocolPath")){const wr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Er},message:"must NOT have additional properties"};Bt===null?Bt=[wr]:Bt.push(wr),jt++;break}if(Dr===jt){if(_t.interface!==void 0){const Er=jt;if(_t.interface!=="Records"){const wr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.method!==void 0){const Er=jt;if(_t.method!=="Read"){const Tr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.protocol!==void 0){const Er=jt;if(typeof _t.protocol!="string"){const Tr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir){if(_t.contextId!==void 0){const Er=jt;if(typeof _t.contextId!="string"){const Tr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0;if(Ir)if(_t.protocolPath!==void 0){const Er=jt;if(typeof _t.protocolPath!="string"){const Tr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ir=Er===jt}else var Ir=!0}}}}}}else{const Sr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Sr]:Bt.push(Sr),jt++}var Wt=dr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,5];else{Wt&&(Nt=!0,qt=5,Ht!==!0&&(Ht=!0));const Sr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let wr;if(_t.interface===void 0&&(wr="interface")||_t.method===void 0&&(wr="method")){const Tr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:wr},message:"must have required property '"+wr+"'"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}else{const Tr=jt;for(const Mr in _t)if(!(Mr==="interface"||Mr==="method"||Mr==="protocol"||Mr==="contextId"||Mr==="protocolPath")){const Lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Mr},message:"must NOT have additional properties"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++;break}if(Tr===jt){if(_t.interface!==void 0){const Mr=jt;if(_t.interface!=="Records"){const Lr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.method!==void 0){const Mr=jt;if(_t.method!=="Delete"){const Cr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.protocol!==void 0){const Mr=jt;if(typeof _t.protocol!="string"){const Cr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr){if(_t.contextId!==void 0){const Mr=jt;if(typeof _t.contextId!="string"){const Cr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0;if(xr)if(_t.protocolPath!==void 0){const Mr=jt;if(typeof _t.protocolPath!="string"){const Cr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var xr=Mr===jt}else var xr=!0}}}}}}else{const wr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}var Wt=Sr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,6];else{Wt&&(Nt=!0,qt=6,Ht!==!0&&(Ht=!0));const wr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Lr;if(_t.interface===void 0&&(Lr="interface")||_t.method===void 0&&(Lr="method")){const Cr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:Lr},message:"must have required property '"+Lr+"'"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}else{const Cr=jt;for(const Br in _t)if(!(Br==="interface"||Br==="method"||Br==="protocol"||Br==="contextId"||Br==="protocolPath")){const $r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Br},message:"must NOT have additional properties"};Bt===null?Bt=[$r]:Bt.push($r),jt++;break}if(Cr===jt){if(_t.interface!==void 0){const Br=jt;if(_t.interface!=="Records"){const $r={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[$r]:Bt.push($r),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.method!==void 0){const Br=jt;if(_t.method!=="Write"){const Rr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.protocol!==void 0){const Br=jt;if(typeof _t.protocol!="string"){const Rr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or){if(_t.contextId!==void 0){const Br=jt;if(typeof _t.contextId!="string"){const Rr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0;if(Or)if(_t.protocolPath!==void 0){const Br=jt;if(typeof _t.protocolPath!="string"){const Rr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}var Or=Br===jt}else var Or=!0}}}}}}else{const Lr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var Wt=wr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,7];else{Wt&&(Nt=!0,qt=7,Ht!==!0&&(Ht=!0));const Lr=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let $r;if(_t.interface===void 0&&($r="interface")||_t.method===void 0&&($r="method")){const Rr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:$r},message:"must have required property '"+$r+"'"};Bt===null?Bt=[Rr]:Bt.push(Rr),jt++}else{const Rr=jt;for(const Ur in _t)if(!(Ur==="interface"||Ur==="method"||Ur==="protocol"||Ur==="contextId"||Ur==="protocolPath")){const Pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ur},message:"must NOT have additional properties"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++;break}if(Rr===jt){if(_t.interface!==void 0){const Ur=jt;if(_t.interface!=="Records"){const Pr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.method!==void 0){const Ur=jt;if(_t.method!=="Query"){const _r={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.protocol!==void 0){const Ur=jt;if(typeof _t.protocol!="string"){const _r={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr){if(_t.contextId!==void 0){const Ur=jt;if(typeof _t.contextId!="string"){const _r={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0;if(Nr)if(_t.protocolPath!==void 0){const Ur=jt;if(typeof _t.protocolPath!="string"){const _r={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}var Nr=Ur===jt}else var Nr=!0}}}}}}else{const $r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[$r]:Bt.push($r),jt++}var Wt=Lr===jt;if(Wt&&Nt)Nt=!1,qt=[qt,8];else{Wt&&(Nt=!0,qt=8,Ht!==!0&&(Ht=!0));const $r=jt;if(jt===jt)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Pr;if(_t.interface===void 0&&(Pr="interface")||_t.method===void 0&&(Pr="method")){const _r={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:Pr},message:"must have required property '"+Pr+"'"};Bt===null?Bt=[_r]:Bt.push(_r),jt++}else{const _r=jt;for(const Ar in _t)if(!(Ar==="interface"||Ar==="method"||Ar==="protocol"||Ar==="contextId"||Ar==="protocolPath")){const jr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ar},message:"must NOT have additional properties"};Bt===null?Bt=[jr]:Bt.push(jr),jt++;break}if(_r===jt){if(_t.interface!==void 0){const Ar=jt;if(_t.interface!=="Records"){const jr={instancePath:e+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};Bt===null?Bt=[jr]:Bt.push(jr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.method!==void 0){const Ar=jt;if(_t.method!=="Subscribe"){const Kr={instancePath:e+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.protocol!==void 0){const Ar=jt;if(typeof _t.protocol!="string"){const Kr={instancePath:e+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr){if(_t.contextId!==void 0){const Ar=jt;if(typeof _t.contextId!="string"){const Kr={instancePath:e+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0;if(kr)if(_t.protocolPath!==void 0){const Ar=jt;if(typeof _t.protocolPath!="string"){const Kr={instancePath:e+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Kr]:Bt.push(Kr),jt++}var kr=Ar===jt}else var kr=!0}}}}}}else{const Pr={instancePath:e,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var Wt=$r===jt;Wt&&Nt?(Nt=!1,qt=[qt,9]):Wt&&(Nt=!0,qt=9,Ht!==!0&&(Ht=!0))}}}}}}}}if(Nt)jt=Ut,Bt!==null&&(Ut?Bt.length=Ut:Bt=null);else{const lr={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:qt},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[lr]:Bt.push(lr),jt++,validate69.errors=Bt,!1}return validate69.errors=Bt,Lt.props=Ht,jt===0}validate69.evaluated={dynamicProps:!0,dynamicItems:!1};function validate68(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate68.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.delegated===void 0&&(Nt="delegated")||_t.scope===void 0&&(Nt="scope"))return validate68.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;{const qt=jt;for(const Kt in _t)if(!(Kt==="description"||Kt==="delegated"||Kt==="scope"||Kt==="conditions"))return validate68.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Kt},message:"must NOT have additional properties"}],!1;if(qt===jt){if(_t.description!==void 0){const Kt=jt;if(typeof _t.description!="string")return validate68.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.delegated!==void 0){const Kt=jt;if(typeof _t.delegated!="boolean")return validate68.errors=[{instancePath:e+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var Ut=Kt===jt}else var Ut=!0;if(Ut){if(_t.scope!==void 0){const Kt=jt;validate69(_t.scope,{instancePath:e+"/scope",parentData:_t,parentDataProperty:"scope",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate69.errors:Bt.concat(validate69.errors),jt=Bt.length);var Ut=Kt===jt}else var Ut=!0;if(Ut)if(_t.conditions!==void 0){let Kt=_t.conditions;const zt=jt;if(jt===jt)if(Kt&&typeof Kt=="object"&&!Array.isArray(Kt)){const Jt=jt;for(const rr in Kt)if(rr!=="publication")return validate68.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:rr},message:"must NOT have additional properties"}],!1;if(Jt===jt&&Kt.publication!==void 0){let rr=Kt.publication;if(typeof rr!="string")return validate68.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(rr==="Required"||rr==="Prohibited"))return validate68.errors=[{instancePath:e+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:schema103.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}else return validate68.errors=[{instancePath:e+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=zt===jt}else var Ut=!0}}}}}else return validate68.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate68.errors=Bt,jt===0}validate68.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const PermissionRevocationData=validate71;function validate71(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate71.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){for(const Ut in _t)if(Ut!=="description")return validate71.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ut},message:"must NOT have additional properties"}],!1;if(_t.description!==void 0&&typeof _t.description!="string")return validate71.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return validate71.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate71.errors=Bt,jt===0}validate71.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const PermissionsDefinitions=validate64;function validate64(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate64.evaluated;return Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)?(validate64.errors=Bt,jt===0):(validate64.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}validate64.evaluated={dynamicProps:!1,dynamicItems:!1};const PermissionsScopes=validate66;function validate66(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate66.evaluated;return Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)?(validate66.errors=Bt,jt===0):(validate66.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}validate66.evaluated={dynamicProps:!1,dynamicItems:!1};const ProtocolDefinition=validate72,pattern37=new RegExp(".*","u"),schema119={$id:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}},required:["rootKeyId","publicKeyJwk"]},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-prune","co-update","create","delete","prune","read","update"]}}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a role record type",type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-update","create","delete","query","subscribe","read","update"]}}}}]}},$role:{$comment:"When `true`, this turns a record into `role` that may be used within a context/sub-context",type:"boolean"},$size:{type:"object",additionalProperties:!1,properties:{min:{type:"number",minimum:0},max:{type:"number",minimum:0}}},$tags:{type:"object",minProperties:1,properties:{$requiredTags:{type:"array",items:{type:"string"}},$allowUndefinedTags:{type:"boolean"}},patternProperties:{"^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$":{type:"object",additionalProperties:!1,properties:{type:{enum:["string","number","integer","boolean","array"]},items:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}},contains:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$":{}}}}}},patternProperties:{"^[^$].*$":{$ref:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json"}}},pattern39=new RegExp("^[^$].*$","u"),pattern40=new RegExp("^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$","u"),pattern41=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$","u"),pattern42=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$","u"),wrapper2={validate:validate73};function validate73(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate73.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){const lr=jt;for(const ir in _t)if(!(ir==="$encryption"||ir==="$actions"||ir==="$role"||ir==="$size"||ir==="$tags"||pattern39.test(ir)))return validate73.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ir},message:"must NOT have additional properties"}],!1;if(lr===jt){if(_t.$encryption!==void 0){let ir=_t.$encryption;const Xt=jt;if(jt===Xt)if(ir&&typeof ir=="object"&&!Array.isArray(ir)){let er;if(ir.rootKeyId===void 0&&(er="rootKeyId")||ir.publicKeyJwk===void 0&&(er="publicKeyJwk"))return validate73.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/required",keyword:"required",params:{missingProperty:er},message:"must have required property '"+er+"'"}],!1;{const pr=jt;for(const ur in ir)if(!(ur==="rootKeyId"||ur==="publicKeyJwk"))return validate73.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ur},message:"must NOT have additional properties"}],!1;if(pr===jt){if(ir.rootKeyId!==void 0){const ur=jt;if(typeof ir.rootKeyId!="string")return validate73.errors=[{instancePath:e+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=ur===jt}else var Ut=!0;if(Ut)if(ir.publicKeyJwk!==void 0){const ur=jt;validate33(ir.publicKeyJwk,{instancePath:e+"/$encryption/publicKeyJwk",parentData:ir,parentDataProperty:"publicKeyJwk",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate33.errors:Bt.concat(validate33.errors),jt=Bt.length);var Ut=ur===jt}else var Ut=!0}}}else return validate73.errors=[{instancePath:e+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=Xt===jt}else var Nt=!0;if(Nt){if(_t.$actions!==void 0){let ir=_t.$actions;const Xt=jt;if(jt===Xt)if(Array.isArray(ir)){if(ir.length<1)return validate73.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var qt=!0;const pr=ir.length;for(let ur=0;ur<pr;ur++){let gr=ir[ur];const ar=jt;if(!(gr&&typeof gr=="object"&&!Array.isArray(gr)))return validate73.errors=[{instancePath:e+"/$actions/"+ur,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;const tr=jt;let dr=!1,fr=null;const br=jt;if(gr&&typeof gr=="object"&&!Array.isArray(gr)){let Er;if(gr.who===void 0&&(Er="who")||gr.can===void 0&&(Er="can")){const wr={instancePath:e+"/$actions/"+ur,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:Er},message:"must have required property '"+Er+"'"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}else{const wr=jt;for(const Tr in gr)if(!(Tr==="who"||Tr==="of"||Tr==="can")){const Mr={instancePath:e+"/$actions/"+ur,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Tr},message:"must NOT have additional properties"};Bt===null?Bt=[Mr]:Bt.push(Mr),jt++;break}if(wr===jt){if(gr.who!==void 0){let Tr=gr.who;const Mr=jt;if(typeof Tr!="string"){const Lr={instancePath:e+"/$actions/"+ur+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}if(!(Tr==="anyone"||Tr==="author"||Tr==="recipient")){const Lr={instancePath:e+"/$actions/"+ur+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:schema119.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var Kt=Mr===jt}else var Kt=!0;if(Kt){if(gr.of!==void 0){const Tr=jt;if(typeof gr.of!="string"){const Lr={instancePath:e+"/$actions/"+ur+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var Kt=Tr===jt}else var Kt=!0;if(Kt)if(gr.can!==void 0){let Tr=gr.can;const Mr=jt;if(jt===Mr)if(Array.isArray(Tr))if(Tr.length<1){const Cr={instancePath:e+"/$actions/"+ur+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}else{var zt=!0;const Cr=Tr.length;for(let Br=0;Br<Cr;Br++){let $r=Tr[Br];const Rr=jt;if(typeof $r!="string"){const Pr={instancePath:e+"/$actions/"+ur+"/can/"+Br,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}if(!($r==="co-delete"||$r==="co-prune"||$r==="co-update"||$r==="create"||$r==="delete"||$r==="prune"||$r==="read"||$r==="update")){const Pr={instancePath:e+"/$actions/"+ur+"/can/"+Br,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/enum",keyword:"enum",params:{allowedValues:schema119.properties.$actions.items.oneOf[0].properties.can.items.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[Pr]:Bt.push(Pr),jt++}var zt=Rr===jt;if(!zt)break}}else{const Cr={instancePath:e+"/$actions/"+ur+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[Cr]:Bt.push(Cr),jt++}var Kt=Mr===jt}else var Kt=!0}}}}var rr=br===jt;if(rr){dr=!0,fr=0;var Vt=!0}const Sr=jt;if(gr&&typeof gr=="object"&&!Array.isArray(gr)){let Er;if(gr.role===void 0&&(Er="role")||gr.can===void 0&&(Er="can")){const wr={instancePath:e+"/$actions/"+ur,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:Er},message:"must have required property '"+Er+"'"};Bt===null?Bt=[wr]:Bt.push(wr),jt++}else{if(gr.role!==void 0){const wr=jt;if(typeof gr.role!="string"){const Tr={instancePath:e+"/$actions/"+ur+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Tr]:Bt.push(Tr),jt++}var Ht=wr===jt}else var Ht=!0;if(Ht)if(gr.can!==void 0){let wr=gr.can;const Tr=jt;if(jt===Tr)if(Array.isArray(wr))if(wr.length<1){const Lr={instancePath:e+"/$actions/"+ur+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}else{var Jt=!0;const Lr=wr.length;for(let Cr=0;Cr<Lr;Cr++){let Br=wr[Cr];const $r=jt;if(typeof Br!="string"){const Ur={instancePath:e+"/$actions/"+ur+"/can/"+Cr,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}if(!(Br==="co-delete"||Br==="co-update"||Br==="create"||Br==="delete"||Br==="query"||Br==="subscribe"||Br==="read"||Br==="update")){const Ur={instancePath:e+"/$actions/"+ur+"/can/"+Cr,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/enum",keyword:"enum",params:{allowedValues:schema119.properties.$actions.items.oneOf[1].properties.can.items.enum},message:"must be equal to one of the allowed values"};Bt===null?Bt=[Ur]:Bt.push(Ur),jt++}var Jt=$r===jt;if(!Jt)break}}else{const Lr={instancePath:e+"/$actions/"+ur+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};Bt===null?Bt=[Lr]:Bt.push(Lr),jt++}var Ht=Tr===jt}else var Ht=!0}}var rr=Sr===jt;if(rr&&dr?(dr=!1,fr=[fr,1]):rr&&(dr=!0,fr=1,Vt!==!0&&(Vt=Vt||{},Vt.role=!0,Vt.can=!0)),dr)jt=tr,Bt!==null&&(tr?Bt.length=tr:Bt=null);else{const Er={instancePath:e+"/$actions/"+ur,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:fr},message:"must match exactly one schema in oneOf"};return Bt===null?Bt=[Er]:Bt.push(Er),jt++,validate73.errors=Bt,!1}var qt=ar===jt;if(!qt)break}}}else return validate73.errors=[{instancePath:e+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var Nt=Xt===jt}else var Nt=!0;if(Nt){if(_t.$role!==void 0){const ir=jt;if(typeof _t.$role!="boolean")return validate73.errors=[{instancePath:e+"/$role",schemaPath:"#/properties/%24role/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var Nt=ir===jt}else var Nt=!0;if(Nt){if(_t.$size!==void 0){let ir=_t.$size;const Xt=jt;if(jt===Xt)if(ir&&typeof ir=="object"&&!Array.isArray(ir)){const pr=jt;for(const ur in ir)if(!(ur==="min"||ur==="max"))return validate73.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ur},message:"must NOT have additional properties"}],!1;if(pr===jt){if(ir.min!==void 0){let ur=ir.min;const gr=jt;if(jt===gr)if(typeof ur=="number"&&isFinite(ur)){if(ur<0||isNaN(ur))return validate73.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return validate73.errors=[{instancePath:e+"/$size/min",schemaPath:"#/properties/%24size/properties/min/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Qt=gr===jt}else var Qt=!0;if(Qt)if(ir.max!==void 0){let ur=ir.max;const gr=jt;if(jt===gr)if(typeof ur=="number"&&isFinite(ur)){if(ur<0||isNaN(ur))return validate73.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return validate73.errors=[{instancePath:e+"/$size/max",schemaPath:"#/properties/%24size/properties/max/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Qt=gr===jt}else var Qt=!0}}else return validate73.errors=[{instancePath:e+"/$size",schemaPath:"#/properties/%24size/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=Xt===jt}else var Nt=!0;if(Nt){if(_t.$tags!==void 0){let ir=_t.$tags;const Xt=jt;if(jt===Xt)if(ir&&typeof ir=="object"&&!Array.isArray(ir)){if(Object.keys(ir).length<1)return validate73.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;if(ir.$requiredTags!==void 0){let pr=ir.$requiredTags;const ur=jt;if(jt===ur)if(Array.isArray(pr)){var Wt=!0;const gr=pr.length;for(let ar=0;ar<gr;ar++){const tr=jt;if(typeof pr[ar]!="string")return validate73.errors=[{instancePath:e+"/$tags/$requiredTags/"+ar,schemaPath:"#/properties/%24tags/properties/%24requiredTags/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Wt=tr===jt;if(!Wt)break}}else return validate73.errors=[{instancePath:e+"/$tags/$requiredTags",schemaPath:"#/properties/%24tags/properties/%24requiredTags/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var nr=ur===jt}else var nr=!0;if(nr){if(ir.$allowUndefinedTags!==void 0){const pr=jt;if(typeof ir.$allowUndefinedTags!="boolean")return validate73.errors=[{instancePath:e+"/$tags/$allowUndefinedTags",schemaPath:"#/properties/%24tags/properties/%24allowUndefinedTags/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var nr=pr===jt}else var nr=!0;if(nr){var yr={};yr.$requiredTags=!0,yr.$allowUndefinedTags=!0;for(const pr in ir)if(pattern40.test(pr)){let ur=ir[pr];if(jt===jt)if(ur&&typeof ur=="object"&&!Array.isArray(ur)){const ar=jt;for(const tr in ur)if(!(tr==="type"||tr==="items"||tr==="contains"||pattern41.test(tr)))return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:tr},message:"must NOT have additional properties"}],!1;if(ar===jt){if(ur.type!==void 0){let tr=ur.type;const dr=jt;if(!(tr==="string"||tr==="number"||tr==="integer"||tr==="boolean"||tr==="array"))return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/type/enum",keyword:"enum",params:{allowedValues:schema119.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var vr=dr===jt}else var vr=!0;if(vr){if(ur.items!==void 0){let tr=ur.items;const dr=jt;if(jt===dr)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){if(tr.type!==void 0){let br=tr.type;const Sr=jt;if(!(br==="string"||br==="number"||br==="integer"))return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1")+"/items/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/properties/type/enum",keyword:"enum",params:{allowedValues:schema119.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var Ir=Sr===jt}else var Ir=!0;if(Ir){var xr={};xr.type=!0;for(const br in tr)pattern42.test(br)&&(xr[br]=!0)}}else return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1")+"/items",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var vr=dr===jt}else var vr=!0;if(vr)if(ur.contains!==void 0){let tr=ur.contains;const dr=jt;if(jt===dr)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){if(tr.type!==void 0){let br=tr.type;const Sr=jt;if(!(br==="string"||br==="number"||br==="integer"))return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/properties/type/enum",keyword:"enum",params:{allowedValues:schema119.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.contains.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var Or=Sr===jt}else var Or=!0;if(Or){var Nr={};Nr.type=!0;for(const br in tr)pattern42.test(br)&&(Nr[br]=!0)}}else return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var vr=dr===jt}else var vr=!0}}}else return validate73.errors=[{instancePath:e+"/$tags/"+pr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;yr[pr]=!0}}}}else return validate73.errors=[{instancePath:e+"/$tags",schemaPath:"#/properties/%24tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=Xt===jt}else var Nt=!0;if(Nt){var kr=!0;for(const ir in _t)if(pattern39.test(ir)){const Xt=jt;wrapper2.validate(_t[ir],{instancePath:e+"/"+ir.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:_t,parentDataProperty:ir,rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?wrapper2.validate.errors:Bt.concat(wrapper2.validate.errors),jt=Bt.length);var kr=Xt===jt;if(!kr)break}}}}}}}}else return validate73.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate73.errors=Bt,jt===0}validate73.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function validate72(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate72.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Vt;if(_t.protocol===void 0&&(Vt="protocol")||_t.published===void 0&&(Vt="published")||_t.types===void 0&&(Vt="types")||_t.structure===void 0&&(Vt="structure"))return validate72.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Vt},message:"must have required property '"+Vt+"'"}],!1;{const Ht=jt;for(const Jt in _t)if(!(Jt==="protocol"||Jt==="published"||Jt==="types"||Jt==="structure"))return validate72.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Jt},message:"must NOT have additional properties"}],!1;if(Ht===jt){if(_t.protocol!==void 0){const Jt=jt;if(typeof _t.protocol!="string")return validate72.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=Jt===jt}else var Ut=!0;if(Ut){if(_t.published!==void 0){const Jt=jt;if(typeof _t.published!="boolean")return validate72.errors=[{instancePath:e+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var Ut=Jt===jt}else var Ut=!0;if(Ut){if(_t.types!==void 0){let Jt=_t.types;const rr=jt;if(jt===rr)if(Jt&&typeof Jt=="object"&&!Array.isArray(Jt)){var Nt={};for(const Wt in Jt)if(pattern37.test(Wt)){let nr=Jt[Wt];if(jt===jt)if(nr&&typeof nr=="object"&&!Array.isArray(nr)){const vr=jt;for(const Ir in nr)if(!(Ir==="schema"||Ir==="dataFormats"))return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ir},message:"must NOT have additional properties"}],!1;if(vr===jt){if(nr.schema!==void 0){const Ir=jt;if(typeof nr.schema!="string")return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qt=Ir===jt}else var qt=!0;if(qt)if(nr.dataFormats!==void 0){let Ir=nr.dataFormats;const xr=jt;if(jt===xr)if(Array.isArray(Ir)){if(Ir.length<1)return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var Kt=!0;const Nr=Ir.length;for(let kr=0;kr<Nr;kr++){const lr=jt;if(typeof Ir[kr]!="string")return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+kr,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Kt=lr===jt;if(!Kt)break}}}else return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var qt=xr===jt}else var qt=!0}}else return validate72.errors=[{instancePath:e+"/types/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;Nt[Wt]=!0}}else return validate72.errors=[{instancePath:e+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=rr===jt}else var Ut=!0;if(Ut)if(_t.structure!==void 0){let Jt=_t.structure;const rr=jt;if(jt===rr)if(Jt&&typeof Jt=="object"&&!Array.isArray(Jt)){var zt={};for(const Wt in Jt)pattern37.test(Wt)&&(validate73(Jt[Wt],{instancePath:e+"/structure/"+Wt.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:Jt,parentDataProperty:Wt,rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate73.errors:Bt.concat(validate73.errors),jt=Bt.length),zt[Wt]=!0)}else return validate72.errors=[{instancePath:e+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=rr===jt}else var Ut=!0}}}}}else return validate72.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate72.errors=Bt,jt===0}validate72.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const ProtocolRuleSet=validate73,ProtocolsConfigure$1=validate76,schema120={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-configure.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}};function validate76(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate76.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.authorization===void 0&&(qt="authorization")||_t.descriptor===void 0&&(qt="descriptor"))return validate76.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;{const Kt=jt;for(const zt in _t)if(!(zt==="authorization"||zt==="descriptor"))return validate76.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:zt},message:"must NOT have additional properties"}],!1;if(Kt===jt){if(_t.authorization!==void 0){const zt=jt;validate24(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate24.errors:Bt.concat(validate24.errors),jt=Bt.length);var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let zt=_t.descriptor;const Vt=jt;if(jt===Vt)if(zt&&typeof zt=="object"&&!Array.isArray(zt)){let Jt;if(zt.interface===void 0&&(Jt="interface")||zt.method===void 0&&(Jt="method")||zt.messageTimestamp===void 0&&(Jt="messageTimestamp")||zt.definition===void 0&&(Jt="definition"))return validate76.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Jt},message:"must have required property '"+Jt+"'"}],!1;{const rr=jt;for(const Qt in zt)if(!(Qt==="interface"||Qt==="method"||Qt==="messageTimestamp"||Qt==="definition"))return validate76.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qt},message:"must NOT have additional properties"}],!1;if(rr===jt){if(zt.interface!==void 0){let Qt=zt.interface;const Wt=jt;if(typeof Qt!="string")return validate76.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Protocols")return validate76.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema120.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.method!==void 0){let Qt=zt.method;const Wt=jt;if(typeof Qt!="string")return validate76.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Configure")return validate76.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema120.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.messageTimestamp!==void 0){let Qt=zt.messageTimestamp;const Wt=jt;if(jt===jt)if(typeof Qt=="string"){if(!pattern14.test(Qt))return validate76.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate76.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt)if(zt.definition!==void 0){const Qt=jt;validate72(zt.definition,{instancePath:e+"/descriptor/definition",parentData:zt,parentDataProperty:"definition",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate72.errors:Bt.concat(validate72.errors),jt=Bt.length);var Nt=Qt===jt}else var Nt=!0}}}}}else return validate76.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Vt===jt}else var Ut=!0}}}else return validate76.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate76.errors=Bt,jt===0}validate76.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const ProtocolsQuery$1=validate79,schema122={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}}}}}};function validate79(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate79.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let Kt;if(_t.descriptor===void 0&&(Kt="descriptor"))return validate79.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Kt},message:"must have required property '"+Kt+"'"}],!1;{const zt=jt;for(const Vt in _t)if(!(Vt==="authorization"||Vt==="descriptor"))return validate79.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Vt},message:"must NOT have additional properties"}],!1;if(zt===jt){if(_t.authorization!==void 0){const Vt=jt;validate20(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate20.errors:Bt.concat(validate20.errors),jt=Bt.length);var Ut=Vt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let Vt=_t.descriptor;const Ht=jt;if(jt===Ht)if(Vt&&typeof Vt=="object"&&!Array.isArray(Vt)){let rr;if(Vt.interface===void 0&&(rr="interface")||Vt.method===void 0&&(rr="method")||Vt.messageTimestamp===void 0&&(rr="messageTimestamp"))return validate79.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:rr},message:"must have required property '"+rr+"'"}],!1;{const Qt=jt;for(const Wt in Vt)if(!(Wt==="interface"||Wt==="method"||Wt==="messageTimestamp"||Wt==="filter"))return validate79.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Wt},message:"must NOT have additional properties"}],!1;if(Qt===jt){if(Vt.interface!==void 0){let Wt=Vt.interface;const nr=jt;if(typeof Wt!="string")return validate79.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Wt!=="Protocols")return validate79.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema122.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=nr===jt}else var Nt=!0;if(Nt){if(Vt.method!==void 0){let Wt=Vt.method;const nr=jt;if(typeof Wt!="string")return validate79.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Wt!=="Query")return validate79.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema122.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=nr===jt}else var Nt=!0;if(Nt){if(Vt.messageTimestamp!==void 0){let Wt=Vt.messageTimestamp;const nr=jt;if(jt===jt)if(typeof Wt=="string"){if(!pattern14.test(Wt))return validate79.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate79.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=nr===jt}else var Nt=!0;if(Nt)if(Vt.filter!==void 0){let Wt=Vt.filter;const nr=jt;if(jt===nr)if(Wt&&typeof Wt=="object"&&!Array.isArray(Wt)){if(Object.keys(Wt).length<1)return validate79.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const vr=jt;for(const Ir in Wt)if(!(Ir==="protocol"||Ir==="recipient"))return validate79.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ir},message:"must NOT have additional properties"}],!1;if(vr===jt){if(Wt.protocol!==void 0){const Ir=jt;if(typeof Wt.protocol!="string")return validate79.errors=[{instancePath:e+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qt=Ir===jt}else var qt=!0;if(qt)if(Wt.recipient!==void 0){let Ir=Wt.recipient;const xr=jt;if(jt===jt)if(typeof Ir=="string"){if(!pattern12.test(Ir))return validate79.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return validate79.errors=[{instancePath:e+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qt=xr===jt}else var qt=!0}}}else return validate79.errors=[{instancePath:e+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Nt=nr===jt}else var Nt=!0}}}}}else return validate79.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Ht===jt}else var Ut=!0}}}else return validate79.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate79.errors=Bt,jt===0}validate79.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsRead$1=validate81,schema125={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-read.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function validate81(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate81.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){let qt;if(_t.descriptor===void 0&&(qt="descriptor"))return validate81.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:qt},message:"must have required property '"+qt+"'"}],!1;{const Kt=jt;for(const zt in _t)if(!(zt==="authorization"||zt==="descriptor"))return validate81.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:zt},message:"must NOT have additional properties"}],!1;if(Kt===jt){if(_t.authorization!==void 0){const zt=jt;validate24(_t.authorization,{instancePath:e+"/authorization",parentData:_t,parentDataProperty:"authorization",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate24.errors:Bt.concat(validate24.errors),jt=Bt.length);var Ut=zt===jt}else var Ut=!0;if(Ut)if(_t.descriptor!==void 0){let zt=_t.descriptor;const Vt=jt;if(jt===Vt)if(zt&&typeof zt=="object"&&!Array.isArray(zt)){let Jt;if(zt.interface===void 0&&(Jt="interface")||zt.method===void 0&&(Jt="method")||zt.messageTimestamp===void 0&&(Jt="messageTimestamp")||zt.filter===void 0&&(Jt="filter"))return validate81.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Jt},message:"must have required property '"+Jt+"'"}],!1;{const rr=jt;for(const Qt in zt)if(!(Qt==="interface"||Qt==="method"||Qt==="messageTimestamp"||Qt==="filter"))return validate81.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qt},message:"must NOT have additional properties"}],!1;if(rr===jt){if(zt.interface!==void 0){let Qt=zt.interface;const Wt=jt;if(typeof Qt!="string")return validate81.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Records")return validate81.errors=[{instancePath:e+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:schema125.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.method!==void 0){let Qt=zt.method;const Wt=jt;if(typeof Qt!="string")return validate81.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Qt!=="Read")return validate81.errors=[{instancePath:e+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:schema125.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt){if(zt.messageTimestamp!==void 0){let Qt=zt.messageTimestamp;const Wt=jt;if(jt===jt)if(typeof Qt=="string"){if(!pattern14.test(Qt))return validate81.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}else return validate81.errors=[{instancePath:e+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Nt=Wt===jt}else var Nt=!0;if(Nt)if(zt.filter!==void 0){const Qt=jt;validate42(zt.filter,{instancePath:e+"/descriptor/filter",parentData:zt,parentDataProperty:"filter",rootData:At,dynamicAnchors:kt})||(Bt=Bt===null?validate42.errors:Bt.concat(validate42.errors),jt=Bt.length);var Nt=Qt===jt}else var Nt=!0}}}}}else return validate81.errors=[{instancePath:e+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ut=Vt===jt}else var Ut=!0}}}else return validate81.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate81.errors=Bt,jt===0}validate81.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsFilter=validate42,PublicJwk=validate33,GenericSignaturePayload=validate84;function validate84(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate84.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.descriptorCid===void 0&&(Nt="descriptorCid"))return validate84.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;for(const qt in _t)if(!(qt==="descriptorCid"||qt==="delegatedGrantId"||qt==="permissionGrantId"||qt==="protocolRole"))return validate84.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;{if(_t.descriptorCid!==void 0){const qt=jt;if(typeof _t.descriptorCid!="string")return validate84.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.delegatedGrantId!==void 0){const qt=jt;if(typeof _t.delegatedGrantId!="string")return validate84.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.permissionGrantId!==void 0){const qt=jt;if(typeof _t.permissionGrantId!="string")return validate84.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut)if(_t.protocolRole!==void 0){const qt=jt;if(typeof _t.protocolRole!="string")return validate84.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0}}}}else return validate84.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate84.errors=Bt,jt===0}validate84.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RecordsWriteSignaturePayload=validate85;function validate85(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate85.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),_t&&typeof _t=="object"&&!Array.isArray(_t)){let Nt;if(_t.descriptorCid===void 0&&(Nt="descriptorCid")||_t.recordId===void 0&&(Nt="recordId"))return validate85.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;for(const qt in _t)if(!(qt==="descriptorCid"||qt==="recordId"||qt==="contextId"||qt==="attestationCid"||qt==="encryptionCid"||qt==="delegatedGrantId"||qt==="permissionGrantId"||qt==="protocolRole"))return validate85.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:qt},message:"must NOT have additional properties"}],!1;{if(_t.descriptorCid!==void 0){const qt=jt;if(typeof _t.descriptorCid!="string")return validate85.errors=[{instancePath:e+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.recordId!==void 0){const qt=jt;if(typeof _t.recordId!="string")return validate85.errors=[{instancePath:e+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.contextId!==void 0){const qt=jt;if(typeof _t.contextId!="string")return validate85.errors=[{instancePath:e+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.attestationCid!==void 0){const qt=jt;if(typeof _t.attestationCid!="string")return validate85.errors=[{instancePath:e+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.encryptionCid!==void 0){const qt=jt;if(typeof _t.encryptionCid!="string")return validate85.errors=[{instancePath:e+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.delegatedGrantId!==void 0){const qt=jt;if(typeof _t.delegatedGrantId!="string")return validate85.errors=[{instancePath:e+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut){if(_t.permissionGrantId!==void 0){const qt=jt;if(typeof _t.permissionGrantId!="string")return validate85.errors=[{instancePath:e+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0;if(Ut)if(_t.protocolRole!==void 0){const qt=jt;if(typeof _t.protocolRole!="string")return validate85.errors=[{instancePath:e+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ut=qt===jt}else var Ut=!0}}}}}}}}else return validate85.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate85.errors=Bt,jt===0}validate85.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const StringRangeFilter=validate86;function validate86(_t,{instancePath:e="",parentData:$t,parentDataProperty:xt,rootData:At=_t,dynamicAnchors:kt={}}={}){let Bt=null,jt=0;const Lt=validate86.evaluated;if(Lt.dynamicProps&&(Lt.props=void 0),Lt.dynamicItems&&(Lt.items=void 0),jt===0)if(_t&&typeof _t=="object"&&!Array.isArray(_t)){if(Object.keys(_t).length<1)return validate86.errors=[{instancePath:e,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Ht=jt;for(const Jt in _t)if(!(Jt==="gt"||Jt==="gte"||Jt==="lt"||Jt==="lte"))return validate86.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Jt},message:"must NOT have additional properties"}],!1;if(Ht===jt){if(_t.gt!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.gte===void 0){const Wt={};Bt===null?Bt=[Wt]:Bt.push(Wt),jt++}var Ut=Qt===jt;if(Ut)return validate86.errors=[{instancePath:e,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.gte!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.gt===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var qt=Qt===jt;if(qt)return validate86.errors=[{instancePath:e,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.lt!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.lte===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var Kt=Qt===jt;if(Kt)return validate86.errors=[{instancePath:e,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.lte!==void 0){const Jt=jt,rr=jt,Qt=jt;if(_t&&typeof _t=="object"&&!Array.isArray(_t)&&_t.lt===void 0){const nr={};Bt===null?Bt=[nr]:Bt.push(nr),jt++}var zt=Qt===jt;if(zt)return validate86.errors=[{instancePath:e,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;jt=rr,Bt!==null&&(rr?Bt.length=rr:Bt=null);var Nt=Jt===jt}else var Nt=!0;if(Nt){if(_t.gt!==void 0){const Jt=jt;if(typeof _t.gt!="string")return validate86.errors=[{instancePath:e+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Vt=Jt===jt}else var Vt=!0;if(Vt){if(_t.gte!==void 0){const Jt=jt;if(typeof _t.gte!="string")return validate86.errors=[{instancePath:e+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Vt=Jt===jt}else var Vt=!0;if(Vt){if(_t.lt!==void 0){const Jt=jt;if(typeof _t.lt!="string")return validate86.errors=[{instancePath:e+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Vt=Jt===jt}else var Vt=!0;if(Vt)if(_t.lte!==void 0){const Jt=jt;if(typeof _t.lte!="string")return validate86.errors=[{instancePath:e+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Vt=Jt===jt}else var Vt=!0}}}}}}}}}else return validate86.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return validate86.errors=Bt,jt===0}validate86.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const precompiledValidators=Object.freeze(Object.defineProperty({__proto__:null,Authorization,AuthorizationDelegatedGrant,AuthorizationOwner,Definitions,GeneralJwk,GeneralJws,GenericSignaturePayload,JwkVerificationMethod,MessagesFilter,MessagesQuery:MessagesQuery$1,MessagesRead:MessagesRead$1,MessagesSubscribe:MessagesSubscribe$1,NumberRangeFilter,PaginationCursor,PermissionGrantData,PermissionRequestData,PermissionRevocationData,PermissionsDefinitions,PermissionsScopes,ProtocolDefinition,ProtocolRuleSet,ProtocolsConfigure:ProtocolsConfigure$1,ProtocolsQuery:ProtocolsQuery$1,PublicJwk,RecordsDelete:RecordsDelete$1,RecordsFilter,RecordsQuery:RecordsQuery$1,RecordsRead:RecordsRead$1,RecordsSubscribe:RecordsSubscribe$1,RecordsWrite:RecordsWrite$1,RecordsWriteDataEncoded,RecordsWriteSignaturePayload,RecordsWriteUnidentified,StringRangeFilter},Symbol.toStringTag,{value:"Module"}));function validateJsonSchema(_t,e){const $t=precompiledValidators[_t];if(!$t)throw new DwnError(DwnErrorCode.SchemaValidatorSchemaNotFound,`schema for ${_t} not found.`);if($t(e),!$t.errors)return;const[xt]=$t.errors;let{instancePath:At,message:kt,keyword:Bt}=xt;if(At||(At=_t),Bt==="additionalProperties"){const jt=xt.params.additionalProperty;throw new DwnError(DwnErrorCode.SchemaValidatorAdditionalPropertyNotAllowed,`${kt}: ${At}: ${jt}`)}if(Bt==="unevaluatedProperties"){const jt=xt.params.unevaluatedProperty;throw new DwnError(DwnErrorCode.SchemaValidatorUnevaluatedPropertyNotAllowed,`${kt}: ${At}: ${jt}`)}throw new DwnError(DwnErrorCode.SchemaValidatorFailure,`${At}: ${kt}`)}const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(_t){if(_t===null)return"null";if(_t===void 0)return"undefined";if(_t===!0||_t===!1)return"boolean";const e=typeof _t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(_t))return"Array";if(isBuffer$1(_t))return"Buffer";const $t=getObjectType(_t);return $t||"Object"}function isBuffer$1(_t){return _t&&_t.constructor&&_t.constructor.isBuffer&&_t.constructor.isBuffer.call(null,_t)}function getObjectType(_t){const e=Object.prototype.toString.call(_t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,$t,xt){this.major=e,this.majorEncoded=e<<5,this.name=$t,this.terminal=xt}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,$t,xt){this.type=e,this.value=$t,this.encodedLength=xt,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$3=new TextDecoder,textEncoder$5=new TextEncoder;function isBuffer(_t){return useBuffer&&globalThis.Buffer.isBuffer(_t)}function asU8A(_t){return _t instanceof Uint8Array?isBuffer(_t)?new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength):_t:Uint8Array.from(_t)}const toString$7=useBuffer?(_t,e,$t)=>$t-e>64?globalThis.Buffer.from(_t.subarray(e,$t)).toString("utf8"):utf8Slice(_t,e,$t):(_t,e,$t)=>$t-e>64?textDecoder$3.decode(_t.subarray(e,$t)):utf8Slice(_t,e,$t),fromString$2=useBuffer?_t=>_t.length>64?globalThis.Buffer.from(_t):utf8ToBytes$4(_t):_t=>_t.length>64?textEncoder$5.encode(_t):utf8ToBytes$4(_t),fromArray$1=_t=>Uint8Array.from(_t),slice=useBuffer?(_t,e,$t)=>isBuffer(_t)?new Uint8Array(_t.subarray(e,$t)):_t.slice(e,$t):(_t,e,$t)=>_t.slice(e,$t),concat$1=useBuffer?(_t,e)=>(_t=_t.map($t=>$t instanceof Uint8Array?$t:globalThis.Buffer.from($t)),asU8A(globalThis.Buffer.concat(_t,e))):(_t,e)=>{const $t=new Uint8Array(e);let xt=0;for(let At of _t)xt+At.length>$t.length&&(At=At.subarray(0,$t.length-xt)),$t.set(At,xt),xt+=At.length;return $t},alloc$2=useBuffer?_t=>globalThis.Buffer.allocUnsafe(_t):_t=>new Uint8Array(_t);function compare$1(_t,e){if(isBuffer(_t)&&isBuffer(e))return _t.compare(e);for(let $t=0;$t<_t.length;$t++)if(_t[$t]!==e[$t])return _t[$t]<e[$t]?-1:1;return 0}function utf8ToBytes$4(_t,e=1/0){let $t;const xt=_t.length;let At=null;const kt=[];for(let Bt=0;Bt<xt;++Bt){if($t=_t.charCodeAt(Bt),$t>55295&&$t<57344){if(!At){if($t>56319){(e-=3)>-1&&kt.push(239,191,189);continue}else if(Bt+1===xt){(e-=3)>-1&&kt.push(239,191,189);continue}At=$t;continue}if($t<56320){(e-=3)>-1&&kt.push(239,191,189),At=$t;continue}$t=(At-55296<<10|$t-56320)+65536}else At&&(e-=3)>-1&&kt.push(239,191,189);if(At=null,$t<128){if((e-=1)<0)break;kt.push($t)}else if($t<2048){if((e-=2)<0)break;kt.push($t>>6|192,$t&63|128)}else if($t<65536){if((e-=3)<0)break;kt.push($t>>12|224,$t>>6&63|128,$t&63|128)}else if($t<1114112){if((e-=4)<0)break;kt.push($t>>18|240,$t>>12&63|128,$t>>6&63|128,$t&63|128)}else throw new Error("Invalid code point")}return kt}function utf8Slice(_t,e,$t){const xt=[];for(;e<$t;){const At=_t[e];let kt=null,Bt=At>239?4:At>223?3:At>191?2:1;if(e+Bt<=$t){let jt,Lt,Ut,Nt;switch(Bt){case 1:At<128&&(kt=At);break;case 2:jt=_t[e+1],(jt&192)===128&&(Nt=(At&31)<<6|jt&63,Nt>127&&(kt=Nt));break;case 3:jt=_t[e+1],Lt=_t[e+2],(jt&192)===128&&(Lt&192)===128&&(Nt=(At&15)<<12|(jt&63)<<6|Lt&63,Nt>2047&&(Nt<55296||Nt>57343)&&(kt=Nt));break;case 4:jt=_t[e+1],Lt=_t[e+2],Ut=_t[e+3],(jt&192)===128&&(Lt&192)===128&&(Ut&192)===128&&(Nt=(At&15)<<18|(jt&63)<<12|(Lt&63)<<6|Ut&63,Nt>65535&&Nt<1114112&&(kt=Nt))}}kt===null?(kt=65533,Bt=1):kt>65535&&(kt-=65536,xt.push(kt>>>10&1023|55296),kt=56320|kt&1023),xt.push(kt),e+=Bt}return decodeCodePointsArray(xt)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(_t){const e=_t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,_t);let $t="",xt=0;for(;xt<e;)$t+=String.fromCharCode.apply(String,_t.slice(xt,xt+=MAX_ARGUMENTS_LENGTH));return $t}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let $t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const At=$t.length-(this.maxCursor-this.cursor)-1;$t.set(e,At)}else{if($t){const At=$t.length-(this.maxCursor-this.cursor)-1;At<$t.length&&(this.chunks[this.chunks.length-1]=$t.subarray(0,At),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?($t=alloc$2(this.chunkSize),this.chunks.push($t),this.maxCursor+=$t.length,this._initReuseChunk===null&&(this._initReuseChunk=$t),$t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let $t;if(this.chunks.length===1){const xt=this.chunks[0];e&&this.cursor>xt.length/2?($t=this.cursor===xt.length?xt:xt.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):$t=slice(xt,0,this.cursor)}else $t=concat$1(this.chunks,this.cursor);return e&&this.reset(),$t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(_t,e,$t){if(_t.length-e<$t)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(_t,e,$t){assertEnoughData(_t,e,1);const xt=_t[e];if($t.strict===!0&&xt<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return xt}function readUint16(_t,e,$t){assertEnoughData(_t,e,2);const xt=_t[e]<<8|_t[e+1];if($t.strict===!0&&xt<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return xt}function readUint32(_t,e,$t){assertEnoughData(_t,e,4);const xt=_t[e]*16777216+(_t[e+1]<<16)+(_t[e+2]<<8)+_t[e+3];if($t.strict===!0&&xt<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return xt}function readUint64(_t,e,$t){assertEnoughData(_t,e,8);const xt=_t[e]*16777216+(_t[e+1]<<16)+(_t[e+2]<<8)+_t[e+3],At=_t[e+4]*16777216+(_t[e+5]<<16)+(_t[e+6]<<8)+_t[e+7],kt=(BigInt(xt)<<BigInt(32))+BigInt(At);if($t.strict===!0&&kt<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(kt<=Number.MAX_SAFE_INTEGER)return Number(kt);if($t.allowBigInt===!0)return kt;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(_t,e,$t,xt){return new Token(Type.uint,readUint8(_t,e+1,xt),2)}function decodeUint16(_t,e,$t,xt){return new Token(Type.uint,readUint16(_t,e+1,xt),3)}function decodeUint32(_t,e,$t,xt){return new Token(Type.uint,readUint32(_t,e+1,xt),5)}function decodeUint64(_t,e,$t,xt){return new Token(Type.uint,readUint64(_t,e+1,xt),9)}function encodeUint(_t,e){return encodeUintValue(_t,0,e.value)}function encodeUintValue(_t,e,$t){if($t<uintBoundaries[0]){const xt=Number($t);_t.push([e|xt])}else if($t<uintBoundaries[1]){const xt=Number($t);_t.push([e|24,xt])}else if($t<uintBoundaries[2]){const xt=Number($t);_t.push([e|25,xt>>>8,xt&255])}else if($t<uintBoundaries[3]){const xt=Number($t);_t.push([e|26,xt>>>24&255,xt>>>16&255,xt>>>8&255,xt&255])}else{const xt=BigInt($t);if(xt<uintBoundaries[4]){const At=[e|27,0,0,0,0,0,0,0];let kt=Number(xt&BigInt(4294967295)),Bt=Number(xt>>BigInt(32)&BigInt(4294967295));At[8]=kt&255,kt=kt>>8,At[7]=kt&255,kt=kt>>8,At[6]=kt&255,kt=kt>>8,At[5]=kt&255,At[4]=Bt&255,Bt=Bt>>8,At[3]=Bt&255,Bt=Bt>>8,At[2]=Bt&255,Bt=Bt>>8,At[1]=Bt&255,_t.push(At)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,$t){return e.value<$t.value?-1:e.value>$t.value?1:0};function decodeNegint8(_t,e,$t,xt){return new Token(Type.negint,-1-readUint8(_t,e+1,xt),2)}function decodeNegint16(_t,e,$t,xt){return new Token(Type.negint,-1-readUint16(_t,e+1,xt),3)}function decodeNegint32(_t,e,$t,xt){return new Token(Type.negint,-1-readUint32(_t,e+1,xt),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(_t,e,$t,xt){const At=readUint64(_t,e+1,xt);if(typeof At!="bigint"){const kt=-1-At;if(kt>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,kt,9)}if(xt.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(At),9)}function encodeNegint(_t,e){const $t=e.value,xt=typeof $t=="bigint"?$t*neg1b-pos1b:$t*-1-1;encodeUintValue(_t,e.type.majorEncoded,xt)}encodeNegint.encodedSize=function(e){const $t=e.value,xt=typeof $t=="bigint"?$t*neg1b-pos1b:$t*-1-1;return xt<uintBoundaries[0]?1:xt<uintBoundaries[1]?2:xt<uintBoundaries[2]?3:xt<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,$t){return e.value<$t.value?1:e.value>$t.value?-1:0};function toToken$3(_t,e,$t,xt){assertEnoughData(_t,e,$t+xt);const At=slice(_t,e+$t,e+$t+xt);return new Token(Type.bytes,At,$t+xt)}function decodeBytesCompact(_t,e,$t,xt){return toToken$3(_t,e,1,$t)}function decodeBytes8(_t,e,$t,xt){return toToken$3(_t,e,2,readUint8(_t,e+1,xt))}function decodeBytes16(_t,e,$t,xt){return toToken$3(_t,e,3,readUint16(_t,e+1,xt))}function decodeBytes32(_t,e,$t,xt){return toToken$3(_t,e,5,readUint32(_t,e+1,xt))}function decodeBytes64(_t,e,$t,xt){const At=readUint64(_t,e+1,xt);if(typeof At=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(_t,e,9,At)}function tokenBytes(_t){return _t.encodedBytes===void 0&&(_t.encodedBytes=_t.type===Type.string?fromString$2(_t.value):_t.value),_t.encodedBytes}function encodeBytes(_t,e){const $t=tokenBytes(e);encodeUintValue(_t,e.type.majorEncoded,$t.length),_t.push($t)}encodeBytes.encodedSize=function(e){const $t=tokenBytes(e);return encodeUintValue.encodedSize($t.length)+$t.length};encodeBytes.compareTokens=function(e,$t){return compareBytes(tokenBytes(e),tokenBytes($t))};function compareBytes(_t,e){return _t.length<e.length?-1:_t.length>e.length?1:compare$1(_t,e)}function toToken$2(_t,e,$t,xt,At){const kt=$t+xt;assertEnoughData(_t,e,kt);const Bt=new Token(Type.string,toString$7(_t,e+$t,e+kt),kt);return At.retainStringBytes===!0&&(Bt.byteValue=slice(_t,e+$t,e+kt)),Bt}function decodeStringCompact(_t,e,$t,xt){return toToken$2(_t,e,1,$t,xt)}function decodeString8(_t,e,$t,xt){return toToken$2(_t,e,2,readUint8(_t,e+1,xt),xt)}function decodeString16(_t,e,$t,xt){return toToken$2(_t,e,3,readUint16(_t,e+1,xt),xt)}function decodeString32(_t,e,$t,xt){return toToken$2(_t,e,5,readUint32(_t,e+1,xt),xt)}function decodeString64(_t,e,$t,xt){const At=readUint64(_t,e+1,xt);if(typeof At=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(_t,e,9,At,xt)}const encodeString=encodeBytes;function toToken$1(_t,e,$t,xt){return new Token(Type.array,xt,$t)}function decodeArrayCompact(_t,e,$t,xt){return toToken$1(_t,e,1,$t)}function decodeArray8(_t,e,$t,xt){return toToken$1(_t,e,2,readUint8(_t,e+1,xt))}function decodeArray16(_t,e,$t,xt){return toToken$1(_t,e,3,readUint16(_t,e+1,xt))}function decodeArray32(_t,e,$t,xt){return toToken$1(_t,e,5,readUint32(_t,e+1,xt))}function decodeArray64(_t,e,$t,xt){const At=readUint64(_t,e+1,xt);if(typeof At=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(_t,e,9,At)}function decodeArrayIndefinite(_t,e,$t,xt){if(xt.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(_t,e,1,1/0)}function encodeArray(_t,e){encodeUintValue(_t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(_t,e,$t,xt){return new Token(Type.map,xt,$t)}function decodeMapCompact(_t,e,$t,xt){return toToken(_t,e,1,$t)}function decodeMap8(_t,e,$t,xt){return toToken(_t,e,2,readUint8(_t,e+1,xt))}function decodeMap16(_t,e,$t,xt){return toToken(_t,e,3,readUint16(_t,e+1,xt))}function decodeMap32(_t,e,$t,xt){return toToken(_t,e,5,readUint32(_t,e+1,xt))}function decodeMap64(_t,e,$t,xt){const At=readUint64(_t,e+1,xt);if(typeof At=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(_t,e,9,At)}function decodeMapIndefinite(_t,e,$t,xt){if(xt.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(_t,e,1,1/0)}function encodeMap(_t,e){encodeUintValue(_t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(_t,e,$t,xt){return new Token(Type.tag,$t,1)}function decodeTag8(_t,e,$t,xt){return new Token(Type.tag,readUint8(_t,e+1,xt),2)}function decodeTag16(_t,e,$t,xt){return new Token(Type.tag,readUint16(_t,e+1,xt),3)}function decodeTag32(_t,e,$t,xt){return new Token(Type.tag,readUint32(_t,e+1,xt),5)}function decodeTag64(_t,e,$t,xt){return new Token(Type.tag,readUint64(_t,e+1,xt),9)}function encodeTag(_t,e){encodeUintValue(_t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(_t,e,$t,xt){if(xt.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return xt.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(_t,e,$t,xt){if(xt.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(_t,e,$t){if($t){if($t.allowNaN===!1&&Number.isNaN(_t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if($t.allowInfinity===!1&&(_t===1/0||_t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,_t,e)}function decodeFloat16(_t,e,$t,xt){return createToken(readFloat16(_t,e+1),3,xt)}function decodeFloat32(_t,e,$t,xt){return createToken(readFloat32(_t,e+1),5,xt)}function decodeFloat64(_t,e,$t,xt){return createToken(readFloat64(_t,e+1),9,xt)}function encodeFloat(_t,e,$t){const xt=e.value;if(xt===!1)_t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(xt===!0)_t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(xt===null)_t.push([Type.float.majorEncoded|MINOR_NULL]);else if(xt===void 0)_t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let At,kt=!1;(!$t||$t.float64!==!0)&&(encodeFloat16(xt),At=readFloat16(ui8a,1),xt===At||Number.isNaN(xt)?(ui8a[0]=249,_t.push(ui8a.slice(0,3)),kt=!0):(encodeFloat32(xt),At=readFloat32(ui8a,1),xt===At&&(ui8a[0]=250,_t.push(ui8a.slice(0,5)),kt=!0))),kt||(encodeFloat64(xt),At=readFloat64(ui8a,1),ui8a[0]=251,_t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,$t){const xt=e.value;if(xt===!1||xt===!0||xt===null||xt===void 0)return 1;if(!$t||$t.float64!==!0){encodeFloat16(xt);let At=readFloat16(ui8a,1);if(xt===At||Number.isNaN(xt))return 3;if(encodeFloat32(xt),At=readFloat32(ui8a,1),xt===At)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(_t){if(_t===1/0)dataView.setUint16(0,31744,!1);else if(_t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(_t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,_t);const e=dataView.getUint32(0),$t=(e&2139095040)>>23,xt=e&8388607;if($t===255)dataView.setUint16(0,31744,!1);else if($t===0)dataView.setUint16(0,(_t&2147483648)>>16|xt>>13,!1);else{const At=$t-127;At<-24?dataView.setUint16(0,0):At<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+At,!1):dataView.setUint16(0,(e&2147483648)>>16|At+15<<10|xt>>13,!1)}}}function readFloat16(_t,e){if(_t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const $t=(_t[e]<<8)+_t[e+1];if($t===31744)return 1/0;if($t===64512)return-1/0;if($t===32256)return NaN;const xt=$t>>10&31,At=$t&1023;let kt;return xt===0?kt=At*2**-24:xt!==31?kt=(At+1024)*2**(xt-25):kt=At===0?1/0:NaN,$t&32768?-kt:kt}function encodeFloat32(_t){dataView.setFloat32(0,_t,!1)}function readFloat32(_t,e){if(_t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const $t=(_t.byteOffset||0)+e;return new DataView(_t.buffer,$t,4).getFloat32(0,!1)}function encodeFloat64(_t){dataView.setFloat64(0,_t,!1)}function readFloat64(_t,e){if(_t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const $t=(_t.byteOffset||0)+e;return new DataView(_t.buffer,$t,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(_t,e,$t){throw new Error(`${decodeErrPrefix} encountered invalid minor (${$t}) for major ${_t[e]>>>5}`)}function errorer(_t){return()=>{throw new Error(`${decodeErrPrefix} ${_t}`)}}const jump=[];for(let _t=0;_t<=23;_t++)jump[_t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let _t=32;_t<=55;_t++)jump[_t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let _t=64;_t<=87;_t++)jump[_t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let _t=96;_t<=119;_t++)jump[_t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let _t=128;_t<=151;_t++)jump[_t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let _t=160;_t<=183;_t++)jump[_t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let _t=192;_t<=215;_t++)jump[_t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let _t=224;_t<=243;_t++)jump[_t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let _t=0;_t<24;_t++)quick[_t]=new Token(Type.uint,_t,1);for(let _t=-1;_t>=-24;_t--)quick[31-_t]=new Token(Type.negint,_t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(_t){switch(_t.type){case Type.false:return fromArray$1([244]);case Type.true:return fromArray$1([245]);case Type.null:return fromArray$1([246]);case Type.bytes:return _t.value.length?void 0:fromArray$1([64]);case Type.string:return _t.value===""?fromArray$1([96]):void 0;case Type.array:return _t.value===0?fromArray$1([128]):void 0;case Type.map:return _t.value===0?fromArray$1([160]):void 0;case Type.uint:return _t.value<24?fromArray$1([Number(_t.value)]):void 0;case Type.negint:if(_t.value>=-24)return fromArray$1([31-Number(_t.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const _t=[];return _t[Type.uint.major]=encodeUint,_t[Type.negint.major]=encodeNegint,_t[Type.bytes.major]=encodeBytes,_t[Type.string.major]=encodeString,_t[Type.array.major]=encodeArray,_t[Type.map.major]=encodeMap,_t[Type.tag.major]=encodeTag,_t[Type.float.major]=encodeFloat,_t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,$t){this.obj=e,this.parent=$t}includes(e){let $t=this;do if($t.obj===e)return!0;while($t=$t.parent);return!1}static createCheck(e,$t){if(e&&e.includes($t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref($t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(_t,e,$t,xt){return!Number.isInteger(_t)||!Number.isSafeInteger(_t)?new Token(Type.float,_t):_t>=0?new Token(Type.uint,_t):new Token(Type.negint,_t)},bigint(_t,e,$t,xt){return _t>=BigInt(0)?new Token(Type.uint,_t):new Token(Type.negint,_t)},Uint8Array(_t,e,$t,xt){return new Token(Type.bytes,_t)},string(_t,e,$t,xt){return new Token(Type.string,_t)},boolean(_t,e,$t,xt){return _t?simpleTokens.true:simpleTokens.false},null(_t,e,$t,xt){return simpleTokens.null},undefined(_t,e,$t,xt){return simpleTokens.undefined},ArrayBuffer(_t,e,$t,xt){return new Token(Type.bytes,new Uint8Array(_t))},DataView(_t,e,$t,xt){return new Token(Type.bytes,new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength))},Array(_t,e,$t,xt){if(!_t.length)return $t.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;xt=Ref.createCheck(xt,_t);const At=[];let kt=0;for(const Bt of _t)At[kt++]=objectToTokens(Bt,$t,xt);return $t.addBreakTokens?[new Token(Type.array,_t.length),At,new Token(Type.break)]:[new Token(Type.array,_t.length),At]},Object(_t,e,$t,xt){const At=e!=="Object",kt=At?_t.keys():Object.keys(_t),Bt=At?_t.size:kt.length;if(!Bt)return $t.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;xt=Ref.createCheck(xt,_t);const jt=[];let Lt=0;for(const Ut of kt)jt[Lt++]=[objectToTokens(Ut,$t,xt),objectToTokens(At?_t.get(Ut):_t[Ut],$t,xt)];return sortMapEntries(jt,$t),$t.addBreakTokens?[new Token(Type.map,Bt),jt,new Token(Type.break)]:[new Token(Type.map,Bt),jt]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const _t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${_t}Array`]=typeEncoders.DataView;function objectToTokens(_t,e={},$t){const xt=is(_t),At=e&&e.typeEncoders&&e.typeEncoders[xt]||typeEncoders[xt];if(typeof At=="function"){const Bt=At(_t,xt,e,$t);if(Bt!=null)return Bt}const kt=typeEncoders[xt];if(!kt)throw new Error(`${encodeErrPrefix} unsupported type: ${xt}`);return kt(_t,xt,e,$t)}function sortMapEntries(_t,e){e.mapSorter&&_t.sort(e.mapSorter)}function mapSorter(_t,e){const $t=Array.isArray(_t[0])?_t[0][0]:_t[0],xt=Array.isArray(e[0])?e[0][0]:e[0];if($t.type!==xt.type)return $t.type.compare(xt.type);const At=$t.type.major,kt=cborEncoders[At].compareTokens($t,xt);return kt===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),kt}function tokensToEncoded(_t,e,$t,xt){if(Array.isArray(e))for(const At of e)tokensToEncoded(_t,At,$t,xt);else $t[e.type.major](_t,e,xt)}function encodeCustom(_t,e,$t){const xt=objectToTokens(_t,$t);if(!Array.isArray(xt)&&$t.quickEncodeToken){const At=$t.quickEncodeToken(xt);if(At)return At;const kt=e[xt.type.major];if(kt.encodedSize){const Bt=kt.encodedSize(xt,$t),jt=new Bl(Bt);if(kt(jt,xt,$t),jt.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${xt} was wrong`);return asU8A(jt.chunks[0])}}return buf.reset(),tokensToEncoded(buf,xt,e,$t),buf.toBytes(!0)}function encode$c(_t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(_t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,$t={}){this.pos=0,this.data=e,this.options=$t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let $t=quick[e];if($t===void 0){const xt=jump[e];if(!xt)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const At=e&31;$t=xt(this.data,this.pos,At,this.options)}return this.pos+=$t.encodedLength,$t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(_t,e,$t){const xt=[];for(let At=0;At<_t.value;At++){const kt=tokensToObject(e,$t);if(kt===BREAK){if(_t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(kt===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${At}, expected ${_t.value})`);xt[At]=kt}return xt}function tokenToMap(_t,e,$t){const xt=$t.useMaps===!0,At=xt?void 0:{},kt=xt?new Map:void 0;for(let Bt=0;Bt<_t.value;Bt++){const jt=tokensToObject(e,$t);if(jt===BREAK){if(_t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(jt===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${Bt} [no key], expected ${_t.value})`);if(xt!==!0&&typeof jt!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof jt})`);if($t.rejectDuplicateMapKeys===!0&&(xt&&kt.has(jt)||!xt&&jt in At))throw new Error(`${decodeErrPrefix} found repeat map key "${jt}"`);const Lt=tokensToObject(e,$t);if(Lt===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${Bt} [no value], expected ${_t.value})`);xt?kt.set(jt,Lt):At[jt]=Lt}return xt?kt:At}function tokensToObject(_t,e){if(_t.done())return DONE;const $t=_t.next();if($t.type===Type.break)return BREAK;if($t.type.terminal)return $t.value;if($t.type===Type.array)return tokenToArray($t,_t,e);if($t.type===Type.map)return tokenToMap($t,_t,e);if($t.type===Type.tag){if(e.tags&&typeof e.tags[$t.value]=="function"){const xt=tokensToObject(_t,e);return e.tags[$t.value](xt)}throw new Error(`${decodeErrPrefix} tag not supported (${$t.value})`)}throw new Error("unsupported")}function decode$f(_t,e){if(!(_t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const $t=e.tokenizer||new Tokeniser(_t,e),xt=tokensToObject($t,e);if(xt===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(xt===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!$t.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return xt}function base$3(_t,e){if(_t.length>=255)throw new TypeError("Alphabet too long");for(var $t=new Uint8Array(256),xt=0;xt<$t.length;xt++)$t[xt]=255;for(var At=0;At<_t.length;At++){var kt=_t.charAt(At),Bt=kt.charCodeAt(0);if($t[Bt]!==255)throw new TypeError(kt+" is ambiguous");$t[Bt]=At}var jt=_t.length,Lt=_t.charAt(0),Ut=Math.log(jt)/Math.log(256),Nt=Math.log(256)/Math.log(jt);function qt(Vt){if(Vt instanceof Uint8Array||(ArrayBuffer.isView(Vt)?Vt=new Uint8Array(Vt.buffer,Vt.byteOffset,Vt.byteLength):Array.isArray(Vt)&&(Vt=Uint8Array.from(Vt))),!(Vt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Vt.length===0)return"";for(var Ht=0,Jt=0,rr=0,Qt=Vt.length;rr!==Qt&&Vt[rr]===0;)rr++,Ht++;for(var Wt=(Qt-rr)*Nt+1>>>0,nr=new Uint8Array(Wt);rr!==Qt;){for(var yr=Vt[rr],vr=0,Ir=Wt-1;(yr!==0||vr<Jt)&&Ir!==-1;Ir--,vr++)yr+=256*nr[Ir]>>>0,nr[Ir]=yr%jt>>>0,yr=yr/jt>>>0;if(yr!==0)throw new Error("Non-zero carry");Jt=vr,rr++}for(var xr=Wt-Jt;xr!==Wt&&nr[xr]===0;)xr++;for(var Or=Lt.repeat(Ht);xr<Wt;++xr)Or+=_t.charAt(nr[xr]);return Or}function Kt(Vt){if(typeof Vt!="string")throw new TypeError("Expected String");if(Vt.length===0)return new Uint8Array;var Ht=0;if(Vt[Ht]!==" "){for(var Jt=0,rr=0;Vt[Ht]===Lt;)Jt++,Ht++;for(var Qt=(Vt.length-Ht)*Ut+1>>>0,Wt=new Uint8Array(Qt);Vt[Ht];){var nr=$t[Vt.charCodeAt(Ht)];if(nr===255)return;for(var yr=0,vr=Qt-1;(nr!==0||yr<rr)&&vr!==-1;vr--,yr++)nr+=jt*Wt[vr]>>>0,Wt[vr]=nr%256>>>0,nr=nr/256>>>0;if(nr!==0)throw new Error("Non-zero carry");rr=yr,Ht++}if(Vt[Ht]!==" "){for(var Ir=Qt-rr;Ir!==Qt&&Wt[Ir]===0;)Ir++;for(var xr=new Uint8Array(Jt+(Qt-Ir)),Or=Jt;Ir!==Qt;)xr[Or++]=Wt[Ir++];return xr}}}function zt(Vt){var Ht=Kt(Vt);if(Ht)return Ht;throw new Error(`Non-${e} character`)}return{encode:qt,decodeUnsafe:Kt,decode:zt}}var src$1=base$3,_brrp__multiformats_scope_baseX$1=src$1;const equals$1=(_t,e)=>{if(_t===e)return!0;if(_t.byteLength!==e.byteLength)return!1;for(let $t=0;$t<_t.byteLength;$t++)if(_t[$t]!==e[$t])return!1;return!0},coerce$1=_t=>{if(_t instanceof Uint8Array&&_t.constructor.name==="Uint8Array")return _t;if(_t instanceof ArrayBuffer)return new Uint8Array(_t);if(ArrayBuffer.isView(_t))return new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$1=_t=>new TextEncoder().encode(_t),toString$6=_t=>new TextDecoder().decode(_t);let Encoder$2=class{constructor(e,$t,xt){this.name=e,this.prefix=$t,this.baseEncode=xt}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(e,$t,xt){if(this.name=e,this.prefix=$t,$t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$t.codePointAt(0),this.baseDecode=xt}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}},ComposedDecoder$1=class{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const $t=e[0],xt=this.decoders[$t];if(xt)return xt.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(_t,e)=>new ComposedDecoder$1({..._t.decoders||{[_t.prefix]:_t},...e.decoders||{[e.prefix]:e}});let Codec$1=class{constructor(e,$t,xt,At){this.name=e,this.prefix=$t,this.baseEncode=xt,this.baseDecode=At,this.encoder=new Encoder$2(e,$t,xt),this.decoder=new Decoder$1(e,$t,At)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$6=({name:_t,prefix:e,encode:$t,decode:xt})=>new Codec$1(_t,e,$t,xt),baseX$1=({prefix:_t,name:e,alphabet:$t})=>{const{encode:xt,decode:At}=_brrp__multiformats_scope_baseX$1($t,e);return from$6({prefix:_t,name:e,encode:xt,decode:kt=>coerce$1(At(kt))})},decode$e=(_t,e,$t,xt)=>{const At={};for(let Nt=0;Nt<e.length;++Nt)At[e[Nt]]=Nt;let kt=_t.length;for(;_t[kt-1]==="=";)--kt;const Bt=new Uint8Array(kt*$t/8|0);let jt=0,Lt=0,Ut=0;for(let Nt=0;Nt<kt;++Nt){const qt=At[_t[Nt]];if(qt===void 0)throw new SyntaxError(`Non-${xt} character`);Lt=Lt<<$t|qt,jt+=$t,jt>=8&&(jt-=8,Bt[Ut++]=255&Lt>>jt)}if(jt>=$t||255&Lt<<8-jt)throw new SyntaxError("Unexpected end of data");return Bt},encode$b=(_t,e,$t)=>{const xt=e[e.length-1]==="=",At=(1<<$t)-1;let kt="",Bt=0,jt=0;for(let Lt=0;Lt<_t.length;++Lt)for(jt=jt<<8|_t[Lt],Bt+=8;Bt>$t;)Bt-=$t,kt+=e[At&jt>>Bt];if(Bt&&(kt+=e[At&jt<<$t-Bt]),xt)for(;kt.length*$t&7;)kt+="=";return kt},rfc4648$1=({name:_t,prefix:e,bitsPerChar:$t,alphabet:xt})=>from$6({prefix:e,name:_t,encode(At){return encode$b(At,xt,$t)},decode(At){return decode$e(At,xt,$t,_t)}}),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"}));var encode_1$1=encode$a,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$a(_t,e,$t){e=e||[],$t=$t||0;for(var xt=$t;_t>=INT$1;)e[$t++]=_t&255|MSB$3,_t/=128;for(;_t&MSBALL$1;)e[$t++]=_t&255|MSB$3,_t>>>=7;return e[$t]=_t|0,encode$a.bytes=$t-xt+1,e}var decode$d=read$2,MSB$1$1=128,REST$1$1=127;function read$2(_t,xt){var $t=0,xt=xt||0,At=0,kt=xt,Bt,jt=_t.length;do{if(kt>=jt)throw read$2.bytes=0,new RangeError("Could not decode varint");Bt=_t[kt++],$t+=At<28?(Bt&REST$1$1)<<At:(Bt&REST$1$1)*Math.pow(2,At),At+=7}while(Bt>=MSB$1$1);return read$2.bytes=kt-xt,$t}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$2=function(_t){return _t<N1$2?1:_t<N2$2?2:_t<N3$2?3:_t<N4$2?4:_t<N5$2?5:_t<N6$2?6:_t<N7$2?7:_t<N8$1?8:_t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$d,encodingLength:length$2},_brrp_varint$1=varint$1;const decode$c=(_t,e=0)=>[_brrp_varint$1.decode(_t,e),_brrp_varint$1.decode.bytes],encodeTo$1=(_t,e,$t=0)=>(_brrp_varint$1.encode(_t,e,$t),e),encodingLength$6=_t=>_brrp_varint$1.encodingLength(_t),create=(_t,e)=>{const $t=e.byteLength,xt=encodingLength$6(_t),At=xt+encodingLength$6($t),kt=new Uint8Array(At+$t);return encodeTo$1(_t,kt,0),encodeTo$1($t,kt,xt),kt.set(e,At),new Digest(_t,$t,e,kt)},decode$b=_t=>{const e=coerce$1(_t),[$t,xt]=decode$c(e),[At,kt]=decode$c(e.subarray(xt)),Bt=e.subarray(xt+kt);if(Bt.byteLength!==At)throw new Error("Incorrect length");return new Digest($t,At,Bt,e)},equals=(_t,e)=>{if(_t===e)return!0;{const $t=e;return _t.code===$t.code&&_t.size===$t.size&&$t.bytes instanceof Uint8Array&&equals$1(_t.bytes,$t.bytes)}};class Digest{constructor(e,$t,xt,At){this.code=e,this.size=$t,this.digest=xt,this.bytes=At}}const format$7=(_t,e)=>{const{bytes:$t,version:xt}=_t;switch(xt){case 0:return toStringV0$1($t,baseCache$1(_t),e||base58btc$1.encoder);default:return toStringV1$1($t,baseCache$1(_t),e||base32$1.encoder)}},cache$2=new WeakMap,baseCache$1=_t=>{const e=cache$2.get(_t);if(e==null){const $t=new Map;return cache$2.set(_t,$t),$t}return e};let CID$1=class Jn{constructor(e,$t,xt,At){this.code=$t,this.version=e,this.multihash=xt,this.bytes=At,this["/"]=At}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:$t}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if($t.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Jn.createV0($t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:$t}=this.multihash,xt=create(e,$t);return Jn.createV1(this.code,xt)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Jn.equals(this,e)}static equals(e,$t){const xt=$t;return xt&&e.code===xt.code&&e.version===xt.version&&equals(e.multihash,xt.multihash)}toString(e){return format$7(this,e)}toJSON(){return{"/":format$7(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const $t=e;if($t instanceof Jn)return $t;if($t["/"]!=null&&$t["/"]===$t.bytes||$t.asCID===$t){const{version:xt,code:At,multihash:kt,bytes:Bt}=$t;return new Jn(xt,At,kt,Bt||encodeCID$1(xt,At,kt.bytes))}else if($t[cidSymbol$1]===!0){const{version:xt,multihash:At,code:kt}=$t,Bt=decode$b(At);return Jn.create(xt,kt,Bt)}else return null}static create(e,$t,xt){if(typeof $t!="number")throw new Error("String codecs are no longer supported");if(!(xt.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if($t!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new Jn(e,$t,xt,xt.bytes)}case 1:{const At=encodeCID$1(e,$t,xt.bytes);return new Jn(e,$t,xt,At)}default:throw new Error("Invalid version")}}static createV0(e){return Jn.create(0,DAG_PB_CODE$1,e)}static createV1(e,$t){return Jn.create(1,e,$t)}static decode(e){const[$t,xt]=Jn.decodeFirst(e);if(xt.length)throw new Error("Incorrect length");return $t}static decodeFirst(e){const $t=Jn.inspectBytes(e),xt=$t.size-$t.multihashSize,At=coerce$1(e.subarray(xt,xt+$t.multihashSize));if(At.byteLength!==$t.multihashSize)throw new Error("Incorrect length");const kt=At.subarray($t.multihashSize-$t.digestSize),Bt=new Digest($t.multihashCode,$t.digestSize,kt,At);return[$t.version===0?Jn.createV0(Bt):Jn.createV1($t.codec,Bt),e.subarray($t.size)]}static inspectBytes(e){let $t=0;const xt=()=>{const[qt,Kt]=decode$c(e.subarray($t));return $t+=Kt,qt};let At=xt(),kt=DAG_PB_CODE$1;if(At===18?(At=0,$t=0):kt=xt(),At!==0&&At!==1)throw new RangeError(`Invalid CID version ${At}`);const Bt=$t,jt=xt(),Lt=xt(),Ut=$t+Lt,Nt=Ut-Bt;return{version:At,codec:kt,multihashCode:jt,digestSize:Lt,multihashSize:Nt,size:Ut}}static parse(e,$t){const[xt,At]=parseCIDtoBytes$1(e,$t),kt=Jn.decode(At);if(kt.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(kt).set(xt,e),kt}};const parseCIDtoBytes$1=(_t,e)=>{switch(_t[0]){case"Q":{const $t=e||base58btc$1;return[base58btc$1.prefix,$t.decode(`${base58btc$1.prefix}${_t}`)]}case base58btc$1.prefix:{const $t=e||base58btc$1;return[base58btc$1.prefix,$t.decode(_t)]}case base32$1.prefix:{const $t=e||base32$1;return[base32$1.prefix,$t.decode(_t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[_t[0],e.decode(_t)]}}},toStringV0$1=(_t,e,$t)=>{const{prefix:xt}=$t;if(xt!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${$t.name} encoding`);const At=e.get(xt);if(At==null){const kt=$t.encode(_t).slice(1);return e.set(xt,kt),kt}else return At},toStringV1$1=(_t,e,$t)=>{const{prefix:xt}=$t,At=e.get(xt);if(At==null){const kt=$t.encode(_t);return e.set(xt,kt),kt}else return At},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(_t,e,$t)=>{const xt=encodingLength$6(_t),At=xt+encodingLength$6(e),kt=new Uint8Array(At+$t.byteLength);return encodeTo$1(_t,kt,0),encodeTo$1(e,kt,xt),kt.set($t,At),kt},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function cidEncoder(_t){if(_t.asCID!==_t&&_t["/"]!==_t.bytes)return null;const e=CID$1.asCID(_t);if(!e)return null;const $t=new Uint8Array(e.bytes.byteLength+1);return $t.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,$t)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(_t){if(Number.isNaN(_t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(_t===1/0||_t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(_t){if(_t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(_t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name$4="dag-cbor",code$4=113,encode$9=_t=>encode$c(_t,encodeOptions),decode$a=_t=>decode$f(_t,decodeOptions),cbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$4,decode:decode$a,encode:encode$9,name:name$4},Symbol.toStringTag,{value:"Module"})),base58btc=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const base32z=rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),format$6=(_t,e)=>{const{bytes:$t,version:xt}=_t;switch(xt){case 0:return toStringV0($t,baseCache(_t),e||base58btc.encoder);default:return toStringV1($t,baseCache(_t),e||base32.encoder)}},cache$1=new WeakMap,baseCache=_t=>{const e=cache$1.get(_t);if(e==null){const $t=new Map;return cache$1.set(_t,$t),$t}return e};class CID{constructor(e,$t,xt,At){this.code=$t,this.version=e,this.multihash=xt,this.bytes=At,this["/"]=At}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:$t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if($t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0($t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:$t}=this.multihash,xt=create$2(e,$t);return CID.createV1(this.code,xt)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,$t){const xt=$t;return xt&&e.code===xt.code&&e.version===xt.version&&equals$5(e.multihash,xt.multihash)}toString(e){return format$6(this,e)}toJSON(){return{"/":format$6(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const $t=e;if($t instanceof CID)return $t;if($t["/"]!=null&&$t["/"]===$t.bytes||$t.asCID===$t){const{version:xt,code:At,multihash:kt,bytes:Bt}=$t;return new CID(xt,At,kt,Bt||encodeCID(xt,At,kt.bytes))}else if($t[cidSymbol]===!0){const{version:xt,multihash:At,code:kt}=$t,Bt=decode$l(At);return CID.create(xt,kt,Bt)}else return null}static create(e,$t,xt){if(typeof $t!="number")throw new Error("String codecs are no longer supported");if(!(xt.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if($t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,$t,xt,xt.bytes)}case 1:{const At=encodeCID(e,$t,xt.bytes);return new CID(e,$t,xt,At)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,$t){return CID.create(1,e,$t)}static decode(e){const[$t,xt]=CID.decodeFirst(e);if(xt.length)throw new Error("Incorrect length");return $t}static decodeFirst(e){const $t=CID.inspectBytes(e),xt=$t.size-$t.multihashSize,At=coerce$3(e.subarray(xt,xt+$t.multihashSize));if(At.byteLength!==$t.multihashSize)throw new Error("Incorrect length");const kt=At.subarray($t.multihashSize-$t.digestSize),Bt=new Digest$2($t.multihashCode,$t.digestSize,kt,At);return[$t.version===0?CID.createV0(Bt):CID.createV1($t.codec,Bt),e.subarray($t.size)]}static inspectBytes(e){let $t=0;const xt=()=>{const[qt,Kt]=decode$m(e.subarray($t));return $t+=Kt,qt};let At=xt(),kt=DAG_PB_CODE;if(At===18?(At=0,$t=0):kt=xt(),At!==0&&At!==1)throw new RangeError(`Invalid CID version ${At}`);const Bt=$t,jt=xt(),Lt=xt(),Ut=$t+Lt,Nt=Ut-Bt;return{version:At,codec:kt,multihashCode:jt,digestSize:Lt,multihashSize:Nt,size:Ut}}static parse(e,$t){const[xt,At]=parseCIDtoBytes(e,$t),kt=CID.decode(At);if(kt.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(kt).set(xt,e),kt}}const parseCIDtoBytes=(_t,e)=>{switch(_t[0]){case"Q":{const $t=e||base58btc;return[base58btc.prefix,$t.decode(`${base58btc.prefix}${_t}`)]}case base58btc.prefix:{const $t=e||base58btc;return[base58btc.prefix,$t.decode(_t)]}case base32.prefix:{const $t=e||base32;return[base32.prefix,$t.decode(_t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[_t[0],e.decode(_t)]}}},toStringV0=(_t,e,$t)=>{const{prefix:xt}=$t;if(xt!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${$t.name} encoding`);const At=e.get(xt);if(At==null){const kt=$t.encode(_t).slice(1);return e.set(xt,kt),kt}else return At},toStringV1=(_t,e,$t)=>{const{prefix:xt}=$t,At=e.get(xt);if(At==null){const kt=$t.encode(_t);return e.set(xt,kt),kt}else return At},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(_t,e,$t)=>{const xt=encodingLength$8(_t),At=xt+encodingLength$8(e),kt=new Uint8Array(At+$t.byteLength);return encodeTo$3(_t,kt,0),encodeTo$3(e,kt,xt),kt.set($t,At),kt},cidSymbol=Symbol.for("@ipld/js-cid/CID");var __awaiter$L=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__asyncValues$2=function(_t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=_t[Symbol.asyncIterator],$t;return e?e.call(_t):(_t=typeof __values=="function"?__values(_t):_t[Symbol.iterator](),$t={},xt("next"),xt("throw"),xt("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function xt(kt){$t[kt]=_t[kt]&&function(Bt){return new Promise(function(jt,Lt){Bt=_t[kt](Bt),At(jt,Lt,Bt.done,Bt.value)})}}function At(kt,Bt,jt,Lt){Promise.resolve(Lt).then(function(Ut){kt({value:Ut,done:jt})},Bt)}},__await$5=function(_t){return this instanceof __await$5?(this.v=_t,this):new __await$5(_t)},__asyncGenerator=function(_t,e,$t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt=$t.apply(_t,e||[]),At,kt=[];return At={},Bt("next"),Bt("throw"),Bt("return"),At[Symbol.asyncIterator]=function(){return this},At;function Bt(Kt){xt[Kt]&&(At[Kt]=function(zt){return new Promise(function(Vt,Ht){kt.push([Kt,zt,Vt,Ht])>1||jt(Kt,zt)})})}function jt(Kt,zt){try{Lt(xt[Kt](zt))}catch(Vt){qt(kt[0][3],Vt)}}function Lt(Kt){Kt.value instanceof __await$5?Promise.resolve(Kt.value.v).then(Ut,Nt):qt(kt[0][2],Kt)}function Ut(Kt){jt("next",Kt)}function Nt(Kt){jt("throw",Kt)}function qt(Kt,zt){Kt(zt),kt.shift(),kt.length&&jt(kt[0][0],kt[0][1])}};class BlockstoreMock{open(){return __awaiter$L(this,void 0,void 0,function*(){})}close(){return __awaiter$L(this,void 0,void 0,function*(){})}put(e,$t,xt){return __awaiter$L(this,void 0,void 0,function*(){return e})}get(e,$t){return __awaiter$L(this,void 0,void 0,function*(){return new Uint8Array})}has(e,$t){return __awaiter$L(this,void 0,void 0,function*(){return!1})}delete(e,$t){return __awaiter$L(this,void 0,void 0,function*(){})}isEmpty(e){return __awaiter$L(this,void 0,void 0,function*(){return!0})}putMany(e,$t){return __asyncGenerator(this,arguments,function*(){var At,kt,Bt,jt;try{for(var Lt=!0,Ut=__asyncValues$2(e),Nt;Nt=yield __await$5(Ut.next()),At=Nt.done,!At;Lt=!0){jt=Nt.value,Lt=!1;const qt=jt;yield __await$5(this.put(qt.cid,qt.block,$t)),yield yield __await$5(qt.cid)}}catch(qt){kt={error:qt}}finally{try{!Lt&&!At&&(Bt=Ut.return)&&(yield __await$5(Bt.call(Ut)))}finally{if(kt)throw kt.error}}})}getMany(e,$t){return __asyncGenerator(this,arguments,function*(){var At,kt,Bt,jt;try{for(var Lt=!0,Ut=__asyncValues$2(e),Nt;Nt=yield __await$5(Ut.next()),At=Nt.done,!At;Lt=!0){jt=Nt.value,Lt=!1;const qt=jt;yield yield __await$5({cid:qt,block:yield __await$5(this.get(qt,$t))})}}catch(qt){kt={error:qt}}finally{try{!Lt&&!At&&(Bt=Ut.return)&&(yield __await$5(Bt.call(Ut)))}finally{if(kt)throw kt.error}}})}getAll(e){return __asyncGenerator(this,arguments,function*(){var xt,At,kt,Bt;const jt=this.db.iterator({keys:!0,keyEncoding:"buffer"},e);try{for(var Lt=!0,Ut=__asyncValues$2(jt),Nt;Nt=yield __await$5(Ut.next()),xt=Nt.done,!xt;Lt=!0){Bt=Nt.value,Lt=!1;const[qt,Kt]=Bt;yield yield __await$5({cid:CID.decode(qt),block:Kt})}}catch(qt){At={error:qt}}finally{try{!Lt&&!xt&&(kt=Ut.return)&&(yield __await$5(kt.call(Ut)))}finally{if(At)throw At.error}}})}deleteMany(e,$t){return __asyncGenerator(this,arguments,function*(){var At,kt,Bt,jt;try{for(var Lt=!0,Ut=__asyncValues$2(e),Nt;Nt=yield __await$5(Ut.next()),At=Nt.done,!At;Lt=!0){jt=Nt.value,Lt=!1;const qt=jt;yield __await$5(this.delete(qt,$t)),yield yield __await$5(qt)}}catch(qt){kt={error:qt}}finally{try{!Lt&&!At&&(Bt=Ut.return)&&(yield __await$5(Bt.call(Ut)))}finally{if(kt)throw kt.error}}})}clear(){return __awaiter$L(this,void 0,void 0,function*(){})}}function assign(_t,e){for(const $t in e)Object.defineProperty(_t,$t,{value:e[$t],enumerable:!0,configurable:!0});return _t}function createError(_t,e,$t){if(!_t||typeof _t=="string")throw new TypeError("Please pass an Error to err-code");$t||($t={}),typeof e=="object"&&($t=e,e=""),e&&($t.code=e);try{return assign(_t,$t)}catch{$t.message=_t.message,$t.stack=_t.stack;const At=function(){};return At.prototype=Object.create(Object.getPrototypeOf(_t)),assign(new At,$t)}}var errCode=createError;const errCode$1=getDefaultExportFromCjs(errCode);function isAsyncIterable$2(_t){return _t[Symbol.asyncIterator]!=null}function batch(_t,e=1){return e=Number(e),isAsyncIterable$2(_t)?async function*(){let $t=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(const xt of _t)for($t.push(xt);$t.length>=e;)yield $t.slice(0,e),$t=$t.slice(e);for(;$t.length>0;)yield $t.slice(0,e),$t=$t.slice(e)}():function*(){let $t=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(const xt of _t)for($t.push(xt);$t.length>=e;)yield $t.slice(0,e),$t=$t.slice(e);for(;$t.length>0;)yield $t.slice(0,e),$t=$t.slice(e)}()}async function*parallelBatch(_t,e=1){for await(const $t of batch(_t,e)){const xt=$t.map(async At=>At().then(kt=>({ok:!0,value:kt}),kt=>({ok:!1,err:kt})));for(let At=0;At<xt.length;At++){const kt=await xt[At];if(kt.ok)yield kt.value;else throw kt.err}}}const symbol=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(_t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let $t=0;for(const xt of _t){const At=$t+xt.byteLength;if(e<At)return{buf:xt,index:e-$t};$t=At}throw new RangeError("index is out of bounds")}function isUint8ArrayList(_t){return!!(_t!=null&&_t[symbol])}var yi;class Uint8ArrayList{constructor(...e){dn(this,"bufs");dn(this,"length");dn(this,yi,!0);this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[(yi=symbol,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let $t=0;for(const xt of e)if(xt instanceof Uint8Array)$t+=xt.byteLength,this.bufs.push(xt);else if(isUint8ArrayList(xt))$t+=xt.byteLength,this.bufs.push(...xt.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=$t}prepend(...e){this.prependAll(e)}prependAll(e){let $t=0;for(const xt of e.reverse())if(xt instanceof Uint8Array)$t+=xt.byteLength,this.bufs.unshift(xt);else if(isUint8ArrayList(xt))$t+=xt.byteLength,this.bufs.unshift(...xt.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=$t}get(e){const $t=findBufAndOffset(this.bufs,e);return $t.buf[$t.index]}set(e,$t){const xt=findBufAndOffset(this.bufs,e);xt.buf[xt.index]=$t}write(e,$t=0){if(e instanceof Uint8Array)for(let xt=0;xt<e.length;xt++)this.set($t+xt,e[xt]);else if(isUint8ArrayList(e))for(let xt=0;xt<e.length;xt++)this.set($t+xt,e.get(xt));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,$t){const{bufs:xt,length:At}=this._subList(e,$t);return concat$2(xt,At)}subarray(e,$t){const{bufs:xt,length:At}=this._subList(e,$t);return xt.length===1?xt[0]:concat$2(xt,At)}sublist(e,$t){const{bufs:xt,length:At}=this._subList(e,$t),kt=new Uint8ArrayList;return kt.length=At,kt.bufs=[...xt],kt}_subList(e,$t){if(e=e??0,$t=$t??this.length,e<0&&(e=this.length+e),$t<0&&($t=this.length+$t),e<0||$t>this.length)throw new RangeError("index is out of bounds");if(e===$t)return{bufs:[],length:0};if(e===0&&$t===this.length)return{bufs:this.bufs,length:this.length};const xt=[];let At=0;for(let kt=0;kt<this.bufs.length;kt++){const Bt=this.bufs[kt],jt=At,Lt=jt+Bt.byteLength;if(At=Lt,e>=Lt)continue;const Ut=e>=jt&&e<Lt,Nt=$t>jt&&$t<=Lt;if(Ut&&Nt){if(e===jt&&$t===Lt){xt.push(Bt);break}const qt=e-jt;xt.push(Bt.subarray(qt,qt+($t-e)));break}if(Ut){if(e===0){xt.push(Bt);continue}xt.push(Bt.subarray(e-jt));continue}if(Nt){if($t===Lt){xt.push(Bt);break}xt.push(Bt.subarray(0,$t-jt));break}xt.push(Bt)}return{bufs:xt,length:$t-e}}indexOf(e,$t=0){if(!isUint8ArrayList(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const xt=e instanceof Uint8Array?e:e.subarray();if($t=Number($t??0),isNaN($t)&&($t=0),$t<0&&($t=this.length+$t),$t<0&&($t=0),e.length===0)return $t>this.length?this.length:$t;const At=xt.byteLength;if(At===0)throw new TypeError("search must be at least 1 byte long");const kt=256,Bt=new Int32Array(kt);for(let qt=0;qt<kt;qt++)Bt[qt]=-1;for(let qt=0;qt<At;qt++)Bt[xt[qt]]=qt;const jt=Bt,Lt=this.byteLength-xt.byteLength,Ut=xt.byteLength-1;let Nt;for(let qt=$t;qt<=Lt;qt+=Nt){Nt=0;for(let Kt=Ut;Kt>=0;Kt--){const zt=this.get(qt+Kt);if(xt[Kt]!==zt){Nt=Math.max(1,Kt-jt[zt]);break}}if(Nt===0)return qt}return-1}getInt8(e){const $t=this.subarray(e,e+1);return new DataView($t.buffer,$t.byteOffset,$t.byteLength).getInt8(0)}setInt8(e,$t){const xt=allocUnsafe$1(1);new DataView(xt.buffer,xt.byteOffset,xt.byteLength).setInt8(0,$t),this.write(xt,e)}getInt16(e,$t){const xt=this.subarray(e,e+2);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getInt16(0,$t)}setInt16(e,$t,xt){const At=alloc$3(2);new DataView(At.buffer,At.byteOffset,At.byteLength).setInt16(0,$t,xt),this.write(At,e)}getInt32(e,$t){const xt=this.subarray(e,e+4);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getInt32(0,$t)}setInt32(e,$t,xt){const At=alloc$3(4);new DataView(At.buffer,At.byteOffset,At.byteLength).setInt32(0,$t,xt),this.write(At,e)}getBigInt64(e,$t){const xt=this.subarray(e,e+8);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getBigInt64(0,$t)}setBigInt64(e,$t,xt){const At=alloc$3(8);new DataView(At.buffer,At.byteOffset,At.byteLength).setBigInt64(0,$t,xt),this.write(At,e)}getUint8(e){const $t=this.subarray(e,e+1);return new DataView($t.buffer,$t.byteOffset,$t.byteLength).getUint8(0)}setUint8(e,$t){const xt=allocUnsafe$1(1);new DataView(xt.buffer,xt.byteOffset,xt.byteLength).setUint8(0,$t),this.write(xt,e)}getUint16(e,$t){const xt=this.subarray(e,e+2);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getUint16(0,$t)}setUint16(e,$t,xt){const At=alloc$3(2);new DataView(At.buffer,At.byteOffset,At.byteLength).setUint16(0,$t,xt),this.write(At,e)}getUint32(e,$t){const xt=this.subarray(e,e+4);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getUint32(0,$t)}setUint32(e,$t,xt){const At=alloc$3(4);new DataView(At.buffer,At.byteOffset,At.byteLength).setUint32(0,$t,xt),this.write(At,e)}getBigUint64(e,$t){const xt=this.subarray(e,e+8);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getBigUint64(0,$t)}setBigUint64(e,$t,xt){const At=alloc$3(8);new DataView(At.buffer,At.byteOffset,At.byteLength).setBigUint64(0,$t,xt),this.write(At,e)}getFloat32(e,$t){const xt=this.subarray(e,e+4);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getFloat32(0,$t)}setFloat32(e,$t,xt){const At=alloc$3(4);new DataView(At.buffer,At.byteOffset,At.byteLength).setFloat32(0,$t,xt),this.write(At,e)}getFloat64(e,$t){const xt=this.subarray(e,e+8);return new DataView(xt.buffer,xt.byteOffset,xt.byteLength).getFloat64(0,$t)}setFloat64(e,$t,xt){const At=alloc$3(8);new DataView(At.buffer,At.byteOffset,At.byteLength).setFloat64(0,$t,xt),this.write(At,e)}equals(e){if(e==null||!(e instanceof Uint8ArrayList)||e.bufs.length!==this.bufs.length)return!1;for(let $t=0;$t<this.bufs.length;$t++)if(!equals$4(this.bufs[$t],e.bufs[$t]))return!1;return!0}static fromUint8Arrays(e,$t){const xt=new Uint8ArrayList;return xt.bufs=e,$t==null&&($t=e.reduce((At,kt)=>At+kt.byteLength,0)),xt.length=$t,xt}}const DEFAULT_CHUNK_SIZE=262144,fixedSize=(_t={})=>{const e=_t.chunkSize??DEFAULT_CHUNK_SIZE;return async function*(xt){let At=new Uint8ArrayList,kt=0,Bt=!1;for await(const jt of xt)for(At.append(jt),kt+=jt.length;kt>=e;)if(yield At.slice(0,e),Bt=!0,e===At.length)At=new Uint8ArrayList,kt=0;else{const Lt=new Uint8ArrayList;Lt.append(At.sublist(e)),At=Lt,kt-=e}(!Bt||kt>0)&&(yield At.subarray(0,kt))}},textDecoder$2=new TextDecoder;function decodeVarint(_t,e){let $t=0;for(let xt=0;;xt+=7){if(xt>=64)throw new Error("protobuf: varint overflow");if(e>=_t.length)throw new Error("protobuf: unexpected end of data");const At=_t[e++];if($t+=xt<28?(At&127)<<xt:(At&127)*2**xt,At<128)break}return[$t,e]}function decodeBytes(_t,e){let $t;[$t,e]=decodeVarint(_t,e);const xt=e+$t;if($t<0||xt<0)throw new Error("protobuf: invalid length");if(xt>_t.length)throw new Error("protobuf: unexpected end of data");return[_t.subarray(e,xt),xt]}function decodeKey(_t,e){let $t;return[$t,e]=decodeVarint(_t,e),[$t&7,$t>>3,e]}function decodeLink(_t){const e={},$t=_t.length;let xt=0;for(;xt<$t;){let At,kt;if([At,kt,xt]=decodeKey(_t,xt),kt===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(At!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${At}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,xt]=decodeBytes(_t,xt)}else if(kt===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(At!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${At}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let Bt;[Bt,xt]=decodeBytes(_t,xt),e.Name=textDecoder$2.decode(Bt)}else if(kt===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(At!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${At}) for Tsize`);[e.Tsize,xt]=decodeVarint(_t,xt)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${kt}`)}if(xt>$t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(_t){const e=_t.length;let $t=0,xt,At=!1,kt;for(;$t<e;){let jt,Lt;if([jt,Lt,$t]=decodeKey(_t,$t),jt!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${jt}`);if(Lt===1){if(kt)throw new Error("protobuf: (PBNode) duplicate Data section");[kt,$t]=decodeBytes(_t,$t),xt&&(At=!0)}else if(Lt===2){if(At)throw new Error("protobuf: (PBNode) duplicate Links section");xt||(xt=[]);let Ut;[Ut,$t]=decodeBytes(_t,$t),xt.push(decodeLink(Ut))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${Lt}`)}if($t>e)throw new Error("protobuf: (PBNode) unexpected end of data");const Bt={};return kt&&(Bt.Data=kt),Bt.Links=xt||[],Bt}const textEncoder$4=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(_t,e){let $t=e.length;if(typeof _t.Tsize=="number"){if(_t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(_t.Tsize))throw new Error("Tsize too large for encoding");$t=encodeVarint(e,$t,_t.Tsize)-1,e[$t]=24}if(typeof _t.Name=="string"){const xt=textEncoder$4.encode(_t.Name);$t-=xt.length,e.set(xt,$t),$t=encodeVarint(e,$t,xt.length)-1,e[$t]=18}return _t.Hash&&($t-=_t.Hash.length,e.set(_t.Hash,$t),$t=encodeVarint(e,$t,_t.Hash.length)-1,e[$t]=10),e.length-$t}function encodeNode(_t){const e=sizeNode(_t),$t=new Uint8Array(e);let xt=e;if(_t.Data&&(xt-=_t.Data.length,$t.set(_t.Data,xt),xt=encodeVarint($t,xt,_t.Data.length)-1,$t[xt]=10),_t.Links)for(let At=_t.Links.length-1;At>=0;At--){const kt=encodeLink(_t.Links[At],$t.subarray(0,xt));xt-=kt,xt=encodeVarint($t,xt,kt)-1,$t[xt]=18}return $t}function sizeLink(_t){let e=0;if(_t.Hash){const $t=_t.Hash.length;e+=1+$t+sov($t)}if(typeof _t.Name=="string"){const $t=textEncoder$4.encode(_t.Name).length;e+=1+$t+sov($t)}return typeof _t.Tsize=="number"&&(e+=1+sov(_t.Tsize)),e}function sizeNode(_t){let e=0;if(_t.Data){const $t=_t.Data.length;e+=1+$t+sov($t)}if(_t.Links)for(const $t of _t.Links){const xt=sizeLink($t);e+=1+xt+sov(xt)}return e}function encodeVarint(_t,e,$t){e-=sov($t);const xt=e;for(;$t>=maxUInt32;)_t[e++]=$t&127|128,$t/=128;for(;$t>=128;)_t[e++]=$t&127|128,$t>>>=7;return _t[e]=$t,xt}function sov(_t){return _t%2===0&&_t++,Math.floor((len64(_t)+6)/7)}function len64(_t){let e=0;return _t>=maxInt32&&(_t=Math.floor(_t/maxInt32),e=32),_t>=65536&&(_t>>>=16,e+=16),_t>=256&&(_t>>>=8,e+=8),e+len8tab[_t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$3=new TextEncoder;function linkComparator(_t,e){if(_t===e)return 0;const $t=_t.Name?textEncoder$3.encode(_t.Name):[],xt=e.Name?textEncoder$3.encode(e.Name):[];let At=$t.length,kt=xt.length;for(let Bt=0,jt=Math.min(At,kt);Bt<jt;++Bt)if($t[Bt]!==xt[Bt]){At=$t[Bt],kt=xt[Bt];break}return At<kt?-1:kt<At?1:0}function hasOnlyProperties(_t,e){return!Object.keys(_t).some($t=>!e.includes($t))}function asLink(_t){if(typeof _t.asCID=="object"){const $t=CID$2.asCID(_t);if(!$t)throw new TypeError("Invalid DAG-PB form");return{Hash:$t}}if(typeof _t!="object"||Array.isArray(_t))throw new TypeError("Invalid DAG-PB form");const e={};if(_t.Hash){let $t=CID$2.asCID(_t.Hash);try{$t||(typeof _t.Hash=="string"?$t=CID$2.parse(_t.Hash):_t.Hash instanceof Uint8Array&&($t=CID$2.decode(_t.Hash)))}catch(xt){throw new TypeError(`Invalid DAG-PB form: ${xt.message}`)}$t&&(e.Hash=$t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof _t.Name=="string"&&(e.Name=_t.Name),typeof _t.Tsize=="number"&&(e.Tsize=_t.Tsize),e}function prepare(_t){if((_t instanceof Uint8Array||typeof _t=="string")&&(_t={Data:_t}),typeof _t!="object"||Array.isArray(_t))throw new TypeError("Invalid DAG-PB form");const e={};if(_t.Data!==void 0)if(typeof _t.Data=="string")e.Data=textEncoder$3.encode(_t.Data);else if(_t.Data instanceof Uint8Array)e.Data=_t.Data;else throw new TypeError("Invalid DAG-PB form");if(_t.Links!==void 0)if(Array.isArray(_t.Links))e.Links=_t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate$1(_t){if(!_t||typeof _t!="object"||Array.isArray(_t)||_t instanceof Uint8Array||_t["/"]&&_t["/"]===_t.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(_t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(_t.Data!==void 0&&!(_t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(_t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<_t.Links.length;e++){const $t=_t.Links[e];if(!$t||typeof $t!="object"||Array.isArray($t)||$t instanceof Uint8Array||$t["/"]&&$t["/"]===$t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties($t,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if($t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if($t.Hash==null||!$t.Hash["/"]||$t.Hash["/"]!==$t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if($t.Name!==void 0&&typeof $t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if($t.Tsize!==void 0){if(typeof $t.Tsize!="number"||$t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if($t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&linkComparator($t,_t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(_t,e=[]){return prepare({Data:_t,Links:e})}function createLink(_t,e,$t){return asLink({Hash:$t,Name:_t,Tsize:e})}function toByteView(_t){return _t instanceof ArrayBuffer?new Uint8Array(_t,0,_t.byteLength):_t}const name$3="dag-pb",code$3=112;function encode$8(_t){validate$1(_t);const e={};return _t.Links&&(e.Links=_t.Links.map($t=>{const xt={};return $t.Hash&&(xt.Hash=$t.Hash.bytes),$t.Name!==void 0&&(xt.Name=$t.Name),$t.Tsize!==void 0&&(xt.Tsize=$t.Tsize),xt})),_t.Data&&(e.Data=_t.Data),encodeNode(e)}function decode$9(_t){const e=toByteView(_t),$t=decodeNode(e),xt={};return $t.Data&&(xt.Data=$t.Data),$t.Links&&(xt.Links=$t.Links.map(At=>{const kt={};try{kt.Hash=CID$2.decode(At.Hash)}catch{}if(!kt.Hash)throw new Error("Invalid Hash field found in link, expected CID");return At.Name!==void 0&&(kt.Name=At.Name),At.Tsize!==void 0&&(kt.Tsize=At.Tsize),kt})),xt}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,createLink,createNode,decode:decode$9,encode:encode$8,name:name$3,prepare,validate:validate$1},Symbol.toStringTag,{value:"Module"})),N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),MSB$2=128,REST$2=127;function encodingLength$5(_t){if(_t<N1$1)return 1;if(_t<N2$1)return 2;if(_t<N3$1)return 3;if(_t<N4$1)return 4;if(_t<N5$1)return 5;if(_t<N6$1)return 6;if(_t<N7$1)return 7;if(Number.MAX_SAFE_INTEGER!=null&&_t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function encodeUint8Array(_t,e,$t=0){switch(encodingLength$5(_t)){case 8:e[$t++]=_t&255|MSB$2,_t/=128;case 7:e[$t++]=_t&255|MSB$2,_t/=128;case 6:e[$t++]=_t&255|MSB$2,_t/=128;case 5:e[$t++]=_t&255|MSB$2,_t/=128;case 4:e[$t++]=_t&255|MSB$2,_t>>>=7;case 3:e[$t++]=_t&255|MSB$2,_t>>>=7;case 2:e[$t++]=_t&255|MSB$2,_t>>>=7;case 1:{e[$t++]=_t&255,_t>>>=7;break}default:throw new Error("unreachable")}return e}function decodeUint8Array(_t,e){let $t=_t[e],xt=0;if(xt+=$t&REST$2,$t<MSB$2||($t=_t[e+1],xt+=($t&REST$2)<<7,$t<MSB$2)||($t=_t[e+2],xt+=($t&REST$2)<<14,$t<MSB$2)||($t=_t[e+3],xt+=($t&REST$2)<<21,$t<MSB$2)||($t=_t[e+4],xt+=($t&REST$2)*N4$1,$t<MSB$2)||($t=_t[e+5],xt+=($t&REST$2)*N5$1,$t<MSB$2)||($t=_t[e+6],xt+=($t&REST$2)*N6$1,$t<MSB$2)||($t=_t[e+7],xt+=($t&REST$2)*N7$1,$t<MSB$2))return xt;throw new RangeError("Could not decode varint")}const f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer);function writeFloatLE(_t,e,$t){f32[0]=_t,e[$t]=f8b[0],e[$t+1]=f8b[1],e[$t+2]=f8b[2],e[$t+3]=f8b[3]}function readFloatLE(_t,e){return f8b[0]=_t[e],f8b[1]=_t[e+1],f8b[2]=_t[e+2],f8b[3]=_t[e+3],f32[0]}const f64=new Float64Array([-0]),d8b=new Uint8Array(f64.buffer);function writeDoubleLE(_t,e,$t){f64[0]=_t,e[$t]=d8b[0],e[$t+1]=d8b[1],e[$t+2]=d8b[2],e[$t+3]=d8b[3],e[$t+4]=d8b[4],e[$t+5]=d8b[5],e[$t+6]=d8b[6],e[$t+7]=d8b[7]}function readDoubleLE(_t,e){return d8b[0]=_t[e],d8b[1]=_t[e+1],d8b[2]=_t[e+2],d8b[3]=_t[e+3],d8b[4]=_t[e+4],d8b[5]=_t[e+5],d8b[6]=_t[e+6],d8b[7]=_t[e+7],f64[0]}const MAX_SAFE_NUMBER_INTEGER=BigInt(Number.MAX_SAFE_INTEGER),MIN_SAFE_NUMBER_INTEGER=BigInt(Number.MIN_SAFE_INTEGER);class LongBits{constructor(e,$t){dn(this,"lo");dn(this,"hi");this.lo=e|0,this.hi=$t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const $t=~this.lo+1>>>0;let xt=~this.hi>>>0;return $t===0&&(xt=xt+1>>>0),-($t+xt*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const $t=~this.lo+1>>>0;let xt=~this.hi>>>0;return $t===0&&(xt=xt+1>>>0),-(BigInt($t)+(BigInt(xt)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,$t=(this.lo>>>28|this.hi<<4)>>>0,xt=this.hi>>>24;return xt===0?$t===0?e<16384?e<128?1:2:e<2097152?3:4:$t<16384?$t<128?5:6:$t<2097152?7:8:xt<128?9:10}static fromBigInt(e){if(e===0n)return zero;if(e<MAX_SAFE_NUMBER_INTEGER&&e>MIN_SAFE_NUMBER_INTEGER)return this.fromNumber(Number(e));const $t=e<0n;$t&&(e=-e);let xt=e>>32n,At=e-(xt<<32n);return $t&&(xt=~xt|0n,At=~At|0n,++At>TWO_32&&(At=0n,++xt>TWO_32&&(xt=0n))),new LongBits(Number(At),Number(xt))}static fromNumber(e){if(e===0)return zero;const $t=e<0;$t&&(e=-e);let xt=e>>>0,At=(e-xt)/4294967296>>>0;return $t&&(At=~At>>>0,xt=~xt>>>0,++xt>4294967295&&(xt=0,++At>4294967295&&(At=0))),new LongBits(xt,At)}static from(e){return typeof e=="number"?LongBits.fromNumber(e):typeof e=="bigint"?LongBits.fromBigInt(e):typeof e=="string"?LongBits.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new LongBits(e.low>>>0,e.high>>>0):zero}}const zero=new LongBits(0,0);zero.toBigInt=function(){return 0n};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};const TWO_32=4294967296n;function length$1(_t){let e=0,$t=0;for(let xt=0;xt<_t.length;++xt)$t=_t.charCodeAt(xt),$t<128?e+=1:$t<2048?e+=2:($t&64512)===55296&&(_t.charCodeAt(xt+1)&64512)===56320?(++xt,e+=4):e+=3;return e}function read$1(_t,e,$t){if($t-e<1)return"";let At;const kt=[];let Bt=0,jt;for(;e<$t;)jt=_t[e++],jt<128?kt[Bt++]=jt:jt>191&&jt<224?kt[Bt++]=(jt&31)<<6|_t[e++]&63:jt>239&&jt<365?(jt=((jt&7)<<18|(_t[e++]&63)<<12|(_t[e++]&63)<<6|_t[e++]&63)-65536,kt[Bt++]=55296+(jt>>10),kt[Bt++]=56320+(jt&1023)):kt[Bt++]=(jt&15)<<12|(_t[e++]&63)<<6|_t[e++]&63,Bt>8191&&((At??(At=[])).push(String.fromCharCode.apply(String,kt)),Bt=0);return At!=null?(Bt>0&&At.push(String.fromCharCode.apply(String,kt.slice(0,Bt))),At.join("")):String.fromCharCode.apply(String,kt.slice(0,Bt))}function write$1(_t,e,$t){const xt=$t;let At,kt;for(let Bt=0;Bt<_t.length;++Bt)At=_t.charCodeAt(Bt),At<128?e[$t++]=At:At<2048?(e[$t++]=At>>6|192,e[$t++]=At&63|128):(At&64512)===55296&&((kt=_t.charCodeAt(Bt+1))&64512)===56320?(At=65536+((At&1023)<<10)+(kt&1023),++Bt,e[$t++]=At>>18|240,e[$t++]=At>>12&63|128,e[$t++]=At>>6&63|128,e[$t++]=At&63|128):(e[$t++]=At>>12|224,e[$t++]=At>>6&63|128,e[$t++]=At&63|128);return $t-xt}function indexOutOfRange(_t,e){return RangeError(`index out of range: ${_t.pos} + ${e??1} > ${_t.len}`)}function readFixed32End(_t,e){return(_t[e-4]|_t[e-3]<<8|_t[e-2]<<16|_t[e-1]<<24)>>>0}class Uint8ArrayReader{constructor(e){dn(this,"buf");dn(this,"pos");dn(this,"len");dn(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32End(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32End(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);const e=readFloatLE(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);const e=readDoubleLE(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),$t=this.pos,xt=this.pos+e;if(xt>this.len)throw indexOutOfRange(this,e);return this.pos+=e,$t===xt?new Uint8Array(0):this.buf.subarray($t,xt)}string(){const e=this.bytes();return read$1(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new LongBits(0,0);let $t=0;if(this.len-this.pos>4){for(;$t<4;++$t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<$t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;$t=0}else{for(;$t<3;++$t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<$t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<$t*7)>>>0,e}if(this.len-this.pos>4){for(;$t<5;++$t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<$t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;$t<5;++$t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<$t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);const e=readFixed32End(this.buf,this.pos+=4),$t=readFixed32End(this.buf,this.pos+=4);return new LongBits(e,$t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=decodeUint8Array(this.buf,this.pos);return this.pos+=encodingLength$5(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function createReader(_t){return new Uint8ArrayReader(_t instanceof Uint8Array?_t:_t.subarray())}function decodeMessage(_t,e,$t){const xt=createReader(_t);return e.decode(xt,void 0,$t)}function pool(_t){let xt,At=8192;return function(Bt){if(Bt<1||Bt>4096)return allocUnsafe$1(Bt);At+Bt>8192&&(xt=allocUnsafe$1(8192),At=0);const jt=xt.subarray(At,At+=Bt);return At&7&&(At=(At|7)+1),jt}}class Op{constructor(e,$t,xt){dn(this,"fn");dn(this,"len");dn(this,"next");dn(this,"val");this.fn=e,this.len=$t,this.next=void 0,this.val=xt}}function noop$4(){}class State{constructor(e){dn(this,"head");dn(this,"tail");dn(this,"len");dn(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const bufferPool=pool();function alloc$1(_t){return globalThis.Buffer!=null?allocUnsafe$1(_t):bufferPool(_t)}class Uint8ArrayWriter{constructor(){dn(this,"len");dn(this,"head");dn(this,"tail");dn(this,"states");this.len=0,this.head=new Op(noop$4,0,0),this.tail=this.head,this.states=null}_push(e,$t,xt){return this.tail=this.tail.next=new Op(e,$t,xt),this.len+=$t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(writeVarint64,10,LongBits.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const $t=LongBits.fromBigInt(e);return this._push(writeVarint64,$t.length(),$t)}uint64Number(e){return this._push(encodeUint8Array,encodingLength$5(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const $t=LongBits.fromBigInt(e).zzEncode();return this._push(writeVarint64,$t.length(),$t)}sint64Number(e){const $t=LongBits.fromNumber(e).zzEncode();return this._push(writeVarint64,$t.length(),$t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(writeByte,1,e?1:0)}fixed32(e){return this._push(writeFixed32,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const $t=LongBits.fromBigInt(e);return this._push(writeFixed32,4,$t.lo)._push(writeFixed32,4,$t.hi)}fixed64Number(e){const $t=LongBits.fromNumber(e);return this._push(writeFixed32,4,$t.lo)._push(writeFixed32,4,$t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(writeFloatLE,4,e)}double(e){return this._push(writeDoubleLE,8,e)}bytes(e){const $t=e.length>>>0;return $t===0?this._push(writeByte,1,0):this.uint32($t)._push(writeBytes,$t,e)}string(e){const $t=length$1(e);return $t!==0?this.uint32($t)._push(write$1,$t,e):this._push(writeByte,1,0)}fork(){return this.states=new State(this),this.head=this.tail=new Op(noop$4,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$4,0,0),this.len=0),this}ldelim(){const e=this.head,$t=this.tail,xt=this.len;return this.reset().uint32(xt),xt!==0&&(this.tail.next=e.next,this.tail=$t,this.len+=xt),this}finish(){let e=this.head.next;const $t=alloc$1(this.len);let xt=0;for(;e!=null;)e.fn(e.val,$t,xt),xt+=e.len,e=e.next;return $t}}function writeByte(_t,e,$t){e[$t]=_t&255}function writeVarint32(_t,e,$t){for(;_t>127;)e[$t++]=_t&127|128,_t>>>=7;e[$t]=_t}class VarintOp extends Op{constructor($t,xt){super(writeVarint32,$t,xt);dn(this,"next");this.next=void 0}}function writeVarint64(_t,e,$t){for(;_t.hi!==0;)e[$t++]=_t.lo&127|128,_t.lo=(_t.lo>>>7|_t.hi<<25)>>>0,_t.hi>>>=7;for(;_t.lo>127;)e[$t++]=_t.lo&127|128,_t.lo=_t.lo>>>7;e[$t++]=_t.lo}function writeFixed32(_t,e,$t){e[$t]=_t&255,e[$t+1]=_t>>>8&255,e[$t+2]=_t>>>16&255,e[$t+3]=_t>>>24}function writeBytes(_t,e,$t){e.set(_t,$t)}globalThis.Buffer!=null&&(Uint8ArrayWriter.prototype.bytes=function(_t){const e=_t.length>>>0;return this.uint32(e),e>0&&this._push(writeBytesBuffer,e,_t),this},Uint8ArrayWriter.prototype.string=function(_t){const e=globalThis.Buffer.byteLength(_t);return this.uint32(e),e>0&&this._push(writeStringBuffer,e,_t),this});function writeBytesBuffer(_t,e,$t){e.set(_t,$t)}function writeStringBuffer(_t,e,$t){_t.length<40?write$1(_t,e,$t):e.utf8Write!=null?e.utf8Write(_t,$t):e.set(fromString$3(_t),$t)}function createWriter(){return new Uint8ArrayWriter}function encodeMessage(_t,e){const $t=createWriter();return e.encode(_t,$t,{lengthDelimited:!1}),$t.finish()}var CODEC_TYPES;(function(_t){_t[_t.VARINT=0]="VARINT",_t[_t.BIT64=1]="BIT64",_t[_t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",_t[_t.START_GROUP=3]="START_GROUP",_t[_t.END_GROUP=4]="END_GROUP",_t[_t.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$1(_t,e,$t,xt){return{name:_t,type:e,encode:$t,decode:xt}}function enumeration(_t){function e(At){if(_t[At.toString()]==null)throw new Error("Invalid enum value");return _t[At]}const $t=function(kt,Bt){const jt=e(kt);Bt.int32(jt)},xt=function(kt){const Bt=kt.int32();return e(Bt)};return createCodec$1("enum",CODEC_TYPES.VARINT,$t,xt)}function message(_t,e){return createCodec$1("message",CODEC_TYPES.LENGTH_DELIMITED,_t,e)}var Data;(function(_t){(function(xt){xt.Raw="Raw",xt.Directory="Directory",xt.File="File",xt.Metadata="Metadata",xt.Symlink="Symlink",xt.HAMTShard="HAMTShard"})(_t.DataType||(_t.DataType={}));let e;(function(xt){xt[xt.Raw=0]="Raw",xt[xt.Directory=1]="Directory",xt[xt.File=2]="File",xt[xt.Metadata=3]="Metadata",xt[xt.Symlink=4]="Symlink",xt[xt.HAMTShard=5]="HAMTShard"})(e||(e={})),function(xt){xt.codec=()=>enumeration(e)}(_t.DataType||(_t.DataType={}));let $t;_t.codec=()=>($t==null&&($t=message((xt,At,kt={})=>{if(kt.lengthDelimited!==!1&&At.fork(),xt.Type!=null&&(At.uint32(8),_t.DataType.codec().encode(xt.Type,At)),xt.Data!=null&&(At.uint32(18),At.bytes(xt.Data)),xt.filesize!=null&&(At.uint32(24),At.uint64(xt.filesize)),xt.blocksizes!=null)for(const Bt of xt.blocksizes)At.uint32(32),At.uint64(Bt);xt.hashType!=null&&(At.uint32(40),At.uint64(xt.hashType)),xt.fanout!=null&&(At.uint32(48),At.uint64(xt.fanout)),xt.mode!=null&&(At.uint32(56),At.uint32(xt.mode)),xt.mtime!=null&&(At.uint32(66),UnixTime.codec().encode(xt.mtime,At)),kt.lengthDelimited!==!1&&At.ldelim()},(xt,At)=>{const kt={blocksizes:[]},Bt=At==null?xt.len:xt.pos+At;for(;xt.pos<Bt;){const jt=xt.uint32();switch(jt>>>3){case 1:kt.Type=_t.DataType.codec().decode(xt);break;case 2:kt.Data=xt.bytes();break;case 3:kt.filesize=xt.uint64();break;case 4:kt.blocksizes.push(xt.uint64());break;case 5:kt.hashType=xt.uint64();break;case 6:kt.fanout=xt.uint64();break;case 7:kt.mode=xt.uint32();break;case 8:kt.mtime=UnixTime.codec().decode(xt,xt.uint32());break;default:xt.skipType(jt&7);break}}return kt})),$t),_t.encode=xt=>encodeMessage(xt,_t.codec()),_t.decode=xt=>decodeMessage(xt,_t.codec())})(Data||(Data={}));var UnixTime;(function(_t){let e;_t.codec=()=>(e==null&&(e=message(($t,xt,At={})=>{At.lengthDelimited!==!1&&xt.fork(),$t.Seconds!=null&&(xt.uint32(8),xt.int64($t.Seconds)),$t.FractionalNanoseconds!=null&&(xt.uint32(21),xt.fixed32($t.FractionalNanoseconds)),At.lengthDelimited!==!1&&xt.ldelim()},($t,xt)=>{const At={},kt=xt==null?$t.len:$t.pos+xt;for(;$t.pos<kt;){const Bt=$t.uint32();switch(Bt>>>3){case 1:At.Seconds=$t.int64();break;case 2:At.FractionalNanoseconds=$t.fixed32();break;default:$t.skipType(Bt&7);break}}return At})),e),_t.encode=$t=>encodeMessage($t,_t.codec()),_t.decode=$t=>decodeMessage($t,_t.codec())})(UnixTime||(UnixTime={}));var Metadata;(function(_t){let e;_t.codec=()=>(e==null&&(e=message(($t,xt,At={})=>{At.lengthDelimited!==!1&&xt.fork(),$t.MimeType!=null&&(xt.uint32(10),xt.string($t.MimeType)),At.lengthDelimited!==!1&&xt.ldelim()},($t,xt)=>{const At={},kt=xt==null?$t.len:$t.pos+xt;for(;$t.pos<kt;){const Bt=$t.uint32();switch(Bt>>>3){case 1:At.MimeType=$t.string();break;default:$t.skipType(Bt&7);break}}return At})),e),_t.encode=$t=>encodeMessage($t,_t.codec()),_t.decode=$t=>decodeMessage($t,_t.codec())})(Metadata||(Metadata={}));const types$2={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},dirTypes=["directory","hamt-sharded-directory"],DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8);class UnixFS{constructor(e={type:"file"}){dn(this,"type");dn(this,"data");dn(this,"blockSizes");dn(this,"hashType");dn(this,"fanout");dn(this,"mtime");dn(this,"_mode");dn(this,"_originalMode");const{type:$t,data:xt,blockSizes:At,hashType:kt,fanout:Bt,mtime:jt,mode:Lt}=e;if($t!=null&&!Object.values(types$2).includes($t))throw errCode$1(new Error("Type: "+$t+" is not valid"),"ERR_INVALID_TYPE");this.type=$t??"file",this.data=xt,this.hashType=kt,this.fanout=Bt,this.blockSizes=At??[],this._originalMode=0,this.mode=Lt,this.mtime=jt}static unmarshal(e){const $t=Data.decode(e),xt=new UnixFS({type:types$2[$t.Type!=null?$t.Type.toString():"File"],data:$t.Data,blockSizes:$t.blocksizes,mode:$t.mode,mtime:$t.mtime!=null?{secs:$t.mtime.Seconds??0n,nsecs:$t.mtime.FractionalNanoseconds}:void 0,fanout:$t.fanout});return xt._originalMode=$t.mode??0,xt}set mode(e){e==null?this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return dirTypes.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach($t=>{e+=$t}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Data.DataType.Raw;break;case"directory":e=Data.DataType.Directory;break;case"file":e=Data.DataType.File;break;case"metadata":e=Data.DataType.Metadata;break;case"symlink":e=Data.DataType.Symlink;break;case"hamt-sharded-directory":e=Data.DataType.HAMTShard;break;default:throw errCode$1(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let $t=this.data;(this.data==null||this.data.length===0)&&($t=void 0);let xt;this.mode!=null&&(xt=this._originalMode&4294963200|(this.mode??0),xt===DEFAULT_FILE_MODE&&!this.isDirectory()&&(xt=void 0),xt===DEFAULT_DIRECTORY_MODE&&this.isDirectory()&&(xt=void 0));let At;return this.mtime!=null&&(At={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Data.encode({Type:e,Data:$t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:xt,mtime:At})}}const name$2="raw",code$2=85,encode$7=_t=>coerce$3(_t),decode$8=_t=>coerce$3(_t),raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$8,encode:encode$7,name:name$2},Symbol.toStringTag,{value:"Module"}));class CustomProgressEvent extends Event{constructor($t,xt){super($t);dn(this,"type");dn(this,"detail");this.type=$t,this.detail=xt}}const persist=async(_t,e,$t)=>{$t.codec==null&&($t.codec=dagPb);const xt=await sha256$7.digest(_t),At=CID.create($t.cidVersion,$t.codec.code,xt);return await e.put(At,_t,$t),At};function defaultBufferImporter(_t){return async function*($t,xt){let At=0n;for await(let kt of $t.content)yield async()=>{var Ut;let Bt;const jt={codec:dagPb,cidVersion:_t.cidVersion,onProgress:_t.onProgress};_t.rawLeaves?(jt.codec=raw,jt.cidVersion=1):(Bt=new UnixFS({type:_t.leafType,data:kt}),kt=encode$8({Data:Bt.marshal(),Links:[]}));const Lt=await persist(kt,xt,jt);return At+=BigInt(kt.byteLength),(Ut=_t.onProgress)==null||Ut.call(_t,new CustomProgressEvent("unixfs:importer:progress:file:write",{bytesWritten:At,cid:Lt,path:$t.path})),{cid:Lt,unixfs:Bt,size:BigInt(kt.length),block:kt}}}}const dirBuilder=async(_t,e,$t)=>{const xt=new UnixFS({type:"directory",mtime:_t.mtime,mode:_t.mode}),At=encode$8(prepare({Data:xt.marshal()})),kt=await persist(At,e,$t),Bt=_t.path;return{cid:kt,path:Bt,unixfs:xt,size:BigInt(At.length),originalPath:_t.originalPath,block:At}};async function*buildFileBatch(_t,e,$t){let xt=-1,At;for await(const kt of parallelBatch($t.bufferImporter(_t,e),$t.blockWriteConcurrency)){if(xt++,xt===0){At={...kt,single:!0};continue}else xt===1&&At!=null&&(yield{...At,block:void 0,single:void 0},At=void 0);yield{...kt,block:void 0}}At!=null&&(yield At)}function isSingleBlockImport(_t){return _t.single===!0}const reduce$2=(_t,e,$t)=>async function(At){var Nt,qt;if(At.length===1&&isSingleBlockImport(At[0])&&$t.reduceSingleLeafToSelf){const Kt=At[0];let zt=Kt.block;return isSingleBlockImport(Kt)&&(_t.mtime!==void 0||_t.mode!==void 0)&&(Kt.unixfs=new UnixFS({type:"file",mtime:_t.mtime,mode:_t.mode,data:Kt.block}),zt={Data:Kt.unixfs.marshal(),Links:[]},Kt.block=encode$8(prepare(zt)),Kt.cid=await persist(Kt.block,e,{...$t,cidVersion:$t.cidVersion}),Kt.size=BigInt(Kt.block.length)),(Nt=$t.onProgress)==null||Nt.call($t,new CustomProgressEvent("unixfs:importer:progress:file:layout",{cid:Kt.cid,path:Kt.originalPath})),{cid:Kt.cid,path:_t.path,unixfs:Kt.unixfs,size:Kt.size,originalPath:Kt.originalPath}}const kt=new UnixFS({type:"file",mtime:_t.mtime,mode:_t.mode}),Bt=At.filter(Kt=>{var zt,Vt;return Kt.cid.code===code$2&&Kt.size>0||Kt.unixfs!=null&&Kt.unixfs.data==null&&Kt.unixfs.fileSize()>0n?!0:!!((Vt=(zt=Kt.unixfs)==null?void 0:zt.data)!=null&&Vt.length)}).map(Kt=>{var zt;return Kt.cid.code===code$2?(kt.addBlockSize(Kt.size),{Name:"",Tsize:Number(Kt.size),Hash:Kt.cid}):(Kt.unixfs==null||Kt.unixfs.data==null?kt.addBlockSize(((zt=Kt.unixfs)==null?void 0:zt.fileSize())??0n):kt.addBlockSize(BigInt(Kt.unixfs.data.length)),{Name:"",Tsize:Number(Kt.size),Hash:Kt.cid})}),jt={Data:kt.marshal(),Links:Bt},Lt=encode$8(prepare(jt)),Ut=await persist(Lt,e,$t);return(qt=$t.onProgress)==null||qt.call($t,new CustomProgressEvent("unixfs:importer:progress:file:layout",{cid:Ut,path:_t.originalPath})),{cid:Ut,path:_t.path,unixfs:kt,size:BigInt(Lt.length+jt.Links.reduce((Kt,zt)=>Kt+(zt.Tsize??0),0)),originalPath:_t.originalPath,block:Lt}},fileBuilder=async(_t,e,$t)=>$t.layout(buildFileBatch(_t,e,$t),reduce$2(_t,e,$t));function isIterable$4(_t){return Symbol.iterator in _t}function isAsyncIterable$1(_t){return Symbol.asyncIterator in _t}function contentAsAsyncIterable(_t){try{if(_t instanceof Uint8Array)return async function*(){yield _t}();if(isIterable$4(_t))return async function*(){yield*_t}();if(isAsyncIterable$1(_t))return _t}catch{throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function defaultDagBuilder(_t){return async function*($t,xt){for await(const At of $t){let kt;if(At.path!=null&&(kt=At.path,At.path=At.path.split("/").filter(Bt=>Bt!=null&&Bt!==".").join("/")),isFileCandidate(At)){const Bt={path:At.path,mtime:At.mtime,mode:At.mode,content:async function*(){var Lt;let jt=0n;for await(const Ut of _t.chunker(_t.chunkValidator(contentAsAsyncIterable(At.content)))){const Nt=BigInt(Ut.byteLength);jt+=Nt,(Lt=_t.onProgress)==null||Lt.call(_t,new CustomProgressEvent("unixfs:importer:progress:file:read",{bytesRead:jt,chunkSize:Nt,path:At.path})),yield Ut}}(),originalPath:kt};yield async()=>fileBuilder(Bt,xt,_t)}else if(At.path!=null){const Bt={path:At.path,mtime:At.mtime,mode:At.mode,originalPath:kt};yield async()=>dirBuilder(Bt,xt,_t)}else throw new Error("Import candidate must have content or path or both")}}}function isFileCandidate(_t){return _t.content!=null}function asUint8Array(_t){return globalThis.Buffer!=null?new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength):_t}const base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet$1.reduce((_t,e,$t)=>(_t[$t]=e,_t),[]),alphabetCharsToBytes=alphabet$1.reduce((_t,e,$t)=>(_t[e.codePointAt(0)]=$t,_t),[]);function encode$6(_t){return _t.reduce((e,$t)=>(e+=alphabetBytesToChars[$t],e),"")}function decode$7(_t){const e=[];for(const $t of _t){const xt=alphabetCharsToBytes[$t.codePointAt(0)];if(xt===void 0)throw new Error(`Non-base256emoji character: ${$t}`);e.push(xt)}return new Uint8Array(e)}const base256emoji=from$6({prefix:"🚀",name:"base256emoji",encode:encode$6,decode:decode$7}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$1=Object.freeze(Object.defineProperty({__proto__:null,base64,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),identity$1=from$6({prefix:"\0",name:"identity",encode:_t=>toString$6(_t),decode:_t=>fromString$1(_t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const from$5=({name:_t,code:e,encode:$t})=>new Hasher(_t,e,$t);class Hasher{constructor(e,$t,xt){this.name=e,this.code=$t,this.encode=xt}digest(e){if(e instanceof Uint8Array){const $t=this.encode(e);return $t instanceof Uint8Array?create(this.code,$t):$t.then(xt=>create(this.code,xt))}else throw Error("Unknown type, must be binary type")}}const sha$5=_t=>async e=>new Uint8Array(await crypto.subtle.digest(_t,e)),sha256$4=from$5({name:"sha2-256",code:18,encode:sha$5("SHA-256")}),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$1,...base256emoji$1};function allocUnsafe(_t=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array(globalThis.Buffer.allocUnsafe(_t)):new Uint8Array(_t)}function createCodec(_t,e,$t,xt){return{name:_t,prefix:e,encoder:{name:_t,prefix:e,encode:$t},decoder:{decode:xt}}}const string$1=createCodec("utf8","u",_t=>"u"+new TextDecoder("utf8").decode(_t),_t=>new TextEncoder().encode(_t.substring(1))),ascii=createCodec("ascii","a",_t=>{let e="a";for(let $t=0;$t<_t.length;$t++)e+=String.fromCharCode(_t[$t]);return e},_t=>{_t=_t.substring(1);const e=allocUnsafe(_t.length);for(let $t=0;$t<_t.length;$t++)e[$t]=_t.charCodeAt($t);return e}),BASES={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString(_t,e="utf8"){const $t=BASES[e];if($t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(_t,"utf-8")):$t.decoder.decode(`${$t.prefix}${_t}`)}const defaultChunkValidator=()=>async function*(e){for await(const $t of e){if($t.length===void 0)throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof $t=="string"||$t instanceof String)yield fromString($t.toString());else if(Array.isArray($t))yield Uint8Array.from($t);else if($t instanceof Uint8Array)yield $t;else throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}},DEFAULT_MAX_CHILDREN_PER_NODE=174;function balanced(_t){const e=DEFAULT_MAX_CHILDREN_PER_NODE;return async function $t(xt,At){const kt=[];for await(const Bt of batch(xt,e))kt.push(await At(Bt));return kt.length>1?$t(kt,At):kt[0]}}class Dir{constructor(e,$t){dn(this,"options");dn(this,"root");dn(this,"dir");dn(this,"path");dn(this,"dirty");dn(this,"flat");dn(this,"parent");dn(this,"parentKey");dn(this,"unixfs");dn(this,"mode");dn(this,"mtime");dn(this,"cid");dn(this,"size");dn(this,"nodeSize");this.options=$t??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}}const CID_V0=CID.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),CID_V1=CID.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class DirFlat extends Dir{constructor($t,xt){super($t,xt);dn(this,"_children");this._children=new Map}async put($t,xt){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set($t,xt)}async get($t){return Promise.resolve(this._children.get($t))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(const[$t,xt]of this._children.entries())yield{key:$t,child:xt}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(const[$t,xt]of this._children.entries())xt.size!=null&&xt.cid!=null&&(this.nodeSize+=$t.length+(this.options.cidVersion===1?CID_V1.bytes.byteLength:CID_V0.bytes.byteLength));return this.nodeSize}async*flush($t){const xt=[];for(const[Ut,Nt]of this._children.entries()){let qt=Nt;if(Nt instanceof Dir)for await(const Kt of Nt.flush($t))qt=Kt,yield Kt;qt.size!=null&&qt.cid!=null&&xt.push({Name:Ut,Tsize:Number(qt.size),Hash:qt.cid})}const At=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode}),kt={Data:At.marshal(),Links:xt},Bt=encode$8(prepare(kt)),jt=await persist(Bt,$t,this.options),Lt=Bt.length+kt.Links.reduce((Ut,Nt)=>Ut+(Nt.Tsize==null?0:Nt.Tsize),0);this.cid=jt,this.size=Lt,yield{cid:jt,unixfs:At,path:this.path,size:BigInt(Lt)}}}var murmurHash3js={exports:{}};(function(_t,e){(function($t,xt){var At={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function kt(Ht){if(!Array.isArray(Ht)&&!ArrayBuffer.isView(Ht))return!1;for(var Jt=0;Jt<Ht.length;Jt++)if(!Number.isInteger(Ht[Jt])||Ht[Jt]<0||Ht[Jt]>255)return!1;return!0}function Bt(Ht,Jt){return(Ht&65535)*Jt+(((Ht>>>16)*Jt&65535)<<16)}function jt(Ht,Jt){return Ht<<Jt|Ht>>>32-Jt}function Lt(Ht){return Ht^=Ht>>>16,Ht=Bt(Ht,2246822507),Ht^=Ht>>>13,Ht=Bt(Ht,3266489909),Ht^=Ht>>>16,Ht}function Ut(Ht,Jt){Ht=[Ht[0]>>>16,Ht[0]&65535,Ht[1]>>>16,Ht[1]&65535],Jt=[Jt[0]>>>16,Jt[0]&65535,Jt[1]>>>16,Jt[1]&65535];var rr=[0,0,0,0];return rr[3]+=Ht[3]+Jt[3],rr[2]+=rr[3]>>>16,rr[3]&=65535,rr[2]+=Ht[2]+Jt[2],rr[1]+=rr[2]>>>16,rr[2]&=65535,rr[1]+=Ht[1]+Jt[1],rr[0]+=rr[1]>>>16,rr[1]&=65535,rr[0]+=Ht[0]+Jt[0],rr[0]&=65535,[rr[0]<<16|rr[1],rr[2]<<16|rr[3]]}function Nt(Ht,Jt){Ht=[Ht[0]>>>16,Ht[0]&65535,Ht[1]>>>16,Ht[1]&65535],Jt=[Jt[0]>>>16,Jt[0]&65535,Jt[1]>>>16,Jt[1]&65535];var rr=[0,0,0,0];return rr[3]+=Ht[3]*Jt[3],rr[2]+=rr[3]>>>16,rr[3]&=65535,rr[2]+=Ht[2]*Jt[3],rr[1]+=rr[2]>>>16,rr[2]&=65535,rr[2]+=Ht[3]*Jt[2],rr[1]+=rr[2]>>>16,rr[2]&=65535,rr[1]+=Ht[1]*Jt[3],rr[0]+=rr[1]>>>16,rr[1]&=65535,rr[1]+=Ht[2]*Jt[2],rr[0]+=rr[1]>>>16,rr[1]&=65535,rr[1]+=Ht[3]*Jt[1],rr[0]+=rr[1]>>>16,rr[1]&=65535,rr[0]+=Ht[0]*Jt[3]+Ht[1]*Jt[2]+Ht[2]*Jt[1]+Ht[3]*Jt[0],rr[0]&=65535,[rr[0]<<16|rr[1],rr[2]<<16|rr[3]]}function qt(Ht,Jt){return Jt%=64,Jt===32?[Ht[1],Ht[0]]:Jt<32?[Ht[0]<<Jt|Ht[1]>>>32-Jt,Ht[1]<<Jt|Ht[0]>>>32-Jt]:(Jt-=32,[Ht[1]<<Jt|Ht[0]>>>32-Jt,Ht[0]<<Jt|Ht[1]>>>32-Jt])}function Kt(Ht,Jt){return Jt%=64,Jt===0?Ht:Jt<32?[Ht[0]<<Jt|Ht[1]>>>32-Jt,Ht[1]<<Jt]:[Ht[1]<<Jt-32,0]}function zt(Ht,Jt){return[Ht[0]^Jt[0],Ht[1]^Jt[1]]}function Vt(Ht){return Ht=zt(Ht,[0,Ht[0]>>>1]),Ht=Nt(Ht,[4283543511,3981806797]),Ht=zt(Ht,[0,Ht[0]>>>1]),Ht=Nt(Ht,[3301882366,444984403]),Ht=zt(Ht,[0,Ht[0]>>>1]),Ht}At.x86.hash32=function(Ht,Jt){if(At.inputValidation&&!kt(Ht))return xt;Jt=Jt||0;for(var rr=Ht.length%4,Qt=Ht.length-rr,Wt=Jt,nr=0,yr=3432918353,vr=461845907,Ir=0;Ir<Qt;Ir=Ir+4)nr=Ht[Ir]|Ht[Ir+1]<<8|Ht[Ir+2]<<16|Ht[Ir+3]<<24,nr=Bt(nr,yr),nr=jt(nr,15),nr=Bt(nr,vr),Wt^=nr,Wt=jt(Wt,13),Wt=Bt(Wt,5)+3864292196;switch(nr=0,rr){case 3:nr^=Ht[Ir+2]<<16;case 2:nr^=Ht[Ir+1]<<8;case 1:nr^=Ht[Ir],nr=Bt(nr,yr),nr=jt(nr,15),nr=Bt(nr,vr),Wt^=nr}return Wt^=Ht.length,Wt=Lt(Wt),Wt>>>0},At.x86.hash128=function(Ht,Jt){if(At.inputValidation&&!kt(Ht))return xt;Jt=Jt||0;for(var rr=Ht.length%16,Qt=Ht.length-rr,Wt=Jt,nr=Jt,yr=Jt,vr=Jt,Ir=0,xr=0,Or=0,Nr=0,kr=597399067,lr=2869860233,ir=951274213,Xt=2716044179,er=0;er<Qt;er=er+16)Ir=Ht[er]|Ht[er+1]<<8|Ht[er+2]<<16|Ht[er+3]<<24,xr=Ht[er+4]|Ht[er+5]<<8|Ht[er+6]<<16|Ht[er+7]<<24,Or=Ht[er+8]|Ht[er+9]<<8|Ht[er+10]<<16|Ht[er+11]<<24,Nr=Ht[er+12]|Ht[er+13]<<8|Ht[er+14]<<16|Ht[er+15]<<24,Ir=Bt(Ir,kr),Ir=jt(Ir,15),Ir=Bt(Ir,lr),Wt^=Ir,Wt=jt(Wt,19),Wt+=nr,Wt=Bt(Wt,5)+1444728091,xr=Bt(xr,lr),xr=jt(xr,16),xr=Bt(xr,ir),nr^=xr,nr=jt(nr,17),nr+=yr,nr=Bt(nr,5)+197830471,Or=Bt(Or,ir),Or=jt(Or,17),Or=Bt(Or,Xt),yr^=Or,yr=jt(yr,15),yr+=vr,yr=Bt(yr,5)+2530024501,Nr=Bt(Nr,Xt),Nr=jt(Nr,18),Nr=Bt(Nr,kr),vr^=Nr,vr=jt(vr,13),vr+=Wt,vr=Bt(vr,5)+850148119;switch(Ir=0,xr=0,Or=0,Nr=0,rr){case 15:Nr^=Ht[er+14]<<16;case 14:Nr^=Ht[er+13]<<8;case 13:Nr^=Ht[er+12],Nr=Bt(Nr,Xt),Nr=jt(Nr,18),Nr=Bt(Nr,kr),vr^=Nr;case 12:Or^=Ht[er+11]<<24;case 11:Or^=Ht[er+10]<<16;case 10:Or^=Ht[er+9]<<8;case 9:Or^=Ht[er+8],Or=Bt(Or,ir),Or=jt(Or,17),Or=Bt(Or,Xt),yr^=Or;case 8:xr^=Ht[er+7]<<24;case 7:xr^=Ht[er+6]<<16;case 6:xr^=Ht[er+5]<<8;case 5:xr^=Ht[er+4],xr=Bt(xr,lr),xr=jt(xr,16),xr=Bt(xr,ir),nr^=xr;case 4:Ir^=Ht[er+3]<<24;case 3:Ir^=Ht[er+2]<<16;case 2:Ir^=Ht[er+1]<<8;case 1:Ir^=Ht[er],Ir=Bt(Ir,kr),Ir=jt(Ir,15),Ir=Bt(Ir,lr),Wt^=Ir}return Wt^=Ht.length,nr^=Ht.length,yr^=Ht.length,vr^=Ht.length,Wt+=nr,Wt+=yr,Wt+=vr,nr+=Wt,yr+=Wt,vr+=Wt,Wt=Lt(Wt),nr=Lt(nr),yr=Lt(yr),vr=Lt(vr),Wt+=nr,Wt+=yr,Wt+=vr,nr+=Wt,yr+=Wt,vr+=Wt,("00000000"+(Wt>>>0).toString(16)).slice(-8)+("00000000"+(nr>>>0).toString(16)).slice(-8)+("00000000"+(yr>>>0).toString(16)).slice(-8)+("00000000"+(vr>>>0).toString(16)).slice(-8)},At.x64.hash128=function(Ht,Jt){if(At.inputValidation&&!kt(Ht))return xt;Jt=Jt||0;for(var rr=Ht.length%16,Qt=Ht.length-rr,Wt=[0,Jt],nr=[0,Jt],yr=[0,0],vr=[0,0],Ir=[2277735313,289559509],xr=[1291169091,658871167],Or=0;Or<Qt;Or=Or+16)yr=[Ht[Or+4]|Ht[Or+5]<<8|Ht[Or+6]<<16|Ht[Or+7]<<24,Ht[Or]|Ht[Or+1]<<8|Ht[Or+2]<<16|Ht[Or+3]<<24],vr=[Ht[Or+12]|Ht[Or+13]<<8|Ht[Or+14]<<16|Ht[Or+15]<<24,Ht[Or+8]|Ht[Or+9]<<8|Ht[Or+10]<<16|Ht[Or+11]<<24],yr=Nt(yr,Ir),yr=qt(yr,31),yr=Nt(yr,xr),Wt=zt(Wt,yr),Wt=qt(Wt,27),Wt=Ut(Wt,nr),Wt=Ut(Nt(Wt,[0,5]),[0,1390208809]),vr=Nt(vr,xr),vr=qt(vr,33),vr=Nt(vr,Ir),nr=zt(nr,vr),nr=qt(nr,31),nr=Ut(nr,Wt),nr=Ut(Nt(nr,[0,5]),[0,944331445]);switch(yr=[0,0],vr=[0,0],rr){case 15:vr=zt(vr,Kt([0,Ht[Or+14]],48));case 14:vr=zt(vr,Kt([0,Ht[Or+13]],40));case 13:vr=zt(vr,Kt([0,Ht[Or+12]],32));case 12:vr=zt(vr,Kt([0,Ht[Or+11]],24));case 11:vr=zt(vr,Kt([0,Ht[Or+10]],16));case 10:vr=zt(vr,Kt([0,Ht[Or+9]],8));case 9:vr=zt(vr,[0,Ht[Or+8]]),vr=Nt(vr,xr),vr=qt(vr,33),vr=Nt(vr,Ir),nr=zt(nr,vr);case 8:yr=zt(yr,Kt([0,Ht[Or+7]],56));case 7:yr=zt(yr,Kt([0,Ht[Or+6]],48));case 6:yr=zt(yr,Kt([0,Ht[Or+5]],40));case 5:yr=zt(yr,Kt([0,Ht[Or+4]],32));case 4:yr=zt(yr,Kt([0,Ht[Or+3]],24));case 3:yr=zt(yr,Kt([0,Ht[Or+2]],16));case 2:yr=zt(yr,Kt([0,Ht[Or+1]],8));case 1:yr=zt(yr,[0,Ht[Or]]),yr=Nt(yr,Ir),yr=qt(yr,31),yr=Nt(yr,xr),Wt=zt(Wt,yr)}return Wt=zt(Wt,[0,Ht.length]),nr=zt(nr,[0,Ht.length]),Wt=Ut(Wt,nr),nr=Ut(nr,Wt),Wt=Vt(Wt),nr=Vt(nr),Wt=Ut(Wt,nr),nr=Ut(nr,Wt),("00000000"+(Wt[0]>>>0).toString(16)).slice(-8)+("00000000"+(Wt[1]>>>0).toString(16)).slice(-8)+("00000000"+(nr[0]>>>0).toString(16)).slice(-8)+("00000000"+(nr[1]>>>0).toString(16)).slice(-8)},_t.exports&&(e=_t.exports=At),e.murmurHash3=At})()})(murmurHash3js,murmurHash3js.exports);var murmurHash3jsExports=murmurHash3js.exports,murmurhash3jsRevisited=murmurHash3jsExports;const mur=getDefaultExportFromCjs(murmurhash3jsRevisited),murmur3128=from$7({name:"murmur3-128",code:34,encode:_t=>fromHex(mur.x64.hash128(_t))}),BITS_PER_BYTE=7;var sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,$t){let xt=this._internalPositionFor(e,!1);if($t===void 0)xt!==-1&&(this._unsetInternalPos(xt),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let At=!1;xt===-1?(xt=this._data.length,this._setBit(e),this._changedData=!0):At=!0,this._setInternalPos(xt,e,$t,At),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const $t=this._internalPositionFor(e,!0);if($t!==-1)return this._data[$t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let $t=0;for(;$t<this.length;)e(this.get($t),$t,this),$t++}map(e){let $t=0,xt=new Array(this.length);for(;$t<this.length;)xt[$t]=e(this.get($t),$t,this),$t++;return xt}reduce(e,$t){let xt=0,At=$t;for(;xt<this.length;){const kt=this.get(xt);At=e(At,kt,xt),xt++}return At}find(e){let $t=0,xt,At;for(;$t<this.length&&!xt;)At=this.get($t),xt=e(At),$t++;return xt?At:void 0}_internalPositionFor(e,$t){const xt=this._bytePosFor(e,$t);if(xt>=this._bitArrays.length)return-1;const At=this._bitArrays[xt],kt=e-xt*BITS_PER_BYTE;if(!((At&1<<kt)>0))return-1;const jt=this._bitArrays.slice(0,xt).reduce(popCountReduce,0),Lt=~(4294967295<<kt+1),Ut=popCount(At&Lt);return jt+Ut-1}_bytePosFor(e,$t){const xt=Math.floor(e/BITS_PER_BYTE),At=xt+1;for(;!$t&&this._bitArrays.length<At;)this._bitArrays.push(0);return xt}_setBit(e){const $t=this._bytePosFor(e,!1);this._bitArrays[$t]|=1<<e-$t*BITS_PER_BYTE}_unsetBit(e){const $t=this._bytePosFor(e,!1);this._bitArrays[$t]&=~(1<<e-$t*BITS_PER_BYTE)}_setInternalPos(e,$t,xt,At){const kt=this._data,Bt=[$t,xt];if(At)this._sortData(),kt[e]=Bt;else{if(kt.length)if(kt[kt.length-1][0]>=$t)kt.push(Bt);else if(kt[0][0]<=$t)kt.unshift(Bt);else{const jt=Math.round(kt.length/2);this._data=kt.slice(0,jt).concat(Bt).concat(kt.slice(jt))}else this._data.push(Bt);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){const e=[];let $t=8,xt=0,At=0,kt;const Bt=this._bitArrays.slice();for(;Bt.length||xt;){xt===0&&(kt=Bt.shift(),xt=7);const Lt=Math.min(xt,$t),Ut=~(255<<Lt),Nt=kt&Ut;At|=Nt<<8-$t,kt=kt>>>Lt,xt-=Lt,$t-=Lt,(!$t||!xt&&!Bt.length)&&(e.push(At),At=0,$t=8)}for(var jt=e.length-1;jt>0&&e[jt]===0;jt--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(valueOnly)}};function popCountReduce(_t,e){return _t+popCount(e)}function popCount(_t){let e=_t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function sortInternal(_t,e){return _t[0]-e[0]}function valueOnly(_t){return _t[1]}const SparseArray=getDefaultExportFromCjs(sparseArray);class Bucket{constructor(e,$t,xt=0){dn(this,"_options");dn(this,"_popCount");dn(this,"_parent");dn(this,"_posAtParent");dn(this,"_children");dn(this,"key");this._options=e,this._popCount=0,this._parent=$t,this._posAtParent=xt,this._children=new SparseArray,this.key=null}async put(e,$t){const xt=await this._findNewBucketAndPos(e);xt.bucket._putAt(xt,e,$t)}async get(e){const $t=await this._findChild(e);if($t!=null)return $t.value}async del(e){const $t=await this._findPlace(e),xt=$t.bucket._at($t.pos);xt!=null&&xt.key===e&&$t.bucket._delAt($t.pos)}leafCount(){return this._children.compactArray().reduce(($t,xt)=>xt instanceof Bucket?$t+xt.leafCount():$t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const $t of e)$t instanceof Bucket?yield*$t.eachLeafSeries():yield $t}serialize(e,$t){const xt=[];return $t(this._children.reduce((At,kt,Bt)=>(kt!=null&&(kt instanceof Bucket?At.push(kt.serialize(e,$t)):At.push(e(kt,Bt))),At),xt))}async asyncTransform(e,$t){return asyncTransformBucket(this,e,$t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const $t=await this._findPlace(e),xt=$t.bucket._at($t.pos);if(!(xt instanceof Bucket)&&xt!=null&&xt.key===e)return xt}async _findPlace(e){const $t=this._options.hash(typeof e=="string"?fromString$3(e):e),xt=await $t.take(this._options.bits),At=this._children.get(xt);return At instanceof Bucket?At._findPlace($t):{bucket:this,pos:xt,hash:$t,existingChild:At}}async _findNewBucketAndPos(e){const $t=await this._findPlace(e);if($t.existingChild!=null&&$t.existingChild.key!==e){const xt=new Bucket(this._options,$t.bucket,$t.pos);$t.bucket._putObjectAt($t.pos,xt);const At=await xt._findPlace($t.existingChild.hash);return At.bucket._putAt(At,$t.existingChild.key,$t.existingChild.value),xt._findNewBucketAndPos($t.hash)}return $t}_putAt(e,$t,xt){this._putObjectAt(e.pos,{key:$t,value:xt,hash:e.hash})}_putObjectAt(e,$t){this._children.get(e)==null&&this._popCount++,this._children.set(e,$t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(exists$4);if(e!=null&&!(e instanceof Bucket)){const $t=e.hash;$t.untake(this._options.bits);const xt={pos:this._posAtParent,hash:$t,bucket:this._parent};this._parent._putAt(xt,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function exists$4(_t){return!!_t}function mapNode(_t,e){return _t.key}function reduceNodes(_t){return _t}async function asyncTransformBucket(_t,e,$t){const xt=[];for(const At of _t._children.compactArray())if(At instanceof Bucket)await asyncTransformBucket(At,e,$t);else{const kt=await e(At);xt.push({bitField:_t._children.bitField(),children:kt})}return $t(xt)}const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];class ConsumableBuffer{constructor(e){dn(this,"_value");dn(this,"_currentBytePos");dn(this,"_currentBitPos");this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let $t=e,xt=0;for(;$t>0&&this._haveBits();){const At=this._value[this._currentBytePos],kt=this._currentBitPos+1,Bt=Math.min(kt,$t),jt=byteBitsToInt(At,kt-Bt,Bt);xt=(xt<<Bt)+jt,$t-=Bt,this._currentBitPos-=Bt,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return xt}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function byteBitsToInt(_t,e,$t){const xt=maskFor(e,$t);return(_t&xt)>>>e}function maskFor(_t,e){return START_MASKS[_t]&STOP_MASKS[Math.min(e+_t-1,7)]}function wrapHash(_t){function e($t){return $t instanceof InfiniteHash?$t:new InfiniteHash($t,_t)}return e}class InfiniteHash{constructor(e,$t){dn(this,"_value");dn(this,"_hashFn");dn(this,"_depth");dn(this,"_availableBits");dn(this,"_currentBufferIndex");dn(this,"_buffers");if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=$t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let $t=e;for(;this._availableBits<$t;)await this._produceMoreBits();let xt=0;for(;$t>0;){const At=this._buffers[this._currentBufferIndex],kt=Math.min(At.availableBits(),$t),Bt=At.take(kt);xt=(xt<<kt)+Bt,$t-=kt,this._availableBits-=kt,At.availableBits()===0&&this._currentBufferIndex++}return xt}untake(e){let $t=e;for(;$t>0;){const xt=this._buffers[this._currentBufferIndex],At=Math.min(xt.totalBits()-xt.availableBits(),$t);xt.untake(At),$t-=At,this._availableBits+=At,this._currentBufferIndex>0&&xt.totalBits()===xt.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?concat$2([this._value,Uint8Array.from([this._depth])]):this._value,$t=await this._hashFn(e),xt=new ConsumableBuffer($t);this._buffers.push(xt),this._availableBits+=xt.availableBits()}}function createHAMT(_t){if(_t==null||_t.hashFn==null)throw new Error("please define an options.hashFn");const e={bits:_t.bits??8,hash:wrapHash(_t.hashFn)};return new Bucket(e)}async function hamtHashFn(_t){return(await murmur3128.encode(_t)).slice(0,8).reverse()}const HAMT_HASH_CODE=BigInt(34);class DirSharded extends Dir{constructor($t,xt){super($t,xt);dn(this,"_bucket");this._bucket=createHAMT({hashFn:hamtHashFn,bits:8})}async put($t,xt){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put($t,xt)}async get($t){return this._bucket.get($t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:$t,value:xt}of this._bucket.eachLeafSeries())yield{key:$t,child:xt}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=calculateSize(this._bucket,this,this.options),this.nodeSize)}async*flush($t){for await(const xt of flush(this._bucket,$t,this,this.options))yield{...xt,path:this.path}}}async function*flush(_t,e,$t,xt){const At=_t._children,kt=[];let Bt=0n;for(let zt=0;zt<At.length;zt++){const Vt=At.get(zt);if(Vt==null)continue;const Ht=zt.toString(16).toUpperCase().padStart(2,"0");if(Vt instanceof Bucket){let Jt;for await(const rr of flush(Vt,e,null,xt))Jt=rr;if(Jt==null)throw new Error("Could not flush sharded directory, no subshard found");kt.push({Name:Ht,Tsize:Number(Jt.size),Hash:Jt.cid}),Bt+=Jt.size}else if(isDir(Vt.value)){const Jt=Vt.value;let rr;for await(const Wt of Jt.flush(e))rr=Wt,yield rr;if(rr==null)throw new Error("Did not flush dir");const Qt=Ht+Vt.key;kt.push({Name:Qt,Tsize:Number(rr.size),Hash:rr.cid}),Bt+=rr.size}else{const Jt=Vt.value;if(Jt.cid==null)continue;const rr=Ht+Vt.key,Qt=Jt.size;kt.push({Name:rr,Tsize:Number(Qt),Hash:Jt.cid}),Bt+=BigInt(Qt??0)}}const jt=Uint8Array.from(At.bitField().reverse()),Lt=new UnixFS({type:"hamt-sharded-directory",data:jt,fanout:BigInt(_t.tableSize()),hashType:HAMT_HASH_CODE,mtime:$t==null?void 0:$t.mtime,mode:$t==null?void 0:$t.mode}),Ut={Data:Lt.marshal(),Links:kt},Nt=encode$8(prepare(Ut)),qt=await persist(Nt,e,xt),Kt=BigInt(Nt.byteLength)+Bt;yield{cid:qt,unixfs:Lt,size:Kt}}function isDir(_t){return typeof _t.flush=="function"}function calculateSize(_t,e,$t){const xt=_t._children,At=[];for(let Lt=0;Lt<xt.length;Lt++){const Ut=xt.get(Lt);if(Ut==null)continue;const Nt=Lt.toString(16).toUpperCase().padStart(2,"0");if(Ut instanceof Bucket){const qt=calculateSize(Ut,null,$t);At.push({Name:Nt,Tsize:Number(qt),Hash:$t.cidVersion===0?CID_V0:CID_V1})}else if(typeof Ut.value.flush=="function"){const Kt=Ut.value.nodeSize();At.push({Name:Nt+Ut.key,Tsize:Number(Kt),Hash:$t.cidVersion===0?CID_V0:CID_V1})}else{const qt=Ut.value;if(qt.cid==null)continue;const Kt=Nt+Ut.key,zt=qt.size;At.push({Name:Kt,Tsize:Number(zt),Hash:qt.cid})}}const kt=Uint8Array.from(xt.bitField().reverse()),Bt=new UnixFS({type:"hamt-sharded-directory",data:kt,fanout:BigInt(_t.tableSize()),hashType:HAMT_HASH_CODE,mtime:e==null?void 0:e.mtime,mode:e==null?void 0:e.mode});return encode$8(prepare({Data:Bt.marshal(),Links:At})).length}async function flatToShard(_t,e,$t,xt){let At=e;e instanceof DirFlat&&e.estimateNodeSize()>$t&&(At=await convertToShard(e,xt));const kt=At.parent;if(kt!=null){if(At!==e){if(_t!=null&&(_t.parent=At),At.parentKey==null)throw new Error("No parent key found");await kt.put(At.parentKey,At)}return flatToShard(At,kt,$t,xt)}return At}async function convertToShard(_t,e){const $t=new DirSharded({root:_t.root,dir:!0,parent:_t.parent,parentKey:_t.parentKey,path:_t.path,dirty:_t.dirty,flat:!1,mtime:_t.mtime,mode:_t.mode},e);for await(const{key:xt,child:At}of _t.eachChildSeries())await $t.put(xt,At);return $t}const toPathComponents=(_t="")=>(_t.trim().match(/([^\\/]|\\\/)+/g)??[]).filter(Boolean);async function addToTree(_t,e,$t){var jt,Lt;const xt=toPathComponents(_t.path??""),At=xt.length-1;let kt=e,Bt="";for(let Ut=0;Ut<xt.length;Ut++){const Nt=xt[Ut];Bt+=`${Bt!==""?"/":""}${Nt}`;const qt=Ut===At;if(kt.dirty=!0,kt.cid=void 0,kt.size=void 0,qt)await kt.put(Nt,_t),e=await flatToShard(null,kt,$t.shardSplitThresholdBytes,$t);else{let Kt=await kt.get(Nt);(Kt==null||!(Kt instanceof Dir))&&(Kt=new DirFlat({root:!1,dir:!0,parent:kt,parentKey:Nt,path:Bt,dirty:!0,flat:!0,mtime:(jt=Kt==null?void 0:Kt.unixfs)==null?void 0:jt.mtime,mode:(Lt=Kt==null?void 0:Kt.unixfs)==null?void 0:Lt.mode},$t)),await kt.put(Nt,Kt),kt=Kt}}return e}async function*flushAndYield(_t,e){var $t;if(!(_t instanceof Dir)){(($t=_t.unixfs)==null?void 0:$t.isDirectory())===!0&&(yield _t);return}yield*_t.flush(e)}function defaultTreeBuilder(_t){return async function*($t,xt){let At=new DirFlat({root:!0,dir:!0,path:"",dirty:!0,flat:!0},_t),kt,Bt=!1;for await(const jt of $t){if(jt==null)continue;const Lt=`${jt.originalPath??""}`.split("/")[0];Lt!=null&&Lt!==""&&(kt==null?(kt=Lt,Bt=!0):kt!==Lt&&(Bt=!1)),At=await addToTree(jt,At,_t),(jt.unixfs==null||!jt.unixfs.isDirectory())&&(yield jt)}if(_t.wrapWithDirectory||Bt&&At.childCount()>1)yield*flushAndYield(At,xt);else for await(const jt of At.eachChildSeries())jt!=null&&(yield*flushAndYield(jt.child,xt))}}async function*importer(_t,e,$t={}){let xt;Symbol.asyncIterator in _t||Symbol.iterator in _t?xt=_t:xt=[_t];const At=$t.wrapWithDirectory??!1,kt=$t.shardSplitThresholdBytes??262144,Bt=$t.cidVersion??1,jt=$t.rawLeaves??!0,Lt=$t.leafType??"file",Ut=$t.fileImportConcurrency??50,Nt=$t.blockWriteConcurrency??10,qt=$t.reduceSingleLeafToSelf??!0,Kt=$t.chunker??fixedSize(),zt=$t.chunkValidator??defaultChunkValidator(),Vt=$t.dagBuilder??defaultDagBuilder({chunker:Kt,chunkValidator:zt,wrapWithDirectory:At,layout:$t.layout??balanced(),bufferImporter:$t.bufferImporter??defaultBufferImporter({cidVersion:Bt,rawLeaves:jt,leafType:Lt,onProgress:$t.onProgress}),blockWriteConcurrency:Nt,reduceSingleLeafToSelf:qt,cidVersion:Bt,onProgress:$t.onProgress}),Ht=$t.treeBuilder??defaultTreeBuilder({wrapWithDirectory:At,shardSplitThresholdBytes:kt,cidVersion:Bt,onProgress:$t.onProgress});for await(const Jt of Ht(parallelBatch(Vt(xt,e),Ut),e))yield{cid:Jt.cid,path:Jt.path,unixfs:Jt.unixfs,size:Jt.size}}var __awaiter$K=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__asyncValues$1=function(_t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=_t[Symbol.asyncIterator],$t;return e?e.call(_t):(_t=typeof __values=="function"?__values(_t):_t[Symbol.iterator](),$t={},xt("next"),xt("throw"),xt("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function xt(kt){$t[kt]=_t[kt]&&function(Bt){return new Promise(function(jt,Lt){Bt=_t[kt](Bt),At(jt,Lt,Bt.done,Bt.value)})}}function At(kt,Bt,jt,Lt){Promise.resolve(Lt).then(function(Ut){kt({value:Ut,done:jt})},Bt)}};const hashers={[sha256$7.code]:sha256$7},codecs={[code$4]:cbor};class Cid{static computeCid(e,$t=code$4,xt=sha256$7.code){return __awaiter$K(this,void 0,void 0,function*(){const At=codecs[$t];if(!At)throw new DwnError(DwnErrorCode.ComputeCidCodecNotSupported,`codec [${$t}] not supported`);const kt=hashers[xt];if(!kt)throw new DwnError(DwnErrorCode.ComputeCidMultihashNotSupported,`multihash code [${xt}] not supported`);const Bt=At.encode(e),jt=yield kt.digest(Bt);return(yield CID.createV1(At.code,jt)).toString()})}static parseCid(e){const $t=CID.parse(e).toV1();if(!codecs[$t.code])throw new DwnError(DwnErrorCode.ParseCidCodecNotSupported,`codec [${$t.code}] not supported`);if(!hashers[$t.multihash.code])throw new DwnError(DwnErrorCode.ParseCidMultihashNotSupported,`multihash code [${$t.multihash.code}] not supported`);return $t}static computeDagPbCidFromBytes(e){var $t,xt,At,kt;return __awaiter$K(this,void 0,void 0,function*(){const Bt=importer([{content:e}],new BlockstoreMock,{cidVersion:1});let jt;try{for(var Lt=!0,Ut=__asyncValues$1(Bt),Nt;Nt=yield Ut.next(),$t=Nt.done,!$t;Lt=!0)kt=Nt.value,Lt=!1,jt=kt}catch(qt){xt={error:qt}}finally{try{!Lt&&!$t&&(At=Ut.return)&&(yield At.call(Ut))}finally{if(xt)throw xt.error}}return jt?jt.cid.toString():""})}static computeDagPbCidFromStream(e){var $t,xt,At,kt;return __awaiter$K(this,void 0,void 0,function*(){const Bt=importer([{content:e}],new BlockstoreMock,{cidVersion:1});let jt;try{for(var Lt=!0,Ut=__asyncValues$1(Bt),Nt;Nt=yield Ut.next(),$t=Nt.done,!$t;Lt=!0)kt=Nt.value,Lt=!1,jt=kt}catch(qt){xt={error:qt}}finally{try{!Lt&&!$t&&(At=Ut.return)&&(yield At.call(Ut))}finally{if(xt)throw xt.error}}return jt?jt.cid.toString():""})}}var cryptoBrowserify={},browser$e={exports:{}},safeBuffer$2={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(_t,e){var $t=buffer$2,xt=$t.Buffer;function At(Bt,jt){for(var Lt in Bt)jt[Lt]=Bt[Lt]}xt.from&&xt.alloc&&xt.allocUnsafe&&xt.allocUnsafeSlow?_t.exports=$t:(At($t,e),e.Buffer=kt);function kt(Bt,jt,Lt){return xt(Bt,jt,Lt)}kt.prototype=Object.create(xt.prototype),At(xt,kt),kt.from=function(Bt,jt,Lt){if(typeof Bt=="number")throw new TypeError("Argument must not be a number");return xt(Bt,jt,Lt)},kt.alloc=function(Bt,jt,Lt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");var Ut=xt(Bt);return jt!==void 0?typeof Lt=="string"?Ut.fill(jt,Lt):Ut.fill(jt):Ut.fill(0),Ut},kt.allocUnsafe=function(Bt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");return xt(Bt)},kt.allocUnsafeSlow=function(Bt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");return $t.SlowBuffer(Bt)}})(safeBuffer$2,safeBuffer$2.exports);var safeBufferExports$1=safeBuffer$2.exports,MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$1(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$G=safeBufferExports$1.Buffer,crypto$6=globalThis.crypto||globalThis.msCrypto;crypto$6&&crypto$6.getRandomValues?browser$e.exports=randomBytes$4:browser$e.exports=oldBrowser$1;function randomBytes$4(_t,e){if(_t>MAX_UINT32)throw new RangeError("requested too many random bytes");var $t=Buffer$G.allocUnsafe(_t);if(_t>0)if(_t>MAX_BYTES)for(var xt=0;xt<_t;xt+=MAX_BYTES)crypto$6.getRandomValues($t.slice(xt,xt+MAX_BYTES));else crypto$6.getRandomValues($t);return typeof e=="function"?process$9.nextTick(function(){e(null,$t)}):$t}var browserExports$1=browser$e.exports,inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(e,$t){$t&&(e.super_=$t,e.prototype=Object.create($t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,$t){if($t){e.super_=$t;var xt=function(){};xt.prototype=$t.prototype,e.prototype=new xt,e.prototype.constructor=e}};var inherits_browserExports=inherits_browser.exports,readableBrowser$1={exports:{}},events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function(e,$t,xt){return Function.prototype.apply.call(e,$t,xt)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(_t){console&&console.warn&&console.warn(_t)}var NumberIsNaN$4=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once$6;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(_t){if(typeof _t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _t)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(_t){if(typeof _t!="number"||_t<0||NumberIsNaN$4(_t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_t+".");defaultMaxListeners=_t}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN$4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(_t){return _t._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:_t._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var $t=[],xt=1;xt<arguments.length;xt++)$t.push(arguments[xt]);var At=e==="error",kt=this._events;if(kt!==void 0)At=At&&kt.error===void 0;else if(!At)return!1;if(At){var Bt;if($t.length>0&&(Bt=$t[0]),Bt instanceof Error)throw Bt;var jt=new Error("Unhandled error."+(Bt?" ("+Bt.message+")":""));throw jt.context=Bt,jt}var Lt=kt[e];if(Lt===void 0)return!1;if(typeof Lt=="function")ReflectApply(Lt,this,$t);else for(var Ut=Lt.length,Nt=arrayClone(Lt,Ut),xt=0;xt<Ut;++xt)ReflectApply(Nt[xt],this,$t);return!0};function _addListener(_t,e,$t,xt){var At,kt,Bt;if(checkListener($t),kt=_t._events,kt===void 0?(kt=_t._events=Object.create(null),_t._eventsCount=0):(kt.newListener!==void 0&&(_t.emit("newListener",e,$t.listener?$t.listener:$t),kt=_t._events),Bt=kt[e]),Bt===void 0)Bt=kt[e]=$t,++_t._eventsCount;else if(typeof Bt=="function"?Bt=kt[e]=xt?[$t,Bt]:[Bt,$t]:xt?Bt.unshift($t):Bt.push($t),At=_getMaxListeners(_t),At>0&&Bt.length>At&&!Bt.warned){Bt.warned=!0;var jt=new Error("Possible EventEmitter memory leak detected. "+Bt.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");jt.name="MaxListenersExceededWarning",jt.emitter=_t,jt.type=e,jt.count=Bt.length,ProcessEmitWarning(jt)}return _t}EventEmitter$1.prototype.addListener=function(e,$t){return _addListener(this,e,$t,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,$t){return _addListener(this,e,$t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(_t,e,$t){var xt={fired:!1,wrapFn:void 0,target:_t,type:e,listener:$t},At=onceWrapper.bind(xt);return At.listener=$t,xt.wrapFn=At,At}EventEmitter$1.prototype.once=function(e,$t){return checkListener($t),this.on(e,_onceWrap(this,e,$t)),this};EventEmitter$1.prototype.prependOnceListener=function(e,$t){return checkListener($t),this.prependListener(e,_onceWrap(this,e,$t)),this};EventEmitter$1.prototype.removeListener=function(e,$t){var xt,At,kt,Bt,jt;if(checkListener($t),At=this._events,At===void 0)return this;if(xt=At[e],xt===void 0)return this;if(xt===$t||xt.listener===$t)--this._eventsCount===0?this._events=Object.create(null):(delete At[e],At.removeListener&&this.emit("removeListener",e,xt.listener||$t));else if(typeof xt!="function"){for(kt=-1,Bt=xt.length-1;Bt>=0;Bt--)if(xt[Bt]===$t||xt[Bt].listener===$t){jt=xt[Bt].listener,kt=Bt;break}if(kt<0)return this;kt===0?xt.shift():spliceOne(xt,kt),xt.length===1&&(At[e]=xt[0]),At.removeListener!==void 0&&this.emit("removeListener",e,jt||$t)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var $t,xt,At;if(xt=this._events,xt===void 0)return this;if(xt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):xt[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete xt[e]),this;if(arguments.length===0){var kt=Object.keys(xt),Bt;for(At=0;At<kt.length;++At)Bt=kt[At],Bt!=="removeListener"&&this.removeAllListeners(Bt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($t=xt[e],typeof $t=="function")this.removeListener(e,$t);else if($t!==void 0)for(At=$t.length-1;At>=0;At--)this.removeListener(e,$t[At]);return this};function _listeners(_t,e,$t){var xt=_t._events;if(xt===void 0)return[];var At=xt[e];return At===void 0?[]:typeof At=="function"?$t?[At.listener||At]:[At]:$t?unwrapListeners(At):arrayClone(At,At.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(_t,e){return typeof _t.listenerCount=="function"?_t.listenerCount(e):listenerCount.call(_t,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(_t){var e=this._events;if(e!==void 0){var $t=e[_t];if(typeof $t=="function")return 1;if($t!==void 0)return $t.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(_t,e){for(var $t=new Array(e),xt=0;xt<e;++xt)$t[xt]=_t[xt];return $t}function spliceOne(_t,e){for(;e+1<_t.length;e++)_t[e]=_t[e+1];_t.pop()}function unwrapListeners(_t){for(var e=new Array(_t.length),$t=0;$t<e.length;++$t)e[$t]=_t[$t].listener||_t[$t];return e}function once$6(_t,e){return new Promise(function($t,xt){function At(Bt){_t.removeListener(e,kt),xt(Bt)}function kt(){typeof _t.removeListener=="function"&&_t.removeListener("error",At),$t([].slice.call(arguments))}eventTargetAgnosticAddListener(_t,e,kt,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(_t,At,{once:!0})})}function addErrorHandlerIfEventEmitter(_t,e,$t){typeof _t.on=="function"&&eventTargetAgnosticAddListener(_t,"error",e,$t)}function eventTargetAgnosticAddListener(_t,e,$t,xt){if(typeof _t.on=="function")xt.once?_t.once(e,$t):_t.on(e,$t);else if(typeof _t.addEventListener=="function")_t.addEventListener(e,function At(kt){xt.once&&_t.removeEventListener(e,At),$t(kt)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _t)}var eventsExports=events.exports,streamBrowser$1=eventsExports.EventEmitter,util$6={},types$1={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},$t=Symbol("test"),xt=Object($t);if(typeof $t=="string"||Object.prototype.toString.call($t)!=="[object Symbol]"||Object.prototype.toString.call(xt)!=="[object Symbol]")return!1;var At=42;e[$t]=At;for($t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var kt=Object.getOwnPropertySymbols(e);if(kt.length!==1||kt[0]!==$t||!Object.prototype.propertyIsEnumerable.call(e,$t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var Bt=Object.getOwnPropertyDescriptor(e,$t);if(Bt.value!==At||Bt.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function(){return hasSymbols$2()&&!!Symbol.toStringTag},esErrors=Error,_eval=EvalError,range=RangeError,ref$1=ReferenceError,syntax=SyntaxError,type$9=TypeError,uri$2=URIError,origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={__proto__:null,foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!(test instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(e,$t){for(var xt=[],At=0;At<e.length;At+=1)xt[At]=e[At];for(var kt=0;kt<$t.length;kt+=1)xt[kt+e.length]=$t[kt];return xt},slicy=function(e,$t){for(var xt=[],At=$t,kt=0;At<e.length;At+=1,kt+=1)xt[kt]=e[At];return xt},joiny=function(_t,e){for(var $t="",xt=0;xt<_t.length;xt+=1)$t+=_t[xt],xt+1<_t.length&&($t+=e);return $t},implementation$1=function(e){var $t=this;if(typeof $t!="function"||toStr$3.apply($t)!==funcType)throw new TypeError(ERROR_MESSAGE+$t);for(var xt=slicy(arguments,1),At,kt=function(){if(this instanceof At){var Nt=$t.apply(this,concatty(xt,arguments));return Object(Nt)===Nt?Nt:this}return $t.apply(e,concatty(xt,arguments))},Bt=max(0,$t.length-xt.length),jt=[],Lt=0;Lt<Bt;Lt++)jt[Lt]="$"+Lt;if(At=Function("binder","return function ("+joiny(jt,",")+"){ return binder.apply(this,arguments); }")(kt),$t.prototype){var Ut=function(){};Ut.prototype=$t.prototype,At.prototype=new Ut,Ut.prototype=null}return At},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call$1=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call$1,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref$1,$SyntaxError$1=syntax,$TypeError$2=type$9,$URIError=uri$2,$Function=Function,getEvalledConstructor=function(_t){try{return $Function('"use strict"; return ('+_t+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(_t){return _t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(_t){var errorProto=getProto$1(getProto$1(_t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function _t(e){var $t;if(e==="%AsyncFunction%")$t=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")$t=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")$t=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var xt=_t("%AsyncGeneratorFunction%");xt&&($t=xt.prototype)}else if(e==="%AsyncIteratorPrototype%"){var At=_t("%AsyncGenerator%");At&&getProto$1&&($t=getProto$1(At.prototype))}return INTRINSICS[e]=$t,$t},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=hasown,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var $t=$strSlice(e,0,1),xt=$strSlice(e,-1);if($t==="%"&&xt!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(xt==="%"&&$t!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var At=[];return $replace(e,rePropName,function(kt,Bt,jt,Lt){At[At.length]=jt?$replace(Lt,reEscapeChar,"$1"):Bt||kt}),At},getBaseIntrinsic=function(e,$t){var xt=e,At;if(hasOwn(LEGACY_ALIASES,xt)&&(At=LEGACY_ALIASES[xt],xt="%"+At[0]+"%"),hasOwn(INTRINSICS,xt)){var kt=INTRINSICS[xt];if(kt===needsEval&&(kt=doEval(xt)),typeof kt>"u"&&!$t)throw new $TypeError$2("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:At,name:xt,value:kt}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,$t){if(typeof e!="string"||e.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $t!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var xt=stringToPath(e),At=xt.length>0?xt[0]:"",kt=getBaseIntrinsic("%"+At+"%",$t),Bt=kt.name,jt=kt.value,Lt=!1,Ut=kt.alias;Ut&&(At=Ut[0],$spliceApply(xt,$concat([0,1],Ut)));for(var Nt=1,qt=!0;Nt<xt.length;Nt+=1){var Kt=xt[Nt],zt=$strSlice(Kt,0,1),Vt=$strSlice(Kt,-1);if((zt==='"'||zt==="'"||zt==="`"||Vt==='"'||Vt==="'"||Vt==="`")&&zt!==Vt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((Kt==="constructor"||!qt)&&(Lt=!0),At+="."+Kt,Bt="%"+At+"%",hasOwn(INTRINSICS,Bt))jt=INTRINSICS[Bt];else if(jt!=null){if(!(Kt in jt)){if(!$t)throw new $TypeError$2("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&Nt+1>=xt.length){var Ht=$gOPD$1(jt,Kt);qt=!!Ht,qt&&"get"in Ht&&!("originalValue"in Ht.get)?jt=Ht.get:jt=jt[Kt]}else qt=hasOwn(jt,Kt),jt=jt[Kt];qt&&!Lt&&(INTRINSICS[Bt]=jt)}}return jt},callBind$2={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var _t=getIntrinsic,e=_t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return esDefineProperty=e,esDefineProperty}var GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type$9,gopd=gopd$1,defineDataProperty=function(e,$t,xt){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof $t!="string"&&typeof $t!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var At=arguments.length>3?arguments[3]:null,kt=arguments.length>4?arguments[4]:null,Bt=arguments.length>5?arguments[5]:null,jt=arguments.length>6?arguments[6]:!1,Lt=!!gopd&&gopd(e,$t);if($defineProperty$1)$defineProperty$1(e,$t,{configurable:Bt===null&&Lt?Lt.configurable:!Bt,enumerable:At===null&&Lt?Lt.enumerable:!At,value:xt,writable:kt===null&&Lt?Lt.writable:!kt});else if(jt||!At&&!kt&&!Bt)e[$t]=xt;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type$9,$floor=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function(e,$t){if(typeof e!="function")throw new $TypeError("`fn` is not a function");if(typeof $t!="number"||$t<0||$t>4294967295||$floor($t)!==$t)throw new $TypeError("`length` must be a positive 32-bit integer");var xt=arguments.length>2&&!!arguments[2],At=!0,kt=!0;if("length"in e&&gOPD$1){var Bt=gOPD$1(e,"length");Bt&&!Bt.configurable&&(At=!1),Bt&&!Bt.writable&&(kt=!1)}return(At||kt||!xt)&&(hasDescriptors?define(e,"length",$t,!0,!0):define(e,"length",$t)),e};(function(_t){var e=functionBind,$t=getIntrinsic,xt=setFunctionLength,At=type$9,kt=$t("%Function.prototype.apply%"),Bt=$t("%Function.prototype.call%"),jt=$t("%Reflect.apply%",!0)||e.call(Bt,kt),Lt=requireEsDefineProperty(),Ut=$t("%Math.max%");_t.exports=function(Kt){if(typeof Kt!="function")throw new At("a function is required");var zt=jt(e,Bt,arguments);return xt(zt,1+Ut(0,Kt.length-(arguments.length-1)),!0)};var Nt=function(){return jt(e,kt,arguments)};Lt?Lt(_t.exports,"apply",{value:Nt}):_t.exports.apply=Nt})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic$1=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic$1("String.prototype.indexOf")),callBound$2=function(e,$t){var xt=GetIntrinsic$1(e,!!$t);return typeof xt=="function"&&$indexOf$1(e,".prototype.")>-1?callBind$1(xt):xt},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$3&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$1(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$1(e)!=="[object Array]"&&$toString$1(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr$1.call(e)))return!0;if(!hasToStringTag$2){var $t=toStr$2.call(e);return $t==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var xt=getGeneratorFunc();GeneratorFunction=xt?getProto(xt):!1}return getProto(e)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(_t){_t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var $t=fnToStr.call(e);return constructorRegex.test($t)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var $t=toStr$1.call(e);return($t===ddaClass||$t===ddaClass2||$t===ddaClass3||$t===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch($t){if($t!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var $t=toStr$1.call(e);return $t!==fnClass&&$t!==genClass&&!/^\[object HTML/.test($t)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$1=Object.prototype.hasOwnProperty,forEachArray=function(e,$t,xt){for(var At=0,kt=e.length;At<kt;At++)hasOwnProperty$1.call(e,At)&&(xt==null?$t(e[At],At,e):$t.call(xt,e[At],At,e))},forEachString=function(e,$t,xt){for(var At=0,kt=e.length;At<kt;At++)xt==null?$t(e.charAt(At),At,e):$t.call(xt,e.charAt(At),At,e)},forEachObject=function(e,$t,xt){for(var At in e)hasOwnProperty$1.call(e,At)&&(xt==null?$t(e[At],At,e):$t.call(xt,e[At],At,e))},forEach$3=function(e,$t,xt){if(!isCallable($t))throw new TypeError("iterator must be a function");var At;arguments.length>=3&&(At=xt),toStr.call(e)==="[object Array]"?forEachArray(e,$t,At):typeof e=="string"?forEachString(e,$t,At):forEachObject(e,$t,At)},forEach_1=forEach$3,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],possibleNames=possibleTypedArrayNames,g$2=globalThis,availableTypedArrays$1=function(){for(var e=[],$t=0;$t<possibleNames.length;$t++)typeof g$2[possibleNames[$t]]=="function"&&(e[e.length]=possibleNames[$t]);return e},forEach$2=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g$1=globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(e,$t){for(var xt=0;xt<e.length;xt+=1)if(e[xt]===$t)return xt;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach$2(typedArrays,function(_t){var e=new g$1[_t];if(Symbol.toStringTag in e){var $t=getPrototypeOf(e),xt=gOPD($t,Symbol.toStringTag);if(!xt){var At=getPrototypeOf($t);xt=gOPD(At,Symbol.toStringTag)}cache["$"+_t]=callBind(xt.get)}}):forEach$2(typedArrays,function(_t){var e=new g$1[_t],$t=e.slice||e.set;$t&&(cache["$"+_t]=callBind($t))});var tryTypedArrays=function(e){var $t=!1;return forEach$2(cache,function(xt,At){if(!$t)try{"$"+xt(e)===At&&($t=$slice(At,1))}catch{}}),$t},trySlices=function(e){var $t=!1;return forEach$2(cache,function(xt,At){if(!$t)try{xt(e),$t=$slice(At,1)}catch{}}),$t},whichTypedArray$1=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag){var $t=$slice($toString(e),8,-1);return $indexOf(typedArrays,$t)>-1?$t:$t!=="Object"?!1:trySlices(e)}return gOPD?tryTypedArrays(e):null},whichTypedArray=whichTypedArray$1,isTypedArray=function(e){return!!whichTypedArray(e)};(function(_t){var e=isArguments,$t=isGeneratorFunction,xt=whichTypedArray$1,At=isTypedArray;function kt(jr){return jr.call.bind(jr)}var Bt=typeof BigInt<"u",jt=typeof Symbol<"u",Lt=kt(Object.prototype.toString),Ut=kt(Number.prototype.valueOf),Nt=kt(String.prototype.valueOf),qt=kt(Boolean.prototype.valueOf);if(Bt)var Kt=kt(BigInt.prototype.valueOf);if(jt)var zt=kt(Symbol.prototype.valueOf);function Vt(jr,Kr){if(typeof jr!="object")return!1;try{return Kr(jr),!0}catch{return!1}}_t.isArgumentsObject=e,_t.isGeneratorFunction=$t,_t.isTypedArray=At;function Ht(jr){return typeof Promise<"u"&&jr instanceof Promise||jr!==null&&typeof jr=="object"&&typeof jr.then=="function"&&typeof jr.catch=="function"}_t.isPromise=Ht;function Jt(jr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(jr):At(jr)||br(jr)}_t.isArrayBufferView=Jt;function rr(jr){return xt(jr)==="Uint8Array"}_t.isUint8Array=rr;function Qt(jr){return xt(jr)==="Uint8ClampedArray"}_t.isUint8ClampedArray=Qt;function Wt(jr){return xt(jr)==="Uint16Array"}_t.isUint16Array=Wt;function nr(jr){return xt(jr)==="Uint32Array"}_t.isUint32Array=nr;function yr(jr){return xt(jr)==="Int8Array"}_t.isInt8Array=yr;function vr(jr){return xt(jr)==="Int16Array"}_t.isInt16Array=vr;function Ir(jr){return xt(jr)==="Int32Array"}_t.isInt32Array=Ir;function xr(jr){return xt(jr)==="Float32Array"}_t.isFloat32Array=xr;function Or(jr){return xt(jr)==="Float64Array"}_t.isFloat64Array=Or;function Nr(jr){return xt(jr)==="BigInt64Array"}_t.isBigInt64Array=Nr;function kr(jr){return xt(jr)==="BigUint64Array"}_t.isBigUint64Array=kr;function lr(jr){return Lt(jr)==="[object Map]"}lr.working=typeof Map<"u"&&lr(new Map);function ir(jr){return typeof Map>"u"?!1:lr.working?lr(jr):jr instanceof Map}_t.isMap=ir;function Xt(jr){return Lt(jr)==="[object Set]"}Xt.working=typeof Set<"u"&&Xt(new Set);function er(jr){return typeof Set>"u"?!1:Xt.working?Xt(jr):jr instanceof Set}_t.isSet=er;function pr(jr){return Lt(jr)==="[object WeakMap]"}pr.working=typeof WeakMap<"u"&&pr(new WeakMap);function ur(jr){return typeof WeakMap>"u"?!1:pr.working?pr(jr):jr instanceof WeakMap}_t.isWeakMap=ur;function gr(jr){return Lt(jr)==="[object WeakSet]"}gr.working=typeof WeakSet<"u"&&gr(new WeakSet);function ar(jr){return gr(jr)}_t.isWeakSet=ar;function tr(jr){return Lt(jr)==="[object ArrayBuffer]"}tr.working=typeof ArrayBuffer<"u"&&tr(new ArrayBuffer);function dr(jr){return typeof ArrayBuffer>"u"?!1:tr.working?tr(jr):jr instanceof ArrayBuffer}_t.isArrayBuffer=dr;function fr(jr){return Lt(jr)==="[object DataView]"}fr.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&fr(new DataView(new ArrayBuffer(1),0,1));function br(jr){return typeof DataView>"u"?!1:fr.working?fr(jr):jr instanceof DataView}_t.isDataView=br;var Sr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Dr(jr){return Lt(jr)==="[object SharedArrayBuffer]"}function Er(jr){return typeof Sr>"u"?!1:(typeof Dr.working>"u"&&(Dr.working=Dr(new Sr)),Dr.working?Dr(jr):jr instanceof Sr)}_t.isSharedArrayBuffer=Er;function wr(jr){return Lt(jr)==="[object AsyncFunction]"}_t.isAsyncFunction=wr;function Tr(jr){return Lt(jr)==="[object Map Iterator]"}_t.isMapIterator=Tr;function Mr(jr){return Lt(jr)==="[object Set Iterator]"}_t.isSetIterator=Mr;function Lr(jr){return Lt(jr)==="[object Generator]"}_t.isGeneratorObject=Lr;function Cr(jr){return Lt(jr)==="[object WebAssembly.Module]"}_t.isWebAssemblyCompiledModule=Cr;function Br(jr){return Vt(jr,Ut)}_t.isNumberObject=Br;function $r(jr){return Vt(jr,Nt)}_t.isStringObject=$r;function Rr(jr){return Vt(jr,qt)}_t.isBooleanObject=Rr;function Ur(jr){return Bt&&Vt(jr,Kt)}_t.isBigIntObject=Ur;function Pr(jr){return jt&&Vt(jr,zt)}_t.isSymbolObject=Pr;function _r(jr){return Br(jr)||$r(jr)||Rr(jr)||Ur(jr)||Pr(jr)}_t.isBoxedPrimitive=_r;function Ar(jr){return typeof Uint8Array<"u"&&(dr(jr)||Er(jr))}_t.isAnyArrayBuffer=Ar,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(jr){Object.defineProperty(_t,jr,{enumerable:!1,value:function(){throw new Error(jr+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(_t){var e={},$t=Object.getOwnPropertyDescriptors||function(Sr){for(var Dr=Object.keys(Sr),Er={},wr=0;wr<Dr.length;wr++)Er[Dr[wr]]=Object.getOwnPropertyDescriptor(Sr,Dr[wr]);return Er},xt=/%[sdj%]/g;_t.format=function(br){if(!vr(br)){for(var Sr=[],Dr=0;Dr<arguments.length;Dr++)Sr.push(jt(arguments[Dr]));return Sr.join(" ")}for(var Dr=1,Er=arguments,wr=Er.length,Tr=String(br).replace(xt,function(Lr){if(Lr==="%%")return"%";if(Dr>=wr)return Lr;switch(Lr){case"%s":return String(Er[Dr++]);case"%d":return Number(Er[Dr++]);case"%j":try{return JSON.stringify(Er[Dr++])}catch{return"[Circular]"}default:return Lr}}),Mr=Er[Dr];Dr<wr;Mr=Er[++Dr])Wt(Mr)||!Nr(Mr)?Tr+=" "+Mr:Tr+=" "+jt(Mr);return Tr},_t.deprecate=function(br,Sr){if(typeof process$9<"u"&&process$9.noDeprecation===!0)return br;if(typeof process$9>"u")return function(){return _t.deprecate(br,Sr).apply(this,arguments)};var Dr=!1;function Er(){if(!Dr){if(process$9.throwDeprecation)throw new Error(Sr);process$9.traceDeprecation?console.trace(Sr):console.error(Sr),Dr=!0}return br.apply(this,arguments)}return Er};var At={},kt=/^$/;if(e.NODE_DEBUG){var Bt=e.NODE_DEBUG;Bt=Bt.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),kt=new RegExp("^"+Bt+"$","i")}_t.debuglog=function(br){if(br=br.toUpperCase(),!At[br])if(kt.test(br)){var Sr=process$9.pid;At[br]=function(){var Dr=_t.format.apply(_t,arguments);console.error("%s %d: %s",br,Sr,Dr)}}else At[br]=function(){};return At[br]};function jt(br,Sr){var Dr={seen:[],stylize:Ut};return arguments.length>=3&&(Dr.depth=arguments[2]),arguments.length>=4&&(Dr.colors=arguments[3]),Qt(Sr)?Dr.showHidden=Sr:Sr&&_t._extend(Dr,Sr),xr(Dr.showHidden)&&(Dr.showHidden=!1),xr(Dr.depth)&&(Dr.depth=2),xr(Dr.colors)&&(Dr.colors=!1),xr(Dr.customInspect)&&(Dr.customInspect=!0),Dr.colors&&(Dr.stylize=Lt),qt(Dr,br,Dr.depth)}_t.inspect=jt,jt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},jt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Lt(br,Sr){var Dr=jt.styles[Sr];return Dr?"\x1B["+jt.colors[Dr][0]+"m"+br+"\x1B["+jt.colors[Dr][1]+"m":br}function Ut(br,Sr){return br}function Nt(br){var Sr={};return br.forEach(function(Dr,Er){Sr[Dr]=!0}),Sr}function qt(br,Sr,Dr){if(br.customInspect&&Sr&&ir(Sr.inspect)&&Sr.inspect!==_t.inspect&&!(Sr.constructor&&Sr.constructor.prototype===Sr)){var Er=Sr.inspect(Dr,br);return vr(Er)||(Er=qt(br,Er,Dr)),Er}var wr=Kt(br,Sr);if(wr)return wr;var Tr=Object.keys(Sr),Mr=Nt(Tr);if(br.showHidden&&(Tr=Object.getOwnPropertyNames(Sr)),lr(Sr)&&(Tr.indexOf("message")>=0||Tr.indexOf("description")>=0))return zt(Sr);if(Tr.length===0){if(ir(Sr)){var Lr=Sr.name?": "+Sr.name:"";return br.stylize("[Function"+Lr+"]","special")}if(Or(Sr))return br.stylize(RegExp.prototype.toString.call(Sr),"regexp");if(kr(Sr))return br.stylize(Date.prototype.toString.call(Sr),"date");if(lr(Sr))return zt(Sr)}var Cr="",Br=!1,$r=["{","}"];if(rr(Sr)&&(Br=!0,$r=["[","]"]),ir(Sr)){var Rr=Sr.name?": "+Sr.name:"";Cr=" [Function"+Rr+"]"}if(Or(Sr)&&(Cr=" "+RegExp.prototype.toString.call(Sr)),kr(Sr)&&(Cr=" "+Date.prototype.toUTCString.call(Sr)),lr(Sr)&&(Cr=" "+zt(Sr)),Tr.length===0&&(!Br||Sr.length==0))return $r[0]+Cr+$r[1];if(Dr<0)return Or(Sr)?br.stylize(RegExp.prototype.toString.call(Sr),"regexp"):br.stylize("[Object]","special");br.seen.push(Sr);var Ur;return Br?Ur=Vt(br,Sr,Dr,Mr,Tr):Ur=Tr.map(function(Pr){return Ht(br,Sr,Dr,Mr,Pr,Br)}),br.seen.pop(),Jt(Ur,Cr,$r)}function Kt(br,Sr){if(xr(Sr))return br.stylize("undefined","undefined");if(vr(Sr)){var Dr="'"+JSON.stringify(Sr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return br.stylize(Dr,"string")}if(yr(Sr))return br.stylize(""+Sr,"number");if(Qt(Sr))return br.stylize(""+Sr,"boolean");if(Wt(Sr))return br.stylize("null","null")}function zt(br){return"["+Error.prototype.toString.call(br)+"]"}function Vt(br,Sr,Dr,Er,wr){for(var Tr=[],Mr=0,Lr=Sr.length;Mr<Lr;++Mr)ar(Sr,String(Mr))?Tr.push(Ht(br,Sr,Dr,Er,String(Mr),!0)):Tr.push("");return wr.forEach(function(Cr){Cr.match(/^\d+$/)||Tr.push(Ht(br,Sr,Dr,Er,Cr,!0))}),Tr}function Ht(br,Sr,Dr,Er,wr,Tr){var Mr,Lr,Cr;if(Cr=Object.getOwnPropertyDescriptor(Sr,wr)||{value:Sr[wr]},Cr.get?Cr.set?Lr=br.stylize("[Getter/Setter]","special"):Lr=br.stylize("[Getter]","special"):Cr.set&&(Lr=br.stylize("[Setter]","special")),ar(Er,wr)||(Mr="["+wr+"]"),Lr||(br.seen.indexOf(Cr.value)<0?(Wt(Dr)?Lr=qt(br,Cr.value,null):Lr=qt(br,Cr.value,Dr-1),Lr.indexOf(`
`)>-1&&(Tr?Lr=Lr.split(`
`).map(function(Br){return"  "+Br}).join(`
`).slice(2):Lr=`
`+Lr.split(`
`).map(function(Br){return"   "+Br}).join(`
`))):Lr=br.stylize("[Circular]","special")),xr(Mr)){if(Tr&&wr.match(/^\d+$/))return Lr;Mr=JSON.stringify(""+wr),Mr.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Mr=Mr.slice(1,-1),Mr=br.stylize(Mr,"name")):(Mr=Mr.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Mr=br.stylize(Mr,"string"))}return Mr+": "+Lr}function Jt(br,Sr,Dr){var Er=br.reduce(function(wr,Tr){return Tr.indexOf(`
`)>=0,wr+Tr.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Er>60?Dr[0]+(Sr===""?"":Sr+`
 `)+" "+br.join(`,
  `)+" "+Dr[1]:Dr[0]+Sr+" "+br.join(", ")+" "+Dr[1]}_t.types=types$1;function rr(br){return Array.isArray(br)}_t.isArray=rr;function Qt(br){return typeof br=="boolean"}_t.isBoolean=Qt;function Wt(br){return br===null}_t.isNull=Wt;function nr(br){return br==null}_t.isNullOrUndefined=nr;function yr(br){return typeof br=="number"}_t.isNumber=yr;function vr(br){return typeof br=="string"}_t.isString=vr;function Ir(br){return typeof br=="symbol"}_t.isSymbol=Ir;function xr(br){return br===void 0}_t.isUndefined=xr;function Or(br){return Nr(br)&&er(br)==="[object RegExp]"}_t.isRegExp=Or,_t.types.isRegExp=Or;function Nr(br){return typeof br=="object"&&br!==null}_t.isObject=Nr;function kr(br){return Nr(br)&&er(br)==="[object Date]"}_t.isDate=kr,_t.types.isDate=kr;function lr(br){return Nr(br)&&(er(br)==="[object Error]"||br instanceof Error)}_t.isError=lr,_t.types.isNativeError=lr;function ir(br){return typeof br=="function"}_t.isFunction=ir;function Xt(br){return br===null||typeof br=="boolean"||typeof br=="number"||typeof br=="string"||typeof br=="symbol"||typeof br>"u"}_t.isPrimitive=Xt,_t.isBuffer=isBufferBrowser;function er(br){return Object.prototype.toString.call(br)}function pr(br){return br<10?"0"+br.toString(10):br.toString(10)}var ur=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function gr(){var br=new Date,Sr=[pr(br.getHours()),pr(br.getMinutes()),pr(br.getSeconds())].join(":");return[br.getDate(),ur[br.getMonth()],Sr].join(" ")}_t.log=function(){console.log("%s - %s",gr(),_t.format.apply(_t,arguments))},_t.inherits=inherits_browserExports,_t._extend=function(br,Sr){if(!Sr||!Nr(Sr))return br;for(var Dr=Object.keys(Sr),Er=Dr.length;Er--;)br[Dr[Er]]=Sr[Dr[Er]];return br};function ar(br,Sr){return Object.prototype.hasOwnProperty.call(br,Sr)}var tr=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;_t.promisify=function(Sr){if(typeof Sr!="function")throw new TypeError('The "original" argument must be of type Function');if(tr&&Sr[tr]){var Dr=Sr[tr];if(typeof Dr!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Dr,tr,{value:Dr,enumerable:!1,writable:!1,configurable:!0}),Dr}function Dr(){for(var Er,wr,Tr=new Promise(function(Cr,Br){Er=Cr,wr=Br}),Mr=[],Lr=0;Lr<arguments.length;Lr++)Mr.push(arguments[Lr]);Mr.push(function(Cr,Br){Cr?wr(Cr):Er(Br)});try{Sr.apply(this,Mr)}catch(Cr){wr(Cr)}return Tr}return Object.setPrototypeOf(Dr,Object.getPrototypeOf(Sr)),tr&&Object.defineProperty(Dr,tr,{value:Dr,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Dr,$t(Sr))},_t.promisify.custom=tr;function dr(br,Sr){if(!br){var Dr=new Error("Promise was rejected with a falsy value");Dr.reason=br,br=Dr}return Sr(br)}function fr(br){if(typeof br!="function")throw new TypeError('The "original" argument must be of type Function');function Sr(){for(var Dr=[],Er=0;Er<arguments.length;Er++)Dr.push(arguments[Er]);var wr=Dr.pop();if(typeof wr!="function")throw new TypeError("The last argument must be of type Function");var Tr=this,Mr=function(){return wr.apply(Tr,arguments)};br.apply(this,Dr).then(function(Lr){process$9.nextTick(Mr.bind(null,null,Lr))},function(Lr){process$9.nextTick(dr.bind(null,Lr,Mr))})}return Object.setPrototypeOf(Sr,Object.getPrototypeOf(br)),Object.defineProperties(Sr,$t(br)),Sr}_t.callbackify=fr})(util$6);var buffer_list$2,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list$2;hasRequiredBuffer_list=1;function _t(Vt,Ht){var Jt=Object.keys(Vt);if(Object.getOwnPropertySymbols){var rr=Object.getOwnPropertySymbols(Vt);Ht&&(rr=rr.filter(function(Qt){return Object.getOwnPropertyDescriptor(Vt,Qt).enumerable})),Jt.push.apply(Jt,rr)}return Jt}function e(Vt){for(var Ht=1;Ht<arguments.length;Ht++){var Jt=arguments[Ht]!=null?arguments[Ht]:{};Ht%2?_t(Object(Jt),!0).forEach(function(rr){$t(Vt,rr,Jt[rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(Jt)):_t(Object(Jt)).forEach(function(rr){Object.defineProperty(Vt,rr,Object.getOwnPropertyDescriptor(Jt,rr))})}return Vt}function $t(Vt,Ht,Jt){return Ht=Bt(Ht),Ht in Vt?Object.defineProperty(Vt,Ht,{value:Jt,enumerable:!0,configurable:!0,writable:!0}):Vt[Ht]=Jt,Vt}function xt(Vt,Ht){if(!(Vt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function At(Vt,Ht){for(var Jt=0;Jt<Ht.length;Jt++){var rr=Ht[Jt];rr.enumerable=rr.enumerable||!1,rr.configurable=!0,"value"in rr&&(rr.writable=!0),Object.defineProperty(Vt,Bt(rr.key),rr)}}function kt(Vt,Ht,Jt){return Ht&&At(Vt.prototype,Ht),Object.defineProperty(Vt,"prototype",{writable:!1}),Vt}function Bt(Vt){var Ht=jt(Vt,"string");return typeof Ht=="symbol"?Ht:String(Ht)}function jt(Vt,Ht){if(typeof Vt!="object"||Vt===null)return Vt;var Jt=Vt[Symbol.toPrimitive];if(Jt!==void 0){var rr=Jt.call(Vt,Ht||"default");if(typeof rr!="object")return rr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ht==="string"?String:Number)(Vt)}var Lt=buffer$2,Ut=Lt.Buffer,Nt=util$6,qt=Nt.inspect,Kt=qt&&qt.custom||"inspect";function zt(Vt,Ht,Jt){Ut.prototype.copy.call(Vt,Ht,Jt)}return buffer_list$2=function(){function Vt(){xt(this,Vt),this.head=null,this.tail=null,this.length=0}return kt(Vt,[{key:"push",value:function(Jt){var rr={data:Jt,next:null};this.length>0?this.tail.next=rr:this.head=rr,this.tail=rr,++this.length}},{key:"unshift",value:function(Jt){var rr={data:Jt,next:this.head};this.length===0&&(this.tail=rr),this.head=rr,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Jt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Jt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Jt){if(this.length===0)return"";for(var rr=this.head,Qt=""+rr.data;rr=rr.next;)Qt+=Jt+rr.data;return Qt}},{key:"concat",value:function(Jt){if(this.length===0)return Ut.alloc(0);for(var rr=Ut.allocUnsafe(Jt>>>0),Qt=this.head,Wt=0;Qt;)zt(Qt.data,rr,Wt),Wt+=Qt.data.length,Qt=Qt.next;return rr}},{key:"consume",value:function(Jt,rr){var Qt;return Jt<this.head.data.length?(Qt=this.head.data.slice(0,Jt),this.head.data=this.head.data.slice(Jt)):Jt===this.head.data.length?Qt=this.shift():Qt=rr?this._getString(Jt):this._getBuffer(Jt),Qt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Jt){var rr=this.head,Qt=1,Wt=rr.data;for(Jt-=Wt.length;rr=rr.next;){var nr=rr.data,yr=Jt>nr.length?nr.length:Jt;if(yr===nr.length?Wt+=nr:Wt+=nr.slice(0,Jt),Jt-=yr,Jt===0){yr===nr.length?(++Qt,rr.next?this.head=rr.next:this.head=this.tail=null):(this.head=rr,rr.data=nr.slice(yr));break}++Qt}return this.length-=Qt,Wt}},{key:"_getBuffer",value:function(Jt){var rr=Ut.allocUnsafe(Jt),Qt=this.head,Wt=1;for(Qt.data.copy(rr),Jt-=Qt.data.length;Qt=Qt.next;){var nr=Qt.data,yr=Jt>nr.length?nr.length:Jt;if(nr.copy(rr,rr.length-Jt,0,yr),Jt-=yr,Jt===0){yr===nr.length?(++Wt,Qt.next?this.head=Qt.next:this.head=this.tail=null):(this.head=Qt,Qt.data=nr.slice(yr));break}++Wt}return this.length-=Wt,rr}},{key:Kt,value:function(Jt,rr){return qt(this,e(e({},rr),{},{depth:0,customInspect:!1}))}}]),Vt}(),buffer_list$2}function destroy$3(_t,e){var $t=this,xt=this._readableState&&this._readableState.destroyed,At=this._writableState&&this._writableState.destroyed;return xt||At?(e?e(_t):_t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$9.nextTick(emitErrorNT$3,this,_t)):process$9.nextTick(emitErrorNT$3,this,_t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_t||null,function(kt){!e&&kt?$t._writableState?$t._writableState.errorEmitted?process$9.nextTick(emitCloseNT$2,$t):($t._writableState.errorEmitted=!0,process$9.nextTick(emitErrorAndCloseNT,$t,kt)):process$9.nextTick(emitErrorAndCloseNT,$t,kt):e?(process$9.nextTick(emitCloseNT$2,$t),e(kt)):process$9.nextTick(emitCloseNT$2,$t)}),this)}function emitErrorAndCloseNT(_t,e){emitErrorNT$3(_t,e),emitCloseNT$2(_t)}function emitCloseNT$2(_t){_t._writableState&&!_t._writableState.emitClose||_t._readableState&&!_t._readableState.emitClose||_t.emit("close")}function undestroy$3(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$3(_t,e){_t.emit("error",e)}function errorOrDestroy$2(_t,e){var $t=_t._readableState,xt=_t._writableState;$t&&$t.autoDestroy||xt&&xt.autoDestroy?_t.destroy(e):_t.emit("error",e)}var destroy_1$3={destroy:destroy$3,undestroy:undestroy$3,errorOrDestroy:errorOrDestroy$2},errorsBrowser={};function _inheritsLoose(_t,e){_t.prototype=Object.create(e.prototype),_t.prototype.constructor=_t,_t.__proto__=e}var codes$4={};function createErrorType(_t,e,$t){$t||($t=Error);function xt(kt,Bt,jt){return typeof e=="string"?e:e(kt,Bt,jt)}var At=function(kt){_inheritsLoose(Bt,kt);function Bt(jt,Lt,Ut){return kt.call(this,xt(jt,Lt,Ut))||this}return Bt}($t);At.prototype.name=$t.name,At.prototype.code=_t,codes$4[_t]=At}function oneOf$1(_t,e){if(Array.isArray(_t)){var $t=_t.length;return _t=_t.map(function(xt){return String(xt)}),$t>2?"one of ".concat(e," ").concat(_t.slice(0,$t-1).join(", "),", or ")+_t[$t-1]:$t===2?"one of ".concat(e," ").concat(_t[0]," or ").concat(_t[1]):"of ".concat(e," ").concat(_t[0])}else return"of ".concat(e," ").concat(String(_t))}function startsWith(_t,e,$t){return _t.substr(0,e.length)===e}function endsWith(_t,e,$t){return($t===void 0||$t>_t.length)&&($t=_t.length),_t.substring($t-e.length,$t)===e}function includes(_t,e,$t){return typeof $t!="number"&&($t=0),$t+e.length>_t.length?!1:_t.indexOf(e,$t)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(_t,e){return'The value "'+e+'" is invalid for option "'+_t+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(_t,e,$t){var xt;typeof e=="string"&&startsWith(e,"not ")?(xt="must not be",e=e.replace(/^not /,"")):xt="must be";var At;if(endsWith(_t," argument"))At="The ".concat(_t," ").concat(xt," ").concat(oneOf$1(e,"type"));else{var kt=includes(_t,".")?"property":"argument";At='The "'.concat(_t,'" ').concat(kt," ").concat(xt," ").concat(oneOf$1(e,"type"))}return At+=". Received type ".concat(typeof $t),At},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(_t){return"The "+_t+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(_t){return"Cannot call "+_t+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(_t){return"Unknown encoding: "+_t},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes$4;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$2(_t,e,$t){return _t.highWaterMark!=null?_t.highWaterMark:e?_t[$t]:null}function getHighWaterMark$4(_t,e,$t,xt){var At=highWaterMarkFrom$2(e,xt,$t);if(At!=null){if(!(isFinite(At)&&Math.floor(At)===At)||At<0){var kt=xt?$t:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(kt,At)}return Math.floor(At)}return _t.objectMode?16:16*1024}var state$2={getHighWaterMark:getHighWaterMark$4},browser$d=deprecate$1;function deprecate$1(_t,e){if(config$1("noDeprecation"))return _t;var $t=!1;function xt(){if(!$t){if(config$1("throwDeprecation"))throw new Error(e);config$1("traceDeprecation")?console.trace(e):console.warn(e),$t=!0}return _t.apply(this,arguments)}return xt}function config$1(_t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[_t];return e==null?!1:String(e).toLowerCase()==="true"}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=xr;function _t(Er){var wr=this;this.next=null,this.entry=null,this.finish=function(){Dr(wr,Er)}}var e;xr.WritableState=vr;var $t={deprecate:browser$d},xt=streamBrowser$1,At=buffer$2.Buffer,kt=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Bt(Er){return At.from(Er)}function jt(Er){return At.isBuffer(Er)||Er instanceof kt}var Lt=destroy_1$3,Ut=state$2,Nt=Ut.getHighWaterMark,qt=errorsBrowser.codes,Kt=qt.ERR_INVALID_ARG_TYPE,zt=qt.ERR_METHOD_NOT_IMPLEMENTED,Vt=qt.ERR_MULTIPLE_CALLBACK,Ht=qt.ERR_STREAM_CANNOT_PIPE,Jt=qt.ERR_STREAM_DESTROYED,rr=qt.ERR_STREAM_NULL_VALUES,Qt=qt.ERR_STREAM_WRITE_AFTER_END,Wt=qt.ERR_UNKNOWN_ENCODING,nr=Lt.errorOrDestroy;inherits_browserExports(xr,xt);function yr(){}function vr(Er,wr,Tr){e=e||require_stream_duplex$1(),Er=Er||{},typeof Tr!="boolean"&&(Tr=wr instanceof e),this.objectMode=!!Er.objectMode,Tr&&(this.objectMode=this.objectMode||!!Er.writableObjectMode),this.highWaterMark=Nt(this,Er,"writableHighWaterMark",Tr),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Mr=Er.decodeStrings===!1;this.decodeStrings=!Mr,this.defaultEncoding=Er.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Lr){pr(wr,Lr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Er.emitClose!==!1,this.autoDestroy=!!Er.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _t(this)}vr.prototype.getBuffer=function(){for(var wr=this.bufferedRequest,Tr=[];wr;)Tr.push(wr),wr=wr.next;return Tr},function(){try{Object.defineProperty(vr.prototype,"buffer",{get:$t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ir;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ir=Function.prototype[Symbol.hasInstance],Object.defineProperty(xr,Symbol.hasInstance,{value:function(wr){return Ir.call(this,wr)?!0:this!==xr?!1:wr&&wr._writableState instanceof vr}})):Ir=function(wr){return wr instanceof this};function xr(Er){e=e||require_stream_duplex$1();var wr=this instanceof e;if(!wr&&!Ir.call(xr,this))return new xr(Er);this._writableState=new vr(Er,this,wr),this.writable=!0,Er&&(typeof Er.write=="function"&&(this._write=Er.write),typeof Er.writev=="function"&&(this._writev=Er.writev),typeof Er.destroy=="function"&&(this._destroy=Er.destroy),typeof Er.final=="function"&&(this._final=Er.final)),xt.call(this)}xr.prototype.pipe=function(){nr(this,new Ht)};function Or(Er,wr){var Tr=new Qt;nr(Er,Tr),process$9.nextTick(wr,Tr)}function Nr(Er,wr,Tr,Mr){var Lr;return Tr===null?Lr=new rr:typeof Tr!="string"&&!wr.objectMode&&(Lr=new Kt("chunk",["string","Buffer"],Tr)),Lr?(nr(Er,Lr),process$9.nextTick(Mr,Lr),!1):!0}xr.prototype.write=function(Er,wr,Tr){var Mr=this._writableState,Lr=!1,Cr=!Mr.objectMode&&jt(Er);return Cr&&!At.isBuffer(Er)&&(Er=Bt(Er)),typeof wr=="function"&&(Tr=wr,wr=null),Cr?wr="buffer":wr||(wr=Mr.defaultEncoding),typeof Tr!="function"&&(Tr=yr),Mr.ending?Or(this,Tr):(Cr||Nr(this,Mr,Er,Tr))&&(Mr.pendingcb++,Lr=lr(this,Mr,Cr,Er,wr,Tr)),Lr},xr.prototype.cork=function(){this._writableState.corked++},xr.prototype.uncork=function(){var Er=this._writableState;Er.corked&&(Er.corked--,!Er.writing&&!Er.corked&&!Er.bufferProcessing&&Er.bufferedRequest&&ar(this,Er))},xr.prototype.setDefaultEncoding=function(wr){if(typeof wr=="string"&&(wr=wr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((wr+"").toLowerCase())>-1))throw new Wt(wr);return this._writableState.defaultEncoding=wr,this},Object.defineProperty(xr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function kr(Er,wr,Tr){return!Er.objectMode&&Er.decodeStrings!==!1&&typeof wr=="string"&&(wr=At.from(wr,Tr)),wr}Object.defineProperty(xr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function lr(Er,wr,Tr,Mr,Lr,Cr){if(!Tr){var Br=kr(wr,Mr,Lr);Mr!==Br&&(Tr=!0,Lr="buffer",Mr=Br)}var $r=wr.objectMode?1:Mr.length;wr.length+=$r;var Rr=wr.length<wr.highWaterMark;if(Rr||(wr.needDrain=!0),wr.writing||wr.corked){var Ur=wr.lastBufferedRequest;wr.lastBufferedRequest={chunk:Mr,encoding:Lr,isBuf:Tr,callback:Cr,next:null},Ur?Ur.next=wr.lastBufferedRequest:wr.bufferedRequest=wr.lastBufferedRequest,wr.bufferedRequestCount+=1}else ir(Er,wr,!1,$r,Mr,Lr,Cr);return Rr}function ir(Er,wr,Tr,Mr,Lr,Cr,Br){wr.writelen=Mr,wr.writecb=Br,wr.writing=!0,wr.sync=!0,wr.destroyed?wr.onwrite(new Jt("write")):Tr?Er._writev(Lr,wr.onwrite):Er._write(Lr,Cr,wr.onwrite),wr.sync=!1}function Xt(Er,wr,Tr,Mr,Lr){--wr.pendingcb,Tr?(process$9.nextTick(Lr,Mr),process$9.nextTick(br,Er,wr),Er._writableState.errorEmitted=!0,nr(Er,Mr)):(Lr(Mr),Er._writableState.errorEmitted=!0,nr(Er,Mr),br(Er,wr))}function er(Er){Er.writing=!1,Er.writecb=null,Er.length-=Er.writelen,Er.writelen=0}function pr(Er,wr){var Tr=Er._writableState,Mr=Tr.sync,Lr=Tr.writecb;if(typeof Lr!="function")throw new Vt;if(er(Tr),wr)Xt(Er,Tr,Mr,wr,Lr);else{var Cr=tr(Tr)||Er.destroyed;!Cr&&!Tr.corked&&!Tr.bufferProcessing&&Tr.bufferedRequest&&ar(Er,Tr),Mr?process$9.nextTick(ur,Er,Tr,Cr,Lr):ur(Er,Tr,Cr,Lr)}}function ur(Er,wr,Tr,Mr){Tr||gr(Er,wr),wr.pendingcb--,Mr(),br(Er,wr)}function gr(Er,wr){wr.length===0&&wr.needDrain&&(wr.needDrain=!1,Er.emit("drain"))}function ar(Er,wr){wr.bufferProcessing=!0;var Tr=wr.bufferedRequest;if(Er._writev&&Tr&&Tr.next){var Mr=wr.bufferedRequestCount,Lr=new Array(Mr),Cr=wr.corkedRequestsFree;Cr.entry=Tr;for(var Br=0,$r=!0;Tr;)Lr[Br]=Tr,Tr.isBuf||($r=!1),Tr=Tr.next,Br+=1;Lr.allBuffers=$r,ir(Er,wr,!0,wr.length,Lr,"",Cr.finish),wr.pendingcb++,wr.lastBufferedRequest=null,Cr.next?(wr.corkedRequestsFree=Cr.next,Cr.next=null):wr.corkedRequestsFree=new _t(wr),wr.bufferedRequestCount=0}else{for(;Tr;){var Rr=Tr.chunk,Ur=Tr.encoding,Pr=Tr.callback,_r=wr.objectMode?1:Rr.length;if(ir(Er,wr,!1,_r,Rr,Ur,Pr),Tr=Tr.next,wr.bufferedRequestCount--,wr.writing)break}Tr===null&&(wr.lastBufferedRequest=null)}wr.bufferedRequest=Tr,wr.bufferProcessing=!1}xr.prototype._write=function(Er,wr,Tr){Tr(new zt("_write()"))},xr.prototype._writev=null,xr.prototype.end=function(Er,wr,Tr){var Mr=this._writableState;return typeof Er=="function"?(Tr=Er,Er=null,wr=null):typeof wr=="function"&&(Tr=wr,wr=null),Er!=null&&this.write(Er,wr),Mr.corked&&(Mr.corked=1,this.uncork()),Mr.ending||Sr(this,Mr,Tr),this},Object.defineProperty(xr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function tr(Er){return Er.ending&&Er.length===0&&Er.bufferedRequest===null&&!Er.finished&&!Er.writing}function dr(Er,wr){Er._final(function(Tr){wr.pendingcb--,Tr&&nr(Er,Tr),wr.prefinished=!0,Er.emit("prefinish"),br(Er,wr)})}function fr(Er,wr){!wr.prefinished&&!wr.finalCalled&&(typeof Er._final=="function"&&!wr.destroyed?(wr.pendingcb++,wr.finalCalled=!0,process$9.nextTick(dr,Er,wr)):(wr.prefinished=!0,Er.emit("prefinish")))}function br(Er,wr){var Tr=tr(wr);if(Tr&&(fr(Er,wr),wr.pendingcb===0&&(wr.finished=!0,Er.emit("finish"),wr.autoDestroy))){var Mr=Er._readableState;(!Mr||Mr.autoDestroy&&Mr.endEmitted)&&Er.destroy()}return Tr}function Sr(Er,wr,Tr){wr.ending=!0,br(Er,wr),Tr&&(wr.finished?process$9.nextTick(Tr):Er.once("finish",Tr)),wr.ended=!0,Er.writable=!1}function Dr(Er,wr,Tr){var Mr=Er.entry;for(Er.entry=null;Mr;){var Lr=Mr.callback;wr.pendingcb--,Lr(Tr),Mr=Mr.next}wr.corkedRequestsFree.next=Er}return Object.defineProperty(xr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(wr){this._writableState&&(this._writableState.destroyed=wr)}}),xr.prototype.destroy=Lt.destroy,xr.prototype._undestroy=Lt.undestroy,xr.prototype._destroy=function(Er,wr){wr(Er)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var _t=Object.keys||function(Ut){var Nt=[];for(var qt in Ut)Nt.push(qt);return Nt};_stream_duplex$1=Bt;var e=require_stream_readable$1(),$t=require_stream_writable$1();inherits_browserExports(Bt,e);for(var xt=_t($t.prototype),At=0;At<xt.length;At++){var kt=xt[At];Bt.prototype[kt]||(Bt.prototype[kt]=$t.prototype[kt])}function Bt(Ut){if(!(this instanceof Bt))return new Bt(Ut);e.call(this,Ut),$t.call(this,Ut),this.allowHalfOpen=!0,Ut&&(Ut.readable===!1&&(this.readable=!1),Ut.writable===!1&&(this.writable=!1),Ut.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",jt)))}Object.defineProperty(Bt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Bt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Bt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function jt(){this._writableState.ended||process$9.nextTick(Lt,this)}function Lt(Ut){Ut.end()}return Object.defineProperty(Bt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(Nt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=Nt,this._writableState.destroyed=Nt)}}),_stream_duplex$1}var string_decoder={},Buffer$F=safeBufferExports$1.Buffer,isEncoding=Buffer$F.isEncoding||function(_t){switch(_t=""+_t,_t&&_t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(_t){if(!_t)return"utf8";for(var e;;)switch(_t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _t;default:if(e)return;_t=(""+_t).toLowerCase(),e=!0}}function normalizeEncoding$2(_t){var e=_normalizeEncoding(_t);if(typeof e!="string"&&(Buffer$F.isEncoding===isEncoding||!isEncoding(_t)))throw new Error("Unknown encoding: "+_t);return e||_t}string_decoder.StringDecoder=StringDecoder$1;function StringDecoder$1(_t){this.encoding=normalizeEncoding$2(_t);var e;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$F.allocUnsafe(e)}StringDecoder$1.prototype.write=function(_t){if(_t.length===0)return"";var e,$t;if(this.lastNeed){if(e=this.fillLast(_t),e===void 0)return"";$t=this.lastNeed,this.lastNeed=0}else $t=0;return $t<_t.length?e?e+this.text(_t,$t):this.text(_t,$t):e||""};StringDecoder$1.prototype.end=utf8End;StringDecoder$1.prototype.text=utf8Text;StringDecoder$1.prototype.fillLast=function(_t){if(this.lastNeed<=_t.length)return _t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_t.length),this.lastNeed-=_t.length};function utf8CheckByte(_t){return _t<=127?0:_t>>5===6?2:_t>>4===14?3:_t>>3===30?4:_t>>6===2?-1:-2}function utf8CheckIncomplete(_t,e,$t){var xt=e.length-1;if(xt<$t)return 0;var At=utf8CheckByte(e[xt]);return At>=0?(At>0&&(_t.lastNeed=At-1),At):--xt<$t||At===-2?0:(At=utf8CheckByte(e[xt]),At>=0?(At>0&&(_t.lastNeed=At-2),At):--xt<$t||At===-2?0:(At=utf8CheckByte(e[xt]),At>=0?(At>0&&(At===2?At=0:_t.lastNeed=At-3),At):0))}function utf8CheckExtraBytes(_t,e,$t){if((e[0]&192)!==128)return _t.lastNeed=0,"�";if(_t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return _t.lastNeed=1,"�";if(_t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return _t.lastNeed=2,"�"}}function utf8FillLast(_t){var e=this.lastTotal-this.lastNeed,$t=utf8CheckExtraBytes(this,_t);if($t!==void 0)return $t;if(this.lastNeed<=_t.length)return _t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_t.copy(this.lastChar,e,0,_t.length),this.lastNeed-=_t.length}function utf8Text(_t,e){var $t=utf8CheckIncomplete(this,_t,e);if(!this.lastNeed)return _t.toString("utf8",e);this.lastTotal=$t;var xt=_t.length-($t-this.lastNeed);return _t.copy(this.lastChar,0,xt),_t.toString("utf8",e,xt)}function utf8End(_t){var e=_t&&_t.length?this.write(_t):"";return this.lastNeed?e+"�":e}function utf16Text(_t,e){if((_t.length-e)%2===0){var $t=_t.toString("utf16le",e);if($t){var xt=$t.charCodeAt($t.length-1);if(xt>=55296&&xt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_t[_t.length-2],this.lastChar[1]=_t[_t.length-1],$t.slice(0,-1)}return $t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_t[_t.length-1],_t.toString("utf16le",e,_t.length-1)}function utf16End(_t){var e=_t&&_t.length?this.write(_t):"";if(this.lastNeed){var $t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,$t)}return e}function base64Text(_t,e){var $t=(_t.length-e)%3;return $t===0?_t.toString("base64",e):(this.lastNeed=3-$t,this.lastTotal=3,$t===1?this.lastChar[0]=_t[_t.length-1]:(this.lastChar[0]=_t[_t.length-2],this.lastChar[1]=_t[_t.length-1]),_t.toString("base64",e,_t.length-$t))}function base64End(_t){var e=_t&&_t.length?this.write(_t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(_t){return _t.toString(this.encoding)}function simpleEnd(_t){return _t&&_t.length?this.write(_t):""}var ERR_STREAM_PREMATURE_CLOSE$4=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$5(_t){var e=!1;return function(){if(!e){e=!0;for(var $t=arguments.length,xt=new Array($t),At=0;At<$t;At++)xt[At]=arguments[At];_t.apply(this,xt)}}}function noop$3(){}function isRequest$5(_t){return _t.setHeader&&typeof _t.abort=="function"}function eos$7(_t,e,$t){if(typeof e=="function")return eos$7(_t,null,e);e||(e={}),$t=once$5($t||noop$3);var xt=e.readable||e.readable!==!1&&_t.readable,At=e.writable||e.writable!==!1&&_t.writable,kt=function(){_t.writable||jt()},Bt=_t._writableState&&_t._writableState.finished,jt=function(){At=!1,Bt=!0,xt||$t.call(_t)},Lt=_t._readableState&&_t._readableState.endEmitted,Ut=function(){xt=!1,Lt=!0,At||$t.call(_t)},Nt=function(Vt){$t.call(_t,Vt)},qt=function(){var Vt;if(xt&&!Lt)return(!_t._readableState||!_t._readableState.ended)&&(Vt=new ERR_STREAM_PREMATURE_CLOSE$4),$t.call(_t,Vt);if(At&&!Bt)return(!_t._writableState||!_t._writableState.ended)&&(Vt=new ERR_STREAM_PREMATURE_CLOSE$4),$t.call(_t,Vt)},Kt=function(){_t.req.on("finish",jt)};return isRequest$5(_t)?(_t.on("complete",jt),_t.on("abort",qt),_t.req?Kt():_t.on("request",Kt)):At&&!_t._writableState&&(_t.on("end",kt),_t.on("close",kt)),_t.on("end",Ut),_t.on("finish",jt),e.error!==!1&&_t.on("error",Nt),_t.on("close",qt),function(){_t.removeListener("complete",jt),_t.removeListener("abort",qt),_t.removeListener("request",Kt),_t.req&&_t.req.removeListener("finish",jt),_t.removeListener("end",kt),_t.removeListener("close",kt),_t.removeListener("finish",jt),_t.removeListener("end",Ut),_t.removeListener("error",Nt),_t.removeListener("close",qt)}}var endOfStream$2=eos$7,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var _t;function e(Wt,nr,yr){return nr=$t(nr),nr in Wt?Object.defineProperty(Wt,nr,{value:yr,enumerable:!0,configurable:!0,writable:!0}):Wt[nr]=yr,Wt}function $t(Wt){var nr=xt(Wt,"string");return typeof nr=="symbol"?nr:String(nr)}function xt(Wt,nr){if(typeof Wt!="object"||Wt===null)return Wt;var yr=Wt[Symbol.toPrimitive];if(yr!==void 0){var vr=yr.call(Wt,nr||"default");if(typeof vr!="object")return vr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(nr==="string"?String:Number)(Wt)}var At=endOfStream$2,kt=Symbol("lastResolve"),Bt=Symbol("lastReject"),jt=Symbol("error"),Lt=Symbol("ended"),Ut=Symbol("lastPromise"),Nt=Symbol("handlePromise"),qt=Symbol("stream");function Kt(Wt,nr){return{value:Wt,done:nr}}function zt(Wt){var nr=Wt[kt];if(nr!==null){var yr=Wt[qt].read();yr!==null&&(Wt[Ut]=null,Wt[kt]=null,Wt[Bt]=null,nr(Kt(yr,!1)))}}function Vt(Wt){process$9.nextTick(zt,Wt)}function Ht(Wt,nr){return function(yr,vr){Wt.then(function(){if(nr[Lt]){yr(Kt(void 0,!0));return}nr[Nt](yr,vr)},vr)}}var Jt=Object.getPrototypeOf(function(){}),rr=Object.setPrototypeOf((_t={get stream(){return this[qt]},next:function(){var nr=this,yr=this[jt];if(yr!==null)return Promise.reject(yr);if(this[Lt])return Promise.resolve(Kt(void 0,!0));if(this[qt].destroyed)return new Promise(function(Or,Nr){process$9.nextTick(function(){nr[jt]?Nr(nr[jt]):Or(Kt(void 0,!0))})});var vr=this[Ut],Ir;if(vr)Ir=new Promise(Ht(vr,this));else{var xr=this[qt].read();if(xr!==null)return Promise.resolve(Kt(xr,!1));Ir=new Promise(this[Nt])}return this[Ut]=Ir,Ir}},e(_t,Symbol.asyncIterator,function(){return this}),e(_t,"return",function(){var nr=this;return new Promise(function(yr,vr){nr[qt].destroy(null,function(Ir){if(Ir){vr(Ir);return}yr(Kt(void 0,!0))})})}),_t),Jt),Qt=function(nr){var yr,vr=Object.create(rr,(yr={},e(yr,qt,{value:nr,writable:!0}),e(yr,kt,{value:null,writable:!0}),e(yr,Bt,{value:null,writable:!0}),e(yr,jt,{value:null,writable:!0}),e(yr,Lt,{value:nr._readableState.endEmitted,writable:!0}),e(yr,Nt,{value:function(xr,Or){var Nr=vr[qt].read();Nr?(vr[Ut]=null,vr[kt]=null,vr[Bt]=null,xr(Kt(Nr,!1))):(vr[kt]=xr,vr[Bt]=Or)},writable:!0}),yr));return vr[Ut]=null,At(nr,function(Ir){if(Ir&&Ir.code!=="ERR_STREAM_PREMATURE_CLOSE"){var xr=vr[Bt];xr!==null&&(vr[Ut]=null,vr[kt]=null,vr[Bt]=null,xr(Ir)),vr[jt]=Ir;return}var Or=vr[kt];Or!==null&&(vr[Ut]=null,vr[kt]=null,vr[Bt]=null,Or(Kt(void 0,!0))),vr[Lt]=!0}),nr.on("readable",Vt.bind(null,vr)),vr};return async_iterator=Qt,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=Or;var _t;Or.ReadableState=xr,eventsExports.EventEmitter;var e=function(Br,$r){return Br.listeners($r).length},$t=streamBrowser$1,xt=buffer$2.Buffer,At=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function kt(Cr){return xt.from(Cr)}function Bt(Cr){return xt.isBuffer(Cr)||Cr instanceof At}var jt=util$6,Lt;jt&&jt.debuglog?Lt=jt.debuglog("stream"):Lt=function(){};var Ut=requireBuffer_list(),Nt=destroy_1$3,qt=state$2,Kt=qt.getHighWaterMark,zt=errorsBrowser.codes,Vt=zt.ERR_INVALID_ARG_TYPE,Ht=zt.ERR_STREAM_PUSH_AFTER_EOF,Jt=zt.ERR_METHOD_NOT_IMPLEMENTED,rr=zt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Qt,Wt,nr;inherits_browserExports(Or,$t);var yr=Nt.errorOrDestroy,vr=["error","close","destroy","pause","resume"];function Ir(Cr,Br,$r){if(typeof Cr.prependListener=="function")return Cr.prependListener(Br,$r);!Cr._events||!Cr._events[Br]?Cr.on(Br,$r):Array.isArray(Cr._events[Br])?Cr._events[Br].unshift($r):Cr._events[Br]=[$r,Cr._events[Br]]}function xr(Cr,Br,$r){_t=_t||require_stream_duplex$1(),Cr=Cr||{},typeof $r!="boolean"&&($r=Br instanceof _t),this.objectMode=!!Cr.objectMode,$r&&(this.objectMode=this.objectMode||!!Cr.readableObjectMode),this.highWaterMark=Kt(this,Cr,"readableHighWaterMark",$r),this.buffer=new Ut,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Cr.emitClose!==!1,this.autoDestroy=!!Cr.autoDestroy,this.destroyed=!1,this.defaultEncoding=Cr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Cr.encoding&&(Qt||(Qt=string_decoder.StringDecoder),this.decoder=new Qt(Cr.encoding),this.encoding=Cr.encoding)}function Or(Cr){if(_t=_t||require_stream_duplex$1(),!(this instanceof Or))return new Or(Cr);var Br=this instanceof _t;this._readableState=new xr(Cr,this,Br),this.readable=!0,Cr&&(typeof Cr.read=="function"&&(this._read=Cr.read),typeof Cr.destroy=="function"&&(this._destroy=Cr.destroy)),$t.call(this)}Object.defineProperty(Or.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Br){this._readableState&&(this._readableState.destroyed=Br)}}),Or.prototype.destroy=Nt.destroy,Or.prototype._undestroy=Nt.undestroy,Or.prototype._destroy=function(Cr,Br){Br(Cr)},Or.prototype.push=function(Cr,Br){var $r=this._readableState,Rr;return $r.objectMode?Rr=!0:typeof Cr=="string"&&(Br=Br||$r.defaultEncoding,Br!==$r.encoding&&(Cr=xt.from(Cr,Br),Br=""),Rr=!0),Nr(this,Cr,Br,!1,Rr)},Or.prototype.unshift=function(Cr){return Nr(this,Cr,null,!0,!1)};function Nr(Cr,Br,$r,Rr,Ur){Lt("readableAddChunk",Br);var Pr=Cr._readableState;if(Br===null)Pr.reading=!1,pr(Cr,Pr);else{var _r;if(Ur||(_r=lr(Pr,Br)),_r)yr(Cr,_r);else if(Pr.objectMode||Br&&Br.length>0)if(typeof Br!="string"&&!Pr.objectMode&&Object.getPrototypeOf(Br)!==xt.prototype&&(Br=kt(Br)),Rr)Pr.endEmitted?yr(Cr,new rr):kr(Cr,Pr,Br,!0);else if(Pr.ended)yr(Cr,new Ht);else{if(Pr.destroyed)return!1;Pr.reading=!1,Pr.decoder&&!$r?(Br=Pr.decoder.write(Br),Pr.objectMode||Br.length!==0?kr(Cr,Pr,Br,!1):ar(Cr,Pr)):kr(Cr,Pr,Br,!1)}else Rr||(Pr.reading=!1,ar(Cr,Pr))}return!Pr.ended&&(Pr.length<Pr.highWaterMark||Pr.length===0)}function kr(Cr,Br,$r,Rr){Br.flowing&&Br.length===0&&!Br.sync?(Br.awaitDrain=0,Cr.emit("data",$r)):(Br.length+=Br.objectMode?1:$r.length,Rr?Br.buffer.unshift($r):Br.buffer.push($r),Br.needReadable&&ur(Cr)),ar(Cr,Br)}function lr(Cr,Br){var $r;return!Bt(Br)&&typeof Br!="string"&&Br!==void 0&&!Cr.objectMode&&($r=new Vt("chunk",["string","Buffer","Uint8Array"],Br)),$r}Or.prototype.isPaused=function(){return this._readableState.flowing===!1},Or.prototype.setEncoding=function(Cr){Qt||(Qt=string_decoder.StringDecoder);var Br=new Qt(Cr);this._readableState.decoder=Br,this._readableState.encoding=this._readableState.decoder.encoding;for(var $r=this._readableState.buffer.head,Rr="";$r!==null;)Rr+=Br.write($r.data),$r=$r.next;return this._readableState.buffer.clear(),Rr!==""&&this._readableState.buffer.push(Rr),this._readableState.length=Rr.length,this};var ir=1073741824;function Xt(Cr){return Cr>=ir?Cr=ir:(Cr--,Cr|=Cr>>>1,Cr|=Cr>>>2,Cr|=Cr>>>4,Cr|=Cr>>>8,Cr|=Cr>>>16,Cr++),Cr}function er(Cr,Br){return Cr<=0||Br.length===0&&Br.ended?0:Br.objectMode?1:Cr!==Cr?Br.flowing&&Br.length?Br.buffer.head.data.length:Br.length:(Cr>Br.highWaterMark&&(Br.highWaterMark=Xt(Cr)),Cr<=Br.length?Cr:Br.ended?Br.length:(Br.needReadable=!0,0))}Or.prototype.read=function(Cr){Lt("read",Cr),Cr=parseInt(Cr,10);var Br=this._readableState,$r=Cr;if(Cr!==0&&(Br.emittedReadable=!1),Cr===0&&Br.needReadable&&((Br.highWaterMark!==0?Br.length>=Br.highWaterMark:Br.length>0)||Br.ended))return Lt("read: emitReadable",Br.length,Br.ended),Br.length===0&&Br.ended?Tr(this):ur(this),null;if(Cr=er(Cr,Br),Cr===0&&Br.ended)return Br.length===0&&Tr(this),null;var Rr=Br.needReadable;Lt("need readable",Rr),(Br.length===0||Br.length-Cr<Br.highWaterMark)&&(Rr=!0,Lt("length less than watermark",Rr)),Br.ended||Br.reading?(Rr=!1,Lt("reading or ended",Rr)):Rr&&(Lt("do read"),Br.reading=!0,Br.sync=!0,Br.length===0&&(Br.needReadable=!0),this._read(Br.highWaterMark),Br.sync=!1,Br.reading||(Cr=er($r,Br)));var Ur;return Cr>0?Ur=wr(Cr,Br):Ur=null,Ur===null?(Br.needReadable=Br.length<=Br.highWaterMark,Cr=0):(Br.length-=Cr,Br.awaitDrain=0),Br.length===0&&(Br.ended||(Br.needReadable=!0),$r!==Cr&&Br.ended&&Tr(this)),Ur!==null&&this.emit("data",Ur),Ur};function pr(Cr,Br){if(Lt("onEofChunk"),!Br.ended){if(Br.decoder){var $r=Br.decoder.end();$r&&$r.length&&(Br.buffer.push($r),Br.length+=Br.objectMode?1:$r.length)}Br.ended=!0,Br.sync?ur(Cr):(Br.needReadable=!1,Br.emittedReadable||(Br.emittedReadable=!0,gr(Cr)))}}function ur(Cr){var Br=Cr._readableState;Lt("emitReadable",Br.needReadable,Br.emittedReadable),Br.needReadable=!1,Br.emittedReadable||(Lt("emitReadable",Br.flowing),Br.emittedReadable=!0,process$9.nextTick(gr,Cr))}function gr(Cr){var Br=Cr._readableState;Lt("emitReadable_",Br.destroyed,Br.length,Br.ended),!Br.destroyed&&(Br.length||Br.ended)&&(Cr.emit("readable"),Br.emittedReadable=!1),Br.needReadable=!Br.flowing&&!Br.ended&&Br.length<=Br.highWaterMark,Er(Cr)}function ar(Cr,Br){Br.readingMore||(Br.readingMore=!0,process$9.nextTick(tr,Cr,Br))}function tr(Cr,Br){for(;!Br.reading&&!Br.ended&&(Br.length<Br.highWaterMark||Br.flowing&&Br.length===0);){var $r=Br.length;if(Lt("maybeReadMore read 0"),Cr.read(0),$r===Br.length)break}Br.readingMore=!1}Or.prototype._read=function(Cr){yr(this,new Jt("_read()"))},Or.prototype.pipe=function(Cr,Br){var $r=this,Rr=this._readableState;switch(Rr.pipesCount){case 0:Rr.pipes=Cr;break;case 1:Rr.pipes=[Rr.pipes,Cr];break;default:Rr.pipes.push(Cr);break}Rr.pipesCount+=1,Lt("pipe count=%d opts=%j",Rr.pipesCount,Br);var Ur=(!Br||Br.end!==!1)&&Cr!==process$9.stdout&&Cr!==process$9.stderr,Pr=Ur?Ar:Fr;Rr.endEmitted?process$9.nextTick(Pr):$r.once("end",Pr),Cr.on("unpipe",_r);function _r(Xr,tn){Lt("onunpipe"),Xr===$r&&tn&&tn.hasUnpiped===!1&&(tn.hasUnpiped=!0,Zr())}function Ar(){Lt("onend"),Cr.end()}var jr=dr($r);Cr.on("drain",jr);var Kr=!1;function Zr(){Lt("cleanup"),Cr.removeListener("close",on),Cr.removeListener("finish",Gr),Cr.removeListener("drain",jr),Cr.removeListener("error",nn),Cr.removeListener("unpipe",_r),$r.removeListener("end",Ar),$r.removeListener("end",Fr),$r.removeListener("data",Jr),Kr=!0,Rr.awaitDrain&&(!Cr._writableState||Cr._writableState.needDrain)&&jr()}$r.on("data",Jr);function Jr(Xr){Lt("ondata");var tn=Cr.write(Xr);Lt("dest.write",tn),tn===!1&&((Rr.pipesCount===1&&Rr.pipes===Cr||Rr.pipesCount>1&&Lr(Rr.pipes,Cr)!==-1)&&!Kr&&(Lt("false write response, pause",Rr.awaitDrain),Rr.awaitDrain++),$r.pause())}function nn(Xr){Lt("onerror",Xr),Fr(),Cr.removeListener("error",nn),e(Cr,"error")===0&&yr(Cr,Xr)}Ir(Cr,"error",nn);function on(){Cr.removeListener("finish",Gr),Fr()}Cr.once("close",on);function Gr(){Lt("onfinish"),Cr.removeListener("close",on),Fr()}Cr.once("finish",Gr);function Fr(){Lt("unpipe"),$r.unpipe(Cr)}return Cr.emit("pipe",$r),Rr.flowing||(Lt("pipe resume"),$r.resume()),Cr};function dr(Cr){return function(){var $r=Cr._readableState;Lt("pipeOnDrain",$r.awaitDrain),$r.awaitDrain&&$r.awaitDrain--,$r.awaitDrain===0&&e(Cr,"data")&&($r.flowing=!0,Er(Cr))}}Or.prototype.unpipe=function(Cr){var Br=this._readableState,$r={hasUnpiped:!1};if(Br.pipesCount===0)return this;if(Br.pipesCount===1)return Cr&&Cr!==Br.pipes?this:(Cr||(Cr=Br.pipes),Br.pipes=null,Br.pipesCount=0,Br.flowing=!1,Cr&&Cr.emit("unpipe",this,$r),this);if(!Cr){var Rr=Br.pipes,Ur=Br.pipesCount;Br.pipes=null,Br.pipesCount=0,Br.flowing=!1;for(var Pr=0;Pr<Ur;Pr++)Rr[Pr].emit("unpipe",this,{hasUnpiped:!1});return this}var _r=Lr(Br.pipes,Cr);return _r===-1?this:(Br.pipes.splice(_r,1),Br.pipesCount-=1,Br.pipesCount===1&&(Br.pipes=Br.pipes[0]),Cr.emit("unpipe",this,$r),this)},Or.prototype.on=function(Cr,Br){var $r=$t.prototype.on.call(this,Cr,Br),Rr=this._readableState;return Cr==="data"?(Rr.readableListening=this.listenerCount("readable")>0,Rr.flowing!==!1&&this.resume()):Cr==="readable"&&!Rr.endEmitted&&!Rr.readableListening&&(Rr.readableListening=Rr.needReadable=!0,Rr.flowing=!1,Rr.emittedReadable=!1,Lt("on readable",Rr.length,Rr.reading),Rr.length?ur(this):Rr.reading||process$9.nextTick(br,this)),$r},Or.prototype.addListener=Or.prototype.on,Or.prototype.removeListener=function(Cr,Br){var $r=$t.prototype.removeListener.call(this,Cr,Br);return Cr==="readable"&&process$9.nextTick(fr,this),$r},Or.prototype.removeAllListeners=function(Cr){var Br=$t.prototype.removeAllListeners.apply(this,arguments);return(Cr==="readable"||Cr===void 0)&&process$9.nextTick(fr,this),Br};function fr(Cr){var Br=Cr._readableState;Br.readableListening=Cr.listenerCount("readable")>0,Br.resumeScheduled&&!Br.paused?Br.flowing=!0:Cr.listenerCount("data")>0&&Cr.resume()}function br(Cr){Lt("readable nexttick read 0"),Cr.read(0)}Or.prototype.resume=function(){var Cr=this._readableState;return Cr.flowing||(Lt("resume"),Cr.flowing=!Cr.readableListening,Sr(this,Cr)),Cr.paused=!1,this};function Sr(Cr,Br){Br.resumeScheduled||(Br.resumeScheduled=!0,process$9.nextTick(Dr,Cr,Br))}function Dr(Cr,Br){Lt("resume",Br.reading),Br.reading||Cr.read(0),Br.resumeScheduled=!1,Cr.emit("resume"),Er(Cr),Br.flowing&&!Br.reading&&Cr.read(0)}Or.prototype.pause=function(){return Lt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Lt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Er(Cr){var Br=Cr._readableState;for(Lt("flow",Br.flowing);Br.flowing&&Cr.read()!==null;);}Or.prototype.wrap=function(Cr){var Br=this,$r=this._readableState,Rr=!1;Cr.on("end",function(){if(Lt("wrapped end"),$r.decoder&&!$r.ended){var _r=$r.decoder.end();_r&&_r.length&&Br.push(_r)}Br.push(null)}),Cr.on("data",function(_r){if(Lt("wrapped data"),$r.decoder&&(_r=$r.decoder.write(_r)),!($r.objectMode&&_r==null)&&!(!$r.objectMode&&(!_r||!_r.length))){var Ar=Br.push(_r);Ar||(Rr=!0,Cr.pause())}});for(var Ur in Cr)this[Ur]===void 0&&typeof Cr[Ur]=="function"&&(this[Ur]=function(Ar){return function(){return Cr[Ar].apply(Cr,arguments)}}(Ur));for(var Pr=0;Pr<vr.length;Pr++)Cr.on(vr[Pr],this.emit.bind(this,vr[Pr]));return this._read=function(_r){Lt("wrapped _read",_r),Rr&&(Rr=!1,Cr.resume())},this},typeof Symbol=="function"&&(Or.prototype[Symbol.asyncIterator]=function(){return Wt===void 0&&(Wt=requireAsync_iterator()),Wt(this)}),Object.defineProperty(Or.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Or.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Or.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Br){this._readableState&&(this._readableState.flowing=Br)}}),Or._fromList=wr,Object.defineProperty(Or.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function wr(Cr,Br){if(Br.length===0)return null;var $r;return Br.objectMode?$r=Br.buffer.shift():!Cr||Cr>=Br.length?(Br.decoder?$r=Br.buffer.join(""):Br.buffer.length===1?$r=Br.buffer.first():$r=Br.buffer.concat(Br.length),Br.buffer.clear()):$r=Br.buffer.consume(Cr,Br.decoder),$r}function Tr(Cr){var Br=Cr._readableState;Lt("endReadable",Br.endEmitted),Br.endEmitted||(Br.ended=!0,process$9.nextTick(Mr,Br,Cr))}function Mr(Cr,Br){if(Lt("endReadableNT",Cr.endEmitted,Cr.length),!Cr.endEmitted&&Cr.length===0&&(Cr.endEmitted=!0,Br.readable=!1,Br.emit("end"),Cr.autoDestroy)){var $r=Br._writableState;(!$r||$r.autoDestroy&&$r.finished)&&Br.destroy()}}typeof Symbol=="function"&&(Or.from=function(Cr,Br){return nr===void 0&&(nr=requireFromBrowser()),nr(Or,Cr,Br)});function Lr(Cr,Br){for(var $r=0,Rr=Cr.length;$r<Rr;$r++)if(Cr[$r]===Br)return $r;return-1}return _stream_readable$1}var _stream_transform$1=Transform$d,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED$2=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$2=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex$7=require_stream_duplex$1();inherits_browserExports(Transform$d,Duplex$7);function afterTransform$1(_t,e){var $t=this._transformState;$t.transforming=!1;var xt=$t.writecb;if(xt===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK$2);$t.writechunk=null,$t.writecb=null,e!=null&&this.push(e),xt(_t);var At=this._readableState;At.reading=!1,(At.needReadable||At.length<At.highWaterMark)&&this._read(At.highWaterMark)}function Transform$d(_t){if(!(this instanceof Transform$d))return new Transform$d(_t);Duplex$7.call(this,_t),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_t&&(typeof _t.transform=="function"&&(this._transform=_t.transform),typeof _t.flush=="function"&&(this._flush=_t.flush)),this.on("prefinish",prefinish$3)}function prefinish$3(){var _t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,$t){done$1(_t,e,$t)}):done$1(this,null,null)}Transform$d.prototype.push=function(_t,e){return this._transformState.needTransform=!1,Duplex$7.prototype.push.call(this,_t,e)};Transform$d.prototype._transform=function(_t,e,$t){$t(new ERR_METHOD_NOT_IMPLEMENTED$2("_transform()"))};Transform$d.prototype._write=function(_t,e,$t){var xt=this._transformState;if(xt.writecb=$t,xt.writechunk=_t,xt.writeencoding=e,!xt.transforming){var At=this._readableState;(xt.needTransform||At.needReadable||At.length<At.highWaterMark)&&this._read(At.highWaterMark)}};Transform$d.prototype._read=function(_t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$d.prototype._destroy=function(_t,e){Duplex$7.prototype._destroy.call(this,_t,function($t){e($t)})};function done$1(_t,e,$t){if(e)return _t.emit("error",e);if($t!=null&&_t.push($t),_t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(_t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return _t.push(null)}var _stream_passthrough$1=PassThrough$5,Transform$c=_stream_transform$1;inherits_browserExports(PassThrough$5,Transform$c);function PassThrough$5(_t){if(!(this instanceof PassThrough$5))return new PassThrough$5(_t);Transform$c.call(this,_t)}PassThrough$5.prototype._transform=function(_t,e,$t){$t(null,_t)};var eos$6;function once$4(_t){var e=!1;return function(){e||(e=!0,_t.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS$6=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$2=_require$codes.ERR_STREAM_DESTROYED;function noop$2(_t){if(_t)throw _t}function isRequest$4(_t){return _t.setHeader&&typeof _t.abort=="function"}function destroyer$6(_t,e,$t,xt){xt=once$4(xt);var At=!1;_t.on("close",function(){At=!0}),eos$6===void 0&&(eos$6=endOfStream$2),eos$6(_t,{readable:e,writable:$t},function(Bt){if(Bt)return xt(Bt);At=!0,xt()});var kt=!1;return function(Bt){if(!At&&!kt){if(kt=!0,isRequest$4(_t))return _t.abort();if(typeof _t.destroy=="function")return _t.destroy();xt(Bt||new ERR_STREAM_DESTROYED$2("pipe"))}}}function call(_t){_t()}function pipe$2(_t,e){return _t.pipe(e)}function popCallback$2(_t){return!_t.length||typeof _t[_t.length-1]!="function"?noop$2:_t.pop()}function pipeline$4(){for(var _t=arguments.length,e=new Array(_t),$t=0;$t<_t;$t++)e[$t]=arguments[$t];var xt=popCallback$2(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS$6("streams");var At,kt=e.map(function(Bt,jt){var Lt=jt<e.length-1,Ut=jt>0;return destroyer$6(Bt,Lt,Ut,function(Nt){At||(At=Nt),Nt&&kt.forEach(call),!Lt&&(kt.forEach(call),xt(At))})});return e.reduce(pipe$2)}var pipeline_1$2=pipeline$4;(function(_t,e){e=_t.exports=require_stream_readable$1(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable$1(),e.Duplex=require_stream_duplex$1(),e.Transform=_stream_transform$1,e.PassThrough=_stream_passthrough$1,e.finished=endOfStream$2,e.pipeline=pipeline_1$2})(readableBrowser$1,readableBrowser$1.exports);var readableBrowserExports$1=readableBrowser$1.exports,Buffer$E=safeBufferExports$1.Buffer,Transform$b=readableBrowserExports$1.Transform,inherits$q=inherits_browserExports;function throwIfNotStringOrBuffer(_t,e){if(!Buffer$E.isBuffer(_t)&&typeof _t!="string")throw new TypeError(e+" must be a string or a buffer")}function HashBase$2(_t){Transform$b.call(this),this._block=Buffer$E.allocUnsafe(_t),this._blockSize=_t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$q(HashBase$2,Transform$b);HashBase$2.prototype._transform=function(_t,e,$t){var xt=null;try{this.update(_t,e)}catch(At){xt=At}$t(xt)};HashBase$2.prototype._flush=function(_t){var e=null;try{this.push(this.digest())}catch($t){e=$t}_t(e)};HashBase$2.prototype.update=function(_t,e){if(throwIfNotStringOrBuffer(_t,"Data"),this._finalized)throw new Error("Digest already called");Buffer$E.isBuffer(_t)||(_t=Buffer$E.from(_t,e));for(var $t=this._block,xt=0;this._blockOffset+_t.length-xt>=this._blockSize;){for(var At=this._blockOffset;At<this._blockSize;)$t[At++]=_t[xt++];this._update(),this._blockOffset=0}for(;xt<_t.length;)$t[this._blockOffset++]=_t[xt++];for(var kt=0,Bt=_t.length*8;Bt>0;++kt)this._length[kt]+=Bt,Bt=this._length[kt]/4294967296|0,Bt>0&&(this._length[kt]-=4294967296*Bt);return this};HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$2.prototype.digest=function(_t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();_t!==void 0&&(e=e.toString(_t)),this._block.fill(0),this._blockOffset=0;for(var $t=0;$t<4;++$t)this._length[$t]=0;return e};HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$p=inherits_browserExports,HashBase$1=hashBase,Buffer$D=safeBufferExports$1.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$p(MD5$3,HashBase$1);MD5$3.prototype._update=function(){for(var _t=ARRAY16$1,e=0;e<16;++e)_t[e]=this._block.readInt32LE(e*4);var $t=this._a,xt=this._b,At=this._c,kt=this._d;$t=fnF($t,xt,At,kt,_t[0],3614090360,7),kt=fnF(kt,$t,xt,At,_t[1],3905402710,12),At=fnF(At,kt,$t,xt,_t[2],606105819,17),xt=fnF(xt,At,kt,$t,_t[3],3250441966,22),$t=fnF($t,xt,At,kt,_t[4],4118548399,7),kt=fnF(kt,$t,xt,At,_t[5],1200080426,12),At=fnF(At,kt,$t,xt,_t[6],2821735955,17),xt=fnF(xt,At,kt,$t,_t[7],4249261313,22),$t=fnF($t,xt,At,kt,_t[8],1770035416,7),kt=fnF(kt,$t,xt,At,_t[9],2336552879,12),At=fnF(At,kt,$t,xt,_t[10],4294925233,17),xt=fnF(xt,At,kt,$t,_t[11],2304563134,22),$t=fnF($t,xt,At,kt,_t[12],1804603682,7),kt=fnF(kt,$t,xt,At,_t[13],4254626195,12),At=fnF(At,kt,$t,xt,_t[14],2792965006,17),xt=fnF(xt,At,kt,$t,_t[15],1236535329,22),$t=fnG($t,xt,At,kt,_t[1],4129170786,5),kt=fnG(kt,$t,xt,At,_t[6],3225465664,9),At=fnG(At,kt,$t,xt,_t[11],643717713,14),xt=fnG(xt,At,kt,$t,_t[0],3921069994,20),$t=fnG($t,xt,At,kt,_t[5],3593408605,5),kt=fnG(kt,$t,xt,At,_t[10],38016083,9),At=fnG(At,kt,$t,xt,_t[15],3634488961,14),xt=fnG(xt,At,kt,$t,_t[4],3889429448,20),$t=fnG($t,xt,At,kt,_t[9],568446438,5),kt=fnG(kt,$t,xt,At,_t[14],3275163606,9),At=fnG(At,kt,$t,xt,_t[3],4107603335,14),xt=fnG(xt,At,kt,$t,_t[8],1163531501,20),$t=fnG($t,xt,At,kt,_t[13],2850285829,5),kt=fnG(kt,$t,xt,At,_t[2],4243563512,9),At=fnG(At,kt,$t,xt,_t[7],1735328473,14),xt=fnG(xt,At,kt,$t,_t[12],2368359562,20),$t=fnH($t,xt,At,kt,_t[5],4294588738,4),kt=fnH(kt,$t,xt,At,_t[8],2272392833,11),At=fnH(At,kt,$t,xt,_t[11],1839030562,16),xt=fnH(xt,At,kt,$t,_t[14],4259657740,23),$t=fnH($t,xt,At,kt,_t[1],2763975236,4),kt=fnH(kt,$t,xt,At,_t[4],1272893353,11),At=fnH(At,kt,$t,xt,_t[7],4139469664,16),xt=fnH(xt,At,kt,$t,_t[10],3200236656,23),$t=fnH($t,xt,At,kt,_t[13],681279174,4),kt=fnH(kt,$t,xt,At,_t[0],3936430074,11),At=fnH(At,kt,$t,xt,_t[3],3572445317,16),xt=fnH(xt,At,kt,$t,_t[6],76029189,23),$t=fnH($t,xt,At,kt,_t[9],3654602809,4),kt=fnH(kt,$t,xt,At,_t[12],3873151461,11),At=fnH(At,kt,$t,xt,_t[15],530742520,16),xt=fnH(xt,At,kt,$t,_t[2],3299628645,23),$t=fnI($t,xt,At,kt,_t[0],4096336452,6),kt=fnI(kt,$t,xt,At,_t[7],1126891415,10),At=fnI(At,kt,$t,xt,_t[14],2878612391,15),xt=fnI(xt,At,kt,$t,_t[5],4237533241,21),$t=fnI($t,xt,At,kt,_t[12],1700485571,6),kt=fnI(kt,$t,xt,At,_t[3],2399980690,10),At=fnI(At,kt,$t,xt,_t[10],4293915773,15),xt=fnI(xt,At,kt,$t,_t[1],2240044497,21),$t=fnI($t,xt,At,kt,_t[8],1873313359,6),kt=fnI(kt,$t,xt,At,_t[15],4264355552,10),At=fnI(At,kt,$t,xt,_t[6],2734768916,15),xt=fnI(xt,At,kt,$t,_t[13],1309151649,21),$t=fnI($t,xt,At,kt,_t[4],4149444226,6),kt=fnI(kt,$t,xt,At,_t[11],3174756917,10),At=fnI(At,kt,$t,xt,_t[2],718787259,15),xt=fnI(xt,At,kt,$t,_t[9],3951481745,21),this._a=this._a+$t|0,this._b=this._b+xt|0,this._c=this._c+At|0,this._d=this._d+kt|0};MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var _t=Buffer$D.allocUnsafe(16);return _t.writeInt32LE(this._a,0),_t.writeInt32LE(this._b,4),_t.writeInt32LE(this._c,8),_t.writeInt32LE(this._d,12),_t};function rotl$1(_t,e){return _t<<e|_t>>>32-e}function fnF(_t,e,$t,xt,At,kt,Bt){return rotl$1(_t+(e&$t|~e&xt)+At+kt|0,Bt)+e|0}function fnG(_t,e,$t,xt,At,kt,Bt){return rotl$1(_t+(e&xt|$t&~xt)+At+kt|0,Bt)+e|0}function fnH(_t,e,$t,xt,At,kt,Bt){return rotl$1(_t+(e^$t^xt)+At+kt|0,Bt)+e|0}function fnI(_t,e,$t,xt,At,kt,Bt){return rotl$1(_t+($t^(e|~xt))+At+kt|0,Bt)+e|0}var md5_js=MD5$3,Buffer$C=buffer$2.Buffer,inherits$o=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$4(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$o(RIPEMD160$4,HashBase);RIPEMD160$4.prototype._update=function(){for(var _t=ARRAY16,e=0;e<16;++e)_t[e]=this._block.readInt32LE(e*4);for(var $t=this._a|0,xt=this._b|0,At=this._c|0,kt=this._d|0,Bt=this._e|0,jt=this._a|0,Lt=this._b|0,Ut=this._c|0,Nt=this._d|0,qt=this._e|0,Kt=0;Kt<80;Kt+=1){var zt,Vt;Kt<16?(zt=fn1($t,xt,At,kt,Bt,_t[zl[Kt]],hl[0],sl[Kt]),Vt=fn5(jt,Lt,Ut,Nt,qt,_t[zr[Kt]],hr[0],sr[Kt])):Kt<32?(zt=fn2($t,xt,At,kt,Bt,_t[zl[Kt]],hl[1],sl[Kt]),Vt=fn4(jt,Lt,Ut,Nt,qt,_t[zr[Kt]],hr[1],sr[Kt])):Kt<48?(zt=fn3($t,xt,At,kt,Bt,_t[zl[Kt]],hl[2],sl[Kt]),Vt=fn3(jt,Lt,Ut,Nt,qt,_t[zr[Kt]],hr[2],sr[Kt])):Kt<64?(zt=fn4($t,xt,At,kt,Bt,_t[zl[Kt]],hl[3],sl[Kt]),Vt=fn2(jt,Lt,Ut,Nt,qt,_t[zr[Kt]],hr[3],sr[Kt])):(zt=fn5($t,xt,At,kt,Bt,_t[zl[Kt]],hl[4],sl[Kt]),Vt=fn1(jt,Lt,Ut,Nt,qt,_t[zr[Kt]],hr[4],sr[Kt])),$t=Bt,Bt=kt,kt=rotl(At,10),At=xt,xt=zt,jt=qt,qt=Nt,Nt=rotl(Ut,10),Ut=Lt,Lt=Vt}var Ht=this._b+At+Nt|0;this._b=this._c+kt+qt|0,this._c=this._d+Bt+jt|0,this._d=this._e+$t+Lt|0,this._e=this._a+xt+Ut|0,this._a=Ht};RIPEMD160$4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var _t=Buffer$C.alloc?Buffer$C.alloc(20):new Buffer$C(20);return _t.writeInt32LE(this._a,0),_t.writeInt32LE(this._b,4),_t.writeInt32LE(this._c,8),_t.writeInt32LE(this._d,12),_t.writeInt32LE(this._e,16),_t};function rotl(_t,e){return _t<<e|_t>>>32-e}function fn1(_t,e,$t,xt,At,kt,Bt,jt){return rotl(_t+(e^$t^xt)+kt+Bt|0,jt)+At|0}function fn2(_t,e,$t,xt,At,kt,Bt,jt){return rotl(_t+(e&$t|~e&xt)+kt+Bt|0,jt)+At|0}function fn3(_t,e,$t,xt,At,kt,Bt,jt){return rotl(_t+((e|~$t)^xt)+kt+Bt|0,jt)+At|0}function fn4(_t,e,$t,xt,At,kt,Bt,jt){return rotl(_t+(e&xt|$t&~xt)+kt+Bt|0,jt)+At|0}function fn5(_t,e,$t,xt,At,kt,Bt,jt){return rotl(_t+(e^($t|~xt))+kt+Bt|0,jt)+At|0}var ripemd160=RIPEMD160$4,sha_js={exports:{}},Buffer$B=safeBufferExports$1.Buffer;function Hash$8(_t,e){this._block=Buffer$B.alloc(_t),this._finalSize=e,this._blockSize=_t,this._len=0}Hash$8.prototype.update=function(_t,e){typeof _t=="string"&&(e=e||"utf8",_t=Buffer$B.from(_t,e));for(var $t=this._block,xt=this._blockSize,At=_t.length,kt=this._len,Bt=0;Bt<At;){for(var jt=kt%xt,Lt=Math.min(At-Bt,xt-jt),Ut=0;Ut<Lt;Ut++)$t[jt+Ut]=_t[Bt+Ut];kt+=Lt,Bt+=Lt,kt%xt===0&&this._update($t)}return this._len+=At,this};Hash$8.prototype.digest=function(_t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var $t=this._len*8;if($t<=4294967295)this._block.writeUInt32BE($t,this._blockSize-4);else{var xt=($t&4294967295)>>>0,At=($t-xt)/4294967296;this._block.writeUInt32BE(At,this._blockSize-8),this._block.writeUInt32BE(xt,this._blockSize-4)}this._update(this._block);var kt=this._hash();return _t?kt.toString(_t):kt};Hash$8.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$6=Hash$8,inherits$n=inherits_browserExports,Hash$7=hash$6,Buffer$A=safeBufferExports$1.Buffer,K$5=[1518500249,1859775393,-1894007588,-899497514],W$6=new Array(80);function Sha(){this.init(),this._w=W$6,Hash$7.call(this,64,56)}inherits$n(Sha,Hash$7);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(_t){return _t<<5|_t>>>27}function rotl30$1(_t){return _t<<30|_t>>>2}function ft$2(_t,e,$t,xt){return _t===0?e&$t|~e&xt:_t===2?e&$t|e&xt|$t&xt:e^$t^xt}Sha.prototype._update=function(_t){for(var e=this._w,$t=this._a|0,xt=this._b|0,At=this._c|0,kt=this._d|0,Bt=this._e|0,jt=0;jt<16;++jt)e[jt]=_t.readInt32BE(jt*4);for(;jt<80;++jt)e[jt]=e[jt-3]^e[jt-8]^e[jt-14]^e[jt-16];for(var Lt=0;Lt<80;++Lt){var Ut=~~(Lt/20),Nt=rotl5$1($t)+ft$2(Ut,xt,At,kt)+Bt+e[Lt]+K$5[Ut]|0;Bt=kt,kt=At,At=rotl30$1(xt),xt=$t,$t=Nt}this._a=$t+this._a|0,this._b=xt+this._b|0,this._c=At+this._c|0,this._d=kt+this._d|0,this._e=Bt+this._e|0};Sha.prototype._hash=function(){var _t=Buffer$A.allocUnsafe(20);return _t.writeInt32BE(this._a|0,0),_t.writeInt32BE(this._b|0,4),_t.writeInt32BE(this._c|0,8),_t.writeInt32BE(this._d|0,12),_t.writeInt32BE(this._e|0,16),_t};var sha$4=Sha,inherits$m=inherits_browserExports,Hash$6=hash$6,Buffer$z=safeBufferExports$1.Buffer,K$4=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha1(){this.init(),this._w=W$5,Hash$6.call(this,64,56)}inherits$m(Sha1,Hash$6);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(_t){return _t<<1|_t>>>31}function rotl5(_t){return _t<<5|_t>>>27}function rotl30(_t){return _t<<30|_t>>>2}function ft$1(_t,e,$t,xt){return _t===0?e&$t|~e&xt:_t===2?e&$t|e&xt|$t&xt:e^$t^xt}Sha1.prototype._update=function(_t){for(var e=this._w,$t=this._a|0,xt=this._b|0,At=this._c|0,kt=this._d|0,Bt=this._e|0,jt=0;jt<16;++jt)e[jt]=_t.readInt32BE(jt*4);for(;jt<80;++jt)e[jt]=rotl1(e[jt-3]^e[jt-8]^e[jt-14]^e[jt-16]);for(var Lt=0;Lt<80;++Lt){var Ut=~~(Lt/20),Nt=rotl5($t)+ft$1(Ut,xt,At,kt)+Bt+e[Lt]+K$4[Ut]|0;Bt=kt,kt=At,At=rotl30(xt),xt=$t,$t=Nt}this._a=$t+this._a|0,this._b=xt+this._b|0,this._c=At+this._c|0,this._d=kt+this._d|0,this._e=Bt+this._e|0};Sha1.prototype._hash=function(){var _t=Buffer$z.allocUnsafe(20);return _t.writeInt32BE(this._a|0,0),_t.writeInt32BE(this._b|0,4),_t.writeInt32BE(this._c|0,8),_t.writeInt32BE(this._d|0,12),_t.writeInt32BE(this._e|0,16),_t};var sha1=Sha1,inherits$l=inherits_browserExports,Hash$5=hash$6,Buffer$y=safeBufferExports$1.Buffer,K$3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$4=new Array(64);function Sha256$2(){this.init(),this._w=W$4,Hash$5.call(this,64,56)}inherits$l(Sha256$2,Hash$5);Sha256$2.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(_t,e,$t){return $t^_t&(e^$t)}function maj$1(_t,e,$t){return _t&e|$t&(_t|e)}function sigma0$1(_t){return(_t>>>2|_t<<30)^(_t>>>13|_t<<19)^(_t>>>22|_t<<10)}function sigma1$1(_t){return(_t>>>6|_t<<26)^(_t>>>11|_t<<21)^(_t>>>25|_t<<7)}function gamma0(_t){return(_t>>>7|_t<<25)^(_t>>>18|_t<<14)^_t>>>3}function gamma1(_t){return(_t>>>17|_t<<15)^(_t>>>19|_t<<13)^_t>>>10}Sha256$2.prototype._update=function(_t){for(var e=this._w,$t=this._a|0,xt=this._b|0,At=this._c|0,kt=this._d|0,Bt=this._e|0,jt=this._f|0,Lt=this._g|0,Ut=this._h|0,Nt=0;Nt<16;++Nt)e[Nt]=_t.readInt32BE(Nt*4);for(;Nt<64;++Nt)e[Nt]=gamma1(e[Nt-2])+e[Nt-7]+gamma0(e[Nt-15])+e[Nt-16]|0;for(var qt=0;qt<64;++qt){var Kt=Ut+sigma1$1(Bt)+ch(Bt,jt,Lt)+K$3[qt]+e[qt]|0,zt=sigma0$1($t)+maj$1($t,xt,At)|0;Ut=Lt,Lt=jt,jt=Bt,Bt=kt+Kt|0,kt=At,At=xt,xt=$t,$t=Kt+zt|0}this._a=$t+this._a|0,this._b=xt+this._b|0,this._c=At+this._c|0,this._d=kt+this._d|0,this._e=Bt+this._e|0,this._f=jt+this._f|0,this._g=Lt+this._g|0,this._h=Ut+this._h|0};Sha256$2.prototype._hash=function(){var _t=Buffer$y.allocUnsafe(32);return _t.writeInt32BE(this._a,0),_t.writeInt32BE(this._b,4),_t.writeInt32BE(this._c,8),_t.writeInt32BE(this._d,12),_t.writeInt32BE(this._e,16),_t.writeInt32BE(this._f,20),_t.writeInt32BE(this._g,24),_t.writeInt32BE(this._h,28),_t};var sha256$3=Sha256$2,inherits$k=inherits_browserExports,Sha256$1=sha256$3,Hash$4=hash$6,Buffer$x=safeBufferExports$1.Buffer,W$3=new Array(64);function Sha224(){this.init(),this._w=W$3,Hash$4.call(this,64,56)}inherits$k(Sha224,Sha256$1);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var _t=Buffer$x.allocUnsafe(28);return _t.writeInt32BE(this._a,0),_t.writeInt32BE(this._b,4),_t.writeInt32BE(this._c,8),_t.writeInt32BE(this._d,12),_t.writeInt32BE(this._e,16),_t.writeInt32BE(this._f,20),_t.writeInt32BE(this._g,24),_t};var sha224$1=Sha224,inherits$j=inherits_browserExports,Hash$3=hash$6,Buffer$w=safeBufferExports$1.Buffer,K$2=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$2=new Array(160);function Sha512(){this.init(),this._w=W$2,Hash$3.call(this,128,112)}inherits$j(Sha512,Hash$3);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(_t,e,$t){return $t^_t&(e^$t)}function maj(_t,e,$t){return _t&e|$t&(_t|e)}function sigma0(_t,e){return(_t>>>28|e<<4)^(e>>>2|_t<<30)^(e>>>7|_t<<25)}function sigma1(_t,e){return(_t>>>14|e<<18)^(_t>>>18|e<<14)^(e>>>9|_t<<23)}function Gamma0(_t,e){return(_t>>>1|e<<31)^(_t>>>8|e<<24)^_t>>>7}function Gamma0l(_t,e){return(_t>>>1|e<<31)^(_t>>>8|e<<24)^(_t>>>7|e<<25)}function Gamma1(_t,e){return(_t>>>19|e<<13)^(e>>>29|_t<<3)^_t>>>6}function Gamma1l(_t,e){return(_t>>>19|e<<13)^(e>>>29|_t<<3)^(_t>>>6|e<<26)}function getCarry(_t,e){return _t>>>0<e>>>0?1:0}Sha512.prototype._update=function(_t){for(var e=this._w,$t=this._ah|0,xt=this._bh|0,At=this._ch|0,kt=this._dh|0,Bt=this._eh|0,jt=this._fh|0,Lt=this._gh|0,Ut=this._hh|0,Nt=this._al|0,qt=this._bl|0,Kt=this._cl|0,zt=this._dl|0,Vt=this._el|0,Ht=this._fl|0,Jt=this._gl|0,rr=this._hl|0,Qt=0;Qt<32;Qt+=2)e[Qt]=_t.readInt32BE(Qt*4),e[Qt+1]=_t.readInt32BE(Qt*4+4);for(;Qt<160;Qt+=2){var Wt=e[Qt-30],nr=e[Qt-15*2+1],yr=Gamma0(Wt,nr),vr=Gamma0l(nr,Wt);Wt=e[Qt-2*2],nr=e[Qt-2*2+1];var Ir=Gamma1(Wt,nr),xr=Gamma1l(nr,Wt),Or=e[Qt-7*2],Nr=e[Qt-7*2+1],kr=e[Qt-16*2],lr=e[Qt-16*2+1],ir=vr+Nr|0,Xt=yr+Or+getCarry(ir,vr)|0;ir=ir+xr|0,Xt=Xt+Ir+getCarry(ir,xr)|0,ir=ir+lr|0,Xt=Xt+kr+getCarry(ir,lr)|0,e[Qt]=Xt,e[Qt+1]=ir}for(var er=0;er<160;er+=2){Xt=e[er],ir=e[er+1];var pr=maj($t,xt,At),ur=maj(Nt,qt,Kt),gr=sigma0($t,Nt),ar=sigma0(Nt,$t),tr=sigma1(Bt,Vt),dr=sigma1(Vt,Bt),fr=K$2[er],br=K$2[er+1],Sr=Ch(Bt,jt,Lt),Dr=Ch(Vt,Ht,Jt),Er=rr+dr|0,wr=Ut+tr+getCarry(Er,rr)|0;Er=Er+Dr|0,wr=wr+Sr+getCarry(Er,Dr)|0,Er=Er+br|0,wr=wr+fr+getCarry(Er,br)|0,Er=Er+ir|0,wr=wr+Xt+getCarry(Er,ir)|0;var Tr=ar+ur|0,Mr=gr+pr+getCarry(Tr,ar)|0;Ut=Lt,rr=Jt,Lt=jt,Jt=Ht,jt=Bt,Ht=Vt,Vt=zt+Er|0,Bt=kt+wr+getCarry(Vt,zt)|0,kt=At,zt=Kt,At=xt,Kt=qt,xt=$t,qt=Nt,Nt=Er+Tr|0,$t=wr+Mr+getCarry(Nt,Er)|0}this._al=this._al+Nt|0,this._bl=this._bl+qt|0,this._cl=this._cl+Kt|0,this._dl=this._dl+zt|0,this._el=this._el+Vt|0,this._fl=this._fl+Ht|0,this._gl=this._gl+Jt|0,this._hl=this._hl+rr|0,this._ah=this._ah+$t+getCarry(this._al,Nt)|0,this._bh=this._bh+xt+getCarry(this._bl,qt)|0,this._ch=this._ch+At+getCarry(this._cl,Kt)|0,this._dh=this._dh+kt+getCarry(this._dl,zt)|0,this._eh=this._eh+Bt+getCarry(this._el,Vt)|0,this._fh=this._fh+jt+getCarry(this._fl,Ht)|0,this._gh=this._gh+Lt+getCarry(this._gl,Jt)|0,this._hh=this._hh+Ut+getCarry(this._hl,rr)|0};Sha512.prototype._hash=function(){var _t=Buffer$w.allocUnsafe(64);function e($t,xt,At){_t.writeInt32BE($t,At),_t.writeInt32BE(xt,At+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),_t};var sha512$3=Sha512,inherits$i=inherits_browserExports,SHA512$4=sha512$3,Hash$2=hash$6,Buffer$v=safeBufferExports$1.Buffer,W$1=new Array(160);function Sha384(){this.init(),this._w=W$1,Hash$2.call(this,128,112)}inherits$i(Sha384,SHA512$4);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var _t=Buffer$v.allocUnsafe(48);function e($t,xt,At){_t.writeInt32BE($t,At),_t.writeInt32BE(xt,At+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),_t};var sha384$1=Sha384,exports=sha_js.exports=function(e){e=e.toLowerCase();var $t=exports[e];if(!$t)throw new Error(e+" is not supported (we accept pull requests)");return new $t};exports.sha=sha$4;exports.sha1=sha1;exports.sha224=sha224$1;exports.sha256=sha256$3;exports.sha384=sha384$1;exports.sha512=sha512$3;var sha_jsExports=sha_js.exports,streamBrowserify=Stream$2,EE$2=eventsExports.EventEmitter,inherits$h=inherits_browserExports;inherits$h(Stream$2,EE$2);Stream$2.Readable=require_stream_readable$1();Stream$2.Writable=require_stream_writable$1();Stream$2.Duplex=require_stream_duplex$1();Stream$2.Transform=_stream_transform$1;Stream$2.PassThrough=_stream_passthrough$1;Stream$2.finished=endOfStream$2;Stream$2.pipeline=pipeline_1$2;Stream$2.Stream=Stream$2;function Stream$2(){EE$2.call(this)}Stream$2.prototype.pipe=function(_t,e){var $t=this;function xt(Nt){_t.writable&&_t.write(Nt)===!1&&$t.pause&&$t.pause()}$t.on("data",xt);function At(){$t.readable&&$t.resume&&$t.resume()}_t.on("drain",At),!_t._isStdio&&(!e||e.end!==!1)&&($t.on("end",Bt),$t.on("close",jt));var kt=!1;function Bt(){kt||(kt=!0,_t.end())}function jt(){kt||(kt=!0,typeof _t.destroy=="function"&&_t.destroy())}function Lt(Nt){if(Ut(),EE$2.listenerCount(this,"error")===0)throw Nt}$t.on("error",Lt),_t.on("error",Lt);function Ut(){$t.removeListener("data",xt),_t.removeListener("drain",At),$t.removeListener("end",Bt),$t.removeListener("close",jt),$t.removeListener("error",Lt),_t.removeListener("error",Lt),$t.removeListener("end",Ut),$t.removeListener("close",Ut),_t.removeListener("close",Ut)}return $t.on("end",Ut),$t.on("close",Ut),_t.on("close",Ut),_t.emit("pipe",$t),_t};var Buffer$u=safeBufferExports$1.Buffer,Transform$a=streamBrowserify.Transform,StringDecoder=string_decoder.StringDecoder,inherits$g=inherits_browserExports;function CipherBase$1(_t){Transform$a.call(this),this.hashMode=typeof _t=="string",this.hashMode?this[_t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$g(CipherBase$1,Transform$a);CipherBase$1.prototype.update=function(_t,e,$t){typeof _t=="string"&&(_t=Buffer$u.from(_t,e));var xt=this._update(_t);return this.hashMode?this:($t&&(xt=this._toString(xt,$t)),xt)};CipherBase$1.prototype.setAutoPadding=function(){};CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase$1.prototype._transform=function(_t,e,$t){var xt;try{this.hashMode?this._update(_t):this.push(this._update(_t))}catch(At){xt=At}finally{$t(xt)}};CipherBase$1.prototype._flush=function(_t){var e;try{this.push(this.__final())}catch($t){e=$t}_t(e)};CipherBase$1.prototype._finalOrDigest=function(_t){var e=this.__final()||Buffer$u.alloc(0);return _t&&(e=this._toString(e,_t,!0)),e};CipherBase$1.prototype._toString=function(_t,e,$t){if(this._decoder||(this._decoder=new StringDecoder(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var xt=this._decoder.write(_t);return $t&&(xt+=this._decoder.end()),xt};var cipherBase=CipherBase$1,inherits$f=inherits_browserExports,MD5$2=md5_js,RIPEMD160$3=ripemd160,sha$3=sha_jsExports,Base$5=cipherBase;function Hash$1(_t){Base$5.call(this,"digest"),this._hash=_t}inherits$f(Hash$1,Base$5);Hash$1.prototype._update=function(_t){this._hash.update(_t)};Hash$1.prototype._final=function(){return this._hash.digest()};var browser$c=function(e){return e=e.toLowerCase(),e==="md5"?new MD5$2:e==="rmd160"||e==="ripemd160"?new RIPEMD160$3:new Hash$1(sha$3(e))},inherits$e=inherits_browserExports,Buffer$t=safeBufferExports$1.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$t.alloc(128),blocksize=64;function Hmac$3(_t,e){Base$4.call(this,"digest"),typeof e=="string"&&(e=Buffer$t.from(e)),this._alg=_t,this._key=e,e.length>blocksize?e=_t(e):e.length<blocksize&&(e=Buffer$t.concat([e,ZEROS$2],blocksize));for(var $t=this._ipad=Buffer$t.allocUnsafe(blocksize),xt=this._opad=Buffer$t.allocUnsafe(blocksize),At=0;At<blocksize;At++)$t[At]=e[At]^54,xt[At]=e[At]^92;this._hash=[$t]}inherits$e(Hmac$3,Base$4);Hmac$3.prototype._update=function(_t){this._hash.push(_t)};Hmac$3.prototype._final=function(){var _t=this._alg(Buffer$t.concat(this._hash));return this._alg(Buffer$t.concat([this._opad,_t]))};var legacy$2=Hmac$3,MD5$1=md5_js,md5$2=function(_t){return new MD5$1().update(_t).digest()},inherits$d=inherits_browserExports,Legacy=legacy$2,Base$3=cipherBase,Buffer$s=safeBufferExports$1.Buffer,md5$1=md5$2,RIPEMD160$2=ripemd160,sha$2=sha_jsExports,ZEROS$1=Buffer$s.alloc(128);function Hmac$2(_t,e){Base$3.call(this,"digest"),typeof e=="string"&&(e=Buffer$s.from(e));var $t=_t==="sha512"||_t==="sha384"?128:64;if(this._alg=_t,this._key=e,e.length>$t){var xt=_t==="rmd160"?new RIPEMD160$2:sha$2(_t);e=xt.update(e).digest()}else e.length<$t&&(e=Buffer$s.concat([e,ZEROS$1],$t));for(var At=this._ipad=Buffer$s.allocUnsafe($t),kt=this._opad=Buffer$s.allocUnsafe($t),Bt=0;Bt<$t;Bt++)At[Bt]=e[Bt]^54,kt[Bt]=e[Bt]^92;this._hash=_t==="rmd160"?new RIPEMD160$2:sha$2(_t),this._hash.update(At)}inherits$d(Hmac$2,Base$3);Hmac$2.prototype._update=function(_t){this._hash.update(_t)};Hmac$2.prototype._final=function(){var _t=this._hash.digest(),e=this._alg==="rmd160"?new RIPEMD160$2:sha$2(this._alg);return e.update(this._opad).update(_t).digest()};var browser$b=function(e,$t){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new Hmac$2("rmd160",$t):e==="md5"?new Legacy(md5$1,$t):new Hmac$2(e,$t)};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$2={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6$1={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$2,sha224,sha384,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos=require$$6$1,browser$a={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(_t,e){if(typeof _t!="number")throw new TypeError("Iterations not a number");if(_t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!==e)throw new TypeError("Bad key length")},defaultEncoding$2;if(globalThis.process&&globalThis.process.browser)defaultEncoding$2="utf-8";else if(globalThis.process&&globalThis.process.version){var pVersionMajor=parseInt(process$9.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$r=safeBufferExports$1.Buffer,toBuffer$2=function(_t,e,$t){if(Buffer$r.isBuffer(_t))return _t;if(typeof _t=="string")return Buffer$r.from(_t,e);if(ArrayBuffer.isView(_t))return Buffer$r.from(_t.buffer);throw new TypeError($t+" must be a string, a Buffer, a typed array or a DataView")},md5=md5$2,RIPEMD160$1=ripemd160,sha$1=sha_jsExports,Buffer$q=safeBufferExports$1.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$1=toBuffer$2,ZEROS=Buffer$q.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac$1(_t,e,$t){var xt=getDigest(_t),At=_t==="sha512"||_t==="sha384"?128:64;e.length>At?e=xt(e):e.length<At&&(e=Buffer$q.concat([e,ZEROS],At));for(var kt=Buffer$q.allocUnsafe(At+sizes[_t]),Bt=Buffer$q.allocUnsafe(At+sizes[_t]),jt=0;jt<At;jt++)kt[jt]=e[jt]^54,Bt[jt]=e[jt]^92;var Lt=Buffer$q.allocUnsafe(At+$t+4);kt.copy(Lt,0,0,At),this.ipad1=Lt,this.ipad2=kt,this.opad=Bt,this.alg=_t,this.blocksize=At,this.hash=xt,this.size=sizes[_t]}Hmac$1.prototype.run=function(_t,e){_t.copy(e,this.blocksize);var $t=this.hash(e);return $t.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(_t){function e(xt){return sha$1(_t).update(xt).digest()}function $t(xt){return new RIPEMD160$1().update(xt).digest()}return _t==="rmd160"||_t==="ripemd160"?$t:_t==="md5"?md5:e}function pbkdf2(_t,e,$t,xt,At){checkParameters$1($t,xt),_t=toBuffer$1(_t,defaultEncoding$1,"Password"),e=toBuffer$1(e,defaultEncoding$1,"Salt"),At=At||"sha1";var kt=new Hmac$1(At,_t,e.length),Bt=Buffer$q.allocUnsafe(xt),jt=Buffer$q.allocUnsafe(e.length+4);e.copy(jt,0,0,e.length);for(var Lt=0,Ut=sizes[At],Nt=Math.ceil(xt/Ut),qt=1;qt<=Nt;qt++){jt.writeUInt32BE(qt,e.length);for(var Kt=kt.run(jt,kt.ipad1),zt=Kt,Vt=1;Vt<$t;Vt++){zt=kt.run(zt,kt.ipad2);for(var Ht=0;Ht<Ut;Ht++)Kt[Ht]^=zt[Ht]}Kt.copy(Bt,Lt),Lt+=Ut}return Bt}var syncBrowser=pbkdf2,Buffer$p=safeBufferExports$1.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync=syncBrowser,toBuffer=toBuffer$2,ZERO_BUF,subtle=globalThis.crypto&&globalThis.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(_t){if(globalThis.process&&!globalThis.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[_t]!==void 0)return checks[_t];ZERO_BUF=ZERO_BUF||Buffer$p.alloc(8);var e=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,_t).then(function(){return!0}).catch(function(){return!1});return checks[_t]=e,e}var nextTick$2;function getNextTick(){return nextTick$2||(globalThis.process&&globalThis.process.nextTick?nextTick$2=globalThis.process.nextTick:globalThis.queueMicrotask?nextTick$2=globalThis.queueMicrotask:globalThis.setImmediate?nextTick$2=globalThis.setImmediate:nextTick$2=globalThis.setTimeout,nextTick$2)}function browserPbkdf2(_t,e,$t,xt,At){return subtle.importKey("raw",_t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(kt){return subtle.deriveBits({name:"PBKDF2",salt:e,iterations:$t,hash:{name:At}},kt,xt<<3)}).then(function(kt){return Buffer$p.from(kt)})}function resolvePromise(_t,e){_t.then(function($t){getNextTick()(function(){e(null,$t)})},function($t){getNextTick()(function(){e($t)})})}var async=function(_t,e,$t,xt,At,kt){typeof At=="function"&&(kt=At,At=void 0),At=At||"sha1";var Bt=toBrowser[At.toLowerCase()];if(!Bt||typeof globalThis.Promise!="function"){getNextTick()(function(){var jt;try{jt=sync(_t,e,$t,xt,At)}catch(Lt){return kt(Lt)}kt(null,jt)});return}if(checkParameters($t,xt),_t=toBuffer(_t,defaultEncoding,"Password"),e=toBuffer(e,defaultEncoding,"Salt"),typeof kt!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(Bt).then(function(jt){return jt?browserPbkdf2(_t,e,$t,xt,Bt):sync(_t,e,$t,xt,At)}),kt)};browser$a.pbkdf2=async;browser$a.pbkdf2Sync=syncBrowser;var browser$9={},des$2={},utils$u={};utils$u.readUInt32BE=function(e,$t){var xt=e[0+$t]<<24|e[1+$t]<<16|e[2+$t]<<8|e[3+$t];return xt>>>0};utils$u.writeUInt32BE=function(e,$t,xt){e[0+xt]=$t>>>24,e[1+xt]=$t>>>16&255,e[2+xt]=$t>>>8&255,e[3+xt]=$t&255};utils$u.ip=function(e,$t,xt,At){for(var kt=0,Bt=0,jt=6;jt>=0;jt-=2){for(var Lt=0;Lt<=24;Lt+=8)kt<<=1,kt|=$t>>>Lt+jt&1;for(var Lt=0;Lt<=24;Lt+=8)kt<<=1,kt|=e>>>Lt+jt&1}for(var jt=6;jt>=0;jt-=2){for(var Lt=1;Lt<=25;Lt+=8)Bt<<=1,Bt|=$t>>>Lt+jt&1;for(var Lt=1;Lt<=25;Lt+=8)Bt<<=1,Bt|=e>>>Lt+jt&1}xt[At+0]=kt>>>0,xt[At+1]=Bt>>>0};utils$u.rip=function(e,$t,xt,At){for(var kt=0,Bt=0,jt=0;jt<4;jt++)for(var Lt=24;Lt>=0;Lt-=8)kt<<=1,kt|=$t>>>Lt+jt&1,kt<<=1,kt|=e>>>Lt+jt&1;for(var jt=4;jt<8;jt++)for(var Lt=24;Lt>=0;Lt-=8)Bt<<=1,Bt|=$t>>>Lt+jt&1,Bt<<=1,Bt|=e>>>Lt+jt&1;xt[At+0]=kt>>>0,xt[At+1]=Bt>>>0};utils$u.pc1=function(e,$t,xt,At){for(var kt=0,Bt=0,jt=7;jt>=5;jt--){for(var Lt=0;Lt<=24;Lt+=8)kt<<=1,kt|=$t>>Lt+jt&1;for(var Lt=0;Lt<=24;Lt+=8)kt<<=1,kt|=e>>Lt+jt&1}for(var Lt=0;Lt<=24;Lt+=8)kt<<=1,kt|=$t>>Lt+jt&1;for(var jt=1;jt<=3;jt++){for(var Lt=0;Lt<=24;Lt+=8)Bt<<=1,Bt|=$t>>Lt+jt&1;for(var Lt=0;Lt<=24;Lt+=8)Bt<<=1,Bt|=e>>Lt+jt&1}for(var Lt=0;Lt<=24;Lt+=8)Bt<<=1,Bt|=e>>Lt+jt&1;xt[At+0]=kt>>>0,xt[At+1]=Bt>>>0};utils$u.r28shl=function(e,$t){return e<<$t&268435455|e>>>28-$t};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$u.pc2=function(e,$t,xt,At){for(var kt=0,Bt=0,jt=pc2table.length>>>1,Lt=0;Lt<jt;Lt++)kt<<=1,kt|=e>>>pc2table[Lt]&1;for(var Lt=jt;Lt<pc2table.length;Lt++)Bt<<=1,Bt|=$t>>>pc2table[Lt]&1;xt[At+0]=kt>>>0,xt[At+1]=Bt>>>0};utils$u.expand=function(e,$t,xt){var At=0,kt=0;At=(e&1)<<5|e>>>27;for(var Bt=23;Bt>=15;Bt-=4)At<<=6,At|=e>>>Bt&63;for(var Bt=11;Bt>=3;Bt-=4)kt|=e>>>Bt&63,kt<<=6;kt|=(e&31)<<1|e>>>31,$t[xt+0]=At>>>0,$t[xt+1]=kt>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$u.substitute=function(e,$t){for(var xt=0,At=0;At<4;At++){var kt=e>>>18-At*6&63,Bt=sTable[At*64+kt];xt<<=4,xt|=Bt}for(var At=0;At<4;At++){var kt=$t>>>18-At*6&63,Bt=sTable[4*64+At*64+kt];xt<<=4,xt|=Bt}return xt>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$u.permute=function(e){for(var $t=0,xt=0;xt<permuteTable.length;xt++)$t<<=1,$t|=e>>>permuteTable[xt]&1;return $t>>>0};utils$u.padSplit=function(e,$t,xt){for(var At=e.toString(2);At.length<$t;)At="0"+At;for(var kt=[],Bt=0;Bt<$t;Bt+=xt)kt.push(At.slice(Bt,Bt+xt));return kt.join(" ")};var minimalisticAssert=assert$m;function assert$m(_t,e){if(!_t)throw new Error(e||"Assertion failed")}assert$m.equal=function(e,$t,xt){if(e!=$t)throw new Error(xt||"Assertion failed: "+e+" != "+$t)};var assert$l=minimalisticAssert;function Cipher$3(_t){this.options=_t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=_t.padding!==!1}var cipher=Cipher$3;Cipher$3.prototype._init=function(){};Cipher$3.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};Cipher$3.prototype._buffer=function(e,$t){for(var xt=Math.min(this.buffer.length-this.bufferOff,e.length-$t),At=0;At<xt;At++)this.buffer[this.bufferOff+At]=e[$t+At];return this.bufferOff+=xt,xt};Cipher$3.prototype._flushBuffer=function(e,$t){return this._update(this.buffer,0,e,$t),this.bufferOff=0,this.blockSize};Cipher$3.prototype._updateEncrypt=function(e){var $t=0,xt=0,At=(this.bufferOff+e.length)/this.blockSize|0,kt=new Array(At*this.blockSize);this.bufferOff!==0&&($t+=this._buffer(e,$t),this.bufferOff===this.buffer.length&&(xt+=this._flushBuffer(kt,xt)));for(var Bt=e.length-(e.length-$t)%this.blockSize;$t<Bt;$t+=this.blockSize)this._update(e,$t,kt,xt),xt+=this.blockSize;for(;$t<e.length;$t++,this.bufferOff++)this.buffer[this.bufferOff]=e[$t];return kt};Cipher$3.prototype._updateDecrypt=function(e){for(var $t=0,xt=0,At=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,kt=new Array(At*this.blockSize);At>0;At--)$t+=this._buffer(e,$t),xt+=this._flushBuffer(kt,xt);return $t+=this._buffer(e,$t),kt};Cipher$3.prototype.final=function(e){var $t;e&&($t=this.update(e));var xt;return this.type==="encrypt"?xt=this._finalEncrypt():xt=this._finalDecrypt(),$t?$t.concat(xt):xt};Cipher$3.prototype._pad=function(e,$t){if($t===0)return!1;for(;$t<e.length;)e[$t++]=0;return!0};Cipher$3.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};Cipher$3.prototype._unpad=function(e){return e};Cipher$3.prototype._finalDecrypt=function(){assert$l.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var assert$k=minimalisticAssert,inherits$c=inherits_browserExports,utils$t=utils$u,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(_t){Cipher$2.call(this,_t);var e=new DESState;this._desState=e,this.deriveKeys(e,_t.key)}inherits$c(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function(e){return new DES$3(e)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function(e,$t){e.keys=new Array(16*2),assert$k.equal($t.length,this.blockSize,"Invalid key length");var xt=utils$t.readUInt32BE($t,0),At=utils$t.readUInt32BE($t,4);utils$t.pc1(xt,At,e.tmp,0),xt=e.tmp[0],At=e.tmp[1];for(var kt=0;kt<e.keys.length;kt+=2){var Bt=shiftTable[kt>>>1];xt=utils$t.r28shl(xt,Bt),At=utils$t.r28shl(At,Bt),utils$t.pc2(xt,At,e.keys,kt)}};DES$3.prototype._update=function(e,$t,xt,At){var kt=this._desState,Bt=utils$t.readUInt32BE(e,$t),jt=utils$t.readUInt32BE(e,$t+4);utils$t.ip(Bt,jt,kt.tmp,0),Bt=kt.tmp[0],jt=kt.tmp[1],this.type==="encrypt"?this._encrypt(kt,Bt,jt,kt.tmp,0):this._decrypt(kt,Bt,jt,kt.tmp,0),Bt=kt.tmp[0],jt=kt.tmp[1],utils$t.writeUInt32BE(xt,Bt,At),utils$t.writeUInt32BE(xt,jt,At+4)};DES$3.prototype._pad=function(e,$t){if(this.padding===!1)return!1;for(var xt=e.length-$t,At=$t;At<e.length;At++)e[At]=xt;return!0};DES$3.prototype._unpad=function(e){if(this.padding===!1)return e;for(var $t=e[e.length-1],xt=e.length-$t;xt<e.length;xt++)assert$k.equal(e[xt],$t);return e.slice(0,e.length-$t)};DES$3.prototype._encrypt=function(e,$t,xt,At,kt){for(var Bt=$t,jt=xt,Lt=0;Lt<e.keys.length;Lt+=2){var Ut=e.keys[Lt],Nt=e.keys[Lt+1];utils$t.expand(jt,e.tmp,0),Ut^=e.tmp[0],Nt^=e.tmp[1];var qt=utils$t.substitute(Ut,Nt),Kt=utils$t.permute(qt),zt=jt;jt=(Bt^Kt)>>>0,Bt=zt}utils$t.rip(jt,Bt,At,kt)};DES$3.prototype._decrypt=function(e,$t,xt,At,kt){for(var Bt=xt,jt=$t,Lt=e.keys.length-2;Lt>=0;Lt-=2){var Ut=e.keys[Lt],Nt=e.keys[Lt+1];utils$t.expand(Bt,e.tmp,0),Ut^=e.tmp[0],Nt^=e.tmp[1];var qt=utils$t.substitute(Ut,Nt),Kt=utils$t.permute(qt),zt=Bt;Bt=(jt^Kt)>>>0,jt=zt}utils$t.rip(Bt,jt,At,kt)};var cbc$1={},assert$j=minimalisticAssert,inherits$b=inherits_browserExports,proto={};function CBCState(_t){assert$j.equal(_t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=_t[e]}function instantiate(_t){function e(kt){_t.call(this,kt),this._cbcInit()}inherits$b(e,_t);for(var $t=Object.keys(proto),xt=0;xt<$t.length;xt++){var At=$t[xt];e.prototype[At]=proto[At]}return e.create=function(Bt){return new e(Bt)},e}cbc$1.instantiate=instantiate;proto._cbcInit=function(){var e=new CBCState(this.options.iv);this._cbcState=e};proto._update=function(e,$t,xt,At){var kt=this._cbcState,Bt=this.constructor.super_.prototype,jt=kt.iv;if(this.type==="encrypt"){for(var Lt=0;Lt<this.blockSize;Lt++)jt[Lt]^=e[$t+Lt];Bt._update.call(this,jt,0,xt,At);for(var Lt=0;Lt<this.blockSize;Lt++)jt[Lt]=xt[At+Lt]}else{Bt._update.call(this,e,$t,xt,At);for(var Lt=0;Lt<this.blockSize;Lt++)xt[At+Lt]^=jt[Lt];for(var Lt=0;Lt<this.blockSize;Lt++)jt[Lt]=e[$t+Lt]}};var assert$i=minimalisticAssert,inherits$a=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(_t,e){assert$i.equal(e.length,24,"Invalid key length");var $t=e.slice(0,8),xt=e.slice(8,16),At=e.slice(16,24);_t==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:$t}),DES$2.create({type:"decrypt",key:xt}),DES$2.create({type:"encrypt",key:At})]:this.ciphers=[DES$2.create({type:"decrypt",key:At}),DES$2.create({type:"encrypt",key:xt}),DES$2.create({type:"decrypt",key:$t})]}function EDE(_t){Cipher$1.call(this,_t);var e=new EDEState(this.type,this.options.key);this._edeState=e}inherits$a(EDE,Cipher$1);var ede=EDE;EDE.create=function(e){return new EDE(e)};EDE.prototype._update=function(e,$t,xt,At){var kt=this._edeState;kt.ciphers[0]._update(e,$t,xt,At),kt.ciphers[1]._update(xt,At,xt,At),kt.ciphers[2]._update(xt,At,xt,At)};EDE.prototype._pad=DES$2.prototype._pad;EDE.prototype._unpad=DES$2.prototype._unpad;des$2.utils=utils$u;des$2.Cipher=cipher;des$2.DES=des$1;des$2.CBC=cbc$1;des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$9=inherits_browserExports,Buffer$o=safeBufferExports$1.Buffer,modes$3={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$3.des=modes$3["des-cbc"];modes$3.des3=modes$3["des-ede3-cbc"];var browserifyDes=DES$1;inherits$9(DES$1,CipherBase);function DES$1(_t){CipherBase.call(this);var e=_t.mode.toLowerCase(),$t=modes$3[e],xt;_t.decrypt?xt="decrypt":xt="encrypt";var At=_t.key;Buffer$o.isBuffer(At)||(At=Buffer$o.from(At)),(e==="des-ede"||e==="des-ede-cbc")&&(At=Buffer$o.concat([At,At.slice(0,8)]));var kt=_t.iv;Buffer$o.isBuffer(kt)||(kt=Buffer$o.from(kt)),this._des=$t.create({key:At,iv:kt,type:xt})}DES$1.prototype._update=function(_t){return Buffer$o.from(this._des.update(_t))};DES$1.prototype._final=function(){return Buffer$o.from(this._des.final())};var browser$8={},encrypter={},ecb={};ecb.encrypt=function(_t,e){return _t._cipher.encryptBlock(e)};ecb.decrypt=function(_t,e){return _t._cipher.decryptBlock(e)};var cbc={},bufferXor=function(e,$t){for(var xt=Math.min(e.length,$t.length),At=new buffer$2.Buffer(xt),kt=0;kt<xt;++kt)At[kt]=e[kt]^$t[kt];return At},xor$7=bufferXor;cbc.encrypt=function(_t,e){var $t=xor$7(e,_t._prev);return _t._prev=_t._cipher.encryptBlock($t),_t._prev};cbc.decrypt=function(_t,e){var $t=_t._prev;_t._prev=e;var xt=_t._cipher.decryptBlock(e);return xor$7(xt,$t)};var cfb={},Buffer$n=safeBufferExports$1.Buffer,xor$6=bufferXor;function encryptStart(_t,e,$t){var xt=e.length,At=xor$6(e,_t._cache);return _t._cache=_t._cache.slice(xt),_t._prev=Buffer$n.concat([_t._prev,$t?e:At]),At}cfb.encrypt=function(_t,e,$t){for(var xt=Buffer$n.allocUnsafe(0),At;e.length;)if(_t._cache.length===0&&(_t._cache=_t._cipher.encryptBlock(_t._prev),_t._prev=Buffer$n.allocUnsafe(0)),_t._cache.length<=e.length)At=_t._cache.length,xt=Buffer$n.concat([xt,encryptStart(_t,e.slice(0,At),$t)]),e=e.slice(At);else{xt=Buffer$n.concat([xt,encryptStart(_t,e,$t)]);break}return xt};var cfb8={},Buffer$m=safeBufferExports$1.Buffer;function encryptByte$1(_t,e,$t){var xt=_t._cipher.encryptBlock(_t._prev),At=xt[0]^e;return _t._prev=Buffer$m.concat([_t._prev.slice(1),Buffer$m.from([$t?e:At])]),At}cfb8.encrypt=function(_t,e,$t){for(var xt=e.length,At=Buffer$m.allocUnsafe(xt),kt=-1;++kt<xt;)At[kt]=encryptByte$1(_t,e[kt],$t);return At};var cfb1={},Buffer$l=safeBufferExports$1.Buffer;function encryptByte(_t,e,$t){for(var xt,At=-1,kt=8,Bt=0,jt,Lt;++At<kt;)xt=_t._cipher.encryptBlock(_t._prev),jt=e&1<<7-At?128:0,Lt=xt[0]^jt,Bt+=(Lt&128)>>At%8,_t._prev=shiftIn(_t._prev,$t?jt:Lt);return Bt}function shiftIn(_t,e){var $t=_t.length,xt=-1,At=Buffer$l.allocUnsafe(_t.length);for(_t=Buffer$l.concat([_t,Buffer$l.from([e])]);++xt<$t;)At[xt]=_t[xt]<<1|_t[xt+1]>>7;return At}cfb1.encrypt=function(_t,e,$t){for(var xt=e.length,At=Buffer$l.allocUnsafe(xt),kt=-1;++kt<xt;)At[kt]=encryptByte(_t,e[kt],$t);return At};var ofb={},xor$5=bufferXor;function getBlock$1(_t){return _t._prev=_t._cipher.encryptBlock(_t._prev),_t._prev}ofb.encrypt=function(_t,e){for(;_t._cache.length<e.length;)_t._cache=buffer$2.Buffer.concat([_t._cache,getBlock$1(_t)]);var $t=_t._cache.slice(0,e.length);return _t._cache=_t._cache.slice(e.length),xor$5(e,$t)};var ctr={};function incr32$2(_t){for(var e=_t.length,$t;e--;)if($t=_t.readUInt8(e),$t===255)_t.writeUInt8(0,e);else{$t++,_t.writeUInt8($t,e);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$k=safeBufferExports$1.Buffer,incr32$1=incr32_1;function getBlock(_t){var e=_t._cipher.encryptBlockRaw(_t._prev);return incr32$1(_t._prev),e}var blockSize=16;ctr.encrypt=function(_t,e){var $t=Math.ceil(e.length/blockSize),xt=_t._cache.length;_t._cache=Buffer$k.concat([_t._cache,Buffer$k.allocUnsafe($t*blockSize)]);for(var At=0;At<$t;At++){var kt=getBlock(_t),Bt=xt+At*blockSize;_t._cache.writeUInt32BE(kt[0],Bt+0),_t._cache.writeUInt32BE(kt[1],Bt+4),_t._cache.writeUInt32BE(kt[2],Bt+8),_t._cache.writeUInt32BE(kt[3],Bt+12)}var jt=_t._cache.slice(0,e.length);return _t._cache=_t._cache.slice(e.length),xor$4(e,jt)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$1={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$2=require$$2$1;for(var key$2 in modes$2)modes$2[key$2].module=modeModules[modes$2[key$2].mode];var modes_1=modes$2,aes$5={},Buffer$j=safeBufferExports$1.Buffer;function asUInt32Array(_t){Buffer$j.isBuffer(_t)||(_t=Buffer$j.from(_t));for(var e=_t.length/4|0,$t=new Array(e),xt=0;xt<e;xt++)$t[xt]=_t.readUInt32BE(xt*4);return $t}function scrubVec(_t){for(var e=0;e<_t.length;_t++)_t[e]=0}function cryptBlock(_t,e,$t,xt,At){for(var kt=$t[0],Bt=$t[1],jt=$t[2],Lt=$t[3],Ut=_t[0]^e[0],Nt=_t[1]^e[1],qt=_t[2]^e[2],Kt=_t[3]^e[3],zt,Vt,Ht,Jt,rr=4,Qt=1;Qt<At;Qt++)zt=kt[Ut>>>24]^Bt[Nt>>>16&255]^jt[qt>>>8&255]^Lt[Kt&255]^e[rr++],Vt=kt[Nt>>>24]^Bt[qt>>>16&255]^jt[Kt>>>8&255]^Lt[Ut&255]^e[rr++],Ht=kt[qt>>>24]^Bt[Kt>>>16&255]^jt[Ut>>>8&255]^Lt[Nt&255]^e[rr++],Jt=kt[Kt>>>24]^Bt[Ut>>>16&255]^jt[Nt>>>8&255]^Lt[qt&255]^e[rr++],Ut=zt,Nt=Vt,qt=Ht,Kt=Jt;return zt=(xt[Ut>>>24]<<24|xt[Nt>>>16&255]<<16|xt[qt>>>8&255]<<8|xt[Kt&255])^e[rr++],Vt=(xt[Nt>>>24]<<24|xt[qt>>>16&255]<<16|xt[Kt>>>8&255]<<8|xt[Ut&255])^e[rr++],Ht=(xt[qt>>>24]<<24|xt[Kt>>>16&255]<<16|xt[Ut>>>8&255]<<8|xt[Nt&255])^e[rr++],Jt=(xt[Kt>>>24]<<24|xt[Ut>>>16&255]<<16|xt[Nt>>>8&255]<<8|xt[qt&255])^e[rr++],zt=zt>>>0,Vt=Vt>>>0,Ht=Ht>>>0,Jt=Jt>>>0,[zt,Vt,Ht,Jt]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G$1=function(){for(var _t=new Array(256),e=0;e<256;e++)e<128?_t[e]=e<<1:_t[e]=e<<1^283;for(var $t=[],xt=[],At=[[],[],[],[]],kt=[[],[],[],[]],Bt=0,jt=0,Lt=0;Lt<256;++Lt){var Ut=jt^jt<<1^jt<<2^jt<<3^jt<<4;Ut=Ut>>>8^Ut&255^99,$t[Bt]=Ut,xt[Ut]=Bt;var Nt=_t[Bt],qt=_t[Nt],Kt=_t[qt],zt=_t[Ut]*257^Ut*16843008;At[0][Bt]=zt<<24|zt>>>8,At[1][Bt]=zt<<16|zt>>>16,At[2][Bt]=zt<<8|zt>>>24,At[3][Bt]=zt,zt=Kt*16843009^qt*65537^Nt*257^Bt*16843008,kt[0][Ut]=zt<<24|zt>>>8,kt[1][Ut]=zt<<16|zt>>>16,kt[2][Ut]=zt<<8|zt>>>24,kt[3][Ut]=zt,Bt===0?Bt=jt=1:(Bt=Nt^_t[_t[_t[Kt^Nt]]],jt^=_t[_t[jt]])}return{SBOX:$t,INV_SBOX:xt,SUB_MIX:At,INV_SUB_MIX:kt}}();function AES(_t){this._key=asUInt32Array(_t),this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){for(var _t=this._key,e=_t.length,$t=e+6,xt=($t+1)*4,At=[],kt=0;kt<e;kt++)At[kt]=_t[kt];for(kt=e;kt<xt;kt++){var Bt=At[kt-1];kt%e===0?(Bt=Bt<<8|Bt>>>24,Bt=G$1.SBOX[Bt>>>24]<<24|G$1.SBOX[Bt>>>16&255]<<16|G$1.SBOX[Bt>>>8&255]<<8|G$1.SBOX[Bt&255],Bt^=RCON[kt/e|0]<<24):e>6&&kt%e===4&&(Bt=G$1.SBOX[Bt>>>24]<<24|G$1.SBOX[Bt>>>16&255]<<16|G$1.SBOX[Bt>>>8&255]<<8|G$1.SBOX[Bt&255]),At[kt]=At[kt-e]^Bt}for(var jt=[],Lt=0;Lt<xt;Lt++){var Ut=xt-Lt,Nt=At[Ut-(Lt%4?0:4)];Lt<4||Ut<=4?jt[Lt]=Nt:jt[Lt]=G$1.INV_SUB_MIX[0][G$1.SBOX[Nt>>>24]]^G$1.INV_SUB_MIX[1][G$1.SBOX[Nt>>>16&255]]^G$1.INV_SUB_MIX[2][G$1.SBOX[Nt>>>8&255]]^G$1.INV_SUB_MIX[3][G$1.SBOX[Nt&255]]}this._nRounds=$t,this._keySchedule=At,this._invKeySchedule=jt};AES.prototype.encryptBlockRaw=function(_t){return _t=asUInt32Array(_t),cryptBlock(_t,this._keySchedule,G$1.SUB_MIX,G$1.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(_t){var e=this.encryptBlockRaw(_t),$t=Buffer$j.allocUnsafe(16);return $t.writeUInt32BE(e[0],0),$t.writeUInt32BE(e[1],4),$t.writeUInt32BE(e[2],8),$t.writeUInt32BE(e[3],12),$t};AES.prototype.decryptBlock=function(_t){_t=asUInt32Array(_t);var e=_t[1];_t[1]=_t[3],_t[3]=e;var $t=cryptBlock(_t,this._invKeySchedule,G$1.INV_SUB_MIX,G$1.INV_SBOX,this._nRounds),xt=Buffer$j.allocUnsafe(16);return xt.writeUInt32BE($t[0],0),xt.writeUInt32BE($t[3],4),xt.writeUInt32BE($t[2],8),xt.writeUInt32BE($t[1],12),xt};AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)};aes$5.AES=AES;var Buffer$i=safeBufferExports$1.Buffer,ZEROES=Buffer$i.alloc(16,0);function toArray$3(_t){return[_t.readUInt32BE(0),_t.readUInt32BE(4),_t.readUInt32BE(8),_t.readUInt32BE(12)]}function fromArray(_t){var e=Buffer$i.allocUnsafe(16);return e.writeUInt32BE(_t[0]>>>0,0),e.writeUInt32BE(_t[1]>>>0,4),e.writeUInt32BE(_t[2]>>>0,8),e.writeUInt32BE(_t[3]>>>0,12),e}function GHASH$1(_t){this.h=_t,this.state=Buffer$i.alloc(16,0),this.cache=Buffer$i.allocUnsafe(0)}GHASH$1.prototype.ghash=function(_t){for(var e=-1;++e<_t.length;)this.state[e]^=_t[e];this._multiply()};GHASH$1.prototype._multiply=function(){for(var _t=toArray$3(this.h),e=[0,0,0,0],$t,xt,At,kt=-1;++kt<128;){for(xt=(this.state[~~(kt/8)]&1<<7-kt%8)!==0,xt&&(e[0]^=_t[0],e[1]^=_t[1],e[2]^=_t[2],e[3]^=_t[3]),At=(_t[3]&1)!==0,$t=3;$t>0;$t--)_t[$t]=_t[$t]>>>1|(_t[$t-1]&1)<<31;_t[0]=_t[0]>>>1,At&&(_t[0]=_t[0]^225<<24)}this.state=fromArray(e)};GHASH$1.prototype.update=function(_t){this.cache=Buffer$i.concat([this.cache,_t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};GHASH$1.prototype.final=function(_t,e){return this.cache.length&&this.ghash(Buffer$i.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,_t,0,e])),this.state};var ghash=GHASH$1,aes$4=aes$5,Buffer$h=safeBufferExports$1.Buffer,Transform$9=cipherBase,inherits$8=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(_t,e){var $t=0;_t.length!==e.length&&$t++;for(var xt=Math.min(_t.length,e.length),At=0;At<xt;++At)$t+=_t[At]^e[At];return $t}function calcIv(_t,e,$t){if(e.length===12)return _t._finID=Buffer$h.concat([e,Buffer$h.from([0,0,0,1])]),Buffer$h.concat([e,Buffer$h.from([0,0,0,2])]);var xt=new GHASH($t),At=e.length,kt=At%16;xt.update(e),kt&&(kt=16-kt,xt.update(Buffer$h.alloc(kt,0))),xt.update(Buffer$h.alloc(8,0));var Bt=At*8,jt=Buffer$h.alloc(8);jt.writeUIntBE(Bt,0,8),xt.update(jt),_t._finID=xt.state;var Lt=Buffer$h.from(_t._finID);return incr32(Lt),Lt}function StreamCipher$3(_t,e,$t,xt){Transform$9.call(this);var At=Buffer$h.alloc(4,0);this._cipher=new aes$4.AES(e);var kt=this._cipher.encryptBlock(At);this._ghash=new GHASH(kt),$t=calcIv(this,$t,kt),this._prev=Buffer$h.from($t),this._cache=Buffer$h.allocUnsafe(0),this._secCache=Buffer$h.allocUnsafe(0),this._decrypt=xt,this._alen=0,this._len=0,this._mode=_t,this._authTag=null,this._called=!1}inherits$8(StreamCipher$3,Transform$9);StreamCipher$3.prototype._update=function(_t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Buffer$h.alloc(e,0),this._ghash.update(e))}this._called=!0;var $t=this._mode.encrypt(this,_t);return this._decrypt?this._ghash.update(_t):this._ghash.update($t),this._len+=_t.length,$t};StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var _t=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(_t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=_t,this._cipher.scrub()};StreamCipher$3.prototype.getAuthTag=function(){if(this._decrypt||!Buffer$h.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher$3.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};StreamCipher$3.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};var authCipher=StreamCipher$3,aes$3=aes$5,Buffer$g=safeBufferExports$1.Buffer,Transform$8=cipherBase,inherits$7=inherits_browserExports;function StreamCipher$2(_t,e,$t,xt){Transform$8.call(this),this._cipher=new aes$3.AES(e),this._prev=Buffer$g.from($t),this._cache=Buffer$g.allocUnsafe(0),this._secCache=Buffer$g.allocUnsafe(0),this._decrypt=xt,this._mode=_t}inherits$7(StreamCipher$2,Transform$8);StreamCipher$2.prototype._update=function(_t){return this._mode.encrypt(this,_t,this._decrypt)};StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$f=safeBufferExports$1.Buffer,MD5=md5_js;function EVP_BytesToKey(_t,e,$t,xt){if(Buffer$f.isBuffer(_t)||(_t=Buffer$f.from(_t,"binary")),e&&(Buffer$f.isBuffer(e)||(e=Buffer$f.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var At=$t/8,kt=Buffer$f.alloc(At),Bt=Buffer$f.alloc(xt||0),jt=Buffer$f.alloc(0);At>0||xt>0;){var Lt=new MD5;Lt.update(jt),Lt.update(_t),e&&Lt.update(e),jt=Lt.digest();var Ut=0;if(At>0){var Nt=kt.length-At;Ut=Math.min(At,jt.length),jt.copy(kt,Nt,0,Ut),At-=Ut}if(Ut<jt.length&&xt>0){var qt=Bt.length-xt,Kt=Math.min(xt,jt.length-Ut);jt.copy(Bt,qt,Ut,Ut+Kt),xt-=Kt}}return jt.fill(0),{key:kt,iv:Bt}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$e=safeBufferExports$1.Buffer,StreamCipher$1=streamCipher,Transform$7=cipherBase,aes$2=aes$5,ebtk$2=evp_bytestokey,inherits$6=inherits_browserExports;function Cipher(_t,e,$t){Transform$7.call(this),this._cache=new Splitter$1,this._cipher=new aes$2.AES(e),this._prev=Buffer$e.from($t),this._mode=_t,this._autopadding=!0}inherits$6(Cipher,Transform$7);Cipher.prototype._update=function(_t){this._cache.add(_t);for(var e,$t,xt=[];e=this._cache.get();)$t=this._mode.encrypt(this,e),xt.push($t);return Buffer$e.concat(xt)};var PADDING=Buffer$e.alloc(16,16);Cipher.prototype._final=function(){var _t=this._cache.flush();if(this._autopadding)return _t=this._mode.encrypt(this,_t),this._cipher.scrub(),_t;if(!_t.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")};Cipher.prototype.setAutoPadding=function(_t){return this._autopadding=!!_t,this};function Splitter$1(){this.cache=Buffer$e.allocUnsafe(0)}Splitter$1.prototype.add=function(_t){this.cache=Buffer$e.concat([this.cache,_t])};Splitter$1.prototype.get=function(){if(this.cache.length>15){var _t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),_t}return null};Splitter$1.prototype.flush=function(){for(var _t=16-this.cache.length,e=Buffer$e.allocUnsafe(_t),$t=-1;++$t<_t;)e.writeUInt8(_t,$t);return Buffer$e.concat([this.cache,e])};function createCipheriv$1(_t,e,$t){var xt=MODES$1[_t.toLowerCase()];if(!xt)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=Buffer$e.from(e)),e.length!==xt.key/8)throw new TypeError("invalid key length "+e.length);if(typeof $t=="string"&&($t=Buffer$e.from($t)),xt.mode!=="GCM"&&$t.length!==xt.iv)throw new TypeError("invalid iv length "+$t.length);return xt.type==="stream"?new StreamCipher$1(xt.module,e,$t):xt.type==="auth"?new AuthCipher$1(xt.module,e,$t):new Cipher(xt.module,e,$t)}function createCipher$1(_t,e){var $t=MODES$1[_t.toLowerCase()];if(!$t)throw new TypeError("invalid suite type");var xt=ebtk$2(e,!1,$t.key,$t.iv);return createCipheriv$1(_t,xt.key,xt.iv)}encrypter.createCipheriv=createCipheriv$1;encrypter.createCipher=createCipher$1;var decrypter={},AuthCipher=authCipher,Buffer$d=safeBufferExports$1.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform$6=cipherBase,aes$1=aes$5,ebtk$1=evp_bytestokey,inherits$5=inherits_browserExports;function Decipher(_t,e,$t){Transform$6.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$1.AES(e),this._prev=Buffer$d.from($t),this._mode=_t,this._autopadding=!0}inherits$5(Decipher,Transform$6);Decipher.prototype._update=function(_t){this._cache.add(_t);for(var e,$t,xt=[];e=this._cache.get(this._autopadding);)$t=this._mode.decrypt(this,e),xt.push($t);return Buffer$d.concat(xt)};Decipher.prototype._final=function(){var _t=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,_t));if(_t)throw new Error("data not multiple of block length")};Decipher.prototype.setAutoPadding=function(_t){return this._autopadding=!!_t,this};function Splitter(){this.cache=Buffer$d.allocUnsafe(0)}Splitter.prototype.add=function(_t){this.cache=Buffer$d.concat([this.cache,_t])};Splitter.prototype.get=function(_t){var e;if(_t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(_t){var e=_t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var $t=-1;++$t<e;)if(_t[$t+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return _t.slice(0,16-e)}function createDecipheriv$1(_t,e,$t){var xt=MODES[_t.toLowerCase()];if(!xt)throw new TypeError("invalid suite type");if(typeof $t=="string"&&($t=Buffer$d.from($t)),xt.mode!=="GCM"&&$t.length!==xt.iv)throw new TypeError("invalid iv length "+$t.length);if(typeof e=="string"&&(e=Buffer$d.from(e)),e.length!==xt.key/8)throw new TypeError("invalid key length "+e.length);return xt.type==="stream"?new StreamCipher(xt.module,e,$t,!0):xt.type==="auth"?new AuthCipher(xt.module,e,$t,!0):new Decipher(xt.module,e,$t)}function createDecipher$1(_t,e){var $t=MODES[_t.toLowerCase()];if(!$t)throw new TypeError("invalid suite type");var xt=ebtk$1(e,!1,$t.key,$t.iv);return createDecipheriv$1(_t,xt.key,xt.iv)}decrypter.createDecipher=createDecipher$1;decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$1=require$$2$1;function getCiphers$1(){return Object.keys(modes$1)}browser$8.createCipher=browser$8.Cipher=ciphers$2.createCipher;browser$8.createCipheriv=browser$8.Cipheriv=ciphers$2.createCipheriv;browser$8.createDecipher=browser$8.Decipher=deciphers.createDecipher;browser$8.createDecipheriv=browser$8.Decipheriv=deciphers.createDecipheriv;browser$8.listCiphers=browser$8.getCiphers=getCiphers$1;var modes={};(function(_t){_t["des-ecb"]={key:8,iv:0},_t["des-cbc"]=_t.des={key:8,iv:8},_t["des-ede3-cbc"]=_t.des3={key:24,iv:8},_t["des-ede3"]={key:24,iv:0},_t["des-ede-cbc"]={key:16,iv:8},_t["des-ede"]={key:16,iv:0}})(modes);var DES=browserifyDes,aes=browser$8,aesModes=modes_1,desModes=modes,ebtk=evp_bytestokey;function createCipher(_t,e){_t=_t.toLowerCase();var $t,xt;if(aesModes[_t])$t=aesModes[_t].key,xt=aesModes[_t].iv;else if(desModes[_t])$t=desModes[_t].key*8,xt=desModes[_t].iv;else throw new TypeError("invalid suite type");var At=ebtk(e,!1,$t,xt);return createCipheriv(_t,At.key,At.iv)}function createDecipher(_t,e){_t=_t.toLowerCase();var $t,xt;if(aesModes[_t])$t=aesModes[_t].key,xt=aesModes[_t].iv;else if(desModes[_t])$t=desModes[_t].key*8,xt=desModes[_t].iv;else throw new TypeError("invalid suite type");var At=ebtk(e,!1,$t,xt);return createDecipheriv(_t,At.key,At.iv)}function createCipheriv(_t,e,$t){if(_t=_t.toLowerCase(),aesModes[_t])return aes.createCipheriv(_t,e,$t);if(desModes[_t])return new DES({key:e,iv:$t,mode:_t});throw new TypeError("invalid suite type")}function createDecipheriv(_t,e,$t){if(_t=_t.toLowerCase(),aesModes[_t])return aes.createDecipheriv(_t,e,$t);if(desModes[_t])return new DES({key:e,iv:$t,mode:_t,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}browser$9.createCipher=browser$9.Cipher=createCipher;browser$9.createCipheriv=browser$9.Cipheriv=createCipheriv;browser$9.createDecipher=browser$9.Decipher=createDecipher;browser$9.createDecipheriv=browser$9.Decipheriv=createDecipheriv;browser$9.listCiphers=browser$9.getCiphers=getCiphers;var browser$7={},bn$1={exports:{}};bn$1.exports;(function(_t){(function(e,$t){function xt(kr,lr){if(!kr)throw new Error(lr||"Assertion failed")}function At(kr,lr){kr.super_=lr;var ir=function(){};ir.prototype=lr.prototype,kr.prototype=new ir,kr.prototype.constructor=kr}function kt(kr,lr,ir){if(kt.isBN(kr))return kr;this.negative=0,this.words=null,this.length=0,this.red=null,kr!==null&&((lr==="le"||lr==="be")&&(ir=lr,lr=10),this._init(kr||0,lr||10,ir||"be"))}typeof e=="object"?e.exports=kt:$t.BN=kt,kt.BN=kt,kt.wordSize=26;var Bt;try{typeof window<"u"&&typeof window.Buffer<"u"?Bt=window.Buffer:Bt=buffer$2.Buffer}catch{}kt.isBN=function(lr){return lr instanceof kt?!0:lr!==null&&typeof lr=="object"&&lr.constructor.wordSize===kt.wordSize&&Array.isArray(lr.words)},kt.max=function(lr,ir){return lr.cmp(ir)>0?lr:ir},kt.min=function(lr,ir){return lr.cmp(ir)<0?lr:ir},kt.prototype._init=function(lr,ir,Xt){if(typeof lr=="number")return this._initNumber(lr,ir,Xt);if(typeof lr=="object")return this._initArray(lr,ir,Xt);ir==="hex"&&(ir=16),xt(ir===(ir|0)&&ir>=2&&ir<=36),lr=lr.toString().replace(/\s+/g,"");var er=0;lr[0]==="-"&&(er++,this.negative=1),er<lr.length&&(ir===16?this._parseHex(lr,er,Xt):(this._parseBase(lr,ir,er),Xt==="le"&&this._initArray(this.toArray(),ir,Xt)))},kt.prototype._initNumber=function(lr,ir,Xt){lr<0&&(this.negative=1,lr=-lr),lr<67108864?(this.words=[lr&67108863],this.length=1):lr<4503599627370496?(this.words=[lr&67108863,lr/67108864&67108863],this.length=2):(xt(lr<9007199254740992),this.words=[lr&67108863,lr/67108864&67108863,1],this.length=3),Xt==="le"&&this._initArray(this.toArray(),ir,Xt)},kt.prototype._initArray=function(lr,ir,Xt){if(xt(typeof lr.length=="number"),lr.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lr.length/3),this.words=new Array(this.length);for(var er=0;er<this.length;er++)this.words[er]=0;var pr,ur,gr=0;if(Xt==="be")for(er=lr.length-1,pr=0;er>=0;er-=3)ur=lr[er]|lr[er-1]<<8|lr[er-2]<<16,this.words[pr]|=ur<<gr&67108863,this.words[pr+1]=ur>>>26-gr&67108863,gr+=24,gr>=26&&(gr-=26,pr++);else if(Xt==="le")for(er=0,pr=0;er<lr.length;er+=3)ur=lr[er]|lr[er+1]<<8|lr[er+2]<<16,this.words[pr]|=ur<<gr&67108863,this.words[pr+1]=ur>>>26-gr&67108863,gr+=24,gr>=26&&(gr-=26,pr++);return this.strip()};function jt(kr,lr){var ir=kr.charCodeAt(lr);return ir>=65&&ir<=70?ir-55:ir>=97&&ir<=102?ir-87:ir-48&15}function Lt(kr,lr,ir){var Xt=jt(kr,ir);return ir-1>=lr&&(Xt|=jt(kr,ir-1)<<4),Xt}kt.prototype._parseHex=function(lr,ir,Xt){this.length=Math.ceil((lr.length-ir)/6),this.words=new Array(this.length);for(var er=0;er<this.length;er++)this.words[er]=0;var pr=0,ur=0,gr;if(Xt==="be")for(er=lr.length-1;er>=ir;er-=2)gr=Lt(lr,ir,er)<<pr,this.words[ur]|=gr&67108863,pr>=18?(pr-=18,ur+=1,this.words[ur]|=gr>>>26):pr+=8;else{var ar=lr.length-ir;for(er=ar%2===0?ir+1:ir;er<lr.length;er+=2)gr=Lt(lr,ir,er)<<pr,this.words[ur]|=gr&67108863,pr>=18?(pr-=18,ur+=1,this.words[ur]|=gr>>>26):pr+=8}this.strip()};function Ut(kr,lr,ir,Xt){for(var er=0,pr=Math.min(kr.length,ir),ur=lr;ur<pr;ur++){var gr=kr.charCodeAt(ur)-48;er*=Xt,gr>=49?er+=gr-49+10:gr>=17?er+=gr-17+10:er+=gr}return er}kt.prototype._parseBase=function(lr,ir,Xt){this.words=[0],this.length=1;for(var er=0,pr=1;pr<=67108863;pr*=ir)er++;er--,pr=pr/ir|0;for(var ur=lr.length-Xt,gr=ur%er,ar=Math.min(ur,ur-gr)+Xt,tr=0,dr=Xt;dr<ar;dr+=er)tr=Ut(lr,dr,dr+er,ir),this.imuln(pr),this.words[0]+tr<67108864?this.words[0]+=tr:this._iaddn(tr);if(gr!==0){var fr=1;for(tr=Ut(lr,dr,lr.length,ir),dr=0;dr<gr;dr++)fr*=ir;this.imuln(fr),this.words[0]+tr<67108864?this.words[0]+=tr:this._iaddn(tr)}this.strip()},kt.prototype.copy=function(lr){lr.words=new Array(this.length);for(var ir=0;ir<this.length;ir++)lr.words[ir]=this.words[ir];lr.length=this.length,lr.negative=this.negative,lr.red=this.red},kt.prototype.clone=function(){var lr=new kt(null);return this.copy(lr),lr},kt.prototype._expand=function(lr){for(;this.length<lr;)this.words[this.length++]=0;return this},kt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},kt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},kt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var Nt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],qt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];kt.prototype.toString=function(lr,ir){lr=lr||10,ir=ir|0||1;var Xt;if(lr===16||lr==="hex"){Xt="";for(var er=0,pr=0,ur=0;ur<this.length;ur++){var gr=this.words[ur],ar=((gr<<er|pr)&16777215).toString(16);pr=gr>>>24-er&16777215,pr!==0||ur!==this.length-1?Xt=Nt[6-ar.length]+ar+Xt:Xt=ar+Xt,er+=2,er>=26&&(er-=26,ur--)}for(pr!==0&&(Xt=pr.toString(16)+Xt);Xt.length%ir!==0;)Xt="0"+Xt;return this.negative!==0&&(Xt="-"+Xt),Xt}if(lr===(lr|0)&&lr>=2&&lr<=36){var tr=qt[lr],dr=Kt[lr];Xt="";var fr=this.clone();for(fr.negative=0;!fr.isZero();){var br=fr.modn(dr).toString(lr);fr=fr.idivn(dr),fr.isZero()?Xt=br+Xt:Xt=Nt[tr-br.length]+br+Xt}for(this.isZero()&&(Xt="0"+Xt);Xt.length%ir!==0;)Xt="0"+Xt;return this.negative!==0&&(Xt="-"+Xt),Xt}xt(!1,"Base should be between 2 and 36")},kt.prototype.toNumber=function(){var lr=this.words[0];return this.length===2?lr+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lr+=4503599627370496+this.words[1]*67108864:this.length>2&&xt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lr:lr},kt.prototype.toJSON=function(){return this.toString(16)},kt.prototype.toBuffer=function(lr,ir){return xt(typeof Bt<"u"),this.toArrayLike(Bt,lr,ir)},kt.prototype.toArray=function(lr,ir){return this.toArrayLike(Array,lr,ir)},kt.prototype.toArrayLike=function(lr,ir,Xt){var er=this.byteLength(),pr=Xt||Math.max(1,er);xt(er<=pr,"byte array longer than desired length"),xt(pr>0,"Requested array length <= 0"),this.strip();var ur=ir==="le",gr=new lr(pr),ar,tr,dr=this.clone();if(ur){for(tr=0;!dr.isZero();tr++)ar=dr.andln(255),dr.iushrn(8),gr[tr]=ar;for(;tr<pr;tr++)gr[tr]=0}else{for(tr=0;tr<pr-er;tr++)gr[tr]=0;for(tr=0;!dr.isZero();tr++)ar=dr.andln(255),dr.iushrn(8),gr[pr-tr-1]=ar}return gr},Math.clz32?kt.prototype._countBits=function(lr){return 32-Math.clz32(lr)}:kt.prototype._countBits=function(lr){var ir=lr,Xt=0;return ir>=4096&&(Xt+=13,ir>>>=13),ir>=64&&(Xt+=7,ir>>>=7),ir>=8&&(Xt+=4,ir>>>=4),ir>=2&&(Xt+=2,ir>>>=2),Xt+ir},kt.prototype._zeroBits=function(lr){if(lr===0)return 26;var ir=lr,Xt=0;return ir&8191||(Xt+=13,ir>>>=13),ir&127||(Xt+=7,ir>>>=7),ir&15||(Xt+=4,ir>>>=4),ir&3||(Xt+=2,ir>>>=2),ir&1||Xt++,Xt},kt.prototype.bitLength=function(){var lr=this.words[this.length-1],ir=this._countBits(lr);return(this.length-1)*26+ir};function zt(kr){for(var lr=new Array(kr.bitLength()),ir=0;ir<lr.length;ir++){var Xt=ir/26|0,er=ir%26;lr[ir]=(kr.words[Xt]&1<<er)>>>er}return lr}kt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lr=0,ir=0;ir<this.length;ir++){var Xt=this._zeroBits(this.words[ir]);if(lr+=Xt,Xt!==26)break}return lr},kt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},kt.prototype.toTwos=function(lr){return this.negative!==0?this.abs().inotn(lr).iaddn(1):this.clone()},kt.prototype.fromTwos=function(lr){return this.testn(lr-1)?this.notn(lr).iaddn(1).ineg():this.clone()},kt.prototype.isNeg=function(){return this.negative!==0},kt.prototype.neg=function(){return this.clone().ineg()},kt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},kt.prototype.iuor=function(lr){for(;this.length<lr.length;)this.words[this.length++]=0;for(var ir=0;ir<lr.length;ir++)this.words[ir]=this.words[ir]|lr.words[ir];return this.strip()},kt.prototype.ior=function(lr){return xt((this.negative|lr.negative)===0),this.iuor(lr)},kt.prototype.or=function(lr){return this.length>lr.length?this.clone().ior(lr):lr.clone().ior(this)},kt.prototype.uor=function(lr){return this.length>lr.length?this.clone().iuor(lr):lr.clone().iuor(this)},kt.prototype.iuand=function(lr){var ir;this.length>lr.length?ir=lr:ir=this;for(var Xt=0;Xt<ir.length;Xt++)this.words[Xt]=this.words[Xt]&lr.words[Xt];return this.length=ir.length,this.strip()},kt.prototype.iand=function(lr){return xt((this.negative|lr.negative)===0),this.iuand(lr)},kt.prototype.and=function(lr){return this.length>lr.length?this.clone().iand(lr):lr.clone().iand(this)},kt.prototype.uand=function(lr){return this.length>lr.length?this.clone().iuand(lr):lr.clone().iuand(this)},kt.prototype.iuxor=function(lr){var ir,Xt;this.length>lr.length?(ir=this,Xt=lr):(ir=lr,Xt=this);for(var er=0;er<Xt.length;er++)this.words[er]=ir.words[er]^Xt.words[er];if(this!==ir)for(;er<ir.length;er++)this.words[er]=ir.words[er];return this.length=ir.length,this.strip()},kt.prototype.ixor=function(lr){return xt((this.negative|lr.negative)===0),this.iuxor(lr)},kt.prototype.xor=function(lr){return this.length>lr.length?this.clone().ixor(lr):lr.clone().ixor(this)},kt.prototype.uxor=function(lr){return this.length>lr.length?this.clone().iuxor(lr):lr.clone().iuxor(this)},kt.prototype.inotn=function(lr){xt(typeof lr=="number"&&lr>=0);var ir=Math.ceil(lr/26)|0,Xt=lr%26;this._expand(ir),Xt>0&&ir--;for(var er=0;er<ir;er++)this.words[er]=~this.words[er]&67108863;return Xt>0&&(this.words[er]=~this.words[er]&67108863>>26-Xt),this.strip()},kt.prototype.notn=function(lr){return this.clone().inotn(lr)},kt.prototype.setn=function(lr,ir){xt(typeof lr=="number"&&lr>=0);var Xt=lr/26|0,er=lr%26;return this._expand(Xt+1),ir?this.words[Xt]=this.words[Xt]|1<<er:this.words[Xt]=this.words[Xt]&~(1<<er),this.strip()},kt.prototype.iadd=function(lr){var ir;if(this.negative!==0&&lr.negative===0)return this.negative=0,ir=this.isub(lr),this.negative^=1,this._normSign();if(this.negative===0&&lr.negative!==0)return lr.negative=0,ir=this.isub(lr),lr.negative=1,ir._normSign();var Xt,er;this.length>lr.length?(Xt=this,er=lr):(Xt=lr,er=this);for(var pr=0,ur=0;ur<er.length;ur++)ir=(Xt.words[ur]|0)+(er.words[ur]|0)+pr,this.words[ur]=ir&67108863,pr=ir>>>26;for(;pr!==0&&ur<Xt.length;ur++)ir=(Xt.words[ur]|0)+pr,this.words[ur]=ir&67108863,pr=ir>>>26;if(this.length=Xt.length,pr!==0)this.words[this.length]=pr,this.length++;else if(Xt!==this)for(;ur<Xt.length;ur++)this.words[ur]=Xt.words[ur];return this},kt.prototype.add=function(lr){var ir;return lr.negative!==0&&this.negative===0?(lr.negative=0,ir=this.sub(lr),lr.negative^=1,ir):lr.negative===0&&this.negative!==0?(this.negative=0,ir=lr.sub(this),this.negative=1,ir):this.length>lr.length?this.clone().iadd(lr):lr.clone().iadd(this)},kt.prototype.isub=function(lr){if(lr.negative!==0){lr.negative=0;var ir=this.iadd(lr);return lr.negative=1,ir._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lr),this.negative=1,this._normSign();var Xt=this.cmp(lr);if(Xt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var er,pr;Xt>0?(er=this,pr=lr):(er=lr,pr=this);for(var ur=0,gr=0;gr<pr.length;gr++)ir=(er.words[gr]|0)-(pr.words[gr]|0)+ur,ur=ir>>26,this.words[gr]=ir&67108863;for(;ur!==0&&gr<er.length;gr++)ir=(er.words[gr]|0)+ur,ur=ir>>26,this.words[gr]=ir&67108863;if(ur===0&&gr<er.length&&er!==this)for(;gr<er.length;gr++)this.words[gr]=er.words[gr];return this.length=Math.max(this.length,gr),er!==this&&(this.negative=1),this.strip()},kt.prototype.sub=function(lr){return this.clone().isub(lr)};function Vt(kr,lr,ir){ir.negative=lr.negative^kr.negative;var Xt=kr.length+lr.length|0;ir.length=Xt,Xt=Xt-1|0;var er=kr.words[0]|0,pr=lr.words[0]|0,ur=er*pr,gr=ur&67108863,ar=ur/67108864|0;ir.words[0]=gr;for(var tr=1;tr<Xt;tr++){for(var dr=ar>>>26,fr=ar&67108863,br=Math.min(tr,lr.length-1),Sr=Math.max(0,tr-kr.length+1);Sr<=br;Sr++){var Dr=tr-Sr|0;er=kr.words[Dr]|0,pr=lr.words[Sr]|0,ur=er*pr+fr,dr+=ur/67108864|0,fr=ur&67108863}ir.words[tr]=fr|0,ar=dr|0}return ar!==0?ir.words[tr]=ar|0:ir.length--,ir.strip()}var Ht=function(lr,ir,Xt){var er=lr.words,pr=ir.words,ur=Xt.words,gr=0,ar,tr,dr,fr=er[0]|0,br=fr&8191,Sr=fr>>>13,Dr=er[1]|0,Er=Dr&8191,wr=Dr>>>13,Tr=er[2]|0,Mr=Tr&8191,Lr=Tr>>>13,Cr=er[3]|0,Br=Cr&8191,$r=Cr>>>13,Rr=er[4]|0,Ur=Rr&8191,Pr=Rr>>>13,_r=er[5]|0,Ar=_r&8191,jr=_r>>>13,Kr=er[6]|0,Zr=Kr&8191,Jr=Kr>>>13,nn=er[7]|0,on=nn&8191,Gr=nn>>>13,Fr=er[8]|0,Xr=Fr&8191,tn=Fr>>>13,en=er[9]|0,un=en&8191,hn=en>>>13,yn=pr[0]|0,pn=yn&8191,Dn=yn>>>13,An=pr[1]|0,vn=An&8191,In=An>>>13,Rn=pr[2]|0,En=Rn&8191,On=Rn>>>13,Cn=pr[3]|0,gn=Cn&8191,kn=Cn>>>13,Mn=pr[4]|0,Tn=Mn&8191,Ln=Mn>>>13,qr=pr[5]|0,Vr=qr&8191,sn=qr>>>13,an=pr[6]|0,cn=an&8191,Pn=an>>>13,Bn=pr[7]|0,Wr=Bn&8191,Hr=Bn>>>13,Yr=pr[8]|0,Qr=Yr&8191,rn=Yr>>>13,fn=pr[9]|0,ln=fn&8191,mn=fn>>>13;Xt.negative=lr.negative^ir.negative,Xt.length=19,ar=Math.imul(br,pn),tr=Math.imul(br,Dn),tr=tr+Math.imul(Sr,pn)|0,dr=Math.imul(Sr,Dn);var wn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(wn>>>26)|0,wn&=67108863,ar=Math.imul(Er,pn),tr=Math.imul(Er,Dn),tr=tr+Math.imul(wr,pn)|0,dr=Math.imul(wr,Dn),ar=ar+Math.imul(br,vn)|0,tr=tr+Math.imul(br,In)|0,tr=tr+Math.imul(Sr,vn)|0,dr=dr+Math.imul(Sr,In)|0;var _n=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(_n>>>26)|0,_n&=67108863,ar=Math.imul(Mr,pn),tr=Math.imul(Mr,Dn),tr=tr+Math.imul(Lr,pn)|0,dr=Math.imul(Lr,Dn),ar=ar+Math.imul(Er,vn)|0,tr=tr+Math.imul(Er,In)|0,tr=tr+Math.imul(wr,vn)|0,dr=dr+Math.imul(wr,In)|0,ar=ar+Math.imul(br,En)|0,tr=tr+Math.imul(br,On)|0,tr=tr+Math.imul(Sr,En)|0,dr=dr+Math.imul(Sr,On)|0;var $n=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+($n>>>26)|0,$n&=67108863,ar=Math.imul(Br,pn),tr=Math.imul(Br,Dn),tr=tr+Math.imul($r,pn)|0,dr=Math.imul($r,Dn),ar=ar+Math.imul(Mr,vn)|0,tr=tr+Math.imul(Mr,In)|0,tr=tr+Math.imul(Lr,vn)|0,dr=dr+Math.imul(Lr,In)|0,ar=ar+Math.imul(Er,En)|0,tr=tr+Math.imul(Er,On)|0,tr=tr+Math.imul(wr,En)|0,dr=dr+Math.imul(wr,On)|0,ar=ar+Math.imul(br,gn)|0,tr=tr+Math.imul(br,kn)|0,tr=tr+Math.imul(Sr,gn)|0,dr=dr+Math.imul(Sr,kn)|0;var xn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(xn>>>26)|0,xn&=67108863,ar=Math.imul(Ur,pn),tr=Math.imul(Ur,Dn),tr=tr+Math.imul(Pr,pn)|0,dr=Math.imul(Pr,Dn),ar=ar+Math.imul(Br,vn)|0,tr=tr+Math.imul(Br,In)|0,tr=tr+Math.imul($r,vn)|0,dr=dr+Math.imul($r,In)|0,ar=ar+Math.imul(Mr,En)|0,tr=tr+Math.imul(Mr,On)|0,tr=tr+Math.imul(Lr,En)|0,dr=dr+Math.imul(Lr,On)|0,ar=ar+Math.imul(Er,gn)|0,tr=tr+Math.imul(Er,kn)|0,tr=tr+Math.imul(wr,gn)|0,dr=dr+Math.imul(wr,kn)|0,ar=ar+Math.imul(br,Tn)|0,tr=tr+Math.imul(br,Ln)|0,tr=tr+Math.imul(Sr,Tn)|0,dr=dr+Math.imul(Sr,Ln)|0;var Un=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Un>>>26)|0,Un&=67108863,ar=Math.imul(Ar,pn),tr=Math.imul(Ar,Dn),tr=tr+Math.imul(jr,pn)|0,dr=Math.imul(jr,Dn),ar=ar+Math.imul(Ur,vn)|0,tr=tr+Math.imul(Ur,In)|0,tr=tr+Math.imul(Pr,vn)|0,dr=dr+Math.imul(Pr,In)|0,ar=ar+Math.imul(Br,En)|0,tr=tr+Math.imul(Br,On)|0,tr=tr+Math.imul($r,En)|0,dr=dr+Math.imul($r,On)|0,ar=ar+Math.imul(Mr,gn)|0,tr=tr+Math.imul(Mr,kn)|0,tr=tr+Math.imul(Lr,gn)|0,dr=dr+Math.imul(Lr,kn)|0,ar=ar+Math.imul(Er,Tn)|0,tr=tr+Math.imul(Er,Ln)|0,tr=tr+Math.imul(wr,Tn)|0,dr=dr+Math.imul(wr,Ln)|0,ar=ar+Math.imul(br,Vr)|0,tr=tr+Math.imul(br,sn)|0,tr=tr+Math.imul(Sr,Vr)|0,dr=dr+Math.imul(Sr,sn)|0;var Sn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,ar=Math.imul(Zr,pn),tr=Math.imul(Zr,Dn),tr=tr+Math.imul(Jr,pn)|0,dr=Math.imul(Jr,Dn),ar=ar+Math.imul(Ar,vn)|0,tr=tr+Math.imul(Ar,In)|0,tr=tr+Math.imul(jr,vn)|0,dr=dr+Math.imul(jr,In)|0,ar=ar+Math.imul(Ur,En)|0,tr=tr+Math.imul(Ur,On)|0,tr=tr+Math.imul(Pr,En)|0,dr=dr+Math.imul(Pr,On)|0,ar=ar+Math.imul(Br,gn)|0,tr=tr+Math.imul(Br,kn)|0,tr=tr+Math.imul($r,gn)|0,dr=dr+Math.imul($r,kn)|0,ar=ar+Math.imul(Mr,Tn)|0,tr=tr+Math.imul(Mr,Ln)|0,tr=tr+Math.imul(Lr,Tn)|0,dr=dr+Math.imul(Lr,Ln)|0,ar=ar+Math.imul(Er,Vr)|0,tr=tr+Math.imul(Er,sn)|0,tr=tr+Math.imul(wr,Vr)|0,dr=dr+Math.imul(wr,sn)|0,ar=ar+Math.imul(br,cn)|0,tr=tr+Math.imul(br,Pn)|0,tr=tr+Math.imul(Sr,cn)|0,dr=dr+Math.imul(Sr,Pn)|0;var jn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(jn>>>26)|0,jn&=67108863,ar=Math.imul(on,pn),tr=Math.imul(on,Dn),tr=tr+Math.imul(Gr,pn)|0,dr=Math.imul(Gr,Dn),ar=ar+Math.imul(Zr,vn)|0,tr=tr+Math.imul(Zr,In)|0,tr=tr+Math.imul(Jr,vn)|0,dr=dr+Math.imul(Jr,In)|0,ar=ar+Math.imul(Ar,En)|0,tr=tr+Math.imul(Ar,On)|0,tr=tr+Math.imul(jr,En)|0,dr=dr+Math.imul(jr,On)|0,ar=ar+Math.imul(Ur,gn)|0,tr=tr+Math.imul(Ur,kn)|0,tr=tr+Math.imul(Pr,gn)|0,dr=dr+Math.imul(Pr,kn)|0,ar=ar+Math.imul(Br,Tn)|0,tr=tr+Math.imul(Br,Ln)|0,tr=tr+Math.imul($r,Tn)|0,dr=dr+Math.imul($r,Ln)|0,ar=ar+Math.imul(Mr,Vr)|0,tr=tr+Math.imul(Mr,sn)|0,tr=tr+Math.imul(Lr,Vr)|0,dr=dr+Math.imul(Lr,sn)|0,ar=ar+Math.imul(Er,cn)|0,tr=tr+Math.imul(Er,Pn)|0,tr=tr+Math.imul(wr,cn)|0,dr=dr+Math.imul(wr,Pn)|0,ar=ar+Math.imul(br,Wr)|0,tr=tr+Math.imul(br,Hr)|0,tr=tr+Math.imul(Sr,Wr)|0,dr=dr+Math.imul(Sr,Hr)|0;var Gn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,ar=Math.imul(Xr,pn),tr=Math.imul(Xr,Dn),tr=tr+Math.imul(tn,pn)|0,dr=Math.imul(tn,Dn),ar=ar+Math.imul(on,vn)|0,tr=tr+Math.imul(on,In)|0,tr=tr+Math.imul(Gr,vn)|0,dr=dr+Math.imul(Gr,In)|0,ar=ar+Math.imul(Zr,En)|0,tr=tr+Math.imul(Zr,On)|0,tr=tr+Math.imul(Jr,En)|0,dr=dr+Math.imul(Jr,On)|0,ar=ar+Math.imul(Ar,gn)|0,tr=tr+Math.imul(Ar,kn)|0,tr=tr+Math.imul(jr,gn)|0,dr=dr+Math.imul(jr,kn)|0,ar=ar+Math.imul(Ur,Tn)|0,tr=tr+Math.imul(Ur,Ln)|0,tr=tr+Math.imul(Pr,Tn)|0,dr=dr+Math.imul(Pr,Ln)|0,ar=ar+Math.imul(Br,Vr)|0,tr=tr+Math.imul(Br,sn)|0,tr=tr+Math.imul($r,Vr)|0,dr=dr+Math.imul($r,sn)|0,ar=ar+Math.imul(Mr,cn)|0,tr=tr+Math.imul(Mr,Pn)|0,tr=tr+Math.imul(Lr,cn)|0,dr=dr+Math.imul(Lr,Pn)|0,ar=ar+Math.imul(Er,Wr)|0,tr=tr+Math.imul(Er,Hr)|0,tr=tr+Math.imul(wr,Wr)|0,dr=dr+Math.imul(wr,Hr)|0,ar=ar+Math.imul(br,Qr)|0,tr=tr+Math.imul(br,rn)|0,tr=tr+Math.imul(Sr,Qr)|0,dr=dr+Math.imul(Sr,rn)|0;var Nn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,ar=Math.imul(un,pn),tr=Math.imul(un,Dn),tr=tr+Math.imul(hn,pn)|0,dr=Math.imul(hn,Dn),ar=ar+Math.imul(Xr,vn)|0,tr=tr+Math.imul(Xr,In)|0,tr=tr+Math.imul(tn,vn)|0,dr=dr+Math.imul(tn,In)|0,ar=ar+Math.imul(on,En)|0,tr=tr+Math.imul(on,On)|0,tr=tr+Math.imul(Gr,En)|0,dr=dr+Math.imul(Gr,On)|0,ar=ar+Math.imul(Zr,gn)|0,tr=tr+Math.imul(Zr,kn)|0,tr=tr+Math.imul(Jr,gn)|0,dr=dr+Math.imul(Jr,kn)|0,ar=ar+Math.imul(Ar,Tn)|0,tr=tr+Math.imul(Ar,Ln)|0,tr=tr+Math.imul(jr,Tn)|0,dr=dr+Math.imul(jr,Ln)|0,ar=ar+Math.imul(Ur,Vr)|0,tr=tr+Math.imul(Ur,sn)|0,tr=tr+Math.imul(Pr,Vr)|0,dr=dr+Math.imul(Pr,sn)|0,ar=ar+Math.imul(Br,cn)|0,tr=tr+Math.imul(Br,Pn)|0,tr=tr+Math.imul($r,cn)|0,dr=dr+Math.imul($r,Pn)|0,ar=ar+Math.imul(Mr,Wr)|0,tr=tr+Math.imul(Mr,Hr)|0,tr=tr+Math.imul(Lr,Wr)|0,dr=dr+Math.imul(Lr,Hr)|0,ar=ar+Math.imul(Er,Qr)|0,tr=tr+Math.imul(Er,rn)|0,tr=tr+Math.imul(wr,Qr)|0,dr=dr+Math.imul(wr,rn)|0,ar=ar+Math.imul(br,ln)|0,tr=tr+Math.imul(br,mn)|0,tr=tr+Math.imul(Sr,ln)|0,dr=dr+Math.imul(Sr,mn)|0;var Vn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,ar=Math.imul(un,vn),tr=Math.imul(un,In),tr=tr+Math.imul(hn,vn)|0,dr=Math.imul(hn,In),ar=ar+Math.imul(Xr,En)|0,tr=tr+Math.imul(Xr,On)|0,tr=tr+Math.imul(tn,En)|0,dr=dr+Math.imul(tn,On)|0,ar=ar+Math.imul(on,gn)|0,tr=tr+Math.imul(on,kn)|0,tr=tr+Math.imul(Gr,gn)|0,dr=dr+Math.imul(Gr,kn)|0,ar=ar+Math.imul(Zr,Tn)|0,tr=tr+Math.imul(Zr,Ln)|0,tr=tr+Math.imul(Jr,Tn)|0,dr=dr+Math.imul(Jr,Ln)|0,ar=ar+Math.imul(Ar,Vr)|0,tr=tr+Math.imul(Ar,sn)|0,tr=tr+Math.imul(jr,Vr)|0,dr=dr+Math.imul(jr,sn)|0,ar=ar+Math.imul(Ur,cn)|0,tr=tr+Math.imul(Ur,Pn)|0,tr=tr+Math.imul(Pr,cn)|0,dr=dr+Math.imul(Pr,Pn)|0,ar=ar+Math.imul(Br,Wr)|0,tr=tr+Math.imul(Br,Hr)|0,tr=tr+Math.imul($r,Wr)|0,dr=dr+Math.imul($r,Hr)|0,ar=ar+Math.imul(Mr,Qr)|0,tr=tr+Math.imul(Mr,rn)|0,tr=tr+Math.imul(Lr,Qr)|0,dr=dr+Math.imul(Lr,rn)|0,ar=ar+Math.imul(Er,ln)|0,tr=tr+Math.imul(Er,mn)|0,tr=tr+Math.imul(wr,ln)|0,dr=dr+Math.imul(wr,mn)|0;var qn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(qn>>>26)|0,qn&=67108863,ar=Math.imul(un,En),tr=Math.imul(un,On),tr=tr+Math.imul(hn,En)|0,dr=Math.imul(hn,On),ar=ar+Math.imul(Xr,gn)|0,tr=tr+Math.imul(Xr,kn)|0,tr=tr+Math.imul(tn,gn)|0,dr=dr+Math.imul(tn,kn)|0,ar=ar+Math.imul(on,Tn)|0,tr=tr+Math.imul(on,Ln)|0,tr=tr+Math.imul(Gr,Tn)|0,dr=dr+Math.imul(Gr,Ln)|0,ar=ar+Math.imul(Zr,Vr)|0,tr=tr+Math.imul(Zr,sn)|0,tr=tr+Math.imul(Jr,Vr)|0,dr=dr+Math.imul(Jr,sn)|0,ar=ar+Math.imul(Ar,cn)|0,tr=tr+Math.imul(Ar,Pn)|0,tr=tr+Math.imul(jr,cn)|0,dr=dr+Math.imul(jr,Pn)|0,ar=ar+Math.imul(Ur,Wr)|0,tr=tr+Math.imul(Ur,Hr)|0,tr=tr+Math.imul(Pr,Wr)|0,dr=dr+Math.imul(Pr,Hr)|0,ar=ar+Math.imul(Br,Qr)|0,tr=tr+Math.imul(Br,rn)|0,tr=tr+Math.imul($r,Qr)|0,dr=dr+Math.imul($r,rn)|0,ar=ar+Math.imul(Mr,ln)|0,tr=tr+Math.imul(Mr,mn)|0,tr=tr+Math.imul(Lr,ln)|0,dr=dr+Math.imul(Lr,mn)|0;var Kn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,ar=Math.imul(un,gn),tr=Math.imul(un,kn),tr=tr+Math.imul(hn,gn)|0,dr=Math.imul(hn,kn),ar=ar+Math.imul(Xr,Tn)|0,tr=tr+Math.imul(Xr,Ln)|0,tr=tr+Math.imul(tn,Tn)|0,dr=dr+Math.imul(tn,Ln)|0,ar=ar+Math.imul(on,Vr)|0,tr=tr+Math.imul(on,sn)|0,tr=tr+Math.imul(Gr,Vr)|0,dr=dr+Math.imul(Gr,sn)|0,ar=ar+Math.imul(Zr,cn)|0,tr=tr+Math.imul(Zr,Pn)|0,tr=tr+Math.imul(Jr,cn)|0,dr=dr+Math.imul(Jr,Pn)|0,ar=ar+Math.imul(Ar,Wr)|0,tr=tr+Math.imul(Ar,Hr)|0,tr=tr+Math.imul(jr,Wr)|0,dr=dr+Math.imul(jr,Hr)|0,ar=ar+Math.imul(Ur,Qr)|0,tr=tr+Math.imul(Ur,rn)|0,tr=tr+Math.imul(Pr,Qr)|0,dr=dr+Math.imul(Pr,rn)|0,ar=ar+Math.imul(Br,ln)|0,tr=tr+Math.imul(Br,mn)|0,tr=tr+Math.imul($r,ln)|0,dr=dr+Math.imul($r,mn)|0;var Xn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,ar=Math.imul(un,Tn),tr=Math.imul(un,Ln),tr=tr+Math.imul(hn,Tn)|0,dr=Math.imul(hn,Ln),ar=ar+Math.imul(Xr,Vr)|0,tr=tr+Math.imul(Xr,sn)|0,tr=tr+Math.imul(tn,Vr)|0,dr=dr+Math.imul(tn,sn)|0,ar=ar+Math.imul(on,cn)|0,tr=tr+Math.imul(on,Pn)|0,tr=tr+Math.imul(Gr,cn)|0,dr=dr+Math.imul(Gr,Pn)|0,ar=ar+Math.imul(Zr,Wr)|0,tr=tr+Math.imul(Zr,Hr)|0,tr=tr+Math.imul(Jr,Wr)|0,dr=dr+Math.imul(Jr,Hr)|0,ar=ar+Math.imul(Ar,Qr)|0,tr=tr+Math.imul(Ar,rn)|0,tr=tr+Math.imul(jr,Qr)|0,dr=dr+Math.imul(jr,rn)|0,ar=ar+Math.imul(Ur,ln)|0,tr=tr+Math.imul(Ur,mn)|0,tr=tr+Math.imul(Pr,ln)|0,dr=dr+Math.imul(Pr,mn)|0;var Zn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,ar=Math.imul(un,Vr),tr=Math.imul(un,sn),tr=tr+Math.imul(hn,Vr)|0,dr=Math.imul(hn,sn),ar=ar+Math.imul(Xr,cn)|0,tr=tr+Math.imul(Xr,Pn)|0,tr=tr+Math.imul(tn,cn)|0,dr=dr+Math.imul(tn,Pn)|0,ar=ar+Math.imul(on,Wr)|0,tr=tr+Math.imul(on,Hr)|0,tr=tr+Math.imul(Gr,Wr)|0,dr=dr+Math.imul(Gr,Hr)|0,ar=ar+Math.imul(Zr,Qr)|0,tr=tr+Math.imul(Zr,rn)|0,tr=tr+Math.imul(Jr,Qr)|0,dr=dr+Math.imul(Jr,rn)|0,ar=ar+Math.imul(Ar,ln)|0,tr=tr+Math.imul(Ar,mn)|0,tr=tr+Math.imul(jr,ln)|0,dr=dr+Math.imul(jr,mn)|0;var Fn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,ar=Math.imul(un,cn),tr=Math.imul(un,Pn),tr=tr+Math.imul(hn,cn)|0,dr=Math.imul(hn,Pn),ar=ar+Math.imul(Xr,Wr)|0,tr=tr+Math.imul(Xr,Hr)|0,tr=tr+Math.imul(tn,Wr)|0,dr=dr+Math.imul(tn,Hr)|0,ar=ar+Math.imul(on,Qr)|0,tr=tr+Math.imul(on,rn)|0,tr=tr+Math.imul(Gr,Qr)|0,dr=dr+Math.imul(Gr,rn)|0,ar=ar+Math.imul(Zr,ln)|0,tr=tr+Math.imul(Zr,mn)|0,tr=tr+Math.imul(Jr,ln)|0,dr=dr+Math.imul(Jr,mn)|0;var zn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(zn>>>26)|0,zn&=67108863,ar=Math.imul(un,Wr),tr=Math.imul(un,Hr),tr=tr+Math.imul(hn,Wr)|0,dr=Math.imul(hn,Hr),ar=ar+Math.imul(Xr,Qr)|0,tr=tr+Math.imul(Xr,rn)|0,tr=tr+Math.imul(tn,Qr)|0,dr=dr+Math.imul(tn,rn)|0,ar=ar+Math.imul(on,ln)|0,tr=tr+Math.imul(on,mn)|0,tr=tr+Math.imul(Gr,ln)|0,dr=dr+Math.imul(Gr,mn)|0;var Yn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,ar=Math.imul(un,Qr),tr=Math.imul(un,rn),tr=tr+Math.imul(hn,Qr)|0,dr=Math.imul(hn,rn),ar=ar+Math.imul(Xr,ln)|0,tr=tr+Math.imul(Xr,mn)|0,tr=tr+Math.imul(tn,ln)|0,dr=dr+Math.imul(tn,mn)|0;var Hn=(gr+ar|0)+((tr&8191)<<13)|0;gr=(dr+(tr>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,ar=Math.imul(un,ln),tr=Math.imul(un,mn),tr=tr+Math.imul(hn,ln)|0,dr=Math.imul(hn,mn);var Qn=(gr+ar|0)+((tr&8191)<<13)|0;return gr=(dr+(tr>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,ur[0]=wn,ur[1]=_n,ur[2]=$n,ur[3]=xn,ur[4]=Un,ur[5]=Sn,ur[6]=jn,ur[7]=Gn,ur[8]=Nn,ur[9]=Vn,ur[10]=qn,ur[11]=Kn,ur[12]=Xn,ur[13]=Zn,ur[14]=Fn,ur[15]=zn,ur[16]=Yn,ur[17]=Hn,ur[18]=Qn,gr!==0&&(ur[19]=gr,Xt.length++),Xt};Math.imul||(Ht=Vt);function Jt(kr,lr,ir){ir.negative=lr.negative^kr.negative,ir.length=kr.length+lr.length;for(var Xt=0,er=0,pr=0;pr<ir.length-1;pr++){var ur=er;er=0;for(var gr=Xt&67108863,ar=Math.min(pr,lr.length-1),tr=Math.max(0,pr-kr.length+1);tr<=ar;tr++){var dr=pr-tr,fr=kr.words[dr]|0,br=lr.words[tr]|0,Sr=fr*br,Dr=Sr&67108863;ur=ur+(Sr/67108864|0)|0,Dr=Dr+gr|0,gr=Dr&67108863,ur=ur+(Dr>>>26)|0,er+=ur>>>26,ur&=67108863}ir.words[pr]=gr,Xt=ur,ur=er}return Xt!==0?ir.words[pr]=Xt:ir.length--,ir.strip()}function rr(kr,lr,ir){var Xt=new Qt;return Xt.mulp(kr,lr,ir)}kt.prototype.mulTo=function(lr,ir){var Xt,er=this.length+lr.length;return this.length===10&&lr.length===10?Xt=Ht(this,lr,ir):er<63?Xt=Vt(this,lr,ir):er<1024?Xt=Jt(this,lr,ir):Xt=rr(this,lr,ir),Xt};function Qt(kr,lr){this.x=kr,this.y=lr}Qt.prototype.makeRBT=function(lr){for(var ir=new Array(lr),Xt=kt.prototype._countBits(lr)-1,er=0;er<lr;er++)ir[er]=this.revBin(er,Xt,lr);return ir},Qt.prototype.revBin=function(lr,ir,Xt){if(lr===0||lr===Xt-1)return lr;for(var er=0,pr=0;pr<ir;pr++)er|=(lr&1)<<ir-pr-1,lr>>=1;return er},Qt.prototype.permute=function(lr,ir,Xt,er,pr,ur){for(var gr=0;gr<ur;gr++)er[gr]=ir[lr[gr]],pr[gr]=Xt[lr[gr]]},Qt.prototype.transform=function(lr,ir,Xt,er,pr,ur){this.permute(ur,lr,ir,Xt,er,pr);for(var gr=1;gr<pr;gr<<=1)for(var ar=gr<<1,tr=Math.cos(2*Math.PI/ar),dr=Math.sin(2*Math.PI/ar),fr=0;fr<pr;fr+=ar)for(var br=tr,Sr=dr,Dr=0;Dr<gr;Dr++){var Er=Xt[fr+Dr],wr=er[fr+Dr],Tr=Xt[fr+Dr+gr],Mr=er[fr+Dr+gr],Lr=br*Tr-Sr*Mr;Mr=br*Mr+Sr*Tr,Tr=Lr,Xt[fr+Dr]=Er+Tr,er[fr+Dr]=wr+Mr,Xt[fr+Dr+gr]=Er-Tr,er[fr+Dr+gr]=wr-Mr,Dr!==ar&&(Lr=tr*br-dr*Sr,Sr=tr*Sr+dr*br,br=Lr)}},Qt.prototype.guessLen13b=function(lr,ir){var Xt=Math.max(ir,lr)|1,er=Xt&1,pr=0;for(Xt=Xt/2|0;Xt;Xt=Xt>>>1)pr++;return 1<<pr+1+er},Qt.prototype.conjugate=function(lr,ir,Xt){if(!(Xt<=1))for(var er=0;er<Xt/2;er++){var pr=lr[er];lr[er]=lr[Xt-er-1],lr[Xt-er-1]=pr,pr=ir[er],ir[er]=-ir[Xt-er-1],ir[Xt-er-1]=-pr}},Qt.prototype.normalize13b=function(lr,ir){for(var Xt=0,er=0;er<ir/2;er++){var pr=Math.round(lr[2*er+1]/ir)*8192+Math.round(lr[2*er]/ir)+Xt;lr[er]=pr&67108863,pr<67108864?Xt=0:Xt=pr/67108864|0}return lr},Qt.prototype.convert13b=function(lr,ir,Xt,er){for(var pr=0,ur=0;ur<ir;ur++)pr=pr+(lr[ur]|0),Xt[2*ur]=pr&8191,pr=pr>>>13,Xt[2*ur+1]=pr&8191,pr=pr>>>13;for(ur=2*ir;ur<er;++ur)Xt[ur]=0;xt(pr===0),xt((pr&-8192)===0)},Qt.prototype.stub=function(lr){for(var ir=new Array(lr),Xt=0;Xt<lr;Xt++)ir[Xt]=0;return ir},Qt.prototype.mulp=function(lr,ir,Xt){var er=2*this.guessLen13b(lr.length,ir.length),pr=this.makeRBT(er),ur=this.stub(er),gr=new Array(er),ar=new Array(er),tr=new Array(er),dr=new Array(er),fr=new Array(er),br=new Array(er),Sr=Xt.words;Sr.length=er,this.convert13b(lr.words,lr.length,gr,er),this.convert13b(ir.words,ir.length,dr,er),this.transform(gr,ur,ar,tr,er,pr),this.transform(dr,ur,fr,br,er,pr);for(var Dr=0;Dr<er;Dr++){var Er=ar[Dr]*fr[Dr]-tr[Dr]*br[Dr];tr[Dr]=ar[Dr]*br[Dr]+tr[Dr]*fr[Dr],ar[Dr]=Er}return this.conjugate(ar,tr,er),this.transform(ar,tr,Sr,ur,er,pr),this.conjugate(Sr,ur,er),this.normalize13b(Sr,er),Xt.negative=lr.negative^ir.negative,Xt.length=lr.length+ir.length,Xt.strip()},kt.prototype.mul=function(lr){var ir=new kt(null);return ir.words=new Array(this.length+lr.length),this.mulTo(lr,ir)},kt.prototype.mulf=function(lr){var ir=new kt(null);return ir.words=new Array(this.length+lr.length),rr(this,lr,ir)},kt.prototype.imul=function(lr){return this.clone().mulTo(lr,this)},kt.prototype.imuln=function(lr){xt(typeof lr=="number"),xt(lr<67108864);for(var ir=0,Xt=0;Xt<this.length;Xt++){var er=(this.words[Xt]|0)*lr,pr=(er&67108863)+(ir&67108863);ir>>=26,ir+=er/67108864|0,ir+=pr>>>26,this.words[Xt]=pr&67108863}return ir!==0&&(this.words[Xt]=ir,this.length++),this},kt.prototype.muln=function(lr){return this.clone().imuln(lr)},kt.prototype.sqr=function(){return this.mul(this)},kt.prototype.isqr=function(){return this.imul(this.clone())},kt.prototype.pow=function(lr){var ir=zt(lr);if(ir.length===0)return new kt(1);for(var Xt=this,er=0;er<ir.length&&ir[er]===0;er++,Xt=Xt.sqr());if(++er<ir.length)for(var pr=Xt.sqr();er<ir.length;er++,pr=pr.sqr())ir[er]!==0&&(Xt=Xt.mul(pr));return Xt},kt.prototype.iushln=function(lr){xt(typeof lr=="number"&&lr>=0);var ir=lr%26,Xt=(lr-ir)/26,er=67108863>>>26-ir<<26-ir,pr;if(ir!==0){var ur=0;for(pr=0;pr<this.length;pr++){var gr=this.words[pr]&er,ar=(this.words[pr]|0)-gr<<ir;this.words[pr]=ar|ur,ur=gr>>>26-ir}ur&&(this.words[pr]=ur,this.length++)}if(Xt!==0){for(pr=this.length-1;pr>=0;pr--)this.words[pr+Xt]=this.words[pr];for(pr=0;pr<Xt;pr++)this.words[pr]=0;this.length+=Xt}return this.strip()},kt.prototype.ishln=function(lr){return xt(this.negative===0),this.iushln(lr)},kt.prototype.iushrn=function(lr,ir,Xt){xt(typeof lr=="number"&&lr>=0);var er;ir?er=(ir-ir%26)/26:er=0;var pr=lr%26,ur=Math.min((lr-pr)/26,this.length),gr=67108863^67108863>>>pr<<pr,ar=Xt;if(er-=ur,er=Math.max(0,er),ar){for(var tr=0;tr<ur;tr++)ar.words[tr]=this.words[tr];ar.length=ur}if(ur!==0)if(this.length>ur)for(this.length-=ur,tr=0;tr<this.length;tr++)this.words[tr]=this.words[tr+ur];else this.words[0]=0,this.length=1;var dr=0;for(tr=this.length-1;tr>=0&&(dr!==0||tr>=er);tr--){var fr=this.words[tr]|0;this.words[tr]=dr<<26-pr|fr>>>pr,dr=fr&gr}return ar&&dr!==0&&(ar.words[ar.length++]=dr),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},kt.prototype.ishrn=function(lr,ir,Xt){return xt(this.negative===0),this.iushrn(lr,ir,Xt)},kt.prototype.shln=function(lr){return this.clone().ishln(lr)},kt.prototype.ushln=function(lr){return this.clone().iushln(lr)},kt.prototype.shrn=function(lr){return this.clone().ishrn(lr)},kt.prototype.ushrn=function(lr){return this.clone().iushrn(lr)},kt.prototype.testn=function(lr){xt(typeof lr=="number"&&lr>=0);var ir=lr%26,Xt=(lr-ir)/26,er=1<<ir;if(this.length<=Xt)return!1;var pr=this.words[Xt];return!!(pr&er)},kt.prototype.imaskn=function(lr){xt(typeof lr=="number"&&lr>=0);var ir=lr%26,Xt=(lr-ir)/26;if(xt(this.negative===0,"imaskn works only with positive numbers"),this.length<=Xt)return this;if(ir!==0&&Xt++,this.length=Math.min(Xt,this.length),ir!==0){var er=67108863^67108863>>>ir<<ir;this.words[this.length-1]&=er}return this.strip()},kt.prototype.maskn=function(lr){return this.clone().imaskn(lr)},kt.prototype.iaddn=function(lr){return xt(typeof lr=="number"),xt(lr<67108864),lr<0?this.isubn(-lr):this.negative!==0?this.length===1&&(this.words[0]|0)<lr?(this.words[0]=lr-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lr),this.negative=1,this):this._iaddn(lr)},kt.prototype._iaddn=function(lr){this.words[0]+=lr;for(var ir=0;ir<this.length&&this.words[ir]>=67108864;ir++)this.words[ir]-=67108864,ir===this.length-1?this.words[ir+1]=1:this.words[ir+1]++;return this.length=Math.max(this.length,ir+1),this},kt.prototype.isubn=function(lr){if(xt(typeof lr=="number"),xt(lr<67108864),lr<0)return this.iaddn(-lr);if(this.negative!==0)return this.negative=0,this.iaddn(lr),this.negative=1,this;if(this.words[0]-=lr,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ir=0;ir<this.length&&this.words[ir]<0;ir++)this.words[ir]+=67108864,this.words[ir+1]-=1;return this.strip()},kt.prototype.addn=function(lr){return this.clone().iaddn(lr)},kt.prototype.subn=function(lr){return this.clone().isubn(lr)},kt.prototype.iabs=function(){return this.negative=0,this},kt.prototype.abs=function(){return this.clone().iabs()},kt.prototype._ishlnsubmul=function(lr,ir,Xt){var er=lr.length+Xt,pr;this._expand(er);var ur,gr=0;for(pr=0;pr<lr.length;pr++){ur=(this.words[pr+Xt]|0)+gr;var ar=(lr.words[pr]|0)*ir;ur-=ar&67108863,gr=(ur>>26)-(ar/67108864|0),this.words[pr+Xt]=ur&67108863}for(;pr<this.length-Xt;pr++)ur=(this.words[pr+Xt]|0)+gr,gr=ur>>26,this.words[pr+Xt]=ur&67108863;if(gr===0)return this.strip();for(xt(gr===-1),gr=0,pr=0;pr<this.length;pr++)ur=-(this.words[pr]|0)+gr,gr=ur>>26,this.words[pr]=ur&67108863;return this.negative=1,this.strip()},kt.prototype._wordDiv=function(lr,ir){var Xt=this.length-lr.length,er=this.clone(),pr=lr,ur=pr.words[pr.length-1]|0,gr=this._countBits(ur);Xt=26-gr,Xt!==0&&(pr=pr.ushln(Xt),er.iushln(Xt),ur=pr.words[pr.length-1]|0);var ar=er.length-pr.length,tr;if(ir!=="mod"){tr=new kt(null),tr.length=ar+1,tr.words=new Array(tr.length);for(var dr=0;dr<tr.length;dr++)tr.words[dr]=0}var fr=er.clone()._ishlnsubmul(pr,1,ar);fr.negative===0&&(er=fr,tr&&(tr.words[ar]=1));for(var br=ar-1;br>=0;br--){var Sr=(er.words[pr.length+br]|0)*67108864+(er.words[pr.length+br-1]|0);for(Sr=Math.min(Sr/ur|0,67108863),er._ishlnsubmul(pr,Sr,br);er.negative!==0;)Sr--,er.negative=0,er._ishlnsubmul(pr,1,br),er.isZero()||(er.negative^=1);tr&&(tr.words[br]=Sr)}return tr&&tr.strip(),er.strip(),ir!=="div"&&Xt!==0&&er.iushrn(Xt),{div:tr||null,mod:er}},kt.prototype.divmod=function(lr,ir,Xt){if(xt(!lr.isZero()),this.isZero())return{div:new kt(0),mod:new kt(0)};var er,pr,ur;return this.negative!==0&&lr.negative===0?(ur=this.neg().divmod(lr,ir),ir!=="mod"&&(er=ur.div.neg()),ir!=="div"&&(pr=ur.mod.neg(),Xt&&pr.negative!==0&&pr.iadd(lr)),{div:er,mod:pr}):this.negative===0&&lr.negative!==0?(ur=this.divmod(lr.neg(),ir),ir!=="mod"&&(er=ur.div.neg()),{div:er,mod:ur.mod}):this.negative&lr.negative?(ur=this.neg().divmod(lr.neg(),ir),ir!=="div"&&(pr=ur.mod.neg(),Xt&&pr.negative!==0&&pr.isub(lr)),{div:ur.div,mod:pr}):lr.length>this.length||this.cmp(lr)<0?{div:new kt(0),mod:this}:lr.length===1?ir==="div"?{div:this.divn(lr.words[0]),mod:null}:ir==="mod"?{div:null,mod:new kt(this.modn(lr.words[0]))}:{div:this.divn(lr.words[0]),mod:new kt(this.modn(lr.words[0]))}:this._wordDiv(lr,ir)},kt.prototype.div=function(lr){return this.divmod(lr,"div",!1).div},kt.prototype.mod=function(lr){return this.divmod(lr,"mod",!1).mod},kt.prototype.umod=function(lr){return this.divmod(lr,"mod",!0).mod},kt.prototype.divRound=function(lr){var ir=this.divmod(lr);if(ir.mod.isZero())return ir.div;var Xt=ir.div.negative!==0?ir.mod.isub(lr):ir.mod,er=lr.ushrn(1),pr=lr.andln(1),ur=Xt.cmp(er);return ur<0||pr===1&&ur===0?ir.div:ir.div.negative!==0?ir.div.isubn(1):ir.div.iaddn(1)},kt.prototype.modn=function(lr){xt(lr<=67108863);for(var ir=(1<<26)%lr,Xt=0,er=this.length-1;er>=0;er--)Xt=(ir*Xt+(this.words[er]|0))%lr;return Xt},kt.prototype.idivn=function(lr){xt(lr<=67108863);for(var ir=0,Xt=this.length-1;Xt>=0;Xt--){var er=(this.words[Xt]|0)+ir*67108864;this.words[Xt]=er/lr|0,ir=er%lr}return this.strip()},kt.prototype.divn=function(lr){return this.clone().idivn(lr)},kt.prototype.egcd=function(lr){xt(lr.negative===0),xt(!lr.isZero());var ir=this,Xt=lr.clone();ir.negative!==0?ir=ir.umod(lr):ir=ir.clone();for(var er=new kt(1),pr=new kt(0),ur=new kt(0),gr=new kt(1),ar=0;ir.isEven()&&Xt.isEven();)ir.iushrn(1),Xt.iushrn(1),++ar;for(var tr=Xt.clone(),dr=ir.clone();!ir.isZero();){for(var fr=0,br=1;!(ir.words[0]&br)&&fr<26;++fr,br<<=1);if(fr>0)for(ir.iushrn(fr);fr-- >0;)(er.isOdd()||pr.isOdd())&&(er.iadd(tr),pr.isub(dr)),er.iushrn(1),pr.iushrn(1);for(var Sr=0,Dr=1;!(Xt.words[0]&Dr)&&Sr<26;++Sr,Dr<<=1);if(Sr>0)for(Xt.iushrn(Sr);Sr-- >0;)(ur.isOdd()||gr.isOdd())&&(ur.iadd(tr),gr.isub(dr)),ur.iushrn(1),gr.iushrn(1);ir.cmp(Xt)>=0?(ir.isub(Xt),er.isub(ur),pr.isub(gr)):(Xt.isub(ir),ur.isub(er),gr.isub(pr))}return{a:ur,b:gr,gcd:Xt.iushln(ar)}},kt.prototype._invmp=function(lr){xt(lr.negative===0),xt(!lr.isZero());var ir=this,Xt=lr.clone();ir.negative!==0?ir=ir.umod(lr):ir=ir.clone();for(var er=new kt(1),pr=new kt(0),ur=Xt.clone();ir.cmpn(1)>0&&Xt.cmpn(1)>0;){for(var gr=0,ar=1;!(ir.words[0]&ar)&&gr<26;++gr,ar<<=1);if(gr>0)for(ir.iushrn(gr);gr-- >0;)er.isOdd()&&er.iadd(ur),er.iushrn(1);for(var tr=0,dr=1;!(Xt.words[0]&dr)&&tr<26;++tr,dr<<=1);if(tr>0)for(Xt.iushrn(tr);tr-- >0;)pr.isOdd()&&pr.iadd(ur),pr.iushrn(1);ir.cmp(Xt)>=0?(ir.isub(Xt),er.isub(pr)):(Xt.isub(ir),pr.isub(er))}var fr;return ir.cmpn(1)===0?fr=er:fr=pr,fr.cmpn(0)<0&&fr.iadd(lr),fr},kt.prototype.gcd=function(lr){if(this.isZero())return lr.abs();if(lr.isZero())return this.abs();var ir=this.clone(),Xt=lr.clone();ir.negative=0,Xt.negative=0;for(var er=0;ir.isEven()&&Xt.isEven();er++)ir.iushrn(1),Xt.iushrn(1);do{for(;ir.isEven();)ir.iushrn(1);for(;Xt.isEven();)Xt.iushrn(1);var pr=ir.cmp(Xt);if(pr<0){var ur=ir;ir=Xt,Xt=ur}else if(pr===0||Xt.cmpn(1)===0)break;ir.isub(Xt)}while(!0);return Xt.iushln(er)},kt.prototype.invm=function(lr){return this.egcd(lr).a.umod(lr)},kt.prototype.isEven=function(){return(this.words[0]&1)===0},kt.prototype.isOdd=function(){return(this.words[0]&1)===1},kt.prototype.andln=function(lr){return this.words[0]&lr},kt.prototype.bincn=function(lr){xt(typeof lr=="number");var ir=lr%26,Xt=(lr-ir)/26,er=1<<ir;if(this.length<=Xt)return this._expand(Xt+1),this.words[Xt]|=er,this;for(var pr=er,ur=Xt;pr!==0&&ur<this.length;ur++){var gr=this.words[ur]|0;gr+=pr,pr=gr>>>26,gr&=67108863,this.words[ur]=gr}return pr!==0&&(this.words[ur]=pr,this.length++),this},kt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},kt.prototype.cmpn=function(lr){var ir=lr<0;if(this.negative!==0&&!ir)return-1;if(this.negative===0&&ir)return 1;this.strip();var Xt;if(this.length>1)Xt=1;else{ir&&(lr=-lr),xt(lr<=67108863,"Number is too big");var er=this.words[0]|0;Xt=er===lr?0:er<lr?-1:1}return this.negative!==0?-Xt|0:Xt},kt.prototype.cmp=function(lr){if(this.negative!==0&&lr.negative===0)return-1;if(this.negative===0&&lr.negative!==0)return 1;var ir=this.ucmp(lr);return this.negative!==0?-ir|0:ir},kt.prototype.ucmp=function(lr){if(this.length>lr.length)return 1;if(this.length<lr.length)return-1;for(var ir=0,Xt=this.length-1;Xt>=0;Xt--){var er=this.words[Xt]|0,pr=lr.words[Xt]|0;if(er!==pr){er<pr?ir=-1:er>pr&&(ir=1);break}}return ir},kt.prototype.gtn=function(lr){return this.cmpn(lr)===1},kt.prototype.gt=function(lr){return this.cmp(lr)===1},kt.prototype.gten=function(lr){return this.cmpn(lr)>=0},kt.prototype.gte=function(lr){return this.cmp(lr)>=0},kt.prototype.ltn=function(lr){return this.cmpn(lr)===-1},kt.prototype.lt=function(lr){return this.cmp(lr)===-1},kt.prototype.lten=function(lr){return this.cmpn(lr)<=0},kt.prototype.lte=function(lr){return this.cmp(lr)<=0},kt.prototype.eqn=function(lr){return this.cmpn(lr)===0},kt.prototype.eq=function(lr){return this.cmp(lr)===0},kt.red=function(lr){return new Or(lr)},kt.prototype.toRed=function(lr){return xt(!this.red,"Already a number in reduction context"),xt(this.negative===0,"red works only with positives"),lr.convertTo(this)._forceRed(lr)},kt.prototype.fromRed=function(){return xt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},kt.prototype._forceRed=function(lr){return this.red=lr,this},kt.prototype.forceRed=function(lr){return xt(!this.red,"Already a number in reduction context"),this._forceRed(lr)},kt.prototype.redAdd=function(lr){return xt(this.red,"redAdd works only with red numbers"),this.red.add(this,lr)},kt.prototype.redIAdd=function(lr){return xt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lr)},kt.prototype.redSub=function(lr){return xt(this.red,"redSub works only with red numbers"),this.red.sub(this,lr)},kt.prototype.redISub=function(lr){return xt(this.red,"redISub works only with red numbers"),this.red.isub(this,lr)},kt.prototype.redShl=function(lr){return xt(this.red,"redShl works only with red numbers"),this.red.shl(this,lr)},kt.prototype.redMul=function(lr){return xt(this.red,"redMul works only with red numbers"),this.red._verify2(this,lr),this.red.mul(this,lr)},kt.prototype.redIMul=function(lr){return xt(this.red,"redMul works only with red numbers"),this.red._verify2(this,lr),this.red.imul(this,lr)},kt.prototype.redSqr=function(){return xt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},kt.prototype.redISqr=function(){return xt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},kt.prototype.redSqrt=function(){return xt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},kt.prototype.redInvm=function(){return xt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},kt.prototype.redNeg=function(){return xt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},kt.prototype.redPow=function(lr){return xt(this.red&&!lr.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lr)};var Wt={k256:null,p224:null,p192:null,p25519:null};function nr(kr,lr){this.name=kr,this.p=new kt(lr,16),this.n=this.p.bitLength(),this.k=new kt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}nr.prototype._tmp=function(){var lr=new kt(null);return lr.words=new Array(Math.ceil(this.n/13)),lr},nr.prototype.ireduce=function(lr){var ir=lr,Xt;do this.split(ir,this.tmp),ir=this.imulK(ir),ir=ir.iadd(this.tmp),Xt=ir.bitLength();while(Xt>this.n);var er=Xt<this.n?-1:ir.ucmp(this.p);return er===0?(ir.words[0]=0,ir.length=1):er>0?ir.isub(this.p):ir.strip!==void 0?ir.strip():ir._strip(),ir},nr.prototype.split=function(lr,ir){lr.iushrn(this.n,0,ir)},nr.prototype.imulK=function(lr){return lr.imul(this.k)};function yr(){nr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}At(yr,nr),yr.prototype.split=function(lr,ir){for(var Xt=4194303,er=Math.min(lr.length,9),pr=0;pr<er;pr++)ir.words[pr]=lr.words[pr];if(ir.length=er,lr.length<=9){lr.words[0]=0,lr.length=1;return}var ur=lr.words[9];for(ir.words[ir.length++]=ur&Xt,pr=10;pr<lr.length;pr++){var gr=lr.words[pr]|0;lr.words[pr-10]=(gr&Xt)<<4|ur>>>22,ur=gr}ur>>>=22,lr.words[pr-10]=ur,ur===0&&lr.length>10?lr.length-=10:lr.length-=9},yr.prototype.imulK=function(lr){lr.words[lr.length]=0,lr.words[lr.length+1]=0,lr.length+=2;for(var ir=0,Xt=0;Xt<lr.length;Xt++){var er=lr.words[Xt]|0;ir+=er*977,lr.words[Xt]=ir&67108863,ir=er*64+(ir/67108864|0)}return lr.words[lr.length-1]===0&&(lr.length--,lr.words[lr.length-1]===0&&lr.length--),lr};function vr(){nr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}At(vr,nr);function Ir(){nr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}At(Ir,nr);function xr(){nr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}At(xr,nr),xr.prototype.imulK=function(lr){for(var ir=0,Xt=0;Xt<lr.length;Xt++){var er=(lr.words[Xt]|0)*19+ir,pr=er&67108863;er>>>=26,lr.words[Xt]=pr,ir=er}return ir!==0&&(lr.words[lr.length++]=ir),lr},kt._prime=function(lr){if(Wt[lr])return Wt[lr];var ir;if(lr==="k256")ir=new yr;else if(lr==="p224")ir=new vr;else if(lr==="p192")ir=new Ir;else if(lr==="p25519")ir=new xr;else throw new Error("Unknown prime "+lr);return Wt[lr]=ir,ir};function Or(kr){if(typeof kr=="string"){var lr=kt._prime(kr);this.m=lr.p,this.prime=lr}else xt(kr.gtn(1),"modulus must be greater than 1"),this.m=kr,this.prime=null}Or.prototype._verify1=function(lr){xt(lr.negative===0,"red works only with positives"),xt(lr.red,"red works only with red numbers")},Or.prototype._verify2=function(lr,ir){xt((lr.negative|ir.negative)===0,"red works only with positives"),xt(lr.red&&lr.red===ir.red,"red works only with red numbers")},Or.prototype.imod=function(lr){return this.prime?this.prime.ireduce(lr)._forceRed(this):lr.umod(this.m)._forceRed(this)},Or.prototype.neg=function(lr){return lr.isZero()?lr.clone():this.m.sub(lr)._forceRed(this)},Or.prototype.add=function(lr,ir){this._verify2(lr,ir);var Xt=lr.add(ir);return Xt.cmp(this.m)>=0&&Xt.isub(this.m),Xt._forceRed(this)},Or.prototype.iadd=function(lr,ir){this._verify2(lr,ir);var Xt=lr.iadd(ir);return Xt.cmp(this.m)>=0&&Xt.isub(this.m),Xt},Or.prototype.sub=function(lr,ir){this._verify2(lr,ir);var Xt=lr.sub(ir);return Xt.cmpn(0)<0&&Xt.iadd(this.m),Xt._forceRed(this)},Or.prototype.isub=function(lr,ir){this._verify2(lr,ir);var Xt=lr.isub(ir);return Xt.cmpn(0)<0&&Xt.iadd(this.m),Xt},Or.prototype.shl=function(lr,ir){return this._verify1(lr),this.imod(lr.ushln(ir))},Or.prototype.imul=function(lr,ir){return this._verify2(lr,ir),this.imod(lr.imul(ir))},Or.prototype.mul=function(lr,ir){return this._verify2(lr,ir),this.imod(lr.mul(ir))},Or.prototype.isqr=function(lr){return this.imul(lr,lr.clone())},Or.prototype.sqr=function(lr){return this.mul(lr,lr)},Or.prototype.sqrt=function(lr){if(lr.isZero())return lr.clone();var ir=this.m.andln(3);if(xt(ir%2===1),ir===3){var Xt=this.m.add(new kt(1)).iushrn(2);return this.pow(lr,Xt)}for(var er=this.m.subn(1),pr=0;!er.isZero()&&er.andln(1)===0;)pr++,er.iushrn(1);xt(!er.isZero());var ur=new kt(1).toRed(this),gr=ur.redNeg(),ar=this.m.subn(1).iushrn(1),tr=this.m.bitLength();for(tr=new kt(2*tr*tr).toRed(this);this.pow(tr,ar).cmp(gr)!==0;)tr.redIAdd(gr);for(var dr=this.pow(tr,er),fr=this.pow(lr,er.addn(1).iushrn(1)),br=this.pow(lr,er),Sr=pr;br.cmp(ur)!==0;){for(var Dr=br,Er=0;Dr.cmp(ur)!==0;Er++)Dr=Dr.redSqr();xt(Er<Sr);var wr=this.pow(dr,new kt(1).iushln(Sr-Er-1));fr=fr.redMul(wr),dr=wr.redSqr(),br=br.redMul(dr),Sr=Er}return fr},Or.prototype.invm=function(lr){var ir=lr._invmp(this.m);return ir.negative!==0?(ir.negative=0,this.imod(ir).redNeg()):this.imod(ir)},Or.prototype.pow=function(lr,ir){if(ir.isZero())return new kt(1).toRed(this);if(ir.cmpn(1)===0)return lr.clone();var Xt=4,er=new Array(1<<Xt);er[0]=new kt(1).toRed(this),er[1]=lr;for(var pr=2;pr<er.length;pr++)er[pr]=this.mul(er[pr-1],lr);var ur=er[0],gr=0,ar=0,tr=ir.bitLength()%26;for(tr===0&&(tr=26),pr=ir.length-1;pr>=0;pr--){for(var dr=ir.words[pr],fr=tr-1;fr>=0;fr--){var br=dr>>fr&1;if(ur!==er[0]&&(ur=this.sqr(ur)),br===0&&gr===0){ar=0;continue}gr<<=1,gr|=br,ar++,!(ar!==Xt&&(pr!==0||fr!==0))&&(ur=this.mul(ur,er[gr]),ar=0,gr=0)}tr=26}return ur},Or.prototype.convertTo=function(lr){var ir=lr.umod(this.m);return ir===lr?ir.clone():ir},Or.prototype.convertFrom=function(lr){var ir=lr.clone();return ir.red=null,ir},kt.mont=function(lr){return new Nr(lr)};function Nr(kr){Or.call(this,kr),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new kt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}At(Nr,Or),Nr.prototype.convertTo=function(lr){return this.imod(lr.ushln(this.shift))},Nr.prototype.convertFrom=function(lr){var ir=this.imod(lr.mul(this.rinv));return ir.red=null,ir},Nr.prototype.imul=function(lr,ir){if(lr.isZero()||ir.isZero())return lr.words[0]=0,lr.length=1,lr;var Xt=lr.imul(ir),er=Xt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),pr=Xt.isub(er).iushrn(this.shift),ur=pr;return pr.cmp(this.m)>=0?ur=pr.isub(this.m):pr.cmpn(0)<0&&(ur=pr.iadd(this.m)),ur._forceRed(this)},Nr.prototype.mul=function(lr,ir){if(lr.isZero()||ir.isZero())return new kt(0)._forceRed(this);var Xt=lr.mul(ir),er=Xt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),pr=Xt.isub(er).iushrn(this.shift),ur=pr;return pr.cmp(this.m)>=0?ur=pr.isub(this.m):pr.cmpn(0)<0&&(ur=pr.iadd(this.m)),ur._forceRed(this)},Nr.prototype.invm=function(lr){var ir=this.imod(lr._invmp(this.m).mul(this.r2));return ir._forceRed(this)}})(_t,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var _t;brorand.exports=function(At){return _t||(_t=new e(null)),_t.generate(At)};function e(xt){this.rand=xt}if(brorand.exports.Rand=e,e.prototype.generate=function(At){return this._rand(At)},e.prototype._rand=function(At){if(this.rand.getBytes)return this.rand.getBytes(At);for(var kt=new Uint8Array(At),Bt=0;Bt<kt.length;Bt++)kt[Bt]=this.rand.getByte();return kt},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(At){var kt=new Uint8Array(At);return self.crypto.getRandomValues(kt),kt}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(At){var kt=new Uint8Array(At);return self.msCrypto.getRandomValues(kt),kt}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var $t=requireCryptoBrowserify();if(typeof $t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(At){return $t.randomBytes(At)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var _t=bnExports$1,e=requireBrorand();function $t(xt){this.rand=xt||new e.Rand}return mr=$t,$t.create=function(At){return new $t(At)},$t.prototype._randbelow=function(At){var kt=At.bitLength(),Bt=Math.ceil(kt/8);do var jt=new _t(this.rand.generate(Bt));while(jt.cmp(At)>=0);return jt},$t.prototype._randrange=function(At,kt){var Bt=kt.sub(At);return At.add(this._randbelow(Bt))},$t.prototype.test=function(At,kt,Bt){var jt=At.bitLength(),Lt=_t.mont(At),Ut=new _t(1).toRed(Lt);kt||(kt=Math.max(1,jt/48|0));for(var Nt=At.subn(1),qt=0;!Nt.testn(qt);qt++);for(var Kt=At.shrn(qt),zt=Nt.toRed(Lt),Vt=!0;kt>0;kt--){var Ht=this._randrange(new _t(2),Nt);Bt&&Bt(Ht);var Jt=Ht.toRed(Lt).redPow(Kt);if(!(Jt.cmp(Ut)===0||Jt.cmp(zt)===0)){for(var rr=1;rr<qt;rr++){if(Jt=Jt.redSqr(),Jt.cmp(Ut)===0)return!1;if(Jt.cmp(zt)===0)break}if(rr===qt)return!1}}return Vt},$t.prototype.getDivisor=function(At,kt){var Bt=At.bitLength(),jt=_t.mont(At),Lt=new _t(1).toRed(jt);kt||(kt=Math.max(1,Bt/48|0));for(var Ut=At.subn(1),Nt=0;!Ut.testn(Nt);Nt++);for(var qt=At.shrn(Nt),Kt=Ut.toRed(jt);kt>0;kt--){var zt=this._randrange(new _t(2),Ut),Vt=At.gcd(zt);if(Vt.cmpn(1)!==0)return Vt;var Ht=zt.toRed(jt).redPow(qt);if(!(Ht.cmp(Lt)===0||Ht.cmp(Kt)===0)){for(var Jt=1;Jt<Nt;Jt++){if(Ht=Ht.redSqr(),Ht.cmp(Lt)===0)return Ht.fromRed().subn(1).gcd(At);if(Ht.cmp(Kt)===0)break}if(Jt===Nt)return Ht=Ht.redSqr(),Ht.fromRed().subn(1).gcd(At)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var _t=browserExports$1;generatePrime=Jt,Jt.simpleSieve=Vt,Jt.fermatTest=Ht;var e=bnExports$1,$t=new e(24),xt=requireMr(),At=new xt,kt=new e(1),Bt=new e(2),jt=new e(5);new e(16),new e(8);var Lt=new e(10),Ut=new e(3);new e(7);var Nt=new e(11),qt=new e(4);new e(12);var Kt=null;function zt(){if(Kt!==null)return Kt;var rr=1048576,Qt=[];Qt[0]=2;for(var Wt=1,nr=3;nr<rr;nr+=2){for(var yr=Math.ceil(Math.sqrt(nr)),vr=0;vr<Wt&&Qt[vr]<=yr&&nr%Qt[vr]!==0;vr++);Wt!==vr&&Qt[vr]<=yr||(Qt[Wt++]=nr)}return Kt=Qt,Qt}function Vt(rr){for(var Qt=zt(),Wt=0;Wt<Qt.length;Wt++)if(rr.modn(Qt[Wt])===0)return rr.cmpn(Qt[Wt])===0;return!0}function Ht(rr){var Qt=e.mont(rr);return Bt.toRed(Qt).redPow(rr.subn(1)).fromRed().cmpn(1)===0}function Jt(rr,Qt){if(rr<16)return Qt===2||Qt===5?new e([140,123]):new e([140,39]);Qt=new e(Qt);for(var Wt,nr;;){for(Wt=new e(_t(Math.ceil(rr/8)));Wt.bitLength()>rr;)Wt.ishrn(1);if(Wt.isEven()&&Wt.iadd(kt),Wt.testn(1)||Wt.iadd(Bt),Qt.cmp(Bt)){if(!Qt.cmp(jt))for(;Wt.mod(Lt).cmp(Ut);)Wt.iadd(qt)}else for(;Wt.mod($t).cmp(Nt);)Wt.iadd(qt);if(nr=Wt.shrn(1),Vt(nr)&&Vt(Wt)&&Ht(nr)&&Ht(Wt)&&At.test(nr)&&At.test(Wt))return Wt}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$3={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var _t=bnExports$1,e=requireMr(),$t=new e,xt=new _t(24),At=new _t(11),kt=new _t(10),Bt=new _t(3),jt=new _t(7),Lt=requireGeneratePrime(),Ut=browserExports$1;dh=Vt;function Nt(Jt,rr){return rr=rr||"utf8",buffer$2.Buffer.isBuffer(Jt)||(Jt=new buffer$2.Buffer(Jt,rr)),this._pub=new _t(Jt),this}function qt(Jt,rr){return rr=rr||"utf8",buffer$2.Buffer.isBuffer(Jt)||(Jt=new buffer$2.Buffer(Jt,rr)),this._priv=new _t(Jt),this}var Kt={};function zt(Jt,rr){var Qt=rr.toString("hex"),Wt=[Qt,Jt.toString(16)].join("_");if(Wt in Kt)return Kt[Wt];var nr=0;if(Jt.isEven()||!Lt.simpleSieve||!Lt.fermatTest(Jt)||!$t.test(Jt))return nr+=1,Qt==="02"||Qt==="05"?nr+=8:nr+=4,Kt[Wt]=nr,nr;$t.test(Jt.shrn(1))||(nr+=2);var yr;switch(Qt){case"02":Jt.mod(xt).cmp(At)&&(nr+=8);break;case"05":yr=Jt.mod(kt),yr.cmp(Bt)&&yr.cmp(jt)&&(nr+=8);break;default:nr+=4}return Kt[Wt]=nr,nr}function Vt(Jt,rr,Qt){this.setGenerator(rr),this.__prime=new _t(Jt),this._prime=_t.mont(this.__prime),this._primeLen=Jt.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Qt?(this.setPublicKey=Nt,this.setPrivateKey=qt):this._primeCode=8}Object.defineProperty(Vt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=zt(this.__prime,this.__gen)),this._primeCode}}),Vt.prototype.generateKeys=function(){return this._priv||(this._priv=new _t(Ut(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Vt.prototype.computeSecret=function(Jt){Jt=new _t(Jt),Jt=Jt.toRed(this._prime);var rr=Jt.redPow(this._priv).fromRed(),Qt=new buffer$2.Buffer(rr.toArray()),Wt=this.getPrime();if(Qt.length<Wt.length){var nr=new buffer$2.Buffer(Wt.length-Qt.length);nr.fill(0),Qt=buffer$2.Buffer.concat([nr,Qt])}return Qt},Vt.prototype.getPublicKey=function(rr){return Ht(this._pub,rr)},Vt.prototype.getPrivateKey=function(rr){return Ht(this._priv,rr)},Vt.prototype.getPrime=function(Jt){return Ht(this.__prime,Jt)},Vt.prototype.getGenerator=function(Jt){return Ht(this._gen,Jt)},Vt.prototype.setGenerator=function(Jt,rr){return rr=rr||"utf8",buffer$2.Buffer.isBuffer(Jt)||(Jt=new buffer$2.Buffer(Jt,rr)),this.__gen=Jt,this._gen=new _t(Jt),this};function Ht(Jt,rr){var Qt=new buffer$2.Buffer(Jt.toArray());return rr?Qt.toString(rr):Qt}return dh}var hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$7;hasRequiredBrowser$3=1;var _t=requireGeneratePrime(),e=require$$1$3,$t=requireDh();function xt(Bt){var jt=new buffer$2.Buffer(e[Bt].prime,"hex"),Lt=new buffer$2.Buffer(e[Bt].gen,"hex");return new $t(jt,Lt)}var At={binary:!0,hex:!0,base64:!0};function kt(Bt,jt,Lt,Ut){return buffer$2.Buffer.isBuffer(jt)||At[jt]===void 0?kt(Bt,"binary",jt,Lt):(jt=jt||"binary",Ut=Ut||"binary",Lt=Lt||new buffer$2.Buffer([2]),buffer$2.Buffer.isBuffer(Lt)||(Lt=new buffer$2.Buffer(Lt,Ut)),typeof Bt=="number"?new $t(_t(Bt,Lt),Lt,!0):(buffer$2.Buffer.isBuffer(Bt)||(Bt=new buffer$2.Buffer(Bt,jt)),new $t(Bt,Lt,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=xt,browser$7.createDiffieHellman=browser$7.DiffieHellman=kt,browser$7}var readableBrowser={exports:{}},processNextickArgs={exports:{}};typeof process$9>"u"||!process$9.version||process$9.version.indexOf("v0.")===0||process$9.version.indexOf("v1.")===0&&process$9.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:nextTick$1}:processNextickArgs.exports=process$9;function nextTick$1(_t,e,$t,xt){if(typeof _t!="function")throw new TypeError('"callback" argument must be a function');var At=arguments.length,kt,Bt;switch(At){case 0:case 1:return process$9.nextTick(_t);case 2:return process$9.nextTick(function(){_t.call(null,e)});case 3:return process$9.nextTick(function(){_t.call(null,e,$t)});case 4:return process$9.nextTick(function(){_t.call(null,e,$t,xt)});default:for(kt=new Array(At-1),Bt=0;Bt<kt.length;)kt[Bt++]=arguments[Bt];return process$9.nextTick(function(){_t.apply(null,kt)})}}var processNextickArgsExports=processNextickArgs.exports,toString$5={}.toString,isarray=Array.isArray||function(_t){return toString$5.call(_t)=="[object Array]"},streamBrowser=eventsExports.EventEmitter,safeBuffer$1={exports:{}};(function(_t,e){var $t=buffer$2,xt=$t.Buffer;function At(Bt,jt){for(var Lt in Bt)jt[Lt]=Bt[Lt]}xt.from&&xt.alloc&&xt.allocUnsafe&&xt.allocUnsafeSlow?_t.exports=$t:(At($t,e),e.Buffer=kt);function kt(Bt,jt,Lt){return xt(Bt,jt,Lt)}At(xt,kt),kt.from=function(Bt,jt,Lt){if(typeof Bt=="number")throw new TypeError("Argument must not be a number");return xt(Bt,jt,Lt)},kt.alloc=function(Bt,jt,Lt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");var Ut=xt(Bt);return jt!==void 0?typeof Lt=="string"?Ut.fill(jt,Lt):Ut.fill(jt):Ut.fill(0),Ut},kt.allocUnsafe=function(Bt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");return xt(Bt)},kt.allocUnsafeSlow=function(Bt){if(typeof Bt!="number")throw new TypeError("Argument must be a number");return $t.SlowBuffer(Bt)}})(safeBuffer$1,safeBuffer$1.exports);var safeBufferExports=safeBuffer$1.exports,util$5={};function isArray(_t){return Array.isArray?Array.isArray(_t):objectToString(_t)==="[object Array]"}util$5.isArray=isArray;function isBoolean(_t){return typeof _t=="boolean"}util$5.isBoolean=isBoolean;function isNull(_t){return _t===null}util$5.isNull=isNull;function isNullOrUndefined(_t){return _t==null}util$5.isNullOrUndefined=isNullOrUndefined;function isNumber(_t){return typeof _t=="number"}util$5.isNumber=isNumber;function isString(_t){return typeof _t=="string"}util$5.isString=isString;function isSymbol(_t){return typeof _t=="symbol"}util$5.isSymbol=isSymbol;function isUndefined(_t){return _t===void 0}util$5.isUndefined=isUndefined;function isRegExp(_t){return objectToString(_t)==="[object RegExp]"}util$5.isRegExp=isRegExp;function isObject(_t){return typeof _t=="object"&&_t!==null}util$5.isObject=isObject;function isDate(_t){return objectToString(_t)==="[object Date]"}util$5.isDate=isDate;function isError(_t){return objectToString(_t)==="[object Error]"||_t instanceof Error}util$5.isError=isError;function isFunction(_t){return typeof _t=="function"}util$5.isFunction=isFunction;function isPrimitive(_t){return _t===null||typeof _t=="boolean"||typeof _t=="number"||typeof _t=="string"||typeof _t=="symbol"||typeof _t>"u"}util$5.isPrimitive=isPrimitive;util$5.isBuffer=buffer$2.Buffer.isBuffer;function objectToString(_t){return Object.prototype.toString.call(_t)}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(_t){function e(kt,Bt){if(!(kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}var $t=safeBufferExports.Buffer,xt=util$6;function At(kt,Bt,jt){kt.copy(Bt,jt)}_t.exports=function(){function kt(){e(this,kt),this.head=null,this.tail=null,this.length=0}return kt.prototype.push=function(jt){var Lt={data:jt,next:null};this.length>0?this.tail.next=Lt:this.head=Lt,this.tail=Lt,++this.length},kt.prototype.unshift=function(jt){var Lt={data:jt,next:this.head};this.length===0&&(this.tail=Lt),this.head=Lt,++this.length},kt.prototype.shift=function(){if(this.length!==0){var jt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,jt}},kt.prototype.clear=function(){this.head=this.tail=null,this.length=0},kt.prototype.join=function(jt){if(this.length===0)return"";for(var Lt=this.head,Ut=""+Lt.data;Lt=Lt.next;)Ut+=jt+Lt.data;return Ut},kt.prototype.concat=function(jt){if(this.length===0)return $t.alloc(0);for(var Lt=$t.allocUnsafe(jt>>>0),Ut=this.head,Nt=0;Ut;)At(Ut.data,Lt,Nt),Nt+=Ut.data.length,Ut=Ut.next;return Lt},kt}(),xt&&xt.inspect&&xt.inspect.custom&&(_t.exports.prototype[xt.inspect.custom]=function(){var kt=xt.inspect({length:this.length});return this.constructor.name+" "+kt})}(BufferList)),BufferList.exports}var pna=processNextickArgsExports;function destroy$2(_t,e){var $t=this,xt=this._readableState&&this._readableState.destroyed,At=this._writableState&&this._writableState.destroyed;return xt||At?(e?e(_t):_t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,pna.nextTick(emitErrorNT$2,this,_t)):pna.nextTick(emitErrorNT$2,this,_t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_t||null,function(kt){!e&&kt?$t._writableState?$t._writableState.errorEmitted||($t._writableState.errorEmitted=!0,pna.nextTick(emitErrorNT$2,$t,kt)):pna.nextTick(emitErrorNT$2,$t,kt):e&&e(kt)}),this)}function undestroy$2(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$2(_t,e){_t.emit("error",e)}var destroy_1$2={destroy:destroy$2,undestroy:undestroy$2},_stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var _t=processNextickArgsExports;_stream_writable=Ht;function e(ur){var gr=this;this.next=null,this.entry=null,this.finish=function(){pr(gr,ur)}}var $t=!process$9.browser&&["v0.10","v0.9."].indexOf(process$9.version.slice(0,5))>-1?setImmediate:_t.nextTick,xt;Ht.WritableState=zt;var At=Object.create(util$5);At.inherits=inherits_browserExports;var kt={deprecate:browser$d},Bt=streamBrowser,jt=safeBufferExports.Buffer,Lt=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ut(ur){return jt.from(ur)}function Nt(ur){return jt.isBuffer(ur)||ur instanceof Lt}var qt=destroy_1$2;At.inherits(Ht,Bt);function Kt(){}function zt(ur,gr){xt=xt||require_stream_duplex(),ur=ur||{};var ar=gr instanceof xt;this.objectMode=!!ur.objectMode,ar&&(this.objectMode=this.objectMode||!!ur.writableObjectMode);var tr=ur.highWaterMark,dr=ur.writableHighWaterMark,fr=this.objectMode?16:16*1024;tr||tr===0?this.highWaterMark=tr:ar&&(dr||dr===0)?this.highWaterMark=dr:this.highWaterMark=fr,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var br=ur.decodeStrings===!1;this.decodeStrings=!br,this.defaultEncoding=ur.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Sr){Ir(gr,Sr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}zt.prototype.getBuffer=function(){for(var gr=this.bufferedRequest,ar=[];gr;)ar.push(gr),gr=gr.next;return ar},function(){try{Object.defineProperty(zt.prototype,"buffer",{get:kt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Vt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ht,Symbol.hasInstance,{value:function(ur){return Vt.call(this,ur)?!0:this!==Ht?!1:ur&&ur._writableState instanceof zt}})):Vt=function(ur){return ur instanceof this};function Ht(ur){if(xt=xt||require_stream_duplex(),!Vt.call(Ht,this)&&!(this instanceof xt))return new Ht(ur);this._writableState=new zt(ur,this),this.writable=!0,ur&&(typeof ur.write=="function"&&(this._write=ur.write),typeof ur.writev=="function"&&(this._writev=ur.writev),typeof ur.destroy=="function"&&(this._destroy=ur.destroy),typeof ur.final=="function"&&(this._final=ur.final)),Bt.call(this)}Ht.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Jt(ur,gr){var ar=new Error("write after end");ur.emit("error",ar),_t.nextTick(gr,ar)}function rr(ur,gr,ar,tr){var dr=!0,fr=!1;return ar===null?fr=new TypeError("May not write null values to stream"):typeof ar!="string"&&ar!==void 0&&!gr.objectMode&&(fr=new TypeError("Invalid non-string/buffer chunk")),fr&&(ur.emit("error",fr),_t.nextTick(tr,fr),dr=!1),dr}Ht.prototype.write=function(ur,gr,ar){var tr=this._writableState,dr=!1,fr=!tr.objectMode&&Nt(ur);return fr&&!jt.isBuffer(ur)&&(ur=Ut(ur)),typeof gr=="function"&&(ar=gr,gr=null),fr?gr="buffer":gr||(gr=tr.defaultEncoding),typeof ar!="function"&&(ar=Kt),tr.ended?Jt(this,ar):(fr||rr(this,tr,ur,ar))&&(tr.pendingcb++,dr=Wt(this,tr,fr,ur,gr,ar)),dr},Ht.prototype.cork=function(){var ur=this._writableState;ur.corked++},Ht.prototype.uncork=function(){var ur=this._writableState;ur.corked&&(ur.corked--,!ur.writing&&!ur.corked&&!ur.bufferProcessing&&ur.bufferedRequest&&Nr(this,ur))},Ht.prototype.setDefaultEncoding=function(gr){if(typeof gr=="string"&&(gr=gr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((gr+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+gr);return this._writableState.defaultEncoding=gr,this};function Qt(ur,gr,ar){return!ur.objectMode&&ur.decodeStrings!==!1&&typeof gr=="string"&&(gr=jt.from(gr,ar)),gr}Object.defineProperty(Ht.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Wt(ur,gr,ar,tr,dr,fr){if(!ar){var br=Qt(gr,tr,dr);tr!==br&&(ar=!0,dr="buffer",tr=br)}var Sr=gr.objectMode?1:tr.length;gr.length+=Sr;var Dr=gr.length<gr.highWaterMark;if(Dr||(gr.needDrain=!0),gr.writing||gr.corked){var Er=gr.lastBufferedRequest;gr.lastBufferedRequest={chunk:tr,encoding:dr,isBuf:ar,callback:fr,next:null},Er?Er.next=gr.lastBufferedRequest:gr.bufferedRequest=gr.lastBufferedRequest,gr.bufferedRequestCount+=1}else nr(ur,gr,!1,Sr,tr,dr,fr);return Dr}function nr(ur,gr,ar,tr,dr,fr,br){gr.writelen=tr,gr.writecb=br,gr.writing=!0,gr.sync=!0,ar?ur._writev(dr,gr.onwrite):ur._write(dr,fr,gr.onwrite),gr.sync=!1}function yr(ur,gr,ar,tr,dr){--gr.pendingcb,ar?(_t.nextTick(dr,tr),_t.nextTick(Xt,ur,gr),ur._writableState.errorEmitted=!0,ur.emit("error",tr)):(dr(tr),ur._writableState.errorEmitted=!0,ur.emit("error",tr),Xt(ur,gr))}function vr(ur){ur.writing=!1,ur.writecb=null,ur.length-=ur.writelen,ur.writelen=0}function Ir(ur,gr){var ar=ur._writableState,tr=ar.sync,dr=ar.writecb;if(vr(ar),gr)yr(ur,ar,tr,gr,dr);else{var fr=kr(ar);!fr&&!ar.corked&&!ar.bufferProcessing&&ar.bufferedRequest&&Nr(ur,ar),tr?$t(xr,ur,ar,fr,dr):xr(ur,ar,fr,dr)}}function xr(ur,gr,ar,tr){ar||Or(ur,gr),gr.pendingcb--,tr(),Xt(ur,gr)}function Or(ur,gr){gr.length===0&&gr.needDrain&&(gr.needDrain=!1,ur.emit("drain"))}function Nr(ur,gr){gr.bufferProcessing=!0;var ar=gr.bufferedRequest;if(ur._writev&&ar&&ar.next){var tr=gr.bufferedRequestCount,dr=new Array(tr),fr=gr.corkedRequestsFree;fr.entry=ar;for(var br=0,Sr=!0;ar;)dr[br]=ar,ar.isBuf||(Sr=!1),ar=ar.next,br+=1;dr.allBuffers=Sr,nr(ur,gr,!0,gr.length,dr,"",fr.finish),gr.pendingcb++,gr.lastBufferedRequest=null,fr.next?(gr.corkedRequestsFree=fr.next,fr.next=null):gr.corkedRequestsFree=new e(gr),gr.bufferedRequestCount=0}else{for(;ar;){var Dr=ar.chunk,Er=ar.encoding,wr=ar.callback,Tr=gr.objectMode?1:Dr.length;if(nr(ur,gr,!1,Tr,Dr,Er,wr),ar=ar.next,gr.bufferedRequestCount--,gr.writing)break}ar===null&&(gr.lastBufferedRequest=null)}gr.bufferedRequest=ar,gr.bufferProcessing=!1}Ht.prototype._write=function(ur,gr,ar){ar(new Error("_write() is not implemented"))},Ht.prototype._writev=null,Ht.prototype.end=function(ur,gr,ar){var tr=this._writableState;typeof ur=="function"?(ar=ur,ur=null,gr=null):typeof gr=="function"&&(ar=gr,gr=null),ur!=null&&this.write(ur,gr),tr.corked&&(tr.corked=1,this.uncork()),tr.ending||er(this,tr,ar)};function kr(ur){return ur.ending&&ur.length===0&&ur.bufferedRequest===null&&!ur.finished&&!ur.writing}function lr(ur,gr){ur._final(function(ar){gr.pendingcb--,ar&&ur.emit("error",ar),gr.prefinished=!0,ur.emit("prefinish"),Xt(ur,gr)})}function ir(ur,gr){!gr.prefinished&&!gr.finalCalled&&(typeof ur._final=="function"?(gr.pendingcb++,gr.finalCalled=!0,_t.nextTick(lr,ur,gr)):(gr.prefinished=!0,ur.emit("prefinish")))}function Xt(ur,gr){var ar=kr(gr);return ar&&(ir(ur,gr),gr.pendingcb===0&&(gr.finished=!0,ur.emit("finish"))),ar}function er(ur,gr,ar){gr.ending=!0,Xt(ur,gr),ar&&(gr.finished?_t.nextTick(ar):ur.once("finish",ar)),gr.ended=!0,ur.writable=!1}function pr(ur,gr,ar){var tr=ur.entry;for(ur.entry=null;tr;){var dr=tr.callback;gr.pendingcb--,dr(ar),tr=tr.next}gr.corkedRequestsFree.next=ur}return Object.defineProperty(Ht.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ur){this._writableState&&(this._writableState.destroyed=ur)}}),Ht.prototype.destroy=qt.destroy,Ht.prototype._undestroy=qt.undestroy,Ht.prototype._destroy=function(ur,gr){this.end(),gr(ur)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var _t=processNextickArgsExports,e=Object.keys||function(qt){var Kt=[];for(var zt in qt)Kt.push(zt);return Kt};_stream_duplex=Lt;var $t=Object.create(util$5);$t.inherits=inherits_browserExports;var xt=require_stream_readable(),At=require_stream_writable();$t.inherits(Lt,xt);for(var kt=e(At.prototype),Bt=0;Bt<kt.length;Bt++){var jt=kt[Bt];Lt.prototype[jt]||(Lt.prototype[jt]=At.prototype[jt])}function Lt(qt){if(!(this instanceof Lt))return new Lt(qt);xt.call(this,qt),At.call(this,qt),qt&&qt.readable===!1&&(this.readable=!1),qt&&qt.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,qt&&qt.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Ut)}Object.defineProperty(Lt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ut(){this.allowHalfOpen||this._writableState.ended||_t.nextTick(Nt,this)}function Nt(qt){qt.end()}return Object.defineProperty(Lt.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(qt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=qt,this._writableState.destroyed=qt)}}),Lt.prototype._destroy=function(qt,Kt){this.push(null),this.end(),_t.nextTick(Kt,qt)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var _t=processNextickArgsExports;_stream_readable=Qt;var e=isarray,$t;Qt.ReadableState=rr,eventsExports.EventEmitter;var xt=function(wr,Tr){return wr.listeners(Tr).length},At=streamBrowser,kt=safeBufferExports.Buffer,Bt=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function jt(wr){return kt.from(wr)}function Lt(wr){return kt.isBuffer(wr)||wr instanceof Bt}var Ut=Object.create(util$5);Ut.inherits=inherits_browserExports;var Nt=util$6,qt=void 0;Nt&&Nt.debuglog?qt=Nt.debuglog("stream"):qt=function(){};var Kt=requireBufferList(),zt=destroy_1$2,Vt;Ut.inherits(Qt,At);var Ht=["error","close","destroy","pause","resume"];function Jt(wr,Tr,Mr){if(typeof wr.prependListener=="function")return wr.prependListener(Tr,Mr);!wr._events||!wr._events[Tr]?wr.on(Tr,Mr):e(wr._events[Tr])?wr._events[Tr].unshift(Mr):wr._events[Tr]=[Mr,wr._events[Tr]]}function rr(wr,Tr){$t=$t||require_stream_duplex(),wr=wr||{};var Mr=Tr instanceof $t;this.objectMode=!!wr.objectMode,Mr&&(this.objectMode=this.objectMode||!!wr.readableObjectMode);var Lr=wr.highWaterMark,Cr=wr.readableHighWaterMark,Br=this.objectMode?16:16*1024;Lr||Lr===0?this.highWaterMark=Lr:Mr&&(Cr||Cr===0)?this.highWaterMark=Cr:this.highWaterMark=Br,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Kt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=wr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,wr.encoding&&(Vt||(Vt=string_decoder.StringDecoder),this.decoder=new Vt(wr.encoding),this.encoding=wr.encoding)}function Qt(wr){if($t=$t||require_stream_duplex(),!(this instanceof Qt))return new Qt(wr);this._readableState=new rr(wr,this),this.readable=!0,wr&&(typeof wr.read=="function"&&(this._read=wr.read),typeof wr.destroy=="function"&&(this._destroy=wr.destroy)),At.call(this)}Object.defineProperty(Qt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(wr){this._readableState&&(this._readableState.destroyed=wr)}}),Qt.prototype.destroy=zt.destroy,Qt.prototype._undestroy=zt.undestroy,Qt.prototype._destroy=function(wr,Tr){this.push(null),Tr(wr)},Qt.prototype.push=function(wr,Tr){var Mr=this._readableState,Lr;return Mr.objectMode?Lr=!0:typeof wr=="string"&&(Tr=Tr||Mr.defaultEncoding,Tr!==Mr.encoding&&(wr=kt.from(wr,Tr),Tr=""),Lr=!0),Wt(this,wr,Tr,!1,Lr)},Qt.prototype.unshift=function(wr){return Wt(this,wr,null,!0,!1)};function Wt(wr,Tr,Mr,Lr,Cr){var Br=wr._readableState;if(Tr===null)Br.reading=!1,Nr(wr,Br);else{var $r;Cr||($r=yr(Br,Tr)),$r?wr.emit("error",$r):Br.objectMode||Tr&&Tr.length>0?(typeof Tr!="string"&&!Br.objectMode&&Object.getPrototypeOf(Tr)!==kt.prototype&&(Tr=jt(Tr)),Lr?Br.endEmitted?wr.emit("error",new Error("stream.unshift() after end event")):nr(wr,Br,Tr,!0):Br.ended?wr.emit("error",new Error("stream.push() after EOF")):(Br.reading=!1,Br.decoder&&!Mr?(Tr=Br.decoder.write(Tr),Br.objectMode||Tr.length!==0?nr(wr,Br,Tr,!1):ir(wr,Br)):nr(wr,Br,Tr,!1))):Lr||(Br.reading=!1)}return vr(Br)}function nr(wr,Tr,Mr,Lr){Tr.flowing&&Tr.length===0&&!Tr.sync?(wr.emit("data",Mr),wr.read(0)):(Tr.length+=Tr.objectMode?1:Mr.length,Lr?Tr.buffer.unshift(Mr):Tr.buffer.push(Mr),Tr.needReadable&&kr(wr)),ir(wr,Tr)}function yr(wr,Tr){var Mr;return!Lt(Tr)&&typeof Tr!="string"&&Tr!==void 0&&!wr.objectMode&&(Mr=new TypeError("Invalid non-string/buffer chunk")),Mr}function vr(wr){return!wr.ended&&(wr.needReadable||wr.length<wr.highWaterMark||wr.length===0)}Qt.prototype.isPaused=function(){return this._readableState.flowing===!1},Qt.prototype.setEncoding=function(wr){return Vt||(Vt=string_decoder.StringDecoder),this._readableState.decoder=new Vt(wr),this._readableState.encoding=wr,this};var Ir=8388608;function xr(wr){return wr>=Ir?wr=Ir:(wr--,wr|=wr>>>1,wr|=wr>>>2,wr|=wr>>>4,wr|=wr>>>8,wr|=wr>>>16,wr++),wr}function Or(wr,Tr){return wr<=0||Tr.length===0&&Tr.ended?0:Tr.objectMode?1:wr!==wr?Tr.flowing&&Tr.length?Tr.buffer.head.data.length:Tr.length:(wr>Tr.highWaterMark&&(Tr.highWaterMark=xr(wr)),wr<=Tr.length?wr:Tr.ended?Tr.length:(Tr.needReadable=!0,0))}Qt.prototype.read=function(wr){qt("read",wr),wr=parseInt(wr,10);var Tr=this._readableState,Mr=wr;if(wr!==0&&(Tr.emittedReadable=!1),wr===0&&Tr.needReadable&&(Tr.length>=Tr.highWaterMark||Tr.ended))return qt("read: emitReadable",Tr.length,Tr.ended),Tr.length===0&&Tr.ended?Sr(this):kr(this),null;if(wr=Or(wr,Tr),wr===0&&Tr.ended)return Tr.length===0&&Sr(this),null;var Lr=Tr.needReadable;qt("need readable",Lr),(Tr.length===0||Tr.length-wr<Tr.highWaterMark)&&(Lr=!0,qt("length less than watermark",Lr)),Tr.ended||Tr.reading?(Lr=!1,qt("reading or ended",Lr)):Lr&&(qt("do read"),Tr.reading=!0,Tr.sync=!0,Tr.length===0&&(Tr.needReadable=!0),this._read(Tr.highWaterMark),Tr.sync=!1,Tr.reading||(wr=Or(Mr,Tr)));var Cr;return wr>0?Cr=tr(wr,Tr):Cr=null,Cr===null?(Tr.needReadable=!0,wr=0):Tr.length-=wr,Tr.length===0&&(Tr.ended||(Tr.needReadable=!0),Mr!==wr&&Tr.ended&&Sr(this)),Cr!==null&&this.emit("data",Cr),Cr};function Nr(wr,Tr){if(!Tr.ended){if(Tr.decoder){var Mr=Tr.decoder.end();Mr&&Mr.length&&(Tr.buffer.push(Mr),Tr.length+=Tr.objectMode?1:Mr.length)}Tr.ended=!0,kr(wr)}}function kr(wr){var Tr=wr._readableState;Tr.needReadable=!1,Tr.emittedReadable||(qt("emitReadable",Tr.flowing),Tr.emittedReadable=!0,Tr.sync?_t.nextTick(lr,wr):lr(wr))}function lr(wr){qt("emit readable"),wr.emit("readable"),ar(wr)}function ir(wr,Tr){Tr.readingMore||(Tr.readingMore=!0,_t.nextTick(Xt,wr,Tr))}function Xt(wr,Tr){for(var Mr=Tr.length;!Tr.reading&&!Tr.flowing&&!Tr.ended&&Tr.length<Tr.highWaterMark&&(qt("maybeReadMore read 0"),wr.read(0),Mr!==Tr.length);)Mr=Tr.length;Tr.readingMore=!1}Qt.prototype._read=function(wr){this.emit("error",new Error("_read() is not implemented"))},Qt.prototype.pipe=function(wr,Tr){var Mr=this,Lr=this._readableState;switch(Lr.pipesCount){case 0:Lr.pipes=wr;break;case 1:Lr.pipes=[Lr.pipes,wr];break;default:Lr.pipes.push(wr);break}Lr.pipesCount+=1,qt("pipe count=%d opts=%j",Lr.pipesCount,Tr);var Cr=(!Tr||Tr.end!==!1)&&wr!==process$9.stdout&&wr!==process$9.stderr,Br=Cr?Rr:nn;Lr.endEmitted?_t.nextTick(Br):Mr.once("end",Br),wr.on("unpipe",$r);function $r(on,Gr){qt("onunpipe"),on===Mr&&Gr&&Gr.hasUnpiped===!1&&(Gr.hasUnpiped=!0,_r())}function Rr(){qt("onend"),wr.end()}var Ur=er(Mr);wr.on("drain",Ur);var Pr=!1;function _r(){qt("cleanup"),wr.removeListener("close",Zr),wr.removeListener("finish",Jr),wr.removeListener("drain",Ur),wr.removeListener("error",Kr),wr.removeListener("unpipe",$r),Mr.removeListener("end",Rr),Mr.removeListener("end",nn),Mr.removeListener("data",jr),Pr=!0,Lr.awaitDrain&&(!wr._writableState||wr._writableState.needDrain)&&Ur()}var Ar=!1;Mr.on("data",jr);function jr(on){qt("ondata"),Ar=!1;var Gr=wr.write(on);Gr===!1&&!Ar&&((Lr.pipesCount===1&&Lr.pipes===wr||Lr.pipesCount>1&&Er(Lr.pipes,wr)!==-1)&&!Pr&&(qt("false write response, pause",Lr.awaitDrain),Lr.awaitDrain++,Ar=!0),Mr.pause())}function Kr(on){qt("onerror",on),nn(),wr.removeListener("error",Kr),xt(wr,"error")===0&&wr.emit("error",on)}Jt(wr,"error",Kr);function Zr(){wr.removeListener("finish",Jr),nn()}wr.once("close",Zr);function Jr(){qt("onfinish"),wr.removeListener("close",Zr),nn()}wr.once("finish",Jr);function nn(){qt("unpipe"),Mr.unpipe(wr)}return wr.emit("pipe",Mr),Lr.flowing||(qt("pipe resume"),Mr.resume()),wr};function er(wr){return function(){var Tr=wr._readableState;qt("pipeOnDrain",Tr.awaitDrain),Tr.awaitDrain&&Tr.awaitDrain--,Tr.awaitDrain===0&&xt(wr,"data")&&(Tr.flowing=!0,ar(wr))}}Qt.prototype.unpipe=function(wr){var Tr=this._readableState,Mr={hasUnpiped:!1};if(Tr.pipesCount===0)return this;if(Tr.pipesCount===1)return wr&&wr!==Tr.pipes?this:(wr||(wr=Tr.pipes),Tr.pipes=null,Tr.pipesCount=0,Tr.flowing=!1,wr&&wr.emit("unpipe",this,Mr),this);if(!wr){var Lr=Tr.pipes,Cr=Tr.pipesCount;Tr.pipes=null,Tr.pipesCount=0,Tr.flowing=!1;for(var Br=0;Br<Cr;Br++)Lr[Br].emit("unpipe",this,{hasUnpiped:!1});return this}var $r=Er(Tr.pipes,wr);return $r===-1?this:(Tr.pipes.splice($r,1),Tr.pipesCount-=1,Tr.pipesCount===1&&(Tr.pipes=Tr.pipes[0]),wr.emit("unpipe",this,Mr),this)},Qt.prototype.on=function(wr,Tr){var Mr=At.prototype.on.call(this,wr,Tr);if(wr==="data")this._readableState.flowing!==!1&&this.resume();else if(wr==="readable"){var Lr=this._readableState;!Lr.endEmitted&&!Lr.readableListening&&(Lr.readableListening=Lr.needReadable=!0,Lr.emittedReadable=!1,Lr.reading?Lr.length&&kr(this):_t.nextTick(pr,this))}return Mr},Qt.prototype.addListener=Qt.prototype.on;function pr(wr){qt("readable nexttick read 0"),wr.read(0)}Qt.prototype.resume=function(){var wr=this._readableState;return wr.flowing||(qt("resume"),wr.flowing=!0,ur(this,wr)),this};function ur(wr,Tr){Tr.resumeScheduled||(Tr.resumeScheduled=!0,_t.nextTick(gr,wr,Tr))}function gr(wr,Tr){Tr.reading||(qt("resume read 0"),wr.read(0)),Tr.resumeScheduled=!1,Tr.awaitDrain=0,wr.emit("resume"),ar(wr),Tr.flowing&&!Tr.reading&&wr.read(0)}Qt.prototype.pause=function(){return qt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(qt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ar(wr){var Tr=wr._readableState;for(qt("flow",Tr.flowing);Tr.flowing&&wr.read()!==null;);}Qt.prototype.wrap=function(wr){var Tr=this,Mr=this._readableState,Lr=!1;wr.on("end",function(){if(qt("wrapped end"),Mr.decoder&&!Mr.ended){var $r=Mr.decoder.end();$r&&$r.length&&Tr.push($r)}Tr.push(null)}),wr.on("data",function($r){if(qt("wrapped data"),Mr.decoder&&($r=Mr.decoder.write($r)),!(Mr.objectMode&&$r==null)&&!(!Mr.objectMode&&(!$r||!$r.length))){var Rr=Tr.push($r);Rr||(Lr=!0,wr.pause())}});for(var Cr in wr)this[Cr]===void 0&&typeof wr[Cr]=="function"&&(this[Cr]=function($r){return function(){return wr[$r].apply(wr,arguments)}}(Cr));for(var Br=0;Br<Ht.length;Br++)wr.on(Ht[Br],this.emit.bind(this,Ht[Br]));return this._read=function($r){qt("wrapped _read",$r),Lr&&(Lr=!1,wr.resume())},this},Object.defineProperty(Qt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Qt._fromList=tr;function tr(wr,Tr){if(Tr.length===0)return null;var Mr;return Tr.objectMode?Mr=Tr.buffer.shift():!wr||wr>=Tr.length?(Tr.decoder?Mr=Tr.buffer.join(""):Tr.buffer.length===1?Mr=Tr.buffer.head.data:Mr=Tr.buffer.concat(Tr.length),Tr.buffer.clear()):Mr=dr(wr,Tr.buffer,Tr.decoder),Mr}function dr(wr,Tr,Mr){var Lr;return wr<Tr.head.data.length?(Lr=Tr.head.data.slice(0,wr),Tr.head.data=Tr.head.data.slice(wr)):wr===Tr.head.data.length?Lr=Tr.shift():Lr=Mr?fr(wr,Tr):br(wr,Tr),Lr}function fr(wr,Tr){var Mr=Tr.head,Lr=1,Cr=Mr.data;for(wr-=Cr.length;Mr=Mr.next;){var Br=Mr.data,$r=wr>Br.length?Br.length:wr;if($r===Br.length?Cr+=Br:Cr+=Br.slice(0,wr),wr-=$r,wr===0){$r===Br.length?(++Lr,Mr.next?Tr.head=Mr.next:Tr.head=Tr.tail=null):(Tr.head=Mr,Mr.data=Br.slice($r));break}++Lr}return Tr.length-=Lr,Cr}function br(wr,Tr){var Mr=kt.allocUnsafe(wr),Lr=Tr.head,Cr=1;for(Lr.data.copy(Mr),wr-=Lr.data.length;Lr=Lr.next;){var Br=Lr.data,$r=wr>Br.length?Br.length:wr;if(Br.copy(Mr,Mr.length-wr,0,$r),wr-=$r,wr===0){$r===Br.length?(++Cr,Lr.next?Tr.head=Lr.next:Tr.head=Tr.tail=null):(Tr.head=Lr,Lr.data=Br.slice($r));break}++Cr}return Tr.length-=Cr,Mr}function Sr(wr){var Tr=wr._readableState;if(Tr.length>0)throw new Error('"endReadable()" called on non-empty stream');Tr.endEmitted||(Tr.ended=!0,_t.nextTick(Dr,Tr,wr))}function Dr(wr,Tr){!wr.endEmitted&&wr.length===0&&(wr.endEmitted=!0,Tr.readable=!1,Tr.emit("end"))}function Er(wr,Tr){for(var Mr=0,Lr=wr.length;Mr<Lr;Mr++)if(wr[Mr]===Tr)return Mr;return-1}return _stream_readable}var _stream_transform=Transform$5,Duplex$6=require_stream_duplex(),util$4=Object.create(util$5);util$4.inherits=inherits_browserExports;util$4.inherits(Transform$5,Duplex$6);function afterTransform(_t,e){var $t=this._transformState;$t.transforming=!1;var xt=$t.writecb;if(!xt)return this.emit("error",new Error("write callback called multiple times"));$t.writechunk=null,$t.writecb=null,e!=null&&this.push(e),xt(_t);var At=this._readableState;At.reading=!1,(At.needReadable||At.length<At.highWaterMark)&&this._read(At.highWaterMark)}function Transform$5(_t){if(!(this instanceof Transform$5))return new Transform$5(_t);Duplex$6.call(this,_t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_t&&(typeof _t.transform=="function"&&(this._transform=_t.transform),typeof _t.flush=="function"&&(this._flush=_t.flush)),this.on("prefinish",prefinish$2)}function prefinish$2(){var _t=this;typeof this._flush=="function"?this._flush(function(e,$t){done(_t,e,$t)}):done(this,null,null)}Transform$5.prototype.push=function(_t,e){return this._transformState.needTransform=!1,Duplex$6.prototype.push.call(this,_t,e)};Transform$5.prototype._transform=function(_t,e,$t){throw new Error("_transform() is not implemented")};Transform$5.prototype._write=function(_t,e,$t){var xt=this._transformState;if(xt.writecb=$t,xt.writechunk=_t,xt.writeencoding=e,!xt.transforming){var At=this._readableState;(xt.needTransform||At.needReadable||At.length<At.highWaterMark)&&this._read(At.highWaterMark)}};Transform$5.prototype._read=function(_t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$5.prototype._destroy=function(_t,e){var $t=this;Duplex$6.prototype._destroy.call(this,_t,function(xt){e(xt),$t.emit("close")})};function done(_t,e,$t){if(e)return _t.emit("error",e);if($t!=null&&_t.push($t),_t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(_t._transformState.transforming)throw new Error("Calling transform done when still transforming");return _t.push(null)}var _stream_passthrough=PassThrough$4,Transform$4=_stream_transform,util$3=Object.create(util$5);util$3.inherits=inherits_browserExports;util$3.inherits(PassThrough$4,Transform$4);function PassThrough$4(_t){if(!(this instanceof PassThrough$4))return new PassThrough$4(_t);Transform$4.call(this,_t)}PassThrough$4.prototype._transform=function(_t,e,$t){$t(null,_t)};(function(_t,e){e=_t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=_stream_transform,e.PassThrough=_stream_passthrough})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports,sign={exports:{}},bn={exports:{}};bn.exports;(function(_t){(function(e,$t){function xt(ir,Xt){if(!ir)throw new Error(Xt||"Assertion failed")}function At(ir,Xt){ir.super_=Xt;var er=function(){};er.prototype=Xt.prototype,ir.prototype=new er,ir.prototype.constructor=ir}function kt(ir,Xt,er){if(kt.isBN(ir))return ir;this.negative=0,this.words=null,this.length=0,this.red=null,ir!==null&&((Xt==="le"||Xt==="be")&&(er=Xt,Xt=10),this._init(ir||0,Xt||10,er||"be"))}typeof e=="object"?e.exports=kt:$t.BN=kt,kt.BN=kt,kt.wordSize=26;var Bt;try{typeof window<"u"&&typeof window.Buffer<"u"?Bt=window.Buffer:Bt=buffer$2.Buffer}catch{}kt.isBN=function(Xt){return Xt instanceof kt?!0:Xt!==null&&typeof Xt=="object"&&Xt.constructor.wordSize===kt.wordSize&&Array.isArray(Xt.words)},kt.max=function(Xt,er){return Xt.cmp(er)>0?Xt:er},kt.min=function(Xt,er){return Xt.cmp(er)<0?Xt:er},kt.prototype._init=function(Xt,er,pr){if(typeof Xt=="number")return this._initNumber(Xt,er,pr);if(typeof Xt=="object")return this._initArray(Xt,er,pr);er==="hex"&&(er=16),xt(er===(er|0)&&er>=2&&er<=36),Xt=Xt.toString().replace(/\s+/g,"");var ur=0;Xt[0]==="-"&&(ur++,this.negative=1),ur<Xt.length&&(er===16?this._parseHex(Xt,ur,pr):(this._parseBase(Xt,er,ur),pr==="le"&&this._initArray(this.toArray(),er,pr)))},kt.prototype._initNumber=function(Xt,er,pr){Xt<0&&(this.negative=1,Xt=-Xt),Xt<67108864?(this.words=[Xt&67108863],this.length=1):Xt<4503599627370496?(this.words=[Xt&67108863,Xt/67108864&67108863],this.length=2):(xt(Xt<9007199254740992),this.words=[Xt&67108863,Xt/67108864&67108863,1],this.length=3),pr==="le"&&this._initArray(this.toArray(),er,pr)},kt.prototype._initArray=function(Xt,er,pr){if(xt(typeof Xt.length=="number"),Xt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Xt.length/3),this.words=new Array(this.length);for(var ur=0;ur<this.length;ur++)this.words[ur]=0;var gr,ar,tr=0;if(pr==="be")for(ur=Xt.length-1,gr=0;ur>=0;ur-=3)ar=Xt[ur]|Xt[ur-1]<<8|Xt[ur-2]<<16,this.words[gr]|=ar<<tr&67108863,this.words[gr+1]=ar>>>26-tr&67108863,tr+=24,tr>=26&&(tr-=26,gr++);else if(pr==="le")for(ur=0,gr=0;ur<Xt.length;ur+=3)ar=Xt[ur]|Xt[ur+1]<<8|Xt[ur+2]<<16,this.words[gr]|=ar<<tr&67108863,this.words[gr+1]=ar>>>26-tr&67108863,tr+=24,tr>=26&&(tr-=26,gr++);return this._strip()};function jt(ir,Xt){var er=ir.charCodeAt(Xt);if(er>=48&&er<=57)return er-48;if(er>=65&&er<=70)return er-55;if(er>=97&&er<=102)return er-87;xt(!1,"Invalid character in "+ir)}function Lt(ir,Xt,er){var pr=jt(ir,er);return er-1>=Xt&&(pr|=jt(ir,er-1)<<4),pr}kt.prototype._parseHex=function(Xt,er,pr){this.length=Math.ceil((Xt.length-er)/6),this.words=new Array(this.length);for(var ur=0;ur<this.length;ur++)this.words[ur]=0;var gr=0,ar=0,tr;if(pr==="be")for(ur=Xt.length-1;ur>=er;ur-=2)tr=Lt(Xt,er,ur)<<gr,this.words[ar]|=tr&67108863,gr>=18?(gr-=18,ar+=1,this.words[ar]|=tr>>>26):gr+=8;else{var dr=Xt.length-er;for(ur=dr%2===0?er+1:er;ur<Xt.length;ur+=2)tr=Lt(Xt,er,ur)<<gr,this.words[ar]|=tr&67108863,gr>=18?(gr-=18,ar+=1,this.words[ar]|=tr>>>26):gr+=8}this._strip()};function Ut(ir,Xt,er,pr){for(var ur=0,gr=0,ar=Math.min(ir.length,er),tr=Xt;tr<ar;tr++){var dr=ir.charCodeAt(tr)-48;ur*=pr,dr>=49?gr=dr-49+10:dr>=17?gr=dr-17+10:gr=dr,xt(dr>=0&&gr<pr,"Invalid character"),ur+=gr}return ur}kt.prototype._parseBase=function(Xt,er,pr){this.words=[0],this.length=1;for(var ur=0,gr=1;gr<=67108863;gr*=er)ur++;ur--,gr=gr/er|0;for(var ar=Xt.length-pr,tr=ar%ur,dr=Math.min(ar,ar-tr)+pr,fr=0,br=pr;br<dr;br+=ur)fr=Ut(Xt,br,br+ur,er),this.imuln(gr),this.words[0]+fr<67108864?this.words[0]+=fr:this._iaddn(fr);if(tr!==0){var Sr=1;for(fr=Ut(Xt,br,Xt.length,er),br=0;br<tr;br++)Sr*=er;this.imuln(Sr),this.words[0]+fr<67108864?this.words[0]+=fr:this._iaddn(fr)}this._strip()},kt.prototype.copy=function(Xt){Xt.words=new Array(this.length);for(var er=0;er<this.length;er++)Xt.words[er]=this.words[er];Xt.length=this.length,Xt.negative=this.negative,Xt.red=this.red};function Nt(ir,Xt){ir.words=Xt.words,ir.length=Xt.length,ir.negative=Xt.negative,ir.red=Xt.red}if(kt.prototype._move=function(Xt){Nt(Xt,this)},kt.prototype.clone=function(){var Xt=new kt(null);return this.copy(Xt),Xt},kt.prototype._expand=function(Xt){for(;this.length<Xt;)this.words[this.length++]=0;return this},kt.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},kt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{kt.prototype[Symbol.for("nodejs.util.inspect.custom")]=qt}catch{kt.prototype.inspect=qt}else kt.prototype.inspect=qt;function qt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Kt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],zt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Vt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];kt.prototype.toString=function(Xt,er){Xt=Xt||10,er=er|0||1;var pr;if(Xt===16||Xt==="hex"){pr="";for(var ur=0,gr=0,ar=0;ar<this.length;ar++){var tr=this.words[ar],dr=((tr<<ur|gr)&16777215).toString(16);gr=tr>>>24-ur&16777215,ur+=2,ur>=26&&(ur-=26,ar--),gr!==0||ar!==this.length-1?pr=Kt[6-dr.length]+dr+pr:pr=dr+pr}for(gr!==0&&(pr=gr.toString(16)+pr);pr.length%er!==0;)pr="0"+pr;return this.negative!==0&&(pr="-"+pr),pr}if(Xt===(Xt|0)&&Xt>=2&&Xt<=36){var fr=zt[Xt],br=Vt[Xt];pr="";var Sr=this.clone();for(Sr.negative=0;!Sr.isZero();){var Dr=Sr.modrn(br).toString(Xt);Sr=Sr.idivn(br),Sr.isZero()?pr=Dr+pr:pr=Kt[fr-Dr.length]+Dr+pr}for(this.isZero()&&(pr="0"+pr);pr.length%er!==0;)pr="0"+pr;return this.negative!==0&&(pr="-"+pr),pr}xt(!1,"Base should be between 2 and 36")},kt.prototype.toNumber=function(){var Xt=this.words[0];return this.length===2?Xt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Xt+=4503599627370496+this.words[1]*67108864:this.length>2&&xt(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Xt:Xt},kt.prototype.toJSON=function(){return this.toString(16,2)},Bt&&(kt.prototype.toBuffer=function(Xt,er){return this.toArrayLike(Bt,Xt,er)}),kt.prototype.toArray=function(Xt,er){return this.toArrayLike(Array,Xt,er)};var Ht=function(Xt,er){return Xt.allocUnsafe?Xt.allocUnsafe(er):new Xt(er)};kt.prototype.toArrayLike=function(Xt,er,pr){this._strip();var ur=this.byteLength(),gr=pr||Math.max(1,ur);xt(ur<=gr,"byte array longer than desired length"),xt(gr>0,"Requested array length <= 0");var ar=Ht(Xt,gr),tr=er==="le"?"LE":"BE";return this["_toArrayLike"+tr](ar,ur),ar},kt.prototype._toArrayLikeLE=function(Xt,er){for(var pr=0,ur=0,gr=0,ar=0;gr<this.length;gr++){var tr=this.words[gr]<<ar|ur;Xt[pr++]=tr&255,pr<Xt.length&&(Xt[pr++]=tr>>8&255),pr<Xt.length&&(Xt[pr++]=tr>>16&255),ar===6?(pr<Xt.length&&(Xt[pr++]=tr>>24&255),ur=0,ar=0):(ur=tr>>>24,ar+=2)}if(pr<Xt.length)for(Xt[pr++]=ur;pr<Xt.length;)Xt[pr++]=0},kt.prototype._toArrayLikeBE=function(Xt,er){for(var pr=Xt.length-1,ur=0,gr=0,ar=0;gr<this.length;gr++){var tr=this.words[gr]<<ar|ur;Xt[pr--]=tr&255,pr>=0&&(Xt[pr--]=tr>>8&255),pr>=0&&(Xt[pr--]=tr>>16&255),ar===6?(pr>=0&&(Xt[pr--]=tr>>24&255),ur=0,ar=0):(ur=tr>>>24,ar+=2)}if(pr>=0)for(Xt[pr--]=ur;pr>=0;)Xt[pr--]=0},Math.clz32?kt.prototype._countBits=function(Xt){return 32-Math.clz32(Xt)}:kt.prototype._countBits=function(Xt){var er=Xt,pr=0;return er>=4096&&(pr+=13,er>>>=13),er>=64&&(pr+=7,er>>>=7),er>=8&&(pr+=4,er>>>=4),er>=2&&(pr+=2,er>>>=2),pr+er},kt.prototype._zeroBits=function(Xt){if(Xt===0)return 26;var er=Xt,pr=0;return er&8191||(pr+=13,er>>>=13),er&127||(pr+=7,er>>>=7),er&15||(pr+=4,er>>>=4),er&3||(pr+=2,er>>>=2),er&1||pr++,pr},kt.prototype.bitLength=function(){var Xt=this.words[this.length-1],er=this._countBits(Xt);return(this.length-1)*26+er};function Jt(ir){for(var Xt=new Array(ir.bitLength()),er=0;er<Xt.length;er++){var pr=er/26|0,ur=er%26;Xt[er]=ir.words[pr]>>>ur&1}return Xt}kt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Xt=0,er=0;er<this.length;er++){var pr=this._zeroBits(this.words[er]);if(Xt+=pr,pr!==26)break}return Xt},kt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},kt.prototype.toTwos=function(Xt){return this.negative!==0?this.abs().inotn(Xt).iaddn(1):this.clone()},kt.prototype.fromTwos=function(Xt){return this.testn(Xt-1)?this.notn(Xt).iaddn(1).ineg():this.clone()},kt.prototype.isNeg=function(){return this.negative!==0},kt.prototype.neg=function(){return this.clone().ineg()},kt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},kt.prototype.iuor=function(Xt){for(;this.length<Xt.length;)this.words[this.length++]=0;for(var er=0;er<Xt.length;er++)this.words[er]=this.words[er]|Xt.words[er];return this._strip()},kt.prototype.ior=function(Xt){return xt((this.negative|Xt.negative)===0),this.iuor(Xt)},kt.prototype.or=function(Xt){return this.length>Xt.length?this.clone().ior(Xt):Xt.clone().ior(this)},kt.prototype.uor=function(Xt){return this.length>Xt.length?this.clone().iuor(Xt):Xt.clone().iuor(this)},kt.prototype.iuand=function(Xt){var er;this.length>Xt.length?er=Xt:er=this;for(var pr=0;pr<er.length;pr++)this.words[pr]=this.words[pr]&Xt.words[pr];return this.length=er.length,this._strip()},kt.prototype.iand=function(Xt){return xt((this.negative|Xt.negative)===0),this.iuand(Xt)},kt.prototype.and=function(Xt){return this.length>Xt.length?this.clone().iand(Xt):Xt.clone().iand(this)},kt.prototype.uand=function(Xt){return this.length>Xt.length?this.clone().iuand(Xt):Xt.clone().iuand(this)},kt.prototype.iuxor=function(Xt){var er,pr;this.length>Xt.length?(er=this,pr=Xt):(er=Xt,pr=this);for(var ur=0;ur<pr.length;ur++)this.words[ur]=er.words[ur]^pr.words[ur];if(this!==er)for(;ur<er.length;ur++)this.words[ur]=er.words[ur];return this.length=er.length,this._strip()},kt.prototype.ixor=function(Xt){return xt((this.negative|Xt.negative)===0),this.iuxor(Xt)},kt.prototype.xor=function(Xt){return this.length>Xt.length?this.clone().ixor(Xt):Xt.clone().ixor(this)},kt.prototype.uxor=function(Xt){return this.length>Xt.length?this.clone().iuxor(Xt):Xt.clone().iuxor(this)},kt.prototype.inotn=function(Xt){xt(typeof Xt=="number"&&Xt>=0);var er=Math.ceil(Xt/26)|0,pr=Xt%26;this._expand(er),pr>0&&er--;for(var ur=0;ur<er;ur++)this.words[ur]=~this.words[ur]&67108863;return pr>0&&(this.words[ur]=~this.words[ur]&67108863>>26-pr),this._strip()},kt.prototype.notn=function(Xt){return this.clone().inotn(Xt)},kt.prototype.setn=function(Xt,er){xt(typeof Xt=="number"&&Xt>=0);var pr=Xt/26|0,ur=Xt%26;return this._expand(pr+1),er?this.words[pr]=this.words[pr]|1<<ur:this.words[pr]=this.words[pr]&~(1<<ur),this._strip()},kt.prototype.iadd=function(Xt){var er;if(this.negative!==0&&Xt.negative===0)return this.negative=0,er=this.isub(Xt),this.negative^=1,this._normSign();if(this.negative===0&&Xt.negative!==0)return Xt.negative=0,er=this.isub(Xt),Xt.negative=1,er._normSign();var pr,ur;this.length>Xt.length?(pr=this,ur=Xt):(pr=Xt,ur=this);for(var gr=0,ar=0;ar<ur.length;ar++)er=(pr.words[ar]|0)+(ur.words[ar]|0)+gr,this.words[ar]=er&67108863,gr=er>>>26;for(;gr!==0&&ar<pr.length;ar++)er=(pr.words[ar]|0)+gr,this.words[ar]=er&67108863,gr=er>>>26;if(this.length=pr.length,gr!==0)this.words[this.length]=gr,this.length++;else if(pr!==this)for(;ar<pr.length;ar++)this.words[ar]=pr.words[ar];return this},kt.prototype.add=function(Xt){var er;return Xt.negative!==0&&this.negative===0?(Xt.negative=0,er=this.sub(Xt),Xt.negative^=1,er):Xt.negative===0&&this.negative!==0?(this.negative=0,er=Xt.sub(this),this.negative=1,er):this.length>Xt.length?this.clone().iadd(Xt):Xt.clone().iadd(this)},kt.prototype.isub=function(Xt){if(Xt.negative!==0){Xt.negative=0;var er=this.iadd(Xt);return Xt.negative=1,er._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Xt),this.negative=1,this._normSign();var pr=this.cmp(Xt);if(pr===0)return this.negative=0,this.length=1,this.words[0]=0,this;var ur,gr;pr>0?(ur=this,gr=Xt):(ur=Xt,gr=this);for(var ar=0,tr=0;tr<gr.length;tr++)er=(ur.words[tr]|0)-(gr.words[tr]|0)+ar,ar=er>>26,this.words[tr]=er&67108863;for(;ar!==0&&tr<ur.length;tr++)er=(ur.words[tr]|0)+ar,ar=er>>26,this.words[tr]=er&67108863;if(ar===0&&tr<ur.length&&ur!==this)for(;tr<ur.length;tr++)this.words[tr]=ur.words[tr];return this.length=Math.max(this.length,tr),ur!==this&&(this.negative=1),this._strip()},kt.prototype.sub=function(Xt){return this.clone().isub(Xt)};function rr(ir,Xt,er){er.negative=Xt.negative^ir.negative;var pr=ir.length+Xt.length|0;er.length=pr,pr=pr-1|0;var ur=ir.words[0]|0,gr=Xt.words[0]|0,ar=ur*gr,tr=ar&67108863,dr=ar/67108864|0;er.words[0]=tr;for(var fr=1;fr<pr;fr++){for(var br=dr>>>26,Sr=dr&67108863,Dr=Math.min(fr,Xt.length-1),Er=Math.max(0,fr-ir.length+1);Er<=Dr;Er++){var wr=fr-Er|0;ur=ir.words[wr]|0,gr=Xt.words[Er]|0,ar=ur*gr+Sr,br+=ar/67108864|0,Sr=ar&67108863}er.words[fr]=Sr|0,dr=br|0}return dr!==0?er.words[fr]=dr|0:er.length--,er._strip()}var Qt=function(Xt,er,pr){var ur=Xt.words,gr=er.words,ar=pr.words,tr=0,dr,fr,br,Sr=ur[0]|0,Dr=Sr&8191,Er=Sr>>>13,wr=ur[1]|0,Tr=wr&8191,Mr=wr>>>13,Lr=ur[2]|0,Cr=Lr&8191,Br=Lr>>>13,$r=ur[3]|0,Rr=$r&8191,Ur=$r>>>13,Pr=ur[4]|0,_r=Pr&8191,Ar=Pr>>>13,jr=ur[5]|0,Kr=jr&8191,Zr=jr>>>13,Jr=ur[6]|0,nn=Jr&8191,on=Jr>>>13,Gr=ur[7]|0,Fr=Gr&8191,Xr=Gr>>>13,tn=ur[8]|0,en=tn&8191,un=tn>>>13,hn=ur[9]|0,yn=hn&8191,pn=hn>>>13,Dn=gr[0]|0,An=Dn&8191,vn=Dn>>>13,In=gr[1]|0,Rn=In&8191,En=In>>>13,On=gr[2]|0,Cn=On&8191,gn=On>>>13,kn=gr[3]|0,Mn=kn&8191,Tn=kn>>>13,Ln=gr[4]|0,qr=Ln&8191,Vr=Ln>>>13,sn=gr[5]|0,an=sn&8191,cn=sn>>>13,Pn=gr[6]|0,Bn=Pn&8191,Wr=Pn>>>13,Hr=gr[7]|0,Yr=Hr&8191,Qr=Hr>>>13,rn=gr[8]|0,fn=rn&8191,ln=rn>>>13,mn=gr[9]|0,wn=mn&8191,_n=mn>>>13;pr.negative=Xt.negative^er.negative,pr.length=19,dr=Math.imul(Dr,An),fr=Math.imul(Dr,vn),fr=fr+Math.imul(Er,An)|0,br=Math.imul(Er,vn);var $n=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+($n>>>26)|0,$n&=67108863,dr=Math.imul(Tr,An),fr=Math.imul(Tr,vn),fr=fr+Math.imul(Mr,An)|0,br=Math.imul(Mr,vn),dr=dr+Math.imul(Dr,Rn)|0,fr=fr+Math.imul(Dr,En)|0,fr=fr+Math.imul(Er,Rn)|0,br=br+Math.imul(Er,En)|0;var xn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(xn>>>26)|0,xn&=67108863,dr=Math.imul(Cr,An),fr=Math.imul(Cr,vn),fr=fr+Math.imul(Br,An)|0,br=Math.imul(Br,vn),dr=dr+Math.imul(Tr,Rn)|0,fr=fr+Math.imul(Tr,En)|0,fr=fr+Math.imul(Mr,Rn)|0,br=br+Math.imul(Mr,En)|0,dr=dr+Math.imul(Dr,Cn)|0,fr=fr+Math.imul(Dr,gn)|0,fr=fr+Math.imul(Er,Cn)|0,br=br+Math.imul(Er,gn)|0;var Un=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Un>>>26)|0,Un&=67108863,dr=Math.imul(Rr,An),fr=Math.imul(Rr,vn),fr=fr+Math.imul(Ur,An)|0,br=Math.imul(Ur,vn),dr=dr+Math.imul(Cr,Rn)|0,fr=fr+Math.imul(Cr,En)|0,fr=fr+Math.imul(Br,Rn)|0,br=br+Math.imul(Br,En)|0,dr=dr+Math.imul(Tr,Cn)|0,fr=fr+Math.imul(Tr,gn)|0,fr=fr+Math.imul(Mr,Cn)|0,br=br+Math.imul(Mr,gn)|0,dr=dr+Math.imul(Dr,Mn)|0,fr=fr+Math.imul(Dr,Tn)|0,fr=fr+Math.imul(Er,Mn)|0,br=br+Math.imul(Er,Tn)|0;var Sn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,dr=Math.imul(_r,An),fr=Math.imul(_r,vn),fr=fr+Math.imul(Ar,An)|0,br=Math.imul(Ar,vn),dr=dr+Math.imul(Rr,Rn)|0,fr=fr+Math.imul(Rr,En)|0,fr=fr+Math.imul(Ur,Rn)|0,br=br+Math.imul(Ur,En)|0,dr=dr+Math.imul(Cr,Cn)|0,fr=fr+Math.imul(Cr,gn)|0,fr=fr+Math.imul(Br,Cn)|0,br=br+Math.imul(Br,gn)|0,dr=dr+Math.imul(Tr,Mn)|0,fr=fr+Math.imul(Tr,Tn)|0,fr=fr+Math.imul(Mr,Mn)|0,br=br+Math.imul(Mr,Tn)|0,dr=dr+Math.imul(Dr,qr)|0,fr=fr+Math.imul(Dr,Vr)|0,fr=fr+Math.imul(Er,qr)|0,br=br+Math.imul(Er,Vr)|0;var jn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(jn>>>26)|0,jn&=67108863,dr=Math.imul(Kr,An),fr=Math.imul(Kr,vn),fr=fr+Math.imul(Zr,An)|0,br=Math.imul(Zr,vn),dr=dr+Math.imul(_r,Rn)|0,fr=fr+Math.imul(_r,En)|0,fr=fr+Math.imul(Ar,Rn)|0,br=br+Math.imul(Ar,En)|0,dr=dr+Math.imul(Rr,Cn)|0,fr=fr+Math.imul(Rr,gn)|0,fr=fr+Math.imul(Ur,Cn)|0,br=br+Math.imul(Ur,gn)|0,dr=dr+Math.imul(Cr,Mn)|0,fr=fr+Math.imul(Cr,Tn)|0,fr=fr+Math.imul(Br,Mn)|0,br=br+Math.imul(Br,Tn)|0,dr=dr+Math.imul(Tr,qr)|0,fr=fr+Math.imul(Tr,Vr)|0,fr=fr+Math.imul(Mr,qr)|0,br=br+Math.imul(Mr,Vr)|0,dr=dr+Math.imul(Dr,an)|0,fr=fr+Math.imul(Dr,cn)|0,fr=fr+Math.imul(Er,an)|0,br=br+Math.imul(Er,cn)|0;var Gn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,dr=Math.imul(nn,An),fr=Math.imul(nn,vn),fr=fr+Math.imul(on,An)|0,br=Math.imul(on,vn),dr=dr+Math.imul(Kr,Rn)|0,fr=fr+Math.imul(Kr,En)|0,fr=fr+Math.imul(Zr,Rn)|0,br=br+Math.imul(Zr,En)|0,dr=dr+Math.imul(_r,Cn)|0,fr=fr+Math.imul(_r,gn)|0,fr=fr+Math.imul(Ar,Cn)|0,br=br+Math.imul(Ar,gn)|0,dr=dr+Math.imul(Rr,Mn)|0,fr=fr+Math.imul(Rr,Tn)|0,fr=fr+Math.imul(Ur,Mn)|0,br=br+Math.imul(Ur,Tn)|0,dr=dr+Math.imul(Cr,qr)|0,fr=fr+Math.imul(Cr,Vr)|0,fr=fr+Math.imul(Br,qr)|0,br=br+Math.imul(Br,Vr)|0,dr=dr+Math.imul(Tr,an)|0,fr=fr+Math.imul(Tr,cn)|0,fr=fr+Math.imul(Mr,an)|0,br=br+Math.imul(Mr,cn)|0,dr=dr+Math.imul(Dr,Bn)|0,fr=fr+Math.imul(Dr,Wr)|0,fr=fr+Math.imul(Er,Bn)|0,br=br+Math.imul(Er,Wr)|0;var Nn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,dr=Math.imul(Fr,An),fr=Math.imul(Fr,vn),fr=fr+Math.imul(Xr,An)|0,br=Math.imul(Xr,vn),dr=dr+Math.imul(nn,Rn)|0,fr=fr+Math.imul(nn,En)|0,fr=fr+Math.imul(on,Rn)|0,br=br+Math.imul(on,En)|0,dr=dr+Math.imul(Kr,Cn)|0,fr=fr+Math.imul(Kr,gn)|0,fr=fr+Math.imul(Zr,Cn)|0,br=br+Math.imul(Zr,gn)|0,dr=dr+Math.imul(_r,Mn)|0,fr=fr+Math.imul(_r,Tn)|0,fr=fr+Math.imul(Ar,Mn)|0,br=br+Math.imul(Ar,Tn)|0,dr=dr+Math.imul(Rr,qr)|0,fr=fr+Math.imul(Rr,Vr)|0,fr=fr+Math.imul(Ur,qr)|0,br=br+Math.imul(Ur,Vr)|0,dr=dr+Math.imul(Cr,an)|0,fr=fr+Math.imul(Cr,cn)|0,fr=fr+Math.imul(Br,an)|0,br=br+Math.imul(Br,cn)|0,dr=dr+Math.imul(Tr,Bn)|0,fr=fr+Math.imul(Tr,Wr)|0,fr=fr+Math.imul(Mr,Bn)|0,br=br+Math.imul(Mr,Wr)|0,dr=dr+Math.imul(Dr,Yr)|0,fr=fr+Math.imul(Dr,Qr)|0,fr=fr+Math.imul(Er,Yr)|0,br=br+Math.imul(Er,Qr)|0;var Vn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,dr=Math.imul(en,An),fr=Math.imul(en,vn),fr=fr+Math.imul(un,An)|0,br=Math.imul(un,vn),dr=dr+Math.imul(Fr,Rn)|0,fr=fr+Math.imul(Fr,En)|0,fr=fr+Math.imul(Xr,Rn)|0,br=br+Math.imul(Xr,En)|0,dr=dr+Math.imul(nn,Cn)|0,fr=fr+Math.imul(nn,gn)|0,fr=fr+Math.imul(on,Cn)|0,br=br+Math.imul(on,gn)|0,dr=dr+Math.imul(Kr,Mn)|0,fr=fr+Math.imul(Kr,Tn)|0,fr=fr+Math.imul(Zr,Mn)|0,br=br+Math.imul(Zr,Tn)|0,dr=dr+Math.imul(_r,qr)|0,fr=fr+Math.imul(_r,Vr)|0,fr=fr+Math.imul(Ar,qr)|0,br=br+Math.imul(Ar,Vr)|0,dr=dr+Math.imul(Rr,an)|0,fr=fr+Math.imul(Rr,cn)|0,fr=fr+Math.imul(Ur,an)|0,br=br+Math.imul(Ur,cn)|0,dr=dr+Math.imul(Cr,Bn)|0,fr=fr+Math.imul(Cr,Wr)|0,fr=fr+Math.imul(Br,Bn)|0,br=br+Math.imul(Br,Wr)|0,dr=dr+Math.imul(Tr,Yr)|0,fr=fr+Math.imul(Tr,Qr)|0,fr=fr+Math.imul(Mr,Yr)|0,br=br+Math.imul(Mr,Qr)|0,dr=dr+Math.imul(Dr,fn)|0,fr=fr+Math.imul(Dr,ln)|0,fr=fr+Math.imul(Er,fn)|0,br=br+Math.imul(Er,ln)|0;var qn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(qn>>>26)|0,qn&=67108863,dr=Math.imul(yn,An),fr=Math.imul(yn,vn),fr=fr+Math.imul(pn,An)|0,br=Math.imul(pn,vn),dr=dr+Math.imul(en,Rn)|0,fr=fr+Math.imul(en,En)|0,fr=fr+Math.imul(un,Rn)|0,br=br+Math.imul(un,En)|0,dr=dr+Math.imul(Fr,Cn)|0,fr=fr+Math.imul(Fr,gn)|0,fr=fr+Math.imul(Xr,Cn)|0,br=br+Math.imul(Xr,gn)|0,dr=dr+Math.imul(nn,Mn)|0,fr=fr+Math.imul(nn,Tn)|0,fr=fr+Math.imul(on,Mn)|0,br=br+Math.imul(on,Tn)|0,dr=dr+Math.imul(Kr,qr)|0,fr=fr+Math.imul(Kr,Vr)|0,fr=fr+Math.imul(Zr,qr)|0,br=br+Math.imul(Zr,Vr)|0,dr=dr+Math.imul(_r,an)|0,fr=fr+Math.imul(_r,cn)|0,fr=fr+Math.imul(Ar,an)|0,br=br+Math.imul(Ar,cn)|0,dr=dr+Math.imul(Rr,Bn)|0,fr=fr+Math.imul(Rr,Wr)|0,fr=fr+Math.imul(Ur,Bn)|0,br=br+Math.imul(Ur,Wr)|0,dr=dr+Math.imul(Cr,Yr)|0,fr=fr+Math.imul(Cr,Qr)|0,fr=fr+Math.imul(Br,Yr)|0,br=br+Math.imul(Br,Qr)|0,dr=dr+Math.imul(Tr,fn)|0,fr=fr+Math.imul(Tr,ln)|0,fr=fr+Math.imul(Mr,fn)|0,br=br+Math.imul(Mr,ln)|0,dr=dr+Math.imul(Dr,wn)|0,fr=fr+Math.imul(Dr,_n)|0,fr=fr+Math.imul(Er,wn)|0,br=br+Math.imul(Er,_n)|0;var Kn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,dr=Math.imul(yn,Rn),fr=Math.imul(yn,En),fr=fr+Math.imul(pn,Rn)|0,br=Math.imul(pn,En),dr=dr+Math.imul(en,Cn)|0,fr=fr+Math.imul(en,gn)|0,fr=fr+Math.imul(un,Cn)|0,br=br+Math.imul(un,gn)|0,dr=dr+Math.imul(Fr,Mn)|0,fr=fr+Math.imul(Fr,Tn)|0,fr=fr+Math.imul(Xr,Mn)|0,br=br+Math.imul(Xr,Tn)|0,dr=dr+Math.imul(nn,qr)|0,fr=fr+Math.imul(nn,Vr)|0,fr=fr+Math.imul(on,qr)|0,br=br+Math.imul(on,Vr)|0,dr=dr+Math.imul(Kr,an)|0,fr=fr+Math.imul(Kr,cn)|0,fr=fr+Math.imul(Zr,an)|0,br=br+Math.imul(Zr,cn)|0,dr=dr+Math.imul(_r,Bn)|0,fr=fr+Math.imul(_r,Wr)|0,fr=fr+Math.imul(Ar,Bn)|0,br=br+Math.imul(Ar,Wr)|0,dr=dr+Math.imul(Rr,Yr)|0,fr=fr+Math.imul(Rr,Qr)|0,fr=fr+Math.imul(Ur,Yr)|0,br=br+Math.imul(Ur,Qr)|0,dr=dr+Math.imul(Cr,fn)|0,fr=fr+Math.imul(Cr,ln)|0,fr=fr+Math.imul(Br,fn)|0,br=br+Math.imul(Br,ln)|0,dr=dr+Math.imul(Tr,wn)|0,fr=fr+Math.imul(Tr,_n)|0,fr=fr+Math.imul(Mr,wn)|0,br=br+Math.imul(Mr,_n)|0;var Xn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,dr=Math.imul(yn,Cn),fr=Math.imul(yn,gn),fr=fr+Math.imul(pn,Cn)|0,br=Math.imul(pn,gn),dr=dr+Math.imul(en,Mn)|0,fr=fr+Math.imul(en,Tn)|0,fr=fr+Math.imul(un,Mn)|0,br=br+Math.imul(un,Tn)|0,dr=dr+Math.imul(Fr,qr)|0,fr=fr+Math.imul(Fr,Vr)|0,fr=fr+Math.imul(Xr,qr)|0,br=br+Math.imul(Xr,Vr)|0,dr=dr+Math.imul(nn,an)|0,fr=fr+Math.imul(nn,cn)|0,fr=fr+Math.imul(on,an)|0,br=br+Math.imul(on,cn)|0,dr=dr+Math.imul(Kr,Bn)|0,fr=fr+Math.imul(Kr,Wr)|0,fr=fr+Math.imul(Zr,Bn)|0,br=br+Math.imul(Zr,Wr)|0,dr=dr+Math.imul(_r,Yr)|0,fr=fr+Math.imul(_r,Qr)|0,fr=fr+Math.imul(Ar,Yr)|0,br=br+Math.imul(Ar,Qr)|0,dr=dr+Math.imul(Rr,fn)|0,fr=fr+Math.imul(Rr,ln)|0,fr=fr+Math.imul(Ur,fn)|0,br=br+Math.imul(Ur,ln)|0,dr=dr+Math.imul(Cr,wn)|0,fr=fr+Math.imul(Cr,_n)|0,fr=fr+Math.imul(Br,wn)|0,br=br+Math.imul(Br,_n)|0;var Zn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,dr=Math.imul(yn,Mn),fr=Math.imul(yn,Tn),fr=fr+Math.imul(pn,Mn)|0,br=Math.imul(pn,Tn),dr=dr+Math.imul(en,qr)|0,fr=fr+Math.imul(en,Vr)|0,fr=fr+Math.imul(un,qr)|0,br=br+Math.imul(un,Vr)|0,dr=dr+Math.imul(Fr,an)|0,fr=fr+Math.imul(Fr,cn)|0,fr=fr+Math.imul(Xr,an)|0,br=br+Math.imul(Xr,cn)|0,dr=dr+Math.imul(nn,Bn)|0,fr=fr+Math.imul(nn,Wr)|0,fr=fr+Math.imul(on,Bn)|0,br=br+Math.imul(on,Wr)|0,dr=dr+Math.imul(Kr,Yr)|0,fr=fr+Math.imul(Kr,Qr)|0,fr=fr+Math.imul(Zr,Yr)|0,br=br+Math.imul(Zr,Qr)|0,dr=dr+Math.imul(_r,fn)|0,fr=fr+Math.imul(_r,ln)|0,fr=fr+Math.imul(Ar,fn)|0,br=br+Math.imul(Ar,ln)|0,dr=dr+Math.imul(Rr,wn)|0,fr=fr+Math.imul(Rr,_n)|0,fr=fr+Math.imul(Ur,wn)|0,br=br+Math.imul(Ur,_n)|0;var Fn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,dr=Math.imul(yn,qr),fr=Math.imul(yn,Vr),fr=fr+Math.imul(pn,qr)|0,br=Math.imul(pn,Vr),dr=dr+Math.imul(en,an)|0,fr=fr+Math.imul(en,cn)|0,fr=fr+Math.imul(un,an)|0,br=br+Math.imul(un,cn)|0,dr=dr+Math.imul(Fr,Bn)|0,fr=fr+Math.imul(Fr,Wr)|0,fr=fr+Math.imul(Xr,Bn)|0,br=br+Math.imul(Xr,Wr)|0,dr=dr+Math.imul(nn,Yr)|0,fr=fr+Math.imul(nn,Qr)|0,fr=fr+Math.imul(on,Yr)|0,br=br+Math.imul(on,Qr)|0,dr=dr+Math.imul(Kr,fn)|0,fr=fr+Math.imul(Kr,ln)|0,fr=fr+Math.imul(Zr,fn)|0,br=br+Math.imul(Zr,ln)|0,dr=dr+Math.imul(_r,wn)|0,fr=fr+Math.imul(_r,_n)|0,fr=fr+Math.imul(Ar,wn)|0,br=br+Math.imul(Ar,_n)|0;var zn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(zn>>>26)|0,zn&=67108863,dr=Math.imul(yn,an),fr=Math.imul(yn,cn),fr=fr+Math.imul(pn,an)|0,br=Math.imul(pn,cn),dr=dr+Math.imul(en,Bn)|0,fr=fr+Math.imul(en,Wr)|0,fr=fr+Math.imul(un,Bn)|0,br=br+Math.imul(un,Wr)|0,dr=dr+Math.imul(Fr,Yr)|0,fr=fr+Math.imul(Fr,Qr)|0,fr=fr+Math.imul(Xr,Yr)|0,br=br+Math.imul(Xr,Qr)|0,dr=dr+Math.imul(nn,fn)|0,fr=fr+Math.imul(nn,ln)|0,fr=fr+Math.imul(on,fn)|0,br=br+Math.imul(on,ln)|0,dr=dr+Math.imul(Kr,wn)|0,fr=fr+Math.imul(Kr,_n)|0,fr=fr+Math.imul(Zr,wn)|0,br=br+Math.imul(Zr,_n)|0;var Yn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,dr=Math.imul(yn,Bn),fr=Math.imul(yn,Wr),fr=fr+Math.imul(pn,Bn)|0,br=Math.imul(pn,Wr),dr=dr+Math.imul(en,Yr)|0,fr=fr+Math.imul(en,Qr)|0,fr=fr+Math.imul(un,Yr)|0,br=br+Math.imul(un,Qr)|0,dr=dr+Math.imul(Fr,fn)|0,fr=fr+Math.imul(Fr,ln)|0,fr=fr+Math.imul(Xr,fn)|0,br=br+Math.imul(Xr,ln)|0,dr=dr+Math.imul(nn,wn)|0,fr=fr+Math.imul(nn,_n)|0,fr=fr+Math.imul(on,wn)|0,br=br+Math.imul(on,_n)|0;var Hn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,dr=Math.imul(yn,Yr),fr=Math.imul(yn,Qr),fr=fr+Math.imul(pn,Yr)|0,br=Math.imul(pn,Qr),dr=dr+Math.imul(en,fn)|0,fr=fr+Math.imul(en,ln)|0,fr=fr+Math.imul(un,fn)|0,br=br+Math.imul(un,ln)|0,dr=dr+Math.imul(Fr,wn)|0,fr=fr+Math.imul(Fr,_n)|0,fr=fr+Math.imul(Xr,wn)|0,br=br+Math.imul(Xr,_n)|0;var Qn=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,dr=Math.imul(yn,fn),fr=Math.imul(yn,ln),fr=fr+Math.imul(pn,fn)|0,br=Math.imul(pn,ln),dr=dr+Math.imul(en,wn)|0,fr=fr+Math.imul(en,_n)|0,fr=fr+Math.imul(un,wn)|0,br=br+Math.imul(un,_n)|0;var ni=(tr+dr|0)+((fr&8191)<<13)|0;tr=(br+(fr>>>13)|0)+(ni>>>26)|0,ni&=67108863,dr=Math.imul(yn,wn),fr=Math.imul(yn,_n),fr=fr+Math.imul(pn,wn)|0,br=Math.imul(pn,_n);var ii=(tr+dr|0)+((fr&8191)<<13)|0;return tr=(br+(fr>>>13)|0)+(ii>>>26)|0,ii&=67108863,ar[0]=$n,ar[1]=xn,ar[2]=Un,ar[3]=Sn,ar[4]=jn,ar[5]=Gn,ar[6]=Nn,ar[7]=Vn,ar[8]=qn,ar[9]=Kn,ar[10]=Xn,ar[11]=Zn,ar[12]=Fn,ar[13]=zn,ar[14]=Yn,ar[15]=Hn,ar[16]=Qn,ar[17]=ni,ar[18]=ii,tr!==0&&(ar[19]=tr,pr.length++),pr};Math.imul||(Qt=rr);function Wt(ir,Xt,er){er.negative=Xt.negative^ir.negative,er.length=ir.length+Xt.length;for(var pr=0,ur=0,gr=0;gr<er.length-1;gr++){var ar=ur;ur=0;for(var tr=pr&67108863,dr=Math.min(gr,Xt.length-1),fr=Math.max(0,gr-ir.length+1);fr<=dr;fr++){var br=gr-fr,Sr=ir.words[br]|0,Dr=Xt.words[fr]|0,Er=Sr*Dr,wr=Er&67108863;ar=ar+(Er/67108864|0)|0,wr=wr+tr|0,tr=wr&67108863,ar=ar+(wr>>>26)|0,ur+=ar>>>26,ar&=67108863}er.words[gr]=tr,pr=ar,ar=ur}return pr!==0?er.words[gr]=pr:er.length--,er._strip()}function nr(ir,Xt,er){return Wt(ir,Xt,er)}kt.prototype.mulTo=function(Xt,er){var pr,ur=this.length+Xt.length;return this.length===10&&Xt.length===10?pr=Qt(this,Xt,er):ur<63?pr=rr(this,Xt,er):ur<1024?pr=Wt(this,Xt,er):pr=nr(this,Xt,er),pr},kt.prototype.mul=function(Xt){var er=new kt(null);return er.words=new Array(this.length+Xt.length),this.mulTo(Xt,er)},kt.prototype.mulf=function(Xt){var er=new kt(null);return er.words=new Array(this.length+Xt.length),nr(this,Xt,er)},kt.prototype.imul=function(Xt){return this.clone().mulTo(Xt,this)},kt.prototype.imuln=function(Xt){var er=Xt<0;er&&(Xt=-Xt),xt(typeof Xt=="number"),xt(Xt<67108864);for(var pr=0,ur=0;ur<this.length;ur++){var gr=(this.words[ur]|0)*Xt,ar=(gr&67108863)+(pr&67108863);pr>>=26,pr+=gr/67108864|0,pr+=ar>>>26,this.words[ur]=ar&67108863}return pr!==0&&(this.words[ur]=pr,this.length++),er?this.ineg():this},kt.prototype.muln=function(Xt){return this.clone().imuln(Xt)},kt.prototype.sqr=function(){return this.mul(this)},kt.prototype.isqr=function(){return this.imul(this.clone())},kt.prototype.pow=function(Xt){var er=Jt(Xt);if(er.length===0)return new kt(1);for(var pr=this,ur=0;ur<er.length&&er[ur]===0;ur++,pr=pr.sqr());if(++ur<er.length)for(var gr=pr.sqr();ur<er.length;ur++,gr=gr.sqr())er[ur]!==0&&(pr=pr.mul(gr));return pr},kt.prototype.iushln=function(Xt){xt(typeof Xt=="number"&&Xt>=0);var er=Xt%26,pr=(Xt-er)/26,ur=67108863>>>26-er<<26-er,gr;if(er!==0){var ar=0;for(gr=0;gr<this.length;gr++){var tr=this.words[gr]&ur,dr=(this.words[gr]|0)-tr<<er;this.words[gr]=dr|ar,ar=tr>>>26-er}ar&&(this.words[gr]=ar,this.length++)}if(pr!==0){for(gr=this.length-1;gr>=0;gr--)this.words[gr+pr]=this.words[gr];for(gr=0;gr<pr;gr++)this.words[gr]=0;this.length+=pr}return this._strip()},kt.prototype.ishln=function(Xt){return xt(this.negative===0),this.iushln(Xt)},kt.prototype.iushrn=function(Xt,er,pr){xt(typeof Xt=="number"&&Xt>=0);var ur;er?ur=(er-er%26)/26:ur=0;var gr=Xt%26,ar=Math.min((Xt-gr)/26,this.length),tr=67108863^67108863>>>gr<<gr,dr=pr;if(ur-=ar,ur=Math.max(0,ur),dr){for(var fr=0;fr<ar;fr++)dr.words[fr]=this.words[fr];dr.length=ar}if(ar!==0)if(this.length>ar)for(this.length-=ar,fr=0;fr<this.length;fr++)this.words[fr]=this.words[fr+ar];else this.words[0]=0,this.length=1;var br=0;for(fr=this.length-1;fr>=0&&(br!==0||fr>=ur);fr--){var Sr=this.words[fr]|0;this.words[fr]=br<<26-gr|Sr>>>gr,br=Sr&tr}return dr&&br!==0&&(dr.words[dr.length++]=br),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},kt.prototype.ishrn=function(Xt,er,pr){return xt(this.negative===0),this.iushrn(Xt,er,pr)},kt.prototype.shln=function(Xt){return this.clone().ishln(Xt)},kt.prototype.ushln=function(Xt){return this.clone().iushln(Xt)},kt.prototype.shrn=function(Xt){return this.clone().ishrn(Xt)},kt.prototype.ushrn=function(Xt){return this.clone().iushrn(Xt)},kt.prototype.testn=function(Xt){xt(typeof Xt=="number"&&Xt>=0);var er=Xt%26,pr=(Xt-er)/26,ur=1<<er;if(this.length<=pr)return!1;var gr=this.words[pr];return!!(gr&ur)},kt.prototype.imaskn=function(Xt){xt(typeof Xt=="number"&&Xt>=0);var er=Xt%26,pr=(Xt-er)/26;if(xt(this.negative===0,"imaskn works only with positive numbers"),this.length<=pr)return this;if(er!==0&&pr++,this.length=Math.min(pr,this.length),er!==0){var ur=67108863^67108863>>>er<<er;this.words[this.length-1]&=ur}return this._strip()},kt.prototype.maskn=function(Xt){return this.clone().imaskn(Xt)},kt.prototype.iaddn=function(Xt){return xt(typeof Xt=="number"),xt(Xt<67108864),Xt<0?this.isubn(-Xt):this.negative!==0?this.length===1&&(this.words[0]|0)<=Xt?(this.words[0]=Xt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Xt),this.negative=1,this):this._iaddn(Xt)},kt.prototype._iaddn=function(Xt){this.words[0]+=Xt;for(var er=0;er<this.length&&this.words[er]>=67108864;er++)this.words[er]-=67108864,er===this.length-1?this.words[er+1]=1:this.words[er+1]++;return this.length=Math.max(this.length,er+1),this},kt.prototype.isubn=function(Xt){if(xt(typeof Xt=="number"),xt(Xt<67108864),Xt<0)return this.iaddn(-Xt);if(this.negative!==0)return this.negative=0,this.iaddn(Xt),this.negative=1,this;if(this.words[0]-=Xt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var er=0;er<this.length&&this.words[er]<0;er++)this.words[er]+=67108864,this.words[er+1]-=1;return this._strip()},kt.prototype.addn=function(Xt){return this.clone().iaddn(Xt)},kt.prototype.subn=function(Xt){return this.clone().isubn(Xt)},kt.prototype.iabs=function(){return this.negative=0,this},kt.prototype.abs=function(){return this.clone().iabs()},kt.prototype._ishlnsubmul=function(Xt,er,pr){var ur=Xt.length+pr,gr;this._expand(ur);var ar,tr=0;for(gr=0;gr<Xt.length;gr++){ar=(this.words[gr+pr]|0)+tr;var dr=(Xt.words[gr]|0)*er;ar-=dr&67108863,tr=(ar>>26)-(dr/67108864|0),this.words[gr+pr]=ar&67108863}for(;gr<this.length-pr;gr++)ar=(this.words[gr+pr]|0)+tr,tr=ar>>26,this.words[gr+pr]=ar&67108863;if(tr===0)return this._strip();for(xt(tr===-1),tr=0,gr=0;gr<this.length;gr++)ar=-(this.words[gr]|0)+tr,tr=ar>>26,this.words[gr]=ar&67108863;return this.negative=1,this._strip()},kt.prototype._wordDiv=function(Xt,er){var pr=this.length-Xt.length,ur=this.clone(),gr=Xt,ar=gr.words[gr.length-1]|0,tr=this._countBits(ar);pr=26-tr,pr!==0&&(gr=gr.ushln(pr),ur.iushln(pr),ar=gr.words[gr.length-1]|0);var dr=ur.length-gr.length,fr;if(er!=="mod"){fr=new kt(null),fr.length=dr+1,fr.words=new Array(fr.length);for(var br=0;br<fr.length;br++)fr.words[br]=0}var Sr=ur.clone()._ishlnsubmul(gr,1,dr);Sr.negative===0&&(ur=Sr,fr&&(fr.words[dr]=1));for(var Dr=dr-1;Dr>=0;Dr--){var Er=(ur.words[gr.length+Dr]|0)*67108864+(ur.words[gr.length+Dr-1]|0);for(Er=Math.min(Er/ar|0,67108863),ur._ishlnsubmul(gr,Er,Dr);ur.negative!==0;)Er--,ur.negative=0,ur._ishlnsubmul(gr,1,Dr),ur.isZero()||(ur.negative^=1);fr&&(fr.words[Dr]=Er)}return fr&&fr._strip(),ur._strip(),er!=="div"&&pr!==0&&ur.iushrn(pr),{div:fr||null,mod:ur}},kt.prototype.divmod=function(Xt,er,pr){if(xt(!Xt.isZero()),this.isZero())return{div:new kt(0),mod:new kt(0)};var ur,gr,ar;return this.negative!==0&&Xt.negative===0?(ar=this.neg().divmod(Xt,er),er!=="mod"&&(ur=ar.div.neg()),er!=="div"&&(gr=ar.mod.neg(),pr&&gr.negative!==0&&gr.iadd(Xt)),{div:ur,mod:gr}):this.negative===0&&Xt.negative!==0?(ar=this.divmod(Xt.neg(),er),er!=="mod"&&(ur=ar.div.neg()),{div:ur,mod:ar.mod}):this.negative&Xt.negative?(ar=this.neg().divmod(Xt.neg(),er),er!=="div"&&(gr=ar.mod.neg(),pr&&gr.negative!==0&&gr.isub(Xt)),{div:ar.div,mod:gr}):Xt.length>this.length||this.cmp(Xt)<0?{div:new kt(0),mod:this}:Xt.length===1?er==="div"?{div:this.divn(Xt.words[0]),mod:null}:er==="mod"?{div:null,mod:new kt(this.modrn(Xt.words[0]))}:{div:this.divn(Xt.words[0]),mod:new kt(this.modrn(Xt.words[0]))}:this._wordDiv(Xt,er)},kt.prototype.div=function(Xt){return this.divmod(Xt,"div",!1).div},kt.prototype.mod=function(Xt){return this.divmod(Xt,"mod",!1).mod},kt.prototype.umod=function(Xt){return this.divmod(Xt,"mod",!0).mod},kt.prototype.divRound=function(Xt){var er=this.divmod(Xt);if(er.mod.isZero())return er.div;var pr=er.div.negative!==0?er.mod.isub(Xt):er.mod,ur=Xt.ushrn(1),gr=Xt.andln(1),ar=pr.cmp(ur);return ar<0||gr===1&&ar===0?er.div:er.div.negative!==0?er.div.isubn(1):er.div.iaddn(1)},kt.prototype.modrn=function(Xt){var er=Xt<0;er&&(Xt=-Xt),xt(Xt<=67108863);for(var pr=(1<<26)%Xt,ur=0,gr=this.length-1;gr>=0;gr--)ur=(pr*ur+(this.words[gr]|0))%Xt;return er?-ur:ur},kt.prototype.modn=function(Xt){return this.modrn(Xt)},kt.prototype.idivn=function(Xt){var er=Xt<0;er&&(Xt=-Xt),xt(Xt<=67108863);for(var pr=0,ur=this.length-1;ur>=0;ur--){var gr=(this.words[ur]|0)+pr*67108864;this.words[ur]=gr/Xt|0,pr=gr%Xt}return this._strip(),er?this.ineg():this},kt.prototype.divn=function(Xt){return this.clone().idivn(Xt)},kt.prototype.egcd=function(Xt){xt(Xt.negative===0),xt(!Xt.isZero());var er=this,pr=Xt.clone();er.negative!==0?er=er.umod(Xt):er=er.clone();for(var ur=new kt(1),gr=new kt(0),ar=new kt(0),tr=new kt(1),dr=0;er.isEven()&&pr.isEven();)er.iushrn(1),pr.iushrn(1),++dr;for(var fr=pr.clone(),br=er.clone();!er.isZero();){for(var Sr=0,Dr=1;!(er.words[0]&Dr)&&Sr<26;++Sr,Dr<<=1);if(Sr>0)for(er.iushrn(Sr);Sr-- >0;)(ur.isOdd()||gr.isOdd())&&(ur.iadd(fr),gr.isub(br)),ur.iushrn(1),gr.iushrn(1);for(var Er=0,wr=1;!(pr.words[0]&wr)&&Er<26;++Er,wr<<=1);if(Er>0)for(pr.iushrn(Er);Er-- >0;)(ar.isOdd()||tr.isOdd())&&(ar.iadd(fr),tr.isub(br)),ar.iushrn(1),tr.iushrn(1);er.cmp(pr)>=0?(er.isub(pr),ur.isub(ar),gr.isub(tr)):(pr.isub(er),ar.isub(ur),tr.isub(gr))}return{a:ar,b:tr,gcd:pr.iushln(dr)}},kt.prototype._invmp=function(Xt){xt(Xt.negative===0),xt(!Xt.isZero());var er=this,pr=Xt.clone();er.negative!==0?er=er.umod(Xt):er=er.clone();for(var ur=new kt(1),gr=new kt(0),ar=pr.clone();er.cmpn(1)>0&&pr.cmpn(1)>0;){for(var tr=0,dr=1;!(er.words[0]&dr)&&tr<26;++tr,dr<<=1);if(tr>0)for(er.iushrn(tr);tr-- >0;)ur.isOdd()&&ur.iadd(ar),ur.iushrn(1);for(var fr=0,br=1;!(pr.words[0]&br)&&fr<26;++fr,br<<=1);if(fr>0)for(pr.iushrn(fr);fr-- >0;)gr.isOdd()&&gr.iadd(ar),gr.iushrn(1);er.cmp(pr)>=0?(er.isub(pr),ur.isub(gr)):(pr.isub(er),gr.isub(ur))}var Sr;return er.cmpn(1)===0?Sr=ur:Sr=gr,Sr.cmpn(0)<0&&Sr.iadd(Xt),Sr},kt.prototype.gcd=function(Xt){if(this.isZero())return Xt.abs();if(Xt.isZero())return this.abs();var er=this.clone(),pr=Xt.clone();er.negative=0,pr.negative=0;for(var ur=0;er.isEven()&&pr.isEven();ur++)er.iushrn(1),pr.iushrn(1);do{for(;er.isEven();)er.iushrn(1);for(;pr.isEven();)pr.iushrn(1);var gr=er.cmp(pr);if(gr<0){var ar=er;er=pr,pr=ar}else if(gr===0||pr.cmpn(1)===0)break;er.isub(pr)}while(!0);return pr.iushln(ur)},kt.prototype.invm=function(Xt){return this.egcd(Xt).a.umod(Xt)},kt.prototype.isEven=function(){return(this.words[0]&1)===0},kt.prototype.isOdd=function(){return(this.words[0]&1)===1},kt.prototype.andln=function(Xt){return this.words[0]&Xt},kt.prototype.bincn=function(Xt){xt(typeof Xt=="number");var er=Xt%26,pr=(Xt-er)/26,ur=1<<er;if(this.length<=pr)return this._expand(pr+1),this.words[pr]|=ur,this;for(var gr=ur,ar=pr;gr!==0&&ar<this.length;ar++){var tr=this.words[ar]|0;tr+=gr,gr=tr>>>26,tr&=67108863,this.words[ar]=tr}return gr!==0&&(this.words[ar]=gr,this.length++),this},kt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},kt.prototype.cmpn=function(Xt){var er=Xt<0;if(this.negative!==0&&!er)return-1;if(this.negative===0&&er)return 1;this._strip();var pr;if(this.length>1)pr=1;else{er&&(Xt=-Xt),xt(Xt<=67108863,"Number is too big");var ur=this.words[0]|0;pr=ur===Xt?0:ur<Xt?-1:1}return this.negative!==0?-pr|0:pr},kt.prototype.cmp=function(Xt){if(this.negative!==0&&Xt.negative===0)return-1;if(this.negative===0&&Xt.negative!==0)return 1;var er=this.ucmp(Xt);return this.negative!==0?-er|0:er},kt.prototype.ucmp=function(Xt){if(this.length>Xt.length)return 1;if(this.length<Xt.length)return-1;for(var er=0,pr=this.length-1;pr>=0;pr--){var ur=this.words[pr]|0,gr=Xt.words[pr]|0;if(ur!==gr){ur<gr?er=-1:ur>gr&&(er=1);break}}return er},kt.prototype.gtn=function(Xt){return this.cmpn(Xt)===1},kt.prototype.gt=function(Xt){return this.cmp(Xt)===1},kt.prototype.gten=function(Xt){return this.cmpn(Xt)>=0},kt.prototype.gte=function(Xt){return this.cmp(Xt)>=0},kt.prototype.ltn=function(Xt){return this.cmpn(Xt)===-1},kt.prototype.lt=function(Xt){return this.cmp(Xt)===-1},kt.prototype.lten=function(Xt){return this.cmpn(Xt)<=0},kt.prototype.lte=function(Xt){return this.cmp(Xt)<=0},kt.prototype.eqn=function(Xt){return this.cmpn(Xt)===0},kt.prototype.eq=function(Xt){return this.cmp(Xt)===0},kt.red=function(Xt){return new kr(Xt)},kt.prototype.toRed=function(Xt){return xt(!this.red,"Already a number in reduction context"),xt(this.negative===0,"red works only with positives"),Xt.convertTo(this)._forceRed(Xt)},kt.prototype.fromRed=function(){return xt(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},kt.prototype._forceRed=function(Xt){return this.red=Xt,this},kt.prototype.forceRed=function(Xt){return xt(!this.red,"Already a number in reduction context"),this._forceRed(Xt)},kt.prototype.redAdd=function(Xt){return xt(this.red,"redAdd works only with red numbers"),this.red.add(this,Xt)},kt.prototype.redIAdd=function(Xt){return xt(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Xt)},kt.prototype.redSub=function(Xt){return xt(this.red,"redSub works only with red numbers"),this.red.sub(this,Xt)},kt.prototype.redISub=function(Xt){return xt(this.red,"redISub works only with red numbers"),this.red.isub(this,Xt)},kt.prototype.redShl=function(Xt){return xt(this.red,"redShl works only with red numbers"),this.red.shl(this,Xt)},kt.prototype.redMul=function(Xt){return xt(this.red,"redMul works only with red numbers"),this.red._verify2(this,Xt),this.red.mul(this,Xt)},kt.prototype.redIMul=function(Xt){return xt(this.red,"redMul works only with red numbers"),this.red._verify2(this,Xt),this.red.imul(this,Xt)},kt.prototype.redSqr=function(){return xt(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},kt.prototype.redISqr=function(){return xt(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},kt.prototype.redSqrt=function(){return xt(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},kt.prototype.redInvm=function(){return xt(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},kt.prototype.redNeg=function(){return xt(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},kt.prototype.redPow=function(Xt){return xt(this.red&&!Xt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Xt)};var yr={k256:null,p224:null,p192:null,p25519:null};function vr(ir,Xt){this.name=ir,this.p=new kt(Xt,16),this.n=this.p.bitLength(),this.k=new kt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}vr.prototype._tmp=function(){var Xt=new kt(null);return Xt.words=new Array(Math.ceil(this.n/13)),Xt},vr.prototype.ireduce=function(Xt){var er=Xt,pr;do this.split(er,this.tmp),er=this.imulK(er),er=er.iadd(this.tmp),pr=er.bitLength();while(pr>this.n);var ur=pr<this.n?-1:er.ucmp(this.p);return ur===0?(er.words[0]=0,er.length=1):ur>0?er.isub(this.p):er.strip!==void 0?er.strip():er._strip(),er},vr.prototype.split=function(Xt,er){Xt.iushrn(this.n,0,er)},vr.prototype.imulK=function(Xt){return Xt.imul(this.k)};function Ir(){vr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}At(Ir,vr),Ir.prototype.split=function(Xt,er){for(var pr=4194303,ur=Math.min(Xt.length,9),gr=0;gr<ur;gr++)er.words[gr]=Xt.words[gr];if(er.length=ur,Xt.length<=9){Xt.words[0]=0,Xt.length=1;return}var ar=Xt.words[9];for(er.words[er.length++]=ar&pr,gr=10;gr<Xt.length;gr++){var tr=Xt.words[gr]|0;Xt.words[gr-10]=(tr&pr)<<4|ar>>>22,ar=tr}ar>>>=22,Xt.words[gr-10]=ar,ar===0&&Xt.length>10?Xt.length-=10:Xt.length-=9},Ir.prototype.imulK=function(Xt){Xt.words[Xt.length]=0,Xt.words[Xt.length+1]=0,Xt.length+=2;for(var er=0,pr=0;pr<Xt.length;pr++){var ur=Xt.words[pr]|0;er+=ur*977,Xt.words[pr]=er&67108863,er=ur*64+(er/67108864|0)}return Xt.words[Xt.length-1]===0&&(Xt.length--,Xt.words[Xt.length-1]===0&&Xt.length--),Xt};function xr(){vr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}At(xr,vr);function Or(){vr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}At(Or,vr);function Nr(){vr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}At(Nr,vr),Nr.prototype.imulK=function(Xt){for(var er=0,pr=0;pr<Xt.length;pr++){var ur=(Xt.words[pr]|0)*19+er,gr=ur&67108863;ur>>>=26,Xt.words[pr]=gr,er=ur}return er!==0&&(Xt.words[Xt.length++]=er),Xt},kt._prime=function(Xt){if(yr[Xt])return yr[Xt];var er;if(Xt==="k256")er=new Ir;else if(Xt==="p224")er=new xr;else if(Xt==="p192")er=new Or;else if(Xt==="p25519")er=new Nr;else throw new Error("Unknown prime "+Xt);return yr[Xt]=er,er};function kr(ir){if(typeof ir=="string"){var Xt=kt._prime(ir);this.m=Xt.p,this.prime=Xt}else xt(ir.gtn(1),"modulus must be greater than 1"),this.m=ir,this.prime=null}kr.prototype._verify1=function(Xt){xt(Xt.negative===0,"red works only with positives"),xt(Xt.red,"red works only with red numbers")},kr.prototype._verify2=function(Xt,er){xt((Xt.negative|er.negative)===0,"red works only with positives"),xt(Xt.red&&Xt.red===er.red,"red works only with red numbers")},kr.prototype.imod=function(Xt){return this.prime?this.prime.ireduce(Xt)._forceRed(this):(Nt(Xt,Xt.umod(this.m)._forceRed(this)),Xt)},kr.prototype.neg=function(Xt){return Xt.isZero()?Xt.clone():this.m.sub(Xt)._forceRed(this)},kr.prototype.add=function(Xt,er){this._verify2(Xt,er);var pr=Xt.add(er);return pr.cmp(this.m)>=0&&pr.isub(this.m),pr._forceRed(this)},kr.prototype.iadd=function(Xt,er){this._verify2(Xt,er);var pr=Xt.iadd(er);return pr.cmp(this.m)>=0&&pr.isub(this.m),pr},kr.prototype.sub=function(Xt,er){this._verify2(Xt,er);var pr=Xt.sub(er);return pr.cmpn(0)<0&&pr.iadd(this.m),pr._forceRed(this)},kr.prototype.isub=function(Xt,er){this._verify2(Xt,er);var pr=Xt.isub(er);return pr.cmpn(0)<0&&pr.iadd(this.m),pr},kr.prototype.shl=function(Xt,er){return this._verify1(Xt),this.imod(Xt.ushln(er))},kr.prototype.imul=function(Xt,er){return this._verify2(Xt,er),this.imod(Xt.imul(er))},kr.prototype.mul=function(Xt,er){return this._verify2(Xt,er),this.imod(Xt.mul(er))},kr.prototype.isqr=function(Xt){return this.imul(Xt,Xt.clone())},kr.prototype.sqr=function(Xt){return this.mul(Xt,Xt)},kr.prototype.sqrt=function(Xt){if(Xt.isZero())return Xt.clone();var er=this.m.andln(3);if(xt(er%2===1),er===3){var pr=this.m.add(new kt(1)).iushrn(2);return this.pow(Xt,pr)}for(var ur=this.m.subn(1),gr=0;!ur.isZero()&&ur.andln(1)===0;)gr++,ur.iushrn(1);xt(!ur.isZero());var ar=new kt(1).toRed(this),tr=ar.redNeg(),dr=this.m.subn(1).iushrn(1),fr=this.m.bitLength();for(fr=new kt(2*fr*fr).toRed(this);this.pow(fr,dr).cmp(tr)!==0;)fr.redIAdd(tr);for(var br=this.pow(fr,ur),Sr=this.pow(Xt,ur.addn(1).iushrn(1)),Dr=this.pow(Xt,ur),Er=gr;Dr.cmp(ar)!==0;){for(var wr=Dr,Tr=0;wr.cmp(ar)!==0;Tr++)wr=wr.redSqr();xt(Tr<Er);var Mr=this.pow(br,new kt(1).iushln(Er-Tr-1));Sr=Sr.redMul(Mr),br=Mr.redSqr(),Dr=Dr.redMul(br),Er=Tr}return Sr},kr.prototype.invm=function(Xt){var er=Xt._invmp(this.m);return er.negative!==0?(er.negative=0,this.imod(er).redNeg()):this.imod(er)},kr.prototype.pow=function(Xt,er){if(er.isZero())return new kt(1).toRed(this);if(er.cmpn(1)===0)return Xt.clone();var pr=4,ur=new Array(1<<pr);ur[0]=new kt(1).toRed(this),ur[1]=Xt;for(var gr=2;gr<ur.length;gr++)ur[gr]=this.mul(ur[gr-1],Xt);var ar=ur[0],tr=0,dr=0,fr=er.bitLength()%26;for(fr===0&&(fr=26),gr=er.length-1;gr>=0;gr--){for(var br=er.words[gr],Sr=fr-1;Sr>=0;Sr--){var Dr=br>>Sr&1;if(ar!==ur[0]&&(ar=this.sqr(ar)),Dr===0&&tr===0){dr=0;continue}tr<<=1,tr|=Dr,dr++,!(dr!==pr&&(gr!==0||Sr!==0))&&(ar=this.mul(ar,ur[tr]),dr=0,tr=0)}fr=26}return ar},kr.prototype.convertTo=function(Xt){var er=Xt.umod(this.m);return er===Xt?er.clone():er},kr.prototype.convertFrom=function(Xt){var er=Xt.clone();return er.red=null,er},kt.mont=function(Xt){return new lr(Xt)};function lr(ir){kr.call(this,ir),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new kt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}At(lr,kr),lr.prototype.convertTo=function(Xt){return this.imod(Xt.ushln(this.shift))},lr.prototype.convertFrom=function(Xt){var er=this.imod(Xt.mul(this.rinv));return er.red=null,er},lr.prototype.imul=function(Xt,er){if(Xt.isZero()||er.isZero())return Xt.words[0]=0,Xt.length=1,Xt;var pr=Xt.imul(er),ur=pr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),gr=pr.isub(ur).iushrn(this.shift),ar=gr;return gr.cmp(this.m)>=0?ar=gr.isub(this.m):gr.cmpn(0)<0&&(ar=gr.iadd(this.m)),ar._forceRed(this)},lr.prototype.mul=function(Xt,er){if(Xt.isZero()||er.isZero())return new kt(0)._forceRed(this);var pr=Xt.mul(er),ur=pr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),gr=pr.isub(ur).iushrn(this.shift),ar=gr;return gr.cmp(this.m)>=0?ar=gr.isub(this.m):gr.cmpn(0)<0&&(ar=gr.iadd(this.m)),ar._forceRed(this)},lr.prototype.invm=function(Xt){var er=this.imod(Xt._invmp(this.m).mul(this.r2));return er._forceRed(this)}})(_t,commonjsGlobal)})(bn);var bnExports=bn.exports,BN$a=bnExports,randomBytes$3=browserExports$1;function blind(_t){var e=getr(_t),$t=e.toRed(BN$a.mont(_t.modulus)).redPow(new BN$a(_t.publicExponent)).fromRed();return{blinder:$t,unblinder:e.invm(_t.modulus)}}function getr(_t){var e=_t.modulus.byteLength(),$t;do $t=new BN$a(randomBytes$3(e));while($t.cmp(_t.modulus)>=0||!$t.umod(_t.prime1)||!$t.umod(_t.prime2));return $t}function crt$2(_t,e){var $t=blind(e),xt=e.modulus.byteLength(),At=new BN$a(_t).mul($t.blinder).umod(e.modulus),kt=At.toRed(BN$a.mont(e.prime1)),Bt=At.toRed(BN$a.mont(e.prime2)),jt=e.coefficient,Lt=e.prime1,Ut=e.prime2,Nt=kt.redPow(e.exponent1).fromRed(),qt=Bt.redPow(e.exponent2).fromRed(),Kt=Nt.isub(qt).imul(jt).umod(Lt).imul(Ut);return qt.iadd(Kt).imul($t.unblinder).umod(e.modulus).toArrayLike(buffer$2.Buffer,"be",xt)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic$1={};const name$1="elliptic",version="6.5.7",description$1="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies$1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$3={name:name$1,version,description:description$1,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies:dependencies$1};var utils$s={},utils$r={};(function(_t){var e=_t;function $t(kt,Bt){if(Array.isArray(kt))return kt.slice();if(!kt)return[];var jt=[];if(typeof kt!="string"){for(var Lt=0;Lt<kt.length;Lt++)jt[Lt]=kt[Lt]|0;return jt}if(Bt==="hex"){kt=kt.replace(/[^a-z0-9]+/ig,""),kt.length%2!==0&&(kt="0"+kt);for(var Lt=0;Lt<kt.length;Lt+=2)jt.push(parseInt(kt[Lt]+kt[Lt+1],16))}else for(var Lt=0;Lt<kt.length;Lt++){var Ut=kt.charCodeAt(Lt),Nt=Ut>>8,qt=Ut&255;Nt?jt.push(Nt,qt):jt.push(qt)}return jt}e.toArray=$t;function xt(kt){return kt.length===1?"0"+kt:kt}e.zero2=xt;function At(kt){for(var Bt="",jt=0;jt<kt.length;jt++)Bt+=xt(kt[jt].toString(16));return Bt}e.toHex=At,e.encode=function(Bt,jt){return jt==="hex"?At(Bt):Bt}})(utils$r);(function(_t){var e=_t,$t=bnExports$1,xt=minimalisticAssert,At=utils$r;e.assert=xt,e.toArray=At.toArray,e.zero2=At.zero2,e.toHex=At.toHex,e.encode=At.encode;function kt(Nt,qt,Kt){var zt=new Array(Math.max(Nt.bitLength(),Kt)+1),Vt;for(Vt=0;Vt<zt.length;Vt+=1)zt[Vt]=0;var Ht=1<<qt+1,Jt=Nt.clone();for(Vt=0;Vt<zt.length;Vt++){var rr,Qt=Jt.andln(Ht-1);Jt.isOdd()?(Qt>(Ht>>1)-1?rr=(Ht>>1)-Qt:rr=Qt,Jt.isubn(rr)):rr=0,zt[Vt]=rr,Jt.iushrn(1)}return zt}e.getNAF=kt;function Bt(Nt,qt){var Kt=[[],[]];Nt=Nt.clone(),qt=qt.clone();for(var zt=0,Vt=0,Ht;Nt.cmpn(-zt)>0||qt.cmpn(-Vt)>0;){var Jt=Nt.andln(3)+zt&3,rr=qt.andln(3)+Vt&3;Jt===3&&(Jt=-1),rr===3&&(rr=-1);var Qt;Jt&1?(Ht=Nt.andln(7)+zt&7,(Ht===3||Ht===5)&&rr===2?Qt=-Jt:Qt=Jt):Qt=0,Kt[0].push(Qt);var Wt;rr&1?(Ht=qt.andln(7)+Vt&7,(Ht===3||Ht===5)&&Jt===2?Wt=-rr:Wt=rr):Wt=0,Kt[1].push(Wt),2*zt===Qt+1&&(zt=1-zt),2*Vt===Wt+1&&(Vt=1-Vt),Nt.iushrn(1),qt.iushrn(1)}return Kt}e.getJSF=Bt;function jt(Nt,qt,Kt){var zt="_"+qt;Nt.prototype[qt]=function(){return this[zt]!==void 0?this[zt]:this[zt]=Kt.call(this)}}e.cachedProperty=jt;function Lt(Nt){return typeof Nt=="string"?e.toArray(Nt,"hex"):Nt}e.parseBytes=Lt;function Ut(Nt){return new $t(Nt,"hex","le")}e.intFromLE=Ut})(utils$s);var curve$1={},BN$9=bnExports$1,utils$q=utils$s,getNAF=utils$q.getNAF,getJSF=utils$q.getJSF,assert$h=utils$q.assert;function BaseCurve(_t,e){this.type=_t,this.p=new BN$9(e.p,16),this.red=e.prime?BN$9.red(e.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=e.n&&new BN$9(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var $t=this.n&&this.p.div(this.n);!$t||$t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$2=BaseCurve;BaseCurve.prototype.point=function(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function(e,$t){assert$h(e.precomputed);var xt=e._getDoubles(),At=getNAF($t,1,this._bitLength),kt=(1<<xt.step+1)-(xt.step%2===0?2:1);kt/=3;var Bt=[],jt,Lt;for(jt=0;jt<At.length;jt+=xt.step){Lt=0;for(var Ut=jt+xt.step-1;Ut>=jt;Ut--)Lt=(Lt<<1)+At[Ut];Bt.push(Lt)}for(var Nt=this.jpoint(null,null,null),qt=this.jpoint(null,null,null),Kt=kt;Kt>0;Kt--){for(jt=0;jt<Bt.length;jt++)Lt=Bt[jt],Lt===Kt?qt=qt.mixedAdd(xt.points[jt]):Lt===-Kt&&(qt=qt.mixedAdd(xt.points[jt].neg()));Nt=Nt.add(qt)}return Nt.toP()};BaseCurve.prototype._wnafMul=function(e,$t){var xt=4,At=e._getNAFPoints(xt);xt=At.wnd;for(var kt=At.points,Bt=getNAF($t,xt,this._bitLength),jt=this.jpoint(null,null,null),Lt=Bt.length-1;Lt>=0;Lt--){for(var Ut=0;Lt>=0&&Bt[Lt]===0;Lt--)Ut++;if(Lt>=0&&Ut++,jt=jt.dblp(Ut),Lt<0)break;var Nt=Bt[Lt];assert$h(Nt!==0),e.type==="affine"?Nt>0?jt=jt.mixedAdd(kt[Nt-1>>1]):jt=jt.mixedAdd(kt[-Nt-1>>1].neg()):Nt>0?jt=jt.add(kt[Nt-1>>1]):jt=jt.add(kt[-Nt-1>>1].neg())}return e.type==="affine"?jt.toP():jt};BaseCurve.prototype._wnafMulAdd=function(e,$t,xt,At,kt){var Bt=this._wnafT1,jt=this._wnafT2,Lt=this._wnafT3,Ut=0,Nt,qt,Kt;for(Nt=0;Nt<At;Nt++){Kt=$t[Nt];var zt=Kt._getNAFPoints(e);Bt[Nt]=zt.wnd,jt[Nt]=zt.points}for(Nt=At-1;Nt>=1;Nt-=2){var Vt=Nt-1,Ht=Nt;if(Bt[Vt]!==1||Bt[Ht]!==1){Lt[Vt]=getNAF(xt[Vt],Bt[Vt],this._bitLength),Lt[Ht]=getNAF(xt[Ht],Bt[Ht],this._bitLength),Ut=Math.max(Lt[Vt].length,Ut),Ut=Math.max(Lt[Ht].length,Ut);continue}var Jt=[$t[Vt],null,null,$t[Ht]];$t[Vt].y.cmp($t[Ht].y)===0?(Jt[1]=$t[Vt].add($t[Ht]),Jt[2]=$t[Vt].toJ().mixedAdd($t[Ht].neg())):$t[Vt].y.cmp($t[Ht].y.redNeg())===0?(Jt[1]=$t[Vt].toJ().mixedAdd($t[Ht]),Jt[2]=$t[Vt].add($t[Ht].neg())):(Jt[1]=$t[Vt].toJ().mixedAdd($t[Ht]),Jt[2]=$t[Vt].toJ().mixedAdd($t[Ht].neg()));var rr=[-3,-1,-5,-7,0,7,5,1,3],Qt=getJSF(xt[Vt],xt[Ht]);for(Ut=Math.max(Qt[0].length,Ut),Lt[Vt]=new Array(Ut),Lt[Ht]=new Array(Ut),qt=0;qt<Ut;qt++){var Wt=Qt[0][qt]|0,nr=Qt[1][qt]|0;Lt[Vt][qt]=rr[(Wt+1)*3+(nr+1)],Lt[Ht][qt]=0,jt[Vt]=Jt}}var yr=this.jpoint(null,null,null),vr=this._wnafT4;for(Nt=Ut;Nt>=0;Nt--){for(var Ir=0;Nt>=0;){var xr=!0;for(qt=0;qt<At;qt++)vr[qt]=Lt[qt][Nt]|0,vr[qt]!==0&&(xr=!1);if(!xr)break;Ir++,Nt--}if(Nt>=0&&Ir++,yr=yr.dblp(Ir),Nt<0)break;for(qt=0;qt<At;qt++){var Or=vr[qt];Or!==0&&(Or>0?Kt=jt[qt][Or-1>>1]:Or<0&&(Kt=jt[qt][-Or-1>>1].neg()),Kt.type==="affine"?yr=yr.mixedAdd(Kt):yr=yr.add(Kt))}}for(Nt=0;Nt<At;Nt++)jt[Nt]=null;return kt?yr:yr.toP()};function BasePoint(_t,e){this.curve=_t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function(){throw new Error("Not implemented")};BasePoint.prototype.validate=function(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function(e,$t){e=utils$q.toArray(e,$t);var xt=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*xt){e[0]===6?assert$h(e[e.length-1]%2===0):e[0]===7&&assert$h(e[e.length-1]%2===1);var At=this.point(e.slice(1,1+xt),e.slice(1+xt,1+2*xt));return At}else if((e[0]===2||e[0]===3)&&e.length-1===xt)return this.pointFromX(e.slice(1,1+xt),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint.prototype._encode=function(e){var $t=this.curve.p.byteLength(),xt=this.getX().toArray("be",$t);return e?[this.getY().isEven()?2:3].concat(xt):[4].concat(xt,this.getY().toArray("be",$t))};BasePoint.prototype.encode=function(e,$t){return utils$q.encode(this._encode($t),e)};BasePoint.prototype.precompute=function(e){if(this.precomputed)return this;var $t={doubles:null,naf:null,beta:null};return $t.naf=this._getNAFPoints(8),$t.doubles=this._getDoubles(4,e),$t.beta=this._getBeta(),this.precomputed=$t,this};BasePoint.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var $t=this.precomputed.doubles;return $t?$t.points.length>=Math.ceil((e.bitLength()+1)/$t.step):!1};BasePoint.prototype._getDoubles=function(e,$t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var xt=[this],At=this,kt=0;kt<$t;kt+=e){for(var Bt=0;Bt<e;Bt++)At=At.dbl();xt.push(At)}return{step:e,points:xt}};BasePoint.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var $t=[this],xt=(1<<e)-1,At=xt===1?null:this.dbl(),kt=1;kt<xt;kt++)$t[kt]=$t[kt-1].add(At);return{wnd:e,points:$t}};BasePoint.prototype._getBeta=function(){return null};BasePoint.prototype.dblp=function(e){for(var $t=this,xt=0;xt<e;xt++)$t=$t.dbl();return $t};var utils$p=utils$s,BN$8=bnExports$1,inherits$4=inherits_browserExports,Base$2=base$2,assert$g=utils$p.assert;function ShortCurve(_t){Base$2.call(this,"short",_t),this.a=new BN$8(_t.a,16).toRed(this.red),this.b=new BN$8(_t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(_t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$4(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var $t,xt;if(e.beta)$t=new BN$8(e.beta,16).toRed(this.red);else{var At=this._getEndoRoots(this.p);$t=At[0].cmp(At[1])<0?At[0]:At[1],$t=$t.toRed(this.red)}if(e.lambda)xt=new BN$8(e.lambda,16);else{var kt=this._getEndoRoots(this.n);this.g.mul(kt[0]).x.cmp(this.g.x.redMul($t))===0?xt=kt[0]:(xt=kt[1],assert$g(this.g.mul(xt).x.cmp(this.g.x.redMul($t))===0))}var Bt;return e.basis?Bt=e.basis.map(function(jt){return{a:new BN$8(jt.a,16),b:new BN$8(jt.b,16)}}):Bt=this._getEndoBasis(xt),{beta:$t,lambda:xt,basis:Bt}}};ShortCurve.prototype._getEndoRoots=function(e){var $t=e===this.p?this.red:BN$8.mont(e),xt=new BN$8(2).toRed($t).redInvm(),At=xt.redNeg(),kt=new BN$8(3).toRed($t).redNeg().redSqrt().redMul(xt),Bt=At.redAdd(kt).fromRed(),jt=At.redSub(kt).fromRed();return[Bt,jt]};ShortCurve.prototype._getEndoBasis=function(e){for(var $t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),xt=e,At=this.n.clone(),kt=new BN$8(1),Bt=new BN$8(0),jt=new BN$8(0),Lt=new BN$8(1),Ut,Nt,qt,Kt,zt,Vt,Ht,Jt=0,rr,Qt;xt.cmpn(0)!==0;){var Wt=At.div(xt);rr=At.sub(Wt.mul(xt)),Qt=jt.sub(Wt.mul(kt));var nr=Lt.sub(Wt.mul(Bt));if(!qt&&rr.cmp($t)<0)Ut=Ht.neg(),Nt=kt,qt=rr.neg(),Kt=Qt;else if(qt&&++Jt===2)break;Ht=rr,At=xt,xt=rr,jt=kt,kt=Qt,Lt=Bt,Bt=nr}zt=rr.neg(),Vt=Qt;var yr=qt.sqr().add(Kt.sqr()),vr=zt.sqr().add(Vt.sqr());return vr.cmp(yr)>=0&&(zt=Ut,Vt=Nt),qt.negative&&(qt=qt.neg(),Kt=Kt.neg()),zt.negative&&(zt=zt.neg(),Vt=Vt.neg()),[{a:qt,b:Kt},{a:zt,b:Vt}]};ShortCurve.prototype._endoSplit=function(e){var $t=this.endo.basis,xt=$t[0],At=$t[1],kt=At.b.mul(e).divRound(this.n),Bt=xt.b.neg().mul(e).divRound(this.n),jt=kt.mul(xt.a),Lt=Bt.mul(At.a),Ut=kt.mul(xt.b),Nt=Bt.mul(At.b),qt=e.sub(jt).sub(Lt),Kt=Ut.add(Nt).neg();return{k1:qt,k2:Kt}};ShortCurve.prototype.pointFromX=function(e,$t){e=new BN$8(e,16),e.red||(e=e.toRed(this.red));var xt=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),At=xt.redSqrt();if(At.redSqr().redSub(xt).cmp(this.zero)!==0)throw new Error("invalid point");var kt=At.fromRed().isOdd();return($t&&!kt||!$t&&kt)&&(At=At.redNeg()),this.point(e,At)};ShortCurve.prototype.validate=function(e){if(e.inf)return!0;var $t=e.x,xt=e.y,At=this.a.redMul($t),kt=$t.redSqr().redMul($t).redIAdd(At).redIAdd(this.b);return xt.redSqr().redISub(kt).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function(e,$t,xt){for(var At=this._endoWnafT1,kt=this._endoWnafT2,Bt=0;Bt<e.length;Bt++){var jt=this._endoSplit($t[Bt]),Lt=e[Bt],Ut=Lt._getBeta();jt.k1.negative&&(jt.k1.ineg(),Lt=Lt.neg(!0)),jt.k2.negative&&(jt.k2.ineg(),Ut=Ut.neg(!0)),At[Bt*2]=Lt,At[Bt*2+1]=Ut,kt[Bt*2]=jt.k1,kt[Bt*2+1]=jt.k2}for(var Nt=this._wnafMulAdd(1,At,kt,Bt*2,xt),qt=0;qt<Bt*2;qt++)At[qt]=null,kt[qt]=null;return Nt};function Point$2(_t,e,$t,xt){Base$2.BasePoint.call(this,_t,"affine"),e===null&&$t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(e,16),this.y=new BN$8($t,16),xt&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$4(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function(e,$t,xt){return new Point$2(this,e,$t,xt)};ShortCurve.prototype.pointFromJSON=function(e,$t){return Point$2.fromJSON(this,e,$t)};Point$2.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var $t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var xt=this.curve,At=function(kt){return xt.point(kt.x.redMul(xt.endo.beta),kt.y)};e.beta=$t,$t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(At)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(At)}}}return $t}};Point$2.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function(e,$t,xt){typeof $t=="string"&&($t=JSON.parse($t));var At=e.point($t[0],$t[1],xt);if(!$t[2])return At;function kt(jt){return e.point(jt[0],jt[1],xt)}var Bt=$t[2];return At.precomputed={beta:null,doubles:Bt.doubles&&{step:Bt.doubles.step,points:[At].concat(Bt.doubles.points.map(kt))},naf:Bt.naf&&{wnd:Bt.naf.wnd,points:[At].concat(Bt.naf.points.map(kt))}},At};Point$2.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function(){return this.inf};Point$2.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var $t=this.y.redSub(e.y);$t.cmpn(0)!==0&&($t=$t.redMul(this.x.redSub(e.x).redInvm()));var xt=$t.redSqr().redISub(this.x).redISub(e.x),At=$t.redMul(this.x.redSub(xt)).redISub(this.y);return this.curve.point(xt,At)};Point$2.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var $t=this.curve.a,xt=this.x.redSqr(),At=e.redInvm(),kt=xt.redAdd(xt).redIAdd(xt).redIAdd($t).redMul(At),Bt=kt.redSqr().redISub(this.x.redAdd(this.x)),jt=kt.redMul(this.x.redSub(Bt)).redISub(this.y);return this.curve.point(Bt,jt)};Point$2.prototype.getX=function(){return this.x.fromRed()};Point$2.prototype.getY=function(){return this.y.fromRed()};Point$2.prototype.mul=function(e){return e=new BN$8(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function(e,$t,xt){var At=[this,$t],kt=[e,xt];return this.curve.endo?this.curve._endoWnafMulAdd(At,kt):this.curve._wnafMulAdd(1,At,kt,2)};Point$2.prototype.jmulAdd=function(e,$t,xt){var At=[this,$t],kt=[e,xt];return this.curve.endo?this.curve._endoWnafMulAdd(At,kt,!0):this.curve._wnafMulAdd(1,At,kt,2,!0)};Point$2.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function(e){if(this.inf)return this;var $t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var xt=this.precomputed,At=function(kt){return kt.neg()};$t.precomputed={naf:xt.naf&&{wnd:xt.naf.wnd,points:xt.naf.points.map(At)},doubles:xt.doubles&&{step:xt.doubles.step,points:xt.doubles.points.map(At)}}}return $t};Point$2.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(_t,e,$t,xt){Base$2.BasePoint.call(this,_t,"jacobian"),e===null&&$t===null&&xt===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(e,16),this.y=new BN$8($t,16),this.z=new BN$8(xt,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$4(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function(e,$t,xt){return new JPoint(this,e,$t,xt)};JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),$t=e.redSqr(),xt=this.x.redMul($t),At=this.y.redMul($t).redMul(e);return this.curve.point(xt,At)};JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var $t=e.z.redSqr(),xt=this.z.redSqr(),At=this.x.redMul($t),kt=e.x.redMul(xt),Bt=this.y.redMul($t.redMul(e.z)),jt=e.y.redMul(xt.redMul(this.z)),Lt=At.redSub(kt),Ut=Bt.redSub(jt);if(Lt.cmpn(0)===0)return Ut.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Nt=Lt.redSqr(),qt=Nt.redMul(Lt),Kt=At.redMul(Nt),zt=Ut.redSqr().redIAdd(qt).redISub(Kt).redISub(Kt),Vt=Ut.redMul(Kt.redISub(zt)).redISub(Bt.redMul(qt)),Ht=this.z.redMul(e.z).redMul(Lt);return this.curve.jpoint(zt,Vt,Ht)};JPoint.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var $t=this.z.redSqr(),xt=this.x,At=e.x.redMul($t),kt=this.y,Bt=e.y.redMul($t).redMul(this.z),jt=xt.redSub(At),Lt=kt.redSub(Bt);if(jt.cmpn(0)===0)return Lt.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Ut=jt.redSqr(),Nt=Ut.redMul(jt),qt=xt.redMul(Ut),Kt=Lt.redSqr().redIAdd(Nt).redISub(qt).redISub(qt),zt=Lt.redMul(qt.redISub(Kt)).redISub(kt.redMul(Nt)),Vt=this.z.redMul(jt);return this.curve.jpoint(Kt,zt,Vt)};JPoint.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var $t;if(this.curve.zeroA||this.curve.threeA){var xt=this;for($t=0;$t<e;$t++)xt=xt.dbl();return xt}var At=this.curve.a,kt=this.curve.tinv,Bt=this.x,jt=this.y,Lt=this.z,Ut=Lt.redSqr().redSqr(),Nt=jt.redAdd(jt);for($t=0;$t<e;$t++){var qt=Bt.redSqr(),Kt=Nt.redSqr(),zt=Kt.redSqr(),Vt=qt.redAdd(qt).redIAdd(qt).redIAdd(At.redMul(Ut)),Ht=Bt.redMul(Kt),Jt=Vt.redSqr().redISub(Ht.redAdd(Ht)),rr=Ht.redISub(Jt),Qt=Vt.redMul(rr);Qt=Qt.redIAdd(Qt).redISub(zt);var Wt=Nt.redMul(Lt);$t+1<e&&(Ut=Ut.redMul(zt)),Bt=Jt,Lt=Wt,Nt=Qt}return this.curve.jpoint(Bt,Nt.redMul(kt),Lt)};JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function(){var e,$t,xt;if(this.zOne){var At=this.x.redSqr(),kt=this.y.redSqr(),Bt=kt.redSqr(),jt=this.x.redAdd(kt).redSqr().redISub(At).redISub(Bt);jt=jt.redIAdd(jt);var Lt=At.redAdd(At).redIAdd(At),Ut=Lt.redSqr().redISub(jt).redISub(jt),Nt=Bt.redIAdd(Bt);Nt=Nt.redIAdd(Nt),Nt=Nt.redIAdd(Nt),e=Ut,$t=Lt.redMul(jt.redISub(Ut)).redISub(Nt),xt=this.y.redAdd(this.y)}else{var qt=this.x.redSqr(),Kt=this.y.redSqr(),zt=Kt.redSqr(),Vt=this.x.redAdd(Kt).redSqr().redISub(qt).redISub(zt);Vt=Vt.redIAdd(Vt);var Ht=qt.redAdd(qt).redIAdd(qt),Jt=Ht.redSqr(),rr=zt.redIAdd(zt);rr=rr.redIAdd(rr),rr=rr.redIAdd(rr),e=Jt.redISub(Vt).redISub(Vt),$t=Ht.redMul(Vt.redISub(e)).redISub(rr),xt=this.y.redMul(this.z),xt=xt.redIAdd(xt)}return this.curve.jpoint(e,$t,xt)};JPoint.prototype._threeDbl=function(){var e,$t,xt;if(this.zOne){var At=this.x.redSqr(),kt=this.y.redSqr(),Bt=kt.redSqr(),jt=this.x.redAdd(kt).redSqr().redISub(At).redISub(Bt);jt=jt.redIAdd(jt);var Lt=At.redAdd(At).redIAdd(At).redIAdd(this.curve.a),Ut=Lt.redSqr().redISub(jt).redISub(jt);e=Ut;var Nt=Bt.redIAdd(Bt);Nt=Nt.redIAdd(Nt),Nt=Nt.redIAdd(Nt),$t=Lt.redMul(jt.redISub(Ut)).redISub(Nt),xt=this.y.redAdd(this.y)}else{var qt=this.z.redSqr(),Kt=this.y.redSqr(),zt=this.x.redMul(Kt),Vt=this.x.redSub(qt).redMul(this.x.redAdd(qt));Vt=Vt.redAdd(Vt).redIAdd(Vt);var Ht=zt.redIAdd(zt);Ht=Ht.redIAdd(Ht);var Jt=Ht.redAdd(Ht);e=Vt.redSqr().redISub(Jt),xt=this.y.redAdd(this.z).redSqr().redISub(Kt).redISub(qt);var rr=Kt.redSqr();rr=rr.redIAdd(rr),rr=rr.redIAdd(rr),rr=rr.redIAdd(rr),$t=Vt.redMul(Ht.redISub(e)).redISub(rr)}return this.curve.jpoint(e,$t,xt)};JPoint.prototype._dbl=function(){var e=this.curve.a,$t=this.x,xt=this.y,At=this.z,kt=At.redSqr().redSqr(),Bt=$t.redSqr(),jt=xt.redSqr(),Lt=Bt.redAdd(Bt).redIAdd(Bt).redIAdd(e.redMul(kt)),Ut=$t.redAdd($t);Ut=Ut.redIAdd(Ut);var Nt=Ut.redMul(jt),qt=Lt.redSqr().redISub(Nt.redAdd(Nt)),Kt=Nt.redISub(qt),zt=jt.redSqr();zt=zt.redIAdd(zt),zt=zt.redIAdd(zt),zt=zt.redIAdd(zt);var Vt=Lt.redMul(Kt).redISub(zt),Ht=xt.redAdd(xt).redMul(At);return this.curve.jpoint(qt,Vt,Ht)};JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),$t=this.y.redSqr(),xt=this.z.redSqr(),At=$t.redSqr(),kt=e.redAdd(e).redIAdd(e),Bt=kt.redSqr(),jt=this.x.redAdd($t).redSqr().redISub(e).redISub(At);jt=jt.redIAdd(jt),jt=jt.redAdd(jt).redIAdd(jt),jt=jt.redISub(Bt);var Lt=jt.redSqr(),Ut=At.redIAdd(At);Ut=Ut.redIAdd(Ut),Ut=Ut.redIAdd(Ut),Ut=Ut.redIAdd(Ut);var Nt=kt.redIAdd(jt).redSqr().redISub(Bt).redISub(Lt).redISub(Ut),qt=$t.redMul(Nt);qt=qt.redIAdd(qt),qt=qt.redIAdd(qt);var Kt=this.x.redMul(Lt).redISub(qt);Kt=Kt.redIAdd(Kt),Kt=Kt.redIAdd(Kt);var zt=this.y.redMul(Nt.redMul(Ut.redISub(Nt)).redISub(jt.redMul(Lt)));zt=zt.redIAdd(zt),zt=zt.redIAdd(zt),zt=zt.redIAdd(zt);var Vt=this.z.redAdd(jt).redSqr().redISub(xt).redISub(Lt);return this.curve.jpoint(Kt,zt,Vt)};JPoint.prototype.mul=function(e,$t){return e=new BN$8(e,$t),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var $t=this.z.redSqr(),xt=e.z.redSqr();if(this.x.redMul(xt).redISub(e.x.redMul($t)).cmpn(0)!==0)return!1;var At=$t.redMul(this.z),kt=xt.redMul(e.z);return this.y.redMul(kt).redISub(e.y.redMul(At)).cmpn(0)===0};JPoint.prototype.eqXToP=function(e){var $t=this.z.redSqr(),xt=e.toRed(this.curve.red).redMul($t);if(this.x.cmp(xt)===0)return!0;for(var At=e.clone(),kt=this.curve.redN.redMul($t);;){if(At.iadd(this.curve.n),At.cmp(this.curve.p)>=0)return!1;if(xt.redIAdd(kt),this.x.cmp(xt)===0)return!0}};JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$7=bnExports$1,inherits$3=inherits_browserExports,Base$1=base$2,utils$o=utils$s;function MontCurve(_t){Base$1.call(this,"mont",_t),this.a=new BN$7(_t.a,16).toRed(this.red),this.b=new BN$7(_t.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$3(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(e){var $t=e.normalize().x,xt=$t.redSqr(),At=xt.redMul($t).redAdd(xt.redMul(this.a)).redAdd($t),kt=At.redSqrt();return kt.redSqr().cmp(At)===0};function Point$1(_t,e,$t){Base$1.BasePoint.call(this,_t,"projective"),e===null&&$t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(e,16),this.z=new BN$7($t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$3(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(e,$t){return this.point(utils$o.toArray(e,$t),1)};MontCurve.prototype.point=function(e,$t){return new Point$1(this,e,$t)};MontCurve.prototype.pointFromJSON=function(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function(){};Point$1.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function(e,$t){return new Point$1(e,$t[0],$t[1]||e.one)};Point$1.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function(){var e=this.x.redAdd(this.z),$t=e.redSqr(),xt=this.x.redSub(this.z),At=xt.redSqr(),kt=$t.redSub(At),Bt=$t.redMul(At),jt=kt.redMul(At.redAdd(this.curve.a24.redMul(kt)));return this.curve.point(Bt,jt)};Point$1.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function(e,$t){var xt=this.x.redAdd(this.z),At=this.x.redSub(this.z),kt=e.x.redAdd(e.z),Bt=e.x.redSub(e.z),jt=Bt.redMul(xt),Lt=kt.redMul(At),Ut=$t.z.redMul(jt.redAdd(Lt).redSqr()),Nt=$t.x.redMul(jt.redISub(Lt).redSqr());return this.curve.point(Ut,Nt)};Point$1.prototype.mul=function(e){for(var $t=e.clone(),xt=this,At=this.curve.point(null,null),kt=this,Bt=[];$t.cmpn(0)!==0;$t.iushrn(1))Bt.push($t.andln(1));for(var jt=Bt.length-1;jt>=0;jt--)Bt[jt]===0?(xt=xt.diffAdd(At,kt),At=At.dbl()):(At=xt.diffAdd(At,kt),xt=xt.dbl());return At};Point$1.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$n=utils$s,BN$6=bnExports$1,inherits$2=inherits_browserExports,Base=base$2,assert$f=utils$n.assert;function EdwardsCurve(_t){this.twisted=(_t.a|0)!==1,this.mOneA=this.twisted&&(_t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",_t),this.a=new BN$6(_t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(_t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(_t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$f(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(_t.c|0)===1}inherits$2(EdwardsCurve,Base);var edwards$1=EdwardsCurve;EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function(e,$t,xt,At){return this.point(e,$t,xt,At)};EdwardsCurve.prototype.pointFromX=function(e,$t){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var xt=e.redSqr(),At=this.c2.redSub(this.a.redMul(xt)),kt=this.one.redSub(this.c2.redMul(this.d).redMul(xt)),Bt=At.redMul(kt.redInvm()),jt=Bt.redSqrt();if(jt.redSqr().redSub(Bt).cmp(this.zero)!==0)throw new Error("invalid point");var Lt=jt.fromRed().isOdd();return($t&&!Lt||!$t&&Lt)&&(jt=jt.redNeg()),this.point(e,jt)};EdwardsCurve.prototype.pointFromY=function(e,$t){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var xt=e.redSqr(),At=xt.redSub(this.c2),kt=xt.redMul(this.d).redMul(this.c2).redSub(this.a),Bt=At.redMul(kt.redInvm());if(Bt.cmp(this.zero)===0){if($t)throw new Error("invalid point");return this.point(this.zero,e)}var jt=Bt.redSqrt();if(jt.redSqr().redSub(Bt).cmp(this.zero)!==0)throw new Error("invalid point");return jt.fromRed().isOdd()!==$t&&(jt=jt.redNeg()),this.point(jt,e)};EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var $t=e.x.redSqr(),xt=e.y.redSqr(),At=$t.redMul(this.a).redAdd(xt),kt=this.c2.redMul(this.one.redAdd(this.d.redMul($t).redMul(xt)));return At.cmp(kt)===0};function Point(_t,e,$t,xt,At){Base.BasePoint.call(this,_t,"projective"),e===null&&$t===null&&xt===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(e,16),this.y=new BN$6($t,16),this.z=xt?new BN$6(xt,16):this.curve.one,this.t=At&&new BN$6(At,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$2(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function(e,$t,xt,At){return new Point(this,e,$t,xt,At)};Point.fromJSON=function(e,$t){return new Point(e,$t[0],$t[1],$t[2])};Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function(){var e=this.x.redSqr(),$t=this.y.redSqr(),xt=this.z.redSqr();xt=xt.redIAdd(xt);var At=this.curve._mulA(e),kt=this.x.redAdd(this.y).redSqr().redISub(e).redISub($t),Bt=At.redAdd($t),jt=Bt.redSub(xt),Lt=At.redSub($t),Ut=kt.redMul(jt),Nt=Bt.redMul(Lt),qt=kt.redMul(Lt),Kt=jt.redMul(Bt);return this.curve.point(Ut,Nt,Kt,qt)};Point.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),$t=this.x.redSqr(),xt=this.y.redSqr(),At,kt,Bt,jt,Lt,Ut;if(this.curve.twisted){jt=this.curve._mulA($t);var Nt=jt.redAdd(xt);this.zOne?(At=e.redSub($t).redSub(xt).redMul(Nt.redSub(this.curve.two)),kt=Nt.redMul(jt.redSub(xt)),Bt=Nt.redSqr().redSub(Nt).redSub(Nt)):(Lt=this.z.redSqr(),Ut=Nt.redSub(Lt).redISub(Lt),At=e.redSub($t).redISub(xt).redMul(Ut),kt=Nt.redMul(jt.redSub(xt)),Bt=Nt.redMul(Ut))}else jt=$t.redAdd(xt),Lt=this.curve._mulC(this.z).redSqr(),Ut=jt.redSub(Lt).redSub(Lt),At=this.curve._mulC(e.redISub(jt)).redMul(Ut),kt=this.curve._mulC(jt).redMul($t.redISub(xt)),Bt=jt.redMul(Ut);return this.curve.point(At,kt,Bt)};Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function(e){var $t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),xt=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),At=this.t.redMul(this.curve.dd).redMul(e.t),kt=this.z.redMul(e.z.redAdd(e.z)),Bt=xt.redSub($t),jt=kt.redSub(At),Lt=kt.redAdd(At),Ut=xt.redAdd($t),Nt=Bt.redMul(jt),qt=Lt.redMul(Ut),Kt=Bt.redMul(Ut),zt=jt.redMul(Lt);return this.curve.point(Nt,qt,zt,Kt)};Point.prototype._projAdd=function(e){var $t=this.z.redMul(e.z),xt=$t.redSqr(),At=this.x.redMul(e.x),kt=this.y.redMul(e.y),Bt=this.curve.d.redMul(At).redMul(kt),jt=xt.redSub(Bt),Lt=xt.redAdd(Bt),Ut=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(At).redISub(kt),Nt=$t.redMul(jt).redMul(Ut),qt,Kt;return this.curve.twisted?(qt=$t.redMul(Lt).redMul(kt.redSub(this.curve._mulA(At))),Kt=jt.redMul(Lt)):(qt=$t.redMul(Lt).redMul(kt.redSub(At)),Kt=this.curve._mulC(jt).redMul(Lt)),this.curve.point(Nt,qt,Kt)};Point.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function(e,$t,xt){return this.curve._wnafMulAdd(1,[this,$t],[e,xt],2,!1)};Point.prototype.jmulAdd=function(e,$t,xt){return this.curve._wnafMulAdd(1,[this,$t],[e,xt],2,!0)};Point.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function(e){var $t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp($t)===0)return!0;for(var xt=e.clone(),At=this.curve.redN.redMul(this.z);;){if(xt.iadd(this.curve.n),xt.cmp(this.curve.p)>=0)return!1;if($t.redIAdd(At),this.x.cmp($t)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(_t){var e=_t;e.base=base$2,e.short=short,e.mont=mont,e.edwards=edwards$1})(curve$1);var curves$1={},hash$5={},utils$m={},assert$e=minimalisticAssert,inherits$1=inherits_browserExports;utils$m.inherits=inherits$1;function isSurrogatePair(_t,e){return(_t.charCodeAt(e)&64512)!==55296||e<0||e+1>=_t.length?!1:(_t.charCodeAt(e+1)&64512)===56320}function toArray$2(_t,e){if(Array.isArray(_t))return _t.slice();if(!_t)return[];var $t=[];if(typeof _t=="string")if(e){if(e==="hex")for(_t=_t.replace(/[^a-z0-9]+/ig,""),_t.length%2!==0&&(_t="0"+_t),At=0;At<_t.length;At+=2)$t.push(parseInt(_t[At]+_t[At+1],16))}else for(var xt=0,At=0;At<_t.length;At++){var kt=_t.charCodeAt(At);kt<128?$t[xt++]=kt:kt<2048?($t[xt++]=kt>>6|192,$t[xt++]=kt&63|128):isSurrogatePair(_t,At)?(kt=65536+((kt&1023)<<10)+(_t.charCodeAt(++At)&1023),$t[xt++]=kt>>18|240,$t[xt++]=kt>>12&63|128,$t[xt++]=kt>>6&63|128,$t[xt++]=kt&63|128):($t[xt++]=kt>>12|224,$t[xt++]=kt>>6&63|128,$t[xt++]=kt&63|128)}else for(At=0;At<_t.length;At++)$t[At]=_t[At]|0;return $t}utils$m.toArray=toArray$2;function toHex$1(_t){for(var e="",$t=0;$t<_t.length;$t++)e+=zero2(_t[$t].toString(16));return e}utils$m.toHex=toHex$1;function htonl(_t){var e=_t>>>24|_t>>>8&65280|_t<<8&16711680|(_t&255)<<24;return e>>>0}utils$m.htonl=htonl;function toHex32(_t,e){for(var $t="",xt=0;xt<_t.length;xt++){var At=_t[xt];e==="little"&&(At=htonl(At)),$t+=zero8(At.toString(16))}return $t}utils$m.toHex32=toHex32;function zero2(_t){return _t.length===1?"0"+_t:_t}utils$m.zero2=zero2;function zero8(_t){return _t.length===7?"0"+_t:_t.length===6?"00"+_t:_t.length===5?"000"+_t:_t.length===4?"0000"+_t:_t.length===3?"00000"+_t:_t.length===2?"000000"+_t:_t.length===1?"0000000"+_t:_t}utils$m.zero8=zero8;function join32(_t,e,$t,xt){var At=$t-e;assert$e(At%4===0);for(var kt=new Array(At/4),Bt=0,jt=e;Bt<kt.length;Bt++,jt+=4){var Lt;xt==="big"?Lt=_t[jt]<<24|_t[jt+1]<<16|_t[jt+2]<<8|_t[jt+3]:Lt=_t[jt+3]<<24|_t[jt+2]<<16|_t[jt+1]<<8|_t[jt],kt[Bt]=Lt>>>0}return kt}utils$m.join32=join32;function split32(_t,e){for(var $t=new Array(_t.length*4),xt=0,At=0;xt<_t.length;xt++,At+=4){var kt=_t[xt];e==="big"?($t[At]=kt>>>24,$t[At+1]=kt>>>16&255,$t[At+2]=kt>>>8&255,$t[At+3]=kt&255):($t[At+3]=kt>>>24,$t[At+2]=kt>>>16&255,$t[At+1]=kt>>>8&255,$t[At]=kt&255)}return $t}utils$m.split32=split32;function rotr32$1(_t,e){return _t>>>e|_t<<32-e}utils$m.rotr32=rotr32$1;function rotl32$2(_t,e){return _t<<e|_t>>>32-e}utils$m.rotl32=rotl32$2;function sum32$3(_t,e){return _t+e>>>0}utils$m.sum32=sum32$3;function sum32_3$1(_t,e,$t){return _t+e+$t>>>0}utils$m.sum32_3=sum32_3$1;function sum32_4$2(_t,e,$t,xt){return _t+e+$t+xt>>>0}utils$m.sum32_4=sum32_4$2;function sum32_5$2(_t,e,$t,xt,At){return _t+e+$t+xt+At>>>0}utils$m.sum32_5=sum32_5$2;function sum64$1(_t,e,$t,xt){var At=_t[e],kt=_t[e+1],Bt=xt+kt>>>0,jt=(Bt<xt?1:0)+$t+At;_t[e]=jt>>>0,_t[e+1]=Bt}utils$m.sum64=sum64$1;function sum64_hi$1(_t,e,$t,xt){var At=e+xt>>>0,kt=(At<e?1:0)+_t+$t;return kt>>>0}utils$m.sum64_hi=sum64_hi$1;function sum64_lo$1(_t,e,$t,xt){var At=e+xt;return At>>>0}utils$m.sum64_lo=sum64_lo$1;function sum64_4_hi$1(_t,e,$t,xt,At,kt,Bt,jt){var Lt=0,Ut=e;Ut=Ut+xt>>>0,Lt+=Ut<e?1:0,Ut=Ut+kt>>>0,Lt+=Ut<kt?1:0,Ut=Ut+jt>>>0,Lt+=Ut<jt?1:0;var Nt=_t+$t+At+Bt+Lt;return Nt>>>0}utils$m.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(_t,e,$t,xt,At,kt,Bt,jt){var Lt=e+xt+kt+jt;return Lt>>>0}utils$m.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){var Nt=0,qt=e;qt=qt+xt>>>0,Nt+=qt<e?1:0,qt=qt+kt>>>0,Nt+=qt<kt?1:0,qt=qt+jt>>>0,Nt+=qt<jt?1:0,qt=qt+Ut>>>0,Nt+=qt<Ut?1:0;var Kt=_t+$t+At+Bt+Lt+Nt;return Kt>>>0}utils$m.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){var Nt=e+xt+kt+jt+Ut;return Nt>>>0}utils$m.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(_t,e,$t){var xt=e<<32-$t|_t>>>$t;return xt>>>0}utils$m.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(_t,e,$t){var xt=_t<<32-$t|e>>>$t;return xt>>>0}utils$m.rotr64_lo=rotr64_lo$1;function shr64_hi$1(_t,e,$t){return _t>>>$t}utils$m.shr64_hi=shr64_hi$1;function shr64_lo$1(_t,e,$t){var xt=_t<<32-$t|e>>>$t;return xt>>>0}utils$m.shr64_lo=shr64_lo$1;var common$6={},utils$l=utils$m,assert$d=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,$t){if(e=utils$l.toArray(e,$t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var xt=e.length%this._delta8;this.pending=e.slice(e.length-xt,e.length),this.pending.length===0&&(this.pending=null),e=utils$l.join32(e,0,e.length-xt,this.endian);for(var At=0;At<e.length;At+=this._delta32)this._update(e,At,At+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$d(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,$t=this._delta8,xt=$t-(e+this.padLength)%$t,At=new Array(xt+this.padLength);At[0]=128;for(var kt=1;kt<xt;kt++)At[kt]=0;if(e<<=3,this.endian==="big"){for(var Bt=8;Bt<this.padLength;Bt++)At[kt++]=0;At[kt++]=0,At[kt++]=0,At[kt++]=0,At[kt++]=0,At[kt++]=e>>>24&255,At[kt++]=e>>>16&255,At[kt++]=e>>>8&255,At[kt++]=e&255}else for(At[kt++]=e&255,At[kt++]=e>>>8&255,At[kt++]=e>>>16&255,At[kt++]=e>>>24&255,At[kt++]=0,At[kt++]=0,At[kt++]=0,At[kt++]=0,Bt=8;Bt<this.padLength;Bt++)At[kt++]=0;return At};var sha={},common$5={},utils$k=utils$m,rotr32=utils$k.rotr32;function ft_1$1(_t,e,$t,xt){if(_t===0)return ch32$1(e,$t,xt);if(_t===1||_t===3)return p32(e,$t,xt);if(_t===2)return maj32$1(e,$t,xt)}common$5.ft_1=ft_1$1;function ch32$1(_t,e,$t){return _t&e^~_t&$t}common$5.ch32=ch32$1;function maj32$1(_t,e,$t){return _t&e^_t&$t^e&$t}common$5.maj32=maj32$1;function p32(_t,e,$t){return _t^e^$t}common$5.p32=p32;function s0_256$1(_t){return rotr32(_t,2)^rotr32(_t,13)^rotr32(_t,22)}common$5.s0_256=s0_256$1;function s1_256$1(_t){return rotr32(_t,6)^rotr32(_t,11)^rotr32(_t,25)}common$5.s1_256=s1_256$1;function g0_256$1(_t){return rotr32(_t,7)^rotr32(_t,18)^_t>>>3}common$5.g0_256=g0_256$1;function g1_256$1(_t){return rotr32(_t,17)^rotr32(_t,19)^_t>>>10}common$5.g1_256=g1_256$1;var utils$j=utils$m,common$4=common$6,shaCommon$1=common$5,rotl32$1=utils$j.rotl32,sum32$2=utils$j.sum32,sum32_5$1=utils$j.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$4.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$j.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,$t){for(var xt=this.W,At=0;At<16;At++)xt[At]=e[$t+At];for(;At<xt.length;At++)xt[At]=rotl32$1(xt[At-3]^xt[At-8]^xt[At-14]^xt[At-16],1);var kt=this.h[0],Bt=this.h[1],jt=this.h[2],Lt=this.h[3],Ut=this.h[4];for(At=0;At<xt.length;At++){var Nt=~~(At/20),qt=sum32_5$1(rotl32$1(kt,5),ft_1(Nt,Bt,jt,Lt),Ut,xt[At],sha1_K[Nt]);Ut=Lt,Lt=jt,jt=rotl32$1(Bt,30),Bt=kt,kt=qt}this.h[0]=sum32$2(this.h[0],kt),this.h[1]=sum32$2(this.h[1],Bt),this.h[2]=sum32$2(this.h[2],jt),this.h[3]=sum32$2(this.h[3],Lt),this.h[4]=sum32$2(this.h[4],Ut)};SHA1.prototype._digest=function(e){return e==="hex"?utils$j.toHex32(this.h,"big"):utils$j.split32(this.h,"big")};var utils$i=utils$m,common$3=common$6,shaCommon=common$5,assert$c=minimalisticAssert,sum32$1=utils$i.sum32,sum32_4$1=utils$i.sum32_4,sum32_5=utils$i.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$3.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$3(){if(!(this instanceof SHA256$3))return new SHA256$3;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$i.inherits(SHA256$3,BlockHash$2);var _256=SHA256$3;SHA256$3.blockSize=512;SHA256$3.outSize=256;SHA256$3.hmacStrength=192;SHA256$3.padLength=64;SHA256$3.prototype._update=function(e,$t){for(var xt=this.W,At=0;At<16;At++)xt[At]=e[$t+At];for(;At<xt.length;At++)xt[At]=sum32_4$1(g1_256(xt[At-2]),xt[At-7],g0_256(xt[At-15]),xt[At-16]);var kt=this.h[0],Bt=this.h[1],jt=this.h[2],Lt=this.h[3],Ut=this.h[4],Nt=this.h[5],qt=this.h[6],Kt=this.h[7];for(assert$c(this.k.length===xt.length),At=0;At<xt.length;At++){var zt=sum32_5(Kt,s1_256(Ut),ch32(Ut,Nt,qt),this.k[At],xt[At]),Vt=sum32$1(s0_256(kt),maj32(kt,Bt,jt));Kt=qt,qt=Nt,Nt=Ut,Ut=sum32$1(Lt,zt),Lt=jt,jt=Bt,Bt=kt,kt=sum32$1(zt,Vt)}this.h[0]=sum32$1(this.h[0],kt),this.h[1]=sum32$1(this.h[1],Bt),this.h[2]=sum32$1(this.h[2],jt),this.h[3]=sum32$1(this.h[3],Lt),this.h[4]=sum32$1(this.h[4],Ut),this.h[5]=sum32$1(this.h[5],Nt),this.h[6]=sum32$1(this.h[6],qt),this.h[7]=sum32$1(this.h[7],Kt)};SHA256$3.prototype._digest=function(e){return e==="hex"?utils$i.toHex32(this.h,"big"):utils$i.split32(this.h,"big")};var utils$h=utils$m,SHA256$2=_256;function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;SHA256$2.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$h.inherits(SHA224$1,SHA256$2);var _224=SHA224$1;SHA224$1.blockSize=512;SHA224$1.outSize=224;SHA224$1.hmacStrength=192;SHA224$1.padLength=64;SHA224$1.prototype._digest=function(e){return e==="hex"?utils$h.toHex32(this.h.slice(0,7),"big"):utils$h.split32(this.h.slice(0,7),"big")};var utils$g=utils$m,common$2=common$6,assert$b=minimalisticAssert,rotr64_hi=utils$g.rotr64_hi,rotr64_lo=utils$g.rotr64_lo,shr64_hi=utils$g.shr64_hi,shr64_lo=utils$g.shr64_lo,sum64=utils$g.sum64,sum64_hi=utils$g.sum64_hi,sum64_lo=utils$g.sum64_lo,sum64_4_hi=utils$g.sum64_4_hi,sum64_4_lo=utils$g.sum64_4_lo,sum64_5_hi=utils$g.sum64_5_hi,sum64_5_lo=utils$g.sum64_5_lo,BlockHash$1=common$2.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$3(){if(!(this instanceof SHA512$3))return new SHA512$3;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$g.inherits(SHA512$3,BlockHash$1);var _512=SHA512$3;SHA512$3.blockSize=1024;SHA512$3.outSize=512;SHA512$3.hmacStrength=192;SHA512$3.padLength=128;SHA512$3.prototype._prepareBlock=function(e,$t){for(var xt=this.W,At=0;At<32;At++)xt[At]=e[$t+At];for(;At<xt.length;At+=2){var kt=g1_512_hi(xt[At-4],xt[At-3]),Bt=g1_512_lo(xt[At-4],xt[At-3]),jt=xt[At-14],Lt=xt[At-13],Ut=g0_512_hi(xt[At-30],xt[At-29]),Nt=g0_512_lo(xt[At-30],xt[At-29]),qt=xt[At-32],Kt=xt[At-31];xt[At]=sum64_4_hi(kt,Bt,jt,Lt,Ut,Nt,qt,Kt),xt[At+1]=sum64_4_lo(kt,Bt,jt,Lt,Ut,Nt,qt,Kt)}};SHA512$3.prototype._update=function(e,$t){this._prepareBlock(e,$t);var xt=this.W,At=this.h[0],kt=this.h[1],Bt=this.h[2],jt=this.h[3],Lt=this.h[4],Ut=this.h[5],Nt=this.h[6],qt=this.h[7],Kt=this.h[8],zt=this.h[9],Vt=this.h[10],Ht=this.h[11],Jt=this.h[12],rr=this.h[13],Qt=this.h[14],Wt=this.h[15];assert$b(this.k.length===xt.length);for(var nr=0;nr<xt.length;nr+=2){var yr=Qt,vr=Wt,Ir=s1_512_hi(Kt,zt),xr=s1_512_lo(Kt,zt),Or=ch64_hi(Kt,zt,Vt,Ht,Jt),Nr=ch64_lo(Kt,zt,Vt,Ht,Jt,rr),kr=this.k[nr],lr=this.k[nr+1],ir=xt[nr],Xt=xt[nr+1],er=sum64_5_hi(yr,vr,Ir,xr,Or,Nr,kr,lr,ir,Xt),pr=sum64_5_lo(yr,vr,Ir,xr,Or,Nr,kr,lr,ir,Xt);yr=s0_512_hi(At,kt),vr=s0_512_lo(At,kt),Ir=maj64_hi(At,kt,Bt,jt,Lt),xr=maj64_lo(At,kt,Bt,jt,Lt,Ut);var ur=sum64_hi(yr,vr,Ir,xr),gr=sum64_lo(yr,vr,Ir,xr);Qt=Jt,Wt=rr,Jt=Vt,rr=Ht,Vt=Kt,Ht=zt,Kt=sum64_hi(Nt,qt,er,pr),zt=sum64_lo(qt,qt,er,pr),Nt=Lt,qt=Ut,Lt=Bt,Ut=jt,Bt=At,jt=kt,At=sum64_hi(er,pr,ur,gr),kt=sum64_lo(er,pr,ur,gr)}sum64(this.h,0,At,kt),sum64(this.h,2,Bt,jt),sum64(this.h,4,Lt,Ut),sum64(this.h,6,Nt,qt),sum64(this.h,8,Kt,zt),sum64(this.h,10,Vt,Ht),sum64(this.h,12,Jt,rr),sum64(this.h,14,Qt,Wt)};SHA512$3.prototype._digest=function(e){return e==="hex"?utils$g.toHex32(this.h,"big"):utils$g.split32(this.h,"big")};function ch64_hi(_t,e,$t,xt,At){var kt=_t&$t^~_t&At;return kt<0&&(kt+=4294967296),kt}function ch64_lo(_t,e,$t,xt,At,kt){var Bt=e&xt^~e&kt;return Bt<0&&(Bt+=4294967296),Bt}function maj64_hi(_t,e,$t,xt,At){var kt=_t&$t^_t&At^$t&At;return kt<0&&(kt+=4294967296),kt}function maj64_lo(_t,e,$t,xt,At,kt){var Bt=e&xt^e&kt^xt&kt;return Bt<0&&(Bt+=4294967296),Bt}function s0_512_hi(_t,e){var $t=rotr64_hi(_t,e,28),xt=rotr64_hi(e,_t,2),At=rotr64_hi(e,_t,7),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function s0_512_lo(_t,e){var $t=rotr64_lo(_t,e,28),xt=rotr64_lo(e,_t,2),At=rotr64_lo(e,_t,7),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function s1_512_hi(_t,e){var $t=rotr64_hi(_t,e,14),xt=rotr64_hi(_t,e,18),At=rotr64_hi(e,_t,9),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function s1_512_lo(_t,e){var $t=rotr64_lo(_t,e,14),xt=rotr64_lo(_t,e,18),At=rotr64_lo(e,_t,9),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function g0_512_hi(_t,e){var $t=rotr64_hi(_t,e,1),xt=rotr64_hi(_t,e,8),At=shr64_hi(_t,e,7),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function g0_512_lo(_t,e){var $t=rotr64_lo(_t,e,1),xt=rotr64_lo(_t,e,8),At=shr64_lo(_t,e,7),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function g1_512_hi(_t,e){var $t=rotr64_hi(_t,e,19),xt=rotr64_hi(e,_t,29),At=shr64_hi(_t,e,6),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}function g1_512_lo(_t,e){var $t=rotr64_lo(_t,e,19),xt=rotr64_lo(e,_t,29),At=shr64_lo(_t,e,6),kt=$t^xt^At;return kt<0&&(kt+=4294967296),kt}var utils$f=utils$m,SHA512$2=_512;function SHA384$1(){if(!(this instanceof SHA384$1))return new SHA384$1;SHA512$2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$f.inherits(SHA384$1,SHA512$2);var _384=SHA384$1;SHA384$1.blockSize=1024;SHA384$1.outSize=384;SHA384$1.hmacStrength=192;SHA384$1.padLength=128;SHA384$1.prototype._digest=function(e){return e==="hex"?utils$f.toHex32(this.h.slice(0,12),"big"):utils$f.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$e=utils$m,common$1=common$6,rotl32=utils$e.rotl32,sum32=utils$e.sum32,sum32_3=utils$e.sum32_3,sum32_4=utils$e.sum32_4,BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$e.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,$t){for(var xt=this.h[0],At=this.h[1],kt=this.h[2],Bt=this.h[3],jt=this.h[4],Lt=xt,Ut=At,Nt=kt,qt=Bt,Kt=jt,zt=0;zt<80;zt++){var Vt=sum32(rotl32(sum32_4(xt,f$1(zt,At,kt,Bt),e[r$1[zt]+$t],K$1(zt)),s$1[zt]),jt);xt=jt,jt=Bt,Bt=rotl32(kt,10),kt=At,At=Vt,Vt=sum32(rotl32(sum32_4(Lt,f$1(79-zt,Ut,Nt,qt),e[rh[zt]+$t],Kh(zt)),sh[zt]),Kt),Lt=Kt,Kt=qt,qt=rotl32(Nt,10),Nt=Ut,Ut=Vt}Vt=sum32_3(this.h[1],kt,qt),this.h[1]=sum32_3(this.h[2],Bt,Kt),this.h[2]=sum32_3(this.h[3],jt,Lt),this.h[3]=sum32_3(this.h[4],xt,Ut),this.h[4]=sum32_3(this.h[0],At,Nt),this.h[0]=Vt};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$e.toHex32(this.h,"little"):utils$e.split32(this.h,"little")};function f$1(_t,e,$t,xt){return _t<=15?e^$t^xt:_t<=31?e&$t|~e&xt:_t<=47?(e|~$t)^xt:_t<=63?e&xt|$t&~xt:e^($t|~xt)}function K$1(_t){return _t<=15?0:_t<=31?1518500249:_t<=47?1859775393:_t<=63?2400959708:2840853838}function Kh(_t){return _t<=15?1352829926:_t<=31?1548603684:_t<=47?1836072691:_t<=63?2053994217:0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$d=utils$m,assert$a=minimalisticAssert;function Hmac(_t,e,$t){if(!(this instanceof Hmac))return new Hmac(_t,e,$t);this.Hash=_t,this.blockSize=_t.blockSize/8,this.outSize=_t.outSize/8,this.inner=null,this.outer=null,this._init(utils$d.toArray(e,$t))}var hmac$2=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$a(e.length<=this.blockSize);for(var $t=e.length;$t<this.blockSize;$t++)e.push(0);for($t=0;$t<e.length;$t++)e[$t]^=54;for(this.inner=new this.Hash().update(e),$t=0;$t<e.length;$t++)e[$t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,$t){return this.inner.update(e,$t),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(_t){var e=_t;e.utils=utils$m,e.common=common$6,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac$2,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$5);var secp256k1$2,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$2}(function(_t){var e=_t,$t=hash$5,xt=curve$1,At=utils$s,kt=At.assert;function Bt(Ut){Ut.type==="short"?this.curve=new xt.short(Ut):Ut.type==="edwards"?this.curve=new xt.edwards(Ut):this.curve=new xt.mont(Ut),this.g=this.curve.g,this.n=this.curve.n,this.hash=Ut.hash,kt(this.g.validate(),"Invalid curve"),kt(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=Bt;function jt(Ut,Nt){Object.defineProperty(e,Ut,{configurable:!0,enumerable:!0,get:function(){var qt=new Bt(Nt);return Object.defineProperty(e,Ut,{configurable:!0,enumerable:!0,value:qt}),qt}})}jt("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:$t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),jt("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:$t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),jt("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:$t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),jt("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:$t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),jt("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:$t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),jt("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$t.sha256,gRed:!1,g:["9"]}),jt("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:$t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Lt;try{Lt=requireSecp256k1()}catch{Lt=void 0}jt("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:$t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Lt]})})(curves$1);var hash$4=hash$5,utils$c=utils$r,assert$9=minimalisticAssert;function HmacDRBG(_t){if(!(this instanceof HmacDRBG))return new HmacDRBG(_t);this.hash=_t.hash,this.predResist=!!_t.predResist,this.outLen=this.hash.outSize,this.minEntropy=_t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$c.toArray(_t.entropy,_t.entropyEnc||"hex"),$t=utils$c.toArray(_t.nonce,_t.nonceEnc||"hex"),xt=utils$c.toArray(_t.pers,_t.persEnc||"hex");assert$9(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,$t,xt)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function(e,$t,xt){var At=e.concat($t).concat(xt);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var kt=0;kt<this.V.length;kt++)this.K[kt]=0,this.V[kt]=1;this._update(At),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function(){return new hash$4.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function(e){var $t=this._hmac().update(this.V).update([0]);e&&($t=$t.update(e)),this.K=$t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function(e,$t,xt,At){typeof $t!="string"&&(At=xt,xt=$t,$t=null),e=utils$c.toArray(e,$t),xt=utils$c.toArray(xt,At),assert$9(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(xt||[])),this._reseed=1};HmacDRBG.prototype.generate=function(e,$t,xt,At){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof $t!="string"&&(At=xt,xt=$t,$t=null),xt&&(xt=utils$c.toArray(xt,At||"hex"),this._update(xt));for(var kt=[];kt.length<e;)this.V=this._hmac().update(this.V).digest(),kt=kt.concat(this.V);var Bt=kt.slice(0,e);return this._update(xt),this._reseed++,utils$c.encode(Bt,$t)};var BN$5=bnExports$1,utils$b=utils$s,assert$8=utils$b.assert;function KeyPair$2(_t,e){this.ec=_t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$2;KeyPair$2.fromPublic=function(e,$t,xt){return $t instanceof KeyPair$2?$t:new KeyPair$2(e,{pub:$t,pubEnc:xt})};KeyPair$2.fromPrivate=function(e,$t,xt){return $t instanceof KeyPair$2?$t:new KeyPair$2(e,{priv:$t,privEnc:xt})};KeyPair$2.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$2.prototype.getPublic=function(e,$t){return typeof e=="string"&&($t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),$t?this.pub.encode($t,e):this.pub};KeyPair$2.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$2.prototype._importPrivate=function(e,$t){this.priv=new BN$5(e,$t||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$2.prototype._importPublic=function(e,$t){if(e.x||e.y){this.ec.curve.type==="mont"?assert$8(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$8(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,$t)};KeyPair$2.prototype.derive=function(e){return e.validate()||assert$8(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$2.prototype.sign=function(e,$t,xt){return this.ec.sign(e,this,$t,xt)};KeyPair$2.prototype.verify=function(e,$t){return this.ec.verify(e,$t,this)};KeyPair$2.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$1,utils$a=utils$s,assert$7=utils$a.assert;function Signature$2(_t,e){if(_t instanceof Signature$2)return _t;this._importDER(_t,e)||(assert$7(_t.r&&_t.s,"Signature without r or s"),this.r=new BN$4(_t.r,16),this.s=new BN$4(_t.s,16),_t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=_t.recoveryParam)}var signature$1=Signature$2;function Position(){this.place=0}function getLength(_t,e){var $t=_t[e.place++];if(!($t&128))return $t;var xt=$t&15;if(xt===0||xt>4||_t[e.place]===0)return!1;for(var At=0,kt=0,Bt=e.place;kt<xt;kt++,Bt++)At<<=8,At|=_t[Bt],At>>>=0;return At<=127?!1:(e.place=Bt,At)}function rmPadding(_t){for(var e=0,$t=_t.length-1;!_t[e]&&!(_t[e+1]&128)&&e<$t;)e++;return e===0?_t:_t.slice(e)}Signature$2.prototype._importDER=function(e,$t){e=utils$a.toArray(e,$t);var xt=new Position;if(e[xt.place++]!==48)return!1;var At=getLength(e,xt);if(At===!1||At+xt.place!==e.length||e[xt.place++]!==2)return!1;var kt=getLength(e,xt);if(kt===!1||e[xt.place]&128)return!1;var Bt=e.slice(xt.place,kt+xt.place);if(xt.place+=kt,e[xt.place++]!==2)return!1;var jt=getLength(e,xt);if(jt===!1||e.length!==jt+xt.place||e[xt.place]&128)return!1;var Lt=e.slice(xt.place,jt+xt.place);if(Bt[0]===0)if(Bt[1]&128)Bt=Bt.slice(1);else return!1;if(Lt[0]===0)if(Lt[1]&128)Lt=Lt.slice(1);else return!1;return this.r=new BN$4(Bt),this.s=new BN$4(Lt),this.recoveryParam=null,!0};function constructLength(_t,e){if(e<128){_t.push(e);return}var $t=1+(Math.log(e)/Math.LN2>>>3);for(_t.push($t|128);--$t;)_t.push(e>>>($t<<3)&255);_t.push(e)}Signature$2.prototype.toDER=function(e){var $t=this.r.toArray(),xt=this.s.toArray();for($t[0]&128&&($t=[0].concat($t)),xt[0]&128&&(xt=[0].concat(xt)),$t=rmPadding($t),xt=rmPadding(xt);!xt[0]&&!(xt[1]&128);)xt=xt.slice(1);var At=[2];constructLength(At,$t.length),At=At.concat($t),At.push(2),constructLength(At,xt.length);var kt=At.concat(xt),Bt=[48];return constructLength(Bt,kt.length),Bt=Bt.concat(kt),utils$a.encode(Bt,e)};var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var _t=bnExports$1,e=hmacDrbg,$t=utils$s,xt=curves$1,At=requireBrorand(),kt=$t.assert,Bt=key$1,jt=signature$1;function Lt(Ut){if(!(this instanceof Lt))return new Lt(Ut);typeof Ut=="string"&&(kt(Object.prototype.hasOwnProperty.call(xt,Ut),"Unknown curve "+Ut),Ut=xt[Ut]),Ut instanceof xt.PresetCurve&&(Ut={curve:Ut}),this.curve=Ut.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=Ut.curve.g,this.g.precompute(Ut.curve.n.bitLength()+1),this.hash=Ut.hash||Ut.curve.hash}return ec=Lt,Lt.prototype.keyPair=function(Nt){return new Bt(this,Nt)},Lt.prototype.keyFromPrivate=function(Nt,qt){return Bt.fromPrivate(this,Nt,qt)},Lt.prototype.keyFromPublic=function(Nt,qt){return Bt.fromPublic(this,Nt,qt)},Lt.prototype.genKeyPair=function(Nt){Nt||(Nt={});for(var qt=new e({hash:this.hash,pers:Nt.pers,persEnc:Nt.persEnc||"utf8",entropy:Nt.entropy||At(this.hash.hmacStrength),entropyEnc:Nt.entropy&&Nt.entropyEnc||"utf8",nonce:this.n.toArray()}),Kt=this.n.byteLength(),zt=this.n.sub(new _t(2));;){var Vt=new _t(qt.generate(Kt));if(!(Vt.cmp(zt)>0))return Vt.iaddn(1),this.keyFromPrivate(Vt)}},Lt.prototype._truncateToN=function(Nt,qt){var Kt=Nt.byteLength()*8-this.n.bitLength();return Kt>0&&(Nt=Nt.ushrn(Kt)),!qt&&Nt.cmp(this.n)>=0?Nt.sub(this.n):Nt},Lt.prototype.sign=function(Nt,qt,Kt,zt){typeof Kt=="object"&&(zt=Kt,Kt=null),zt||(zt={}),qt=this.keyFromPrivate(qt,Kt),Nt=this._truncateToN(new _t(Nt,16));for(var Vt=this.n.byteLength(),Ht=qt.getPrivate().toArray("be",Vt),Jt=Nt.toArray("be",Vt),rr=new e({hash:this.hash,entropy:Ht,nonce:Jt,pers:zt.pers,persEnc:zt.persEnc||"utf8"}),Qt=this.n.sub(new _t(1)),Wt=0;;Wt++){var nr=zt.k?zt.k(Wt):new _t(rr.generate(this.n.byteLength()));if(nr=this._truncateToN(nr,!0),!(nr.cmpn(1)<=0||nr.cmp(Qt)>=0)){var yr=this.g.mul(nr);if(!yr.isInfinity()){var vr=yr.getX(),Ir=vr.umod(this.n);if(Ir.cmpn(0)!==0){var xr=nr.invm(this.n).mul(Ir.mul(qt.getPrivate()).iadd(Nt));if(xr=xr.umod(this.n),xr.cmpn(0)!==0){var Or=(yr.getY().isOdd()?1:0)|(vr.cmp(Ir)!==0?2:0);return zt.canonical&&xr.cmp(this.nh)>0&&(xr=this.n.sub(xr),Or^=1),new jt({r:Ir,s:xr,recoveryParam:Or})}}}}}},Lt.prototype.verify=function(Nt,qt,Kt,zt){Nt=this._truncateToN(new _t(Nt,16)),Kt=this.keyFromPublic(Kt,zt),qt=new jt(qt,"hex");var Vt=qt.r,Ht=qt.s;if(Vt.cmpn(1)<0||Vt.cmp(this.n)>=0||Ht.cmpn(1)<0||Ht.cmp(this.n)>=0)return!1;var Jt=Ht.invm(this.n),rr=Jt.mul(Nt).umod(this.n),Qt=Jt.mul(Vt).umod(this.n),Wt;return this.curve._maxwellTrick?(Wt=this.g.jmulAdd(rr,Kt.getPublic(),Qt),Wt.isInfinity()?!1:Wt.eqXToP(Vt)):(Wt=this.g.mulAdd(rr,Kt.getPublic(),Qt),Wt.isInfinity()?!1:Wt.getX().umod(this.n).cmp(Vt)===0)},Lt.prototype.recoverPubKey=function(Ut,Nt,qt,Kt){kt((3&qt)===qt,"The recovery param is more than two bits"),Nt=new jt(Nt,Kt);var zt=this.n,Vt=new _t(Ut),Ht=Nt.r,Jt=Nt.s,rr=qt&1,Qt=qt>>1;if(Ht.cmp(this.curve.p.umod(this.curve.n))>=0&&Qt)throw new Error("Unable to find sencond key candinate");Qt?Ht=this.curve.pointFromX(Ht.add(this.curve.n),rr):Ht=this.curve.pointFromX(Ht,rr);var Wt=Nt.r.invm(zt),nr=zt.sub(Vt).mul(Wt).umod(zt),yr=Jt.mul(Wt).umod(zt);return this.g.mulAdd(nr,Ht,yr)},Lt.prototype.getKeyRecoveryParam=function(Ut,Nt,qt,Kt){if(Nt=new jt(Nt,Kt),Nt.recoveryParam!==null)return Nt.recoveryParam;for(var zt=0;zt<4;zt++){var Vt;try{Vt=this.recoverPubKey(Ut,Nt,zt)}catch{continue}if(Vt.eq(qt))return zt}throw new Error("Unable to find valid recovery factor")},ec}var utils$9=utils$s,assert$6=utils$9.assert,parseBytes$2=utils$9.parseBytes,cachedProperty$1=utils$9.cachedProperty;function KeyPair$1(_t,e){this.eddsa=_t,this._secret=parseBytes$2(e.secret),_t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function(e,$t){return $t instanceof KeyPair$1?$t:new KeyPair$1(e,{pub:$t})};KeyPair$1.fromSecret=function(e,$t){return $t instanceof KeyPair$1?$t:new KeyPair$1(e,{secret:$t})};KeyPair$1.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function(){var e=this.eddsa,$t=this.hash(),xt=e.encodingLength-1,At=$t.slice(0,e.encodingLength);return At[0]&=248,At[xt]&=127,At[xt]|=64,At});cachedProperty$1(KeyPair$1,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function(e){return assert$6(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function(e,$t){return this.eddsa.verify(e,$t,this)};KeyPair$1.prototype.getSecret=function(e){return assert$6(this._secret,"KeyPair is public only"),utils$9.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function(e){return utils$9.encode(this.pubBytes(),e)};var key=KeyPair$1,BN$3=bnExports$1,utils$8=utils$s,assert$5=utils$8.assert,cachedProperty=utils$8.cachedProperty,parseBytes$1=utils$8.parseBytes;function Signature$1(_t,e){this.eddsa=_t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(assert$5(e.length===_t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,_t.encodingLength),S:e.slice(_t.encodingLength)}),assert$5(e.R&&e.S,"Signature without R or S"),_t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$3&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function(){return utils$8.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash$3=hash$5,curves=curves$1,utils$7=utils$s,assert$4=utils$7.assert,parseBytes=utils$7.parseBytes,KeyPair=key,Signature=signature;function EDDSA(_t){if(assert$4(_t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(_t);_t=curves[_t].curve,this.curve=_t,this.g=_t.g,this.g.precompute(_t.n.bitLength()+1),this.pointClass=_t.point().constructor,this.encodingLength=Math.ceil(_t.n.bitLength()/8),this.hash=hash$3.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,$t){e=parseBytes(e);var xt=this.keyFromSecret($t),At=this.hashInt(xt.messagePrefix(),e),kt=this.g.mul(At),Bt=this.encodePoint(kt),jt=this.hashInt(Bt,xt.pubBytes(),e).mul(xt.priv()),Lt=At.add(jt).umod(this.curve.n);return this.makeSignature({R:kt,S:Lt,Rencoded:Bt})};EDDSA.prototype.verify=function(e,$t,xt){if(e=parseBytes(e),$t=this.makeSignature($t),$t.S().gte($t.eddsa.curve.n)||$t.S().isNeg())return!1;var At=this.keyFromPublic(xt),kt=this.hashInt($t.Rencoded(),At.pubBytes(),e),Bt=this.g.mul($t.S()),jt=$t.R().add(At.pub().mul(kt));return jt.eq(Bt)};EDDSA.prototype.hashInt=function(){for(var e=this.hash(),$t=0;$t<arguments.length;$t++)e.update(arguments[$t]);return utils$7.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function(e){var $t=e.getY().toArray("le",this.encodingLength);return $t[this.encodingLength-1]|=e.getX().isOdd()?128:0,$t};EDDSA.prototype.decodePoint=function(e){e=utils$7.parseBytes(e);var $t=e.length-1,xt=e.slice(0,$t).concat(e[$t]&-129),At=(e[$t]&128)!==0,kt=utils$7.intFromLE(xt);return this.curve.pointFromY(kt,At)};EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(e){return utils$7.intFromLE(e)};EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(_t){var e=_t;e.version=require$$0$3.version,e.utils=utils$s,e.rand=requireBrorand(),e.curve=curve$1,e.curves=curves$1,e.ec=requireEc(),e.eddsa=eddsa}(elliptic$1)),elliptic$1}var asn1$3={},asn1$2={},api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(_t,e){if(_t.indexOf)return _t.indexOf(e);for(var $t=0;$t<_t.length;$t++)if(_t[$t]===e)return $t;return-1},Object_keys=function(_t){if(Object.keys)return Object.keys(_t);var e=[];for(var $t in _t)e.push($t);return e},forEach=function(_t,e){if(_t.forEach)return _t.forEach(e);for(var $t=0;$t<_t.length;$t++)e(_t[$t],$t,_t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(_t,e,$t){Object.defineProperty(_t,e,{writable:!0,enumerable:!1,configurable:!0,value:$t})}}catch{return function(e,$t,xt){e[$t]=xt}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(_t){if(!(_t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var $t=e.contentWindow,xt=$t.eval,At=$t.execScript;!xt&&At&&(At.call($t,"null"),xt=$t.eval),forEach(Object_keys(_t),function(jt){$t[jt]=_t[jt]}),forEach(globals,function(jt){_t[jt]&&($t[jt]=_t[jt])});var kt=Object_keys($t),Bt=xt.call($t,this.code);return forEach(Object_keys($t),function(jt){(jt in _t||indexOf(kt,jt)===-1)&&(_t[jt]=$t[jt])}),forEach(globals,function(jt){jt in _t||defineProp(_t,jt,$t[jt])}),document.body.removeChild(e),Bt},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(_t){var e=Script.createContext(_t),$t=this.runInContext(e);return _t&&forEach(Object_keys(e),function(xt){_t[xt]=e[xt]}),$t},forEach(Object_keys(Script.prototype),function(_t){exports[_t]=Script[_t]=function(e){var $t=Script(e);return $t[_t].apply($t,[].slice.call(arguments,1))}}),exports.isContext=function(_t){return _t instanceof Context},exports.createScript=function(_t){return exports.Script(_t)},exports.createContext=Script.createContext=function(_t){var e=new Context;return typeof _t=="object"&&forEach(Object_keys(_t),function($t){e[$t]=_t[$t]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(_t){var e=requireAsn1(),$t=inherits_browserExports,xt=_t;xt.define=function(Bt,jt){return new At(Bt,jt)};function At(kt,Bt){this.name=kt,this.body=Bt,this.decoders={},this.encoders={}}At.prototype._createNamed=function(Bt){var jt;try{jt=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{jt=function(Ut){this._initNamed(Ut)}}return $t(jt,Bt),jt.prototype._initNamed=function(Ut){Bt.call(this,Ut)},new jt(this)},At.prototype._getDecoder=function(Bt){return Bt=Bt||"der",this.decoders.hasOwnProperty(Bt)||(this.decoders[Bt]=this._createNamed(e.decoders[Bt])),this.decoders[Bt]},At.prototype.decode=function(Bt,jt,Lt){return this._getDecoder(jt).decode(Bt,Lt)},At.prototype._getEncoder=function(Bt){return Bt=Bt||"der",this.encoders.hasOwnProperty(Bt)||(this.encoders[Bt]=this._createNamed(e.encoders[Bt])),this.encoders[Bt]},At.prototype.encode=function(Bt,jt,Lt){return this._getEncoder(jt).encode(Bt,Lt)}}(api)),api}var base$1={},reporter={},inherits=inherits_browserExports;function Reporter(_t){this._reporterState={obj:null,path:[],options:_t||{},errors:[]}}reporter.Reporter=Reporter;Reporter.prototype.isError=function _t(e){return e instanceof ReporterError};Reporter.prototype.save=function _t(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter.prototype.restore=function _t(e){var $t=this._reporterState;$t.obj=e.obj,$t.path=$t.path.slice(0,e.pathLen)};Reporter.prototype.enterKey=function _t(e){return this._reporterState.path.push(e)};Reporter.prototype.exitKey=function _t(e){var $t=this._reporterState;$t.path=$t.path.slice(0,e-1)};Reporter.prototype.leaveKey=function _t(e,$t,xt){var At=this._reporterState;this.exitKey(e),At.obj!==null&&(At.obj[$t]=xt)};Reporter.prototype.path=function _t(){return this._reporterState.path.join("/")};Reporter.prototype.enterObject=function _t(){var e=this._reporterState,$t=e.obj;return e.obj={},$t};Reporter.prototype.leaveObject=function _t(e){var $t=this._reporterState,xt=$t.obj;return $t.obj=e,xt};Reporter.prototype.error=function _t(e){var $t,xt=this._reporterState,At=e instanceof ReporterError;if(At?$t=e:$t=new ReporterError(xt.path.map(function(kt){return"["+JSON.stringify(kt)+"]"}).join(""),e.message||e,e.stack),!xt.options.partial)throw $t;return At||xt.errors.push($t),$t};Reporter.prototype.wrapResult=function _t(e){var $t=this._reporterState;return $t.options.partial?{result:this.isError(e)?null:e,errors:$t.errors}:e};function ReporterError(_t,e){this.path=_t,this.rethrow(e)}inherits(ReporterError,Error);ReporterError.prototype.rethrow=function _t(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch($t){this.stack=$t.stack}return this};var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var _t=inherits_browserExports,e=requireBase().Reporter,$t=buffer$2.Buffer;function xt(kt,Bt){if(e.call(this,Bt),!$t.isBuffer(kt)){this.error("Input not Buffer");return}this.base=kt,this.offset=0,this.length=kt.length}_t(xt,e),buffer.DecoderBuffer=xt,xt.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},xt.prototype.restore=function(Bt){var jt=new xt(this.base);return jt.offset=Bt.offset,jt.length=this.offset,this.offset=Bt.offset,e.prototype.restore.call(this,Bt.reporter),jt},xt.prototype.isEmpty=function(){return this.offset===this.length},xt.prototype.readUInt8=function(Bt){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(Bt||"DecoderBuffer overrun")},xt.prototype.skip=function(Bt,jt){if(!(this.offset+Bt<=this.length))return this.error(jt||"DecoderBuffer overrun");var Lt=new xt(this.base);return Lt._reporterState=this._reporterState,Lt.offset=this.offset,Lt.length=this.offset+Bt,this.offset+=Bt,Lt},xt.prototype.raw=function(Bt){return this.base.slice(Bt?Bt.offset:this.offset,this.length)};function At(kt,Bt){if(Array.isArray(kt))this.length=0,this.value=kt.map(function(jt){return jt instanceof At||(jt=new At(jt,Bt)),this.length+=jt.length,jt},this);else if(typeof kt=="number"){if(!(0<=kt&&kt<=255))return Bt.error("non-byte EncoderBuffer value");this.value=kt,this.length=1}else if(typeof kt=="string")this.value=kt,this.length=$t.byteLength(kt);else if($t.isBuffer(kt))this.value=kt,this.length=kt.length;else return Bt.error("Unsupported type: "+typeof kt)}return buffer.EncoderBuffer=At,At.prototype.join=function(Bt,jt){return Bt||(Bt=new $t(this.length)),jt||(jt=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(Lt){Lt.join(Bt,jt),jt+=Lt.length}):(typeof this.value=="number"?Bt[jt]=this.value:typeof this.value=="string"?Bt.write(this.value,jt):$t.isBuffer(this.value)&&this.value.copy(Bt,jt),jt+=this.length)),Bt},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var _t=requireBase().Reporter,e=requireBase().EncoderBuffer,$t=requireBase().DecoderBuffer,xt=minimalisticAssert,At=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],kt=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(At),Bt=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function jt(Ut,Nt){var qt={};this._baseState=qt,qt.enc=Ut,qt.parent=Nt||null,qt.children=null,qt.tag=null,qt.args=null,qt.reverseArgs=null,qt.choice=null,qt.optional=!1,qt.any=!1,qt.obj=!1,qt.use=null,qt.useDecoder=null,qt.key=null,qt.default=null,qt.explicit=null,qt.implicit=null,qt.contains=null,qt.parent||(qt.children=[],this._wrap())}node=jt;var Lt=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return jt.prototype.clone=function(){var Nt=this._baseState,qt={};Lt.forEach(function(zt){qt[zt]=Nt[zt]});var Kt=new this.constructor(qt.parent);return Kt._baseState=qt,Kt},jt.prototype._wrap=function(){var Nt=this._baseState;kt.forEach(function(qt){this[qt]=function(){var zt=new this.constructor(this);return Nt.children.push(zt),zt[qt].apply(zt,arguments)}},this)},jt.prototype._init=function(Nt){var qt=this._baseState;xt(qt.parent===null),Nt.call(this),qt.children=qt.children.filter(function(Kt){return Kt._baseState.parent===this},this),xt.equal(qt.children.length,1,"Root node can have only one child")},jt.prototype._useArgs=function(Nt){var qt=this._baseState,Kt=Nt.filter(function(zt){return zt instanceof this.constructor},this);Nt=Nt.filter(function(zt){return!(zt instanceof this.constructor)},this),Kt.length!==0&&(xt(qt.children===null),qt.children=Kt,Kt.forEach(function(zt){zt._baseState.parent=this},this)),Nt.length!==0&&(xt(qt.args===null),qt.args=Nt,qt.reverseArgs=Nt.map(function(zt){if(typeof zt!="object"||zt.constructor!==Object)return zt;var Vt={};return Object.keys(zt).forEach(function(Ht){Ht==(Ht|0)&&(Ht|=0);var Jt=zt[Ht];Vt[Jt]=Ht}),Vt}))},Bt.forEach(function(Ut){jt.prototype[Ut]=function(){var qt=this._baseState;throw new Error(Ut+" not implemented for encoding: "+qt.enc)}}),At.forEach(function(Ut){jt.prototype[Ut]=function(){var qt=this._baseState,Kt=Array.prototype.slice.call(arguments);return xt(qt.tag===null),qt.tag=Ut,this._useArgs(Kt),this}}),jt.prototype.use=function(Nt){xt(Nt);var qt=this._baseState;return xt(qt.use===null),qt.use=Nt,this},jt.prototype.optional=function(){var Nt=this._baseState;return Nt.optional=!0,this},jt.prototype.def=function(Nt){var qt=this._baseState;return xt(qt.default===null),qt.default=Nt,qt.optional=!0,this},jt.prototype.explicit=function(Nt){var qt=this._baseState;return xt(qt.explicit===null&&qt.implicit===null),qt.explicit=Nt,this},jt.prototype.implicit=function(Nt){var qt=this._baseState;return xt(qt.explicit===null&&qt.implicit===null),qt.implicit=Nt,this},jt.prototype.obj=function(){var Nt=this._baseState,qt=Array.prototype.slice.call(arguments);return Nt.obj=!0,qt.length!==0&&this._useArgs(qt),this},jt.prototype.key=function(Nt){var qt=this._baseState;return xt(qt.key===null),qt.key=Nt,this},jt.prototype.any=function(){var Nt=this._baseState;return Nt.any=!0,this},jt.prototype.choice=function(Nt){var qt=this._baseState;return xt(qt.choice===null),qt.choice=Nt,this._useArgs(Object.keys(Nt).map(function(Kt){return Nt[Kt]})),this},jt.prototype.contains=function(Nt){var qt=this._baseState;return xt(qt.use===null),qt.contains=Nt,this},jt.prototype._decode=function(Nt,qt){var Kt=this._baseState;if(Kt.parent===null)return Nt.wrapResult(Kt.children[0]._decode(Nt,qt));var zt=Kt.default,Vt=!0,Ht=null;if(Kt.key!==null&&(Ht=Nt.enterKey(Kt.key)),Kt.optional){var Jt=null;if(Kt.explicit!==null?Jt=Kt.explicit:Kt.implicit!==null?Jt=Kt.implicit:Kt.tag!==null&&(Jt=Kt.tag),Jt===null&&!Kt.any){var rr=Nt.save();try{Kt.choice===null?this._decodeGeneric(Kt.tag,Nt,qt):this._decodeChoice(Nt,qt),Vt=!0}catch{Vt=!1}Nt.restore(rr)}else if(Vt=this._peekTag(Nt,Jt,Kt.any),Nt.isError(Vt))return Vt}var Qt;if(Kt.obj&&Vt&&(Qt=Nt.enterObject()),Vt){if(Kt.explicit!==null){var Wt=this._decodeTag(Nt,Kt.explicit);if(Nt.isError(Wt))return Wt;Nt=Wt}var nr=Nt.offset;if(Kt.use===null&&Kt.choice===null){if(Kt.any)var rr=Nt.save();var yr=this._decodeTag(Nt,Kt.implicit!==null?Kt.implicit:Kt.tag,Kt.any);if(Nt.isError(yr))return yr;Kt.any?zt=Nt.raw(rr):Nt=yr}if(qt&&qt.track&&Kt.tag!==null&&qt.track(Nt.path(),nr,Nt.length,"tagged"),qt&&qt.track&&Kt.tag!==null&&qt.track(Nt.path(),Nt.offset,Nt.length,"content"),Kt.any?zt=zt:Kt.choice===null?zt=this._decodeGeneric(Kt.tag,Nt,qt):zt=this._decodeChoice(Nt,qt),Nt.isError(zt))return zt;if(!Kt.any&&Kt.choice===null&&Kt.children!==null&&Kt.children.forEach(function(xr){xr._decode(Nt,qt)}),Kt.contains&&(Kt.tag==="octstr"||Kt.tag==="bitstr")){var vr=new $t(zt);zt=this._getUse(Kt.contains,Nt._reporterState.obj)._decode(vr,qt)}}return Kt.obj&&Vt&&(zt=Nt.leaveObject(Qt)),Kt.key!==null&&(zt!==null||Vt===!0)?Nt.leaveKey(Ht,Kt.key,zt):Ht!==null&&Nt.exitKey(Ht),zt},jt.prototype._decodeGeneric=function(Nt,qt,Kt){var zt=this._baseState;return Nt==="seq"||Nt==="set"?null:Nt==="seqof"||Nt==="setof"?this._decodeList(qt,Nt,zt.args[0],Kt):/str$/.test(Nt)?this._decodeStr(qt,Nt,Kt):Nt==="objid"&&zt.args?this._decodeObjid(qt,zt.args[0],zt.args[1],Kt):Nt==="objid"?this._decodeObjid(qt,null,null,Kt):Nt==="gentime"||Nt==="utctime"?this._decodeTime(qt,Nt,Kt):Nt==="null_"?this._decodeNull(qt,Kt):Nt==="bool"?this._decodeBool(qt,Kt):Nt==="objDesc"?this._decodeStr(qt,Nt,Kt):Nt==="int"||Nt==="enum"?this._decodeInt(qt,zt.args&&zt.args[0],Kt):zt.use!==null?this._getUse(zt.use,qt._reporterState.obj)._decode(qt,Kt):qt.error("unknown tag: "+Nt)},jt.prototype._getUse=function(Nt,qt){var Kt=this._baseState;return Kt.useDecoder=this._use(Nt,qt),xt(Kt.useDecoder._baseState.parent===null),Kt.useDecoder=Kt.useDecoder._baseState.children[0],Kt.implicit!==Kt.useDecoder._baseState.implicit&&(Kt.useDecoder=Kt.useDecoder.clone(),Kt.useDecoder._baseState.implicit=Kt.implicit),Kt.useDecoder},jt.prototype._decodeChoice=function(Nt,qt){var Kt=this._baseState,zt=null,Vt=!1;return Object.keys(Kt.choice).some(function(Ht){var Jt=Nt.save(),rr=Kt.choice[Ht];try{var Qt=rr._decode(Nt,qt);if(Nt.isError(Qt))return!1;zt={type:Ht,value:Qt},Vt=!0}catch{return Nt.restore(Jt),!1}return!0},this),Vt?zt:Nt.error("Choice not matched")},jt.prototype._createEncoderBuffer=function(Nt){return new e(Nt,this.reporter)},jt.prototype._encode=function(Nt,qt,Kt){var zt=this._baseState;if(!(zt.default!==null&&zt.default===Nt)){var Vt=this._encodeValue(Nt,qt,Kt);if(Vt!==void 0&&!this._skipDefault(Vt,qt,Kt))return Vt}},jt.prototype._encodeValue=function(Nt,qt,Kt){var zt=this._baseState;if(zt.parent===null)return zt.children[0]._encode(Nt,qt||new _t);var rr=null;if(this.reporter=qt,zt.optional&&Nt===void 0)if(zt.default!==null)Nt=zt.default;else return;var Vt=null,Ht=!1;if(zt.any)rr=this._createEncoderBuffer(Nt);else if(zt.choice)rr=this._encodeChoice(Nt,qt);else if(zt.contains)Vt=this._getUse(zt.contains,Kt)._encode(Nt,qt),Ht=!0;else if(zt.children)Vt=zt.children.map(function(nr){if(nr._baseState.tag==="null_")return nr._encode(null,qt,Nt);if(nr._baseState.key===null)return qt.error("Child should have a key");var yr=qt.enterKey(nr._baseState.key);if(typeof Nt!="object")return qt.error("Child expected, but input is not object");var vr=nr._encode(Nt[nr._baseState.key],qt,Nt);return qt.leaveKey(yr),vr},this).filter(function(nr){return nr}),Vt=this._createEncoderBuffer(Vt);else if(zt.tag==="seqof"||zt.tag==="setof"){if(!(zt.args&&zt.args.length===1))return qt.error("Too many args for : "+zt.tag);if(!Array.isArray(Nt))return qt.error("seqof/setof, but data is not Array");var Jt=this.clone();Jt._baseState.implicit=null,Vt=this._createEncoderBuffer(Nt.map(function(nr){var yr=this._baseState;return this._getUse(yr.args[0],Nt)._encode(nr,qt)},Jt))}else zt.use!==null?rr=this._getUse(zt.use,Kt)._encode(Nt,qt):(Vt=this._encodePrimitive(zt.tag,Nt),Ht=!0);var rr;if(!zt.any&&zt.choice===null){var Qt=zt.implicit!==null?zt.implicit:zt.tag,Wt=zt.implicit===null?"universal":"context";Qt===null?zt.use===null&&qt.error("Tag could be omitted only for .use()"):zt.use===null&&(rr=this._encodeComposite(Qt,Ht,Wt,Vt))}return zt.explicit!==null&&(rr=this._encodeComposite(zt.explicit,!1,"context",rr)),rr},jt.prototype._encodeChoice=function(Nt,qt){var Kt=this._baseState,zt=Kt.choice[Nt.type];return zt||xt(!1,Nt.type+" not found in "+JSON.stringify(Object.keys(Kt.choice))),zt._encode(Nt.value,qt)},jt.prototype._encodePrimitive=function(Nt,qt){var Kt=this._baseState;if(/str$/.test(Nt))return this._encodeStr(qt,Nt);if(Nt==="objid"&&Kt.args)return this._encodeObjid(qt,Kt.reverseArgs[0],Kt.args[1]);if(Nt==="objid")return this._encodeObjid(qt,null,null);if(Nt==="gentime"||Nt==="utctime")return this._encodeTime(qt,Nt);if(Nt==="null_")return this._encodeNull();if(Nt==="int"||Nt==="enum")return this._encodeInt(qt,Kt.args&&Kt.reverseArgs[0]);if(Nt==="bool")return this._encodeBool(qt);if(Nt==="objDesc")return this._encodeStr(qt,Nt);throw new Error("Unsupported tag: "+Nt)},jt.prototype._isNumstr=function(Nt){return/^[0-9 ]*$/.test(Nt)},jt.prototype._isPrintstr=function(Nt){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(Nt)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(_t){var e=_t;e.Reporter=reporter.Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base$1)),base$1}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(_t){var e=requireConstants();_t.tagClass={0:"universal",1:"application",2:"context",3:"private"},_t.tagClassByName=e._reverse(_t.tagClass),_t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},_t.tagByName=e._reverse(_t.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(_t){var e=_t;e._reverse=function(xt){var At={};return Object.keys(xt).forEach(function(kt){(kt|0)==kt&&(kt=kt|0);var Bt=xt[kt];At[Bt]=kt}),At},e.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var _t=inherits_browserExports,e=requireAsn1(),$t=e.base,xt=e.bignum,At=e.constants.der;function kt(Ut){this.enc="der",this.name=Ut.name,this.entity=Ut,this.tree=new Bt,this.tree._init(Ut.body)}der_1$1=kt,kt.prototype.decode=function(Nt,qt){return Nt instanceof $t.DecoderBuffer||(Nt=new $t.DecoderBuffer(Nt,qt)),this.tree._decode(Nt,qt)};function Bt(Ut){$t.Node.call(this,"der",Ut)}_t(Bt,$t.Node),Bt.prototype._peekTag=function(Nt,qt,Kt){if(Nt.isEmpty())return!1;var zt=Nt.save(),Vt=jt(Nt,'Failed to peek tag: "'+qt+'"');return Nt.isError(Vt)?Vt:(Nt.restore(zt),Vt.tag===qt||Vt.tagStr===qt||Vt.tagStr+"of"===qt||Kt)},Bt.prototype._decodeTag=function(Nt,qt,Kt){var zt=jt(Nt,'Failed to decode tag of "'+qt+'"');if(Nt.isError(zt))return zt;var Vt=Lt(Nt,zt.primitive,'Failed to get length of "'+qt+'"');if(Nt.isError(Vt))return Vt;if(!Kt&&zt.tag!==qt&&zt.tagStr!==qt&&zt.tagStr+"of"!==qt)return Nt.error('Failed to match tag: "'+qt+'"');if(zt.primitive||Vt!==null)return Nt.skip(Vt,'Failed to match body of: "'+qt+'"');var Ht=Nt.save(),Jt=this._skipUntilEnd(Nt,'Failed to skip indefinite length body: "'+this.tag+'"');return Nt.isError(Jt)?Jt:(Vt=Nt.offset-Ht.offset,Nt.restore(Ht),Nt.skip(Vt,'Failed to match body of: "'+qt+'"'))},Bt.prototype._skipUntilEnd=function(Nt,qt){for(;;){var Kt=jt(Nt,qt);if(Nt.isError(Kt))return Kt;var zt=Lt(Nt,Kt.primitive,qt);if(Nt.isError(zt))return zt;var Vt;if(Kt.primitive||zt!==null?Vt=Nt.skip(zt):Vt=this._skipUntilEnd(Nt,qt),Nt.isError(Vt))return Vt;if(Kt.tagStr==="end")break}},Bt.prototype._decodeList=function(Nt,qt,Kt,zt){for(var Vt=[];!Nt.isEmpty();){var Ht=this._peekTag(Nt,"end");if(Nt.isError(Ht))return Ht;var Jt=Kt.decode(Nt,"der",zt);if(Nt.isError(Jt)&&Ht)break;Vt.push(Jt)}return Vt},Bt.prototype._decodeStr=function(Nt,qt){if(qt==="bitstr"){var Kt=Nt.readUInt8();return Nt.isError(Kt)?Kt:{unused:Kt,data:Nt.raw()}}else if(qt==="bmpstr"){var zt=Nt.raw();if(zt.length%2===1)return Nt.error("Decoding of string type: bmpstr length mismatch");for(var Vt="",Ht=0;Ht<zt.length/2;Ht++)Vt+=String.fromCharCode(zt.readUInt16BE(Ht*2));return Vt}else if(qt==="numstr"){var Jt=Nt.raw().toString("ascii");return this._isNumstr(Jt)?Jt:Nt.error("Decoding of string type: numstr unsupported characters")}else{if(qt==="octstr")return Nt.raw();if(qt==="objDesc")return Nt.raw();if(qt==="printstr"){var rr=Nt.raw().toString("ascii");return this._isPrintstr(rr)?rr:Nt.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(qt)?Nt.raw().toString():Nt.error("Decoding of string type: "+qt+" unsupported")}},Bt.prototype._decodeObjid=function(Nt,qt,Kt){for(var zt,Vt=[],Ht=0;!Nt.isEmpty();){var Jt=Nt.readUInt8();Ht<<=7,Ht|=Jt&127,Jt&128||(Vt.push(Ht),Ht=0)}Jt&128&&Vt.push(Ht);var rr=Vt[0]/40|0,Qt=Vt[0]%40;if(Kt?zt=Vt:zt=[rr,Qt].concat(Vt.slice(1)),qt){var Wt=qt[zt.join(" ")];Wt===void 0&&(Wt=qt[zt.join(".")]),Wt!==void 0&&(zt=Wt)}return zt},Bt.prototype._decodeTime=function(Nt,qt){var Kt=Nt.raw().toString();if(qt==="gentime")var zt=Kt.slice(0,4)|0,Vt=Kt.slice(4,6)|0,Ht=Kt.slice(6,8)|0,Jt=Kt.slice(8,10)|0,rr=Kt.slice(10,12)|0,Qt=Kt.slice(12,14)|0;else if(qt==="utctime"){var zt=Kt.slice(0,2)|0,Vt=Kt.slice(2,4)|0,Ht=Kt.slice(4,6)|0,Jt=Kt.slice(6,8)|0,rr=Kt.slice(8,10)|0,Qt=Kt.slice(10,12)|0;zt<70?zt=2e3+zt:zt=1900+zt}else return Nt.error("Decoding "+qt+" time is not supported yet");return Date.UTC(zt,Vt-1,Ht,Jt,rr,Qt,0)},Bt.prototype._decodeNull=function(Nt){return null},Bt.prototype._decodeBool=function(Nt){var qt=Nt.readUInt8();return Nt.isError(qt)?qt:qt!==0},Bt.prototype._decodeInt=function(Nt,qt){var Kt=Nt.raw(),zt=new xt(Kt);return qt&&(zt=qt[zt.toString(10)]||zt),zt},Bt.prototype._use=function(Nt,qt){return typeof Nt=="function"&&(Nt=Nt(qt)),Nt._getDecoder("der").tree};function jt(Ut,Nt){var qt=Ut.readUInt8(Nt);if(Ut.isError(qt))return qt;var Kt=At.tagClass[qt>>6],zt=(qt&32)===0;if((qt&31)===31){var Vt=qt;for(qt=0;(Vt&128)===128;){if(Vt=Ut.readUInt8(Nt),Ut.isError(Vt))return Vt;qt<<=7,qt|=Vt&127}}else qt&=31;var Ht=At.tag[qt];return{cls:Kt,primitive:zt,tag:qt,tagStr:Ht}}function Lt(Ut,Nt,qt){var Kt=Ut.readUInt8(qt);if(Ut.isError(Kt))return Kt;if(!Nt&&Kt===128)return null;if(!(Kt&128))return Kt;var zt=Kt&127;if(zt>4)return Ut.error("length octect is too long");Kt=0;for(var Vt=0;Vt<zt;Vt++){Kt<<=8;var Ht=Ut.readUInt8(qt);if(Ut.isError(Ht))return Ht;Kt|=Ht}return Kt}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var _t=inherits_browserExports,e=buffer$2.Buffer,$t=requireDer$1();function xt(At){$t.call(this,At),this.enc="pem"}return _t(xt,$t),pem$1=xt,xt.prototype.decode=function(kt,Bt){for(var jt=kt.toString().split(/[\r\n]+/g),Lt=Bt.label.toUpperCase(),Ut=/^-----(BEGIN|END) ([^-]+)-----$/,Nt=-1,qt=-1,Kt=0;Kt<jt.length;Kt++){var zt=jt[Kt].match(Ut);if(zt!==null&&zt[2]===Lt)if(Nt===-1){if(zt[1]!=="BEGIN")break;Nt=Kt}else{if(zt[1]!=="END")break;qt=Kt;break}}if(Nt===-1||qt===-1)throw new Error("PEM section not found for: "+Lt);var Vt=jt.slice(Nt+1,qt).join("");Vt.replace(/[^a-z0-9\+\/=]+/gi,"");var Ht=new e(Vt,"base64");return $t.prototype.decode.call(this,Ht,Bt)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(_t){var e=_t;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var _t=inherits_browserExports,e=buffer$2.Buffer,$t=requireAsn1(),xt=$t.base,At=$t.constants.der;function kt(Ut){this.enc="der",this.name=Ut.name,this.entity=Ut,this.tree=new Bt,this.tree._init(Ut.body)}der_1=kt,kt.prototype.encode=function(Nt,qt){return this.tree._encode(Nt,qt).join()};function Bt(Ut){xt.Node.call(this,"der",Ut)}_t(Bt,xt.Node),Bt.prototype._encodeComposite=function(Nt,qt,Kt,zt){var Vt=Lt(Nt,qt,Kt,this.reporter);if(zt.length<128){var rr=new e(2);return rr[0]=Vt,rr[1]=zt.length,this._createEncoderBuffer([rr,zt])}for(var Ht=1,Jt=zt.length;Jt>=256;Jt>>=8)Ht++;var rr=new e(2+Ht);rr[0]=Vt,rr[1]=128|Ht;for(var Jt=1+Ht,Qt=zt.length;Qt>0;Jt--,Qt>>=8)rr[Jt]=Qt&255;return this._createEncoderBuffer([rr,zt])},Bt.prototype._encodeStr=function(Nt,qt){if(qt==="bitstr")return this._createEncoderBuffer([Nt.unused|0,Nt.data]);if(qt==="bmpstr"){for(var Kt=new e(Nt.length*2),zt=0;zt<Nt.length;zt++)Kt.writeUInt16BE(Nt.charCodeAt(zt),zt*2);return this._createEncoderBuffer(Kt)}else return qt==="numstr"?this._isNumstr(Nt)?this._createEncoderBuffer(Nt):this.reporter.error("Encoding of string type: numstr supports only digits and space"):qt==="printstr"?this._isPrintstr(Nt)?this._createEncoderBuffer(Nt):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(qt)?this._createEncoderBuffer(Nt):qt==="objDesc"?this._createEncoderBuffer(Nt):this.reporter.error("Encoding of string type: "+qt+" unsupported")},Bt.prototype._encodeObjid=function(Nt,qt,Kt){if(typeof Nt=="string"){if(!qt)return this.reporter.error("string objid given, but no values map found");if(!qt.hasOwnProperty(Nt))return this.reporter.error("objid not found in values map");Nt=qt[Nt].split(/[\s\.]+/g);for(var zt=0;zt<Nt.length;zt++)Nt[zt]|=0}else if(Array.isArray(Nt)){Nt=Nt.slice();for(var zt=0;zt<Nt.length;zt++)Nt[zt]|=0}if(!Array.isArray(Nt))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(Nt));if(!Kt){if(Nt[1]>=40)return this.reporter.error("Second objid identifier OOB");Nt.splice(0,2,Nt[0]*40+Nt[1])}for(var Vt=0,zt=0;zt<Nt.length;zt++){var Ht=Nt[zt];for(Vt++;Ht>=128;Ht>>=7)Vt++}for(var Jt=new e(Vt),rr=Jt.length-1,zt=Nt.length-1;zt>=0;zt--){var Ht=Nt[zt];for(Jt[rr--]=Ht&127;(Ht>>=7)>0;)Jt[rr--]=128|Ht&127}return this._createEncoderBuffer(Jt)};function jt(Ut){return Ut<10?"0"+Ut:Ut}Bt.prototype._encodeTime=function(Nt,qt){var Kt,zt=new Date(Nt);return qt==="gentime"?Kt=[jt(zt.getFullYear()),jt(zt.getUTCMonth()+1),jt(zt.getUTCDate()),jt(zt.getUTCHours()),jt(zt.getUTCMinutes()),jt(zt.getUTCSeconds()),"Z"].join(""):qt==="utctime"?Kt=[jt(zt.getFullYear()%100),jt(zt.getUTCMonth()+1),jt(zt.getUTCDate()),jt(zt.getUTCHours()),jt(zt.getUTCMinutes()),jt(zt.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+qt+" time is not supported yet"),this._encodeStr(Kt,"octstr")},Bt.prototype._encodeNull=function(){return this._createEncoderBuffer("")},Bt.prototype._encodeInt=function(Nt,qt){if(typeof Nt=="string"){if(!qt)return this.reporter.error("String int or enum given, but no values map");if(!qt.hasOwnProperty(Nt))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(Nt));Nt=qt[Nt]}if(typeof Nt!="number"&&!e.isBuffer(Nt)){var Kt=Nt.toArray();!Nt.sign&&Kt[0]&128&&Kt.unshift(0),Nt=new e(Kt)}if(e.isBuffer(Nt)){var zt=Nt.length;Nt.length===0&&zt++;var Ht=new e(zt);return Nt.copy(Ht),Nt.length===0&&(Ht[0]=0),this._createEncoderBuffer(Ht)}if(Nt<128)return this._createEncoderBuffer(Nt);if(Nt<256)return this._createEncoderBuffer([0,Nt]);for(var zt=1,Vt=Nt;Vt>=256;Vt>>=8)zt++;for(var Ht=new Array(zt),Vt=Ht.length-1;Vt>=0;Vt--)Ht[Vt]=Nt&255,Nt>>=8;return Ht[0]&128&&Ht.unshift(0),this._createEncoderBuffer(new e(Ht))},Bt.prototype._encodeBool=function(Nt){return this._createEncoderBuffer(Nt?255:0)},Bt.prototype._use=function(Nt,qt){return typeof Nt=="function"&&(Nt=Nt(qt)),Nt._getEncoder("der").tree},Bt.prototype._skipDefault=function(Nt,qt,Kt){var zt=this._baseState,Vt;if(zt.default===null)return!1;var Ht=Nt.join();if(zt.defaultBuffer===void 0&&(zt.defaultBuffer=this._encodeValue(zt.default,qt,Kt).join()),Ht.length!==zt.defaultBuffer.length)return!1;for(Vt=0;Vt<Ht.length;Vt++)if(Ht[Vt]!==zt.defaultBuffer[Vt])return!1;return!0};function Lt(Ut,Nt,qt,Kt){var zt;if(Ut==="seqof"?Ut="seq":Ut==="setof"&&(Ut="set"),At.tagByName.hasOwnProperty(Ut))zt=At.tagByName[Ut];else if(typeof Ut=="number"&&(Ut|0)===Ut)zt=Ut;else return Kt.error("Unknown tag: "+Ut);return zt>=31?Kt.error("Multi-octet tag encoding unsupported"):(Nt||(zt|=32),zt|=At.tagClassByName[qt||"universal"]<<6,zt)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var _t=inherits_browserExports,e=requireDer();function $t(xt){e.call(this,xt),this.enc="pem"}return _t($t,e),pem=$t,$t.prototype.encode=function(At,kt){for(var Bt=e.prototype.encode.call(this,At),jt=Bt.toString("base64"),Lt=["-----BEGIN "+kt.label+"-----"],Ut=0;Ut<jt.length;Ut+=64)Lt.push(jt.slice(Ut,Ut+64));return Lt.push("-----END "+kt.label+"-----"),Lt.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(_t){var e=_t;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1;function requireAsn1(){return hasRequiredAsn1||(hasRequiredAsn1=1,function(_t){var e=_t;e.bignum=bnExports$1,e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1$2)),asn1$2}var asn=requireAsn1(),Time$1=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time$1),this.key("notAfter").use(Time$1))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$1=requireAsn1();asn1$3.certificate=certificate;var RSAPrivateKey=asn1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=RSAPublicKey;var AlgorithmIdentifier=asn1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PublicKey$2=asn1$1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=PublicKey$2;var PrivateKeyInfo=asn1$1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=DSAPrivateKey;asn1$3.DSAparam=asn1$1.define("DSAparam",function(){this.int()});var ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=ECPrivateKey;asn1$3.signature=asn1$1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1$2={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$8,Buffer$c=safeBufferExports$1.Buffer,fixProc$1=function(_t,e){var $t=_t.toString(),xt=$t.match(findProc),At;if(xt){var Bt="aes"+xt[1],jt=Buffer$c.from(xt[2],"hex"),Lt=Buffer$c.from(xt[3].replace(/[\r\n]/g,""),"base64"),Ut=evp(e,jt.slice(0,8),parseInt(xt[1],10)).key,Nt=[],qt=ciphers$1.createDecipheriv(Bt,Ut,jt);Nt.push(qt.update(Lt)),Nt.push(qt.final()),At=Buffer$c.concat(Nt)}else{var kt=$t.match(fullRegex);At=Buffer$c.from(kt[2].replace(/[\r\n]/g,""),"base64")}var Kt=$t.match(startRegex)[1];return{tag:Kt,data:At}},asn1=asn1$3,aesid=require$$1$2,fixProc=fixProc$1,ciphers=browser$8,compat$1=browser$a,Buffer$b=safeBufferExports$1.Buffer;function decrypt(_t,e){var $t=_t.algorithm.decrypt.kde.kdeparams.salt,xt=parseInt(_t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),At=aesid[_t.algorithm.decrypt.cipher.algo.join(".")],kt=_t.algorithm.decrypt.cipher.iv,Bt=_t.subjectPrivateKey,jt=parseInt(At.split("-")[1],10)/8,Lt=compat$1.pbkdf2Sync(e,$t,xt,jt,"sha1"),Ut=ciphers.createDecipheriv(At,Lt,kt),Nt=[];return Nt.push(Ut.update(Bt)),Nt.push(Ut.final()),Buffer$b.concat(Nt)}function parseKeys$2(_t){var e;typeof _t=="object"&&!Buffer$b.isBuffer(_t)&&(e=_t.passphrase,_t=_t.key),typeof _t=="string"&&(_t=Buffer$b.from(_t));var $t=fixProc(_t,e),xt=$t.tag,At=$t.data,kt,Bt;switch(xt){case"CERTIFICATE":Bt=asn1.certificate.decode(At,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(Bt||(Bt=asn1.PublicKey.decode(At,"der")),kt=Bt.algorithm.algorithm.join("."),kt){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(Bt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return Bt.subjectPrivateKey=Bt.subjectPublicKey,{type:"ec",data:Bt};case"1.2.840.10040.4.1":return Bt.algorithm.params.pub_key=asn1.DSAparam.decode(Bt.subjectPublicKey.data,"der"),{type:"dsa",data:Bt.algorithm.params};default:throw new Error("unknown key id "+kt)}case"ENCRYPTED PRIVATE KEY":At=asn1.EncryptedPrivateKey.decode(At,"der"),At=decrypt(At,e);case"PRIVATE KEY":switch(Bt=asn1.PrivateKey.decode(At,"der"),kt=Bt.algorithm.algorithm.join("."),kt){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(Bt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:Bt.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(Bt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return Bt.algorithm.params.priv_key=asn1.DSAparam.decode(Bt.subjectPrivateKey,"der"),{type:"dsa",params:Bt.algorithm.params};default:throw new Error("unknown key id "+kt)}case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(At,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(At,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(At,"der")};case"EC PRIVATE KEY":return At=asn1.ECPrivateKey.decode(At,"der"),{curve:At.parameters.value,privateKey:At.privateKey};default:throw new Error("unknown key type "+xt)}}parseKeys$2.signature=asn1.signature;var parseAsn1=parseKeys$2;const require$$4$1={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var _t=safeBufferExports$1.Buffer,e=browser$b,$t=browserifyRsa,xt=requireElliptic().ec,At=bnExports,kt=parseAsn1,Bt=require$$4$1,jt=1;function Lt(rr,Qt,Wt,nr,yr){var vr=kt(Qt);if(vr.curve){if(nr!=="ecdsa"&&nr!=="ecdsa/rsa")throw new Error("wrong private key type");return Ut(rr,vr)}else if(vr.type==="dsa"){if(nr!=="dsa")throw new Error("wrong private key type");return Nt(rr,vr,Wt)}if(nr!=="rsa"&&nr!=="ecdsa/rsa")throw new Error("wrong private key type");if(Qt.padding!==void 0&&Qt.padding!==jt)throw new Error("illegal or unsupported padding mode");rr=_t.concat([yr,rr]);for(var Ir=vr.modulus.byteLength(),xr=[0,1];rr.length+xr.length+1<Ir;)xr.push(255);xr.push(0);for(var Or=-1;++Or<rr.length;)xr.push(rr[Or]);var Nr=$t(xr,vr);return Nr}function Ut(rr,Qt){var Wt=Bt[Qt.curve.join(".")];if(!Wt)throw new Error("unknown curve "+Qt.curve.join("."));var nr=new xt(Wt),yr=nr.keyFromPrivate(Qt.privateKey),vr=yr.sign(rr);return _t.from(vr.toDER())}function Nt(rr,Qt,Wt){for(var nr=Qt.params.priv_key,yr=Qt.params.p,vr=Qt.params.q,Ir=Qt.params.g,xr=new At(0),Or,Nr=zt(rr,vr).mod(vr),kr=!1,lr=Kt(nr,vr,rr,Wt);kr===!1;)Or=Ht(vr,lr,Wt),xr=Jt(Ir,Or,yr,vr),kr=Or.invm(vr).imul(Nr.add(nr.mul(xr))).mod(vr),kr.cmpn(0)===0&&(kr=!1,xr=new At(0));return qt(xr,kr)}function qt(rr,Qt){rr=rr.toArray(),Qt=Qt.toArray(),rr[0]&128&&(rr=[0].concat(rr)),Qt[0]&128&&(Qt=[0].concat(Qt));var Wt=rr.length+Qt.length+4,nr=[48,Wt,2,rr.length];return nr=nr.concat(rr,[2,Qt.length],Qt),_t.from(nr)}function Kt(rr,Qt,Wt,nr){if(rr=_t.from(rr.toArray()),rr.length<Qt.byteLength()){var yr=_t.alloc(Qt.byteLength()-rr.length);rr=_t.concat([yr,rr])}var vr=Wt.length,Ir=Vt(Wt,Qt),xr=_t.alloc(vr);xr.fill(1);var Or=_t.alloc(vr);return Or=e(nr,Or).update(xr).update(_t.from([0])).update(rr).update(Ir).digest(),xr=e(nr,Or).update(xr).digest(),Or=e(nr,Or).update(xr).update(_t.from([1])).update(rr).update(Ir).digest(),xr=e(nr,Or).update(xr).digest(),{k:Or,v:xr}}function zt(rr,Qt){var Wt=new At(rr),nr=(rr.length<<3)-Qt.bitLength();return nr>0&&Wt.ishrn(nr),Wt}function Vt(rr,Qt){rr=zt(rr,Qt),rr=rr.mod(Qt);var Wt=_t.from(rr.toArray());if(Wt.length<Qt.byteLength()){var nr=_t.alloc(Qt.byteLength()-Wt.length);Wt=_t.concat([nr,Wt])}return Wt}function Ht(rr,Qt,Wt){var nr,yr;do{for(nr=_t.alloc(0);nr.length*8<rr.bitLength();)Qt.v=e(Wt,Qt.k).update(Qt.v).digest(),nr=_t.concat([nr,Qt.v]);yr=zt(nr,rr),Qt.k=e(Wt,Qt.k).update(Qt.v).update(_t.from([0])).digest(),Qt.v=e(Wt,Qt.k).update(Qt.v).digest()}while(yr.cmp(rr)!==-1);return yr}function Jt(rr,Qt,Wt,nr){return rr.toRed(At.mont(Wt)).redPow(Qt).fromRed().mod(nr)}return sign.exports=Lt,sign.exports.getKey=Kt,sign.exports.makeKey=Ht,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var _t=safeBufferExports$1.Buffer,e=bnExports,$t=requireElliptic().ec,xt=parseAsn1,At=require$$4$1;function kt(Ut,Nt,qt,Kt,zt){var Vt=xt(qt);if(Vt.type==="ec"){if(Kt!=="ecdsa"&&Kt!=="ecdsa/rsa")throw new Error("wrong public key type");return Bt(Ut,Nt,Vt)}else if(Vt.type==="dsa"){if(Kt!=="dsa")throw new Error("wrong public key type");return jt(Ut,Nt,Vt)}if(Kt!=="rsa"&&Kt!=="ecdsa/rsa")throw new Error("wrong public key type");Nt=_t.concat([zt,Nt]);for(var Ht=Vt.modulus.byteLength(),Jt=[1],rr=0;Nt.length+Jt.length+2<Ht;)Jt.push(255),rr+=1;Jt.push(0);for(var Qt=-1;++Qt<Nt.length;)Jt.push(Nt[Qt]);Jt=_t.from(Jt);var Wt=e.mont(Vt.modulus);Ut=new e(Ut).toRed(Wt),Ut=Ut.redPow(new e(Vt.publicExponent)),Ut=_t.from(Ut.fromRed().toArray());var nr=rr<8?1:0;for(Ht=Math.min(Ut.length,Jt.length),Ut.length!==Jt.length&&(nr=1),Qt=-1;++Qt<Ht;)nr|=Ut[Qt]^Jt[Qt];return nr===0}function Bt(Ut,Nt,qt){var Kt=At[qt.data.algorithm.curve.join(".")];if(!Kt)throw new Error("unknown curve "+qt.data.algorithm.curve.join("."));var zt=new $t(Kt),Vt=qt.data.subjectPrivateKey.data;return zt.verify(Nt,Ut,Vt)}function jt(Ut,Nt,qt){var Kt=qt.data.p,zt=qt.data.q,Vt=qt.data.g,Ht=qt.data.pub_key,Jt=xt.signature.decode(Ut,"der"),rr=Jt.s,Qt=Jt.r;Lt(rr,zt),Lt(Qt,zt);var Wt=e.mont(Kt),nr=rr.invm(zt),yr=Vt.toRed(Wt).redPow(new e(Nt).mul(nr).mod(zt)).fromRed().mul(Ht.toRed(Wt).redPow(Qt.mul(nr).mod(zt)).fromRed()).mod(Kt).mod(zt);return yr.cmp(Qt)===0}function Lt(Ut,Nt){if(Ut.cmpn(0)<=0)throw new Error("invalid sig");if(Ut.cmp(Nt)>=0)throw new Error("invalid sig")}return verify_1=kt,verify_1}var browser$6,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$6;hasRequiredBrowser$2=1;var _t=safeBufferExports$1.Buffer,e=browser$c,$t=readableBrowserExports,xt=inherits_browserExports,At=requireSign(),kt=requireVerify(),Bt=require$$6$1;Object.keys(Bt).forEach(function(qt){Bt[qt].id=_t.from(Bt[qt].id,"hex"),Bt[qt.toLowerCase()]=Bt[qt]});function jt(qt){$t.Writable.call(this);var Kt=Bt[qt];if(!Kt)throw new Error("Unknown message digest");this._hashType=Kt.hash,this._hash=e(Kt.hash),this._tag=Kt.id,this._signType=Kt.sign}xt(jt,$t.Writable),jt.prototype._write=function(Kt,zt,Vt){this._hash.update(Kt),Vt()},jt.prototype.update=function(Kt,zt){return this._hash.update(typeof Kt=="string"?_t.from(Kt,zt):Kt),this},jt.prototype.sign=function(Kt,zt){this.end();var Vt=this._hash.digest(),Ht=At(Vt,Kt,this._hashType,this._signType,this._tag);return zt?Ht.toString(zt):Ht};function Lt(qt){$t.Writable.call(this);var Kt=Bt[qt];if(!Kt)throw new Error("Unknown message digest");this._hash=e(Kt.hash),this._tag=Kt.id,this._signType=Kt.sign}xt(Lt,$t.Writable),Lt.prototype._write=function(Kt,zt,Vt){this._hash.update(Kt),Vt()},Lt.prototype.update=function(Kt,zt){return this._hash.update(typeof Kt=="string"?_t.from(Kt,zt):Kt),this},Lt.prototype.verify=function(Kt,zt,Vt){var Ht=typeof zt=="string"?_t.from(zt,Vt):zt;this.end();var Jt=this._hash.digest();return kt(Ht,Jt,Kt,this._signType,this._tag)};function Ut(qt){return new jt(qt)}function Nt(qt){return new Lt(qt)}return browser$6={Sign:Ut,Verify:Nt,createSign:Ut,createVerify:Nt},browser$6}var browser$5,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$5;hasRequiredBrowser$1=1;var _t=requireElliptic(),e=bnExports$1;browser$5=function(Bt){return new xt(Bt)};var $t={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};$t.p224=$t.secp224r1,$t.p256=$t.secp256r1=$t.prime256v1,$t.p192=$t.secp192r1=$t.prime192v1,$t.p384=$t.secp384r1,$t.p521=$t.secp521r1;function xt(kt){this.curveType=$t[kt],this.curveType||(this.curveType={name:kt}),this.curve=new _t.ec(this.curveType.name),this.keys=void 0}xt.prototype.generateKeys=function(kt,Bt){return this.keys=this.curve.genKeyPair(),this.getPublicKey(kt,Bt)},xt.prototype.computeSecret=function(kt,Bt,jt){Bt=Bt||"utf8",buffer$2.Buffer.isBuffer(kt)||(kt=new buffer$2.Buffer(kt,Bt));var Lt=this.curve.keyFromPublic(kt).getPublic(),Ut=Lt.mul(this.keys.getPrivate()).getX();return At(Ut,jt,this.curveType.byteLength)},xt.prototype.getPublicKey=function(kt,Bt){var jt=this.keys.getPublic(Bt==="compressed",!0);return Bt==="hybrid"&&(jt[jt.length-1]%2?jt[0]=7:jt[0]=6),At(jt,kt)},xt.prototype.getPrivateKey=function(kt){return At(this.keys.getPrivate(),kt)},xt.prototype.setPublicKey=function(kt,Bt){return Bt=Bt||"utf8",buffer$2.Buffer.isBuffer(kt)||(kt=new buffer$2.Buffer(kt,Bt)),this.keys._importPublic(kt),this},xt.prototype.setPrivateKey=function(kt,Bt){Bt=Bt||"utf8",buffer$2.Buffer.isBuffer(kt)||(kt=new buffer$2.Buffer(kt,Bt));var jt=new e(kt);return jt=jt.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(jt),this};function At(kt,Bt,jt){Array.isArray(kt)||(kt=kt.toArray());var Lt=new buffer$2.Buffer(kt);if(jt&&Lt.length<jt){var Ut=new buffer$2.Buffer(jt-Lt.length);Ut.fill(0),Lt=buffer$2.Buffer.concat([Ut,Lt])}return Bt?Lt.toString(Bt):Lt}return browser$5}var browser$4={},createHash$2=browser$c,Buffer$a=safeBufferExports$1.Buffer,mgf$2=function(_t,e){for(var $t=Buffer$a.alloc(0),xt=0,At;$t.length<e;)At=i2ops(xt++),$t=Buffer$a.concat([$t,createHash$2("sha1").update(_t).update(At).digest()]);return $t.slice(0,e)};function i2ops(_t){var e=Buffer$a.allocUnsafe(4);return e.writeUInt32BE(_t,0),e}var xor$2=function _t(e,$t){for(var xt=e.length,At=-1;++At<xt;)e[At]^=$t[At];return e},BN$2=bnExports$1,Buffer$9=safeBufferExports$1.Buffer;function withPublic$2(_t,e){return Buffer$9.from(_t.toRed(BN$2.mont(e.modulus)).redPow(new BN$2(e.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes$2=browserExports$1,createHash$1=browser$c,mgf$1=mgf$2,xor$1=xor$2,BN$1=bnExports$1,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$8=safeBufferExports$1.Buffer,publicEncrypt=function _t(e,$t,xt){var At;e.padding?At=e.padding:xt?At=1:At=4;var kt=parseKeys$1(e),Bt;if(At===4)Bt=oaep$1(kt,$t);else if(At===1)Bt=pkcs1$1(kt,$t,xt);else if(At===3){if(Bt=new BN$1($t),Bt.cmp(kt.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return xt?crt$1(Bt,kt):withPublic$1(Bt,kt)};function oaep$1(_t,e){var $t=_t.modulus.byteLength(),xt=e.length,At=createHash$1("sha1").update(Buffer$8.alloc(0)).digest(),kt=At.length,Bt=2*kt;if(xt>$t-Bt-2)throw new Error("message too long");var jt=Buffer$8.alloc($t-xt-Bt-2),Lt=$t-kt-1,Ut=randomBytes$2(kt),Nt=xor$1(Buffer$8.concat([At,jt,Buffer$8.alloc(1,1),e],Lt),mgf$1(Ut,Lt)),qt=xor$1(Ut,mgf$1(Nt,kt));return new BN$1(Buffer$8.concat([Buffer$8.alloc(1),qt,Nt],$t))}function pkcs1$1(_t,e,$t){var xt=e.length,At=_t.modulus.byteLength();if(xt>At-11)throw new Error("message too long");var kt;return $t?kt=Buffer$8.alloc(At-xt-3,255):kt=nonZero(At-xt-3),new BN$1(Buffer$8.concat([Buffer$8.from([0,$t?1:2]),kt,Buffer$8.alloc(1),e],At))}function nonZero(_t){for(var e=Buffer$8.allocUnsafe(_t),$t=0,xt=randomBytes$2(_t*2),At=0,kt;$t<_t;)At===xt.length&&(xt=randomBytes$2(_t*2),At=0),kt=xt[At++],kt&&(e[$t++]=kt);return e}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN=bnExports$1,crt=browserifyRsa,createHash=browser$c,withPublic=withPublic_1,Buffer$7=safeBufferExports$1.Buffer,privateDecrypt=function _t(e,$t,xt){var At;e.padding?At=e.padding:xt?At=1:At=4;var kt=parseKeys(e),Bt=kt.modulus.byteLength();if($t.length>Bt||new BN($t).cmp(kt.modulus)>=0)throw new Error("decryption error");var jt;xt?jt=withPublic(new BN($t),kt):jt=crt($t,kt);var Lt=Buffer$7.alloc(Bt-jt.length);if(jt=Buffer$7.concat([Lt,jt],Bt),At===4)return oaep(kt,jt);if(At===1)return pkcs1(kt,jt,xt);if(At===3)return jt;throw new Error("unknown padding")};function oaep(_t,e){var $t=_t.modulus.byteLength(),xt=createHash("sha1").update(Buffer$7.alloc(0)).digest(),At=xt.length;if(e[0]!==0)throw new Error("decryption error");var kt=e.slice(1,At+1),Bt=e.slice(At+1),jt=xor(kt,mgf(Bt,At)),Lt=xor(Bt,mgf(jt,$t-At-1));if(compare(xt,Lt.slice(0,At)))throw new Error("decryption error");for(var Ut=At;Lt[Ut]===0;)Ut++;if(Lt[Ut++]!==1)throw new Error("decryption error");return Lt.slice(Ut)}function pkcs1(_t,e,$t){for(var xt=e.slice(0,2),At=2,kt=0;e[At++]!==0;)if(At>=e.length){kt++;break}var Bt=e.slice(2,At-1);if((xt.toString("hex")!=="0002"&&!$t||xt.toString("hex")!=="0001"&&$t)&&kt++,Bt.length<8&&kt++,kt)throw new Error("decryption error");return e.slice(At)}function compare(_t,e){_t=Buffer$7.from(_t),e=Buffer$7.from(e);var $t=0,xt=_t.length;_t.length!==e.length&&($t++,xt=Math.min(_t.length,e.length));for(var At=-1;++At<xt;)$t+=_t[At]^e[At];return $t}(function(_t){_t.publicEncrypt=publicEncrypt,_t.privateDecrypt=privateDecrypt,_t.privateEncrypt=function($t,xt){return _t.publicEncrypt($t,xt,!0)},_t.publicDecrypt=function($t,xt){return _t.privateDecrypt($t,xt,!0)}})(browser$4);var browser$3={};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports$1,randombytes=browserExports$1,Buffer$6=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$5=globalThis.crypto||globalThis.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(_t,e){if(typeof _t!="number"||_t!==_t)throw new TypeError("offset must be a number");if(_t>kMaxUint32||_t<0)throw new TypeError("offset must be a uint32");if(_t>kBufferMaxLength||_t>e)throw new RangeError("offset out of range")}function assertSize(_t,e,$t){if(typeof _t!="number"||_t!==_t)throw new TypeError("size must be a number");if(_t>kMaxUint32||_t<0)throw new TypeError("size must be a uint32");if(_t+e>$t||_t>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$5&&crypto$5.getRandomValues||!process$9.browser?(browser$3.randomFill=randomFill,browser$3.randomFillSync=randomFillSync):(browser$3.randomFill=oldBrowser,browser$3.randomFillSync=oldBrowser);function randomFill(_t,e,$t,xt){if(!Buffer$6.isBuffer(_t)&&!(_t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")xt=e,e=0,$t=_t.length;else if(typeof $t=="function")xt=$t,$t=_t.length-e;else if(typeof xt!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(e,_t.length),assertSize($t,e,_t.length),actualFill(_t,e,$t,xt)}function actualFill(_t,e,$t,xt){if(process$9.browser){var At=_t.buffer,kt=new Uint8Array(At,e,$t);if(crypto$5.getRandomValues(kt),xt){process$9.nextTick(function(){xt(null,_t)});return}return _t}if(xt){randombytes($t,function(jt,Lt){if(jt)return xt(jt);Lt.copy(_t,e),xt(null,_t)});return}var Bt=randombytes($t);return Bt.copy(_t,e),_t}function randomFillSync(_t,e,$t){if(typeof e>"u"&&(e=0),!Buffer$6.isBuffer(_t)&&!(_t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(e,_t.length),$t===void 0&&($t=_t.length-e),assertSize($t,e,_t.length),actualFill(_t,e,$t)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports$1,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$c,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$b;var _t=algos,e=Object.keys(_t),$t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return $t};var xt=browser$a;cryptoBrowserify.pbkdf2=xt.pbkdf2,cryptoBrowserify.pbkdf2Sync=xt.pbkdf2Sync;var At=browser$9;cryptoBrowserify.Cipher=At.Cipher,cryptoBrowserify.createCipher=At.createCipher,cryptoBrowserify.Cipheriv=At.Cipheriv,cryptoBrowserify.createCipheriv=At.createCipheriv,cryptoBrowserify.Decipher=At.Decipher,cryptoBrowserify.createDecipher=At.createDecipher,cryptoBrowserify.Decipheriv=At.Decipheriv,cryptoBrowserify.createDecipheriv=At.createDecipheriv,cryptoBrowserify.getCiphers=At.getCiphers,cryptoBrowserify.listCiphers=At.listCiphers;var kt=requireBrowser$3();cryptoBrowserify.DiffieHellmanGroup=kt.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=kt.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=kt.getDiffieHellman,cryptoBrowserify.createDiffieHellman=kt.createDiffieHellman,cryptoBrowserify.DiffieHellman=kt.DiffieHellman;var Bt=requireBrowser$2();cryptoBrowserify.createSign=Bt.createSign,cryptoBrowserify.Sign=Bt.Sign,cryptoBrowserify.createVerify=Bt.createVerify,cryptoBrowserify.Verify=Bt.Verify,cryptoBrowserify.createECDH=requireBrowser$1();var jt=browser$4;cryptoBrowserify.publicEncrypt=jt.publicEncrypt,cryptoBrowserify.privateEncrypt=jt.privateEncrypt,cryptoBrowserify.publicDecrypt=jt.publicDecrypt,cryptoBrowserify.privateDecrypt=jt.privateDecrypt;var Lt=browser$3;return cryptoBrowserify.randomFill=Lt.randomFill,cryptoBrowserify.randomFillSync=Lt.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var cryptoBrowserifyExports=requireCryptoBrowserify(),dist={},utils$6={};(function(_t){/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */Object.defineProperty(_t,"__esModule",{value:!0}),_t.setBigUint64=_t.Hash=_t.equalBytes=_t.ensureBytes=_t.checkOpts=_t.concatBytes=_t.toBytes=_t.bytesToUtf8=_t.utf8ToBytes=_t.asyncLoop=_t.nextTick=_t.hexToBytes=_t.bytesToHex=_t.isLE=_t.createView=_t.u32=_t.u16=_t.u8=void 0;const e=yr=>yr instanceof Uint8Array,$t=yr=>new Uint8Array(yr.buffer,yr.byteOffset,yr.byteLength);_t.u8=$t;const xt=yr=>new Uint16Array(yr.buffer,yr.byteOffset,Math.floor(yr.byteLength/2));_t.u16=xt;const At=yr=>new Uint32Array(yr.buffer,yr.byteOffset,Math.floor(yr.byteLength/4));_t.u32=At;const kt=yr=>new DataView(yr.buffer,yr.byteOffset,yr.byteLength);if(_t.createView=kt,_t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!_t.isLE)throw new Error("Non little-endian hardware is not supported");const Bt=Array.from({length:256},(yr,vr)=>vr.toString(16).padStart(2,"0"));function jt(yr){if(!e(yr))throw new Error("Uint8Array expected");let vr="";for(let Ir=0;Ir<yr.length;Ir++)vr+=Bt[yr[Ir]];return vr}_t.bytesToHex=jt;function Lt(yr){if(typeof yr!="string")throw new Error("hex string expected, got "+typeof yr);const vr=yr.length;if(vr%2)throw new Error("padded hex string expected, got unpadded hex of length "+vr);const Ir=new Uint8Array(vr/2);for(let xr=0;xr<Ir.length;xr++){const Or=xr*2,Nr=yr.slice(Or,Or+2),kr=Number.parseInt(Nr,16);if(Number.isNaN(kr)||kr<0)throw new Error("Invalid byte sequence");Ir[xr]=kr}return Ir}_t.hexToBytes=Lt;const Ut=async()=>{};_t.nextTick=Ut;async function Nt(yr,vr,Ir){let xr=Date.now();for(let Or=0;Or<yr;Or++){Ir(Or);const Nr=Date.now()-xr;Nr>=0&&Nr<vr||(await(0,_t.nextTick)(),xr+=Nr)}}_t.asyncLoop=Nt;function qt(yr){if(typeof yr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof yr}`);return new Uint8Array(new TextEncoder().encode(yr))}_t.utf8ToBytes=qt;function Kt(yr){return new TextDecoder().decode(yr)}_t.bytesToUtf8=Kt;function zt(yr){if(typeof yr=="string"&&(yr=qt(yr)),!e(yr))throw new Error(`expected Uint8Array, got ${typeof yr}`);return yr}_t.toBytes=zt;function Vt(...yr){const vr=new Uint8Array(yr.reduce((xr,Or)=>xr+Or.length,0));let Ir=0;return yr.forEach(xr=>{if(!e(xr))throw new Error("Uint8Array expected");vr.set(xr,Ir),Ir+=xr.length}),vr}_t.concatBytes=Vt;const Ht=yr=>Object.prototype.toString.call(yr)==="[object Object]"&&yr.constructor===Object;function Jt(yr,vr){if(vr!==void 0&&(typeof vr!="object"||!Ht(vr)))throw new Error("options must be object or undefined");return Object.assign(yr,vr)}_t.checkOpts=Jt;function rr(yr,vr){if(!(yr instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof vr=="number"&&yr.length!==vr)throw new Error(`Uint8Array length ${vr} expected`)}_t.ensureBytes=rr;function Qt(yr,vr){if(yr.length!==vr.length)throw new Error("equalBytes: Different size of Uint8Arrays");let Ir=!0;for(let xr=0;xr<yr.length;xr++)Ir&&(Ir=yr[xr]===vr[xr]);return Ir}_t.equalBytes=Qt;class Wt{}_t.Hash=Wt;function nr(yr,vr,Ir,xr){if(typeof yr.setBigUint64=="function")return yr.setBigUint64(vr,Ir,xr);const Or=BigInt(32),Nr=BigInt(4294967295),kr=Number(Ir>>Or&Nr),lr=Number(Ir&Nr),ir=xr?4:0,Xt=xr?0:4;yr.setUint32(vr+ir,kr,xr),yr.setUint32(vr+Xt,lr,xr)}_t.setBigUint64=nr})(utils$6);var config={},consts={};Object.defineProperty(consts,"__esModule",{value:!0});consts.AEAD_TAG_LENGTH=consts.XCHACHA20_NONCE_LENGTH=consts.CURVE25519_PUBLIC_KEY_SIZE=consts.ETH_PUBLIC_KEY_SIZE=consts.UNCOMPRESSED_PUBLIC_KEY_SIZE=consts.COMPRESSED_PUBLIC_KEY_SIZE=consts.SECRET_KEY_LENGTH=void 0;consts.SECRET_KEY_LENGTH=32;consts.COMPRESSED_PUBLIC_KEY_SIZE=33;consts.UNCOMPRESSED_PUBLIC_KEY_SIZE=65;consts.ETH_PUBLIC_KEY_SIZE=64;consts.CURVE25519_PUBLIC_KEY_SIZE=32;consts.XCHACHA20_NONCE_LENGTH=24;consts.AEAD_TAG_LENGTH=16;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.ephemeralKeySize=_t.symmetricNonceLength=_t.symmetricAlgorithm=_t.isHkdfKeyCompressed=_t.isEphemeralKeyCompressed=_t.ellipticCurve=_t.ECIES_CONFIG=void 0;var e=consts,$t=function(){function Ut(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}return Ut}();_t.ECIES_CONFIG=new $t;var xt=function(){return _t.ECIES_CONFIG.ellipticCurve};_t.ellipticCurve=xt;var At=function(){return _t.ECIES_CONFIG.isEphemeralKeyCompressed};_t.isEphemeralKeyCompressed=At;var kt=function(){return _t.ECIES_CONFIG.isHkdfKeyCompressed};_t.isHkdfKeyCompressed=kt;var Bt=function(){return _t.ECIES_CONFIG.symmetricAlgorithm};_t.symmetricAlgorithm=Bt;var jt=function(){return _t.ECIES_CONFIG.symmetricNonceLength};_t.symmetricNonceLength=jt;var Lt=function(){var Ut={secp256k1:_t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(_t.ECIES_CONFIG.ellipticCurve in Ut)return Ut[_t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")};_t.ephemeralKeySize=Lt})(config);var keys={},PrivateKey$1={},utils$5={},elliptic={},utils$4={},crypto$4={};Object.defineProperty(crypto$4,"__esModule",{value:!0});crypto$4.crypto=void 0;crypto$4.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;Object.defineProperty(utils$4,"__esModule",{value:!0});utils$4.getWebcryptoSubtle=utils$4.randomBytes=void 0;const crypto_1$1=crypto$4;function randomBytes$1(_t=32){if(crypto_1$1.crypto&&typeof crypto_1$1.crypto.getRandomValues=="function")return crypto_1$1.crypto.getRandomValues(new Uint8Array(_t));throw new Error("crypto.getRandomValues must be defined")}utils$4.randomBytes=randomBytes$1;function getWebcryptoSubtle$1(){if(crypto_1$1.crypto&&typeof crypto_1$1.crypto.subtle=="object"&&crypto_1$1.crypto.subtle!=null)return crypto_1$1.crypto.subtle;throw new Error("crypto.subtle must be defined")}utils$4.getWebcryptoSubtle=getWebcryptoSubtle$1;var ed25519$1={},sha512$1={},_md={},_assert$1={};Object.defineProperty(_assert$1,"__esModule",{value:!0});_assert$1.output=_assert$1.exists=_assert$1.hash=_assert$1.bytes=_assert$1.bool=_assert$1.number=_assert$1.isBytes=void 0;function number$2(_t){if(!Number.isSafeInteger(_t)||_t<0)throw new Error(`positive integer expected, not ${_t}`)}_assert$1.number=number$2;function bool$1(_t){if(typeof _t!="boolean")throw new Error(`boolean expected, not ${_t}`)}_assert$1.bool=bool$1;function isBytes$6(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}_assert$1.isBytes=isBytes$6;function bytes$3(_t,...e){if(!isBytes$6(_t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(_t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${_t.length}`)}_assert$1.bytes=bytes$3;function hash$2(_t){if(typeof _t!="function"||typeof _t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(_t.outputLen),number$2(_t.blockLen)}_assert$1.hash=hash$2;function exists$3(_t,e=!0){if(_t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&_t.finished)throw new Error("Hash#digest() has already been called")}_assert$1.exists=exists$3;function output$3(_t,e){bytes$3(_t);const $t=e.outputLen;if(_t.length<$t)throw new Error(`digestInto() expects output buffer of length at least ${$t}`)}_assert$1.output=output$3;const assert$3={number:number$2,bool:bool$1,bytes:bytes$3,hash:hash$2,exists:exists$3,output:output$3};_assert$1.default=assert$3;var utils$3={},crypto$3={};Object.defineProperty(crypto$3,"__esModule",{value:!0});crypto$3.crypto=void 0;crypto$3.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(_t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(_t,"__esModule",{value:!0}),_t.randomBytes=_t.wrapXOFConstructorWithOpts=_t.wrapConstructorWithOpts=_t.wrapConstructor=_t.checkOpts=_t.Hash=_t.concatBytes=_t.toBytes=_t.utf8ToBytes=_t.asyncLoop=_t.nextTick=_t.hexToBytes=_t.bytesToHex=_t.byteSwap32=_t.byteSwapIfBE=_t.byteSwap=_t.isLE=_t.rotl=_t.rotr=_t.createView=_t.u32=_t.u8=_t.isBytes=void 0;const e=crypto$3,$t=_assert$1;function xt(lr){return lr instanceof Uint8Array||lr!=null&&typeof lr=="object"&&lr.constructor.name==="Uint8Array"}_t.isBytes=xt;const At=lr=>new Uint8Array(lr.buffer,lr.byteOffset,lr.byteLength);_t.u8=At;const kt=lr=>new Uint32Array(lr.buffer,lr.byteOffset,Math.floor(lr.byteLength/4));_t.u32=kt;const Bt=lr=>new DataView(lr.buffer,lr.byteOffset,lr.byteLength);_t.createView=Bt;const jt=(lr,ir)=>lr<<32-ir|lr>>>ir;_t.rotr=jt;const Lt=(lr,ir)=>lr<<ir|lr>>>32-ir>>>0;_t.rotl=Lt,_t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const Ut=lr=>lr<<24&4278190080|lr<<8&16711680|lr>>>8&65280|lr>>>24&255;_t.byteSwap=Ut,_t.byteSwapIfBE=_t.isLE?lr=>lr:lr=>(0,_t.byteSwap)(lr);function Nt(lr){for(let ir=0;ir<lr.length;ir++)lr[ir]=(0,_t.byteSwap)(lr[ir])}_t.byteSwap32=Nt;const qt=Array.from({length:256},(lr,ir)=>ir.toString(16).padStart(2,"0"));function Kt(lr){(0,$t.bytes)(lr);let ir="";for(let Xt=0;Xt<lr.length;Xt++)ir+=qt[lr[Xt]];return ir}_t.bytesToHex=Kt;const zt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Vt(lr){if(lr>=zt._0&&lr<=zt._9)return lr-zt._0;if(lr>=zt._A&&lr<=zt._F)return lr-(zt._A-10);if(lr>=zt._a&&lr<=zt._f)return lr-(zt._a-10)}function Ht(lr){if(typeof lr!="string")throw new Error("hex string expected, got "+typeof lr);const ir=lr.length,Xt=ir/2;if(ir%2)throw new Error("padded hex string expected, got unpadded hex of length "+ir);const er=new Uint8Array(Xt);for(let pr=0,ur=0;pr<Xt;pr++,ur+=2){const gr=Vt(lr.charCodeAt(ur)),ar=Vt(lr.charCodeAt(ur+1));if(gr===void 0||ar===void 0){const tr=lr[ur]+lr[ur+1];throw new Error('hex string expected, got non-hex character "'+tr+'" at index '+ur)}er[pr]=gr*16+ar}return er}_t.hexToBytes=Ht;const Jt=async()=>{};_t.nextTick=Jt;async function rr(lr,ir,Xt){let er=Date.now();for(let pr=0;pr<lr;pr++){Xt(pr);const ur=Date.now()-er;ur>=0&&ur<ir||(await(0,_t.nextTick)(),er+=ur)}}_t.asyncLoop=rr;function Qt(lr){if(typeof lr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof lr}`);return new Uint8Array(new TextEncoder().encode(lr))}_t.utf8ToBytes=Qt;function Wt(lr){return typeof lr=="string"&&(lr=Qt(lr)),(0,$t.bytes)(lr),lr}_t.toBytes=Wt;function nr(...lr){let ir=0;for(let er=0;er<lr.length;er++){const pr=lr[er];(0,$t.bytes)(pr),ir+=pr.length}const Xt=new Uint8Array(ir);for(let er=0,pr=0;er<lr.length;er++){const ur=lr[er];Xt.set(ur,pr),pr+=ur.length}return Xt}_t.concatBytes=nr;class yr{clone(){return this._cloneInto()}}_t.Hash=yr;const vr={}.toString;function Ir(lr,ir){if(ir!==void 0&&vr.call(ir)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(lr,ir)}_t.checkOpts=Ir;function xr(lr){const ir=er=>lr().update(Wt(er)).digest(),Xt=lr();return ir.outputLen=Xt.outputLen,ir.blockLen=Xt.blockLen,ir.create=()=>lr(),ir}_t.wrapConstructor=xr;function Or(lr){const ir=(er,pr)=>lr(pr).update(Wt(er)).digest(),Xt=lr({});return ir.outputLen=Xt.outputLen,ir.blockLen=Xt.blockLen,ir.create=er=>lr(er),ir}_t.wrapConstructorWithOpts=Or;function Nr(lr){const ir=(er,pr)=>lr(pr).update(Wt(er)).digest(),Xt=lr({});return ir.outputLen=Xt.outputLen,ir.blockLen=Xt.blockLen,ir.create=er=>lr(er),ir}_t.wrapXOFConstructorWithOpts=Nr;function kr(lr=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(lr));throw new Error("crypto.getRandomValues must be defined")}_t.randomBytes=kr})(utils$3);Object.defineProperty(_md,"__esModule",{value:!0});_md.HashMD=_md.Maj=_md.Chi=void 0;const _assert_js_1$3=_assert$1,utils_js_1$a=utils$3;function setBigUint64$1(_t,e,$t,xt){if(typeof _t.setBigUint64=="function")return _t.setBigUint64(e,$t,xt);const At=BigInt(32),kt=BigInt(4294967295),Bt=Number($t>>At&kt),jt=Number($t&kt),Lt=xt?4:0,Ut=xt?0:4;_t.setUint32(e+Lt,Bt,xt),_t.setUint32(e+Ut,jt,xt)}const Chi$1=(_t,e,$t)=>_t&e^~_t&$t;_md.Chi=Chi$1;const Maj$1=(_t,e,$t)=>_t&e^_t&$t^e&$t;_md.Maj=Maj$1;class HashMD extends utils_js_1$a.Hash{constructor(e,$t,xt,At){super(),this.blockLen=e,this.outputLen=$t,this.padOffset=xt,this.isLE=At,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,utils_js_1$a.createView)(this.buffer)}update(e){(0,_assert_js_1$3.exists)(this);const{view:$t,buffer:xt,blockLen:At}=this;e=(0,utils_js_1$a.toBytes)(e);const kt=e.length;for(let Bt=0;Bt<kt;){const jt=Math.min(At-this.pos,kt-Bt);if(jt===At){const Lt=(0,utils_js_1$a.createView)(e);for(;At<=kt-Bt;Bt+=At)this.process(Lt,Bt);continue}xt.set(e.subarray(Bt,Bt+jt),this.pos),this.pos+=jt,Bt+=jt,this.pos===At&&(this.process($t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,_assert_js_1$3.exists)(this),(0,_assert_js_1$3.output)(e,this),this.finished=!0;const{buffer:$t,view:xt,blockLen:At,isLE:kt}=this;let{pos:Bt}=this;$t[Bt++]=128,this.buffer.subarray(Bt).fill(0),this.padOffset>At-Bt&&(this.process(xt,0),Bt=0);for(let qt=Bt;qt<At;qt++)$t[qt]=0;setBigUint64$1(xt,At-8,BigInt(this.length*8),kt),this.process(xt,0);const jt=(0,utils_js_1$a.createView)(e),Lt=this.outputLen;if(Lt%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const Ut=Lt/4,Nt=this.get();if(Ut>Nt.length)throw new Error("_sha2: outputLen bigger than state");for(let qt=0;qt<Ut;qt++)jt.setUint32(4*qt,Nt[qt],kt)}digest(){const{buffer:e,outputLen:$t}=this;this.digestInto(e);const xt=e.slice(0,$t);return this.destroy(),xt}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:$t,buffer:xt,length:At,finished:kt,destroyed:Bt,pos:jt}=this;return e.length=At,e.pos=jt,e.finished=kt,e.destroyed=Bt,At%$t&&e.buffer.set(xt),e}}_md.HashMD=HashMD;var _u64={};Object.defineProperty(_u64,"__esModule",{value:!0});_u64.add5L=_u64.add5H=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(_t,e=!1){return e?{h:Number(_t&U32_MASK64$1),l:Number(_t>>_32n$1&U32_MASK64$1)}:{h:Number(_t>>_32n$1&U32_MASK64$1)|0,l:Number(_t&U32_MASK64$1)|0}}_u64.fromBig=fromBig$1;function split$1(_t,e=!1){let $t=new Uint32Array(_t.length),xt=new Uint32Array(_t.length);for(let At=0;At<_t.length;At++){const{h:kt,l:Bt}=fromBig$1(_t[At],e);[$t[At],xt[At]]=[kt,Bt]}return[$t,xt]}_u64.split=split$1;const toBig$1=(_t,e)=>BigInt(_t>>>0)<<_32n$1|BigInt(e>>>0);_u64.toBig=toBig$1;const shrSH$1=(_t,e,$t)=>_t>>>$t;_u64.shrSH=shrSH$1;const shrSL$1=(_t,e,$t)=>_t<<32-$t|e>>>$t;_u64.shrSL=shrSL$1;const rotrSH$1=(_t,e,$t)=>_t>>>$t|e<<32-$t;_u64.rotrSH=rotrSH$1;const rotrSL$1=(_t,e,$t)=>_t<<32-$t|e>>>$t;_u64.rotrSL=rotrSL$1;const rotrBH$1=(_t,e,$t)=>_t<<64-$t|e>>>$t-32;_u64.rotrBH=rotrBH$1;const rotrBL$1=(_t,e,$t)=>_t>>>$t-32|e<<64-$t;_u64.rotrBL=rotrBL$1;const rotr32H$1=(_t,e)=>e;_u64.rotr32H=rotr32H$1;const rotr32L$1=(_t,e)=>_t;_u64.rotr32L=rotr32L$1;const rotlSH$1=(_t,e,$t)=>_t<<$t|e>>>32-$t;_u64.rotlSH=rotlSH$1;const rotlSL$1=(_t,e,$t)=>e<<$t|_t>>>32-$t;_u64.rotlSL=rotlSL$1;const rotlBH$1=(_t,e,$t)=>e<<$t-32|_t>>>64-$t;_u64.rotlBH=rotlBH$1;const rotlBL$1=(_t,e,$t)=>_t<<$t-32|e>>>64-$t;_u64.rotlBL=rotlBL$1;function add$1(_t,e,$t,xt){const At=(e>>>0)+(xt>>>0);return{h:_t+$t+(At/2**32|0)|0,l:At|0}}_u64.add=add$1;const add3L$1=(_t,e,$t)=>(_t>>>0)+(e>>>0)+($t>>>0);_u64.add3L=add3L$1;const add3H$1=(_t,e,$t,xt)=>e+$t+xt+(_t/2**32|0)|0;_u64.add3H=add3H$1;const add4L$1=(_t,e,$t,xt)=>(_t>>>0)+(e>>>0)+($t>>>0)+(xt>>>0);_u64.add4L=add4L$1;const add4H$1=(_t,e,$t,xt,At)=>e+$t+xt+At+(_t/2**32|0)|0;_u64.add4H=add4H$1;const add5L$1=(_t,e,$t,xt,At)=>(_t>>>0)+(e>>>0)+($t>>>0)+(xt>>>0)+(At>>>0);_u64.add5L=add5L$1;const add5H$1=(_t,e,$t,xt,At,kt)=>e+$t+xt+At+kt+(_t/2**32|0)|0;_u64.add5H=add5H$1;const u64$1={fromBig:fromBig$1,split:split$1,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1};_u64.default=u64$1;Object.defineProperty(sha512$1,"__esModule",{value:!0});sha512$1.sha384=sha512$1.sha512_256=sha512$1.sha512_224=sha512$1.sha512=sha512$1.SHA512=void 0;const _md_js_1$1=_md,_u64_js_1=_u64,utils_js_1$9=utils$3,[SHA512_Kh$1,SHA512_Kl$1]=_u64_js_1.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(_t=>BigInt(_t))),SHA512_W_H$1=new Uint32Array(80),SHA512_W_L$1=new Uint32Array(80);let SHA512$1=class extends _md_js_1$1.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:$t,Bh:xt,Bl:At,Ch:kt,Cl:Bt,Dh:jt,Dl:Lt,Eh:Ut,El:Nt,Fh:qt,Fl:Kt,Gh:zt,Gl:Vt,Hh:Ht,Hl:Jt}=this;return[e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt]}set(e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt){this.Ah=e|0,this.Al=$t|0,this.Bh=xt|0,this.Bl=At|0,this.Ch=kt|0,this.Cl=Bt|0,this.Dh=jt|0,this.Dl=Lt|0,this.Eh=Ut|0,this.El=Nt|0,this.Fh=qt|0,this.Fl=Kt|0,this.Gh=zt|0,this.Gl=Vt|0,this.Hh=Ht|0,this.Hl=Jt|0}process(e,$t){for(let Wt=0;Wt<16;Wt++,$t+=4)SHA512_W_H$1[Wt]=e.getUint32($t),SHA512_W_L$1[Wt]=e.getUint32($t+=4);for(let Wt=16;Wt<80;Wt++){const nr=SHA512_W_H$1[Wt-15]|0,yr=SHA512_W_L$1[Wt-15]|0,vr=_u64_js_1.default.rotrSH(nr,yr,1)^_u64_js_1.default.rotrSH(nr,yr,8)^_u64_js_1.default.shrSH(nr,yr,7),Ir=_u64_js_1.default.rotrSL(nr,yr,1)^_u64_js_1.default.rotrSL(nr,yr,8)^_u64_js_1.default.shrSL(nr,yr,7),xr=SHA512_W_H$1[Wt-2]|0,Or=SHA512_W_L$1[Wt-2]|0,Nr=_u64_js_1.default.rotrSH(xr,Or,19)^_u64_js_1.default.rotrBH(xr,Or,61)^_u64_js_1.default.shrSH(xr,Or,6),kr=_u64_js_1.default.rotrSL(xr,Or,19)^_u64_js_1.default.rotrBL(xr,Or,61)^_u64_js_1.default.shrSL(xr,Or,6),lr=_u64_js_1.default.add4L(Ir,kr,SHA512_W_L$1[Wt-7],SHA512_W_L$1[Wt-16]),ir=_u64_js_1.default.add4H(lr,vr,Nr,SHA512_W_H$1[Wt-7],SHA512_W_H$1[Wt-16]);SHA512_W_H$1[Wt]=ir|0,SHA512_W_L$1[Wt]=lr|0}let{Ah:xt,Al:At,Bh:kt,Bl:Bt,Ch:jt,Cl:Lt,Dh:Ut,Dl:Nt,Eh:qt,El:Kt,Fh:zt,Fl:Vt,Gh:Ht,Gl:Jt,Hh:rr,Hl:Qt}=this;for(let Wt=0;Wt<80;Wt++){const nr=_u64_js_1.default.rotrSH(qt,Kt,14)^_u64_js_1.default.rotrSH(qt,Kt,18)^_u64_js_1.default.rotrBH(qt,Kt,41),yr=_u64_js_1.default.rotrSL(qt,Kt,14)^_u64_js_1.default.rotrSL(qt,Kt,18)^_u64_js_1.default.rotrBL(qt,Kt,41),vr=qt&zt^~qt&Ht,Ir=Kt&Vt^~Kt&Jt,xr=_u64_js_1.default.add5L(Qt,yr,Ir,SHA512_Kl$1[Wt],SHA512_W_L$1[Wt]),Or=_u64_js_1.default.add5H(xr,rr,nr,vr,SHA512_Kh$1[Wt],SHA512_W_H$1[Wt]),Nr=xr|0,kr=_u64_js_1.default.rotrSH(xt,At,28)^_u64_js_1.default.rotrBH(xt,At,34)^_u64_js_1.default.rotrBH(xt,At,39),lr=_u64_js_1.default.rotrSL(xt,At,28)^_u64_js_1.default.rotrBL(xt,At,34)^_u64_js_1.default.rotrBL(xt,At,39),ir=xt&kt^xt&jt^kt&jt,Xt=At&Bt^At&Lt^Bt&Lt;rr=Ht|0,Qt=Jt|0,Ht=zt|0,Jt=Vt|0,zt=qt|0,Vt=Kt|0,{h:qt,l:Kt}=_u64_js_1.default.add(Ut|0,Nt|0,Or|0,Nr|0),Ut=jt|0,Nt=Lt|0,jt=kt|0,Lt=Bt|0,kt=xt|0,Bt=At|0;const er=_u64_js_1.default.add3L(Nr,lr,Xt);xt=_u64_js_1.default.add3H(er,Or,kr,ir),At=er|0}({h:xt,l:At}=_u64_js_1.default.add(this.Ah|0,this.Al|0,xt|0,At|0)),{h:kt,l:Bt}=_u64_js_1.default.add(this.Bh|0,this.Bl|0,kt|0,Bt|0),{h:jt,l:Lt}=_u64_js_1.default.add(this.Ch|0,this.Cl|0,jt|0,Lt|0),{h:Ut,l:Nt}=_u64_js_1.default.add(this.Dh|0,this.Dl|0,Ut|0,Nt|0),{h:qt,l:Kt}=_u64_js_1.default.add(this.Eh|0,this.El|0,qt|0,Kt|0),{h:zt,l:Vt}=_u64_js_1.default.add(this.Fh|0,this.Fl|0,zt|0,Vt|0),{h:Ht,l:Jt}=_u64_js_1.default.add(this.Gh|0,this.Gl|0,Ht|0,Jt|0),{h:rr,l:Qt}=_u64_js_1.default.add(this.Hh|0,this.Hl|0,rr|0,Qt|0),this.set(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt)}roundClean(){SHA512_W_H$1.fill(0),SHA512_W_L$1.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};sha512$1.SHA512=SHA512$1;class SHA512_224 extends SHA512$1{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class SHA512_256 extends SHA512$1{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class SHA384 extends SHA512$1{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}sha512$1.sha512=(0,utils_js_1$9.wrapConstructor)(()=>new SHA512$1);sha512$1.sha512_224=(0,utils_js_1$9.wrapConstructor)(()=>new SHA512_224);sha512$1.sha512_256=(0,utils_js_1$9.wrapConstructor)(()=>new SHA512_256);sha512$1.sha384=(0,utils_js_1$9.wrapConstructor)(()=>new SHA384);const require$$1$1=getAugmentedNamespace(utils$v);var edwards={},curve={},modular={},utils$2={};Object.defineProperty(utils$2,"__esModule",{value:!0});utils$2.bitMask=void 0;utils$2.isBytes=isBytes$5;utils$2.abytes=abytes;utils$2.bytesToHex=bytesToHex$1;utils$2.numberToHexUnpadded=numberToHexUnpadded$1;utils$2.hexToNumber=hexToNumber$1;utils$2.hexToBytes=hexToBytes$1;utils$2.bytesToNumberBE=bytesToNumberBE$1;utils$2.bytesToNumberLE=bytesToNumberLE$1;utils$2.numberToBytesBE=numberToBytesBE$1;utils$2.numberToBytesLE=numberToBytesLE$1;utils$2.numberToVarBytesBE=numberToVarBytesBE$1;utils$2.ensureBytes=ensureBytes$2;utils$2.concatBytes=concatBytes$2;utils$2.equalBytes=equalBytes$1;utils$2.utf8ToBytes=utf8ToBytes$3;utils$2.bitLen=bitLen$1;utils$2.bitGet=bitGet$1;utils$2.bitSet=bitSet$1;utils$2.createHmacDrbg=createHmacDrbg$1;utils$2.validateObject=validateObject$7;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$a=BigInt(0),_1n$c=BigInt(1),_2n$7=BigInt(2);function isBytes$5(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}function abytes(_t){if(!isBytes$5(_t))throw new Error("Uint8Array expected")}const hexes$1=Array.from({length:256},(_t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(_t){abytes(_t);let e="";for(let $t=0;$t<_t.length;$t++)e+=hexes$1[_t[$t]];return e}function numberToHexUnpadded$1(_t){const e=_t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber$1(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);return BigInt(_t===""?"0":`0x${_t}`)}const asciis$1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$1(_t){if(_t>=asciis$1._0&&_t<=asciis$1._9)return _t-asciis$1._0;if(_t>=asciis$1._A&&_t<=asciis$1._F)return _t-(asciis$1._A-10);if(_t>=asciis$1._a&&_t<=asciis$1._f)return _t-(asciis$1._a-10)}function hexToBytes$1(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);const e=_t.length,$t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const xt=new Uint8Array($t);for(let At=0,kt=0;At<$t;At++,kt+=2){const Bt=asciiToBase16$1(_t.charCodeAt(kt)),jt=asciiToBase16$1(_t.charCodeAt(kt+1));if(Bt===void 0||jt===void 0){const Lt=_t[kt]+_t[kt+1];throw new Error('hex string expected, got non-hex character "'+Lt+'" at index '+kt)}xt[At]=Bt*16+jt}return xt}function bytesToNumberBE$1(_t){return hexToNumber$1(bytesToHex$1(_t))}function bytesToNumberLE$1(_t){return abytes(_t),hexToNumber$1(bytesToHex$1(Uint8Array.from(_t).reverse()))}function numberToBytesBE$1(_t,e){return hexToBytes$1(_t.toString(16).padStart(e*2,"0"))}function numberToBytesLE$1(_t,e){return numberToBytesBE$1(_t,e).reverse()}function numberToVarBytesBE$1(_t){return hexToBytes$1(numberToHexUnpadded$1(_t))}function ensureBytes$2(_t,e,$t){let xt;if(typeof e=="string")try{xt=hexToBytes$1(e)}catch(kt){throw new Error(`${_t} must be valid hex string, got "${e}". Cause: ${kt}`)}else if(isBytes$5(e))xt=Uint8Array.from(e);else throw new Error(`${_t} must be hex string or Uint8Array`);const At=xt.length;if(typeof $t=="number"&&At!==$t)throw new Error(`${_t} expected ${$t} bytes, got ${At}`);return xt}function concatBytes$2(..._t){let e=0;for(let xt=0;xt<_t.length;xt++){const At=_t[xt];abytes(At),e+=At.length}const $t=new Uint8Array(e);for(let xt=0,At=0;xt<_t.length;xt++){const kt=_t[xt];$t.set(kt,At),At+=kt.length}return $t}function equalBytes$1(_t,e){if(_t.length!==e.length)return!1;let $t=0;for(let xt=0;xt<_t.length;xt++)$t|=_t[xt]^e[xt];return $t===0}function utf8ToBytes$3(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function bitLen$1(_t){let e;for(e=0;_t>_0n$a;_t>>=_1n$c,e+=1);return e}function bitGet$1(_t,e){return _t>>BigInt(e)&_1n$c}function bitSet$1(_t,e,$t){return _t|($t?_1n$c:_0n$a)<<BigInt(e)}const bitMask$1=_t=>(_2n$7<<BigInt(_t-1))-_1n$c;utils$2.bitMask=bitMask$1;const u8n$1=_t=>new Uint8Array(_t),u8fr$1=_t=>Uint8Array.from(_t);function createHmacDrbg$1(_t,e,$t){if(typeof _t!="number"||_t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof $t!="function")throw new Error("hmacFn must be a function");let xt=u8n$1(_t),At=u8n$1(_t),kt=0;const Bt=()=>{xt.fill(1),At.fill(0),kt=0},jt=(...qt)=>$t(At,xt,...qt),Lt=(qt=u8n$1())=>{At=jt(u8fr$1([0]),qt),xt=jt(),qt.length!==0&&(At=jt(u8fr$1([1]),qt),xt=jt())},Ut=()=>{if(kt++>=1e3)throw new Error("drbg: tried 1000 values");let qt=0;const Kt=[];for(;qt<e;){xt=jt();const zt=xt.slice();Kt.push(zt),qt+=xt.length}return concatBytes$2(...Kt)};return(qt,Kt)=>{Bt(),Lt(qt);let zt;for(;!(zt=Kt(Ut()));)Lt();return Bt(),zt}}const validatorFns$1={bigint:_t=>typeof _t=="bigint",function:_t=>typeof _t=="function",boolean:_t=>typeof _t=="boolean",string:_t=>typeof _t=="string",stringOrUint8Array:_t=>typeof _t=="string"||isBytes$5(_t),isSafeInteger:_t=>Number.isSafeInteger(_t),array:_t=>Array.isArray(_t),field:(_t,e)=>e.Fp.isValid(_t),hash:_t=>typeof _t=="function"&&Number.isSafeInteger(_t.outputLen)};function validateObject$7(_t,e,$t={}){const xt=(At,kt,Bt)=>{const jt=validatorFns$1[kt];if(typeof jt!="function")throw new Error(`Invalid validator "${kt}", expected function`);const Lt=_t[At];if(!(Bt&&Lt===void 0)&&!jt(Lt,_t))throw new Error(`Invalid param ${String(At)}=${Lt} (${typeof Lt}), expected ${kt}`)};for(const[At,kt]of Object.entries(e))xt(At,kt,!1);for(const[At,kt]of Object.entries($t))xt(At,kt,!0);return _t}Object.defineProperty(modular,"__esModule",{value:!0});modular.isNegativeLE=void 0;modular.mod=mod$1;modular.pow=pow$1;modular.pow2=pow2$1;modular.invert=invert$1;modular.tonelliShanks=tonelliShanks$1;modular.FpSqrt=FpSqrt$1;modular.validateField=validateField$1;modular.FpPow=FpPow$1;modular.FpInvertBatch=FpInvertBatch$1;modular.FpDiv=FpDiv;modular.FpIsSquare=FpIsSquare;modular.nLength=nLength$1;modular.Field=Field$1;modular.FpSqrtOdd=FpSqrtOdd;modular.FpSqrtEven=FpSqrtEven$1;modular.hashToPrivateScalar=hashToPrivateScalar;modular.getFieldBytesLength=getFieldBytesLength$1;modular.getMinHashLength=getMinHashLength$1;modular.mapHashToField=mapHashToField$1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const utils_js_1$8=utils$2,_0n$9=BigInt(0),_1n$b=BigInt(1),_2n$6=BigInt(2),_3n$2=BigInt(3),_4n$1=BigInt(4),_5n$2=BigInt(5),_8n$3=BigInt(8);BigInt(9);BigInt(16);function mod$1(_t,e){const $t=_t%e;return $t>=_0n$9?$t:e+$t}function pow$1(_t,e,$t){if($t<=_0n$9||e<_0n$9)throw new Error("Expected power/modulo > 0");if($t===_1n$b)return _0n$9;let xt=_1n$b;for(;e>_0n$9;)e&_1n$b&&(xt=xt*_t%$t),_t=_t*_t%$t,e>>=_1n$b;return xt}function pow2$1(_t,e,$t){let xt=_t;for(;e-- >_0n$9;)xt*=xt,xt%=$t;return xt}function invert$1(_t,e){if(_t===_0n$9||e<=_0n$9)throw new Error(`invert: expected positive integers, got n=${_t} mod=${e}`);let $t=mod$1(_t,e),xt=e,At=_0n$9,kt=_1n$b;for(;$t!==_0n$9;){const jt=xt/$t,Lt=xt%$t,Ut=At-kt*jt;xt=$t,$t=Lt,At=kt,kt=Ut}if(xt!==_1n$b)throw new Error("invert: does not exist");return mod$1(At,e)}function tonelliShanks$1(_t){const e=(_t-_1n$b)/_2n$6;let $t,xt,At;for($t=_t-_1n$b,xt=0;$t%_2n$6===_0n$9;$t/=_2n$6,xt++);for(At=_2n$6;At<_t&&pow$1(At,e,_t)!==_t-_1n$b;At++);if(xt===1){const Bt=(_t+_1n$b)/_4n$1;return function(Lt,Ut){const Nt=Lt.pow(Ut,Bt);if(!Lt.eql(Lt.sqr(Nt),Ut))throw new Error("Cannot find square root");return Nt}}const kt=($t+_1n$b)/_2n$6;return function(jt,Lt){if(jt.pow(Lt,e)===jt.neg(jt.ONE))throw new Error("Cannot find square root");let Ut=xt,Nt=jt.pow(jt.mul(jt.ONE,At),$t),qt=jt.pow(Lt,kt),Kt=jt.pow(Lt,$t);for(;!jt.eql(Kt,jt.ONE);){if(jt.eql(Kt,jt.ZERO))return jt.ZERO;let zt=1;for(let Ht=jt.sqr(Kt);zt<Ut&&!jt.eql(Ht,jt.ONE);zt++)Ht=jt.sqr(Ht);const Vt=jt.pow(Nt,_1n$b<<BigInt(Ut-zt-1));Nt=jt.sqr(Vt),qt=jt.mul(qt,Vt),Kt=jt.mul(Kt,Nt),Ut=zt}return qt}}function FpSqrt$1(_t){if(_t%_4n$1===_3n$2){const e=(_t+_1n$b)/_4n$1;return function(xt,At){const kt=xt.pow(At,e);if(!xt.eql(xt.sqr(kt),At))throw new Error("Cannot find square root");return kt}}if(_t%_8n$3===_5n$2){const e=(_t-_5n$2)/_8n$3;return function(xt,At){const kt=xt.mul(At,_2n$6),Bt=xt.pow(kt,e),jt=xt.mul(At,Bt),Lt=xt.mul(xt.mul(jt,_2n$6),Bt),Ut=xt.mul(jt,xt.sub(Lt,xt.ONE));if(!xt.eql(xt.sqr(Ut),At))throw new Error("Cannot find square root");return Ut}}return tonelliShanks$1(_t)}const isNegativeLE$1=(_t,e)=>(mod$1(_t,e)&_1n$b)===_1n$b;modular.isNegativeLE=isNegativeLE$1;const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(_t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},$t=FIELD_FIELDS$1.reduce((xt,At)=>(xt[At]="function",xt),e);return(0,utils_js_1$8.validateObject)(_t,$t)}function FpPow$1(_t,e,$t){if($t<_0n$9)throw new Error("Expected power > 0");if($t===_0n$9)return _t.ONE;if($t===_1n$b)return e;let xt=_t.ONE,At=e;for(;$t>_0n$9;)$t&_1n$b&&(xt=_t.mul(xt,At)),At=_t.sqr(At),$t>>=_1n$b;return xt}function FpInvertBatch$1(_t,e){const $t=new Array(e.length),xt=e.reduce((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=kt,_t.mul(kt,Bt)),_t.ONE),At=_t.inv(xt);return e.reduceRight((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=_t.mul(kt,$t[jt]),_t.mul(kt,Bt)),At),$t}function FpDiv(_t,e,$t){return _t.mul(e,typeof $t=="bigint"?invert$1($t,_t.ORDER):_t.inv($t))}function FpIsSquare(_t){const e=(_t.ORDER-_1n$b)/_2n$6;return $t=>{const xt=_t.pow($t,e);return _t.eql(xt,_t.ZERO)||_t.eql(xt,_t.ONE)}}function nLength$1(_t,e){const $t=e!==void 0?e:_t.toString(2).length,xt=Math.ceil($t/8);return{nBitLength:$t,nByteLength:xt}}function Field$1(_t,e,$t=!1,xt={}){if(_t<=_0n$9)throw new Error(`Expected Field ORDER > 0, got ${_t}`);const{nBitLength:At,nByteLength:kt}=nLength$1(_t,e);if(kt>2048)throw new Error("Field lengths over 2048 bytes are not supported");const Bt=FpSqrt$1(_t),jt=Object.freeze({ORDER:_t,BITS:At,BYTES:kt,MASK:(0,utils_js_1$8.bitMask)(At),ZERO:_0n$9,ONE:_1n$b,create:Lt=>mod$1(Lt,_t),isValid:Lt=>{if(typeof Lt!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof Lt}`);return _0n$9<=Lt&&Lt<_t},is0:Lt=>Lt===_0n$9,isOdd:Lt=>(Lt&_1n$b)===_1n$b,neg:Lt=>mod$1(-Lt,_t),eql:(Lt,Ut)=>Lt===Ut,sqr:Lt=>mod$1(Lt*Lt,_t),add:(Lt,Ut)=>mod$1(Lt+Ut,_t),sub:(Lt,Ut)=>mod$1(Lt-Ut,_t),mul:(Lt,Ut)=>mod$1(Lt*Ut,_t),pow:(Lt,Ut)=>FpPow$1(jt,Lt,Ut),div:(Lt,Ut)=>mod$1(Lt*invert$1(Ut,_t),_t),sqrN:Lt=>Lt*Lt,addN:(Lt,Ut)=>Lt+Ut,subN:(Lt,Ut)=>Lt-Ut,mulN:(Lt,Ut)=>Lt*Ut,inv:Lt=>invert$1(Lt,_t),sqrt:xt.sqrt||(Lt=>Bt(jt,Lt)),invertBatch:Lt=>FpInvertBatch$1(jt,Lt),cmov:(Lt,Ut,Nt)=>Nt?Ut:Lt,toBytes:Lt=>$t?(0,utils_js_1$8.numberToBytesLE)(Lt,kt):(0,utils_js_1$8.numberToBytesBE)(Lt,kt),fromBytes:Lt=>{if(Lt.length!==kt)throw new Error(`Fp.fromBytes: expected ${kt}, got ${Lt.length}`);return $t?(0,utils_js_1$8.bytesToNumberLE)(Lt):(0,utils_js_1$8.bytesToNumberBE)(Lt)}});return Object.freeze(jt)}function FpSqrtOdd(_t,e){if(!_t.isOdd)throw new Error("Field doesn't have isOdd");const $t=_t.sqrt(e);return _t.isOdd($t)?$t:_t.neg($t)}function FpSqrtEven$1(_t,e){if(!_t.isOdd)throw new Error("Field doesn't have isOdd");const $t=_t.sqrt(e);return _t.isOdd($t)?_t.neg($t):$t}function hashToPrivateScalar(_t,e,$t=!1){_t=(0,utils_js_1$8.ensureBytes)("privateHash",_t);const xt=_t.length,At=nLength$1(e).nByteLength+8;if(At<24||xt<At||xt>1024)throw new Error(`hashToPrivateScalar: expected ${At}-1024 bytes of input, got ${xt}`);const kt=$t?(0,utils_js_1$8.bytesToNumberLE)(_t):(0,utils_js_1$8.bytesToNumberBE)(_t);return mod$1(kt,e-_1n$b)+_1n$b}function getFieldBytesLength$1(_t){if(typeof _t!="bigint")throw new Error("field order must be bigint");const e=_t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$1(_t){const e=getFieldBytesLength$1(_t);return e+Math.ceil(e/2)}function mapHashToField$1(_t,e,$t=!1){const xt=_t.length,At=getFieldBytesLength$1(e),kt=getMinHashLength$1(e);if(xt<16||xt<kt||xt>1024)throw new Error(`expected ${kt}-1024 bytes of input, got ${xt}`);const Bt=$t?(0,utils_js_1$8.bytesToNumberBE)(_t):(0,utils_js_1$8.bytesToNumberLE)(_t),jt=mod$1(Bt,e-_1n$b)+_1n$b;return $t?(0,utils_js_1$8.numberToBytesLE)(jt,At):(0,utils_js_1$8.numberToBytesBE)(jt,At)}Object.defineProperty(curve,"__esModule",{value:!0});curve.wNAF=wNAF$1;curve.validateBasic=validateBasic$1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const modular_js_1$3=modular,utils_js_1$7=utils$2,_0n$8=BigInt(0),_1n$a=BigInt(1);function wNAF$1(_t,e){const $t=(At,kt)=>{const Bt=kt.negate();return At?Bt:kt},xt=At=>{const kt=Math.ceil(e/At)+1,Bt=2**(At-1);return{windows:kt,windowSize:Bt}};return{constTimeNegate:$t,unsafeLadder(At,kt){let Bt=_t.ZERO,jt=At;for(;kt>_0n$8;)kt&_1n$a&&(Bt=Bt.add(jt)),jt=jt.double(),kt>>=_1n$a;return Bt},precomputeWindow(At,kt){const{windows:Bt,windowSize:jt}=xt(kt),Lt=[];let Ut=At,Nt=Ut;for(let qt=0;qt<Bt;qt++){Nt=Ut,Lt.push(Nt);for(let Kt=1;Kt<jt;Kt++)Nt=Nt.add(Ut),Lt.push(Nt);Ut=Nt.double()}return Lt},wNAF(At,kt,Bt){const{windows:jt,windowSize:Lt}=xt(At);let Ut=_t.ZERO,Nt=_t.BASE;const qt=BigInt(2**At-1),Kt=2**At,zt=BigInt(At);for(let Vt=0;Vt<jt;Vt++){const Ht=Vt*Lt;let Jt=Number(Bt&qt);Bt>>=zt,Jt>Lt&&(Jt-=Kt,Bt+=_1n$a);const rr=Ht,Qt=Ht+Math.abs(Jt)-1,Wt=Vt%2!==0,nr=Jt<0;Jt===0?Nt=Nt.add($t(Wt,kt[rr])):Ut=Ut.add($t(nr,kt[Qt]))}return{p:Ut,f:Nt}},wNAFCached(At,kt,Bt,jt){const Lt=At._WINDOW_SIZE||1;let Ut=kt.get(At);return Ut||(Ut=this.precomputeWindow(At,Lt),Lt!==1&&kt.set(At,jt(Ut))),this.wNAF(Lt,Ut,Bt)}}}function validateBasic$1(_t){return(0,modular_js_1$3.validateField)(_t.Fp),(0,utils_js_1$7.validateObject)(_t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,modular_js_1$3.nLength)(_t.n,_t.nBitLength),..._t,p:_t.Fp.ORDER})}Object.defineProperty(edwards,"__esModule",{value:!0});edwards.twistedEdwards=twistedEdwards$1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const curve_js_1=curve,modular_js_1$2=modular,ut$1=utils$2,utils_js_1$6=utils$2,_0n$7=BigInt(0),_1n$9=BigInt(1),_2n$5=BigInt(2),_8n$2=BigInt(8),VERIFY_DEFAULT$1={zip215:!0};function validateOpts$4(_t){const e=(0,curve_js_1.validateBasic)(_t);return ut$1.validateObject(_t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards$1(_t){const e=validateOpts$4(_t),{Fp:$t,n:xt,prehash:At,hash:kt,randomBytes:Bt,nByteLength:jt,h:Lt}=e,Ut=_2n$5<<BigInt(jt*8)-_1n$9,Nt=$t.create,qt=e.uvRatio||((gr,ar)=>{try{return{isValid:!0,value:$t.sqrt(gr*$t.inv(ar))}}catch{return{isValid:!1,value:_0n$7}}}),Kt=e.adjustScalarBytes||(gr=>gr),zt=e.domain||((gr,ar,tr)=>{if(ar.length||tr)throw new Error("Contexts/pre-hash are not supported");return gr}),Vt=gr=>typeof gr=="bigint"&&_0n$7<gr,Ht=(gr,ar)=>Vt(gr)&&Vt(ar)&&gr<ar,Jt=gr=>gr===_0n$7||Ht(gr,Ut);function rr(gr,ar){if(Ht(gr,ar))return gr;throw new Error(`Expected valid scalar < ${ar}, got ${typeof gr} ${gr}`)}function Qt(gr){return gr===_0n$7?gr:rr(gr,xt)}const Wt=new Map;function nr(gr){if(!(gr instanceof yr))throw new Error("ExtendedPoint expected")}class yr{constructor(ar,tr,dr,fr){if(this.ex=ar,this.ey=tr,this.ez=dr,this.et=fr,!Jt(ar))throw new Error("x required");if(!Jt(tr))throw new Error("y required");if(!Jt(dr))throw new Error("z required");if(!Jt(fr))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ar){if(ar instanceof yr)throw new Error("extended point not allowed");const{x:tr,y:dr}=ar||{};if(!Jt(tr)||!Jt(dr))throw new Error("invalid affine point");return new yr(tr,dr,_1n$9,Nt(tr*dr))}static normalizeZ(ar){const tr=$t.invertBatch(ar.map(dr=>dr.ez));return ar.map((dr,fr)=>dr.toAffine(tr[fr])).map(yr.fromAffine)}_setWindowSize(ar){this._WINDOW_SIZE=ar,Wt.delete(this)}assertValidity(){const{a:ar,d:tr}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:dr,ey:fr,ez:br,et:Sr}=this,Dr=Nt(dr*dr),Er=Nt(fr*fr),wr=Nt(br*br),Tr=Nt(wr*wr),Mr=Nt(Dr*ar),Lr=Nt(wr*Nt(Mr+Er)),Cr=Nt(Tr+Nt(tr*Nt(Dr*Er)));if(Lr!==Cr)throw new Error("bad point: equation left != right (1)");const Br=Nt(dr*fr),$r=Nt(br*Sr);if(Br!==$r)throw new Error("bad point: equation left != right (2)")}equals(ar){nr(ar);const{ex:tr,ey:dr,ez:fr}=this,{ex:br,ey:Sr,ez:Dr}=ar,Er=Nt(tr*Dr),wr=Nt(br*fr),Tr=Nt(dr*Dr),Mr=Nt(Sr*fr);return Er===wr&&Tr===Mr}is0(){return this.equals(yr.ZERO)}negate(){return new yr(Nt(-this.ex),this.ey,this.ez,Nt(-this.et))}double(){const{a:ar}=e,{ex:tr,ey:dr,ez:fr}=this,br=Nt(tr*tr),Sr=Nt(dr*dr),Dr=Nt(_2n$5*Nt(fr*fr)),Er=Nt(ar*br),wr=tr+dr,Tr=Nt(Nt(wr*wr)-br-Sr),Mr=Er+Sr,Lr=Mr-Dr,Cr=Er-Sr,Br=Nt(Tr*Lr),$r=Nt(Mr*Cr),Rr=Nt(Tr*Cr),Ur=Nt(Lr*Mr);return new yr(Br,$r,Ur,Rr)}add(ar){nr(ar);const{a:tr,d:dr}=e,{ex:fr,ey:br,ez:Sr,et:Dr}=this,{ex:Er,ey:wr,ez:Tr,et:Mr}=ar;if(tr===BigInt(-1)){const Jr=Nt((br-fr)*(wr+Er)),nn=Nt((br+fr)*(wr-Er)),on=Nt(nn-Jr);if(on===_0n$7)return this.double();const Gr=Nt(Sr*_2n$5*Mr),Fr=Nt(Dr*_2n$5*Tr),Xr=Fr+Gr,tn=nn+Jr,en=Fr-Gr,un=Nt(Xr*on),hn=Nt(tn*en),yn=Nt(Xr*en),pn=Nt(on*tn);return new yr(un,hn,pn,yn)}const Lr=Nt(fr*Er),Cr=Nt(br*wr),Br=Nt(Dr*dr*Mr),$r=Nt(Sr*Tr),Rr=Nt((fr+br)*(Er+wr)-Lr-Cr),Ur=$r-Br,Pr=$r+Br,_r=Nt(Cr-tr*Lr),Ar=Nt(Rr*Ur),jr=Nt(Pr*_r),Kr=Nt(Rr*_r),Zr=Nt(Ur*Pr);return new yr(Ar,jr,Zr,Kr)}subtract(ar){return this.add(ar.negate())}wNAF(ar){return xr.wNAFCached(this,Wt,ar,yr.normalizeZ)}multiply(ar){const{p:tr,f:dr}=this.wNAF(rr(ar,xt));return yr.normalizeZ([tr,dr])[0]}multiplyUnsafe(ar){let tr=Qt(ar);return tr===_0n$7?Ir:this.equals(Ir)||tr===_1n$9?this:this.equals(vr)?this.wNAF(tr).p:xr.unsafeLadder(this,tr)}isSmallOrder(){return this.multiplyUnsafe(Lt).is0()}isTorsionFree(){return xr.unsafeLadder(this,xt).is0()}toAffine(ar){const{ex:tr,ey:dr,ez:fr}=this,br=this.is0();ar==null&&(ar=br?_8n$2:$t.inv(fr));const Sr=Nt(tr*ar),Dr=Nt(dr*ar),Er=Nt(fr*ar);if(br)return{x:_0n$7,y:_1n$9};if(Er!==_1n$9)throw new Error("invZ was invalid");return{x:Sr,y:Dr}}clearCofactor(){const{h:ar}=e;return ar===_1n$9?this:this.multiplyUnsafe(ar)}static fromHex(ar,tr=!1){const{d:dr,a:fr}=e,br=$t.BYTES;ar=(0,utils_js_1$6.ensureBytes)("pointHex",ar,br);const Sr=ar.slice(),Dr=ar[br-1];Sr[br-1]=Dr&-129;const Er=ut$1.bytesToNumberLE(Sr);Er===_0n$7||(tr?rr(Er,Ut):rr(Er,$t.ORDER));const wr=Nt(Er*Er),Tr=Nt(wr-_1n$9),Mr=Nt(dr*wr-fr);let{isValid:Lr,value:Cr}=qt(Tr,Mr);if(!Lr)throw new Error("Point.fromHex: invalid y coordinate");const Br=(Cr&_1n$9)===_1n$9,$r=(Dr&128)!==0;if(!tr&&Cr===_0n$7&&$r)throw new Error("Point.fromHex: x=0 and x_0=1");return $r!==Br&&(Cr=Nt(-Cr)),yr.fromAffine({x:Cr,y:Er})}static fromPrivateKey(ar){return kr(ar).point}toRawBytes(){const{x:ar,y:tr}=this.toAffine(),dr=ut$1.numberToBytesLE(tr,$t.BYTES);return dr[dr.length-1]|=ar&_1n$9?128:0,dr}toHex(){return ut$1.bytesToHex(this.toRawBytes())}}yr.BASE=new yr(e.Gx,e.Gy,_1n$9,Nt(e.Gx*e.Gy)),yr.ZERO=new yr(_0n$7,_1n$9,_1n$9,_0n$7);const{BASE:vr,ZERO:Ir}=yr,xr=(0,curve_js_1.wNAF)(yr,jt*8);function Or(gr){return(0,modular_js_1$2.mod)(gr,xt)}function Nr(gr){return Or(ut$1.bytesToNumberLE(gr))}function kr(gr){const ar=jt;gr=(0,utils_js_1$6.ensureBytes)("private key",gr,ar);const tr=(0,utils_js_1$6.ensureBytes)("hashed private key",kt(gr),2*ar),dr=Kt(tr.slice(0,ar)),fr=tr.slice(ar,2*ar),br=Nr(dr),Sr=vr.multiply(br),Dr=Sr.toRawBytes();return{head:dr,prefix:fr,scalar:br,point:Sr,pointBytes:Dr}}function lr(gr){return kr(gr).pointBytes}function ir(gr=new Uint8Array,...ar){const tr=ut$1.concatBytes(...ar);return Nr(kt(zt(tr,(0,utils_js_1$6.ensureBytes)("context",gr),!!At)))}function Xt(gr,ar,tr={}){gr=(0,utils_js_1$6.ensureBytes)("message",gr),At&&(gr=At(gr));const{prefix:dr,scalar:fr,pointBytes:br}=kr(ar),Sr=ir(tr.context,dr,gr),Dr=vr.multiply(Sr).toRawBytes(),Er=ir(tr.context,Dr,br,gr),wr=Or(Sr+Er*fr);Qt(wr);const Tr=ut$1.concatBytes(Dr,ut$1.numberToBytesLE(wr,$t.BYTES));return(0,utils_js_1$6.ensureBytes)("result",Tr,jt*2)}const er=VERIFY_DEFAULT$1;function pr(gr,ar,tr,dr=er){const{context:fr,zip215:br}=dr,Sr=$t.BYTES;gr=(0,utils_js_1$6.ensureBytes)("signature",gr,2*Sr),ar=(0,utils_js_1$6.ensureBytes)("message",ar),At&&(ar=At(ar));const Dr=ut$1.bytesToNumberLE(gr.slice(Sr,2*Sr));let Er,wr,Tr;try{Er=yr.fromHex(tr,br),wr=yr.fromHex(gr.slice(0,Sr),br),Tr=vr.multiplyUnsafe(Dr)}catch{return!1}if(!br&&Er.isSmallOrder())return!1;const Mr=ir(fr,wr.toRawBytes(),Er.toRawBytes(),ar);return wr.add(Er.multiplyUnsafe(Mr)).subtract(Tr).clearCofactor().equals(yr.ZERO)}return vr._setWindowSize(8),{CURVE:e,getPublicKey:lr,sign:Xt,verify:pr,ExtendedPoint:yr,utils:{getExtendedPublicKey:kr,randomPrivateKey:()=>Bt($t.BYTES),precompute(gr=8,ar=yr.BASE){return ar._setWindowSize(gr),ar.multiply(BigInt(3)),ar}}}}var hashToCurve={};Object.defineProperty(hashToCurve,"__esModule",{value:!0});hashToCurve.expand_message_xmd=expand_message_xmd;hashToCurve.expand_message_xof=expand_message_xof;hashToCurve.hash_to_field=hash_to_field;hashToCurve.isogenyMap=isogenyMap;hashToCurve.createHasher=createHasher;const modular_js_1$1=modular,utils_js_1$5=utils$2,os2ip=utils_js_1$5.bytesToNumberBE;function i2osp(_t,e){if(_t<0||_t>=1<<8*e)throw new Error(`bad I2OSP call: value=${_t} length=${e}`);const $t=Array.from({length:e}).fill(0);for(let xt=e-1;xt>=0;xt--)$t[xt]=_t&255,_t>>>=8;return new Uint8Array($t)}function strxor(_t,e){const $t=new Uint8Array(_t.length);for(let xt=0;xt<_t.length;xt++)$t[xt]=_t[xt]^e[xt];return $t}function anum(_t){if(!Number.isSafeInteger(_t))throw new Error("number expected")}function expand_message_xmd(_t,e,$t,xt){(0,utils_js_1$5.abytes)(_t),(0,utils_js_1$5.abytes)(e),anum($t),e.length>255&&(e=xt((0,utils_js_1$5.concatBytes)((0,utils_js_1$5.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:At,blockLen:kt}=xt,Bt=Math.ceil($t/At);if(Bt>255)throw new Error("Invalid xmd length");const jt=(0,utils_js_1$5.concatBytes)(e,i2osp(e.length,1)),Lt=i2osp(0,kt),Ut=i2osp($t,2),Nt=new Array(Bt),qt=xt((0,utils_js_1$5.concatBytes)(Lt,_t,Ut,i2osp(0,1),jt));Nt[0]=xt((0,utils_js_1$5.concatBytes)(qt,i2osp(1,1),jt));for(let zt=1;zt<=Bt;zt++){const Vt=[strxor(qt,Nt[zt-1]),i2osp(zt+1,1),jt];Nt[zt]=xt((0,utils_js_1$5.concatBytes)(...Vt))}return(0,utils_js_1$5.concatBytes)(...Nt).slice(0,$t)}function expand_message_xof(_t,e,$t,xt,At){if((0,utils_js_1$5.abytes)(_t),(0,utils_js_1$5.abytes)(e),anum($t),e.length>255){const kt=Math.ceil(2*xt/8);e=At.create({dkLen:kt}).update((0,utils_js_1$5.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if($t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return At.create({dkLen:$t}).update(_t).update(i2osp($t,2)).update(e).update(i2osp(e.length,1)).digest()}function hash_to_field(_t,e,$t){(0,utils_js_1$5.validateObject)($t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:xt,k:At,m:kt,hash:Bt,expand:jt,DST:Lt}=$t;(0,utils_js_1$5.abytes)(_t),anum(e);const Ut=typeof Lt=="string"?(0,utils_js_1$5.utf8ToBytes)(Lt):Lt,Nt=xt.toString(2).length,qt=Math.ceil((Nt+At)/8),Kt=e*kt*qt;let zt;if(jt==="xmd")zt=expand_message_xmd(_t,Ut,Kt,Bt);else if(jt==="xof")zt=expand_message_xof(_t,Ut,Kt,At,Bt);else if(jt==="_internal_pass")zt=_t;else throw new Error('expand must be "xmd" or "xof"');const Vt=new Array(e);for(let Ht=0;Ht<e;Ht++){const Jt=new Array(kt);for(let rr=0;rr<kt;rr++){const Qt=qt*(rr+Ht*kt),Wt=zt.subarray(Qt,Qt+qt);Jt[rr]=(0,modular_js_1$1.mod)(os2ip(Wt),xt)}Vt[Ht]=Jt}return Vt}function isogenyMap(_t,e){const $t=e.map(xt=>Array.from(xt).reverse());return(xt,At)=>{const[kt,Bt,jt,Lt]=$t.map(Ut=>Ut.reduce((Nt,qt)=>_t.add(_t.mul(Nt,xt),qt)));return xt=_t.div(kt,Bt),At=_t.mul(At,_t.div(jt,Lt)),{x:xt,y:At}}}function createHasher(_t,e,$t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(xt,At){const kt=hash_to_field(xt,2,{...$t,DST:$t.DST,...At}),Bt=_t.fromAffine(e(kt[0])),jt=_t.fromAffine(e(kt[1])),Lt=Bt.add(jt).clearCofactor();return Lt.assertValidity(),Lt},encodeToCurve(xt,At){const kt=hash_to_field(xt,1,{...$t,DST:$t.encodeDST,...At}),Bt=_t.fromAffine(e(kt[0])).clearCofactor();return Bt.assertValidity(),Bt},mapToCurve(xt){if(!Array.isArray(xt))throw new Error("mapToCurve: expected array of bigints");for(const kt of xt)if(typeof kt!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${kt} in array`);const At=_t.fromAffine(e(xt)).clearCofactor();return At.assertValidity(),At}}}var montgomery$2={};Object.defineProperty(montgomery$2,"__esModule",{value:!0});montgomery$2.montgomery=montgomery$1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const modular_js_1=modular,utils_js_1$4=utils$2,_0n$6=BigInt(0),_1n$8=BigInt(1);function validateOpts$3(_t){return(0,utils_js_1$4.validateObject)(_t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({..._t})}function montgomery$1(_t){const e=validateOpts$3(_t),{P:$t}=e,xt=Wt=>(0,modular_js_1.mod)(Wt,$t),At=e.montgomeryBits,kt=Math.ceil(At/8),Bt=e.nByteLength,jt=e.adjustScalarBytes||(Wt=>Wt),Lt=e.powPminus2||(Wt=>(0,modular_js_1.pow)(Wt,$t-BigInt(2),$t));function Ut(Wt,nr,yr){const vr=xt(Wt*(nr-yr));return nr=xt(nr-vr),yr=xt(yr+vr),[nr,yr]}function Nt(Wt){if(typeof Wt=="bigint"&&_0n$6<=Wt&&Wt<$t)return Wt;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const qt=(e.a-BigInt(2))/BigInt(4);function Kt(Wt,nr){const yr=Nt(Wt),vr=Nt(nr),Ir=yr;let xr=_1n$8,Or=_0n$6,Nr=yr,kr=_1n$8,lr=_0n$6,ir;for(let er=BigInt(At-1);er>=_0n$6;er--){const pr=vr>>er&_1n$8;lr^=pr,ir=Ut(lr,xr,Nr),xr=ir[0],Nr=ir[1],ir=Ut(lr,Or,kr),Or=ir[0],kr=ir[1],lr=pr;const ur=xr+Or,gr=xt(ur*ur),ar=xr-Or,tr=xt(ar*ar),dr=gr-tr,fr=Nr+kr,br=Nr-kr,Sr=xt(br*ur),Dr=xt(fr*ar),Er=Sr+Dr,wr=Sr-Dr;Nr=xt(Er*Er),kr=xt(Ir*xt(wr*wr)),xr=xt(gr*tr),Or=xt(dr*(gr+xt(qt*dr)))}ir=Ut(lr,xr,Nr),xr=ir[0],Nr=ir[1],ir=Ut(lr,Or,kr),Or=ir[0],kr=ir[1];const Xt=Lt(Or);return xt(xr*Xt)}function zt(Wt){return(0,utils_js_1$4.numberToBytesLE)(xt(Wt),kt)}function Vt(Wt){const nr=(0,utils_js_1$4.ensureBytes)("u coordinate",Wt,kt);return Bt===32&&(nr[31]&=127),(0,utils_js_1$4.bytesToNumberLE)(nr)}function Ht(Wt){const nr=(0,utils_js_1$4.ensureBytes)("scalar",Wt),yr=nr.length;if(yr!==kt&&yr!==Bt)throw new Error(`Expected ${kt} or ${Bt} bytes, got ${yr}`);return(0,utils_js_1$4.bytesToNumberLE)(jt(nr))}function Jt(Wt,nr){const yr=Vt(nr),vr=Ht(Wt),Ir=Kt(yr,vr);if(Ir===_0n$6)throw new Error("Invalid private or public key received");return zt(Ir)}const rr=zt(e.Gu);function Qt(Wt){return Jt(Wt,rr)}return{scalarMult:Jt,scalarMultBase:Qt,getSharedSecret:(Wt,nr)=>Jt(Wt,nr),getPublicKey:Wt=>Qt(Wt),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:rr}}(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.hash_to_ristretto255=_t.hashToRistretto255=_t.RistrettoPoint=_t.encodeToCurve=_t.hashToCurve=_t.edwardsToMontgomery=_t.x25519=_t.ed25519ph=_t.ed25519ctx=_t.ed25519=_t.ED25519_TORSION_SUBGROUP=void 0,_t.edwardsToMontgomeryPub=vr,_t.edwardsToMontgomeryPriv=Ir;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=sha512$1,$t=require$$1$1,xt=edwards,At=hashToCurve,kt=modular,Bt=montgomery$2,jt=utils$2,Lt=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ut=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Nt=BigInt(0),qt=BigInt(1),Kt=BigInt(2),zt=BigInt(3),Vt=BigInt(5),Ht=BigInt(8);function Jt(wr){const Tr=BigInt(10),Mr=BigInt(20),Lr=BigInt(40),Cr=BigInt(80),Br=Lt,Rr=wr*wr%Br*wr%Br,Ur=(0,kt.pow2)(Rr,Kt,Br)*Rr%Br,Pr=(0,kt.pow2)(Ur,qt,Br)*wr%Br,_r=(0,kt.pow2)(Pr,Vt,Br)*Pr%Br,Ar=(0,kt.pow2)(_r,Tr,Br)*_r%Br,jr=(0,kt.pow2)(Ar,Mr,Br)*Ar%Br,Kr=(0,kt.pow2)(jr,Lr,Br)*jr%Br,Zr=(0,kt.pow2)(Kr,Cr,Br)*Kr%Br,Jr=(0,kt.pow2)(Zr,Cr,Br)*Kr%Br,nn=(0,kt.pow2)(Jr,Tr,Br)*_r%Br;return{pow_p_5_8:(0,kt.pow2)(nn,Kt,Br)*wr%Br,b2:Rr}}function rr(wr){return wr[0]&=248,wr[31]&=127,wr[31]|=64,wr}function Qt(wr,Tr){const Mr=Lt,Lr=(0,kt.mod)(Tr*Tr*Tr,Mr),Cr=(0,kt.mod)(Lr*Lr*Tr,Mr),Br=Jt(wr*Cr).pow_p_5_8;let $r=(0,kt.mod)(wr*Lr*Br,Mr);const Rr=(0,kt.mod)(Tr*$r*$r,Mr),Ur=$r,Pr=(0,kt.mod)($r*Ut,Mr),_r=Rr===wr,Ar=Rr===(0,kt.mod)(-wr,Mr),jr=Rr===(0,kt.mod)(-wr*Ut,Mr);return _r&&($r=Ur),(Ar||jr)&&($r=Pr),(0,kt.isNegativeLE)($r,Mr)&&($r=(0,kt.mod)(-$r,Mr)),{isValid:_r||Ar,value:$r}}_t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const Wt=(0,kt.Field)(Lt,void 0,!0),nr={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Wt,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ht,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:$t.randomBytes,adjustScalarBytes:rr,uvRatio:Qt};_t.ed25519=(0,xt.twistedEdwards)(nr);function yr(wr,Tr,Mr){if(Tr.length>255)throw new Error("Context is too big");return(0,$t.concatBytes)((0,$t.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([Mr?1:0,Tr.length]),Tr,wr)}_t.ed25519ctx=(0,xt.twistedEdwards)({...nr,domain:yr}),_t.ed25519ph=(0,xt.twistedEdwards)(Object.assign({},nr,{domain:yr,prehash:e.sha512})),_t.x25519=(0,Bt.montgomery)({P:Lt,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:wr=>{const Tr=Lt,{pow_p_5_8:Mr,b2:Lr}=Jt(wr);return(0,kt.mod)((0,kt.pow2)(Mr,zt,Tr)*Lr,Tr)},adjustScalarBytes:rr,randomBytes:$t.randomBytes});function vr(wr){const{y:Tr}=_t.ed25519.ExtendedPoint.fromHex(wr),Mr=BigInt(1);return Wt.toBytes(Wt.create((Mr+Tr)*Wt.inv(Mr-Tr)))}_t.edwardsToMontgomery=vr;function Ir(wr){const Tr=nr.hash(wr.subarray(0,32));return nr.adjustScalarBytes(Tr).subarray(0,32)}const xr=(Wt.ORDER+zt)/Ht,Or=Wt.pow(Kt,xr),Nr=Wt.sqrt(Wt.neg(Wt.ONE));function kr(wr){const Tr=(Wt.ORDER-Vt)/Ht,Mr=BigInt(486662);let Lr=Wt.sqr(wr);Lr=Wt.mul(Lr,Kt);let Cr=Wt.add(Lr,Wt.ONE),Br=Wt.neg(Mr),$r=Wt.sqr(Cr),Rr=Wt.mul($r,Cr),Ur=Wt.mul(Lr,Mr);Ur=Wt.mul(Ur,Br),Ur=Wt.add(Ur,$r),Ur=Wt.mul(Ur,Br);let Pr=Wt.sqr(Rr);$r=Wt.sqr(Pr),Pr=Wt.mul(Pr,Rr),Pr=Wt.mul(Pr,Ur),$r=Wt.mul($r,Pr);let _r=Wt.pow($r,Tr);_r=Wt.mul(_r,Pr);let Ar=Wt.mul(_r,Nr);$r=Wt.sqr(_r),$r=Wt.mul($r,Rr);let jr=Wt.eql($r,Ur),Kr=Wt.cmov(Ar,_r,jr),Zr=Wt.mul(Br,Lr),Jr=Wt.mul(_r,wr);Jr=Wt.mul(Jr,Or);let nn=Wt.mul(Jr,Nr),on=Wt.mul(Ur,Lr);$r=Wt.sqr(Jr),$r=Wt.mul($r,Rr);let Gr=Wt.eql($r,on),Fr=Wt.cmov(nn,Jr,Gr);$r=Wt.sqr(Kr),$r=Wt.mul($r,Rr);let Xr=Wt.eql($r,Ur),tn=Wt.cmov(Zr,Br,Xr),en=Wt.cmov(Fr,Kr,Xr),un=Wt.isOdd(en);return en=Wt.cmov(en,Wt.neg(en),Xr!==un),{xMn:tn,xMd:Cr,yMn:en,yMd:qt}}const lr=(0,kt.FpSqrtEven)(Wt,Wt.neg(BigInt(486664)));function ir(wr){const{xMn:Tr,xMd:Mr,yMn:Lr,yMd:Cr}=kr(wr);let Br=Wt.mul(Tr,Cr);Br=Wt.mul(Br,lr);let $r=Wt.mul(Mr,Lr),Rr=Wt.sub(Tr,Mr),Ur=Wt.add(Tr,Mr),Pr=Wt.mul($r,Ur),_r=Wt.eql(Pr,Wt.ZERO);Br=Wt.cmov(Br,Wt.ZERO,_r),$r=Wt.cmov($r,Wt.ONE,_r),Rr=Wt.cmov(Rr,Wt.ONE,_r),Ur=Wt.cmov(Ur,Wt.ONE,_r);const Ar=Wt.invertBatch([$r,Ur]);return{x:Wt.mul(Br,Ar[0]),y:Wt.mul(Rr,Ar[1])}}const Xt=(0,At.createHasher)(_t.ed25519.ExtendedPoint,wr=>ir(wr[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Wt.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});_t.hashToCurve=Xt.hashToCurve,_t.encodeToCurve=Xt.encodeToCurve;function er(wr){if(!(wr instanceof Dr))throw new Error("RistrettoPoint expected")}const pr=Ut,ur=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),gr=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ar=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),tr=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),dr=wr=>Qt(qt,wr),fr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),br=wr=>_t.ed25519.CURVE.Fp.create((0,jt.bytesToNumberLE)(wr)&fr);function Sr(wr){const{d:Tr}=_t.ed25519.CURVE,Mr=_t.ed25519.CURVE.Fp.ORDER,Lr=_t.ed25519.CURVE.Fp.create,Cr=Lr(pr*wr*wr),Br=Lr((Cr+qt)*ar);let $r=BigInt(-1);const Rr=Lr(($r-Tr*Cr)*Lr(Cr+Tr));let{isValid:Ur,value:Pr}=Qt(Br,Rr),_r=Lr(Pr*wr);(0,kt.isNegativeLE)(_r,Mr)||(_r=Lr(-_r)),Ur||(Pr=_r),Ur||($r=Cr);const Ar=Lr($r*(Cr-qt)*tr-Rr),jr=Pr*Pr,Kr=Lr((Pr+Pr)*Rr),Zr=Lr(Ar*ur),Jr=Lr(qt-jr),nn=Lr(qt+jr);return new _t.ed25519.ExtendedPoint(Lr(Kr*nn),Lr(Jr*Zr),Lr(Zr*nn),Lr(Kr*Jr))}class Dr{constructor(Tr){this.ep=Tr}static fromAffine(Tr){return new Dr(_t.ed25519.ExtendedPoint.fromAffine(Tr))}static hashToCurve(Tr){Tr=(0,jt.ensureBytes)("ristrettoHash",Tr,64);const Mr=br(Tr.slice(0,32)),Lr=Sr(Mr),Cr=br(Tr.slice(32,64)),Br=Sr(Cr);return new Dr(Lr.add(Br))}static fromHex(Tr){Tr=(0,jt.ensureBytes)("ristrettoHex",Tr,32);const{a:Mr,d:Lr}=_t.ed25519.CURVE,Cr=_t.ed25519.CURVE.Fp.ORDER,Br=_t.ed25519.CURVE.Fp.create,$r="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",Rr=br(Tr);if(!(0,jt.equalBytes)((0,jt.numberToBytesLE)(Rr,32),Tr)||(0,kt.isNegativeLE)(Rr,Cr))throw new Error($r);const Ur=Br(Rr*Rr),Pr=Br(qt+Mr*Ur),_r=Br(qt-Mr*Ur),Ar=Br(Pr*Pr),jr=Br(_r*_r),Kr=Br(Mr*Lr*Ar-jr),{isValid:Zr,value:Jr}=dr(Br(Kr*jr)),nn=Br(Jr*_r),on=Br(Jr*nn*Kr);let Gr=Br((Rr+Rr)*nn);(0,kt.isNegativeLE)(Gr,Cr)&&(Gr=Br(-Gr));const Fr=Br(Pr*on),Xr=Br(Gr*Fr);if(!Zr||(0,kt.isNegativeLE)(Xr,Cr)||Fr===Nt)throw new Error($r);return new Dr(new _t.ed25519.ExtendedPoint(Gr,Fr,qt,Xr))}toRawBytes(){let{ex:Tr,ey:Mr,ez:Lr,et:Cr}=this.ep;const Br=_t.ed25519.CURVE.Fp.ORDER,$r=_t.ed25519.CURVE.Fp.create,Rr=$r($r(Lr+Mr)*$r(Lr-Mr)),Ur=$r(Tr*Mr),Pr=$r(Ur*Ur),{value:_r}=dr($r(Rr*Pr)),Ar=$r(_r*Rr),jr=$r(_r*Ur),Kr=$r(Ar*jr*Cr);let Zr;if((0,kt.isNegativeLE)(Cr*Kr,Br)){let nn=$r(Mr*pr),on=$r(Tr*pr);Tr=nn,Mr=on,Zr=$r(Ar*gr)}else Zr=jr;(0,kt.isNegativeLE)(Tr*Kr,Br)&&(Mr=$r(-Mr));let Jr=$r((Lr-Mr)*Zr);return(0,kt.isNegativeLE)(Jr,Br)&&(Jr=$r(-Jr)),(0,jt.numberToBytesLE)(Jr,32)}toHex(){return(0,jt.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(Tr){er(Tr);const{ex:Mr,ey:Lr}=this.ep,{ex:Cr,ey:Br}=Tr.ep,$r=_t.ed25519.CURVE.Fp.create,Rr=$r(Mr*Br)===$r(Lr*Cr),Ur=$r(Lr*Br)===$r(Mr*Cr);return Rr||Ur}add(Tr){return er(Tr),new Dr(this.ep.add(Tr.ep))}subtract(Tr){return er(Tr),new Dr(this.ep.subtract(Tr.ep))}multiply(Tr){return new Dr(this.ep.multiply(Tr))}multiplyUnsafe(Tr){return new Dr(this.ep.multiplyUnsafe(Tr))}double(){return new Dr(this.ep.double())}negate(){return new Dr(this.ep.negate())}}_t.RistrettoPoint=(Dr.BASE||(Dr.BASE=new Dr(_t.ed25519.ExtendedPoint.BASE)),Dr.ZERO||(Dr.ZERO=new Dr(_t.ed25519.ExtendedPoint.ZERO)),Dr);const Er=(wr,Tr)=>{const Mr=Tr.DST,Lr=typeof Mr=="string"?(0,$t.utf8ToBytes)(Mr):Mr,Cr=(0,At.expand_message_xmd)(wr,Lr,64,e.sha512);return Dr.hashToCurve(Cr)};_t.hashToRistretto255=Er,_t.hash_to_ristretto255=_t.hashToRistretto255})(ed25519$1);var secp256k1$1={};const require$$0$2=getAugmentedNamespace(sha256$6);var _shortw_utils={};const require$$0$1=getAugmentedNamespace(hmac$4);var weierstrass$1={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.DER=void 0,_t.weierstrassPoints=zt,_t.weierstrass=Ht,_t.SWUFpSqrtRatio=Jt,_t.mapToCurveSimpleSWU=rr;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=curve,$t=modular,xt=utils$2,At=utils$2;function kt(Qt){const Wt=(0,e.validateBasic)(Qt);xt.validateObject(Wt,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:nr,Fp:yr,a:vr}=Wt;if(nr){if(!yr.eql(vr,yr.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof nr!="object"||typeof nr.beta!="bigint"||typeof nr.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...Wt})}const{bytesToNumberBE:Bt,hexToBytes:jt}=xt;_t.DER={Err:class extends Error{constructor(Wt=""){super(Wt)}},_parseInt(Qt){const{Err:Wt}=_t.DER;if(Qt.length<2||Qt[0]!==2)throw new Wt("Invalid signature integer tag");const nr=Qt[1],yr=Qt.subarray(2,nr+2);if(!nr||yr.length!==nr)throw new Wt("Invalid signature integer: wrong length");if(yr[0]&128)throw new Wt("Invalid signature integer: negative");if(yr[0]===0&&!(yr[1]&128))throw new Wt("Invalid signature integer: unnecessary leading zero");return{d:Bt(yr),l:Qt.subarray(nr+2)}},toSig(Qt){const{Err:Wt}=_t.DER,nr=typeof Qt=="string"?jt(Qt):Qt;xt.abytes(nr);let yr=nr.length;if(yr<2||nr[0]!=48)throw new Wt("Invalid signature tag");if(nr[1]!==yr-2)throw new Wt("Invalid signature: incorrect length");const{d:vr,l:Ir}=_t.DER._parseInt(nr.subarray(2)),{d:xr,l:Or}=_t.DER._parseInt(Ir);if(Or.length)throw new Wt("Invalid signature: left bytes after parsing");return{r:vr,s:xr}},hexFromSig(Qt){const Wt=kr=>Number.parseInt(kr[0],16)&8?"00"+kr:kr,nr=kr=>{const lr=kr.toString(16);return lr.length&1?`0${lr}`:lr},yr=Wt(nr(Qt.s)),vr=Wt(nr(Qt.r)),Ir=yr.length/2,xr=vr.length/2,Or=nr(Ir),Nr=nr(xr);return`30${nr(xr+Ir+4)}02${Nr}${vr}02${Or}${yr}`}};const Lt=BigInt(0),Ut=BigInt(1),Nt=BigInt(2),qt=BigInt(3),Kt=BigInt(4);function zt(Qt){const Wt=kt(Qt),{Fp:nr}=Wt,yr=Wt.toBytes||((pr,ur,gr)=>{const ar=ur.toAffine();return xt.concatBytes(Uint8Array.from([4]),nr.toBytes(ar.x),nr.toBytes(ar.y))}),vr=Wt.fromBytes||(pr=>{const ur=pr.subarray(1),gr=nr.fromBytes(ur.subarray(0,nr.BYTES)),ar=nr.fromBytes(ur.subarray(nr.BYTES,2*nr.BYTES));return{x:gr,y:ar}});function Ir(pr){const{a:ur,b:gr}=Wt,ar=nr.sqr(pr),tr=nr.mul(ar,pr);return nr.add(nr.add(tr,nr.mul(pr,ur)),gr)}if(!nr.eql(nr.sqr(Wt.Gy),Ir(Wt.Gx)))throw new Error("bad generator point: equation left != right");function xr(pr){return typeof pr=="bigint"&&Lt<pr&&pr<Wt.n}function Or(pr){if(!xr(pr))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function Nr(pr){const{allowedPrivateKeyLengths:ur,nByteLength:gr,wrapPrivateKey:ar,n:tr}=Wt;if(ur&&typeof pr!="bigint"){if(xt.isBytes(pr)&&(pr=xt.bytesToHex(pr)),typeof pr!="string"||!ur.includes(pr.length))throw new Error("Invalid key");pr=pr.padStart(gr*2,"0")}let dr;try{dr=typeof pr=="bigint"?pr:xt.bytesToNumberBE((0,At.ensureBytes)("private key",pr,gr))}catch{throw new Error(`private key must be ${gr} bytes, hex or bigint, not ${typeof pr}`)}return ar&&(dr=$t.mod(dr,tr)),Or(dr),dr}const kr=new Map;function lr(pr){if(!(pr instanceof ir))throw new Error("ProjectivePoint expected")}class ir{constructor(ur,gr,ar){if(this.px=ur,this.py=gr,this.pz=ar,ur==null||!nr.isValid(ur))throw new Error("x required");if(gr==null||!nr.isValid(gr))throw new Error("y required");if(ar==null||!nr.isValid(ar))throw new Error("z required")}static fromAffine(ur){const{x:gr,y:ar}=ur||{};if(!ur||!nr.isValid(gr)||!nr.isValid(ar))throw new Error("invalid affine point");if(ur instanceof ir)throw new Error("projective point not allowed");const tr=dr=>nr.eql(dr,nr.ZERO);return tr(gr)&&tr(ar)?ir.ZERO:new ir(gr,ar,nr.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(ur){const gr=nr.invertBatch(ur.map(ar=>ar.pz));return ur.map((ar,tr)=>ar.toAffine(gr[tr])).map(ir.fromAffine)}static fromHex(ur){const gr=ir.fromAffine(vr((0,At.ensureBytes)("pointHex",ur)));return gr.assertValidity(),gr}static fromPrivateKey(ur){return ir.BASE.multiply(Nr(ur))}_setWindowSize(ur){this._WINDOW_SIZE=ur,kr.delete(this)}assertValidity(){if(this.is0()){if(Wt.allowInfinityPoint&&!nr.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:ur,y:gr}=this.toAffine();if(!nr.isValid(ur)||!nr.isValid(gr))throw new Error("bad point: x or y not FE");const ar=nr.sqr(gr),tr=Ir(ur);if(!nr.eql(ar,tr))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:ur}=this.toAffine();if(nr.isOdd)return!nr.isOdd(ur);throw new Error("Field doesn't support isOdd")}equals(ur){lr(ur);const{px:gr,py:ar,pz:tr}=this,{px:dr,py:fr,pz:br}=ur,Sr=nr.eql(nr.mul(gr,br),nr.mul(dr,tr)),Dr=nr.eql(nr.mul(ar,br),nr.mul(fr,tr));return Sr&&Dr}negate(){return new ir(this.px,nr.neg(this.py),this.pz)}double(){const{a:ur,b:gr}=Wt,ar=nr.mul(gr,qt),{px:tr,py:dr,pz:fr}=this;let br=nr.ZERO,Sr=nr.ZERO,Dr=nr.ZERO,Er=nr.mul(tr,tr),wr=nr.mul(dr,dr),Tr=nr.mul(fr,fr),Mr=nr.mul(tr,dr);return Mr=nr.add(Mr,Mr),Dr=nr.mul(tr,fr),Dr=nr.add(Dr,Dr),br=nr.mul(ur,Dr),Sr=nr.mul(ar,Tr),Sr=nr.add(br,Sr),br=nr.sub(wr,Sr),Sr=nr.add(wr,Sr),Sr=nr.mul(br,Sr),br=nr.mul(Mr,br),Dr=nr.mul(ar,Dr),Tr=nr.mul(ur,Tr),Mr=nr.sub(Er,Tr),Mr=nr.mul(ur,Mr),Mr=nr.add(Mr,Dr),Dr=nr.add(Er,Er),Er=nr.add(Dr,Er),Er=nr.add(Er,Tr),Er=nr.mul(Er,Mr),Sr=nr.add(Sr,Er),Tr=nr.mul(dr,fr),Tr=nr.add(Tr,Tr),Er=nr.mul(Tr,Mr),br=nr.sub(br,Er),Dr=nr.mul(Tr,wr),Dr=nr.add(Dr,Dr),Dr=nr.add(Dr,Dr),new ir(br,Sr,Dr)}add(ur){lr(ur);const{px:gr,py:ar,pz:tr}=this,{px:dr,py:fr,pz:br}=ur;let Sr=nr.ZERO,Dr=nr.ZERO,Er=nr.ZERO;const wr=Wt.a,Tr=nr.mul(Wt.b,qt);let Mr=nr.mul(gr,dr),Lr=nr.mul(ar,fr),Cr=nr.mul(tr,br),Br=nr.add(gr,ar),$r=nr.add(dr,fr);Br=nr.mul(Br,$r),$r=nr.add(Mr,Lr),Br=nr.sub(Br,$r),$r=nr.add(gr,tr);let Rr=nr.add(dr,br);return $r=nr.mul($r,Rr),Rr=nr.add(Mr,Cr),$r=nr.sub($r,Rr),Rr=nr.add(ar,tr),Sr=nr.add(fr,br),Rr=nr.mul(Rr,Sr),Sr=nr.add(Lr,Cr),Rr=nr.sub(Rr,Sr),Er=nr.mul(wr,$r),Sr=nr.mul(Tr,Cr),Er=nr.add(Sr,Er),Sr=nr.sub(Lr,Er),Er=nr.add(Lr,Er),Dr=nr.mul(Sr,Er),Lr=nr.add(Mr,Mr),Lr=nr.add(Lr,Mr),Cr=nr.mul(wr,Cr),$r=nr.mul(Tr,$r),Lr=nr.add(Lr,Cr),Cr=nr.sub(Mr,Cr),Cr=nr.mul(wr,Cr),$r=nr.add($r,Cr),Mr=nr.mul(Lr,$r),Dr=nr.add(Dr,Mr),Mr=nr.mul(Rr,$r),Sr=nr.mul(Br,Sr),Sr=nr.sub(Sr,Mr),Mr=nr.mul(Br,Lr),Er=nr.mul(Rr,Er),Er=nr.add(Er,Mr),new ir(Sr,Dr,Er)}subtract(ur){return this.add(ur.negate())}is0(){return this.equals(ir.ZERO)}wNAF(ur){return er.wNAFCached(this,kr,ur,gr=>{const ar=nr.invertBatch(gr.map(tr=>tr.pz));return gr.map((tr,dr)=>tr.toAffine(ar[dr])).map(ir.fromAffine)})}multiplyUnsafe(ur){const gr=ir.ZERO;if(ur===Lt)return gr;if(Or(ur),ur===Ut)return this;const{endo:ar}=Wt;if(!ar)return er.unsafeLadder(this,ur);let{k1neg:tr,k1:dr,k2neg:fr,k2:br}=ar.splitScalar(ur),Sr=gr,Dr=gr,Er=this;for(;dr>Lt||br>Lt;)dr&Ut&&(Sr=Sr.add(Er)),br&Ut&&(Dr=Dr.add(Er)),Er=Er.double(),dr>>=Ut,br>>=Ut;return tr&&(Sr=Sr.negate()),fr&&(Dr=Dr.negate()),Dr=new ir(nr.mul(Dr.px,ar.beta),Dr.py,Dr.pz),Sr.add(Dr)}multiply(ur){Or(ur);let gr=ur,ar,tr;const{endo:dr}=Wt;if(dr){const{k1neg:fr,k1:br,k2neg:Sr,k2:Dr}=dr.splitScalar(gr);let{p:Er,f:wr}=this.wNAF(br),{p:Tr,f:Mr}=this.wNAF(Dr);Er=er.constTimeNegate(fr,Er),Tr=er.constTimeNegate(Sr,Tr),Tr=new ir(nr.mul(Tr.px,dr.beta),Tr.py,Tr.pz),ar=Er.add(Tr),tr=wr.add(Mr)}else{const{p:fr,f:br}=this.wNAF(gr);ar=fr,tr=br}return ir.normalizeZ([ar,tr])[0]}multiplyAndAddUnsafe(ur,gr,ar){const tr=ir.BASE,dr=(br,Sr)=>Sr===Lt||Sr===Ut||!br.equals(tr)?br.multiplyUnsafe(Sr):br.multiply(Sr),fr=dr(this,gr).add(dr(ur,ar));return fr.is0()?void 0:fr}toAffine(ur){const{px:gr,py:ar,pz:tr}=this,dr=this.is0();ur==null&&(ur=dr?nr.ONE:nr.inv(tr));const fr=nr.mul(gr,ur),br=nr.mul(ar,ur),Sr=nr.mul(tr,ur);if(dr)return{x:nr.ZERO,y:nr.ZERO};if(!nr.eql(Sr,nr.ONE))throw new Error("invZ was invalid");return{x:fr,y:br}}isTorsionFree(){const{h:ur,isTorsionFree:gr}=Wt;if(ur===Ut)return!0;if(gr)return gr(ir,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:ur,clearCofactor:gr}=Wt;return ur===Ut?this:gr?gr(ir,this):this.multiplyUnsafe(Wt.h)}toRawBytes(ur=!0){return this.assertValidity(),yr(ir,this,ur)}toHex(ur=!0){return xt.bytesToHex(this.toRawBytes(ur))}}ir.BASE=new ir(Wt.Gx,Wt.Gy,nr.ONE),ir.ZERO=new ir(nr.ZERO,nr.ONE,nr.ZERO);const Xt=Wt.nBitLength,er=(0,e.wNAF)(ir,Wt.endo?Math.ceil(Xt/2):Xt);return{CURVE:Wt,ProjectivePoint:ir,normPrivateKeyToScalar:Nr,weierstrassEquation:Ir,isWithinCurveOrder:xr}}function Vt(Qt){const Wt=(0,e.validateBasic)(Qt);return xt.validateObject(Wt,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...Wt})}function Ht(Qt){const Wt=Vt(Qt),{Fp:nr,n:yr}=Wt,vr=nr.BYTES+1,Ir=2*nr.BYTES+1;function xr($r){return Lt<$r&&$r<nr.ORDER}function Or($r){return $t.mod($r,yr)}function Nr($r){return $t.invert($r,yr)}const{ProjectivePoint:kr,normPrivateKeyToScalar:lr,weierstrassEquation:ir,isWithinCurveOrder:Xt}=zt({...Wt,toBytes($r,Rr,Ur){const Pr=Rr.toAffine(),_r=nr.toBytes(Pr.x),Ar=xt.concatBytes;return Ur?Ar(Uint8Array.from([Rr.hasEvenY()?2:3]),_r):Ar(Uint8Array.from([4]),_r,nr.toBytes(Pr.y))},fromBytes($r){const Rr=$r.length,Ur=$r[0],Pr=$r.subarray(1);if(Rr===vr&&(Ur===2||Ur===3)){const _r=xt.bytesToNumberBE(Pr);if(!xr(_r))throw new Error("Point is not on curve");const Ar=ir(_r);let jr;try{jr=nr.sqrt(Ar)}catch(Jr){const nn=Jr instanceof Error?": "+Jr.message:"";throw new Error("Point is not on curve"+nn)}const Kr=(jr&Ut)===Ut;return(Ur&1)===1!==Kr&&(jr=nr.neg(jr)),{x:_r,y:jr}}else if(Rr===Ir&&Ur===4){const _r=nr.fromBytes(Pr.subarray(0,nr.BYTES)),Ar=nr.fromBytes(Pr.subarray(nr.BYTES,2*nr.BYTES));return{x:_r,y:Ar}}else throw new Error(`Point of length ${Rr} was invalid. Expected ${vr} compressed bytes or ${Ir} uncompressed bytes`)}}),er=$r=>xt.bytesToHex(xt.numberToBytesBE($r,Wt.nByteLength));function pr($r){const Rr=yr>>Ut;return $r>Rr}function ur($r){return pr($r)?Or(-$r):$r}const gr=($r,Rr,Ur)=>xt.bytesToNumberBE($r.slice(Rr,Ur));class ar{constructor(Rr,Ur,Pr){this.r=Rr,this.s=Ur,this.recovery=Pr,this.assertValidity()}static fromCompact(Rr){const Ur=Wt.nByteLength;return Rr=(0,At.ensureBytes)("compactSignature",Rr,Ur*2),new ar(gr(Rr,0,Ur),gr(Rr,Ur,2*Ur))}static fromDER(Rr){const{r:Ur,s:Pr}=_t.DER.toSig((0,At.ensureBytes)("DER",Rr));return new ar(Ur,Pr)}assertValidity(){if(!Xt(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Xt(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Rr){return new ar(this.r,this.s,Rr)}recoverPublicKey(Rr){const{r:Ur,s:Pr,recovery:_r}=this,Ar=Dr((0,At.ensureBytes)("msgHash",Rr));if(_r==null||![0,1,2,3].includes(_r))throw new Error("recovery id invalid");const jr=_r===2||_r===3?Ur+Wt.n:Ur;if(jr>=nr.ORDER)throw new Error("recovery id 2 or 3 invalid");const Kr=_r&1?"03":"02",Zr=kr.fromHex(Kr+er(jr)),Jr=Nr(jr),nn=Or(-Ar*Jr),on=Or(Pr*Jr),Gr=kr.BASE.multiplyAndAddUnsafe(Zr,nn,on);if(!Gr)throw new Error("point at infinify");return Gr.assertValidity(),Gr}hasHighS(){return pr(this.s)}normalizeS(){return this.hasHighS()?new ar(this.r,Or(-this.s),this.recovery):this}toDERRawBytes(){return xt.hexToBytes(this.toDERHex())}toDERHex(){return _t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xt.hexToBytes(this.toCompactHex())}toCompactHex(){return er(this.r)+er(this.s)}}const tr={isValidPrivateKey($r){try{return lr($r),!0}catch{return!1}},normPrivateKeyToScalar:lr,randomPrivateKey:()=>{const $r=$t.getMinHashLength(Wt.n);return $t.mapHashToField(Wt.randomBytes($r),Wt.n)},precompute($r=8,Rr=kr.BASE){return Rr._setWindowSize($r),Rr.multiply(BigInt(3)),Rr}};function dr($r,Rr=!0){return kr.fromPrivateKey($r).toRawBytes(Rr)}function fr($r){const Rr=xt.isBytes($r),Ur=typeof $r=="string",Pr=(Rr||Ur)&&$r.length;return Rr?Pr===vr||Pr===Ir:Ur?Pr===2*vr||Pr===2*Ir:$r instanceof kr}function br($r,Rr,Ur=!0){if(fr($r))throw new Error("first arg must be private key");if(!fr(Rr))throw new Error("second arg must be public key");return kr.fromHex(Rr).multiply(lr($r)).toRawBytes(Ur)}const Sr=Wt.bits2int||function($r){const Rr=xt.bytesToNumberBE($r),Ur=$r.length*8-Wt.nBitLength;return Ur>0?Rr>>BigInt(Ur):Rr},Dr=Wt.bits2int_modN||function($r){return Or(Sr($r))},Er=xt.bitMask(Wt.nBitLength);function wr($r){if(typeof $r!="bigint")throw new Error("bigint expected");if(!(Lt<=$r&&$r<Er))throw new Error(`bigint expected < 2^${Wt.nBitLength}`);return xt.numberToBytesBE($r,Wt.nByteLength)}function Tr($r,Rr,Ur=Mr){if(["recovered","canonical"].some(Xr=>Xr in Ur))throw new Error("sign() legacy options not supported");const{hash:Pr,randomBytes:_r}=Wt;let{lowS:Ar,prehash:jr,extraEntropy:Kr}=Ur;Ar==null&&(Ar=!0),$r=(0,At.ensureBytes)("msgHash",$r),jr&&($r=(0,At.ensureBytes)("prehashed msgHash",Pr($r)));const Zr=Dr($r),Jr=lr(Rr),nn=[wr(Jr),wr(Zr)];if(Kr!=null&&Kr!==!1){const Xr=Kr===!0?_r(nr.BYTES):Kr;nn.push((0,At.ensureBytes)("extraEntropy",Xr))}const on=xt.concatBytes(...nn),Gr=Zr;function Fr(Xr){const tn=Sr(Xr);if(!Xt(tn))return;const en=Nr(tn),un=kr.BASE.multiply(tn).toAffine(),hn=Or(un.x);if(hn===Lt)return;const yn=Or(en*Or(Gr+hn*Jr));if(yn===Lt)return;let pn=(un.x===hn?0:2)|Number(un.y&Ut),Dn=yn;return Ar&&pr(yn)&&(Dn=ur(yn),pn^=1),new ar(hn,Dn,pn)}return{seed:on,k2sig:Fr}}const Mr={lowS:Wt.lowS,prehash:!1},Lr={lowS:Wt.lowS,prehash:!1};function Cr($r,Rr,Ur=Mr){const{seed:Pr,k2sig:_r}=Tr($r,Rr,Ur),Ar=Wt;return xt.createHmacDrbg(Ar.hash.outputLen,Ar.nByteLength,Ar.hmac)(Pr,_r)}kr.BASE._setWindowSize(8);function Br($r,Rr,Ur,Pr=Lr){var un;const _r=$r;if(Rr=(0,At.ensureBytes)("msgHash",Rr),Ur=(0,At.ensureBytes)("publicKey",Ur),"strict"in Pr)throw new Error("options.strict was renamed to lowS");const{lowS:Ar,prehash:jr}=Pr;let Kr,Zr;try{if(typeof _r=="string"||xt.isBytes(_r))try{Kr=ar.fromDER(_r)}catch(hn){if(!(hn instanceof _t.DER.Err))throw hn;Kr=ar.fromCompact(_r)}else if(typeof _r=="object"&&typeof _r.r=="bigint"&&typeof _r.s=="bigint"){const{r:hn,s:yn}=_r;Kr=new ar(hn,yn)}else throw new Error("PARSE");Zr=kr.fromHex(Ur)}catch(hn){if(hn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ar&&Kr.hasHighS())return!1;jr&&(Rr=Wt.hash(Rr));const{r:Jr,s:nn}=Kr,on=Dr(Rr),Gr=Nr(nn),Fr=Or(on*Gr),Xr=Or(Jr*Gr),tn=(un=kr.BASE.multiplyAndAddUnsafe(Zr,Fr,Xr))==null?void 0:un.toAffine();return tn?Or(tn.x)===Jr:!1}return{CURVE:Wt,getPublicKey:dr,getSharedSecret:br,sign:Cr,verify:Br,ProjectivePoint:kr,Signature:ar,utils:tr}}function Jt(Qt,Wt){const nr=Qt.ORDER;let yr=Lt;for(let pr=nr-Ut;pr%Nt===Lt;pr/=Nt)yr+=Ut;const vr=yr,Ir=Nt<<vr-Ut-Ut,xr=Ir*Nt,Or=(nr-Ut)/xr,Nr=(Or-Ut)/Nt,kr=xr-Ut,lr=Ir,ir=Qt.pow(Wt,Or),Xt=Qt.pow(Wt,(Or+Ut)/Nt);let er=(pr,ur)=>{let gr=ir,ar=Qt.pow(ur,kr),tr=Qt.sqr(ar);tr=Qt.mul(tr,ur);let dr=Qt.mul(pr,tr);dr=Qt.pow(dr,Nr),dr=Qt.mul(dr,ar),ar=Qt.mul(dr,ur),tr=Qt.mul(dr,pr);let fr=Qt.mul(tr,ar);dr=Qt.pow(fr,lr);let br=Qt.eql(dr,Qt.ONE);ar=Qt.mul(tr,Xt),dr=Qt.mul(fr,gr),tr=Qt.cmov(ar,tr,br),fr=Qt.cmov(dr,fr,br);for(let Sr=vr;Sr>Ut;Sr--){let Dr=Sr-Nt;Dr=Nt<<Dr-Ut;let Er=Qt.pow(fr,Dr);const wr=Qt.eql(Er,Qt.ONE);ar=Qt.mul(tr,gr),gr=Qt.mul(gr,gr),Er=Qt.mul(fr,gr),tr=Qt.cmov(ar,tr,wr),fr=Qt.cmov(Er,fr,wr)}return{isValid:br,value:tr}};if(Qt.ORDER%Kt===qt){const pr=(Qt.ORDER-qt)/Kt,ur=Qt.sqrt(Qt.neg(Wt));er=(gr,ar)=>{let tr=Qt.sqr(ar);const dr=Qt.mul(gr,ar);tr=Qt.mul(tr,dr);let fr=Qt.pow(tr,pr);fr=Qt.mul(fr,dr);const br=Qt.mul(fr,ur),Sr=Qt.mul(Qt.sqr(fr),ar),Dr=Qt.eql(Sr,gr);let Er=Qt.cmov(br,fr,Dr);return{isValid:Dr,value:Er}}}return er}function rr(Qt,Wt){if($t.validateField(Qt),!Qt.isValid(Wt.A)||!Qt.isValid(Wt.B)||!Qt.isValid(Wt.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const nr=Jt(Qt,Wt.Z);if(!Qt.isOdd)throw new Error("Fp.isOdd is not implemented!");return yr=>{let vr,Ir,xr,Or,Nr,kr,lr,ir;vr=Qt.sqr(yr),vr=Qt.mul(vr,Wt.Z),Ir=Qt.sqr(vr),Ir=Qt.add(Ir,vr),xr=Qt.add(Ir,Qt.ONE),xr=Qt.mul(xr,Wt.B),Or=Qt.cmov(Wt.Z,Qt.neg(Ir),!Qt.eql(Ir,Qt.ZERO)),Or=Qt.mul(Or,Wt.A),Ir=Qt.sqr(xr),kr=Qt.sqr(Or),Nr=Qt.mul(kr,Wt.A),Ir=Qt.add(Ir,Nr),Ir=Qt.mul(Ir,xr),kr=Qt.mul(kr,Or),Nr=Qt.mul(kr,Wt.B),Ir=Qt.add(Ir,Nr),lr=Qt.mul(vr,xr);const{isValid:Xt,value:er}=nr(Ir,kr);ir=Qt.mul(vr,yr),ir=Qt.mul(ir,er),lr=Qt.cmov(lr,xr,Xt),ir=Qt.cmov(ir,er,Xt);const pr=Qt.isOdd(yr)===Qt.isOdd(ir);return ir=Qt.cmov(Qt.neg(ir),ir,pr),lr=Qt.div(lr,Or),{x:lr,y:ir}}}})(weierstrass$1);Object.defineProperty(_shortw_utils,"__esModule",{value:!0});_shortw_utils.getHash=getHash$1;_shortw_utils.createCurve=createCurve$1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hmac_1=require$$0$1,utils_1$6=require$$1$1,weierstrass_js_1=weierstrass$1;function getHash$1(_t){return{hash:_t,hmac:(e,...$t)=>(0,hmac_1.hmac)(_t,e,(0,utils_1$6.concatBytes)(...$t)),randomBytes:utils_1$6.randomBytes}}function createCurve$1(_t,e){const $t=xt=>(0,weierstrass_js_1.weierstrass)({..._t,...getHash$1(xt)});return Object.freeze({...$t(e),create:$t})}(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.encodeToCurve=_t.hashToCurve=_t.schnorr=_t.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=require$$0$2,$t=require$$1$1,xt=_shortw_utils,At=hashToCurve,kt=modular,Bt=utils$2,jt=weierstrass$1,Lt=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ut=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nt=BigInt(1),qt=BigInt(2),Kt=(ar,tr)=>(ar+tr/qt)/tr;function zt(ar){const tr=Lt,dr=BigInt(3),fr=BigInt(6),br=BigInt(11),Sr=BigInt(22),Dr=BigInt(23),Er=BigInt(44),wr=BigInt(88),Tr=ar*ar*ar%tr,Mr=Tr*Tr*ar%tr,Lr=(0,kt.pow2)(Mr,dr,tr)*Mr%tr,Cr=(0,kt.pow2)(Lr,dr,tr)*Mr%tr,Br=(0,kt.pow2)(Cr,qt,tr)*Tr%tr,$r=(0,kt.pow2)(Br,br,tr)*Br%tr,Rr=(0,kt.pow2)($r,Sr,tr)*$r%tr,Ur=(0,kt.pow2)(Rr,Er,tr)*Rr%tr,Pr=(0,kt.pow2)(Ur,wr,tr)*Ur%tr,_r=(0,kt.pow2)(Pr,Er,tr)*Rr%tr,Ar=(0,kt.pow2)(_r,dr,tr)*Mr%tr,jr=(0,kt.pow2)(Ar,Dr,tr)*$r%tr,Kr=(0,kt.pow2)(jr,fr,tr)*Tr%tr,Zr=(0,kt.pow2)(Kr,qt,tr);if(!Vt.eql(Vt.sqr(Zr),ar))throw new Error("Cannot find square root");return Zr}const Vt=(0,kt.Field)(Lt,void 0,void 0,{sqrt:zt});_t.secp256k1=(0,xt.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Vt,n:Ut,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:ar=>{const tr=Ut,dr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),fr=-Nt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),br=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Sr=dr,Dr=BigInt("0x100000000000000000000000000000000"),Er=Kt(Sr*ar,tr),wr=Kt(-fr*ar,tr);let Tr=(0,kt.mod)(ar-Er*dr-wr*br,tr),Mr=(0,kt.mod)(-Er*fr-wr*Sr,tr);const Lr=Tr>Dr,Cr=Mr>Dr;if(Lr&&(Tr=tr-Tr),Cr&&(Mr=tr-Mr),Tr>Dr||Mr>Dr)throw new Error("splitScalar: Endomorphism failed, k="+ar);return{k1neg:Lr,k1:Tr,k2neg:Cr,k2:Mr}}}},e.sha256);const Ht=BigInt(0),Jt=ar=>typeof ar=="bigint"&&Ht<ar&&ar<Lt,rr=ar=>typeof ar=="bigint"&&Ht<ar&&ar<Ut,Qt={};function Wt(ar,...tr){let dr=Qt[ar];if(dr===void 0){const fr=(0,e.sha256)(Uint8Array.from(ar,br=>br.charCodeAt(0)));dr=(0,Bt.concatBytes)(fr,fr),Qt[ar]=dr}return(0,e.sha256)((0,Bt.concatBytes)(dr,...tr))}const nr=ar=>ar.toRawBytes(!0).slice(1),yr=ar=>(0,Bt.numberToBytesBE)(ar,32),vr=ar=>(0,kt.mod)(ar,Lt),Ir=ar=>(0,kt.mod)(ar,Ut),xr=_t.secp256k1.ProjectivePoint,Or=(ar,tr,dr)=>xr.BASE.multiplyAndAddUnsafe(ar,tr,dr);function Nr(ar){let tr=_t.secp256k1.utils.normPrivateKeyToScalar(ar),dr=xr.fromPrivateKey(tr);return{scalar:dr.hasEvenY()?tr:Ir(-tr),bytes:nr(dr)}}function kr(ar){if(!Jt(ar))throw new Error("bad x: need 0 < x < p");const tr=vr(ar*ar),dr=vr(tr*ar+BigInt(7));let fr=zt(dr);fr%qt!==Ht&&(fr=vr(-fr));const br=new xr(ar,fr,Nt);return br.assertValidity(),br}function lr(...ar){return Ir((0,Bt.bytesToNumberBE)(Wt("BIP0340/challenge",...ar)))}function ir(ar){return Nr(ar).bytes}function Xt(ar,tr,dr=(0,$t.randomBytes)(32)){const fr=(0,Bt.ensureBytes)("message",ar),{bytes:br,scalar:Sr}=Nr(tr),Dr=(0,Bt.ensureBytes)("auxRand",dr,32),Er=yr(Sr^(0,Bt.bytesToNumberBE)(Wt("BIP0340/aux",Dr))),wr=Wt("BIP0340/nonce",Er,br,fr),Tr=Ir((0,Bt.bytesToNumberBE)(wr));if(Tr===Ht)throw new Error("sign failed: k is zero");const{bytes:Mr,scalar:Lr}=Nr(Tr),Cr=lr(Mr,br,fr),Br=new Uint8Array(64);if(Br.set(Mr,0),Br.set(yr(Ir(Lr+Cr*Sr)),32),!er(Br,fr,br))throw new Error("sign: Invalid signature produced");return Br}function er(ar,tr,dr){const fr=(0,Bt.ensureBytes)("signature",ar,64),br=(0,Bt.ensureBytes)("message",tr),Sr=(0,Bt.ensureBytes)("publicKey",dr,32);try{const Dr=kr((0,Bt.bytesToNumberBE)(Sr)),Er=(0,Bt.bytesToNumberBE)(fr.subarray(0,32));if(!Jt(Er))return!1;const wr=(0,Bt.bytesToNumberBE)(fr.subarray(32,64));if(!rr(wr))return!1;const Tr=lr(yr(Er),nr(Dr),br),Mr=Or(Dr,wr,Ir(-Tr));return!(!Mr||!Mr.hasEvenY()||Mr.toAffine().x!==Er)}catch{return!1}}_t.schnorr={getPublicKey:ir,sign:Xt,verify:er,utils:{randomPrivateKey:_t.secp256k1.utils.randomPrivateKey,lift_x:kr,pointToBytes:nr,numberToBytesBE:Bt.numberToBytesBE,bytesToNumberBE:Bt.bytesToNumberBE,taggedHash:Wt,mod:kt.mod}};const pr=(0,At.isogenyMap)(Vt,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(ar=>ar.map(tr=>BigInt(tr)))),ur=(0,jt.mapToCurveSimpleSWU)(Vt,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Vt.create(BigInt("-11"))}),gr=(0,At.createHasher)(_t.secp256k1.ProjectivePoint,ar=>{const{x:tr,y:dr}=ur(Vt.create(ar[0]));return pr(tr,dr)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Vt.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});_t.hashToCurve=gr.hashToCurve,_t.encodeToCurve=gr.encodeToCurve})(secp256k1$1);var hex={};Object.defineProperty(hex,"__esModule",{value:!0});hex.decodeHex=hex.remove0x=void 0;var utils_1$5=utils$6;function remove0x(_t){return _t.startsWith("0x")||_t.startsWith("0X")?_t.slice(2):_t}hex.remove0x=remove0x;function decodeHex(_t){return(0,utils_1$5.hexToBytes)(remove0x(_t))}hex.decodeHex=decodeHex;var symmetric={},chacha={},_poly1305={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=void 0;function number$1(_t){if(!Number.isSafeInteger(_t)||_t<0)throw new Error(`Wrong positive integer: ${_t}`)}_assert.number=number$1;function bool(_t){if(typeof _t!="boolean")throw new Error(`Expected boolean, not ${_t}`)}_assert.bool=bool;function bytes$2(_t,...e){if(!(_t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(_t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${_t.length}`)}_assert.bytes=bytes$2;function hash$1(_t){if(typeof _t!="function"||typeof _t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");number$1(_t.outputLen),number$1(_t.blockLen)}_assert.hash=hash$1;function exists$2(_t,e=!0){if(_t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&_t.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists$2;function output$2(_t,e){bytes$2(_t);const $t=e.outputLen;if(_t.length<$t)throw new Error(`digestInto() expects output buffer of length at least ${$t}`)}_assert.output=output$2;const assert$2={number:number$1,bool,bytes:bytes$2,hash:hash$1,exists:exists$2,output:output$2};_assert.default=assert$2;Object.defineProperty(_poly1305,"__esModule",{value:!0});_poly1305.poly1305=_poly1305.wrapConstructorWithKey=void 0;const utils_js_1$3=utils$6,_assert_js_1$2=_assert,u8to16$1=(_t,e)=>_t[e++]&255|(_t[e++]&255)<<8;let Poly1305$1=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,utils_js_1$3.toBytes)(e),(0,utils_js_1$3.ensureBytes)(e,32);const $t=u8to16$1(e,0),xt=u8to16$1(e,2),At=u8to16$1(e,4),kt=u8to16$1(e,6),Bt=u8to16$1(e,8),jt=u8to16$1(e,10),Lt=u8to16$1(e,12),Ut=u8to16$1(e,14);this.r[0]=$t&8191,this.r[1]=($t>>>13|xt<<3)&8191,this.r[2]=(xt>>>10|At<<6)&7939,this.r[3]=(At>>>7|kt<<9)&8191,this.r[4]=(kt>>>4|Bt<<12)&255,this.r[5]=Bt>>>1&8190,this.r[6]=(Bt>>>14|jt<<2)&8191,this.r[7]=(jt>>>11|Lt<<5)&8065,this.r[8]=(Lt>>>8|Ut<<8)&8191,this.r[9]=Ut>>>5&127;for(let Nt=0;Nt<8;Nt++)this.pad[Nt]=u8to16$1(e,16+2*Nt)}process(e,$t,xt=!1){const At=xt?0:2048,{h:kt,r:Bt}=this,jt=Bt[0],Lt=Bt[1],Ut=Bt[2],Nt=Bt[3],qt=Bt[4],Kt=Bt[5],zt=Bt[6],Vt=Bt[7],Ht=Bt[8],Jt=Bt[9],rr=u8to16$1(e,$t+0),Qt=u8to16$1(e,$t+2),Wt=u8to16$1(e,$t+4),nr=u8to16$1(e,$t+6),yr=u8to16$1(e,$t+8),vr=u8to16$1(e,$t+10),Ir=u8to16$1(e,$t+12),xr=u8to16$1(e,$t+14);let Or=kt[0]+(rr&8191),Nr=kt[1]+((rr>>>13|Qt<<3)&8191),kr=kt[2]+((Qt>>>10|Wt<<6)&8191),lr=kt[3]+((Wt>>>7|nr<<9)&8191),ir=kt[4]+((nr>>>4|yr<<12)&8191),Xt=kt[5]+(yr>>>1&8191),er=kt[6]+((yr>>>14|vr<<2)&8191),pr=kt[7]+((vr>>>11|Ir<<5)&8191),ur=kt[8]+((Ir>>>8|xr<<8)&8191),gr=kt[9]+(xr>>>5|At),ar=0,tr=ar+Or*jt+Nr*(5*Jt)+kr*(5*Ht)+lr*(5*Vt)+ir*(5*zt);ar=tr>>>13,tr&=8191,tr+=Xt*(5*Kt)+er*(5*qt)+pr*(5*Nt)+ur*(5*Ut)+gr*(5*Lt),ar+=tr>>>13,tr&=8191;let dr=ar+Or*Lt+Nr*jt+kr*(5*Jt)+lr*(5*Ht)+ir*(5*Vt);ar=dr>>>13,dr&=8191,dr+=Xt*(5*zt)+er*(5*Kt)+pr*(5*qt)+ur*(5*Nt)+gr*(5*Ut),ar+=dr>>>13,dr&=8191;let fr=ar+Or*Ut+Nr*Lt+kr*jt+lr*(5*Jt)+ir*(5*Ht);ar=fr>>>13,fr&=8191,fr+=Xt*(5*Vt)+er*(5*zt)+pr*(5*Kt)+ur*(5*qt)+gr*(5*Nt),ar+=fr>>>13,fr&=8191;let br=ar+Or*Nt+Nr*Ut+kr*Lt+lr*jt+ir*(5*Jt);ar=br>>>13,br&=8191,br+=Xt*(5*Ht)+er*(5*Vt)+pr*(5*zt)+ur*(5*Kt)+gr*(5*qt),ar+=br>>>13,br&=8191;let Sr=ar+Or*qt+Nr*Nt+kr*Ut+lr*Lt+ir*jt;ar=Sr>>>13,Sr&=8191,Sr+=Xt*(5*Jt)+er*(5*Ht)+pr*(5*Vt)+ur*(5*zt)+gr*(5*Kt),ar+=Sr>>>13,Sr&=8191;let Dr=ar+Or*Kt+Nr*qt+kr*Nt+lr*Ut+ir*Lt;ar=Dr>>>13,Dr&=8191,Dr+=Xt*jt+er*(5*Jt)+pr*(5*Ht)+ur*(5*Vt)+gr*(5*zt),ar+=Dr>>>13,Dr&=8191;let Er=ar+Or*zt+Nr*Kt+kr*qt+lr*Nt+ir*Ut;ar=Er>>>13,Er&=8191,Er+=Xt*Lt+er*jt+pr*(5*Jt)+ur*(5*Ht)+gr*(5*Vt),ar+=Er>>>13,Er&=8191;let wr=ar+Or*Vt+Nr*zt+kr*Kt+lr*qt+ir*Nt;ar=wr>>>13,wr&=8191,wr+=Xt*Ut+er*Lt+pr*jt+ur*(5*Jt)+gr*(5*Ht),ar+=wr>>>13,wr&=8191;let Tr=ar+Or*Ht+Nr*Vt+kr*zt+lr*Kt+ir*qt;ar=Tr>>>13,Tr&=8191,Tr+=Xt*Nt+er*Ut+pr*Lt+ur*jt+gr*(5*Jt),ar+=Tr>>>13,Tr&=8191;let Mr=ar+Or*Jt+Nr*Ht+kr*Vt+lr*zt+ir*Kt;ar=Mr>>>13,Mr&=8191,Mr+=Xt*qt+er*Nt+pr*Ut+ur*Lt+gr*jt,ar+=Mr>>>13,Mr&=8191,ar=(ar<<2)+ar|0,ar=ar+tr|0,tr=ar&8191,ar=ar>>>13,dr+=ar,kt[0]=tr,kt[1]=dr,kt[2]=fr,kt[3]=br,kt[4]=Sr,kt[5]=Dr,kt[6]=Er,kt[7]=wr,kt[8]=Tr,kt[9]=Mr}finalize(){const{h:e,pad:$t}=this,xt=new Uint16Array(10);let At=e[1]>>>13;e[1]&=8191;for(let jt=2;jt<10;jt++)e[jt]+=At,At=e[jt]>>>13,e[jt]&=8191;e[0]+=At*5,At=e[0]>>>13,e[0]&=8191,e[1]+=At,At=e[1]>>>13,e[1]&=8191,e[2]+=At,xt[0]=e[0]+5,At=xt[0]>>>13,xt[0]&=8191;for(let jt=1;jt<10;jt++)xt[jt]=e[jt]+At,At=xt[jt]>>>13,xt[jt]&=8191;xt[9]-=8192;let kt=(At^1)-1;for(let jt=0;jt<10;jt++)xt[jt]&=kt;kt=~kt;for(let jt=0;jt<10;jt++)e[jt]=e[jt]&kt|xt[jt];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let Bt=e[0]+$t[0];e[0]=Bt&65535;for(let jt=1;jt<8;jt++)Bt=(e[jt]+$t[jt]|0)+(Bt>>>16)|0,e[jt]=Bt&65535}update(e){_assert_js_1$2.default.exists(this);const{buffer:$t,blockLen:xt}=this;e=(0,utils_js_1$3.toBytes)(e);const At=e.length;for(let kt=0;kt<At;){const Bt=Math.min(xt-this.pos,At-kt);if(Bt===xt){for(;xt<=At-kt;kt+=xt)this.process(e,kt);continue}$t.set(e.subarray(kt,kt+Bt),this.pos),this.pos+=Bt,kt+=Bt,this.pos===xt&&(this.process($t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){_assert_js_1$2.default.exists(this),_assert_js_1$2.default.output(e,this),this.finished=!0;const{buffer:$t,h:xt}=this;let{pos:At}=this;if(At){for($t[At++]=1;At<16;At++)$t[At]=0;this.process($t,0,!0)}this.finalize();let kt=0;for(let Bt=0;Bt<8;Bt++)e[kt++]=xt[Bt]>>>0,e[kt++]=xt[Bt]>>>8;return e}digest(){const{buffer:e,outputLen:$t}=this;this.digestInto(e);const xt=e.slice(0,$t);return this.destroy(),xt}};function wrapConstructorWithKey$1(_t){const e=(xt,At)=>_t(At).update((0,utils_js_1$3.toBytes)(xt)).digest(),$t=_t(new Uint8Array(32));return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=xt=>_t(xt),e}_poly1305.wrapConstructorWithKey=wrapConstructorWithKey$1;_poly1305.poly1305=wrapConstructorWithKey$1(_t=>new Poly1305$1(_t));var _salsa={};Object.defineProperty(_salsa,"__esModule",{value:!0});_salsa.salsaBasic=void 0;const _assert_js_1$1=_assert,utils_js_1$2=utils$6,sigma16$1=(0,utils_js_1$2.utf8ToBytes)("expand 16-byte k"),sigma32$1=(0,utils_js_1$2.utf8ToBytes)("expand 32-byte k"),sigma16_32=(0,utils_js_1$2.u32)(sigma16$1),sigma32_32=(0,utils_js_1$2.u32)(sigma32$1),isAligned32=_t=>!(_t.byteOffset%4),salsaBasic=_t=>{const{core:e,rounds:$t,counterRight:xt,counterLen:At,allow128bitKeys:kt,extendNonceFn:Bt,blockLen:jt}=(0,utils_js_1$2.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},_t);_assert_js_1$1.default.number(At),_assert_js_1$1.default.number($t),_assert_js_1$1.default.number(jt),_assert_js_1$1.default.bool(xt),_assert_js_1$1.default.bool(kt);const Lt=jt/4;if(jt%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(Ut,Nt,qt,Kt,zt=0)=>{if(_assert_js_1$1.default.bytes(Ut),_assert_js_1$1.default.bytes(Nt),_assert_js_1$1.default.bytes(qt),Kt||(Kt=new Uint8Array(qt.length)),_assert_js_1$1.default.bytes(Kt),_assert_js_1$1.default.number(zt),zt<0||zt>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(Kt.length<qt.length)throw new Error(`Salsa/ChaCha: output (${Kt.length}) is shorter than data (${qt.length})`);const Vt=[];let Ht,Jt;if(Ut.length===32)isAligned32(Ut)?Ht=Ut:(Ht=Ut.slice(),Vt.push(Ht)),Jt=sigma32_32;else if(Ut.length===16&&kt)Ht=new Uint8Array(32),Ht.set(Ut),Ht.set(Ut,16),Jt=sigma16_32,Vt.push(Ht);else throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${Ut.length}`);if(isAligned32(Nt)||(Nt=Nt.slice(),Vt.push(Nt)),Bt){if(Nt.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");Ht=Bt(Jt,Ht,Nt.subarray(0,16),new Uint8Array(32)),Vt.push(Ht),Nt=Nt.subarray(16)}const rr=16-At;if(Nt.length!==rr)throw new Error(`Salsa/ChaCha: nonce must be ${rr} or 16 bytes`);if(rr!==12){const Or=new Uint8Array(12);Or.set(Nt,xt?0:12-Nt.length),Vt.push(Nt=Or)}const Qt=new Uint8Array(jt),Wt=(0,utils_js_1$2.u32)(Qt),nr=(0,utils_js_1$2.u32)(Ht),yr=(0,utils_js_1$2.u32)(Nt),vr=isAligned32(qt)&&(0,utils_js_1$2.u32)(qt),Ir=isAligned32(Kt)&&(0,utils_js_1$2.u32)(Kt);Vt.push(Wt);const xr=qt.length;for(let Or=0,Nr=zt;Or<xr;Nr++){if(e(Jt,nr,yr,Wt,Nr,$t),Nr>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const kr=Math.min(jt,xr-Or);if(kr===jt&&Ir&&vr){const lr=Or/4;if(Or%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let ir=0;ir<Lt;ir++)Ir[lr+ir]=vr[lr+ir]^Wt[ir];Or+=jt;continue}for(let lr=0;lr<kr;lr++)Kt[Or+lr]=qt[Or+lr]^Qt[lr];Or+=kr}for(let Or=0;Or<Vt.length;Or++)Vt[Or].fill(0);return Kt}};_salsa.salsaBasic=salsaBasic;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.xchacha20poly1305=_t.chacha20poly1305=_t._poly1305_aead=_t.chacha12=_t.chacha8=_t.xchacha20=_t.chacha20=_t.chacha20orig=_t.hchacha=void 0;const e=utils$6,$t=_poly1305,xt=_salsa,At=(qt,Kt)=>qt<<Kt|qt>>>32-Kt;function kt(qt,Kt,zt,Vt,Ht,Jt=20){let rr=qt[0],Qt=qt[1],Wt=qt[2],nr=qt[3],yr=Kt[0],vr=Kt[1],Ir=Kt[2],xr=Kt[3],Or=Kt[4],Nr=Kt[5],kr=Kt[6],lr=Kt[7],ir=Ht,Xt=zt[0],er=zt[1],pr=zt[2],ur=rr,gr=Qt,ar=Wt,tr=nr,dr=yr,fr=vr,br=Ir,Sr=xr,Dr=Or,Er=Nr,wr=kr,Tr=lr,Mr=ir,Lr=Xt,Cr=er,Br=pr;for(let Rr=0;Rr<Jt;Rr+=2)ur=ur+dr|0,Mr=At(Mr^ur,16),Dr=Dr+Mr|0,dr=At(dr^Dr,12),ur=ur+dr|0,Mr=At(Mr^ur,8),Dr=Dr+Mr|0,dr=At(dr^Dr,7),gr=gr+fr|0,Lr=At(Lr^gr,16),Er=Er+Lr|0,fr=At(fr^Er,12),gr=gr+fr|0,Lr=At(Lr^gr,8),Er=Er+Lr|0,fr=At(fr^Er,7),ar=ar+br|0,Cr=At(Cr^ar,16),wr=wr+Cr|0,br=At(br^wr,12),ar=ar+br|0,Cr=At(Cr^ar,8),wr=wr+Cr|0,br=At(br^wr,7),tr=tr+Sr|0,Br=At(Br^tr,16),Tr=Tr+Br|0,Sr=At(Sr^Tr,12),tr=tr+Sr|0,Br=At(Br^tr,8),Tr=Tr+Br|0,Sr=At(Sr^Tr,7),ur=ur+fr|0,Br=At(Br^ur,16),wr=wr+Br|0,fr=At(fr^wr,12),ur=ur+fr|0,Br=At(Br^ur,8),wr=wr+Br|0,fr=At(fr^wr,7),gr=gr+br|0,Mr=At(Mr^gr,16),Tr=Tr+Mr|0,br=At(br^Tr,12),gr=gr+br|0,Mr=At(Mr^gr,8),Tr=Tr+Mr|0,br=At(br^Tr,7),ar=ar+Sr|0,Lr=At(Lr^ar,16),Dr=Dr+Lr|0,Sr=At(Sr^Dr,12),ar=ar+Sr|0,Lr=At(Lr^ar,8),Dr=Dr+Lr|0,Sr=At(Sr^Dr,7),tr=tr+dr|0,Cr=At(Cr^tr,16),Er=Er+Cr|0,dr=At(dr^Er,12),tr=tr+dr|0,Cr=At(Cr^tr,8),Er=Er+Cr|0,dr=At(dr^Er,7);let $r=0;Vt[$r++]=rr+ur|0,Vt[$r++]=Qt+gr|0,Vt[$r++]=Wt+ar|0,Vt[$r++]=nr+tr|0,Vt[$r++]=yr+dr|0,Vt[$r++]=vr+fr|0,Vt[$r++]=Ir+br|0,Vt[$r++]=xr+Sr|0,Vt[$r++]=Or+Dr|0,Vt[$r++]=Nr+Er|0,Vt[$r++]=kr+wr|0,Vt[$r++]=lr+Tr|0,Vt[$r++]=ir+Mr|0,Vt[$r++]=Xt+Lr|0,Vt[$r++]=er+Cr|0,Vt[$r++]=pr+Br|0}function Bt(qt,Kt,zt,Vt){const Ht=(0,e.u32)(Kt),Jt=(0,e.u32)(zt),rr=(0,e.u32)(Vt);let Qt=qt[0],Wt=qt[1],nr=qt[2],yr=qt[3],vr=Ht[0],Ir=Ht[1],xr=Ht[2],Or=Ht[3],Nr=Ht[4],kr=Ht[5],lr=Ht[6],ir=Ht[7],Xt=Jt[0],er=Jt[1],pr=Jt[2],ur=Jt[3];for(let gr=0;gr<20;gr+=2)Qt=Qt+vr|0,Xt=At(Xt^Qt,16),Nr=Nr+Xt|0,vr=At(vr^Nr,12),Qt=Qt+vr|0,Xt=At(Xt^Qt,8),Nr=Nr+Xt|0,vr=At(vr^Nr,7),Wt=Wt+Ir|0,er=At(er^Wt,16),kr=kr+er|0,Ir=At(Ir^kr,12),Wt=Wt+Ir|0,er=At(er^Wt,8),kr=kr+er|0,Ir=At(Ir^kr,7),nr=nr+xr|0,pr=At(pr^nr,16),lr=lr+pr|0,xr=At(xr^lr,12),nr=nr+xr|0,pr=At(pr^nr,8),lr=lr+pr|0,xr=At(xr^lr,7),yr=yr+Or|0,ur=At(ur^yr,16),ir=ir+ur|0,Or=At(Or^ir,12),yr=yr+Or|0,ur=At(ur^yr,8),ir=ir+ur|0,Or=At(Or^ir,7),Qt=Qt+Ir|0,ur=At(ur^Qt,16),lr=lr+ur|0,Ir=At(Ir^lr,12),Qt=Qt+Ir|0,ur=At(ur^Qt,8),lr=lr+ur|0,Ir=At(Ir^lr,7),Wt=Wt+xr|0,Xt=At(Xt^Wt,16),ir=ir+Xt|0,xr=At(xr^ir,12),Wt=Wt+xr|0,Xt=At(Xt^Wt,8),ir=ir+Xt|0,xr=At(xr^ir,7),nr=nr+Or|0,er=At(er^nr,16),Nr=Nr+er|0,Or=At(Or^Nr,12),nr=nr+Or|0,er=At(er^nr,8),Nr=Nr+er|0,Or=At(Or^Nr,7),yr=yr+vr|0,pr=At(pr^yr,16),kr=kr+pr|0,vr=At(vr^kr,12),yr=yr+vr|0,pr=At(pr^yr,8),kr=kr+pr|0,vr=At(vr^kr,7);return rr[0]=Qt,rr[1]=Wt,rr[2]=nr,rr[3]=yr,rr[4]=Xt,rr[5]=er,rr[6]=pr,rr[7]=ur,Vt}_t.hchacha=Bt,_t.chacha20orig=(0,xt.salsaBasic)({core:kt,counterRight:!1,counterLen:8}),_t.chacha20=(0,xt.salsaBasic)({core:kt,counterRight:!1,counterLen:4,allow128bitKeys:!1}),_t.xchacha20=(0,xt.salsaBasic)({core:kt,counterRight:!1,counterLen:8,extendNonceFn:Bt,allow128bitKeys:!1}),_t.chacha8=(0,xt.salsaBasic)({core:kt,counterRight:!1,counterLen:4,rounds:8}),_t.chacha12=(0,xt.salsaBasic)({core:kt,counterRight:!1,counterLen:4,rounds:12});const jt=new Uint8Array(16),Lt=(qt,Kt)=>{qt.update(Kt);const zt=Kt.length%16;zt&&qt.update(jt.subarray(zt))},Ut=(qt,Kt,zt,Vt,Ht)=>{const Jt=qt(Kt,zt,new Uint8Array(32)),rr=$t.poly1305.create(Jt);Ht&&Lt(rr,Ht),Lt(rr,Vt);const Qt=new Uint8Array(16),Wt=(0,e.createView)(Qt);(0,e.setBigUint64)(Wt,0,BigInt(Ht?Ht.length:0),!0),(0,e.setBigUint64)(Wt,8,BigInt(Vt.length),!0),rr.update(Qt);const nr=rr.digest();return Jt.fill(0),nr},Nt=qt=>(Kt,zt,Vt)=>((0,e.ensureBytes)(Kt,32),(0,e.ensureBytes)(zt),{tagLength:16,encrypt:(Jt,rr)=>{const Qt=Jt.length,Wt=Qt+16;rr?(0,e.ensureBytes)(rr,Wt):rr=new Uint8Array(Wt),qt(Kt,zt,Jt,rr,1);const nr=Ut(qt,Kt,zt,rr.subarray(0,-16),Vt);return rr.set(nr,Qt),rr},decrypt:(Jt,rr)=>{const Qt=Jt.length,Wt=Qt-16;if(Qt<16)throw new Error("encrypted data must be at least 16 bytes");rr?(0,e.ensureBytes)(rr,Wt):rr=new Uint8Array(Wt);const nr=Jt.subarray(0,-16),yr=Jt.subarray(-16),vr=Ut(qt,Kt,zt,nr,Vt);if(!(0,e.equalBytes)(yr,vr))throw new Error("invalid tag");return qt(Kt,zt,nr,rr,1),rr}});_t._poly1305_aead=Nt,_t.chacha20poly1305=(0,_t._poly1305_aead)(_t.chacha20),_t.xchacha20poly1305=(0,_t._poly1305_aead)(_t.xchacha20)})(chacha);var hkdf$1={},hmac$1={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.hmac=_t.HMAC=void 0;const e=_assert$1,$t=utils$3;class xt extends $t.Hash{constructor(Bt,jt){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(Bt);const Lt=(0,$t.toBytes)(jt);if(this.iHash=Bt.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const Ut=this.blockLen,Nt=new Uint8Array(Ut);Nt.set(Lt.length>Ut?Bt.create().update(Lt).digest():Lt);for(let qt=0;qt<Nt.length;qt++)Nt[qt]^=54;this.iHash.update(Nt),this.oHash=Bt.create();for(let qt=0;qt<Nt.length;qt++)Nt[qt]^=106;this.oHash.update(Nt),Nt.fill(0)}update(Bt){return(0,e.exists)(this),this.iHash.update(Bt),this}digestInto(Bt){(0,e.exists)(this),(0,e.bytes)(Bt,this.outputLen),this.finished=!0,this.iHash.digestInto(Bt),this.oHash.update(Bt),this.oHash.digestInto(Bt),this.destroy()}digest(){const Bt=new Uint8Array(this.oHash.outputLen);return this.digestInto(Bt),Bt}_cloneInto(Bt){Bt||(Bt=Object.create(Object.getPrototypeOf(this),{}));const{oHash:jt,iHash:Lt,finished:Ut,destroyed:Nt,blockLen:qt,outputLen:Kt}=this;return Bt=Bt,Bt.finished=Ut,Bt.destroyed=Nt,Bt.blockLen=qt,Bt.outputLen=Kt,Bt.oHash=jt._cloneInto(Bt.oHash),Bt.iHash=Lt._cloneInto(Bt.iHash),Bt}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}_t.HMAC=xt;const At=(kt,Bt,jt)=>new xt(kt,Bt).update(jt).digest();_t.hmac=At,_t.hmac.create=(kt,Bt)=>new xt(kt,Bt)})(hmac$1);Object.defineProperty(hkdf$1,"__esModule",{value:!0});hkdf$1.hkdf=hkdf$1.expand=hkdf$1.extract=void 0;const _assert_js_1=_assert$1,utils_js_1$1=utils$3,hmac_js_1=hmac$1;function extract(_t,e,$t){return(0,_assert_js_1.hash)(_t),$t===void 0&&($t=new Uint8Array(_t.outputLen)),(0,hmac_js_1.hmac)(_t,(0,utils_js_1$1.toBytes)($t),(0,utils_js_1$1.toBytes)(e))}hkdf$1.extract=extract;const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(_t,e,$t,xt=32){if((0,_assert_js_1.hash)(_t),(0,_assert_js_1.number)(xt),xt>255*_t.outputLen)throw new Error("Length should be <= 255*HashLen");const At=Math.ceil(xt/_t.outputLen);$t===void 0&&($t=EMPTY_BUFFER);const kt=new Uint8Array(At*_t.outputLen),Bt=hmac_js_1.hmac.create(_t,e),jt=Bt._cloneInto(),Lt=new Uint8Array(Bt.outputLen);for(let Ut=0;Ut<At;Ut++)HKDF_COUNTER[0]=Ut+1,jt.update(Ut===0?EMPTY_BUFFER:Lt).update($t).update(HKDF_COUNTER).digestInto(Lt),kt.set(Lt,_t.outputLen*Ut),Bt._cloneInto(jt);return Bt.destroy(),jt.destroy(),Lt.fill(0),HKDF_COUNTER.fill(0),kt.slice(0,xt)}hkdf$1.expand=expand;const hkdf=(_t,e,$t,xt,At)=>expand(_t,extract(_t,e,$t),xt,At);hkdf$1.hkdf=hkdf;var sha256$1={};Object.defineProperty(sha256$1,"__esModule",{value:!0});sha256$1.sha224=sha256$1.sha256=void 0;const _md_js_1=_md,utils_js_1=utils$3,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends _md_js_1.HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:e,B:$t,C:xt,D:At,E:kt,F:Bt,G:jt,H:Lt}=this;return[e,$t,xt,At,kt,Bt,jt,Lt]}set(e,$t,xt,At,kt,Bt,jt,Lt){this.A=e|0,this.B=$t|0,this.C=xt|0,this.D=At|0,this.E=kt|0,this.F=Bt|0,this.G=jt|0,this.H=Lt|0}process(e,$t){for(let qt=0;qt<16;qt++,$t+=4)SHA256_W$1[qt]=e.getUint32($t,!1);for(let qt=16;qt<64;qt++){const Kt=SHA256_W$1[qt-15],zt=SHA256_W$1[qt-2],Vt=(0,utils_js_1.rotr)(Kt,7)^(0,utils_js_1.rotr)(Kt,18)^Kt>>>3,Ht=(0,utils_js_1.rotr)(zt,17)^(0,utils_js_1.rotr)(zt,19)^zt>>>10;SHA256_W$1[qt]=Ht+SHA256_W$1[qt-7]+Vt+SHA256_W$1[qt-16]|0}let{A:xt,B:At,C:kt,D:Bt,E:jt,F:Lt,G:Ut,H:Nt}=this;for(let qt=0;qt<64;qt++){const Kt=(0,utils_js_1.rotr)(jt,6)^(0,utils_js_1.rotr)(jt,11)^(0,utils_js_1.rotr)(jt,25),zt=Nt+Kt+(0,_md_js_1.Chi)(jt,Lt,Ut)+SHA256_K$1[qt]+SHA256_W$1[qt]|0,Ht=((0,utils_js_1.rotr)(xt,2)^(0,utils_js_1.rotr)(xt,13)^(0,utils_js_1.rotr)(xt,22))+(0,_md_js_1.Maj)(xt,At,kt)|0;Nt=Ut,Ut=Lt,Lt=jt,jt=Bt+zt|0,Bt=kt,kt=At,At=xt,xt=zt+Ht|0}xt=xt+this.A|0,At=At+this.B|0,kt=kt+this.C|0,Bt=Bt+this.D|0,jt=jt+this.E|0,Lt=Lt+this.F|0,Ut=Ut+this.G|0,Nt=Nt+this.H|0,this.set(xt,At,kt,Bt,jt,Lt,Ut,Nt)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class SHA224 extends SHA256$1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}sha256$1.sha256=(0,utils_js_1.wrapConstructor)(()=>new SHA256$1);sha256$1.sha224=(0,utils_js_1.wrapConstructor)(()=>new SHA224);var compat={};Object.defineProperty(compat,"__esModule",{value:!0});compat.aes256gcm=void 0;var utils_1$4=utils$6,crypto_1=requireCryptoBrowserify(),consts_1$2=consts;function aes256gcm(_t,e,$t){var xt=function(kt){var Bt=(0,crypto_1.createCipheriv)("aes-256-gcm",_t,e);$t&&Bt.setAAD($t);var jt=Bt.update(kt),Lt=Bt.final();return(0,utils_1$4.concatBytes)(jt,Lt,Bt.getAuthTag())},At=function(kt){var Bt=kt.subarray(0,kt.length-consts_1$2.AEAD_TAG_LENGTH),jt=kt.subarray(-consts_1$2.AEAD_TAG_LENGTH),Lt=(0,crypto_1.createDecipheriv)("aes-256-gcm",_t,e);$t&&Lt.setAAD($t),Lt.setAuthTag(jt);var Ut=Lt.update(Bt),Nt=Lt.final();return(0,utils_1$4.concatBytes)(Ut,Nt)};return{tagLength:consts_1$2.AEAD_TAG_LENGTH,encrypt:xt,decrypt:At}}compat.aes256gcm=aes256gcm;Object.defineProperty(symmetric,"__esModule",{value:!0});symmetric.deriveKey=symmetric.aesDecrypt=symmetric.aesEncrypt=void 0;var chacha_1=chacha,utils_1$3=utils$6,utils_2$3=utils$4,hkdf_1=hkdf$1,sha256_1=sha256$1,config_1$3=config,consts_1$1=consts,compat_1=compat;function aesEncrypt(_t,e){return _exec$1(!0,_t,e)}symmetric.aesEncrypt=aesEncrypt;function aesDecrypt(_t,e){return _exec$1(!1,_t,e)}symmetric.aesDecrypt=aesDecrypt;function deriveKey(_t){return(0,hkdf_1.hkdf)(sha256_1.sha256,_t,void 0,void 0,32)}symmetric.deriveKey=deriveKey;function _exec$1(_t,e,$t){var xt=(0,config_1$3.symmetricAlgorithm)(),At=_t?_encrypt:_decrypt;if(xt==="aes-256-gcm")return At(compat_1.aes256gcm,e,$t,(0,config_1$3.symmetricNonceLength)());if(xt==="xchacha20")return At(chacha_1.xchacha20poly1305,e,$t,consts_1$1.XCHACHA20_NONCE_LENGTH);throw new Error("Not implemented")}function _encrypt(_t,e,$t,xt){var At=(0,utils_2$3.randomBytes)(xt),kt=_t(e,At),Bt=kt.encrypt($t),jt=Bt.subarray(0,Bt.length-consts_1$1.AEAD_TAG_LENGTH),Lt=Bt.subarray(-consts_1$1.AEAD_TAG_LENGTH);return(0,utils_1$3.concatBytes)(At,Lt,jt)}function _decrypt(_t,e,$t,xt){var At=xt+consts_1$1.AEAD_TAG_LENGTH,kt=$t.subarray(0,xt),Bt=$t.subarray(xt,At),jt=$t.subarray(At),Lt=_t(e,Uint8Array.from(kt)),Ut=(0,utils_1$3.concatBytes)(jt,Bt);return Lt.decrypt(Ut)}Object.defineProperty(elliptic,"__esModule",{value:!0});elliptic.hexToPublicKey=elliptic.convertPublicKeyFormat=elliptic.getSharedPoint=elliptic.getSharedKey=elliptic.getPublicKey=elliptic.isValidPrivateKey=elliptic.getValidSecret=void 0;var utils_1$2=utils$6,utils_2$2=utils$4,ed25519_1=ed25519$1,secp256k1_1=secp256k1$1,config_1$2=config,consts_1=consts,hex_1=hex,symmetric_1=symmetric;function getValidSecret(){var _t;do _t=(0,utils_2$2.randomBytes)(consts_1.SECRET_KEY_LENGTH);while(!isValidPrivateKey(_t));return _t}elliptic.getValidSecret=getValidSecret;function isValidPrivateKey(_t){return _exec(function(e){return e.utils.isValidPrivateKey(_t)},function(){return!0},function(){return!0})}elliptic.isValidPrivateKey=isValidPrivateKey;function getPublicKey(_t){return _exec(function(e){return e.getPublicKey(_t)},function(e){return e.getPublicKey(_t)},function(e){return e.getPublicKey(_t)})}elliptic.getPublicKey=getPublicKey;function getSharedKey(_t,e){return(0,symmetric_1.deriveKey)((0,utils_1$2.concatBytes)(_t,e))}elliptic.getSharedKey=getSharedKey;function getSharedPoint(_t,e,$t){return _exec(function(xt){return xt.getSharedSecret(_t,e,$t)},function(xt){return xt.getSharedSecret(_t,e)},function(xt){var At=xt.utils.getExtendedPublicKey(_t).scalar,kt=xt.ExtendedPoint.fromHex(e).multiply(At);return kt.toRawBytes()})}elliptic.getSharedPoint=getSharedPoint;function convertPublicKeyFormat(_t,e){return _exec(function($t){return $t.getSharedSecret(BigInt(1),_t,e)},function(){return _t},function(){return _t})}elliptic.convertPublicKeyFormat=convertPublicKeyFormat;function hexToPublicKey(_t){var e=(0,hex_1.decodeHex)(_t);return _exec(function(){if(e.length===consts_1.ETH_PUBLIC_KEY_SIZE){var $t=new Uint8Array(1+e.length);return $t.set([4]),$t.set(e,1),$t}return e},function(){return e},function(){return e})}elliptic.hexToPublicKey=hexToPublicKey;function _exec(_t,e,$t){if((0,config_1$2.ellipticCurve)()==="secp256k1")return _t(secp256k1_1.secp256k1);if((0,config_1$2.ellipticCurve)()==="x25519")return e(ed25519_1.x25519);if((0,config_1$2.ellipticCurve)()==="ed25519")return $t(ed25519_1.ed25519);throw new Error("Not implemented")}(function(_t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(xt,At,kt,Bt){Bt===void 0&&(Bt=kt);var jt=Object.getOwnPropertyDescriptor(At,kt);(!jt||("get"in jt?!At.__esModule:jt.writable||jt.configurable))&&(jt={enumerable:!0,get:function(){return At[kt]}}),Object.defineProperty(xt,Bt,jt)}:function(xt,At,kt,Bt){Bt===void 0&&(Bt=kt),xt[Bt]=At[kt]}),$t=commonjsGlobal&&commonjsGlobal.__exportStar||function(xt,At){for(var kt in xt)kt!=="default"&&!Object.prototype.hasOwnProperty.call(At,kt)&&e(At,xt,kt)};Object.defineProperty(_t,"__esModule",{value:!0}),$t(elliptic,_t),$t(hex,_t),$t(symmetric,_t)})(utils$5);var PublicKey$1={};Object.defineProperty(PublicKey$1,"__esModule",{value:!0});PublicKey$1.PublicKey=void 0;var utils_1$1=utils$6,config_1$1=config,utils_2$1=utils$5,PublicKey=function(){function _t(e){this.data=(0,utils_2$1.convertPublicKeyFormat)(e,!0)}return _t.fromHex=function(e){return new _t((0,utils_2$1.hexToPublicKey)(e))},Object.defineProperty(_t.prototype,"uncompressed",{get:function(){return buffer$2.Buffer.from((0,utils_2$1.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(_t.prototype,"compressed",{get:function(){return buffer$2.Buffer.from(this.data)},enumerable:!1,configurable:!0}),_t.prototype.toHex=function(e){return e===void 0&&(e=!0),e?(0,utils_1$1.bytesToHex)(this.data):(0,utils_1$1.bytesToHex)(this.uncompressed)},_t.prototype.decapsulate=function(e){var $t,xt;return(0,config_1$1.isHkdfKeyCompressed)()?($t=this.data,xt=e.multiply(this,!0)):($t=this.uncompressed,xt=e.multiply(this,!1)),(0,utils_2$1.getSharedKey)($t,xt)},_t.prototype.equals=function(e){return(0,utils_1$1.equalBytes)(this.data,e.data)},_t}();PublicKey$1.PublicKey=PublicKey;Object.defineProperty(PrivateKey$1,"__esModule",{value:!0});PrivateKey$1.PrivateKey=void 0;var utils_1=utils$6,config_1=config,utils_2=utils$5,PublicKey_1=PublicKey$1,PrivateKey=function(){function _t(e){var $t=e===void 0?(0,utils_2.getValidSecret)():e;if(!(0,utils_2.isValidPrivateKey)($t))throw new Error("Invalid private key");this.data=$t,this.publicKey=new PublicKey_1.PublicKey((0,utils_2.getPublicKey)($t))}return _t.fromHex=function(e){return new _t((0,utils_2.decodeHex)(e))},Object.defineProperty(_t.prototype,"secret",{get:function(){return buffer$2.Buffer.from(this.data)},enumerable:!1,configurable:!0}),_t.prototype.toHex=function(){return(0,utils_1.bytesToHex)(this.data)},_t.prototype.encapsulate=function(e){var $t,xt;return(0,config_1.isHkdfKeyCompressed)()?($t=this.publicKey.compressed,xt=this.multiply(e,!0)):($t=this.publicKey.uncompressed,xt=this.multiply(e,!1)),(0,utils_2.getSharedKey)($t,xt)},_t.prototype.multiply=function(e,$t){return $t===void 0&&($t=!1),(0,utils_2.getSharedPoint)(this.data,e.compressed,$t)},_t.prototype.equals=function(e){return(0,utils_1.equalBytes)(this.data,e.data)},_t}();PrivateKey$1.PrivateKey=PrivateKey;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.PublicKey=_t.PrivateKey=void 0;var e=PrivateKey$1;Object.defineProperty(_t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var $t=PublicKey$1;Object.defineProperty(_t,"PublicKey",{enumerable:!0,get:function(){return $t.PublicKey}})})(keys);(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.utils=_t.PublicKey=_t.PrivateKey=_t.ECIES_CONFIG=_t.decrypt=_t.encrypt=void 0;var e=utils$6,$t=config,xt=keys,At=utils$5;function kt(Ut,Nt){var qt=new xt.PrivateKey,Kt=Ut instanceof Uint8Array?new xt.PublicKey(Ut):xt.PublicKey.fromHex(Ut),zt=qt.encapsulate(Kt),Vt=(0,At.aesEncrypt)(zt,Nt),Ht;return(0,$t.isEphemeralKeyCompressed)()?Ht=qt.publicKey.compressed:Ht=qt.publicKey.uncompressed,buffer$2.Buffer.from((0,e.concatBytes)(Ht,Vt))}_t.encrypt=kt;function Bt(Ut,Nt){var qt=Ut instanceof Uint8Array?new xt.PrivateKey(Ut):xt.PrivateKey.fromHex(Ut),Kt=(0,$t.ephemeralKeySize)(),zt=new xt.PublicKey(Nt.subarray(0,Kt)),Vt=Nt.subarray(Kt),Ht=zt.decapsulate(qt);return buffer$2.Buffer.from((0,At.aesDecrypt)(Ht,Vt))}_t.decrypt=Bt;var jt=config;Object.defineProperty(_t,"ECIES_CONFIG",{enumerable:!0,get:function(){return jt.ECIES_CONFIG}});var Lt=keys;Object.defineProperty(_t,"PrivateKey",{enumerable:!0,get:function(){return Lt.PrivateKey}}),Object.defineProperty(_t,"PublicKey",{enumerable:!0,get:function(){return Lt.PublicKey}}),_t.utils={aesDecrypt:At.aesDecrypt,aesEncrypt:At.aesEncrypt,decodeHex:At.decodeHex,getValidSecret:At.getValidSecret,remove0x:At.remove0x}})(dist);var browser$2={exports:{}},stream$1={exports:{}},primordials$1={ArrayIsArray(_t){return Array.isArray(_t)},ArrayPrototypeIncludes(_t,e){return _t.includes(e)},ArrayPrototypeIndexOf(_t,e){return _t.indexOf(e)},ArrayPrototypeJoin(_t,e){return _t.join(e)},ArrayPrototypeMap(_t,e){return _t.map(e)},ArrayPrototypePop(_t,e){return _t.pop(e)},ArrayPrototypePush(_t,e){return _t.push(e)},ArrayPrototypeSlice(_t,e,$t){return _t.slice(e,$t)},Error,FunctionPrototypeCall(_t,e,...$t){return _t.call(e,...$t)},FunctionPrototypeSymbolHasInstance(_t,e){return Function.prototype[Symbol.hasInstance].call(_t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(_t,e){return Object.defineProperties(_t,e)},ObjectDefineProperty(_t,e,$t){return Object.defineProperty(_t,e,$t)},ObjectGetOwnPropertyDescriptor(_t,e){return Object.getOwnPropertyDescriptor(_t,e)},ObjectKeys(_t){return Object.keys(_t)},ObjectSetPrototypeOf(_t,e){return Object.setPrototypeOf(_t,e)},Promise,PromisePrototypeCatch(_t,e){return _t.catch(e)},PromisePrototypeThen(_t,e,$t){return _t.then(e,$t)},PromiseReject(_t){return Promise.reject(_t)},PromiseResolve(_t){return Promise.resolve(_t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(_t,e){return _t.test(e)},SafeSet:Set,String,StringPrototypeSlice(_t,e,$t){return _t.slice(e,$t)},StringPrototypeToLowerCase(_t){return _t.toLowerCase()},StringPrototypeToUpperCase(_t){return _t.toUpperCase()},StringPrototypeTrim(_t){return _t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(_t,e,$t){return _t.set(e,$t)},Boolean,Uint8Array},util$2={exports:{}},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;const{AbortController:_t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=_t,browser$1.exports.AbortSignal=e,browser$1.exports.default=_t,browser$1.exports}(function(_t){const e=buffer$2,{kResistStopPropagation:$t,SymbolDispose:xt}=primordials$1,At=globalThis.AbortSignal||requireBrowser().AbortSignal,kt=globalThis.AbortController||requireBrowser().AbortController,Bt=Object.getPrototypeOf(async function(){}).constructor,jt=globalThis.Blob||e.Blob,Lt=typeof jt<"u"?function(zt){return zt instanceof jt}:function(zt){return!1},Ut=(Kt,zt)=>{if(Kt!==void 0&&(Kt===null||typeof Kt!="object"||!("aborted"in Kt)))throw new ERR_INVALID_ARG_TYPE(zt,"AbortSignal",Kt)},Nt=(Kt,zt)=>{if(typeof Kt!="function")throw new ERR_INVALID_ARG_TYPE(zt,"Function",Kt)};class qt extends Error{constructor(zt){if(!Array.isArray(zt))throw new TypeError(`Expected input to be an Array, got ${typeof zt}`);let Vt="";for(let Ht=0;Ht<zt.length;Ht++)Vt+=`    ${zt[Ht].stack}
`;super(Vt),this.name="AggregateError",this.errors=zt}}_t.exports={AggregateError:qt,kEmptyObject:Object.freeze({}),once(Kt){let zt=!1;return function(...Vt){zt||(zt=!0,Kt.apply(this,Vt))}},createDeferredPromise:function(){let Kt,zt;return{promise:new Promise((Ht,Jt)=>{Kt=Ht,zt=Jt}),resolve:Kt,reject:zt}},promisify(Kt){return new Promise((zt,Vt)=>{Kt((Ht,...Jt)=>Ht?Vt(Ht):zt(...Jt))})},debuglog(){return function(){}},format(Kt,...zt){return Kt.replace(/%([sdifj])/g,function(...[Vt,Ht]){const Jt=zt.shift();return Ht==="f"?Jt.toFixed(6):Ht==="j"?JSON.stringify(Jt):Ht==="s"&&typeof Jt=="object"?`${Jt.constructor!==Object?Jt.constructor.name:""} {}`.trim():Jt.toString()})},inspect(Kt){switch(typeof Kt){case"string":if(Kt.includes("'"))if(Kt.includes('"')){if(!Kt.includes("`")&&!Kt.includes("${"))return`\`${Kt}\``}else return`"${Kt}"`;return`'${Kt}'`;case"number":return isNaN(Kt)?"NaN":Object.is(Kt,-0)?String(Kt):Kt;case"bigint":return`${String(Kt)}n`;case"boolean":case"undefined":return String(Kt);case"object":return"{}"}},types:{isAsyncFunction(Kt){return Kt instanceof Bt},isArrayBufferView(Kt){return ArrayBuffer.isView(Kt)}},isBlob:Lt,deprecate(Kt,zt){return Kt},addAbortListener:eventsExports.addAbortListener||function(zt,Vt){if(zt===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",zt);Ut(zt,"signal"),Nt(Vt,"listener");let Ht;return zt.aborted?queueMicrotask(()=>Vt()):(zt.addEventListener("abort",Vt,{__proto__:null,once:!0,[$t]:!0}),Ht=()=>{zt.removeEventListener("abort",Vt)}),{__proto__:null,[xt](){var Jt;(Jt=Ht)===null||Jt===void 0||Jt()}}},AbortSignalAny:At.any||function(zt){if(zt.length===1)return zt[0];const Vt=new kt,Ht=()=>Vt.abort();return zt.forEach(Jt=>{Ut(Jt,"signals"),Jt.addEventListener("abort",Ht,{once:!0})}),Vt.signal.addEventListener("abort",()=>{zt.forEach(Jt=>Jt.removeEventListener("abort",Ht))},{once:!0}),Vt.signal}},_t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util$2);var utilExports$1=util$2.exports,operators$1={};const{format:format$5,inspect:inspect$3,AggregateError:CustomAggregateError$1}=utilExports$1,AggregateError$2=globalThis.AggregateError||CustomAggregateError$1,kIsNodeError$1=Symbol("kIsNodeError"),kTypes$1=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp$1=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix$1="__node_internal_",codes$3={};function assert$1(_t,e){if(!_t)throw new codes$3.ERR_INTERNAL_ASSERTION(e)}function addNumericalSeparator$1(_t){let e="",$t=_t.length;const xt=_t[0]==="-"?1:0;for(;$t>=xt+4;$t-=3)e=`_${_t.slice($t-3,$t)}${e}`;return`${_t.slice(0,$t)}${e}`}function getMessage$1(_t,e,$t){if(typeof e=="function")return assert$1(e.length<=$t.length,`Code: ${_t}; The provided arguments length (${$t.length}) does not match the required ones (${e.length}).`),e(...$t);const xt=(e.match(/%[dfijoOs]/g)||[]).length;return assert$1(xt===$t.length,`Code: ${_t}; The provided arguments length (${$t.length}) does not match the required ones (${xt}).`),$t.length===0?e:format$5(e,...$t)}function E$2(_t,e,$t){$t||($t=Error);class xt extends $t{constructor(...kt){super(getMessage$1(_t,e,kt))}toString(){return`${this.name} [${_t}]: ${this.message}`}}Object.defineProperties(xt.prototype,{name:{value:$t.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),xt.prototype.code=_t,xt.prototype[kIsNodeError$1]=!0,codes$3[_t]=xt}function hideStackFrames$3(_t){const e=nodeInternalPrefix$1+_t.name;return Object.defineProperty(_t,"name",{value:e}),_t}function aggregateTwoErrors$5(_t,e){if(_t&&e&&_t!==e){if(Array.isArray(e.errors))return e.errors.push(_t),e;const $t=new AggregateError$2([e,_t],e.message);return $t.code=e.code,$t}return _t||e}let AbortError$b=class extends Error{constructor(e="The operation was aborted",$t=void 0){if($t!==void 0&&typeof $t!="object")throw new codes$3.ERR_INVALID_ARG_TYPE("options","Object",$t);super(e,$t),this.code="ABORT_ERR",this.name="AbortError"}};E$2("ERR_ASSERTION","%s",Error);E$2("ERR_INVALID_ARG_TYPE",(_t,e,$t)=>{assert$1(typeof _t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let xt="The ";_t.endsWith(" argument")?xt+=`${_t} `:xt+=`"${_t}" ${_t.includes(".")?"property":"argument"} `,xt+="must be ";const At=[],kt=[],Bt=[];for(const Lt of e)assert$1(typeof Lt=="string","All expected entries have to be of type string"),kTypes$1.includes(Lt)?At.push(Lt.toLowerCase()):classRegExp$1.test(Lt)?kt.push(Lt):(assert$1(Lt!=="object",'The value "object" should be written as "Object"'),Bt.push(Lt));if(kt.length>0){const Lt=At.indexOf("object");Lt!==-1&&(At.splice(At,Lt,1),kt.push("Object"))}if(At.length>0){switch(At.length){case 1:xt+=`of type ${At[0]}`;break;case 2:xt+=`one of type ${At[0]} or ${At[1]}`;break;default:{const Lt=At.pop();xt+=`one of type ${At.join(", ")}, or ${Lt}`}}(kt.length>0||Bt.length>0)&&(xt+=" or ")}if(kt.length>0){switch(kt.length){case 1:xt+=`an instance of ${kt[0]}`;break;case 2:xt+=`an instance of ${kt[0]} or ${kt[1]}`;break;default:{const Lt=kt.pop();xt+=`an instance of ${kt.join(", ")}, or ${Lt}`}}Bt.length>0&&(xt+=" or ")}switch(Bt.length){case 0:break;case 1:Bt[0].toLowerCase()!==Bt[0]&&(xt+="an "),xt+=`${Bt[0]}`;break;case 2:xt+=`one of ${Bt[0]} or ${Bt[1]}`;break;default:{const Lt=Bt.pop();xt+=`one of ${Bt.join(", ")}, or ${Lt}`}}if($t==null)xt+=`. Received ${$t}`;else if(typeof $t=="function"&&$t.name)xt+=`. Received function ${$t.name}`;else if(typeof $t=="object"){var jt;if((jt=$t.constructor)!==null&&jt!==void 0&&jt.name)xt+=`. Received an instance of ${$t.constructor.name}`;else{const Lt=inspect$3($t,{depth:-1});xt+=`. Received ${Lt}`}}else{let Lt=inspect$3($t,{colors:!1});Lt.length>25&&(Lt=`${Lt.slice(0,25)}...`),xt+=`. Received type ${typeof $t} (${Lt})`}return xt},TypeError);E$2("ERR_INVALID_ARG_VALUE",(_t,e,$t="is invalid")=>{let xt=inspect$3(e);return xt.length>128&&(xt=xt.slice(0,128)+"..."),`The ${_t.includes(".")?"property":"argument"} '${_t}' ${$t}. Received ${xt}`},TypeError);E$2("ERR_INVALID_RETURN_VALUE",(_t,e,$t)=>{var xt;const At=$t!=null&&(xt=$t.constructor)!==null&&xt!==void 0&&xt.name?`instance of ${$t.constructor.name}`:`type ${typeof $t}`;return`Expected ${_t} to be returned from the "${e}" function but got ${At}.`},TypeError);E$2("ERR_MISSING_ARGS",(..._t)=>{assert$1(_t.length>0,"At least one arg needs to be specified");let e;const $t=_t.length;switch(_t=(Array.isArray(_t)?_t:[_t]).map(xt=>`"${xt}"`).join(" or "),$t){case 1:e+=`The ${_t[0]} argument`;break;case 2:e+=`The ${_t[0]} and ${_t[1]} arguments`;break;default:{const xt=_t.pop();e+=`The ${_t.join(", ")}, and ${xt} arguments`}break}return`${e} must be specified`},TypeError);E$2("ERR_OUT_OF_RANGE",(_t,e,$t)=>{assert$1(e,'Missing "range" argument');let xt;return Number.isInteger($t)&&Math.abs($t)>2**32?xt=addNumericalSeparator$1(String($t)):typeof $t=="bigint"?(xt=String($t),($t>2n**32n||$t<-(2n**32n))&&(xt=addNumericalSeparator$1(xt)),xt+="n"):xt=inspect$3($t),`The value of "${_t}" is out of range. It must be ${e}. Received ${xt}`},RangeError);E$2("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E$2("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E$2("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E$2("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E$2("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E$2("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E$2("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E$2("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E$2("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E$2("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E$2("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors$2={AbortError:AbortError$b,aggregateTwoErrors:hideStackFrames$3(aggregateTwoErrors$5),hideStackFrames:hideStackFrames$3,codes:codes$3};const{ArrayIsArray:ArrayIsArray$5,ArrayPrototypeIncludes:ArrayPrototypeIncludes$1,ArrayPrototypeJoin:ArrayPrototypeJoin$1,ArrayPrototypeMap:ArrayPrototypeMap$1,NumberIsInteger:NumberIsInteger$3,NumberIsNaN:NumberIsNaN$3,NumberMAX_SAFE_INTEGER:NumberMAX_SAFE_INTEGER$1,NumberMIN_SAFE_INTEGER:NumberMIN_SAFE_INTEGER$1,NumberParseInt:NumberParseInt$1,ObjectPrototypeHasOwnProperty:ObjectPrototypeHasOwnProperty$1,RegExpPrototypeExec:RegExpPrototypeExec$1,String:String$2,StringPrototypeToUpperCase:StringPrototypeToUpperCase$1,StringPrototypeTrim:StringPrototypeTrim$1}=primordials$1,{hideStackFrames:hideStackFrames$2,codes:{ERR_SOCKET_BAD_PORT:ERR_SOCKET_BAD_PORT$1,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$a,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$7,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$3,ERR_UNKNOWN_SIGNAL:ERR_UNKNOWN_SIGNAL$1}}=errors$2,{normalizeEncoding:normalizeEncoding$1}=utilExports$1,{isAsyncFunction:isAsyncFunction$1,isArrayBufferView:isArrayBufferView$1}=utilExports$1.types,signals$1={};function isInt32$1(_t){return _t===(_t|0)}function isUint32$1(_t){return _t===_t>>>0}const octalReg$1=/^[0-7]+$/,modeDesc$1="must be a 32-bit unsigned integer or an octal string";function parseFileMode$1(_t,e,$t){if(typeof _t>"u"&&(_t=$t),typeof _t=="string"){if(RegExpPrototypeExec$1(octalReg$1,_t)===null)throw new ERR_INVALID_ARG_VALUE$7(e,_t,modeDesc$1);_t=NumberParseInt$1(_t,8)}return validateUint32$1(_t,e),_t}const validateInteger$4=hideStackFrames$2((_t,e,$t=NumberMIN_SAFE_INTEGER$1,xt=NumberMAX_SAFE_INTEGER$1)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$a(e,"number",_t);if(!NumberIsInteger$3(_t))throw new ERR_OUT_OF_RANGE$3(e,"an integer",_t);if(_t<$t||_t>xt)throw new ERR_OUT_OF_RANGE$3(e,`>= ${$t} && <= ${xt}`,_t)}),validateInt32$1=hideStackFrames$2((_t,e,$t=-2147483648,xt=2147483647)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$a(e,"number",_t);if(!NumberIsInteger$3(_t))throw new ERR_OUT_OF_RANGE$3(e,"an integer",_t);if(_t<$t||_t>xt)throw new ERR_OUT_OF_RANGE$3(e,`>= ${$t} && <= ${xt}`,_t)}),validateUint32$1=hideStackFrames$2((_t,e,$t=!1)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$a(e,"number",_t);if(!NumberIsInteger$3(_t))throw new ERR_OUT_OF_RANGE$3(e,"an integer",_t);const xt=$t?1:0,At=4294967295;if(_t<xt||_t>At)throw new ERR_OUT_OF_RANGE$3(e,`>= ${xt} && <= ${At}`,_t)});function validateString$1(_t,e){if(typeof _t!="string")throw new ERR_INVALID_ARG_TYPE$a(e,"string",_t)}function validateNumber$1(_t,e,$t=void 0,xt){if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$a(e,"number",_t);if($t!=null&&_t<$t||xt!=null&&_t>xt||($t!=null||xt!=null)&&NumberIsNaN$3(_t))throw new ERR_OUT_OF_RANGE$3(e,`${$t!=null?`>= ${$t}`:""}${$t!=null&&xt!=null?" && ":""}${xt!=null?`<= ${xt}`:""}`,_t)}const validateOneOf$1=hideStackFrames$2((_t,e,$t)=>{if(!ArrayPrototypeIncludes$1($t,_t)){const At="must be one of: "+ArrayPrototypeJoin$1(ArrayPrototypeMap$1($t,kt=>typeof kt=="string"?`'${kt}'`:String$2(kt)),", ");throw new ERR_INVALID_ARG_VALUE$7(e,_t,At)}});function validateBoolean$3(_t,e){if(typeof _t!="boolean")throw new ERR_INVALID_ARG_TYPE$a(e,"boolean",_t)}function getOwnPropertyValueOrDefault$1(_t,e,$t){return _t==null||!ObjectPrototypeHasOwnProperty$1(_t,e)?$t:_t[e]}const validateObject$6=hideStackFrames$2((_t,e,$t=null)=>{const xt=getOwnPropertyValueOrDefault$1($t,"allowArray",!1),At=getOwnPropertyValueOrDefault$1($t,"allowFunction",!1);if(!getOwnPropertyValueOrDefault$1($t,"nullable",!1)&&_t===null||!xt&&ArrayIsArray$5(_t)||typeof _t!="object"&&(!At||typeof _t!="function"))throw new ERR_INVALID_ARG_TYPE$a(e,"Object",_t)}),validateDictionary$1=hideStackFrames$2((_t,e)=>{if(_t!=null&&typeof _t!="object"&&typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$a(e,"a dictionary",_t)}),validateArray$2=hideStackFrames$2((_t,e,$t=0)=>{if(!ArrayIsArray$5(_t))throw new ERR_INVALID_ARG_TYPE$a(e,"Array",_t);if(_t.length<$t){const xt=`must be longer than ${$t}`;throw new ERR_INVALID_ARG_VALUE$7(e,_t,xt)}});function validateStringArray$1(_t,e){validateArray$2(_t,e);for(let $t=0;$t<_t.length;$t++)validateString$1(_t[$t],`${e}[${$t}]`)}function validateBooleanArray$1(_t,e){validateArray$2(_t,e);for(let $t=0;$t<_t.length;$t++)validateBoolean$3(_t[$t],`${e}[${$t}]`)}function validateAbortSignalArray(_t,e){validateArray$2(_t,e);for(let $t=0;$t<_t.length;$t++){const xt=_t[$t],At=`${e}[${$t}]`;if(xt==null)throw new ERR_INVALID_ARG_TYPE$a(At,"AbortSignal",xt);validateAbortSignal$7(xt,At)}}function validateSignalName$1(_t,e="signal"){if(validateString$1(_t,e),signals$1[_t]===void 0)throw signals$1[StringPrototypeToUpperCase$1(_t)]!==void 0?new ERR_UNKNOWN_SIGNAL$1(_t+" (signals must use all capital letters)"):new ERR_UNKNOWN_SIGNAL$1(_t)}const validateBuffer$1=hideStackFrames$2((_t,e="buffer")=>{if(!isArrayBufferView$1(_t))throw new ERR_INVALID_ARG_TYPE$a(e,["Buffer","TypedArray","DataView"],_t)});function validateEncoding$1(_t,e){const $t=normalizeEncoding$1(e),xt=_t.length;if($t==="hex"&&xt%2!==0)throw new ERR_INVALID_ARG_VALUE$7("encoding",e,`is invalid for data of length ${xt}`)}function validatePort$1(_t,e="Port",$t=!0){if(typeof _t!="number"&&typeof _t!="string"||typeof _t=="string"&&StringPrototypeTrim$1(_t).length===0||+_t!==+_t>>>0||_t>65535||_t===0&&!$t)throw new ERR_SOCKET_BAD_PORT$1(e,_t,$t);return _t|0}const validateAbortSignal$7=hideStackFrames$2((_t,e)=>{if(_t!==void 0&&(_t===null||typeof _t!="object"||!("aborted"in _t)))throw new ERR_INVALID_ARG_TYPE$a(e,"AbortSignal",_t)}),validateFunction$6=hideStackFrames$2((_t,e)=>{if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$a(e,"Function",_t)}),validatePlainFunction$1=hideStackFrames$2((_t,e)=>{if(typeof _t!="function"||isAsyncFunction$1(_t))throw new ERR_INVALID_ARG_TYPE$a(e,"Function",_t)}),validateUndefined$1=hideStackFrames$2((_t,e)=>{if(_t!==void 0)throw new ERR_INVALID_ARG_TYPE$a(e,"undefined",_t)});function validateUnion$2(_t,e,$t){if(!ArrayPrototypeIncludes$1($t,_t))throw new ERR_INVALID_ARG_TYPE$a(e,`('${ArrayPrototypeJoin$1($t,"|")}')`,_t)}const linkValueRegExp$1=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat$1(_t,e){if(typeof _t>"u"||!RegExpPrototypeExec$1(linkValueRegExp$1,_t))throw new ERR_INVALID_ARG_VALUE$7(e,_t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function validateLinkHeaderValue$1(_t){if(typeof _t=="string")return validateLinkHeaderFormat$1(_t,"hints"),_t;if(ArrayIsArray$5(_t)){const e=_t.length;let $t="";if(e===0)return $t;for(let xt=0;xt<e;xt++){const At=_t[xt];validateLinkHeaderFormat$1(At,"hints"),$t+=At,xt!==e-1&&($t+=", ")}return $t}throw new ERR_INVALID_ARG_VALUE$7("hints",_t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var validators$1={isInt32:isInt32$1,isUint32:isUint32$1,parseFileMode:parseFileMode$1,validateArray:validateArray$2,validateStringArray:validateStringArray$1,validateBooleanArray:validateBooleanArray$1,validateAbortSignalArray,validateBoolean:validateBoolean$3,validateBuffer:validateBuffer$1,validateDictionary:validateDictionary$1,validateEncoding:validateEncoding$1,validateFunction:validateFunction$6,validateInt32:validateInt32$1,validateInteger:validateInteger$4,validateNumber:validateNumber$1,validateObject:validateObject$6,validateOneOf:validateOneOf$1,validatePlainFunction:validatePlainFunction$1,validatePort:validatePort$1,validateSignalName:validateSignalName$1,validateString:validateString$1,validateUint32:validateUint32$1,validateUndefined:validateUndefined$1,validateUnion:validateUnion$2,validateAbortSignal:validateAbortSignal$7,validateLinkHeaderValue:validateLinkHeaderValue$1},endOfStream$1={exports:{}};const{SymbolAsyncIterator:SymbolAsyncIterator$5,SymbolIterator:SymbolIterator$5,SymbolFor:SymbolFor$1}=primordials$1,kIsDestroyed$1=SymbolFor$1("nodejs.stream.destroyed"),kIsErrored$1=SymbolFor$1("nodejs.stream.errored"),kIsReadable$1=SymbolFor$1("nodejs.stream.readable"),kIsWritable=SymbolFor$1("nodejs.stream.writable"),kIsDisturbed$1=SymbolFor$1("nodejs.stream.disturbed"),kIsClosedPromise$3=SymbolFor$1("nodejs.webstream.isClosedPromise"),kControllerErrorFunction$1=SymbolFor$1("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$5(_t,e=!1){var $t;return!!(_t&&typeof _t.pipe=="function"&&typeof _t.on=="function"&&(!e||typeof _t.pause=="function"&&typeof _t.resume=="function")&&(!_t._writableState||(($t=_t._readableState)===null||$t===void 0?void 0:$t.readable)!==!1)&&(!_t._writableState||_t._readableState))}function isWritableNodeStream$3(_t){var e;return!!(_t&&typeof _t.write=="function"&&typeof _t.on=="function"&&(!_t._readableState||((e=_t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function isDuplexNodeStream$1(_t){return!!(_t&&typeof _t.pipe=="function"&&_t._readableState&&typeof _t.on=="function"&&typeof _t.write=="function")}function isNodeStream$9(_t){return _t&&(_t._readableState||_t._writableState||typeof _t.write=="function"&&typeof _t.on=="function"||typeof _t.pipe=="function"&&typeof _t.on=="function")}function isReadableStream$7(_t){return!!(_t&&!isNodeStream$9(_t)&&typeof _t.pipeThrough=="function"&&typeof _t.getReader=="function"&&typeof _t.cancel=="function")}function isWritableStream$5(_t){return!!(_t&&!isNodeStream$9(_t)&&typeof _t.getWriter=="function"&&typeof _t.abort=="function")}function isTransformStream$5(_t){return!!(_t&&!isNodeStream$9(_t)&&typeof _t.readable=="object"&&typeof _t.writable=="object")}function isWebStream$5(_t){return isReadableStream$7(_t)||isWritableStream$5(_t)||isTransformStream$5(_t)}function isIterable$3(_t,e){return _t==null?!1:e===!0?typeof _t[SymbolAsyncIterator$5]=="function":e===!1?typeof _t[SymbolIterator$5]=="function":typeof _t[SymbolAsyncIterator$5]=="function"||typeof _t[SymbolIterator$5]=="function"}function isDestroyed$3(_t){if(!isNodeStream$9(_t))return null;const e=_t._writableState,$t=_t._readableState,xt=e||$t;return!!(_t.destroyed||_t[kIsDestroyed$1]||xt!=null&&xt.destroyed)}function isWritableEnded$1(_t){if(!isWritableNodeStream$3(_t))return null;if(_t.writableEnded===!0)return!0;const e=_t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function isWritableFinished$3(_t,e){if(!isWritableNodeStream$3(_t))return null;if(_t.writableFinished===!0)return!0;const $t=_t._writableState;return $t!=null&&$t.errored?!1:typeof($t==null?void 0:$t.finished)!="boolean"?null:!!($t.finished||e===!1&&$t.ended===!0&&$t.length===0)}function isReadableEnded$2(_t){if(!isReadableNodeStream$5(_t))return null;if(_t.readableEnded===!0)return!0;const e=_t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function isReadableFinished$4(_t,e){if(!isReadableNodeStream$5(_t))return null;const $t=_t._readableState;return $t!=null&&$t.errored?!1:typeof($t==null?void 0:$t.endEmitted)!="boolean"?null:!!($t.endEmitted||e===!1&&$t.ended===!0&&$t.length===0)}function isReadable$7(_t){return _t&&_t[kIsReadable$1]!=null?_t[kIsReadable$1]:typeof(_t==null?void 0:_t.readable)!="boolean"?null:isDestroyed$3(_t)?!1:isReadableNodeStream$5(_t)&&_t.readable&&!isReadableFinished$4(_t)}function isWritable$7(_t){return _t&&_t[kIsWritable]!=null?_t[kIsWritable]:typeof(_t==null?void 0:_t.writable)!="boolean"?null:isDestroyed$3(_t)?!1:isWritableNodeStream$3(_t)&&_t.writable&&!isWritableEnded$1(_t)}function isFinished$3(_t,e){return isNodeStream$9(_t)?isDestroyed$3(_t)?!0:!((e==null?void 0:e.readable)!==!1&&isReadable$7(_t)||(e==null?void 0:e.writable)!==!1&&isWritable$7(_t)):null}function isWritableErrored$3(_t){var e,$t;return isNodeStream$9(_t)?_t.writableErrored?_t.writableErrored:(e=($t=_t._writableState)===null||$t===void 0?void 0:$t.errored)!==null&&e!==void 0?e:null:null}function isReadableErrored$3(_t){var e,$t;return isNodeStream$9(_t)?_t.readableErrored?_t.readableErrored:(e=($t=_t._readableState)===null||$t===void 0?void 0:$t.errored)!==null&&e!==void 0?e:null:null}function isClosed$3(_t){if(!isNodeStream$9(_t))return null;if(typeof _t.closed=="boolean")return _t.closed;const e=_t._writableState,$t=_t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof($t==null?void 0:$t.closed)=="boolean"?(e==null?void 0:e.closed)||($t==null?void 0:$t.closed):typeof _t._closed=="boolean"&&isOutgoingMessage$1(_t)?_t._closed:null}function isOutgoingMessage$1(_t){return typeof _t._closed=="boolean"&&typeof _t._defaultKeepAlive=="boolean"&&typeof _t._removedConnection=="boolean"&&typeof _t._removedContLen=="boolean"}function isServerResponse$1(_t){return typeof _t._sent100=="boolean"&&isOutgoingMessage$1(_t)}function isServerRequest$3(_t){var e;return typeof _t._consuming=="boolean"&&typeof _t._dumped=="boolean"&&((e=_t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function willEmitClose$1(_t){if(!isNodeStream$9(_t))return null;const e=_t._writableState,$t=_t._readableState,xt=e||$t;return!xt&&isServerResponse$1(_t)||!!(xt&&xt.autoDestroy&&xt.emitClose&&xt.closed===!1)}function isDisturbed$1(_t){var e;return!!(_t&&((e=_t[kIsDisturbed$1])!==null&&e!==void 0?e:_t.readableDidRead||_t.readableAborted))}function isErrored$1(_t){var e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt;return!!(_t&&((e=($t=(xt=(At=(kt=(Bt=_t[kIsErrored$1])!==null&&Bt!==void 0?Bt:_t.readableErrored)!==null&&kt!==void 0?kt:_t.writableErrored)!==null&&At!==void 0?At:(jt=_t._readableState)===null||jt===void 0?void 0:jt.errorEmitted)!==null&&xt!==void 0?xt:(Lt=_t._writableState)===null||Lt===void 0?void 0:Lt.errorEmitted)!==null&&$t!==void 0?$t:(Ut=_t._readableState)===null||Ut===void 0?void 0:Ut.errored)!==null&&e!==void 0?e:!((Nt=_t._writableState)===null||Nt===void 0)&&Nt.errored))}var utils$1={isDestroyed:isDestroyed$3,kIsDestroyed:kIsDestroyed$1,isDisturbed:isDisturbed$1,kIsDisturbed:kIsDisturbed$1,isErrored:isErrored$1,kIsErrored:kIsErrored$1,isReadable:isReadable$7,kIsReadable:kIsReadable$1,kIsClosedPromise:kIsClosedPromise$3,kControllerErrorFunction:kControllerErrorFunction$1,kIsWritable,isClosed:isClosed$3,isDuplexNodeStream:isDuplexNodeStream$1,isFinished:isFinished$3,isIterable:isIterable$3,isReadableNodeStream:isReadableNodeStream$5,isReadableStream:isReadableStream$7,isReadableEnded:isReadableEnded$2,isReadableFinished:isReadableFinished$4,isReadableErrored:isReadableErrored$3,isNodeStream:isNodeStream$9,isWebStream:isWebStream$5,isWritable:isWritable$7,isWritableNodeStream:isWritableNodeStream$3,isWritableStream:isWritableStream$5,isWritableEnded:isWritableEnded$1,isWritableFinished:isWritableFinished$3,isWritableErrored:isWritableErrored$3,isServerRequest:isServerRequest$3,isServerResponse:isServerResponse$1,willEmitClose:willEmitClose$1,isTransformStream:isTransformStream$5};const process$7=browserExports$2,{AbortError:AbortError$a,codes:codes$2}=errors$2,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$9,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$3}=codes$2,{kEmptyObject:kEmptyObject$1,once:once$3}=utilExports$1,{validateAbortSignal:validateAbortSignal$6,validateFunction:validateFunction$5,validateObject:validateObject$5,validateBoolean:validateBoolean$2}=validators$1,{Promise:Promise$6,PromisePrototypeThen:PromisePrototypeThen$5,SymbolDispose:SymbolDispose$1}=primordials$1,{isClosed:isClosed$2,isReadable:isReadable$6,isReadableNodeStream:isReadableNodeStream$4,isReadableStream:isReadableStream$6,isReadableFinished:isReadableFinished$3,isReadableErrored:isReadableErrored$2,isWritable:isWritable$6,isWritableNodeStream:isWritableNodeStream$2,isWritableStream:isWritableStream$4,isWritableFinished:isWritableFinished$2,isWritableErrored:isWritableErrored$2,isNodeStream:isNodeStream$8,willEmitClose:_willEmitClose$1,kIsClosedPromise:kIsClosedPromise$2}=utils$1;let addAbortListener$1;function isRequest$3(_t){return _t.setHeader&&typeof _t.abort=="function"}const nop$1=()=>{};function eos$5(_t,e,$t){var xt,At;if(arguments.length===2?($t=e,e=kEmptyObject$1):e==null?e=kEmptyObject$1:validateObject$5(e,"options"),validateFunction$5($t,"callback"),validateAbortSignal$6(e.signal,"options.signal"),$t=once$3($t),isReadableStream$6(_t)||isWritableStream$4(_t))return eosWeb$1(_t,e,$t);if(!isNodeStream$8(_t))throw new ERR_INVALID_ARG_TYPE$9("stream",["ReadableStream","WritableStream","Stream"],_t);const kt=(xt=e.readable)!==null&&xt!==void 0?xt:isReadableNodeStream$4(_t),Bt=(At=e.writable)!==null&&At!==void 0?At:isWritableNodeStream$2(_t),jt=_t._writableState,Lt=_t._readableState,Ut=()=>{_t.writable||Kt()};let Nt=_willEmitClose$1(_t)&&isReadableNodeStream$4(_t)===kt&&isWritableNodeStream$2(_t)===Bt,qt=isWritableFinished$2(_t,!1);const Kt=()=>{qt=!0,_t.destroyed&&(Nt=!1),!(Nt&&(!_t.readable||kt))&&(!kt||zt)&&$t.call(_t)};let zt=isReadableFinished$3(_t,!1);const Vt=()=>{zt=!0,_t.destroyed&&(Nt=!1),!(Nt&&(!_t.writable||Bt))&&(!Bt||qt)&&$t.call(_t)},Ht=yr=>{$t.call(_t,yr)};let Jt=isClosed$2(_t);const rr=()=>{Jt=!0;const yr=isWritableErrored$2(_t)||isReadableErrored$2(_t);if(yr&&typeof yr!="boolean")return $t.call(_t,yr);if(kt&&!zt&&isReadableNodeStream$4(_t,!0)&&!isReadableFinished$3(_t,!1))return $t.call(_t,new ERR_STREAM_PREMATURE_CLOSE$3);if(Bt&&!qt&&!isWritableFinished$2(_t,!1))return $t.call(_t,new ERR_STREAM_PREMATURE_CLOSE$3);$t.call(_t)},Qt=()=>{Jt=!0;const yr=isWritableErrored$2(_t)||isReadableErrored$2(_t);if(yr&&typeof yr!="boolean")return $t.call(_t,yr);$t.call(_t)},Wt=()=>{_t.req.on("finish",Kt)};isRequest$3(_t)?(_t.on("complete",Kt),Nt||_t.on("abort",rr),_t.req?Wt():_t.on("request",Wt)):Bt&&!jt&&(_t.on("end",Ut),_t.on("close",Ut)),!Nt&&typeof _t.aborted=="boolean"&&_t.on("aborted",rr),_t.on("end",Vt),_t.on("finish",Kt),e.error!==!1&&_t.on("error",Ht),_t.on("close",rr),Jt?process$7.nextTick(rr):jt!=null&&jt.errorEmitted||Lt!=null&&Lt.errorEmitted?Nt||process$7.nextTick(Qt):(!kt&&(!Nt||isReadable$6(_t))&&(qt||isWritable$6(_t)===!1)||!Bt&&(!Nt||isWritable$6(_t))&&(zt||isReadable$6(_t)===!1)||Lt&&_t.req&&_t.aborted)&&process$7.nextTick(Qt);const nr=()=>{$t=nop$1,_t.removeListener("aborted",rr),_t.removeListener("complete",Kt),_t.removeListener("abort",rr),_t.removeListener("request",Wt),_t.req&&_t.req.removeListener("finish",Kt),_t.removeListener("end",Ut),_t.removeListener("close",Ut),_t.removeListener("finish",Kt),_t.removeListener("end",Vt),_t.removeListener("error",Ht),_t.removeListener("close",rr)};if(e.signal&&!Jt){const yr=()=>{const vr=$t;nr(),vr.call(_t,new AbortError$a(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)process$7.nextTick(yr);else{addAbortListener$1=addAbortListener$1||utilExports$1.addAbortListener;const vr=addAbortListener$1(e.signal,yr),Ir=$t;$t=once$3((...xr)=>{vr[SymbolDispose$1](),Ir.apply(_t,xr)})}}return nr}function eosWeb$1(_t,e,$t){let xt=!1,At=nop$1;if(e.signal)if(At=()=>{xt=!0,$t.call(_t,new AbortError$a(void 0,{cause:e.signal.reason}))},e.signal.aborted)process$7.nextTick(At);else{addAbortListener$1=addAbortListener$1||utilExports$1.addAbortListener;const Bt=addAbortListener$1(e.signal,At),jt=$t;$t=once$3((...Lt)=>{Bt[SymbolDispose$1](),jt.apply(_t,Lt)})}const kt=(...Bt)=>{xt||process$7.nextTick(()=>$t.apply(_t,Bt))};return PromisePrototypeThen$5(_t[kIsClosedPromise$2].promise,kt,kt),nop$1}function finished$3(_t,e){var $t;let xt=!1;return e===null&&(e=kEmptyObject$1),($t=e)!==null&&$t!==void 0&&$t.cleanup&&(validateBoolean$2(e.cleanup,"cleanup"),xt=e.cleanup),new Promise$6((At,kt)=>{const Bt=eos$5(_t,e,jt=>{xt&&Bt(),jt?kt(jt):At()})})}endOfStream$1.exports=eos$5;endOfStream$1.exports.finished=finished$3;var endOfStreamExports$1=endOfStream$1.exports;const process$6=browserExports$2,{aggregateTwoErrors:aggregateTwoErrors$4,codes:{ERR_MULTIPLE_CALLBACK:ERR_MULTIPLE_CALLBACK$1},AbortError:AbortError$9}=errors$2,{Symbol:Symbol$7}=primordials$1,{kIsDestroyed,isDestroyed:isDestroyed$2,isFinished:isFinished$2,isServerRequest:isServerRequest$2}=utils$1,kDestroy$1=Symbol$7("kDestroy"),kConstruct$1=Symbol$7("kConstruct");function checkError$1(_t,e,$t){_t&&(_t.stack,e&&!e.errored&&(e.errored=_t),$t&&!$t.errored&&($t.errored=_t))}function destroy$1(_t,e){const $t=this._readableState,xt=this._writableState,At=xt||$t;return xt!=null&&xt.destroyed||$t!=null&&$t.destroyed?(typeof e=="function"&&e(),this):(checkError$1(_t,xt,$t),xt&&(xt.destroyed=!0),$t&&($t.destroyed=!0),At.constructed?_destroy$1(this,_t,e):this.once(kDestroy$1,function(kt){_destroy$1(this,aggregateTwoErrors$4(kt,_t),e)}),this)}function _destroy$1(_t,e,$t){let xt=!1;function At(kt){if(xt)return;xt=!0;const Bt=_t._readableState,jt=_t._writableState;checkError$1(kt,jt,Bt),jt&&(jt.closed=!0),Bt&&(Bt.closed=!0),typeof $t=="function"&&$t(kt),kt?process$6.nextTick(emitErrorCloseNT$1,_t,kt):process$6.nextTick(emitCloseNT$1,_t)}try{_t._destroy(e||null,At)}catch(kt){At(kt)}}function emitErrorCloseNT$1(_t,e){emitErrorNT$1(_t,e),emitCloseNT$1(_t)}function emitCloseNT$1(_t){const e=_t._readableState,$t=_t._writableState;$t&&($t.closeEmitted=!0),e&&(e.closeEmitted=!0),($t!=null&&$t.emitClose||e!=null&&e.emitClose)&&_t.emit("close")}function emitErrorNT$1(_t,e){const $t=_t._readableState,xt=_t._writableState;xt!=null&&xt.errorEmitted||$t!=null&&$t.errorEmitted||(xt&&(xt.errorEmitted=!0),$t&&($t.errorEmitted=!0),_t.emit("error",e))}function undestroy$1(){const _t=this._readableState,e=this._writableState;_t&&(_t.constructed=!0,_t.closed=!1,_t.closeEmitted=!1,_t.destroyed=!1,_t.errored=null,_t.errorEmitted=!1,_t.reading=!1,_t.ended=_t.readable===!1,_t.endEmitted=_t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function errorOrDestroy$1(_t,e,$t){const xt=_t._readableState,At=_t._writableState;if(At!=null&&At.destroyed||xt!=null&&xt.destroyed)return this;xt!=null&&xt.autoDestroy||At!=null&&At.autoDestroy?_t.destroy(e):e&&(e.stack,At&&!At.errored&&(At.errored=e),xt&&!xt.errored&&(xt.errored=e),$t?process$6.nextTick(emitErrorNT$1,_t,e):emitErrorNT$1(_t,e))}function construct$1(_t,e){if(typeof _t._construct!="function")return;const $t=_t._readableState,xt=_t._writableState;$t&&($t.constructed=!1),xt&&(xt.constructed=!1),_t.once(kConstruct$1,e),!(_t.listenerCount(kConstruct$1)>1)&&process$6.nextTick(constructNT$1,_t)}function constructNT$1(_t){let e=!1;function $t(xt){if(e){errorOrDestroy$1(_t,xt??new ERR_MULTIPLE_CALLBACK$1);return}e=!0;const At=_t._readableState,kt=_t._writableState,Bt=kt||At;At&&(At.constructed=!0),kt&&(kt.constructed=!0),Bt.destroyed?_t.emit(kDestroy$1,xt):xt?errorOrDestroy$1(_t,xt,!0):process$6.nextTick(emitConstructNT$1,_t)}try{_t._construct(xt=>{process$6.nextTick($t,xt)})}catch(xt){process$6.nextTick($t,xt)}}function emitConstructNT$1(_t){_t.emit(kConstruct$1)}function isRequest$2(_t){return(_t==null?void 0:_t.setHeader)&&typeof _t.abort=="function"}function emitCloseLegacy$1(_t){_t.emit("close")}function emitErrorCloseLegacy$1(_t,e){_t.emit("error",e),process$6.nextTick(emitCloseLegacy$1,_t)}function destroyer$5(_t,e){!_t||isDestroyed$2(_t)||(!e&&!isFinished$2(_t)&&(e=new AbortError$9),isServerRequest$2(_t)?(_t.socket=null,_t.destroy(e)):isRequest$2(_t)?_t.abort():isRequest$2(_t.req)?_t.req.abort():typeof _t.destroy=="function"?_t.destroy(e):typeof _t.close=="function"?_t.close():e?process$6.nextTick(emitErrorCloseLegacy$1,_t,e):process$6.nextTick(emitCloseLegacy$1,_t),_t.destroyed||(_t[kIsDestroyed]=!0))}var destroy_1$1={construct:construct$1,destroyer:destroyer$5,destroy:destroy$1,undestroy:undestroy$1,errorOrDestroy:errorOrDestroy$1};const{ArrayIsArray:ArrayIsArray$4,ObjectSetPrototypeOf:ObjectSetPrototypeOf$5}=primordials$1,{EventEmitter:EE$1}=eventsExports;function Stream$1(_t){EE$1.call(this,_t)}ObjectSetPrototypeOf$5(Stream$1.prototype,EE$1.prototype);ObjectSetPrototypeOf$5(Stream$1,EE$1);Stream$1.prototype.pipe=function(_t,e){const $t=this;function xt(Nt){_t.writable&&_t.write(Nt)===!1&&$t.pause&&$t.pause()}$t.on("data",xt);function At(){$t.readable&&$t.resume&&$t.resume()}_t.on("drain",At),!_t._isStdio&&(!e||e.end!==!1)&&($t.on("end",Bt),$t.on("close",jt));let kt=!1;function Bt(){kt||(kt=!0,_t.end())}function jt(){kt||(kt=!0,typeof _t.destroy=="function"&&_t.destroy())}function Lt(Nt){Ut(),EE$1.listenerCount(this,"error")===0&&this.emit("error",Nt)}prependListener$1($t,"error",Lt),prependListener$1(_t,"error",Lt);function Ut(){$t.removeListener("data",xt),_t.removeListener("drain",At),$t.removeListener("end",Bt),$t.removeListener("close",jt),$t.removeListener("error",Lt),_t.removeListener("error",Lt),$t.removeListener("end",Ut),$t.removeListener("close",Ut),_t.removeListener("close",Ut)}return $t.on("end",Ut),$t.on("close",Ut),_t.on("close",Ut),_t.emit("pipe",$t),_t};function prependListener$1(_t,e,$t){if(typeof _t.prependListener=="function")return _t.prependListener(e,$t);!_t._events||!_t._events[e]?_t.on(e,$t):ArrayIsArray$4(_t._events[e])?_t._events[e].unshift($t):_t._events[e]=[$t,_t._events[e]]}var legacy$1={Stream:Stream$1,prependListener:prependListener$1},addAbortSignal$1={exports:{}};(function(_t){const{SymbolDispose:e}=primordials$1,{AbortError:$t,codes:xt}=errors$2,{isNodeStream:At,isWebStream:kt,kControllerErrorFunction:Bt}=utils$1,jt=endOfStreamExports$1,{ERR_INVALID_ARG_TYPE:Lt}=xt;let Ut;const Nt=(qt,Kt)=>{if(typeof qt!="object"||!("aborted"in qt))throw new Lt(Kt,"AbortSignal",qt)};_t.exports.addAbortSignal=function(Kt,zt){if(Nt(Kt,"signal"),!At(zt)&&!kt(zt))throw new Lt("stream",["ReadableStream","WritableStream","Stream"],zt);return _t.exports.addAbortSignalNoValidate(Kt,zt)},_t.exports.addAbortSignalNoValidate=function(qt,Kt){if(typeof qt!="object"||!("aborted"in qt))return Kt;const zt=At(Kt)?()=>{Kt.destroy(new $t(void 0,{cause:qt.reason}))}:()=>{Kt[Bt](new $t(void 0,{cause:qt.reason}))};if(qt.aborted)zt();else{Ut=Ut||utilExports$1.addAbortListener;const Vt=Ut(qt,zt);jt(Kt,Vt[e])}return Kt}})(addAbortSignal$1);var addAbortSignalExports$1=addAbortSignal$1.exports;const{StringPrototypeSlice:StringPrototypeSlice$1,SymbolIterator:SymbolIterator$4,TypedArrayPrototypeSet:TypedArrayPrototypeSet$1,Uint8Array:Uint8Array$2}=primordials$1,{Buffer:Buffer$5}=buffer$2,{inspect:inspect$2}=utilExports$1;var buffer_list$1=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const $t={data:e,next:null};this.length>0?this.tail.next=$t:this.head=$t,this.tail=$t,++this.length}unshift(e){const $t={data:e,next:this.head};this.length===0&&(this.tail=$t),this.head=$t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let $t=this.head,xt=""+$t.data;for(;($t=$t.next)!==null;)xt+=e+$t.data;return xt}concat(e){if(this.length===0)return Buffer$5.alloc(0);const $t=Buffer$5.allocUnsafe(e>>>0);let xt=this.head,At=0;for(;xt;)TypedArrayPrototypeSet$1($t,xt.data,At),At+=xt.data.length,xt=xt.next;return $t}consume(e,$t){const xt=this.head.data;if(e<xt.length){const At=xt.slice(0,e);return this.head.data=xt.slice(e),At}return e===xt.length?this.shift():$t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[SymbolIterator$4](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let $t="",xt=this.head,At=0;do{const kt=xt.data;if(e>kt.length)$t+=kt,e-=kt.length;else{e===kt.length?($t+=kt,++At,xt.next?this.head=xt.next:this.head=this.tail=null):($t+=StringPrototypeSlice$1(kt,0,e),this.head=xt,xt.data=StringPrototypeSlice$1(kt,e));break}++At}while((xt=xt.next)!==null);return this.length-=At,$t}_getBuffer(e){const $t=Buffer$5.allocUnsafe(e),xt=e;let At=this.head,kt=0;do{const Bt=At.data;if(e>Bt.length)TypedArrayPrototypeSet$1($t,Bt,xt-e),e-=Bt.length;else{e===Bt.length?(TypedArrayPrototypeSet$1($t,Bt,xt-e),++kt,At.next?this.head=At.next:this.head=this.tail=null):(TypedArrayPrototypeSet$1($t,new Uint8Array$2(Bt.buffer,Bt.byteOffset,e),xt-e),this.head=At,At.data=Bt.slice(e));break}++kt}while((At=At.next)!==null);return this.length-=kt,$t}[Symbol.for("nodejs.util.inspect.custom")](e,$t){return inspect$2(this,{...$t,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$3,NumberIsInteger:NumberIsInteger$2}=primordials$1,{validateInteger:validateInteger$3}=validators$1,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$6}=errors$2.codes;let defaultHighWaterMarkBytes=16*1024,defaultHighWaterMarkObjectMode=16;function highWaterMarkFrom$1(_t,e,$t){return _t.highWaterMark!=null?_t.highWaterMark:e?_t[$t]:null}function getDefaultHighWaterMark$1(_t){return _t?defaultHighWaterMarkObjectMode:defaultHighWaterMarkBytes}function setDefaultHighWaterMark(_t,e){validateInteger$3(e,"value",0),_t?defaultHighWaterMarkObjectMode=e:defaultHighWaterMarkBytes=e}function getHighWaterMark$3(_t,e,$t,xt){const At=highWaterMarkFrom$1(e,xt,$t);if(At!=null){if(!NumberIsInteger$2(At)||At<0){const kt=xt?`options.${$t}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$6(kt,At)}return MathFloor$3(At)}return getDefaultHighWaterMark$1(_t.objectMode)}var state$1={getHighWaterMark:getHighWaterMark$3,getDefaultHighWaterMark:getDefaultHighWaterMark$1,setDefaultHighWaterMark};const process$5=browserExports$2,{PromisePrototypeThen:PromisePrototypeThen$4,SymbolAsyncIterator:SymbolAsyncIterator$4,SymbolIterator:SymbolIterator$3}=primordials$1,{Buffer:Buffer$4}=buffer$2,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$8,ERR_STREAM_NULL_VALUES:ERR_STREAM_NULL_VALUES$1}=errors$2.codes;function from$4(_t,e,$t){let xt;if(typeof e=="string"||e instanceof Buffer$4)return new _t({objectMode:!0,...$t,read(){this.push(e),this.push(null)}});let At;if(e&&e[SymbolAsyncIterator$4])At=!0,xt=e[SymbolAsyncIterator$4]();else if(e&&e[SymbolIterator$3])At=!1,xt=e[SymbolIterator$3]();else throw new ERR_INVALID_ARG_TYPE$8("iterable",["Iterable"],e);const kt=new _t({objectMode:!0,highWaterMark:1,...$t});let Bt=!1;kt._read=function(){Bt||(Bt=!0,Lt())},kt._destroy=function(Ut,Nt){PromisePrototypeThen$4(jt(Ut),()=>process$5.nextTick(Nt,Ut),qt=>process$5.nextTick(Nt,qt||Ut))};async function jt(Ut){const Nt=Ut!=null,qt=typeof xt.throw=="function";if(Nt&&qt){const{value:Kt,done:zt}=await xt.throw(Ut);if(await Kt,zt)return}if(typeof xt.return=="function"){const{value:Kt}=await xt.return();await Kt}}async function Lt(){for(;;){try{const{value:Ut,done:Nt}=At?await xt.next():xt.next();if(Nt)kt.push(null);else{const qt=Ut&&typeof Ut.then=="function"?await Ut:Ut;if(qt===null)throw Bt=!1,new ERR_STREAM_NULL_VALUES$1;if(kt.push(qt))continue;Bt=!1}}catch(Ut){kt.destroy(Ut)}break}}return kt}var from_1$1=from$4,readable$1,hasRequiredReadable$1;function requireReadable$1(){if(hasRequiredReadable$1)return readable$1;hasRequiredReadable$1=1;const _t=browserExports$2,{ArrayPrototypeIndexOf:e,NumberIsInteger:$t,NumberIsNaN:xt,NumberParseInt:At,ObjectDefineProperties:kt,ObjectKeys:Bt,ObjectSetPrototypeOf:jt,Promise:Lt,SafeSet:Ut,SymbolAsyncDispose:Nt,SymbolAsyncIterator:qt,Symbol:Kt}=primordials$1;readable$1=Jr,Jr.ReadableState=Zr;const{EventEmitter:zt}=eventsExports,{Stream:Vt,prependListener:Ht}=legacy$1,{Buffer:Jt}=buffer$2,{addAbortSignal:rr}=addAbortSignalExports$1,Qt=endOfStreamExports$1;let Wt=utilExports$1.debuglog("stream",qr=>{Wt=qr});const nr=buffer_list$1,yr=destroy_1$1,{getHighWaterMark:vr,getDefaultHighWaterMark:Ir}=state$1,{aggregateTwoErrors:xr,codes:{ERR_INVALID_ARG_TYPE:Or,ERR_METHOD_NOT_IMPLEMENTED:Nr,ERR_OUT_OF_RANGE:kr,ERR_STREAM_PUSH_AFTER_EOF:lr,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ir},AbortError:Xt}=errors$2,{validateObject:er}=validators$1,pr=Kt("kPaused"),{StringDecoder:ur}=string_decoder,gr=from_1$1;jt(Jr.prototype,Vt.prototype),jt(Jr,Vt);const ar=()=>{},{errorOrDestroy:tr}=yr,dr=1,fr=2,br=4,Sr=8,Dr=16,Er=32,wr=64,Tr=128,Mr=256,Lr=512,Cr=1024,Br=2048,$r=4096,Rr=8192,Ur=16384,Pr=32768,_r=65536,Ar=1<<17,jr=1<<18;function Kr(qr){return{enumerable:!1,get(){return(this.state&qr)!==0},set(Vr){Vr?this.state|=qr:this.state&=~qr}}}kt(Zr.prototype,{objectMode:Kr(dr),ended:Kr(fr),endEmitted:Kr(br),reading:Kr(Sr),constructed:Kr(Dr),sync:Kr(Er),needReadable:Kr(wr),emittedReadable:Kr(Tr),readableListening:Kr(Mr),resumeScheduled:Kr(Lr),errorEmitted:Kr(Cr),emitClose:Kr(Br),autoDestroy:Kr($r),destroyed:Kr(Rr),closed:Kr(Ur),closeEmitted:Kr(Pr),multiAwaitDrain:Kr(_r),readingMore:Kr(Ar),dataEmitted:Kr(jr)});function Zr(qr,Vr,sn){typeof sn!="boolean"&&(sn=Vr instanceof requireDuplex$1()),this.state=Br|$r|Dr|Er,qr&&qr.objectMode&&(this.state|=dr),sn&&qr&&qr.readableObjectMode&&(this.state|=dr),this.highWaterMark=qr?vr(this,qr,"readableHighWaterMark",sn):Ir(!1),this.buffer=new nr,this.length=0,this.pipes=[],this.flowing=null,this[pr]=null,qr&&qr.emitClose===!1&&(this.state&=~Br),qr&&qr.autoDestroy===!1&&(this.state&=~$r),this.errored=null,this.defaultEncoding=qr&&qr.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,qr&&qr.encoding&&(this.decoder=new ur(qr.encoding),this.encoding=qr.encoding)}function Jr(qr){if(!(this instanceof Jr))return new Jr(qr);const Vr=this instanceof requireDuplex$1();this._readableState=new Zr(qr,this,Vr),qr&&(typeof qr.read=="function"&&(this._read=qr.read),typeof qr.destroy=="function"&&(this._destroy=qr.destroy),typeof qr.construct=="function"&&(this._construct=qr.construct),qr.signal&&!Vr&&rr(qr.signal,this)),Vt.call(this,qr),yr.construct(this,()=>{this._readableState.needReadable&&hn(this,this._readableState)})}Jr.prototype.destroy=yr.destroy,Jr.prototype._undestroy=yr.undestroy,Jr.prototype._destroy=function(qr,Vr){Vr(qr)},Jr.prototype[zt.captureRejectionSymbol]=function(qr){this.destroy(qr)},Jr.prototype[Nt]=function(){let qr;return this.destroyed||(qr=this.readableEnded?null:new Xt,this.destroy(qr)),new Lt((Vr,sn)=>Qt(this,an=>an&&an!==qr?sn(an):Vr(null)))},Jr.prototype.push=function(qr,Vr){return nn(this,qr,Vr,!1)},Jr.prototype.unshift=function(qr,Vr){return nn(this,qr,Vr,!0)};function nn(qr,Vr,sn,an){Wt("readableAddChunk",Vr);const cn=qr._readableState;let Pn;if(cn.state&dr||(typeof Vr=="string"?(sn=sn||cn.defaultEncoding,cn.encoding!==sn&&(an&&cn.encoding?Vr=Jt.from(Vr,sn).toString(cn.encoding):(Vr=Jt.from(Vr,sn),sn=""))):Vr instanceof Jt?sn="":Vt._isUint8Array(Vr)?(Vr=Vt._uint8ArrayToBuffer(Vr),sn=""):Vr!=null&&(Pn=new Or("chunk",["string","Buffer","Uint8Array"],Vr))),Pn)tr(qr,Pn);else if(Vr===null)cn.state&=~Sr,tn(qr,cn);else if(cn.state&dr||Vr&&Vr.length>0)if(an)if(cn.state&br)tr(qr,new ir);else{if(cn.destroyed||cn.errored)return!1;on(qr,cn,Vr,!0)}else if(cn.ended)tr(qr,new lr);else{if(cn.destroyed||cn.errored)return!1;cn.state&=~Sr,cn.decoder&&!sn?(Vr=cn.decoder.write(Vr),cn.objectMode||Vr.length!==0?on(qr,cn,Vr,!1):hn(qr,cn)):on(qr,cn,Vr,!1)}else an||(cn.state&=~Sr,hn(qr,cn));return!cn.ended&&(cn.length<cn.highWaterMark||cn.length===0)}function on(qr,Vr,sn,an){Vr.flowing&&Vr.length===0&&!Vr.sync&&qr.listenerCount("data")>0?(Vr.state&_r?Vr.awaitDrainWriters.clear():Vr.awaitDrainWriters=null,Vr.dataEmitted=!0,qr.emit("data",sn)):(Vr.length+=Vr.objectMode?1:sn.length,an?Vr.buffer.unshift(sn):Vr.buffer.push(sn),Vr.state&wr&&en(qr)),hn(qr,Vr)}Jr.prototype.isPaused=function(){const qr=this._readableState;return qr[pr]===!0||qr.flowing===!1},Jr.prototype.setEncoding=function(qr){const Vr=new ur(qr);this._readableState.decoder=Vr,this._readableState.encoding=this._readableState.decoder.encoding;const sn=this._readableState.buffer;let an="";for(const cn of sn)an+=Vr.write(cn);return sn.clear(),an!==""&&sn.push(an),this._readableState.length=an.length,this};const Gr=1073741824;function Fr(qr){if(qr>Gr)throw new kr("size","<= 1GiB",qr);return qr--,qr|=qr>>>1,qr|=qr>>>2,qr|=qr>>>4,qr|=qr>>>8,qr|=qr>>>16,qr++,qr}function Xr(qr,Vr){return qr<=0||Vr.length===0&&Vr.ended?0:Vr.state&dr?1:xt(qr)?Vr.flowing&&Vr.length?Vr.buffer.first().length:Vr.length:qr<=Vr.length?qr:Vr.ended?Vr.length:0}Jr.prototype.read=function(qr){Wt("read",qr),qr===void 0?qr=NaN:$t(qr)||(qr=At(qr,10));const Vr=this._readableState,sn=qr;if(qr>Vr.highWaterMark&&(Vr.highWaterMark=Fr(qr)),qr!==0&&(Vr.state&=~Tr),qr===0&&Vr.needReadable&&((Vr.highWaterMark!==0?Vr.length>=Vr.highWaterMark:Vr.length>0)||Vr.ended))return Wt("read: emitReadable",Vr.length,Vr.ended),Vr.length===0&&Vr.ended?gn(this):en(this),null;if(qr=Xr(qr,Vr),qr===0&&Vr.ended)return Vr.length===0&&gn(this),null;let an=(Vr.state&wr)!==0;if(Wt("need readable",an),(Vr.length===0||Vr.length-qr<Vr.highWaterMark)&&(an=!0,Wt("length less than watermark",an)),Vr.ended||Vr.reading||Vr.destroyed||Vr.errored||!Vr.constructed)an=!1,Wt("reading, ended or constructing",an);else if(an){Wt("do read"),Vr.state|=Sr|Er,Vr.length===0&&(Vr.state|=wr);try{this._read(Vr.highWaterMark)}catch(Pn){tr(this,Pn)}Vr.state&=~Er,Vr.reading||(qr=Xr(sn,Vr))}let cn;return qr>0?cn=Cn(qr,Vr):cn=null,cn===null?(Vr.needReadable=Vr.length<=Vr.highWaterMark,qr=0):(Vr.length-=qr,Vr.multiAwaitDrain?Vr.awaitDrainWriters.clear():Vr.awaitDrainWriters=null),Vr.length===0&&(Vr.ended||(Vr.needReadable=!0),sn!==qr&&Vr.ended&&gn(this)),cn!==null&&!Vr.errorEmitted&&!Vr.closeEmitted&&(Vr.dataEmitted=!0,this.emit("data",cn)),cn};function tn(qr,Vr){if(Wt("onEofChunk"),!Vr.ended){if(Vr.decoder){const sn=Vr.decoder.end();sn&&sn.length&&(Vr.buffer.push(sn),Vr.length+=Vr.objectMode?1:sn.length)}Vr.ended=!0,Vr.sync?en(qr):(Vr.needReadable=!1,Vr.emittedReadable=!0,un(qr))}}function en(qr){const Vr=qr._readableState;Wt("emitReadable",Vr.needReadable,Vr.emittedReadable),Vr.needReadable=!1,Vr.emittedReadable||(Wt("emitReadable",Vr.flowing),Vr.emittedReadable=!0,_t.nextTick(un,qr))}function un(qr){const Vr=qr._readableState;Wt("emitReadable_",Vr.destroyed,Vr.length,Vr.ended),!Vr.destroyed&&!Vr.errored&&(Vr.length||Vr.ended)&&(qr.emit("readable"),Vr.emittedReadable=!1),Vr.needReadable=!Vr.flowing&&!Vr.ended&&Vr.length<=Vr.highWaterMark,Rn(qr)}function hn(qr,Vr){!Vr.readingMore&&Vr.constructed&&(Vr.readingMore=!0,_t.nextTick(yn,qr,Vr))}function yn(qr,Vr){for(;!Vr.reading&&!Vr.ended&&(Vr.length<Vr.highWaterMark||Vr.flowing&&Vr.length===0);){const sn=Vr.length;if(Wt("maybeReadMore read 0"),qr.read(0),sn===Vr.length)break}Vr.readingMore=!1}Jr.prototype._read=function(qr){throw new Nr("_read()")},Jr.prototype.pipe=function(qr,Vr){const sn=this,an=this._readableState;an.pipes.length===1&&(an.multiAwaitDrain||(an.multiAwaitDrain=!0,an.awaitDrainWriters=new Ut(an.awaitDrainWriters?[an.awaitDrainWriters]:[]))),an.pipes.push(qr),Wt("pipe count=%d opts=%j",an.pipes.length,Vr);const Pn=(!Vr||Vr.end!==!1)&&qr!==_t.stdout&&qr!==_t.stderr?Wr:_n;an.endEmitted?_t.nextTick(Pn):sn.once("end",Pn),qr.on("unpipe",Bn);function Bn($n,xn){Wt("onunpipe"),$n===sn&&xn&&xn.hasUnpiped===!1&&(xn.hasUnpiped=!0,Qr())}function Wr(){Wt("onend"),qr.end()}let Hr,Yr=!1;function Qr(){Wt("cleanup"),qr.removeListener("close",mn),qr.removeListener("finish",wn),Hr&&qr.removeListener("drain",Hr),qr.removeListener("error",ln),qr.removeListener("unpipe",Bn),sn.removeListener("end",Wr),sn.removeListener("end",_n),sn.removeListener("data",fn),Yr=!0,Hr&&an.awaitDrainWriters&&(!qr._writableState||qr._writableState.needDrain)&&Hr()}function rn(){Yr||(an.pipes.length===1&&an.pipes[0]===qr?(Wt("false write response, pause",0),an.awaitDrainWriters=qr,an.multiAwaitDrain=!1):an.pipes.length>1&&an.pipes.includes(qr)&&(Wt("false write response, pause",an.awaitDrainWriters.size),an.awaitDrainWriters.add(qr)),sn.pause()),Hr||(Hr=pn(sn,qr),qr.on("drain",Hr))}sn.on("data",fn);function fn($n){Wt("ondata");const xn=qr.write($n);Wt("dest.write",xn),xn===!1&&rn()}function ln($n){if(Wt("onerror",$n),_n(),qr.removeListener("error",ln),qr.listenerCount("error")===0){const xn=qr._writableState||qr._readableState;xn&&!xn.errorEmitted?tr(qr,$n):qr.emit("error",$n)}}Ht(qr,"error",ln);function mn(){qr.removeListener("finish",wn),_n()}qr.once("close",mn);function wn(){Wt("onfinish"),qr.removeListener("close",mn),_n()}qr.once("finish",wn);function _n(){Wt("unpipe"),sn.unpipe(qr)}return qr.emit("pipe",sn),qr.writableNeedDrain===!0?rn():an.flowing||(Wt("pipe resume"),sn.resume()),qr};function pn(qr,Vr){return function(){const an=qr._readableState;an.awaitDrainWriters===Vr?(Wt("pipeOnDrain",1),an.awaitDrainWriters=null):an.multiAwaitDrain&&(Wt("pipeOnDrain",an.awaitDrainWriters.size),an.awaitDrainWriters.delete(Vr)),(!an.awaitDrainWriters||an.awaitDrainWriters.size===0)&&qr.listenerCount("data")&&qr.resume()}}Jr.prototype.unpipe=function(qr){const Vr=this._readableState,sn={hasUnpiped:!1};if(Vr.pipes.length===0)return this;if(!qr){const cn=Vr.pipes;Vr.pipes=[],this.pause();for(let Pn=0;Pn<cn.length;Pn++)cn[Pn].emit("unpipe",this,{hasUnpiped:!1});return this}const an=e(Vr.pipes,qr);return an===-1?this:(Vr.pipes.splice(an,1),Vr.pipes.length===0&&this.pause(),qr.emit("unpipe",this,sn),this)},Jr.prototype.on=function(qr,Vr){const sn=Vt.prototype.on.call(this,qr,Vr),an=this._readableState;return qr==="data"?(an.readableListening=this.listenerCount("readable")>0,an.flowing!==!1&&this.resume()):qr==="readable"&&!an.endEmitted&&!an.readableListening&&(an.readableListening=an.needReadable=!0,an.flowing=!1,an.emittedReadable=!1,Wt("on readable",an.length,an.reading),an.length?en(this):an.reading||_t.nextTick(An,this)),sn},Jr.prototype.addListener=Jr.prototype.on,Jr.prototype.removeListener=function(qr,Vr){const sn=Vt.prototype.removeListener.call(this,qr,Vr);return qr==="readable"&&_t.nextTick(Dn,this),sn},Jr.prototype.off=Jr.prototype.removeListener,Jr.prototype.removeAllListeners=function(qr){const Vr=Vt.prototype.removeAllListeners.apply(this,arguments);return(qr==="readable"||qr===void 0)&&_t.nextTick(Dn,this),Vr};function Dn(qr){const Vr=qr._readableState;Vr.readableListening=qr.listenerCount("readable")>0,Vr.resumeScheduled&&Vr[pr]===!1?Vr.flowing=!0:qr.listenerCount("data")>0?qr.resume():Vr.readableListening||(Vr.flowing=null)}function An(qr){Wt("readable nexttick read 0"),qr.read(0)}Jr.prototype.resume=function(){const qr=this._readableState;return qr.flowing||(Wt("resume"),qr.flowing=!qr.readableListening,vn(this,qr)),qr[pr]=!1,this};function vn(qr,Vr){Vr.resumeScheduled||(Vr.resumeScheduled=!0,_t.nextTick(In,qr,Vr))}function In(qr,Vr){Wt("resume",Vr.reading),Vr.reading||qr.read(0),Vr.resumeScheduled=!1,qr.emit("resume"),Rn(qr),Vr.flowing&&!Vr.reading&&qr.read(0)}Jr.prototype.pause=function(){return Wt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Wt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[pr]=!0,this};function Rn(qr){const Vr=qr._readableState;for(Wt("flow",Vr.flowing);Vr.flowing&&qr.read()!==null;);}Jr.prototype.wrap=function(qr){let Vr=!1;qr.on("data",an=>{!this.push(an)&&qr.pause&&(Vr=!0,qr.pause())}),qr.on("end",()=>{this.push(null)}),qr.on("error",an=>{tr(this,an)}),qr.on("close",()=>{this.destroy()}),qr.on("destroy",()=>{this.destroy()}),this._read=()=>{Vr&&qr.resume&&(Vr=!1,qr.resume())};const sn=Bt(qr);for(let an=1;an<sn.length;an++){const cn=sn[an];this[cn]===void 0&&typeof qr[cn]=="function"&&(this[cn]=qr[cn].bind(qr))}return this},Jr.prototype[qt]=function(){return En(this)},Jr.prototype.iterator=function(qr){return qr!==void 0&&er(qr,"options"),En(this,qr)};function En(qr,Vr){typeof qr.read!="function"&&(qr=Jr.wrap(qr,{objectMode:!0}));const sn=On(qr,Vr);return sn.stream=qr,sn}async function*On(qr,Vr){let sn=ar;function an(Bn){this===qr?(sn(),sn=ar):sn=Bn}qr.on("readable",an);let cn;const Pn=Qt(qr,{writable:!1},Bn=>{cn=Bn?xr(cn,Bn):null,sn(),sn=ar});try{for(;;){const Bn=qr.destroyed?null:qr.read();if(Bn!==null)yield Bn;else{if(cn)throw cn;if(cn===null)return;await new Lt(an)}}}catch(Bn){throw cn=xr(cn,Bn),cn}finally{(cn||(Vr==null?void 0:Vr.destroyOnReturn)!==!1)&&(cn===void 0||qr._readableState.autoDestroy)?yr.destroyer(qr,null):(qr.off("readable",an),Pn())}}kt(Jr.prototype,{readable:{__proto__:null,get(){const qr=this._readableState;return!!qr&&qr.readable!==!1&&!qr.destroyed&&!qr.errorEmitted&&!qr.endEmitted},set(qr){this._readableState&&(this._readableState.readable=!!qr)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(qr){this._readableState&&(this._readableState.flowing=qr)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(qr){this._readableState&&(this._readableState.destroyed=qr)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),kt(Zr.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[pr]!==!1},set(qr){this[pr]=!!qr}}}),Jr._fromList=Cn;function Cn(qr,Vr){if(Vr.length===0)return null;let sn;return Vr.objectMode?sn=Vr.buffer.shift():!qr||qr>=Vr.length?(Vr.decoder?sn=Vr.buffer.join(""):Vr.buffer.length===1?sn=Vr.buffer.first():sn=Vr.buffer.concat(Vr.length),Vr.buffer.clear()):sn=Vr.buffer.consume(qr,Vr.decoder),sn}function gn(qr){const Vr=qr._readableState;Wt("endReadable",Vr.endEmitted),Vr.endEmitted||(Vr.ended=!0,_t.nextTick(kn,Vr,qr))}function kn(qr,Vr){if(Wt("endReadableNT",qr.endEmitted,qr.length),!qr.errored&&!qr.closeEmitted&&!qr.endEmitted&&qr.length===0){if(qr.endEmitted=!0,Vr.emit("end"),Vr.writable&&Vr.allowHalfOpen===!1)_t.nextTick(Mn,Vr);else if(qr.autoDestroy){const sn=Vr._writableState;(!sn||sn.autoDestroy&&(sn.finished||sn.writable===!1))&&Vr.destroy()}}}function Mn(qr){qr.writable&&!qr.writableEnded&&!qr.destroyed&&qr.end()}Jr.from=function(qr,Vr){return gr(Jr,qr,Vr)};let Tn;function Ln(){return Tn===void 0&&(Tn={}),Tn}return Jr.fromWeb=function(qr,Vr){return Ln().newStreamReadableFromReadableStream(qr,Vr)},Jr.toWeb=function(qr,Vr){return Ln().newReadableStreamFromStreamReadable(qr,Vr)},Jr.wrap=function(qr,Vr){var sn,an;return new Jr({objectMode:(sn=(an=qr.readableObjectMode)!==null&&an!==void 0?an:qr.objectMode)!==null&&sn!==void 0?sn:!0,...Vr,destroy(cn,Pn){yr.destroyer(qr,cn),Pn(cn)}}).wrap(qr)},readable$1}var writable$1,hasRequiredWritable$1;function requireWritable$1(){if(hasRequiredWritable$1)return writable$1;hasRequiredWritable$1=1;const _t=browserExports$2,{ArrayPrototypeSlice:e,Error:$t,FunctionPrototypeSymbolHasInstance:xt,ObjectDefineProperty:At,ObjectDefineProperties:kt,ObjectSetPrototypeOf:Bt,StringPrototypeToLowerCase:jt,Symbol:Lt,SymbolHasInstance:Ut}=primordials$1;writable$1=er,er.WritableState=ir;const{EventEmitter:Nt}=eventsExports,qt=legacy$1.Stream,{Buffer:Kt}=buffer$2,zt=destroy_1$1,{addAbortSignal:Vt}=addAbortSignalExports$1,{getHighWaterMark:Ht,getDefaultHighWaterMark:Jt}=state$1,{ERR_INVALID_ARG_TYPE:rr,ERR_METHOD_NOT_IMPLEMENTED:Qt,ERR_MULTIPLE_CALLBACK:Wt,ERR_STREAM_CANNOT_PIPE:nr,ERR_STREAM_DESTROYED:yr,ERR_STREAM_ALREADY_FINISHED:vr,ERR_STREAM_NULL_VALUES:Ir,ERR_STREAM_WRITE_AFTER_END:xr,ERR_UNKNOWN_ENCODING:Or}=errors$2.codes,{errorOrDestroy:Nr}=zt;Bt(er.prototype,qt.prototype),Bt(er,qt);function kr(){}const lr=Lt("kOnFinished");function ir($r,Rr,Ur){typeof Ur!="boolean"&&(Ur=Rr instanceof requireDuplex$1()),this.objectMode=!!($r&&$r.objectMode),Ur&&(this.objectMode=this.objectMode||!!($r&&$r.writableObjectMode)),this.highWaterMark=$r?Ht(this,$r,"writableHighWaterMark",Ur):Jt(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Pr=!!($r&&$r.decodeStrings===!1);this.decodeStrings=!Pr,this.defaultEncoding=$r&&$r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=tr.bind(void 0,Rr),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Xt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!$r||$r.emitClose!==!1,this.autoDestroy=!$r||$r.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[lr]=[]}function Xt($r){$r.buffered=[],$r.bufferedIndex=0,$r.allBuffers=!0,$r.allNoop=!0}ir.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},At(ir.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function er($r){const Rr=this instanceof requireDuplex$1();if(!Rr&&!xt(er,this))return new er($r);this._writableState=new ir($r,this,Rr),$r&&(typeof $r.write=="function"&&(this._write=$r.write),typeof $r.writev=="function"&&(this._writev=$r.writev),typeof $r.destroy=="function"&&(this._destroy=$r.destroy),typeof $r.final=="function"&&(this._final=$r.final),typeof $r.construct=="function"&&(this._construct=$r.construct),$r.signal&&Vt($r.signal,this)),qt.call(this,$r),zt.construct(this,()=>{const Ur=this._writableState;Ur.writing||Sr(this,Ur),Tr(this,Ur)})}At(er,Ut,{__proto__:null,value:function($r){return xt(this,$r)?!0:this!==er?!1:$r&&$r._writableState instanceof ir}}),er.prototype.pipe=function(){Nr(this,new nr)};function pr($r,Rr,Ur,Pr){const _r=$r._writableState;if(typeof Ur=="function")Pr=Ur,Ur=_r.defaultEncoding;else{if(!Ur)Ur=_r.defaultEncoding;else if(Ur!=="buffer"&&!Kt.isEncoding(Ur))throw new Or(Ur);typeof Pr!="function"&&(Pr=kr)}if(Rr===null)throw new Ir;if(!_r.objectMode)if(typeof Rr=="string")_r.decodeStrings!==!1&&(Rr=Kt.from(Rr,Ur),Ur="buffer");else if(Rr instanceof Kt)Ur="buffer";else if(qt._isUint8Array(Rr))Rr=qt._uint8ArrayToBuffer(Rr),Ur="buffer";else throw new rr("chunk",["string","Buffer","Uint8Array"],Rr);let Ar;return _r.ending?Ar=new xr:_r.destroyed&&(Ar=new yr("write")),Ar?(_t.nextTick(Pr,Ar),Nr($r,Ar,!0),Ar):(_r.pendingcb++,ur($r,_r,Rr,Ur,Pr))}er.prototype.write=function($r,Rr,Ur){return pr(this,$r,Rr,Ur)===!0},er.prototype.cork=function(){this._writableState.corked++},er.prototype.uncork=function(){const $r=this._writableState;$r.corked&&($r.corked--,$r.writing||Sr(this,$r))},er.prototype.setDefaultEncoding=function(Rr){if(typeof Rr=="string"&&(Rr=jt(Rr)),!Kt.isEncoding(Rr))throw new Or(Rr);return this._writableState.defaultEncoding=Rr,this};function ur($r,Rr,Ur,Pr,_r){const Ar=Rr.objectMode?1:Ur.length;Rr.length+=Ar;const jr=Rr.length<Rr.highWaterMark;return jr||(Rr.needDrain=!0),Rr.writing||Rr.corked||Rr.errored||!Rr.constructed?(Rr.buffered.push({chunk:Ur,encoding:Pr,callback:_r}),Rr.allBuffers&&Pr!=="buffer"&&(Rr.allBuffers=!1),Rr.allNoop&&_r!==kr&&(Rr.allNoop=!1)):(Rr.writelen=Ar,Rr.writecb=_r,Rr.writing=!0,Rr.sync=!0,$r._write(Ur,Pr,Rr.onwrite),Rr.sync=!1),jr&&!Rr.errored&&!Rr.destroyed}function gr($r,Rr,Ur,Pr,_r,Ar,jr){Rr.writelen=Pr,Rr.writecb=jr,Rr.writing=!0,Rr.sync=!0,Rr.destroyed?Rr.onwrite(new yr("write")):Ur?$r._writev(_r,Rr.onwrite):$r._write(_r,Ar,Rr.onwrite),Rr.sync=!1}function ar($r,Rr,Ur,Pr){--Rr.pendingcb,Pr(Ur),br(Rr),Nr($r,Ur)}function tr($r,Rr){const Ur=$r._writableState,Pr=Ur.sync,_r=Ur.writecb;if(typeof _r!="function"){Nr($r,new Wt);return}Ur.writing=!1,Ur.writecb=null,Ur.length-=Ur.writelen,Ur.writelen=0,Rr?(Rr.stack,Ur.errored||(Ur.errored=Rr),$r._readableState&&!$r._readableState.errored&&($r._readableState.errored=Rr),Pr?_t.nextTick(ar,$r,Ur,Rr,_r):ar($r,Ur,Rr,_r)):(Ur.buffered.length>Ur.bufferedIndex&&Sr($r,Ur),Pr?Ur.afterWriteTickInfo!==null&&Ur.afterWriteTickInfo.cb===_r?Ur.afterWriteTickInfo.count++:(Ur.afterWriteTickInfo={count:1,cb:_r,stream:$r,state:Ur},_t.nextTick(dr,Ur.afterWriteTickInfo)):fr($r,Ur,1,_r))}function dr({stream:$r,state:Rr,count:Ur,cb:Pr}){return Rr.afterWriteTickInfo=null,fr($r,Rr,Ur,Pr)}function fr($r,Rr,Ur,Pr){for(!Rr.ending&&!$r.destroyed&&Rr.length===0&&Rr.needDrain&&(Rr.needDrain=!1,$r.emit("drain"));Ur-- >0;)Rr.pendingcb--,Pr();Rr.destroyed&&br(Rr),Tr($r,Rr)}function br($r){if($r.writing)return;for(let _r=$r.bufferedIndex;_r<$r.buffered.length;++_r){var Rr;const{chunk:Ar,callback:jr}=$r.buffered[_r],Kr=$r.objectMode?1:Ar.length;$r.length-=Kr,jr((Rr=$r.errored)!==null&&Rr!==void 0?Rr:new yr("write"))}const Ur=$r[lr].splice(0);for(let _r=0;_r<Ur.length;_r++){var Pr;Ur[_r]((Pr=$r.errored)!==null&&Pr!==void 0?Pr:new yr("end"))}Xt($r)}function Sr($r,Rr){if(Rr.corked||Rr.bufferProcessing||Rr.destroyed||!Rr.constructed)return;const{buffered:Ur,bufferedIndex:Pr,objectMode:_r}=Rr,Ar=Ur.length-Pr;if(!Ar)return;let jr=Pr;if(Rr.bufferProcessing=!0,Ar>1&&$r._writev){Rr.pendingcb-=Ar-1;const Kr=Rr.allNoop?kr:Jr=>{for(let nn=jr;nn<Ur.length;++nn)Ur[nn].callback(Jr)},Zr=Rr.allNoop&&jr===0?Ur:e(Ur,jr);Zr.allBuffers=Rr.allBuffers,gr($r,Rr,!0,Rr.length,Zr,"",Kr),Xt(Rr)}else{do{const{chunk:Kr,encoding:Zr,callback:Jr}=Ur[jr];Ur[jr++]=null;const nn=_r?1:Kr.length;gr($r,Rr,!1,nn,Kr,Zr,Jr)}while(jr<Ur.length&&!Rr.writing);jr===Ur.length?Xt(Rr):jr>256?(Ur.splice(0,jr),Rr.bufferedIndex=0):Rr.bufferedIndex=jr}Rr.bufferProcessing=!1}er.prototype._write=function($r,Rr,Ur){if(this._writev)this._writev([{chunk:$r,encoding:Rr}],Ur);else throw new Qt("_write()")},er.prototype._writev=null,er.prototype.end=function($r,Rr,Ur){const Pr=this._writableState;typeof $r=="function"?(Ur=$r,$r=null,Rr=null):typeof Rr=="function"&&(Ur=Rr,Rr=null);let _r;if($r!=null){const Ar=pr(this,$r,Rr);Ar instanceof $t&&(_r=Ar)}return Pr.corked&&(Pr.corked=1,this.uncork()),_r||(!Pr.errored&&!Pr.ending?(Pr.ending=!0,Tr(this,Pr,!0),Pr.ended=!0):Pr.finished?_r=new vr("end"):Pr.destroyed&&(_r=new yr("end"))),typeof Ur=="function"&&(_r||Pr.finished?_t.nextTick(Ur,_r):Pr[lr].push(Ur)),this};function Dr($r){return $r.ending&&!$r.destroyed&&$r.constructed&&$r.length===0&&!$r.errored&&$r.buffered.length===0&&!$r.finished&&!$r.writing&&!$r.errorEmitted&&!$r.closeEmitted}function Er($r,Rr){let Ur=!1;function Pr(_r){if(Ur){Nr($r,_r??Wt());return}if(Ur=!0,Rr.pendingcb--,_r){const Ar=Rr[lr].splice(0);for(let jr=0;jr<Ar.length;jr++)Ar[jr](_r);Nr($r,_r,Rr.sync)}else Dr(Rr)&&(Rr.prefinished=!0,$r.emit("prefinish"),Rr.pendingcb++,_t.nextTick(Mr,$r,Rr))}Rr.sync=!0,Rr.pendingcb++;try{$r._final(Pr)}catch(_r){Pr(_r)}Rr.sync=!1}function wr($r,Rr){!Rr.prefinished&&!Rr.finalCalled&&(typeof $r._final=="function"&&!Rr.destroyed?(Rr.finalCalled=!0,Er($r,Rr)):(Rr.prefinished=!0,$r.emit("prefinish")))}function Tr($r,Rr,Ur){Dr(Rr)&&(wr($r,Rr),Rr.pendingcb===0&&(Ur?(Rr.pendingcb++,_t.nextTick((Pr,_r)=>{Dr(_r)?Mr(Pr,_r):_r.pendingcb--},$r,Rr)):Dr(Rr)&&(Rr.pendingcb++,Mr($r,Rr))))}function Mr($r,Rr){Rr.pendingcb--,Rr.finished=!0;const Ur=Rr[lr].splice(0);for(let Pr=0;Pr<Ur.length;Pr++)Ur[Pr]();if($r.emit("finish"),Rr.autoDestroy){const Pr=$r._readableState;(!Pr||Pr.autoDestroy&&(Pr.endEmitted||Pr.readable===!1))&&$r.destroy()}}kt(er.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set($r){this._writableState&&(this._writableState.destroyed=$r)}},writable:{__proto__:null,get(){const $r=this._writableState;return!!$r&&$r.writable!==!1&&!$r.destroyed&&!$r.errored&&!$r.ending&&!$r.ended},set($r){this._writableState&&(this._writableState.writable=!!$r)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const $r=this._writableState;return $r?!$r.destroyed&&!$r.ending&&$r.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Lr=zt.destroy;er.prototype.destroy=function($r,Rr){const Ur=this._writableState;return!Ur.destroyed&&(Ur.bufferedIndex<Ur.buffered.length||Ur[lr].length)&&_t.nextTick(br,Ur),Lr.call(this,$r,Rr),this},er.prototype._undestroy=zt.undestroy,er.prototype._destroy=function($r,Rr){Rr($r)},er.prototype[Nt.captureRejectionSymbol]=function($r){this.destroy($r)};let Cr;function Br(){return Cr===void 0&&(Cr={}),Cr}return er.fromWeb=function($r,Rr){return Br().newStreamWritableFromWritableStream($r,Rr)},er.toWeb=function($r){return Br().newWritableStreamFromStreamWritable($r)},writable$1}var duplexify$1,hasRequiredDuplexify$1;function requireDuplexify$1(){if(hasRequiredDuplexify$1)return duplexify$1;hasRequiredDuplexify$1=1;const _t=browserExports$2,e=buffer$2,{isReadable:$t,isWritable:xt,isIterable:At,isNodeStream:kt,isReadableNodeStream:Bt,isWritableNodeStream:jt,isDuplexNodeStream:Lt,isReadableStream:Ut,isWritableStream:Nt}=utils$1,qt=endOfStreamExports$1,{AbortError:Kt,codes:{ERR_INVALID_ARG_TYPE:zt,ERR_INVALID_RETURN_VALUE:Vt}}=errors$2,{destroyer:Ht}=destroy_1$1,Jt=requireDuplex$1(),rr=requireReadable$1(),Qt=requireWritable$1(),{createDeferredPromise:Wt}=utilExports$1,nr=from_1$1,yr=globalThis.Blob||e.Blob,vr=typeof yr<"u"?function(ir){return ir instanceof yr}:function(ir){return!1},Ir=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:xr}=primordials$1;class Or extends Jt{constructor(ir){super(ir),(ir==null?void 0:ir.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ir==null?void 0:ir.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify$1=function lr(ir,Xt){if(Lt(ir))return ir;if(Bt(ir))return kr({readable:ir});if(jt(ir))return kr({writable:ir});if(kt(ir))return kr({writable:!1,readable:!1});if(Ut(ir))return kr({readable:rr.fromWeb(ir)});if(Nt(ir))return kr({writable:Qt.fromWeb(ir)});if(typeof ir=="function"){const{value:pr,write:ur,final:gr,destroy:ar}=Nr(ir);if(At(pr))return nr(Or,pr,{objectMode:!0,write:ur,final:gr,destroy:ar});const tr=pr==null?void 0:pr.then;if(typeof tr=="function"){let dr;const fr=xr(tr,pr,br=>{if(br!=null)throw new Vt("nully","body",br)},br=>{Ht(dr,br)});return dr=new Or({objectMode:!0,readable:!1,write:ur,final(br){gr(async()=>{try{await fr,_t.nextTick(br,null)}catch(Sr){_t.nextTick(br,Sr)}})},destroy:ar})}throw new Vt("Iterable, AsyncIterable or AsyncFunction",Xt,pr)}if(vr(ir))return lr(ir.arrayBuffer());if(At(ir))return nr(Or,ir,{objectMode:!0,writable:!1});if(Ut(ir==null?void 0:ir.readable)&&Nt(ir==null?void 0:ir.writable))return Or.fromWeb(ir);if(typeof(ir==null?void 0:ir.writable)=="object"||typeof(ir==null?void 0:ir.readable)=="object"){const pr=ir!=null&&ir.readable?Bt(ir==null?void 0:ir.readable)?ir==null?void 0:ir.readable:lr(ir.readable):void 0,ur=ir!=null&&ir.writable?jt(ir==null?void 0:ir.writable)?ir==null?void 0:ir.writable:lr(ir.writable):void 0;return kr({readable:pr,writable:ur})}const er=ir==null?void 0:ir.then;if(typeof er=="function"){let pr;return xr(er,ir,ur=>{ur!=null&&pr.push(ur),pr.push(null)},ur=>{Ht(pr,ur)}),pr=new Or({objectMode:!0,writable:!1,read(){}})}throw new zt(Xt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],ir)};function Nr(lr){let{promise:ir,resolve:Xt}=Wt();const er=new Ir,pr=er.signal;return{value:lr(async function*(){for(;;){const gr=ir;ir=null;const{chunk:ar,done:tr,cb:dr}=await gr;if(_t.nextTick(dr),tr)return;if(pr.aborted)throw new Kt(void 0,{cause:pr.reason});({promise:ir,resolve:Xt}=Wt()),yield ar}}(),{signal:pr}),write(gr,ar,tr){const dr=Xt;Xt=null,dr({chunk:gr,done:!1,cb:tr})},final(gr){const ar=Xt;Xt=null,ar({done:!0,cb:gr})},destroy(gr,ar){er.abort(),ar(gr)}}}function kr(lr){const ir=lr.readable&&typeof lr.readable.read!="function"?rr.wrap(lr.readable):lr.readable,Xt=lr.writable;let er=!!$t(ir),pr=!!xt(Xt),ur,gr,ar,tr,dr;function fr(br){const Sr=tr;tr=null,Sr?Sr(br):br&&dr.destroy(br)}return dr=new Or({readableObjectMode:!!(ir!=null&&ir.readableObjectMode),writableObjectMode:!!(Xt!=null&&Xt.writableObjectMode),readable:er,writable:pr}),pr&&(qt(Xt,br=>{pr=!1,br&&Ht(ir,br),fr(br)}),dr._write=function(br,Sr,Dr){Xt.write(br,Sr)?Dr():ur=Dr},dr._final=function(br){Xt.end(),gr=br},Xt.on("drain",function(){if(ur){const br=ur;ur=null,br()}}),Xt.on("finish",function(){if(gr){const br=gr;gr=null,br()}})),er&&(qt(ir,br=>{er=!1,br&&Ht(ir,br),fr(br)}),ir.on("readable",function(){if(ar){const br=ar;ar=null,br()}}),ir.on("end",function(){dr.push(null)}),dr._read=function(){for(;;){const br=ir.read();if(br===null){ar=dr._read;return}if(!dr.push(br))return}}),dr._destroy=function(br,Sr){!br&&tr!==null&&(br=new Kt),ar=null,ur=null,gr=null,tr===null?Sr(br):(tr=Sr,Ht(Xt,br),Ht(ir,br))},dr}return duplexify$1}var duplex$1,hasRequiredDuplex$1;function requireDuplex$1(){if(hasRequiredDuplex$1)return duplex$1;hasRequiredDuplex$1=1;const{ObjectDefineProperties:_t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:$t,ObjectSetPrototypeOf:xt}=primordials$1;duplex$1=Bt;const At=requireReadable$1(),kt=requireWritable$1();xt(Bt.prototype,At.prototype),xt(Bt,At);{const Nt=$t(kt.prototype);for(let qt=0;qt<Nt.length;qt++){const Kt=Nt[qt];Bt.prototype[Kt]||(Bt.prototype[Kt]=kt.prototype[Kt])}}function Bt(Nt){if(!(this instanceof Bt))return new Bt(Nt);At.call(this,Nt),kt.call(this,Nt),Nt?(this.allowHalfOpen=Nt.allowHalfOpen!==!1,Nt.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Nt.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}_t(Bt.prototype,{writable:{__proto__:null,...e(kt.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(kt.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(kt.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(kt.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(kt.prototype,"writableLength")},writableFinished:{__proto__:null,...e(kt.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(kt.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(kt.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(kt.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(Nt){this._readableState&&this._writableState&&(this._readableState.destroyed=Nt,this._writableState.destroyed=Nt)}}});let jt;function Lt(){return jt===void 0&&(jt={}),jt}Bt.fromWeb=function(Nt,qt){return Lt().newStreamDuplexFromReadableWritablePair(Nt,qt)},Bt.toWeb=function(Nt){return Lt().newReadableWritablePairFromDuplex(Nt)};let Ut;return Bt.from=function(Nt){return Ut||(Ut=requireDuplexify$1()),Ut(Nt,"body")},duplex$1}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$4,Symbol:Symbol$6}=primordials$1;var transform$1=Transform$3;const{ERR_METHOD_NOT_IMPLEMENTED:ERR_METHOD_NOT_IMPLEMENTED$1}=errors$2.codes,Duplex$5=requireDuplex$1(),{getHighWaterMark:getHighWaterMark$2}=state$1;ObjectSetPrototypeOf$4(Transform$3.prototype,Duplex$5.prototype);ObjectSetPrototypeOf$4(Transform$3,Duplex$5);const kCallback$3=Symbol$6("kCallback");function Transform$3(_t){if(!(this instanceof Transform$3))return new Transform$3(_t);const e=_t?getHighWaterMark$2(this,_t,"readableHighWaterMark",!0):null;e===0&&(_t={..._t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:_t.writableHighWaterMark||0}),Duplex$5.call(this,_t),this._readableState.sync=!1,this[kCallback$3]=null,_t&&(typeof _t.transform=="function"&&(this._transform=_t.transform),typeof _t.flush=="function"&&(this._flush=_t.flush)),this.on("prefinish",prefinish$1)}function final$1(_t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,$t)=>{if(e){_t?_t(e):this.destroy(e);return}$t!=null&&this.push($t),this.push(null),_t&&_t()}):(this.push(null),_t&&_t())}function prefinish$1(){this._final!==final$1&&final$1.call(this)}Transform$3.prototype._final=final$1;Transform$3.prototype._transform=function(_t,e,$t){throw new ERR_METHOD_NOT_IMPLEMENTED$1("_transform()")};Transform$3.prototype._write=function(_t,e,$t){const xt=this._readableState,At=this._writableState,kt=xt.length;this._transform(_t,e,(Bt,jt)=>{if(Bt){$t(Bt);return}jt!=null&&this.push(jt),At.ended||kt===xt.length||xt.length<xt.highWaterMark?$t():this[kCallback$3]=$t})};Transform$3.prototype._read=function(){if(this[kCallback$3]){const _t=this[kCallback$3];this[kCallback$3]=null,_t()}};const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$3}=primordials$1;var passthrough$1=PassThrough$3;const Transform$2=transform$1;ObjectSetPrototypeOf$3(PassThrough$3.prototype,Transform$2.prototype);ObjectSetPrototypeOf$3(PassThrough$3,Transform$2);function PassThrough$3(_t){if(!(this instanceof PassThrough$3))return new PassThrough$3(_t);Transform$2.call(this,_t)}PassThrough$3.prototype._transform=function(_t,e,$t){$t(null,_t)};const process$4=browserExports$2,{ArrayIsArray:ArrayIsArray$3,Promise:Promise$5,SymbolAsyncIterator:SymbolAsyncIterator$3,SymbolDispose}=primordials$1,eos$4=endOfStreamExports$1,{once:once$2}=utilExports$1,destroyImpl$1=destroy_1$1,Duplex$4=requireDuplex$1(),{aggregateTwoErrors:aggregateTwoErrors$3,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$7,ERR_INVALID_RETURN_VALUE:ERR_INVALID_RETURN_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$5,ERR_STREAM_DESTROYED:ERR_STREAM_DESTROYED$1,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$2},AbortError:AbortError$8}=errors$2,{validateFunction:validateFunction$4,validateAbortSignal:validateAbortSignal$5}=validators$1,{isIterable:isIterable$2,isReadable:isReadable$5,isReadableNodeStream:isReadableNodeStream$3,isNodeStream:isNodeStream$7,isTransformStream:isTransformStream$4,isWebStream:isWebStream$4,isReadableStream:isReadableStream$5,isReadableFinished:isReadableFinished$2}=utils$1,AbortController$3=globalThis.AbortController||requireBrowser().AbortController;let PassThrough$2,Readable$1,addAbortListener;function destroyer$4(_t,e,$t){let xt=!1;_t.on("close",()=>{xt=!0});const At=eos$4(_t,{readable:e,writable:$t},kt=>{xt=!kt});return{destroy:kt=>{xt||(xt=!0,destroyImpl$1.destroyer(_t,kt||new ERR_STREAM_DESTROYED$1("pipe")))},cleanup:At}}function popCallback$1(_t){return validateFunction$4(_t[_t.length-1],"streams[stream.length - 1]"),_t.pop()}function makeAsyncIterable$1(_t){if(isIterable$2(_t))return _t;if(isReadableNodeStream$3(_t))return fromReadable$1(_t);throw new ERR_INVALID_ARG_TYPE$7("val",["Readable","Iterable","AsyncIterable"],_t)}async function*fromReadable$1(_t){Readable$1||(Readable$1=requireReadable$1()),yield*Readable$1.prototype[SymbolAsyncIterator$3].call(_t)}async function pumpToNode$1(_t,e,$t,{end:xt}){let At,kt=null;const Bt=Ut=>{if(Ut&&(At=Ut),kt){const Nt=kt;kt=null,Nt()}},jt=()=>new Promise$5((Ut,Nt)=>{At?Nt(At):kt=()=>{At?Nt(At):Ut()}});e.on("drain",Bt);const Lt=eos$4(e,{readable:!1},Bt);try{e.writableNeedDrain&&await jt();for await(const Ut of _t)e.write(Ut)||await jt();xt&&(e.end(),await jt()),$t()}catch(Ut){$t(At!==Ut?aggregateTwoErrors$3(At,Ut):Ut)}finally{Lt(),e.off("drain",Bt)}}async function pumpToWeb$1(_t,e,$t,{end:xt}){isTransformStream$4(e)&&(e=e.writable);const At=e.getWriter();try{for await(const kt of _t)await At.ready,At.write(kt).catch(()=>{});await At.ready,xt&&await At.close(),$t()}catch(kt){try{await At.abort(kt),$t(kt)}catch(Bt){$t(Bt)}}}function pipeline$3(..._t){return pipelineImpl$1(_t,once$2(popCallback$1(_t)))}function pipelineImpl$1(_t,e,$t){if(_t.length===1&&ArrayIsArray$3(_t[0])&&(_t=_t[0]),_t.length<2)throw new ERR_MISSING_ARGS$5("streams");const xt=new AbortController$3,At=xt.signal,kt=$t==null?void 0:$t.signal,Bt=[];validateAbortSignal$5(kt,"options.signal");function jt(){Vt(new AbortError$8)}addAbortListener=addAbortListener||utilExports$1.addAbortListener;let Lt;kt&&(Lt=addAbortListener(kt,jt));let Ut,Nt;const qt=[];let Kt=0;function zt(Qt){Vt(Qt,--Kt===0)}function Vt(Qt,Wt){var nr;if(Qt&&(!Ut||Ut.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ut=Qt),!(!Ut&&!Wt)){for(;qt.length;)qt.shift()(Ut);(nr=Lt)===null||nr===void 0||nr[SymbolDispose](),xt.abort(),Wt&&(Ut||Bt.forEach(yr=>yr()),process$4.nextTick(e,Ut,Nt))}}let Ht;for(let Qt=0;Qt<_t.length;Qt++){const Wt=_t[Qt],nr=Qt<_t.length-1,yr=Qt>0,vr=nr||($t==null?void 0:$t.end)!==!1,Ir=Qt===_t.length-1;if(isNodeStream$7(Wt)){let xr=function(Or){Or&&Or.name!=="AbortError"&&Or.code!=="ERR_STREAM_PREMATURE_CLOSE"&&zt(Or)};if(vr){const{destroy:Or,cleanup:Nr}=destroyer$4(Wt,nr,yr);qt.push(Or),isReadable$5(Wt)&&Ir&&Bt.push(Nr)}Wt.on("error",xr),isReadable$5(Wt)&&Ir&&Bt.push(()=>{Wt.removeListener("error",xr)})}if(Qt===0)if(typeof Wt=="function"){if(Ht=Wt({signal:At}),!isIterable$2(Ht))throw new ERR_INVALID_RETURN_VALUE$1("Iterable, AsyncIterable or Stream","source",Ht)}else isIterable$2(Wt)||isReadableNodeStream$3(Wt)||isTransformStream$4(Wt)?Ht=Wt:Ht=Duplex$4.from(Wt);else if(typeof Wt=="function"){if(isTransformStream$4(Ht)){var Jt;Ht=makeAsyncIterable$1((Jt=Ht)===null||Jt===void 0?void 0:Jt.readable)}else Ht=makeAsyncIterable$1(Ht);if(Ht=Wt(Ht,{signal:At}),nr){if(!isIterable$2(Ht,!0))throw new ERR_INVALID_RETURN_VALUE$1("AsyncIterable",`transform[${Qt-1}]`,Ht)}else{var rr;PassThrough$2||(PassThrough$2=passthrough$1);const xr=new PassThrough$2({objectMode:!0}),Or=(rr=Ht)===null||rr===void 0?void 0:rr.then;if(typeof Or=="function")Kt++,Or.call(Ht,lr=>{Nt=lr,lr!=null&&xr.write(lr),vr&&xr.end(),process$4.nextTick(zt)},lr=>{xr.destroy(lr),process$4.nextTick(zt,lr)});else if(isIterable$2(Ht,!0))Kt++,pumpToNode$1(Ht,xr,zt,{end:vr});else if(isReadableStream$5(Ht)||isTransformStream$4(Ht)){const lr=Ht.readable||Ht;Kt++,pumpToNode$1(lr,xr,zt,{end:vr})}else throw new ERR_INVALID_RETURN_VALUE$1("AsyncIterable or Promise","destination",Ht);Ht=xr;const{destroy:Nr,cleanup:kr}=destroyer$4(Ht,!1,!0);qt.push(Nr),Ir&&Bt.push(kr)}}else if(isNodeStream$7(Wt)){if(isReadableNodeStream$3(Ht)){Kt+=2;const xr=pipe$1(Ht,Wt,zt,{end:vr});isReadable$5(Wt)&&Ir&&Bt.push(xr)}else if(isTransformStream$4(Ht)||isReadableStream$5(Ht)){const xr=Ht.readable||Ht;Kt++,pumpToNode$1(xr,Wt,zt,{end:vr})}else if(isIterable$2(Ht))Kt++,pumpToNode$1(Ht,Wt,zt,{end:vr});else throw new ERR_INVALID_ARG_TYPE$7("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ht);Ht=Wt}else if(isWebStream$4(Wt)){if(isReadableNodeStream$3(Ht))Kt++,pumpToWeb$1(makeAsyncIterable$1(Ht),Wt,zt,{end:vr});else if(isReadableStream$5(Ht)||isIterable$2(Ht))Kt++,pumpToWeb$1(Ht,Wt,zt,{end:vr});else if(isTransformStream$4(Ht))Kt++,pumpToWeb$1(Ht.readable,Wt,zt,{end:vr});else throw new ERR_INVALID_ARG_TYPE$7("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ht);Ht=Wt}else Ht=Duplex$4.from(Wt)}return(At!=null&&At.aborted||kt!=null&&kt.aborted)&&process$4.nextTick(jt),Ht}function pipe$1(_t,e,$t,{end:xt}){let At=!1;if(e.on("close",()=>{At||$t(new ERR_STREAM_PREMATURE_CLOSE$2)}),_t.pipe(e,{end:!1}),xt){let kt=function(){At=!0,e.end()};isReadableFinished$2(_t)?process$4.nextTick(kt):_t.once("end",kt)}else $t();return eos$4(_t,{readable:!0,writable:!1},kt=>{const Bt=_t._readableState;kt&&kt.code==="ERR_STREAM_PREMATURE_CLOSE"&&Bt&&Bt.ended&&!Bt.errored&&!Bt.errorEmitted?_t.once("end",$t).once("error",$t):$t(kt)}),eos$4(e,{readable:!1,writable:!0},$t)}var pipeline_1$1={pipelineImpl:pipelineImpl$1,pipeline:pipeline$3};const{pipeline:pipeline$2}=pipeline_1$1,Duplex$3=requireDuplex$1(),{destroyer:destroyer$3}=destroy_1$1,{isNodeStream:isNodeStream$6,isReadable:isReadable$4,isWritable:isWritable$5,isWebStream:isWebStream$3,isTransformStream:isTransformStream$3,isWritableStream:isWritableStream$3,isReadableStream:isReadableStream$4}=utils$1,{AbortError:AbortError$7,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$5,ERR_MISSING_ARGS:ERR_MISSING_ARGS$4}}=errors$2,eos$3=endOfStreamExports$1;var compose$3=function _t(...e){if(e.length===0)throw new ERR_MISSING_ARGS$4("streams");if(e.length===1)return Duplex$3.from(e[0]);const $t=[...e];if(typeof e[0]=="function"&&(e[0]=Duplex$3.from(e[0])),typeof e[e.length-1]=="function"){const zt=e.length-1;e[zt]=Duplex$3.from(e[zt])}for(let zt=0;zt<e.length;++zt)if(!(!isNodeStream$6(e[zt])&&!isWebStream$3(e[zt]))){if(zt<e.length-1&&!(isReadable$4(e[zt])||isReadableStream$4(e[zt])||isTransformStream$3(e[zt])))throw new ERR_INVALID_ARG_VALUE$5(`streams[${zt}]`,$t[zt],"must be readable");if(zt>0&&!(isWritable$5(e[zt])||isWritableStream$3(e[zt])||isTransformStream$3(e[zt])))throw new ERR_INVALID_ARG_VALUE$5(`streams[${zt}]`,$t[zt],"must be writable")}let xt,At,kt,Bt,jt;function Lt(zt){const Vt=Bt;Bt=null,Vt?Vt(zt):zt?jt.destroy(zt):!Kt&&!qt&&jt.destroy()}const Ut=e[0],Nt=pipeline$2(e,Lt),qt=!!(isWritable$5(Ut)||isWritableStream$3(Ut)||isTransformStream$3(Ut)),Kt=!!(isReadable$4(Nt)||isReadableStream$4(Nt)||isTransformStream$3(Nt));if(jt=new Duplex$3({writableObjectMode:!!(Ut!=null&&Ut.writableObjectMode),readableObjectMode:!!(Nt!=null&&Nt.readableObjectMode),writable:qt,readable:Kt}),qt){if(isNodeStream$6(Ut))jt._write=function(Vt,Ht,Jt){Ut.write(Vt,Ht)?Jt():xt=Jt},jt._final=function(Vt){Ut.end(),At=Vt},Ut.on("drain",function(){if(xt){const Vt=xt;xt=null,Vt()}});else if(isWebStream$3(Ut)){const Ht=(isTransformStream$3(Ut)?Ut.writable:Ut).getWriter();jt._write=async function(Jt,rr,Qt){try{await Ht.ready,Ht.write(Jt).catch(()=>{}),Qt()}catch(Wt){Qt(Wt)}},jt._final=async function(Jt){try{await Ht.ready,Ht.close().catch(()=>{}),At=Jt}catch(rr){Jt(rr)}}}const zt=isTransformStream$3(Nt)?Nt.readable:Nt;eos$3(zt,()=>{if(At){const Vt=At;At=null,Vt()}})}if(Kt){if(isNodeStream$6(Nt))Nt.on("readable",function(){if(kt){const zt=kt;kt=null,zt()}}),Nt.on("end",function(){jt.push(null)}),jt._read=function(){for(;;){const zt=Nt.read();if(zt===null){kt=jt._read;return}if(!jt.push(zt))return}};else if(isWebStream$3(Nt)){const Vt=(isTransformStream$3(Nt)?Nt.readable:Nt).getReader();jt._read=async function(){for(;;)try{const{value:Ht,done:Jt}=await Vt.read();if(!jt.push(Ht))return;if(Jt){jt.push(null);return}}catch{return}}}}return jt._destroy=function(zt,Vt){!zt&&Bt!==null&&(zt=new AbortError$7),kt=null,xt=null,At=null,Bt===null?Vt(zt):(Bt=Vt,isNodeStream$6(Nt)&&destroyer$3(Nt,zt))},jt};const AbortController$2=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$4,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$6,ERR_MISSING_ARGS:ERR_MISSING_ARGS$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$2},AbortError:AbortError$6}=errors$2,{validateAbortSignal:validateAbortSignal$4,validateInteger:validateInteger$2,validateObject:validateObject$4}=validators$1,kWeakHandler$1=primordials$1.Symbol("kWeak"),kResistStopPropagation=primordials$1.Symbol("kResistStopPropagation"),{finished:finished$2}=endOfStreamExports$1,staticCompose$1=compose$3,{addAbortSignalNoValidate:addAbortSignalNoValidate$1}=addAbortSignalExports$1,{isWritable:isWritable$4,isNodeStream:isNodeStream$5}=utils$1,{deprecate}=utilExports$1,{ArrayPrototypePush:ArrayPrototypePush$1,Boolean:Boolean$1,MathFloor:MathFloor$2,Number:Number$2,NumberIsNaN:NumberIsNaN$2,Promise:Promise$4,PromiseReject:PromiseReject$1,PromiseResolve,PromisePrototypeThen:PromisePrototypeThen$3,Symbol:Symbol$5}=primordials$1,kEmpty$1=Symbol$5("kEmpty"),kEof$1=Symbol$5("kEof");function compose$2(_t,e){if(e!=null&&validateObject$4(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal$4(e.signal,"options.signal"),isNodeStream$5(_t)&&!isWritable$4(_t))throw new ERR_INVALID_ARG_VALUE$4("stream",_t,"must be writable");const $t=staticCompose$1(this,_t);return e!=null&&e.signal&&addAbortSignalNoValidate$1(e.signal,$t),$t}function map$1(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$6("fn",["Function","AsyncFunction"],_t);e!=null&&validateObject$4(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal$4(e.signal,"options.signal");let $t=1;(e==null?void 0:e.concurrency)!=null&&($t=MathFloor$2(e.concurrency));let xt=$t-1;return(e==null?void 0:e.highWaterMark)!=null&&(xt=MathFloor$2(e.highWaterMark)),validateInteger$2($t,"options.concurrency",1),validateInteger$2(xt,"options.highWaterMark",0),xt+=$t,(async function*(){const kt=utilExports$1.AbortSignalAny([e==null?void 0:e.signal].filter(Boolean$1)),Bt=this,jt=[],Lt={signal:kt};let Ut,Nt,qt=!1,Kt=0;function zt(){qt=!0,Vt()}function Vt(){Kt-=1,Ht()}function Ht(){Nt&&!qt&&Kt<$t&&jt.length<xt&&(Nt(),Nt=null)}async function Jt(){try{for await(let rr of Bt){if(qt)return;if(kt.aborted)throw new AbortError$6;try{if(rr=_t(rr,Lt),rr===kEmpty$1)continue;rr=PromiseResolve(rr)}catch(Qt){rr=PromiseReject$1(Qt)}Kt+=1,PromisePrototypeThen$3(rr,Vt,zt),jt.push(rr),Ut&&(Ut(),Ut=null),!qt&&(jt.length>=xt||Kt>=$t)&&await new Promise$4(Qt=>{Nt=Qt})}jt.push(kEof$1)}catch(rr){const Qt=PromiseReject$1(rr);PromisePrototypeThen$3(Qt,Vt,zt),jt.push(Qt)}finally{qt=!0,Ut&&(Ut(),Ut=null)}}Jt();try{for(;;){for(;jt.length>0;){const rr=await jt[0];if(rr===kEof$1)return;if(kt.aborted)throw new AbortError$6;rr!==kEmpty$1&&(yield rr),jt.shift(),Ht()}await new Promise$4(rr=>{Ut=rr})}}finally{qt=!0,Nt&&(Nt(),Nt=null)}}).call(this)}function asIndexedPairs$1(_t=void 0){return _t!=null&&validateObject$4(_t,"options"),(_t==null?void 0:_t.signal)!=null&&validateAbortSignal$4(_t.signal,"options.signal"),(async function*(){let $t=0;for await(const At of this){var xt;if(_t!=null&&(xt=_t.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError$6({cause:_t.signal.reason});yield[$t++,At]}}).call(this)}async function some$1(_t,e=void 0){for await(const $t of filter$1.call(this,_t,e))return!0;return!1}async function every$1(_t,e=void 0){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$6("fn",["Function","AsyncFunction"],_t);return!await some$1.call(this,async(...$t)=>!await _t(...$t),e)}async function find$1(_t,e){for await(const $t of filter$1.call(this,_t,e))return $t}async function forEach$1(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$6("fn",["Function","AsyncFunction"],_t);async function $t(xt,At){return await _t(xt,At),kEmpty$1}for await(const xt of map$1.call(this,$t,e));}function filter$1(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$6("fn",["Function","AsyncFunction"],_t);async function $t(xt,At){return await _t(xt,At)?xt:kEmpty$1}return map$1.call(this,$t,e)}let ReduceAwareErrMissingArgs$1=class extends ERR_MISSING_ARGS$3{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function reduce$1(_t,e,$t){var xt;if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$6("reducer",["Function","AsyncFunction"],_t);$t!=null&&validateObject$4($t,"options"),($t==null?void 0:$t.signal)!=null&&validateAbortSignal$4($t.signal,"options.signal");let At=arguments.length>1;if($t!=null&&(xt=$t.signal)!==null&&xt!==void 0&&xt.aborted){const Ut=new AbortError$6(void 0,{cause:$t.signal.reason});throw this.once("error",()=>{}),await finished$2(this.destroy(Ut)),Ut}const kt=new AbortController$2,Bt=kt.signal;if($t!=null&&$t.signal){const Ut={once:!0,[kWeakHandler$1]:this,[kResistStopPropagation]:!0};$t.signal.addEventListener("abort",()=>kt.abort(),Ut)}let jt=!1;try{for await(const Ut of this){var Lt;if(jt=!0,$t!=null&&(Lt=$t.signal)!==null&&Lt!==void 0&&Lt.aborted)throw new AbortError$6;At?e=await _t(e,Ut,{signal:Bt}):(e=Ut,At=!0)}if(!jt&&!At)throw new ReduceAwareErrMissingArgs$1}finally{kt.abort()}return e}async function toArray$1(_t){_t!=null&&validateObject$4(_t,"options"),(_t==null?void 0:_t.signal)!=null&&validateAbortSignal$4(_t.signal,"options.signal");const e=[];for await(const xt of this){var $t;if(_t!=null&&($t=_t.signal)!==null&&$t!==void 0&&$t.aborted)throw new AbortError$6(void 0,{cause:_t.signal.reason});ArrayPrototypePush$1(e,xt)}return e}function flatMap$1(_t,e){const $t=map$1.call(this,_t,e);return(async function*(){for await(const At of $t)yield*At}).call(this)}function toIntegerOrInfinity$1(_t){if(_t=Number$2(_t),NumberIsNaN$2(_t))return 0;if(_t<0)throw new ERR_OUT_OF_RANGE$2("number",">= 0",_t);return _t}function drop$1(_t,e=void 0){return e!=null&&validateObject$4(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal$4(e.signal,"options.signal"),_t=toIntegerOrInfinity$1(_t),(async function*(){var xt;if(e!=null&&(xt=e.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError$6;for await(const kt of this){var At;if(e!=null&&(At=e.signal)!==null&&At!==void 0&&At.aborted)throw new AbortError$6;_t--<=0&&(yield kt)}}).call(this)}function take$1(_t,e=void 0){return e!=null&&validateObject$4(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal$4(e.signal,"options.signal"),_t=toIntegerOrInfinity$1(_t),(async function*(){var xt;if(e!=null&&(xt=e.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError$6;for await(const kt of this){var At;if(e!=null&&(At=e.signal)!==null&&At!==void 0&&At.aborted)throw new AbortError$6;if(_t-- >0&&(yield kt),_t<=0)return}}).call(this)}operators$1.streamReturningOperators={asIndexedPairs:deprecate(asIndexedPairs$1,"readable.asIndexedPairs will be removed in a future version."),drop:drop$1,filter:filter$1,flatMap:flatMap$1,map:map$1,take:take$1,compose:compose$2};operators$1.promiseReturningOperators={every:every$1,forEach:forEach$1,reduce:reduce$1,toArray:toArray$1,some:some$1,find:find$1};var promises$1,hasRequiredPromises$1;function requirePromises$1(){if(hasRequiredPromises$1)return promises$1;hasRequiredPromises$1=1;const{ArrayPrototypePop:_t,Promise:e}=primordials$1,{isIterable:$t,isNodeStream:xt,isWebStream:At}=utils$1,{pipelineImpl:kt}=pipeline_1$1,{finished:Bt}=endOfStreamExports$1;requireStream$1();function jt(...Lt){return new e((Ut,Nt)=>{let qt,Kt;const zt=Lt[Lt.length-1];if(zt&&typeof zt=="object"&&!xt(zt)&&!$t(zt)&&!At(zt)){const Vt=_t(Lt);qt=Vt.signal,Kt=Vt.end}kt(Lt,(Vt,Ht)=>{Vt?Nt(Vt):Ut(Ht)},{signal:qt,end:Kt})})}return promises$1={finished:Bt,pipeline:jt},promises$1}var hasRequiredStream$1;function requireStream$1(){if(hasRequiredStream$1)return stream$1.exports;hasRequiredStream$1=1;const{Buffer:_t}=buffer$2,{ObjectDefineProperty:e,ObjectKeys:$t,ReflectApply:xt}=primordials$1,{promisify:{custom:At}}=utilExports$1,{streamReturningOperators:kt,promiseReturningOperators:Bt}=operators$1,{codes:{ERR_ILLEGAL_CONSTRUCTOR:jt}}=errors$2,Lt=compose$3,{setDefaultHighWaterMark:Ut,getDefaultHighWaterMark:Nt}=state$1,{pipeline:qt}=pipeline_1$1,{destroyer:Kt}=destroy_1$1,zt=endOfStreamExports$1,Vt=requirePromises$1(),Ht=utils$1,Jt=stream$1.exports=legacy$1.Stream;Jt.isDestroyed=Ht.isDestroyed,Jt.isDisturbed=Ht.isDisturbed,Jt.isErrored=Ht.isErrored,Jt.isReadable=Ht.isReadable,Jt.isWritable=Ht.isWritable,Jt.Readable=requireReadable$1();for(const Wt of $t(kt)){let yr=function(...vr){if(new.target)throw jt();return Jt.Readable.from(xt(nr,this,vr))};var Qt=yr;const nr=kt[Wt];e(yr,"name",{__proto__:null,value:nr.name}),e(yr,"length",{__proto__:null,value:nr.length}),e(Jt.Readable.prototype,Wt,{__proto__:null,value:yr,enumerable:!1,configurable:!0,writable:!0})}for(const Wt of $t(Bt)){let yr=function(...Ir){if(new.target)throw jt();return xt(nr,this,Ir)};var Qt=yr;const nr=Bt[Wt];e(yr,"name",{__proto__:null,value:nr.name}),e(yr,"length",{__proto__:null,value:nr.length}),e(Jt.Readable.prototype,Wt,{__proto__:null,value:yr,enumerable:!1,configurable:!0,writable:!0})}Jt.Writable=requireWritable$1(),Jt.Duplex=requireDuplex$1(),Jt.Transform=transform$1,Jt.PassThrough=passthrough$1,Jt.pipeline=qt;const{addAbortSignal:rr}=addAbortSignalExports$1;return Jt.addAbortSignal=rr,Jt.finished=zt,Jt.destroy=Kt,Jt.compose=Lt,Jt.setDefaultHighWaterMark=Ut,Jt.getDefaultHighWaterMark=Nt,e(Jt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Vt}}),e(qt,At,{__proto__:null,enumerable:!0,get(){return Vt.pipeline}}),e(zt,At,{__proto__:null,enumerable:!0,get(){return Vt.finished}}),Jt.Stream=Jt,Jt._isUint8Array=function(nr){return nr instanceof Uint8Array},Jt._uint8ArrayToBuffer=function(nr){return _t.from(nr.buffer,nr.byteOffset,nr.byteLength)},stream$1.exports}(function(_t){const e=requireStream$1(),$t=requirePromises$1(),xt=e.Readable.destroy;_t.exports=e.Readable,_t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,_t.exports._isUint8Array=e._isUint8Array,_t.exports.isDisturbed=e.isDisturbed,_t.exports.isErrored=e.isErrored,_t.exports.isReadable=e.isReadable,_t.exports.Readable=e.Readable,_t.exports.Writable=e.Writable,_t.exports.Duplex=e.Duplex,_t.exports.Transform=e.Transform,_t.exports.PassThrough=e.PassThrough,_t.exports.addAbortSignal=e.addAbortSignal,_t.exports.finished=e.finished,_t.exports.destroy=e.destroy,_t.exports.destroy=xt,_t.exports.pipeline=e.pipeline,_t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return $t}}),_t.exports.Stream=e.Stream,_t.exports.default=_t.exports})(browser$2);var browserExports=browser$2.exports,__awaiter$J=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};dist.ECIES_CONFIG.isEphemeralKeyCompressed=!0;class Encryption{static aes256CtrEncrypt(e,$t,xt){return __awaiter$J(this,void 0,void 0,function*(){const At=cryptoBrowserifyExports.createCipheriv("aes-256-ctr",e,$t),kt=new browserExports.Readable({read(){}});return xt.on("data",Bt=>{const jt=At.update(Bt);kt.push(jt)}),xt.on("end",()=>{const Bt=At.final();kt.push(Bt),kt.push(null)}),xt.on("error",Bt=>{kt.emit("error",Bt)}),kt})}static aes256CtrDecrypt(e,$t,xt){return __awaiter$J(this,void 0,void 0,function*(){const At=cryptoBrowserifyExports.createDecipheriv("aes-256-ctr",e,$t),kt=new browserExports.Readable({read(){}});return xt.on("data",Bt=>{const jt=At.update(Bt);kt.push(jt)}),xt.on("end",()=>{const Bt=At.final();kt.push(Bt),kt.push(null)}),xt.on("error",Bt=>{kt.emit("error",Bt)}),kt})}static eciesSecp256k1Encrypt(e,$t){return __awaiter$J(this,void 0,void 0,function*(){const xt=buffer$2.Buffer.from(e),At=buffer$2.Buffer.from($t),kt=dist.encrypt(xt,At);let Bt=0,jt=Encryption.isEphemeralKeyCompressed?33:65;const Lt=kt.subarray(Bt,jt);Bt=jt,jt+=dist.ECIES_CONFIG.symmetricNonceLength;const Ut=kt.subarray(Bt,jt);Bt=jt,jt+=16;const Nt=kt.subarray(Bt,jt);return{ciphertext:kt.subarray(jt),ephemeralPublicKey:Lt,initializationVector:Ut,messageAuthenticationCode:Nt}})}static eciesSecp256k1Decrypt(e){return __awaiter$J(this,void 0,void 0,function*(){const $t=buffer$2.Buffer.from(e.privateKey),xt=buffer$2.Buffer.concat([e.ephemeralPublicKey,e.initializationVector,e.messageAuthenticationCode,e.ciphertext]);return dist.decrypt($t,xt)})}static get isEphemeralKeyCompressed(){return dist.ECIES_CONFIG.isEphemeralKeyCompressed}}var EncryptionAlgorithm;(function(_t){_t.Aes256Ctr="A256CTR",_t.EciesSecp256k1="ECIES-ES256K"})(EncryptionAlgorithm||(EncryptionAlgorithm={}));var __awaiter$I=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class GeneralJwsBuilder{constructor(e){this.jws=e}static create(e,$t=[]){return __awaiter$I(this,void 0,void 0,function*(){const xt={payload:Encoder$4.bytesToBase64Url(e),signatures:[]},At=new GeneralJwsBuilder(xt);for(const kt of $t)yield At.addSignature(kt);return At})}addSignature(e){return __awaiter$I(this,void 0,void 0,function*(){const $t={kid:e.keyId,alg:e.algorithm},xt=JSON.stringify($t),At=Encoder$4.stringToBase64Url(xt),kt=`${At}.${this.jws.payload}`,Bt=Encoder$4.stringToBytes(kt),jt=yield e.sign(Bt),Lt=Encoder$4.bytesToBase64Url(jt);this.jws.signatures.push({protected:At,signature:Lt})})}getJws(){return this.jws}}const cr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function getWebcryptoSubtle(){if(cr&&typeof cr.subtle=="object"&&cr.subtle!=null)return cr.subtle;throw new Error("crypto.subtle must be defined")}var __awaiter$H=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},KeyDerivationScheme;(function(_t){_t.DataFormats="dataFormats",_t.ProtocolContext="protocolContext",_t.ProtocolPath="protocolPath",_t.Schemas="schemas"})(KeyDerivationScheme||(KeyDerivationScheme={}));class HdKey{static derivePrivateKey(e,$t){var xt;return __awaiter$H(this,void 0,void 0,function*(){const At=Secp256k1$1.privateJwkToBytes(e.derivedPrivateKey),kt=(xt=e.derivationPath)!==null&&xt!==void 0?xt:[],Bt=yield HdKey.derivePrivateKeyBytes(At,$t),jt=yield Secp256k1$1.privateKeyToJwk(Bt);return{rootKeyId:e.rootKeyId,derivationScheme:e.derivationScheme,derivationPath:[...kt,...$t],derivedPrivateKey:jt}})}static derivePublicKey(e,$t){return __awaiter$H(this,void 0,void 0,function*(){const xt=yield HdKey.derivePrivateKey(e,$t);return yield Secp256k1$1.getPublicJwk(xt.derivedPrivateKey)})}static derivePrivateKeyBytes(e,$t){return __awaiter$H(this,void 0,void 0,function*(){HdKey.validateKeyDerivationPath($t);let xt=e;for(const At of $t){const kt=Encoder$4.stringToBytes(At);xt=yield HdKey.deriveKeyUsingHkdf({hashAlgorithm:"SHA-256",initialKeyMaterial:xt,info:kt,keyLengthInBytes:32})}return xt})}static deriveKeyUsingHkdf(e){return __awaiter$H(this,void 0,void 0,function*(){const{hashAlgorithm:$t,initialKeyMaterial:xt,info:At,keyLengthInBytes:kt}=e,jt=yield getWebcryptoSubtle().importKey("raw",xt,{name:"HKDF"},!1,["deriveBits"]),Lt=yield crypto.subtle.deriveBits({name:"HKDF",hash:$t,salt:new Uint8Array(0),info:At},jt,kt*8);return new Uint8Array(Lt)})}static validateKeyDerivationPath(e){if(e.includes(""))throw new DwnError(DwnErrorCode.HdKeyDerivationPathInvalid,`Invalid key derivation path: ${e}`)}}function lexicographicalCompare(_t,e){return _t>e?1:_t<e?-1:0}function isEmptyObject(_t){if(typeof _t!="object")return!1;for(const e in _t)return!1;return!0}function removeUndefinedProperties$1(_t){Object.keys(_t).forEach(e=>{_t[e]===void 0?delete _t[e]:typeof _t[e]=="object"&&removeUndefinedProperties$1(_t[e])})}var __awaiter$G=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Message{static getAuthor(e){if(e.authorization===void 0)return;let $t;return e.authorization.authorDelegatedGrant!==void 0?$t=Message.getSigner(e.authorization.authorDelegatedGrant):$t=Message.getSigner(e),$t}static validateJsonSchema(e){const $t=e.descriptor.interface,xt=e.descriptor.method,At=$t+xt;validateJsonSchema(At,e)}static getSigner(e){return e.authorization===void 0?void 0:Jws.getSignerDid(e.authorization.signature.signatures[0])}static getCid(e){return __awaiter$G(this,void 0,void 0,function*(){const $t=Object.assign({},e);return $t.encodedData&&delete $t.encodedData,yield Cid.computeCid($t)})}static compareCid(e,$t){return __awaiter$G(this,void 0,void 0,function*(){const xt=yield Message.getCid(e),At=yield Message.getCid($t);return lexicographicalCompare(xt,At)})}static createAuthorization(e){return __awaiter$G(this,void 0,void 0,function*(){const{descriptor:$t,signer:xt,delegatedGrant:At,permissionGrantId:kt,protocolRole:Bt}=e;let jt;At!==void 0&&(jt=yield Message.getCid(At));const Ut={signature:yield Message.createSignature($t,xt,{delegatedGrantId:jt,permissionGrantId:kt,protocolRole:Bt})};return At!==void 0&&(Ut.authorDelegatedGrant=At),Ut})}static createSignature(e,$t,xt){return __awaiter$G(this,void 0,void 0,function*(){const At=yield Cid.computeCid(e),kt=Object.assign({descriptorCid:At},xt);removeUndefinedProperties$1(kt);const Bt=Encoder$4.objectToBytes(kt);return(yield GeneralJwsBuilder.create(Bt,[$t])).getJws()})}static getNewestMessage(e){return __awaiter$G(this,void 0,void 0,function*(){let $t;for(const xt of e)($t===void 0||(yield Message.isNewer(xt,$t)))&&($t=xt);return $t})}static getOldestMessage(e){return __awaiter$G(this,void 0,void 0,function*(){let $t;for(const xt of e)($t===void 0||(yield Message.isOlder(xt,$t)))&&($t=xt);return $t})}static isNewer(e,$t){return __awaiter$G(this,void 0,void 0,function*(){return(yield Message.compareMessageTimestamp(e,$t))>0})}static isOlder(e,$t){return __awaiter$G(this,void 0,void 0,function*(){return(yield Message.compareMessageTimestamp(e,$t))<0})}static isSignedByAuthorDelegate(e){var $t;return(($t=e.authorization)===null||$t===void 0?void 0:$t.authorDelegatedGrant)!==void 0}static isSignedByOwnerDelegate(e){var $t;return(($t=e.authorization)===null||$t===void 0?void 0:$t.ownerDelegatedGrant)!==void 0}static compareMessageTimestamp(e,$t){return __awaiter$G(this,void 0,void 0,function*(){return e.descriptor.messageTimestamp>$t.descriptor.messageTimestamp?1:e.descriptor.messageTimestamp<$t.descriptor.messageTimestamp?-1:Message.compareCid(e,$t)})}static validateSignatureStructure(e,$t,xt="GenericSignaturePayload"){return __awaiter$G(this,void 0,void 0,function*(){if(e.signatures.length!==1)throw new DwnError(DwnErrorCode.AuthenticationMoreThanOneSignatureNotSupported,"expected no more than 1 signature for authorization purpose");const At=Jws.decodePlainObjectPayload(e);validateJsonSchema(xt,At);const{descriptorCid:kt}=At,Bt=yield Cid.computeCid($t);if(kt!==Bt)throw new DwnError(DwnErrorCode.AuthenticateDescriptorCidMismatch,`provided descriptorCid ${kt} does not match expected CID ${Bt}`);return At})}}var __awaiter$F=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};let PermissionGrant$1=class gi{static parse(e){return __awaiter$F(this,void 0,void 0,function*(){return new gi(e)})}constructor(e){this.id=e.recordId,this.grantor=Message.getSigner(e),this.grantee=e.descriptor.recipient,this.dateGranted=e.descriptor.dateCreated;const $t=e.encodedData,xt=Encoder$4.base64UrlToObject($t);this.dateExpires=xt.dateExpires,this.delegated=xt.delegated,this.description=xt.description,this.requestId=xt.requestId,this.scope=xt.scope,this.conditions=xt.conditions}};var DateSort;(function(_t){_t.CreatedAscending="createdAscending",_t.CreatedDescending="createdDescending",_t.PublishedAscending="publishedAscending",_t.PublishedDescending="publishedDescending"})(DateSort||(DateSort={}));class FilterUtility{static matchAnyFilter(e,$t){if($t.length===0)return!0;for(const xt of $t)if(this.matchFilter(e,xt))return!0;return!1}static matchFilter(e,$t){for(const xt in $t){const At=$t[xt],kt=e[xt];if(kt===void 0||!(Array.isArray(kt)?this.matchAnyIndexValue(At,kt):this.matchIndexValue(At,kt)))return!1}return!0}static matchAnyIndexValue(e,$t){for(const xt of $t)if(this.matchIndexValue(e,xt))return!0;return!1}static matchIndexValue(e,$t){if(typeof e=="object"){if(Array.isArray(e)){if(this.matchOneOf(e,$t))return!0}else if(this.matchRange(e,$t))return!0}else if($t===e)return!0;return!1}static matchOneOf(e,$t){for(const xt of e)if($t===xt)return!0;return!1}static matchRange(e,$t){return!(e.lt!==void 0&&$t>=e.lt||e.lte!==void 0&&$t>e.lte||e.gt!==void 0&&$t<=e.gt||e.gte!==void 0&&$t<e.gte)}static isEqualFilter(e){return typeof e!="object"}static isRangeFilter(e){return typeof e=="object"&&!Array.isArray(e)?"gt"in e||"lt"in e||"lte"in e||"gte"in e:!1}static isOneOfFilter(e){return!!(typeof e=="object"&&Array.isArray(e))}static convertRangeCriterion(e){let $t;return e.to!==void 0&&e.from!==void 0?$t={gte:e.from,lt:e.to}:e.to!==void 0?$t={lt:e.to}:e.from!==void 0&&($t={gte:e.from}),$t}static constructPrefixFilterAsRangeFilter(e){return{gte:e,lt:e+"￿"}}}var DwnInterfaceName;(function(_t){_t.Messages="Messages",_t.Protocols="Protocols",_t.Records="Records"})(DwnInterfaceName||(DwnInterfaceName={}));var DwnMethodName;(function(_t){_t.Configure="Configure",_t.Query="Query",_t.Read="Read",_t.Write="Write",_t.Delete="Delete",_t.Subscribe="Subscribe"})(DwnMethodName||(DwnMethodName={}));function validateProtocolUrlNormalized(_t){let e;try{e=normalizeProtocolUrl(_t)}catch{e=void 0}if(_t!==e)throw new DwnError(DwnErrorCode.UrlProtocolNotNormalized,`Protocol URI ${_t} must be normalized.`)}function normalizeProtocolUrl(_t){return normalizeUrl(_t)}function validateSchemaUrlNormalized(_t){let e;try{e=normalizeSchemaUrl(_t)}catch{e=void 0}if(_t!==e)throw new DwnError(DwnErrorCode.UrlSchemaNotNormalized,`Schema URI ${_t} must be normalized.`)}function normalizeSchemaUrl(_t){return normalizeUrl(_t)}function normalizeUrl(_t){let e;/^[^:]+:(\/{2})?[^\/].*/.test(_t)?e=_t:e=`http://${_t}`;try{const $t=new URL(e);return $t.search="",$t.hash="",removeTrailingSlash($t.href)}catch{throw new DwnError(DwnErrorCode.UrlProtocolNotNormalizable,"Could not normalize protocol URI")}}function removeTrailingSlash(_t){return _t.endsWith("/")?_t.slice(0,-1):_t}var __awaiter$E=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$7=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class Records{static isRecordsWrite(e){return e.descriptor.interface===DwnInterfaceName.Records&&e.descriptor.method===DwnMethodName.Write}static decrypt(e,$t,xt){return __awaiter$E(this,void 0,void 0,function*(){const{encryption:At}=e,kt=At.keyEncryption.find(Ht=>Ht.rootKeyId===$t.rootKeyId&&Ht.derivationScheme===$t.derivationScheme);if(kt===void 0)throw new DwnError(DwnErrorCode.RecordsDecryptNoMatchingKeyEncryptedFound,`Unable to find a symmetric key encrypted using key         with ID '${$t.rootKeyId}' and '${$t.derivationScheme}' derivation scheme.`);const Bt=Records.constructKeyDerivationPath(kt.derivationScheme,e),jt=yield Records.derivePrivateKey($t,Bt),Lt=Encoder$4.base64UrlToBytes(kt.encryptedKey),Ut=Secp256k1$1.publicJwkToBytes(kt.ephemeralPublicKey),Nt=Encoder$4.base64UrlToBytes(kt.initializationVector),qt=Encoder$4.base64UrlToBytes(kt.messageAuthenticationCode),Kt=yield Encryption.eciesSecp256k1Decrypt({ciphertext:Lt,ephemeralPublicKey:Ut,initializationVector:Nt,messageAuthenticationCode:qt,privateKey:jt}),zt=Encoder$4.base64UrlToBytes(At.initializationVector);return yield Encryption.aes256CtrDecrypt(Kt,zt,xt)})}static constructKeyDerivationPath(e,$t){const xt=$t.descriptor,At=$t.contextId;let kt;return e===KeyDerivationScheme.DataFormats?kt=Records.constructKeyDerivationPathUsingDataFormatsScheme(xt.schema,xt.dataFormat):e===KeyDerivationScheme.ProtocolPath?kt=Records.constructKeyDerivationPathUsingProtocolPathScheme(xt):e===KeyDerivationScheme.ProtocolContext?kt=Records.constructKeyDerivationPathUsingProtocolContextScheme(At):kt=Records.constructKeyDerivationPathUsingSchemasScheme(xt.schema),kt}static constructKeyDerivationPathUsingDataFormatsScheme(e,$t){return e!==void 0?[KeyDerivationScheme.DataFormats,e,$t]:[KeyDerivationScheme.DataFormats,$t]}static constructKeyDerivationPathUsingProtocolPathScheme(e){if(e.protocol===void 0)throw new DwnError(DwnErrorCode.RecordsProtocolPathDerivationSchemeMissingProtocol,"Unable to construct key derivation path using `protocols` scheme because `protocol` is missing.");const $t=e.protocolPath.split("/");return[KeyDerivationScheme.ProtocolPath,e.protocol,...$t]}static constructKeyDerivationPathUsingProtocolContextScheme(e){if(e===void 0)throw new DwnError(DwnErrorCode.RecordsProtocolContextDerivationSchemeMissingContextId,"Unable to construct key derivation path using `protocolContext` scheme because `contextId` is missing.");const $t=e.split("/")[0];return[KeyDerivationScheme.ProtocolContext,$t]}static constructKeyDerivationPathUsingSchemasScheme(e){if(e===void 0)throw new DwnError(DwnErrorCode.RecordsSchemasDerivationSchemeMissingSchema,"Unable to construct key derivation path using `schemas` scheme because `schema` is missing.");return[KeyDerivationScheme.Schemas,e]}static derivePrivateKey(e,$t){var xt;return __awaiter$E(this,void 0,void 0,function*(){if(e.derivedPrivateKey.crv!=="secp256k1")throw new DwnError(DwnErrorCode.RecordsDerivePrivateKeyUnSupportedCurve,`Curve ${e.derivedPrivateKey.crv} is not supported.`);const At=(xt=e.derivationPath)!==null&&xt!==void 0?xt:[];Records.validateAncestorKeyAndDescentKeyDerivationPathsMatch(At,$t);const kt=$t.slice(At.length),Bt=Secp256k1$1.privateJwkToBytes(e.derivedPrivateKey);return yield HdKey.derivePrivateKeyBytes(Bt,kt)})}static validateAncestorKeyAndDescentKeyDerivationPathsMatch(e,$t){for(let xt=0;xt<e.length;xt++){const At=e[xt],kt=$t[xt];if(At!==kt)throw new DwnError(DwnErrorCode.RecordsInvalidAncestorKeyDerivationSegment,`Ancestor key derivation segment '${At}' mismatches against the descendant key derivation segment '${kt}'.`)}}static getParentContextFromOfContextId(e){if(e===void 0)return;const $t=e.lastIndexOf("/");return $t===-1?"":e.substring(0,$t)}static normalizeFilter(e){let $t;e.protocol===void 0?$t=void 0:$t=normalizeProtocolUrl(e.protocol);let xt;e.schema===void 0?xt=void 0:xt=normalizeSchemaUrl(e.schema);const At=Object.assign(Object.assign({},e),{protocol:$t,schema:xt});return removeUndefinedProperties$1(At),At}static isStartsWithFilter(e){return typeof e=="object"&&"startsWith"in e&&typeof e.startsWith=="string"}static buildTagIndexes(e){const $t={};for(const xt in e){const At=e[xt];$t[`tag.${xt}`]=At}return $t}static convertTagsFilter(e){const $t={};for(const xt in e){const At=e[xt];$t[`tag.${xt}`]=this.isStartsWithFilter(At)?FilterUtility.constructPrefixFilterAsRangeFilter(At.startsWith):At}return $t}static convertFilter(e,$t){const{tags:xt}=e,At=__rest$7(e,["tags"]);let kt={};xt!==void 0&&(kt=Object.assign({},this.convertTagsFilter(xt)));const Bt=Object.assign(Object.assign({},At),kt),{dateCreated:jt,datePublished:Lt,dateUpdated:Ut,contextId:Nt}=e,qt=jt?FilterUtility.convertRangeCriterion(jt):void 0;qt&&(Bt.dateCreated=qt);const Kt=Lt?FilterUtility.convertRangeCriterion(Lt):void 0;Kt&&(Bt.published=!0,Bt.datePublished=Kt),Bt.published!==!0&&($t===DateSort.PublishedAscending||$t===DateSort.PublishedDescending)&&(Bt.published=!0);const zt=Ut?FilterUtility.convertRangeCriterion(Ut):void 0;zt&&(Bt.messageTimestamp=zt,delete Bt.dateUpdated);const Vt=Nt?FilterUtility.constructPrefixFilterAsRangeFilter(Nt):void 0;return Vt&&(Bt.contextId=Vt),Array.isArray(Bt.author)&&Bt.author.length===0&&delete Bt.author,Array.isArray(Bt.recipient)&&Bt.recipient.length===0&&delete Bt.recipient,Bt}static validateDelegatedGrantReferentialIntegrity(e,$t,xt){var At,kt;return __awaiter$E(this,void 0,void 0,function*(){const Bt=($t==null?void 0:$t.delegatedGrantId)!==void 0,jt=((At=e.authorization)===null||At===void 0?void 0:At.authorDelegatedGrant)!==void 0;if(Bt!==jt)throw new DwnError(DwnErrorCode.RecordsAuthorDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in message (author) signature and authorDelegatedGrant must both exist or be undefined.          delegatedGrantId in message (author) signature defined: ${Bt},          authorDelegatedGrant defined: ${jt}`);if(jt){const Nt=e.authorization.authorDelegatedGrant;if((yield PermissionGrant$1.parse(Nt)).delegated!==!0)throw new DwnError(DwnErrorCode.RecordsAuthorDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const Kt=Nt.descriptor.recipient,zt=Message.getSigner(e);if(Kt!==zt)throw new DwnError(DwnErrorCode.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${Kt} in author delegated grant must be the same as the signer ${zt} of the message signature.`);const Vt=yield Message.getCid(Nt);if(Vt!==$t.delegatedGrantId)throw new DwnError(DwnErrorCode.RecordsAuthorDelegatedGrantCidMismatch,`CID of the author delegated grant ${Vt} must be the same as           the delegatedGrantId ${$t.delegatedGrantId} in the message signature.`)}const Lt=(xt==null?void 0:xt.delegatedGrantId)!==void 0,Ut=((kt=e.authorization)===null||kt===void 0?void 0:kt.ownerDelegatedGrant)!==void 0;if(Lt!==Ut)throw new DwnError(DwnErrorCode.RecordsOwnerDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in owner signature and ownerDelegatedGrant must both exist or be undefined.          delegatedGrantId in owner signature defined: ${Lt},          ownerDelegatedGrant defined: ${Ut}`);if(Ut){const Nt=e.authorization.ownerDelegatedGrant;if((yield PermissionGrant$1.parse(Nt)).delegated!==!0)throw new DwnError(DwnErrorCode.RecordsOwnerDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const Kt=Nt.descriptor.recipient,zt=Jws.getSignerDid(e.authorization.ownerSignature.signatures[0]);if(Kt!==zt)throw new DwnError(DwnErrorCode.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${Kt} in owner delegated grant must be the same as the signer ${zt} of the owner signature.`);const Vt=yield Message.getCid(Nt);if(Vt!==xt.delegatedGrantId)throw new DwnError(DwnErrorCode.RecordsOwnerDelegatedGrantCidMismatch,`CID of the owner delegated grant ${Vt} must be the same as           the delegatedGrantId ${xt.delegatedGrantId} in the owner signature.`)}})}static shouldProtocolAuthorize(e){return e.protocolRole!==void 0}static filterIncludesPublishedRecords(e){return e.datePublished!==void 0||e.published!==!1}static filterIncludesUnpublishedRecords(e){return e.datePublished===void 0&&e.published===void 0?!0:e.published===!1}static canPerformDeleteAgainstRecord(e,$t){if($t===void 0)return!1;if($t.descriptor.method===DwnMethodName.Delete){if(e.descriptor.prune!==!0)return!1;if($t.descriptor.prune===!0)return!1}return!0}static shouldBuildUnpublishedRecipientFilter(e,$t){const{recipient:xt}=e;return Array.isArray(xt)?xt.length===0||xt.includes($t):xt===void 0||xt===$t}static shouldBuildUnpublishedAuthorFilter(e,$t){const{author:xt}=e;return Array.isArray(xt)?xt.length===0||xt.includes($t):xt===void 0||xt===$t}}var __awaiter$D=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class GrantAuthorization{static performBaseValidation(e){return __awaiter$D(this,void 0,void 0,function*(){const{incomingMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}=e,jt=$t.descriptor;GrantAuthorization.verifyExpectedGrantorAndGrantee(xt,At,kt);const Lt=xt;yield GrantAuthorization.verifyGrantActive(Lt,jt.messageTimestamp,kt,Bt),yield GrantAuthorization.verifyGrantScopeInterfaceAndMethod(jt.interface,jt.method,kt)})}static verifyExpectedGrantorAndGrantee(e,$t,xt){const At=xt.grantee;if($t!==At)throw new DwnError(DwnErrorCode.GrantAuthorizationNotGrantedToAuthor,`Permission grant is granted to ${At}, but need to be granted to ${$t}`);const kt=xt.grantor;if(e!==kt)throw new DwnError(DwnErrorCode.GrantAuthorizationNotGrantedForTenant,`Permission grant is granted by ${kt}, but need to be granted by ${e}`)}static verifyGrantActive(e,$t,xt,At){return __awaiter$D(this,void 0,void 0,function*(){if($t<xt.dateGranted)throw new DwnError(DwnErrorCode.GrantAuthorizationGrantNotYetActive,"The message has a timestamp before the associated permission grant becomes active");if($t>=xt.dateExpires)throw new DwnError(DwnErrorCode.GrantAuthorizationGrantExpired,"The message has timestamp after the expiry of the associated permission grant");const kt={parentId:xt.id,protocolPath:"grant/revocation",isLatestBaseState:!0},{messages:Bt}=yield At.query(e,[kt]),jt=yield Message.getOldestMessage(Bt);if(jt!==void 0&&jt.descriptor.messageTimestamp<=$t)throw new DwnError(DwnErrorCode.GrantAuthorizationGrantRevoked,`Permission grant with CID ${xt.id} has been revoked`)})}static verifyGrantScopeInterfaceAndMethod(e,$t,xt){return __awaiter$D(this,void 0,void 0,function*(){if(e!==xt.scope.interface)throw new DwnError(DwnErrorCode.GrantAuthorizationInterfaceMismatch,`DWN Interface of incoming message is outside the scope of permission grant with ID ${xt.id}`);if($t!==xt.scope.method)throw new DwnError(DwnErrorCode.GrantAuthorizationMethodMismatch,`DWN Method of incoming message is outside the scope of permission grant with ID ${xt.id}`)})}}var PermissionConditionPublication;(function(_t){_t.Required="Required",_t.Prohibited="Prohibited"})(PermissionConditionPublication||(PermissionConditionPublication={}));var __awaiter$C=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class RecordsGrantAuthorization{static authorizeWrite(e){return __awaiter$C(this,void 0,void 0,function*(){const{recordsWriteMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}),RecordsGrantAuthorization.verifyScope($t,kt.scope),RecordsGrantAuthorization.verifyConditions($t,kt.conditions)})}static authorizeRead(e){return __awaiter$C(this,void 0,void 0,function*(){const{recordsReadMessage:$t,recordsWriteMessageToBeRead:xt,expectedGrantor:At,expectedGrantee:kt,permissionGrant:Bt,messageStore:jt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:$t,expectedGrantor:At,expectedGrantee:kt,permissionGrant:Bt,messageStore:jt}),RecordsGrantAuthorization.verifyScope(xt,Bt.scope)})}static authorizeQueryOrSubscribe(e){return __awaiter$C(this,void 0,void 0,function*(){const{incomingMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt});const Lt=kt.scope.protocol,Ut=$t.descriptor.filter.protocol;if(Lt!==void 0&&Ut!==Lt)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch,`Grant protocol scope ${Lt} does not match protocol in message ${Ut}`)})}static authorizeDelete(e){return __awaiter$C(this,void 0,void 0,function*(){const{recordsDeleteMessage:$t,recordsWriteToDelete:xt,expectedGrantor:At,expectedGrantee:kt,permissionGrant:Bt,messageStore:jt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:$t,expectedGrantor:At,expectedGrantee:kt,permissionGrant:Bt,messageStore:jt});const Ut=Bt.scope.protocol,Nt=xt.descriptor.protocol;if(Ut!==void 0&&Nt!==Ut)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationDeleteProtocolScopeMismatch,`Grant protocol scope ${Ut} does not match protocol in record to delete ${Nt}`)})}static verifyScope(e,$t){if($t.protocol!==e.descriptor.protocol)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the record");if($t.contextId!==void 0&&(e.contextId===void 0||!e.contextId.startsWith($t.contextId)))throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationScopeContextIdMismatch,"Grant scope specifies different contextId than what appears in the record");if($t.protocolPath!==void 0&&$t.protocolPath!==e.descriptor.protocolPath)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationScopeProtocolPathMismatch,"Grant scope specifies different protocolPath than what appears in the record")}static verifyConditions(e,$t){if(($t==null?void 0:$t.publication)===PermissionConditionPublication.Required&&!e.descriptor.published)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationConditionPublicationRequired,"Permission grant requires message to be published");if(($t==null?void 0:$t.publication)===PermissionConditionPublication.Prohibited&&e.descriptor.published)throw new DwnError(DwnErrorCode.RecordsGrantAuthorizationConditionPublicationProhibited,"Permission grant prohibits message from being published")}}class JSBI extends Array{constructor(e,$t){if(super(e),this.sign=$t,Object.setPrototypeOf(this,JSBI.prototype),e>JSBI.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var $t=Math.floor,xt=Number.isFinite;if(typeof e=="number"){if(e===0)return JSBI.__zero();if(JSBI.__isOneDigitInt(e))return 0>e?JSBI.__oneDigit(-e,!0):JSBI.__oneDigit(e,!1);if(!xt(e)||$t(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return JSBI.__fromDouble(e)}if(typeof e=="string"){const At=JSBI.__fromString(e);if(At===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return At}if(typeof e=="boolean")return e===!0?JSBI.__oneDigit(1,!1):JSBI.__zero();if(typeof e=="object"){if(e.constructor===JSBI)return e;const At=JSBI.__toPrimitive(e);return JSBI.BigInt(At)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const $t of this)e.push(($t&&($t>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":e&e-1?JSBI.__toStringGeneric(this,e,!1):JSBI.__toStringBasePowerOfTwo(this,e)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const $t=e.length;if($t===0)return 0;if($t===1){const Jt=e.__unsignedDigit(0);return e.sign?-Jt:Jt}const xt=e.__digit($t-1),At=JSBI.__clz30(xt),kt=30*$t-At;if(1024<kt)return e.sign?-1/0:1/0;let Bt=kt-1,jt=xt,Lt=$t-1;const Ut=At+3;let Nt=Ut===32?0:jt<<Ut;Nt>>>=12;const qt=Ut-12;let Kt=12<=Ut?0:jt<<20+Ut,zt=20+Ut;for(0<qt&&0<Lt&&(Lt--,jt=e.__digit(Lt),Nt|=jt>>>30-qt,Kt=jt<<qt+2,zt=qt+2);0<zt&&0<Lt;)Lt--,jt=e.__digit(Lt),Kt|=30<=zt?jt<<zt-30:jt>>>30-zt,zt-=30;const Vt=JSBI.__decideRounding(e,zt,Lt,jt);if((Vt===1||Vt===0&&(1&Kt)==1)&&(Kt=Kt+1>>>0,Kt===0&&(Nt++,Nt>>>20!=0&&(Nt=0,Bt++,1023<Bt))))return e.sign?-1/0:1/0;const Ht=e.sign?-2147483648:0;return Bt=Bt+1023<<20,JSBI.__kBitConversionInts[1]=Ht|Bt|Nt,JSBI.__kBitConversionInts[0]=Kt,JSBI.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const $t=e.__copy();return $t.sign=!e.sign,$t}static bitwiseNot(e){return e.sign?JSBI.__absoluteSubOne(e).__trim():JSBI.__absoluteAddOne(e,!0)}static exponentiate(e,$t){if($t.sign)throw new RangeError("Exponent must be positive");if($t.length===0)return JSBI.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&!(1&$t.__digit(0))?JSBI.unaryMinus(e):e;if(1<$t.length)throw new RangeError("BigInt too big");let xt=$t.__unsignedDigit(0);if(xt===1)return e;if(xt>=JSBI.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const Bt=1+(0|xt/30),jt=e.sign&&(1&xt)!=0,Lt=new JSBI(Bt,jt);Lt.__initializeDigits();const Ut=1<<xt%30;return Lt.__setDigit(Bt-1,Ut),Lt}let At=null,kt=e;for(1&xt&&(At=e),xt>>=1;xt!==0;xt>>=1)kt=JSBI.multiply(kt,kt),1&xt&&(At===null?At=kt:At=JSBI.multiply(At,kt));return At}static multiply(e,$t){if(e.length===0)return e;if($t.length===0)return $t;let xt=e.length+$t.length;30<=e.__clzmsd()+$t.__clzmsd()&&xt--;const At=new JSBI(xt,e.sign!==$t.sign);At.__initializeDigits();for(let kt=0;kt<e.length;kt++)JSBI.__multiplyAccumulate($t,e.__digit(kt),At,kt);return At.__trim()}static divide(e,$t){if($t.length===0)throw new RangeError("Division by zero");if(0>JSBI.__absoluteCompare(e,$t))return JSBI.__zero();const xt=e.sign!==$t.sign,At=$t.__unsignedDigit(0);let kt;if($t.length===1&&32767>=At){if(At===1)return xt===e.sign?e:JSBI.unaryMinus(e);kt=JSBI.__absoluteDivSmall(e,At,null)}else kt=JSBI.__absoluteDivLarge(e,$t,!0,!1);return kt.sign=xt,kt.__trim()}static remainder(e,$t){if($t.length===0)throw new RangeError("Division by zero");if(0>JSBI.__absoluteCompare(e,$t))return e;const xt=$t.__unsignedDigit(0);if($t.length===1&&32767>=xt){if(xt===1)return JSBI.__zero();const kt=JSBI.__absoluteModSmall(e,xt);return kt===0?JSBI.__zero():JSBI.__oneDigit(kt,e.sign)}const At=JSBI.__absoluteDivLarge(e,$t,!1,!0);return At.sign=e.sign,At.__trim()}static add(e,$t){const xt=e.sign;return xt===$t.sign?JSBI.__absoluteAdd(e,$t,xt):0<=JSBI.__absoluteCompare(e,$t)?JSBI.__absoluteSub(e,$t,xt):JSBI.__absoluteSub($t,e,!xt)}static subtract(e,$t){const xt=e.sign;return xt===$t.sign?0<=JSBI.__absoluteCompare(e,$t)?JSBI.__absoluteSub(e,$t,xt):JSBI.__absoluteSub($t,e,!xt):JSBI.__absoluteAdd(e,$t,xt)}static leftShift(e,$t){return $t.length===0||e.length===0?e:$t.sign?JSBI.__rightShiftByAbsolute(e,$t):JSBI.__leftShiftByAbsolute(e,$t)}static signedRightShift(e,$t){return $t.length===0||e.length===0?e:$t.sign?JSBI.__leftShiftByAbsolute(e,$t):JSBI.__rightShiftByAbsolute(e,$t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,$t){return 0>JSBI.__compareToBigInt(e,$t)}static lessThanOrEqual(e,$t){return 0>=JSBI.__compareToBigInt(e,$t)}static greaterThan(e,$t){return 0<JSBI.__compareToBigInt(e,$t)}static greaterThanOrEqual(e,$t){return 0<=JSBI.__compareToBigInt(e,$t)}static equal(e,$t){if(e.sign!==$t.sign||e.length!==$t.length)return!1;for(let xt=0;xt<e.length;xt++)if(e.__digit(xt)!==$t.__digit(xt))return!1;return!0}static notEqual(e,$t){return!JSBI.equal(e,$t)}static bitwiseAnd(e,$t){var xt=Math.max;if(!e.sign&&!$t.sign)return JSBI.__absoluteAnd(e,$t).__trim();if(e.sign&&$t.sign){const At=xt(e.length,$t.length)+1;let kt=JSBI.__absoluteSubOne(e,At);const Bt=JSBI.__absoluteSubOne($t);return kt=JSBI.__absoluteOr(kt,Bt,kt),JSBI.__absoluteAddOne(kt,!0,kt).__trim()}return e.sign&&([e,$t]=[$t,e]),JSBI.__absoluteAndNot(e,JSBI.__absoluteSubOne($t)).__trim()}static bitwiseXor(e,$t){var xt=Math.max;if(!e.sign&&!$t.sign)return JSBI.__absoluteXor(e,$t).__trim();if(e.sign&&$t.sign){const Bt=xt(e.length,$t.length),jt=JSBI.__absoluteSubOne(e,Bt),Lt=JSBI.__absoluteSubOne($t);return JSBI.__absoluteXor(jt,Lt,jt).__trim()}const At=xt(e.length,$t.length)+1;e.sign&&([e,$t]=[$t,e]);let kt=JSBI.__absoluteSubOne($t,At);return kt=JSBI.__absoluteXor(kt,e,kt),JSBI.__absoluteAddOne(kt,!0,kt).__trim()}static bitwiseOr(e,$t){var xt=Math.max;const At=xt(e.length,$t.length);if(!e.sign&&!$t.sign)return JSBI.__absoluteOr(e,$t).__trim();if(e.sign&&$t.sign){let Bt=JSBI.__absoluteSubOne(e,At);const jt=JSBI.__absoluteSubOne($t);return Bt=JSBI.__absoluteAnd(Bt,jt,Bt),JSBI.__absoluteAddOne(Bt,!0,Bt).__trim()}e.sign&&([e,$t]=[$t,e]);let kt=JSBI.__absoluteSubOne($t,At);return kt=JSBI.__absoluteAndNot(kt,e,kt),JSBI.__absoluteAddOne(kt,!0,kt).__trim()}static asIntN(e,$t){var xt=Math.floor;if($t.length===0)return $t;if(e=xt(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return JSBI.__zero();if(e>=JSBI.__kMaxLengthBits)return $t;const At=0|(e+29)/30;if($t.length<At)return $t;const kt=$t.__unsignedDigit(At-1),Bt=1<<(e-1)%30;if($t.length===At&&kt<Bt)return $t;if((kt&Bt)!==Bt)return JSBI.__truncateToNBits(e,$t);if(!$t.sign)return JSBI.__truncateAndSubFromPowerOfTwo(e,$t,!0);if(!(kt&Bt-1)){for(let jt=At-2;0<=jt;jt--)if($t.__digit(jt)!==0)return JSBI.__truncateAndSubFromPowerOfTwo(e,$t,!1);return $t.length===At&&kt===Bt?$t:JSBI.__truncateToNBits(e,$t)}return JSBI.__truncateAndSubFromPowerOfTwo(e,$t,!1)}static asUintN(e,$t){var xt=Math.floor;if($t.length===0)return $t;if(e=xt(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return JSBI.__zero();if($t.sign){if(e>JSBI.__kMaxLengthBits)throw new RangeError("BigInt too big");return JSBI.__truncateAndSubFromPowerOfTwo(e,$t,!1)}if(e>=JSBI.__kMaxLengthBits)return $t;const At=0|(e+29)/30;if($t.length<At)return $t;const kt=e%30;return $t.length==At&&(kt===0||!($t.__digit(At-1)>>>kt))?$t:JSBI.__truncateToNBits(e,$t)}static ADD(e,$t){if(e=JSBI.__toPrimitive(e),$t=JSBI.__toPrimitive($t),typeof e=="string")return typeof $t!="string"&&($t=$t.toString()),e+$t;if(typeof $t=="string")return e.toString()+$t;if(e=JSBI.__toNumeric(e),$t=JSBI.__toNumeric($t),JSBI.__isBigInt(e)&&JSBI.__isBigInt($t))return JSBI.add(e,$t);if(typeof e=="number"&&typeof $t=="number")return e+$t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,$t){return JSBI.__compare(e,$t,0)}static LE(e,$t){return JSBI.__compare(e,$t,1)}static GT(e,$t){return JSBI.__compare(e,$t,2)}static GE(e,$t){return JSBI.__compare(e,$t,3)}static EQ(e,$t){for(;;){if(JSBI.__isBigInt(e))return JSBI.__isBigInt($t)?JSBI.equal(e,$t):JSBI.EQ($t,e);if(typeof e=="number"){if(JSBI.__isBigInt($t))return JSBI.__equalToNumber($t,e);if(typeof $t!="object")return e==$t;$t=JSBI.__toPrimitive($t)}else if(typeof e=="string"){if(JSBI.__isBigInt($t))return e=JSBI.__fromString(e),e!==null&&JSBI.equal(e,$t);if(typeof $t!="object")return e==$t;$t=JSBI.__toPrimitive($t)}else if(typeof e=="boolean"){if(JSBI.__isBigInt($t))return JSBI.__equalToNumber($t,+e);if(typeof $t!="object")return e==$t;$t=JSBI.__toPrimitive($t)}else if(typeof e=="symbol"){if(JSBI.__isBigInt($t))return!1;if(typeof $t!="object")return e==$t;$t=JSBI.__toPrimitive($t)}else if(typeof e=="object"){if(typeof $t=="object"&&$t.constructor!==JSBI)return e==$t;e=JSBI.__toPrimitive(e)}else return e==$t}}static NE(e,$t){return!JSBI.EQ(e,$t)}static DataViewGetBigInt64(e,$t,xt=!1){return JSBI.asIntN(64,JSBI.DataViewGetBigUint64(e,$t,xt))}static DataViewGetBigUint64(e,$t,xt=!1){const[At,kt]=xt?[4,0]:[0,4],Bt=e.getUint32($t+At,xt),jt=e.getUint32($t+kt,xt),Lt=new JSBI(3,!1);return Lt.__setDigit(0,1073741823&jt),Lt.__setDigit(1,(268435455&Bt)<<2|jt>>>30),Lt.__setDigit(2,Bt>>>28),Lt.__trim()}static DataViewSetBigInt64(e,$t,xt,At=!1){JSBI.DataViewSetBigUint64(e,$t,xt,At)}static DataViewSetBigUint64(e,$t,xt,At=!1){xt=JSBI.asUintN(64,xt);let kt=0,Bt=0;if(0<xt.length&&(Bt=xt.__digit(0),1<xt.length)){const Ut=xt.__digit(1);Bt|=Ut<<30,kt=Ut>>>2,2<xt.length&&(kt|=xt.__digit(2)<<28)}const[jt,Lt]=At?[4,0]:[0,4];e.setUint32($t+jt,kt,At),e.setUint32($t+Lt,Bt,At)}static __zero(){return new JSBI(0,!1)}static __oneDigit(e,$t){const xt=new JSBI(1,$t);return xt.__setDigit(0,e),xt}__copy(){const e=new JSBI(this.length,this.sign);for(let $t=0;$t<this.length;$t++)e[$t]=this[$t];return e}__trim(){let e=this.length,$t=this[e-1];for(;$t===0;)e--,$t=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,$t,xt,At){if(0<$t)return-1;let kt;if(0>$t)kt=-$t-1;else{if(xt===0)return-1;xt--,At=e.__digit(xt),kt=29}let Bt=1<<kt;if(!(At&Bt))return-1;if(Bt-=1,(At&Bt)!=0)return 1;for(;0<xt;)if(xt--,e.__digit(xt)!==0)return 1;return 0}static __fromDouble(e){JSBI.__kBitConversionDouble[0]=e;const $t=2047&JSBI.__kBitConversionInts[1]>>>20,xt=$t-1023,At=(0|xt/30)+1,kt=new JSBI(At,0>e);let Bt=1048575&JSBI.__kBitConversionInts[1]|1048576,jt=JSBI.__kBitConversionInts[0];const Lt=20,Ut=xt%30;let Nt,qt=0;if(Ut<20){const Kt=Lt-Ut;qt=Kt+32,Nt=Bt>>>Kt,Bt=Bt<<32-Kt|jt>>>Kt,jt<<=32-Kt}else if(Ut===20)qt=32,Nt=Bt,Bt=jt,jt=0;else{const Kt=Ut-Lt;qt=32-Kt,Nt=Bt<<Kt|jt>>>32-Kt,Bt=jt<<Kt,jt=0}kt.__setDigit(At-1,Nt);for(let Kt=At-2;0<=Kt;Kt--)0<qt?(qt-=30,Nt=Bt>>>2,Bt=Bt<<30|jt>>>2,jt<<=30):Nt=0,kt.__setDigit(Kt,Nt);return kt.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,$t=0){let xt=0;const At=e.length;let kt=0;if(kt===At)return JSBI.__zero();let Bt=e.charCodeAt(kt);for(;JSBI.__isWhitespace(Bt);){if(++kt===At)return JSBI.__zero();Bt=e.charCodeAt(kt)}if(Bt===43){if(++kt===At)return null;Bt=e.charCodeAt(kt),xt=1}else if(Bt===45){if(++kt===At)return null;Bt=e.charCodeAt(kt),xt=-1}if($t===0){if($t=10,Bt===48){if(++kt===At)return JSBI.__zero();if(Bt=e.charCodeAt(kt),Bt===88||Bt===120){if($t=16,++kt===At)return null;Bt=e.charCodeAt(kt)}else if(Bt===79||Bt===111){if($t=8,++kt===At)return null;Bt=e.charCodeAt(kt)}else if(Bt===66||Bt===98){if($t=2,++kt===At)return null;Bt=e.charCodeAt(kt)}}}else if($t===16&&Bt===48){if(++kt===At)return JSBI.__zero();if(Bt=e.charCodeAt(kt),Bt===88||Bt===120){if(++kt===At)return null;Bt=e.charCodeAt(kt)}}if(xt!=0&&$t!==10)return null;for(;Bt===48;){if(++kt===At)return JSBI.__zero();Bt=e.charCodeAt(kt)}const jt=At-kt;let Lt=JSBI.__kMaxBitsPerChar[$t],Ut=JSBI.__kBitsPerCharTableMultiplier-1;if(jt>1073741824/Lt)return null;const Nt=Lt*jt+Ut>>>JSBI.__kBitsPerCharTableShift,qt=new JSBI(0|(Nt+29)/30,!1),Kt=10>$t?$t:10,zt=10<$t?$t-10:0;if($t&$t-1){qt.__initializeDigits();let Vt=!1,Ht=0;do{let Jt=0,rr=1;for(;;){let Wt;if(Bt-48>>>0<Kt)Wt=Bt-48;else if((32|Bt)-97>>>0<zt)Wt=(32|Bt)-87;else{Vt=!0;break}const nr=rr*$t;if(1073741823<nr)break;if(rr=nr,Jt=Jt*$t+Wt,Ht++,++kt===At){Vt=!0;break}Bt=e.charCodeAt(kt)}Ut=30*JSBI.__kBitsPerCharTableMultiplier-1;const Qt=0|(Lt*Ht+Ut>>>JSBI.__kBitsPerCharTableShift)/30;qt.__inplaceMultiplyAdd(rr,Jt,Qt)}while(!Vt)}else{Lt>>=JSBI.__kBitsPerCharTableShift;const Vt=[],Ht=[];let Jt=!1;do{let rr=0,Qt=0;for(;;){let Wt;if(Bt-48>>>0<Kt)Wt=Bt-48;else if((32|Bt)-97>>>0<zt)Wt=(32|Bt)-87;else{Jt=!0;break}if(Qt+=Lt,rr=rr<<Lt|Wt,++kt===At){Jt=!0;break}if(Bt=e.charCodeAt(kt),30<Qt+Lt)break}Vt.push(rr),Ht.push(Qt)}while(!Jt);JSBI.__fillFromParts(qt,Vt,Ht)}if(kt!==At){if(!JSBI.__isWhitespace(Bt))return null;for(kt++;kt<At;kt++)if(Bt=e.charCodeAt(kt),!JSBI.__isWhitespace(Bt))return null}return qt.sign=xt==-1,qt.__trim()}static __fillFromParts(e,$t,xt){let At=0,kt=0,Bt=0;for(let jt=$t.length-1;0<=jt;jt--){const Lt=$t[jt],Ut=xt[jt];kt|=Lt<<Bt,Bt+=Ut,Bt===30?(e.__setDigit(At++,kt),Bt=0,kt=0):30<Bt&&(e.__setDigit(At++,1073741823&kt),Bt-=30,kt=Lt>>>Ut-Bt)}if(kt!==0){if(At>=e.length)throw new Error("implementation bug");e.__setDigit(At++,kt)}for(;At<e.length;At++)e.__setDigit(At,0)}static __toStringBasePowerOfTwo(e,$t){const xt=e.length;let At=$t-1;At=(85&At>>>1)+(85&At),At=(51&At>>>2)+(51&At),At=(15&At>>>4)+(15&At);const kt=At,Bt=$t-1,jt=e.__digit(xt-1),Lt=JSBI.__clz30(jt);let Ut=0|(30*xt-Lt+kt-1)/kt;if(e.sign&&Ut++,268435456<Ut)throw new Error("string too long");const Nt=Array(Ut);let qt=Ut-1,Kt=0,zt=0;for(let Ht=0;Ht<xt-1;Ht++){const Jt=e.__digit(Ht),rr=(Kt|Jt<<zt)&Bt;Nt[qt--]=JSBI.__kConversionChars[rr];const Qt=kt-zt;for(Kt=Jt>>>Qt,zt=30-Qt;zt>=kt;)Nt[qt--]=JSBI.__kConversionChars[Kt&Bt],Kt>>>=kt,zt-=kt}const Vt=(Kt|jt<<zt)&Bt;for(Nt[qt--]=JSBI.__kConversionChars[Vt],Kt=jt>>>kt-zt;Kt!==0;)Nt[qt--]=JSBI.__kConversionChars[Kt&Bt],Kt>>>=kt;if(e.sign&&(Nt[qt--]="-"),qt!=-1)throw new Error("implementation bug");return Nt.join("")}static __toStringGeneric(e,$t,xt){const At=e.length;if(At===0)return"";if(At===1){let Ht=e.__unsignedDigit(0).toString($t);return xt===!1&&e.sign&&(Ht="-"+Ht),Ht}const kt=30*At-JSBI.__clz30(e.__digit(At-1)),Bt=JSBI.__kMaxBitsPerChar[$t],jt=Bt-1;let Lt=kt*JSBI.__kBitsPerCharTableMultiplier;Lt+=jt-1,Lt=0|Lt/jt;const Ut=Lt+1>>1,Nt=JSBI.exponentiate(JSBI.__oneDigit($t,!1),JSBI.__oneDigit(Ut,!1));let qt,Kt;const zt=Nt.__unsignedDigit(0);if(Nt.length===1&&32767>=zt){qt=new JSBI(e.length,!1),qt.__initializeDigits();let Ht=0;for(let Jt=2*e.length-1;0<=Jt;Jt--){const rr=Ht<<15|e.__halfDigit(Jt);qt.__setHalfDigit(Jt,0|rr/zt),Ht=0|rr%zt}Kt=Ht.toString($t)}else{const Ht=JSBI.__absoluteDivLarge(e,Nt,!0,!0);qt=Ht.quotient;const Jt=Ht.remainder.__trim();Kt=JSBI.__toStringGeneric(Jt,$t,!0)}qt.__trim();let Vt=JSBI.__toStringGeneric(qt,$t,!0);for(;Kt.length<Ut;)Kt="0"+Kt;return xt===!1&&e.sign&&(Vt="-"+Vt),Vt+Kt}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,$t){const xt=e.sign;if(xt!==$t.sign)return JSBI.__unequalSign(xt);const At=JSBI.__absoluteCompare(e,$t);return 0<At?JSBI.__absoluteGreater(xt):0>At?JSBI.__absoluteLess(xt):0}static __compareToNumber(e,$t){if(JSBI.__isOneDigitInt($t)){const xt=e.sign,At=0>$t;if(xt!==At)return JSBI.__unequalSign(xt);if(e.length===0){if(At)throw new Error("implementation bug");return $t===0?0:-1}if(1<e.length)return JSBI.__absoluteGreater(xt);const kt=Math.abs($t),Bt=e.__unsignedDigit(0);return Bt>kt?JSBI.__absoluteGreater(xt):Bt<kt?JSBI.__absoluteLess(xt):0}return JSBI.__compareToDouble(e,$t)}static __compareToDouble(e,$t){if($t!==$t)return $t;if($t===1/0)return-1;if($t===-1/0)return 1;const xt=e.sign;if(xt!==0>$t)return JSBI.__unequalSign(xt);if($t===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;JSBI.__kBitConversionDouble[0]=$t;const At=2047&JSBI.__kBitConversionInts[1]>>>20;if(At==2047)throw new Error("implementation bug: handled elsewhere");const kt=At-1023;if(0>kt)return JSBI.__absoluteGreater(xt);const Bt=e.length;let jt=e.__digit(Bt-1);const Lt=JSBI.__clz30(jt),Ut=30*Bt-Lt,Nt=kt+1;if(Ut<Nt)return JSBI.__absoluteLess(xt);if(Ut>Nt)return JSBI.__absoluteGreater(xt);let qt=1048576|1048575&JSBI.__kBitConversionInts[1],Kt=JSBI.__kBitConversionInts[0];const zt=20,Vt=29-Lt;if(Vt!==(0|(Ut-1)%30))throw new Error("implementation bug");let Ht,Jt=0;if(20>Vt){const rr=zt-Vt;Jt=rr+32,Ht=qt>>>rr,qt=qt<<32-rr|Kt>>>rr,Kt<<=32-rr}else if(Vt===20)Jt=32,Ht=qt,qt=Kt,Kt=0;else{const rr=Vt-zt;Jt=32-rr,Ht=qt<<rr|Kt>>>32-rr,qt=Kt<<rr,Kt=0}if(jt>>>=0,Ht>>>=0,jt>Ht)return JSBI.__absoluteGreater(xt);if(jt<Ht)return JSBI.__absoluteLess(xt);for(let rr=Bt-2;0<=rr;rr--){0<Jt?(Jt-=30,Ht=qt>>>2,qt=qt<<30|Kt>>>2,Kt<<=30):Ht=0;const Qt=e.__unsignedDigit(rr);if(Qt>Ht)return JSBI.__absoluteGreater(xt);if(Qt<Ht)return JSBI.__absoluteLess(xt)}if(qt!==0||Kt!==0){if(Jt===0)throw new Error("implementation bug");return JSBI.__absoluteLess(xt)}return 0}static __equalToNumber(e,$t){var xt=Math.abs;return JSBI.__isOneDigitInt($t)?$t===0?e.length===0:e.length===1&&e.sign===0>$t&&e.__unsignedDigit(0)===xt($t):JSBI.__compareToDouble(e,$t)===0}static __comparisonResultToBool(e,$t){return $t===0?0>e:$t===1?0>=e:$t===2?0<e:$t===3?0<=e:void 0}static __compare(e,$t,xt){if(e=JSBI.__toPrimitive(e),$t=JSBI.__toPrimitive($t),typeof e=="string"&&typeof $t=="string")switch(xt){case 0:return e<$t;case 1:return e<=$t;case 2:return e>$t;case 3:return e>=$t}if(JSBI.__isBigInt(e)&&typeof $t=="string")return $t=JSBI.__fromString($t),$t!==null&&JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(e,$t),xt);if(typeof e=="string"&&JSBI.__isBigInt($t))return e=JSBI.__fromString(e),e!==null&&JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(e,$t),xt);if(e=JSBI.__toNumeric(e),$t=JSBI.__toNumeric($t),JSBI.__isBigInt(e)){if(JSBI.__isBigInt($t))return JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(e,$t),xt);if(typeof $t!="number")throw new Error("implementation bug");return JSBI.__comparisonResultToBool(JSBI.__compareToNumber(e,$t),xt)}if(typeof e!="number")throw new Error("implementation bug");if(JSBI.__isBigInt($t))return JSBI.__comparisonResultToBool(JSBI.__compareToNumber($t,e),2^xt);if(typeof $t!="number")throw new Error("implementation bug");return xt===0?e<$t:xt===1?e<=$t:xt===2?e>$t:xt===3?e>=$t:void 0}__clzmsd(){return JSBI.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,$t,xt){if(e.length<$t.length)return JSBI.__absoluteAdd($t,e,xt);if(e.length===0)return e;if($t.length===0)return e.sign===xt?e:JSBI.unaryMinus(e);let At=e.length;(e.__clzmsd()===0||$t.length===e.length&&$t.__clzmsd()===0)&&At++;const kt=new JSBI(At,xt);let Bt=0,jt=0;for(;jt<$t.length;jt++){const Lt=e.__digit(jt)+$t.__digit(jt)+Bt;Bt=Lt>>>30,kt.__setDigit(jt,1073741823&Lt)}for(;jt<e.length;jt++){const Lt=e.__digit(jt)+Bt;Bt=Lt>>>30,kt.__setDigit(jt,1073741823&Lt)}return jt<kt.length&&kt.__setDigit(jt,Bt),kt.__trim()}static __absoluteSub(e,$t,xt){if(e.length===0)return e;if($t.length===0)return e.sign===xt?e:JSBI.unaryMinus(e);const At=new JSBI(e.length,xt);let kt=0,Bt=0;for(;Bt<$t.length;Bt++){const jt=e.__digit(Bt)-$t.__digit(Bt)-kt;kt=1&jt>>>30,At.__setDigit(Bt,1073741823&jt)}for(;Bt<e.length;Bt++){const jt=e.__digit(Bt)-kt;kt=1&jt>>>30,At.__setDigit(Bt,1073741823&jt)}return At.__trim()}static __absoluteAddOne(e,$t,xt=null){const At=e.length;xt===null?xt=new JSBI(At,$t):xt.sign=$t;let kt=1;for(let Bt=0;Bt<At;Bt++){const jt=e.__digit(Bt)+kt;kt=jt>>>30,xt.__setDigit(Bt,1073741823&jt)}return kt!=0&&xt.__setDigitGrow(At,1),xt}static __absoluteSubOne(e,$t){const xt=e.length;$t=$t||xt;const At=new JSBI($t,!1);let kt=1;for(let Bt=0;Bt<xt;Bt++){const jt=e.__digit(Bt)-kt;kt=1&jt>>>30,At.__setDigit(Bt,1073741823&jt)}if(kt!=0)throw new Error("implementation bug");for(let Bt=xt;Bt<$t;Bt++)At.__setDigit(Bt,0);return At}static __absoluteAnd(e,$t,xt=null){let At=e.length,kt=$t.length,Bt=kt;if(At<kt){Bt=At;const Ut=e,Nt=At;e=$t,At=kt,$t=Ut,kt=Nt}let jt=Bt;xt===null?xt=new JSBI(jt,!1):jt=xt.length;let Lt=0;for(;Lt<Bt;Lt++)xt.__setDigit(Lt,e.__digit(Lt)&$t.__digit(Lt));for(;Lt<jt;Lt++)xt.__setDigit(Lt,0);return xt}static __absoluteAndNot(e,$t,xt=null){const At=e.length,kt=$t.length;let Bt=kt;At<kt&&(Bt=At);let jt=At;xt===null?xt=new JSBI(jt,!1):jt=xt.length;let Lt=0;for(;Lt<Bt;Lt++)xt.__setDigit(Lt,e.__digit(Lt)&~$t.__digit(Lt));for(;Lt<At;Lt++)xt.__setDigit(Lt,e.__digit(Lt));for(;Lt<jt;Lt++)xt.__setDigit(Lt,0);return xt}static __absoluteOr(e,$t,xt=null){let At=e.length,kt=$t.length,Bt=kt;if(At<kt){Bt=At;const Ut=e,Nt=At;e=$t,At=kt,$t=Ut,kt=Nt}let jt=At;xt===null?xt=new JSBI(jt,!1):jt=xt.length;let Lt=0;for(;Lt<Bt;Lt++)xt.__setDigit(Lt,e.__digit(Lt)|$t.__digit(Lt));for(;Lt<At;Lt++)xt.__setDigit(Lt,e.__digit(Lt));for(;Lt<jt;Lt++)xt.__setDigit(Lt,0);return xt}static __absoluteXor(e,$t,xt=null){let At=e.length,kt=$t.length,Bt=kt;if(At<kt){Bt=At;const Ut=e,Nt=At;e=$t,At=kt,$t=Ut,kt=Nt}let jt=At;xt===null?xt=new JSBI(jt,!1):jt=xt.length;let Lt=0;for(;Lt<Bt;Lt++)xt.__setDigit(Lt,e.__digit(Lt)^$t.__digit(Lt));for(;Lt<At;Lt++)xt.__setDigit(Lt,e.__digit(Lt));for(;Lt<jt;Lt++)xt.__setDigit(Lt,0);return xt}static __absoluteCompare(e,$t){const xt=e.length-$t.length;if(xt!=0)return xt;let At=e.length-1;for(;0<=At&&e.__digit(At)===$t.__digit(At);)At--;return 0>At?0:e.__unsignedDigit(At)>$t.__unsignedDigit(At)?1:-1}static __multiplyAccumulate(e,$t,xt,At){if($t===0)return;const kt=32767&$t,Bt=$t>>>15;let jt=0,Lt=0;for(let Ut,Nt=0;Nt<e.length;Nt++,At++){Ut=xt.__digit(At);const qt=e.__digit(Nt),Kt=32767&qt,zt=qt>>>15,Vt=JSBI.__imul(Kt,kt),Ht=JSBI.__imul(Kt,Bt),Jt=JSBI.__imul(zt,kt),rr=JSBI.__imul(zt,Bt);Ut+=Lt+Vt+jt,jt=Ut>>>30,Ut&=1073741823,Ut+=((32767&Ht)<<15)+((32767&Jt)<<15),jt+=Ut>>>30,Lt=rr+(Ht>>>15)+(Jt>>>15),xt.__setDigit(At,1073741823&Ut)}for(;jt!=0||Lt!==0;At++){let Ut=xt.__digit(At);Ut+=jt+Lt,Lt=0,jt=Ut>>>30,xt.__setDigit(At,1073741823&Ut)}}static __internalMultiplyAdd(e,$t,xt,At,kt){let Bt=xt,jt=0;for(let Lt=0;Lt<At;Lt++){const Ut=e.__digit(Lt),Nt=JSBI.__imul(32767&Ut,$t),qt=JSBI.__imul(Ut>>>15,$t),Kt=Nt+((32767&qt)<<15)+jt+Bt;Bt=Kt>>>30,jt=qt>>>15,kt.__setDigit(Lt,1073741823&Kt)}if(kt.length>At)for(kt.__setDigit(At++,Bt+jt);At<kt.length;)kt.__setDigit(At++,0);else if(Bt+jt!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,$t,xt){xt>this.length&&(xt=this.length);const At=32767&e,kt=e>>>15;let Bt=0,jt=$t;for(let Lt=0;Lt<xt;Lt++){const Ut=this.__digit(Lt),Nt=32767&Ut,qt=Ut>>>15,Kt=JSBI.__imul(Nt,At),zt=JSBI.__imul(Nt,kt),Vt=JSBI.__imul(qt,At),Ht=JSBI.__imul(qt,kt);let Jt=jt+Kt+Bt;Bt=Jt>>>30,Jt&=1073741823,Jt+=((32767&zt)<<15)+((32767&Vt)<<15),Bt+=Jt>>>30,jt=Ht+(zt>>>15)+(Vt>>>15),this.__setDigit(Lt,1073741823&Jt)}if(Bt!=0||jt!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,$t,xt=null){xt===null&&(xt=new JSBI(e.length,!1));let At=0;for(let kt,Bt=2*e.length-1;0<=Bt;Bt-=2){kt=(At<<15|e.__halfDigit(Bt))>>>0;const jt=0|kt/$t;At=0|kt%$t,kt=(At<<15|e.__halfDigit(Bt-1))>>>0;const Lt=0|kt/$t;At=0|kt%$t,xt.__setDigit(Bt>>>1,jt<<15|Lt)}return xt}static __absoluteModSmall(e,$t){let xt=0;for(let At=2*e.length-1;0<=At;At--)xt=0|((xt<<15|e.__halfDigit(At))>>>0)%$t;return xt}static __absoluteDivLarge(e,$t,xt,At){const kt=$t.__halfDigitLength(),Bt=$t.length,jt=e.__halfDigitLength()-kt;let Lt=null;xt&&(Lt=new JSBI(jt+2>>>1,!1),Lt.__initializeDigits());const Ut=new JSBI(kt+2>>>1,!1);Ut.__initializeDigits();const Nt=JSBI.__clz15($t.__halfDigit(kt-1));0<Nt&&($t=JSBI.__specialLeftShift($t,Nt,0));const qt=JSBI.__specialLeftShift(e,Nt,1),Kt=$t.__halfDigit(kt-1);let zt=0;for(let Vt,Ht=jt;0<=Ht;Ht--){Vt=32767;const Jt=qt.__halfDigit(Ht+kt);if(Jt!==Kt){const Qt=(Jt<<15|qt.__halfDigit(Ht+kt-1))>>>0;Vt=0|Qt/Kt;let Wt=0|Qt%Kt;const nr=$t.__halfDigit(kt-2),yr=qt.__halfDigit(Ht+kt-2);for(;JSBI.__imul(Vt,nr)>>>0>(Wt<<16|yr)>>>0&&(Vt--,Wt+=Kt,!(32767<Wt)););}JSBI.__internalMultiplyAdd($t,Vt,0,Bt,Ut);let rr=qt.__inplaceSub(Ut,Ht,kt+1);rr!==0&&(rr=qt.__inplaceAdd($t,Ht,kt),qt.__setHalfDigit(Ht+kt,32767&qt.__halfDigit(Ht+kt)+rr),Vt--),xt&&(1&Ht?zt=Vt<<15:Lt.__setDigit(Ht>>>1,zt|Vt))}if(At)return qt.__inplaceRightShift(Nt),xt?{quotient:Lt,remainder:qt}:qt;if(xt)return Lt;throw new Error("unreachable")}static __clz15(e){return JSBI.__clz30(e)-15}__inplaceAdd(e,$t,xt){let At=0;for(let kt=0;kt<xt;kt++){const Bt=this.__halfDigit($t+kt)+e.__halfDigit(kt)+At;At=Bt>>>15,this.__setHalfDigit($t+kt,32767&Bt)}return At}__inplaceSub(e,$t,xt){let At=0;if(1&$t){$t>>=1;let kt=this.__digit($t),Bt=32767&kt,jt=0;for(;jt<xt-1>>>1;jt++){const Nt=e.__digit(jt),qt=(kt>>>15)-(32767&Nt)-At;At=1&qt>>>15,this.__setDigit($t+jt,(32767&qt)<<15|32767&Bt),kt=this.__digit($t+jt+1),Bt=(32767&kt)-(Nt>>>15)-At,At=1&Bt>>>15}const Lt=e.__digit(jt),Ut=(kt>>>15)-(32767&Lt)-At;if(At=1&Ut>>>15,this.__setDigit($t+jt,(32767&Ut)<<15|32767&Bt),$t+jt+1>=this.length)throw new RangeError("out of bounds");!(1&xt)&&(kt=this.__digit($t+jt+1),Bt=(32767&kt)-(Lt>>>15)-At,At=1&Bt>>>15,this.__setDigit($t+e.length,1073709056&kt|32767&Bt))}else{$t>>=1;let kt=0;for(;kt<e.length-1;kt++){const Nt=this.__digit($t+kt),qt=e.__digit(kt),Kt=(32767&Nt)-(32767&qt)-At;At=1&Kt>>>15;const zt=(Nt>>>15)-(qt>>>15)-At;At=1&zt>>>15,this.__setDigit($t+kt,(32767&zt)<<15|32767&Kt)}const Bt=this.__digit($t+kt),jt=e.__digit(kt),Lt=(32767&Bt)-(32767&jt)-At;At=1&Lt>>>15;let Ut=0;!(1&xt)&&(Ut=(Bt>>>15)-(jt>>>15)-At,At=1&Ut>>>15),this.__setDigit($t+kt,(32767&Ut)<<15|32767&Lt)}return At}__inplaceRightShift(e){if(e===0)return;let $t=this.__digit(0)>>>e;const xt=this.length-1;for(let At=0;At<xt;At++){const kt=this.__digit(At+1);this.__setDigit(At,1073741823&kt<<30-e|$t),$t=kt>>>e}this.__setDigit(xt,$t)}static __specialLeftShift(e,$t,xt){const At=e.length,kt=new JSBI(At+xt,!1);if($t===0){for(let jt=0;jt<At;jt++)kt.__setDigit(jt,e.__digit(jt));return 0<xt&&kt.__setDigit(At,0),kt}let Bt=0;for(let jt=0;jt<At;jt++){const Lt=e.__digit(jt);kt.__setDigit(jt,1073741823&Lt<<$t|Bt),Bt=Lt>>>30-$t}return 0<xt&&kt.__setDigit(At,Bt),kt}static __leftShiftByAbsolute(e,$t){const xt=JSBI.__toShiftAmount($t);if(0>xt)throw new RangeError("BigInt too big");const At=0|xt/30,kt=xt%30,Bt=e.length,jt=kt!==0&&e.__digit(Bt-1)>>>30-kt!=0,Lt=Bt+At+(jt?1:0),Ut=new JSBI(Lt,e.sign);if(kt===0){let Nt=0;for(;Nt<At;Nt++)Ut.__setDigit(Nt,0);for(;Nt<Lt;Nt++)Ut.__setDigit(Nt,e.__digit(Nt-At))}else{let Nt=0;for(let qt=0;qt<At;qt++)Ut.__setDigit(qt,0);for(let qt=0;qt<Bt;qt++){const Kt=e.__digit(qt);Ut.__setDigit(qt+At,1073741823&Kt<<kt|Nt),Nt=Kt>>>30-kt}if(jt)Ut.__setDigit(Bt+At,Nt);else if(Nt!==0)throw new Error("implementation bug")}return Ut.__trim()}static __rightShiftByAbsolute(e,$t){const xt=e.length,At=e.sign,kt=JSBI.__toShiftAmount($t);if(0>kt)return JSBI.__rightShiftByMaximum(At);const Bt=0|kt/30,jt=kt%30;let Lt=xt-Bt;if(0>=Lt)return JSBI.__rightShiftByMaximum(At);let Ut=!1;if(At){if(e.__digit(Bt)&(1<<jt)-1)Ut=!0;else for(let qt=0;qt<Bt;qt++)if(e.__digit(qt)!==0){Ut=!0;break}}Ut&&jt===0&&!~e.__digit(xt-1)&&Lt++;let Nt=new JSBI(Lt,At);if(jt===0){Nt.__setDigit(Lt-1,0);for(let qt=Bt;qt<xt;qt++)Nt.__setDigit(qt-Bt,e.__digit(qt))}else{let qt=e.__digit(Bt)>>>jt;const Kt=xt-Bt-1;for(let zt=0;zt<Kt;zt++){const Vt=e.__digit(zt+Bt+1);Nt.__setDigit(zt,1073741823&Vt<<30-jt|qt),qt=Vt>>>jt}Nt.__setDigit(Kt,qt)}return Ut&&(Nt=JSBI.__absoluteAddOne(Nt,!0,Nt)),Nt.__trim()}static __rightShiftByMaximum(e){return e?JSBI.__oneDigit(1,!0):JSBI.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const $t=e.__unsignedDigit(0);return $t>JSBI.__kMaxLengthBits?-1:$t}static __toPrimitive(e,$t="default"){if(typeof e!="object"||e.constructor===JSBI)return e;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const kt=e[Symbol.toPrimitive];if(kt){const Bt=kt($t);if(typeof Bt!="object")return Bt;throw new TypeError("Cannot convert object to primitive value")}}const xt=e.valueOf;if(xt){const kt=xt.call(e);if(typeof kt!="object")return kt}const At=e.toString;if(At){const kt=At.call(e);if(typeof kt!="object")return kt}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return JSBI.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===JSBI}static __truncateToNBits(e,$t){const xt=0|(e+29)/30,At=new JSBI(xt,$t.sign),kt=xt-1;for(let jt=0;jt<kt;jt++)At.__setDigit(jt,$t.__digit(jt));let Bt=$t.__digit(kt);if(e%30!=0){const jt=32-e%30;Bt=Bt<<jt>>>jt}return At.__setDigit(kt,Bt),At.__trim()}static __truncateAndSubFromPowerOfTwo(e,$t,xt){var At=Math.min;const kt=0|(e+29)/30,Bt=new JSBI(kt,xt);let jt=0;const Lt=kt-1;let Ut=0;for(const zt=At(Lt,$t.length);jt<zt;jt++){const Vt=0-$t.__digit(jt)-Ut;Ut=1&Vt>>>30,Bt.__setDigit(jt,1073741823&Vt)}for(;jt<Lt;jt++)Bt.__setDigit(jt,0|1073741823&-Ut);let Nt=Lt<$t.length?$t.__digit(Lt):0;const qt=e%30;let Kt;if(qt==0)Kt=0-Nt-Ut,Kt&=1073741823;else{const zt=32-qt;Nt=Nt<<zt>>>zt;const Vt=1<<32-zt;Kt=Vt-Nt-Ut,Kt&=Vt-1}return Bt.__setDigit(Lt,Kt),Bt.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,$t){this[e]=0|$t}__setDigitGrow(e,$t){this[e]=0|$t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,$t){const xt=e>>>1,At=this.__digit(xt),kt=1&e?32767&At|$t<<15:1073709056&At|32767&$t;this.__setDigit(xt,kt)}static __digitPow(e,$t){let xt=1;for(;0<$t;)1&$t&&(xt*=e),$t>>>=1,e*=e;return xt}static __isOneDigitInt(e){return(1073741823&e)===e}}JSBI.__kMaxLength=33554432,JSBI.__kMaxLengthBits=JSBI.__kMaxLength<<5,JSBI.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],JSBI.__kBitsPerCharTableShift=5,JSBI.__kBitsPerCharTableMultiplier=1<<JSBI.__kBitsPerCharTableShift,JSBI.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],JSBI.__kBitConversionBuffer=new ArrayBuffer(8),JSBI.__kBitConversionDouble=new Float64Array(JSBI.__kBitConversionBuffer),JSBI.__kBitConversionInts=new Int32Array(JSBI.__kBitConversionBuffer),JSBI.__clz30=Math.clz32?function(_t){return Math.clz32(_t)-2}:function(_t){return _t===0?30:0|29-(0|Math.log(_t>>>0)/Math.LN2)},JSBI.__imul=Math.imul||function(_t,e){return 0|_t*e};const t={};function MakeIntrinsicClass(_t,e){Object.defineProperty(_t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0});for(const $t of Object.getOwnPropertyNames(_t)){const xt=Object.getOwnPropertyDescriptor(_t,$t);xt.configurable&&xt.enumerable&&(xt.enumerable=!1,Object.defineProperty(_t,$t,xt))}for(const $t of Object.getOwnPropertyNames(_t.prototype)){const xt=Object.getOwnPropertyDescriptor(_t.prototype,$t);xt.configurable&&xt.enumerable&&(xt.enumerable=!1,Object.defineProperty(_t.prototype,$t,xt))}DefineIntrinsic(e,_t),DefineIntrinsic(`${e}.prototype`,_t.prototype)}function DefineIntrinsic(_t,e){const $t=`%${_t}%`;if(t[$t]!==void 0)throw new Error(`intrinsic ${_t} already exists`);t[$t]=e}function GetIntrinsic(_t){return t[_t]}var r,o;const n="slot-epochNanoSeconds",a="slot-timezone-identifier",i$1="slot-year",s="slot-month",l="slot-day",d="slot-hour",m="slot-minute",c="slot-second",h="slot-millisecond",u="slot-microsecond",T="slot-nanosecond",p="slot-calendar",f="slot-date-brand",y="slot-year-month-brand",I="slot-month-day-brand",S="slot-cached-instant",g="slot-time-zone",w="slot-years",D="slot-months",G="slot-weeks",v="slot-days",C="slot-hours",O="slot-minutes",b="slot-seconds",E$1="slot-milliseconds",M="slot-microseconds",R="slot-nanoseconds",F="slot-calendar-identifier",Y=new WeakMap,P=Symbol.for("@@Temporal__GetSlots");(r=globalThis)[P]||(r[P]=function _t(e){return Y.get(e)});const Z=globalThis[P],B=Symbol.for("@@Temporal__CreateSlots");(o=globalThis)[B]||(o[B]=function _t(e){Y.set(e,Object.create(null))});const N=globalThis[B];function HasSlot(_t,...e){if(!_t||typeof _t!="object")return!1;const $t=Z(_t);return!!$t&&e.every(xt=>xt in $t)}function GetSlot(_t,e){var xt;const $t=(xt=Z(_t))==null?void 0:xt[e];if($t===void 0)throw new TypeError(`Missing internal slot ${e}`);return $t}function SetSlot(_t,e,$t){const xt=Z(_t);if(xt===void 0)throw new TypeError("Missing slots for the given container");if(xt[e])throw new TypeError(`${e} already has set`);xt[e]=$t}const j=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,$=new RegExp("(?:"+[`(?:${j.source})(?:\\/(?:${j.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),k=/(?:[+\u2212-]\d{6}|\d{4})/,U=/(?:0[1-9]|1[0-2])/,A=/(?:0[1-9]|[12]\d|3[01])/,L=new RegExp(`(${k.source})(?:-(${U.source})-(${A.source})|(${U.source})(${A.source}))`),x=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,W=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,q=new RegExp(`([zZ])|${W.source}?`),H=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,V=new RegExp([`^${L.source}`,`(?:(?:T|\\s+)${x.source}(?:${q.source})?)?`,`(?:\\[!?(${$.source})\\])?`,`((?:${H.source})*)$`].join(""),"i"),z=new RegExp([`^T?${x.source}`,`(?:${q.source})?`,`(?:\\[!?${$.source}\\])?`,`((?:${H.source})*)$`].join(""),"i"),_$1=new RegExp(`^(${k.source})-?(${U.source})(?:\\[!?${$.source}\\])?((?:${H.source})*)$`),J=new RegExp(`^(?:--)?(${U.source})-?(${A.source})(?:\\[!?${$.source}\\])?((?:${H.source})*)$`),K=/(\d+)(?:[.,](\d{1,9}))?/,X=new RegExp(`(?:${K.source}H)?(?:${K.source}M)?(?:${K.source}S)?`),Q=new RegExp(`^([+−-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${X.source})?$`,"i"),ee=Array.prototype.includes,te=Array.prototype.push,re=globalThis.Intl.DateTimeFormat,oe=Math.min,ne=Math.max,ae=Math.abs,ie=Math.floor,se=Math.sign,le=Math.trunc,de=Number.isNaN,me=Number.isFinite,ce=Number,he=String,ue=Number.MAX_SAFE_INTEGER,Te=Object.create,pe=Object.getOwnPropertyDescriptor,fe=Reflect.apply,ye=Reflect.ownKeys,Ie=JSBI.BigInt(0),Se=JSBI.BigInt(1),ge=JSBI.BigInt(60),we=JSBI.BigInt(24),De=JSBI.BigInt(1e3),Ge=JSBI.BigInt(1e6),ve=JSBI.BigInt(1e9),Ce=JSBI.BigInt(-1),Oe=JSBI.multiply(JSBI.BigInt(3600),ve),be=JSBI.multiply(ge,ve),Ee=JSBI.multiply(Oe,we),Me=JSBI.multiply(JSBI.BigInt(-86400),JSBI.BigInt(1e17)),Re=JSBI.multiply(JSBI.BigInt(86400),JSBI.BigInt(1e17)),Fe=-271821,Ye=275760,Pe=JSBI.multiply(JSBI.BigInt(-388152),JSBI.BigInt(1e13)),Ze=JSBI.multiply(Ee,JSBI.BigInt(3660)),Be=JSBI.multiply(Ee,JSBI.BigInt(366)),Ne=JSBI.multiply(Ee,JSBI.BigInt(14)),je=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function isZero(_t){return JSBI.equal(_t,Ie)}function GetMethod(_t,e){const $t=_t[e];if($t!==void 0)return $t}function Call(_t,e,$t){const xt=arguments.length>2?$t:[];return fe(_t,e,xt)}function IsObject(_t){return typeof _t=="object"&&_t!==null||typeof _t=="function"}function ToNumber(_t){if(typeof _t=="bigint")throw new TypeError("Cannot convert BigInt to number");return ce(_t)}function ToIntegerOrInfinity(_t){const e=ToNumber(_t);if(de(e)||e===0)return 0;if(!me(e))return e;const $t=ie(ae(e));return $t===0?0:se(e)*$t}function IsIntegralNumber(_t){if(typeof _t!="number"||de(_t)||!me(_t))return!1;const e=ae(_t);return ie(e)===e}function ToString(_t){if(typeof _t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return he(_t)}function ToIntegerWithTruncation(_t){const e=ToNumber(_t);if(e===0)return 0;if(de(e)||!me(e))throw new RangeError("invalid number value");const $t=le(e);return $t===0?0:$t}function ToPositiveIntegerWithTruncation(_t,e){const $t=ToIntegerWithTruncation(_t);if($t<=0)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return $t}function ToIntegerIfIntegral(_t){const e=ToNumber(_t);if(!me(e))throw new RangeError("infinity is out of range");if(!IsIntegralNumber(e))throw new RangeError(`unsupported fractional value ${_t}`);return e===0?0:e}function divmod(_t,e){return{quotient:JSBI.divide(_t,e),remainder:JSBI.remainder(_t,e)}}function isNegativeJSBI(_t){return JSBI.lessThan(_t,Ie)}function signJSBI(_t){return isZero(_t)?0:isNegativeJSBI(_t)?-1:1}function abs(_t){return JSBI.lessThan(_t,Ie)?JSBI.multiply(_t,Ce):_t}const $e=new Map([["year",ToIntegerWithTruncation],["month",ToPositiveIntegerWithTruncation],["monthCode",ToString],["day",ToPositiveIntegerWithTruncation],["hour",ToIntegerWithTruncation],["minute",ToIntegerWithTruncation],["second",ToIntegerWithTruncation],["millisecond",ToIntegerWithTruncation],["microsecond",ToIntegerWithTruncation],["nanosecond",ToIntegerWithTruncation],["years",ToIntegerIfIntegral],["months",ToIntegerIfIntegral],["weeks",ToIntegerIfIntegral],["days",ToIntegerIfIntegral],["hours",ToIntegerIfIntegral],["minutes",ToIntegerIfIntegral],["seconds",ToIntegerIfIntegral],["milliseconds",ToIntegerIfIntegral],["microseconds",ToIntegerIfIntegral],["nanoseconds",ToIntegerIfIntegral],["era",ToString],["eraYear",ToIntegerOrInfinity],["offset",ToString]]),ke=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Ue=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Ae=new Map(Ue.map(_t=>[_t[0],_t[1]])),Le=new Map(Ue.map(([_t,e])=>[e,_t])),xe=Ue.map(([,_t])=>_t),We=Array.from(Ae.keys()).sort(),qe=new Map;function getIntlDateTimeFormatEnUsForTimeZone(_t){let e=qe.get(_t);return e===void 0&&(e=new re("en-us",{timeZone:he(_t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),qe.set(_t,e)),e}function ToObject(_t){if(_t==null)throw new TypeError(`Expected object not ${_t}`);return Object(_t)}function CopyDataProperties(_t,e,$t,xt){if(e==null)return;const At=ye(e);for(const kt of At)if(!$t.some(Bt=>Object.is(Bt,kt))&&Object.prototype.propertyIsEnumerable.call(e,kt)){const Bt=e[kt];if(xt&&xt.some(jt=>Object.is(jt,Bt)))continue;_t[kt]=Bt}}function IsTemporalInstant(_t){return HasSlot(_t,n)&&!HasSlot(_t,g,p)}function IsTemporalTimeZone(_t){return HasSlot(_t,a)}function IsTemporalCalendar(_t){return HasSlot(_t,F)}function IsTemporalDuration(_t){return HasSlot(_t,w,D,v,C,O,b,E$1,M,R)}function IsTemporalDate(_t){return HasSlot(_t,f)}function IsTemporalTime(_t){return HasSlot(_t,d,m,c,h,u,T)&&!HasSlot(_t,i$1,s,l)}function IsTemporalDateTime(_t){return HasSlot(_t,i$1,s,l,d,m,c,h,u,T)}function IsTemporalYearMonth(_t){return HasSlot(_t,y)}function IsTemporalMonthDay(_t){return HasSlot(_t,I)}function IsTemporalZonedDateTime(_t){return HasSlot(_t,n,g,p)}function RejectTemporalLikeObject(_t){if(HasSlot(_t,p)||HasSlot(_t,g))throw new TypeError("with() does not support a calendar or timeZone property");if(IsTemporalTime(_t))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(_t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(_t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function ParseTemporalTimeZone(_t){const{ianaName:e,offset:$t,z:xt}=function(kt){if(new RegExp(`^${$.source}$`,"i").test(kt))return{ianaName:kt};try{const Bt=ParseISODateTime(kt);if(Bt.z||Bt.offset||Bt.ianaName)return Bt}catch{}throw new RangeError(`Invalid time zone: ${kt}`)}(_t);return e?GetCanonicalTimeZoneIdentifier(e):xt?"UTC":FormatTimeZoneOffsetString(ParseTimeZoneOffsetString($t))}function MaybeFormatCalendarAnnotation(_t,e){return e==="never"?"":FormatCalendarAnnotation(ToTemporalCalendarIdentifier(_t),e)}function FormatCalendarAnnotation(_t,e){return e==="never"||e==="auto"&&_t==="iso8601"?"":`[${e==="critical"?"!":""}u-ca=${_t}]`}function ParseISODateTime(_t){const e=V.exec(_t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${_t}`);let $t=e[1];if($t[0]==="−"&&($t=`-${$t.slice(1)}`),$t==="-000000")throw new RangeError(`invalid ISO 8601 string: ${_t}`);const xt=ToIntegerOrInfinity($t),At=ToIntegerOrInfinity(e[2]||e[4]),kt=ToIntegerOrInfinity(e[3]||e[5]),Bt=ToIntegerOrInfinity(e[6]),jt=e[6]!==void 0,Lt=ToIntegerOrInfinity(e[7]||e[10]);let Ut=ToIntegerOrInfinity(e[8]||e[11]);Ut===60&&(Ut=59);const Nt=(e[9]||e[12])+"000000000",qt=ToIntegerOrInfinity(Nt.slice(0,3)),Kt=ToIntegerOrInfinity(Nt.slice(3,6)),zt=ToIntegerOrInfinity(Nt.slice(6,9));let Vt,Ht=!1;if(e[13])Vt=void 0,Ht=!0;else if(e[14]&&e[15]){const Wt=e[14]==="-"||e[14]==="−"?"-":"+",nr=e[15]||"00",yr=e[16]||"00",vr=e[17]||"00";let Ir=e[18]||"0";if(Vt=`${Wt}${nr}:${yr}`,+Ir){for(;Ir.endsWith("0");)Ir=Ir.slice(0,-1);Vt+=`:${vr}.${Ir}`}else+vr&&(Vt+=`:${vr}`);Vt==="-00:00"&&(Vt="+00:00")}const Jt=e[19],rr=e[20];let Qt;for(const[,Wt,nr,yr]of rr.matchAll(H))if(nr==="u-ca")Qt===void 0&&(Qt=yr);else if(Wt==="!")throw new RangeError(`Unrecognized annotation: !${nr}=${yr}`);return RejectDateTime(xt,At,kt,Bt,Lt,Ut,qt,Kt,zt),{year:xt,month:At,day:kt,hasTime:jt,hour:Bt,minute:Lt,second:Ut,millisecond:qt,microsecond:Kt,nanosecond:zt,ianaName:Jt,offset:Vt,z:Ht,calendar:Qt}}function ParseTemporalYearMonthString(_t){const e=_$1.exec(_t);let $t,xt,At,kt;if(e){let Bt=e[1];if(Bt[0]==="−"&&(Bt=`-${Bt.slice(1)}`),Bt==="-000000")throw new RangeError(`invalid ISO 8601 string: ${_t}`);$t=ToIntegerOrInfinity(Bt),xt=ToIntegerOrInfinity(e[2]);const jt=e[3];for(const[,Lt,Ut,Nt]of jt.matchAll(H))if(Ut==="u-ca")At===void 0&&(At=Nt);else if(Lt==="!")throw new RangeError(`Unrecognized annotation: !${Ut}=${Nt}`);if(At!==void 0&&At!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let Bt;if({year:$t,month:xt,calendar:At,day:kt,z:Bt}=ParseISODateTime(_t),Bt)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:$t,month:xt,calendar:At,referenceISODay:kt}}function ParseTemporalMonthDayString(_t){const e=J.exec(_t);let $t,xt,At,kt;if(e){$t=ToIntegerOrInfinity(e[1]),xt=ToIntegerOrInfinity(e[2]);const Bt=e[3];for(const[,jt,Lt,Ut]of Bt.matchAll(H))if(Lt==="u-ca")At===void 0&&(At=Ut);else if(jt==="!")throw new RangeError(`Unrecognized annotation: !${Lt}=${Ut}`);if(At!==void 0&&At!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let Bt;if({month:$t,day:xt,calendar:At,year:kt,z:Bt}=ParseISODateTime(_t),Bt)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:$t,day:xt,calendar:At,referenceISOYear:kt}}function ParseTemporalInstant(_t){let{year:e,month:$t,day:xt,hour:At,minute:kt,second:Bt,millisecond:jt,microsecond:Lt,nanosecond:Ut,offset:Nt,z:qt}=function(Ht){const Jt=ParseISODateTime(Ht);if(!Jt.z&&!Jt.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return Jt}(_t);if(!qt&&!Nt)throw new RangeError("Temporal.Instant requires a time zone offset");const Kt=qt?0:ParseTimeZoneOffsetString(Nt);({year:e,month:$t,day:xt,hour:At,minute:kt,second:Bt,millisecond:jt,microsecond:Lt,nanosecond:Ut}=BalanceISODateTime(e,$t,xt,At,kt,Bt,jt,Lt,Ut-Kt));const zt=GetUTCEpochNanoseconds(e,$t,xt,At,kt,Bt,jt,Lt,Ut);if(zt===null)throw new RangeError("DateTime outside of supported range");return zt}function RegulateISODate(_t,e,$t,xt){let At=_t,kt=e,Bt=$t;switch(xt){case"reject":RejectISODate(At,kt,Bt);break;case"constrain":({year:At,month:kt,day:Bt}=ConstrainISODate(At,kt,Bt))}return{year:At,month:kt,day:Bt}}function RegulateTime(_t,e,$t,xt,At,kt,Bt){let jt=_t,Lt=e,Ut=$t,Nt=xt,qt=At,Kt=kt;switch(Bt){case"reject":RejectTime(jt,Lt,Ut,Nt,qt,Kt);break;case"constrain":({hour:jt,minute:Lt,second:Ut,millisecond:Nt,microsecond:qt,nanosecond:Kt}=function(Vt,Ht,Jt,rr,Qt,Wt){const nr=ConstrainToRange(Vt,0,23),yr=ConstrainToRange(Ht,0,59),vr=ConstrainToRange(Jt,0,59),Ir=ConstrainToRange(rr,0,999),xr=ConstrainToRange(Qt,0,999),Or=ConstrainToRange(Wt,0,999);return{hour:nr,minute:yr,second:vr,millisecond:Ir,microsecond:xr,nanosecond:Or}}(jt,Lt,Ut,Nt,qt,Kt))}return{hour:jt,minute:Lt,second:Ut,millisecond:Nt,microsecond:qt,nanosecond:Kt}}function ToTemporalDurationRecord(_t){if(!IsObject(_t))return function(Vt){const Ht=Q.exec(Vt);if(!Ht)throw new RangeError(`invalid duration: ${Vt}`);if(Ht.slice(2).every(ur=>ur===void 0))throw new RangeError(`invalid duration: ${Vt}`);const Jt=Ht[1]==="-"||Ht[1]==="−"?-1:1,rr=Ht[2]===void 0?0:ToIntegerWithTruncation(Ht[2])*Jt,Qt=Ht[3]===void 0?0:ToIntegerWithTruncation(Ht[3])*Jt,Wt=Ht[4]===void 0?0:ToIntegerWithTruncation(Ht[4])*Jt,nr=Ht[5]===void 0?0:ToIntegerWithTruncation(Ht[5])*Jt,yr=Ht[6]===void 0?0:ToIntegerWithTruncation(Ht[6])*Jt,vr=Ht[7],Ir=Ht[8],xr=Ht[9],Or=Ht[10],Nr=Ht[11];let kr=0,lr=0,ir=0;if(vr!==void 0){if(Ir??xr??Or??Nr)throw new RangeError("only the smallest unit can be fractional");ir=3600*ToIntegerOrInfinity((vr+"000000000").slice(0,9))*Jt}else if(kr=Ir===void 0?0:ToIntegerWithTruncation(Ir)*Jt,xr!==void 0){if(Or??Nr)throw new RangeError("only the smallest unit can be fractional");ir=60*ToIntegerOrInfinity((xr+"000000000").slice(0,9))*Jt}else lr=Or===void 0?0:ToIntegerWithTruncation(Or)*Jt,Nr!==void 0&&(ir=ToIntegerOrInfinity((Nr+"000000000").slice(0,9))*Jt);const Xt=ir%1e3,er=le(ir/1e3)%1e3,pr=le(ir/1e6)%1e3;return lr+=le(ir/1e9)%60,kr+=le(ir/6e10),RejectDuration(rr,Qt,Wt,nr,yr,kr,lr,pr,er,Xt),{years:rr,months:Qt,weeks:Wt,days:nr,hours:yr,minutes:kr,seconds:lr,milliseconds:pr,microseconds:er,nanoseconds:Xt}}(ToString(_t));if(IsTemporalDuration(_t))return{years:GetSlot(_t,w),months:GetSlot(_t,D),weeks:GetSlot(_t,G),days:GetSlot(_t,v),hours:GetSlot(_t,C),minutes:GetSlot(_t,O),seconds:GetSlot(_t,b),milliseconds:GetSlot(_t,E$1),microseconds:GetSlot(_t,M),nanoseconds:GetSlot(_t,R)};const e={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let $t=function(Vt){if(!IsObject(Vt))throw new TypeError("invalid duration-like");const Ht={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let Jt=!1;for(const rr of We){const Qt=Vt[rr];Qt!==void 0&&(Jt=!0,Ht[rr]=ToIntegerIfIntegral(Qt))}if(!Jt)throw new TypeError("invalid duration-like");return Ht}(_t);for(const zt of We){const Vt=$t[zt];Vt!==void 0&&(e[zt]=Vt)}let{years:xt,months:At,weeks:kt,days:Bt,hours:jt,minutes:Lt,seconds:Ut,milliseconds:Nt,microseconds:qt,nanoseconds:Kt}=e;return RejectDuration(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt),{years:xt,months:At,weeks:kt,days:Bt,hours:jt,minutes:Lt,seconds:Ut,milliseconds:Nt,microseconds:qt,nanoseconds:Kt}}function ToTemporalOverflow(_t){return _t===void 0?"constrain":GetOption(_t,"overflow",["constrain","reject"],"constrain")}function ToTemporalDisambiguation(_t){return _t===void 0?"compatible":GetOption(_t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function ToTemporalRoundingMode(_t,e){return GetOption(_t,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],e)}function ToTemporalOffset(_t,e){return _t===void 0?e:GetOption(_t,"offset",["prefer","use","ignore","reject"],e)}function ToCalendarNameOption(_t){return GetOption(_t,"calendarName",["auto","always","never","critical"],"auto")}function ToTemporalRoundingIncrement(_t){let e=_t.roundingIncrement;if(e===void 0)return 1;if(e=ToNumber(e),!me(e))throw new RangeError("roundingIncrement must be finite");const $t=le(e);if($t<1||$t>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${e}`);return $t}function ValidateTemporalRoundingIncrement(_t,e,$t){const xt=$t?e:e-1;if(_t>xt)throw new RangeError(`roundingIncrement must be at least 1 and less than ${xt}, not ${_t}`);if(e%_t!=0)throw new RangeError(`Rounding increment must divide evenly into ${e}`)}function ToFractionalSecondDigits(_t){const e=_t.fractionalSecondDigits;if(e===void 0)return"auto";if(typeof e!="number"){if(ToString(e)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return"auto"}const $t=ie(e);if(!me($t)||$t<0||$t>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`);return $t}function ToSecondsStringPrecisionRecord(_t,e){switch(_t){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(e){case"auto":return{precision:e,unit:"nanosecond",increment:1};case 0:return{precision:e,unit:"second",increment:1};case 1:case 2:case 3:return{precision:e,unit:"millisecond",increment:10**(3-e)};case 4:case 5:case 6:return{precision:e,unit:"microsecond",increment:10**(6-e)};case 7:case 8:case 9:return{precision:e,unit:"nanosecond",increment:10**(9-e)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${e}`)}}const He=Symbol("~required~");function GetTemporalUnit(_t,e,$t,xt,At=[]){const kt=[];for(const[,Ut,Nt]of Ue)$t!=="datetime"&&$t!==Nt||kt.push(Ut);kt.push(...At);let Bt=xt;Bt===He?Bt=void 0:Bt!==void 0&&kt.push(Bt);const jt=[...kt];for(const Ut of kt){const Nt=Le.get(Ut);Nt!==void 0&&jt.push(Nt)}let Lt=GetOption(_t,e,jt,Bt);if(Lt===void 0&&xt===He)throw new RangeError(`${e} is required`);return Ae.has(Lt)?Ae.get(Lt):Lt}function ToRelativeTemporalObject(_t){const e=_t.relativeTo;if(e===void 0)return e;let $t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt="option",Ht=!1;if(IsObject(e)){if(IsTemporalZonedDateTime(e)||IsTemporalDate(e))return e;if(IsTemporalDateTime(e))return TemporalDateTimeToDate(e);qt=GetTemporalCalendarSlotValueWithISODefault(e);const Jt=CalendarFields(qt,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);Jt.push("timeZone","offset");const rr=PrepareTemporalFields(e,Jt,[]),Qt=Te(null);Qt.overflow="constrain",{year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt}=InterpretTemporalDateTimeFields(qt,rr,Qt),zt=rr.offset,zt===void 0&&(Vt="wall"),Kt=rr.timeZone,Kt!==void 0&&(Kt=ToTemporalTimeZoneSlotValue(Kt))}else{let Jt,rr;if({year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt,calendar:qt,ianaName:Jt,offset:zt,z:rr}=ParseISODateTime(ToString(e)),Jt)Kt=ToTemporalTimeZoneSlotValue(Jt),rr?Vt="exact":zt||(Vt="wall"),Ht=!0;else if(rr)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(qt||(qt="iso8601"),!IsBuiltinCalendar(qt))throw new RangeError(`invalid calendar identifier ${qt}`);qt=ASCIILowercase(qt)}return Kt===void 0?CreateTemporalDate($t,xt,At,qt):CreateTemporalZonedDateTime(InterpretISODateTimeOffset($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,Vt,Vt==="option"?ParseTimeZoneOffsetString(zt):0,Kt,"compatible","reject",Ht),Kt,qt)}function DefaultTemporalLargestUnit(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){for(const[Nt,qt]of[["years",_t],["months",e],["weeks",$t],["days",xt],["hours",At],["minutes",kt],["seconds",Bt],["milliseconds",jt],["microseconds",Lt],["nanoseconds",Ut]])if(qt!==0)return Ae.get(Nt);return"nanosecond"}function LargerOfTwoTemporalUnits(_t,e){return xe.indexOf(_t)>xe.indexOf(e)?e:_t}function PrepareTemporalFields(_t,e,$t,{emptySourceErrorMessage:xt}={emptySourceErrorMessage:"no supported properties found"}){const At=Te(null);let kt=!1;e.sort();for(const Bt of e){let jt=_t[Bt];if(jt!==void 0)kt=!0,$e.has(Bt)&&(jt=$e.get(Bt)(jt)),At[Bt]=jt;else if($t!=="partial"){if(ee.call($t,Bt))throw new TypeError(`required property '${Bt}' missing or undefined`);jt=ke.get(Bt),At[Bt]=jt}}if($t==="partial"&&!kt)throw new TypeError(xt);return At}function ToTemporalTimeRecord(_t,e="complete"){const $t=["hour","microsecond","millisecond","minute","nanosecond","second"],xt=PrepareTemporalFields(_t,$t,"partial",{emptySourceErrorMessage:"invalid time-like"}),At={};for(const kt of $t){const Bt=pe(xt,kt);Bt!==void 0?At[kt]=Bt.value:e==="complete"&&(At[kt]=0)}return At}function ToTemporalDate(_t,e){let $t=_t;if(IsObject($t)){if(IsTemporalDate($t))return $t;if(IsTemporalZonedDateTime($t)&&(ToTemporalOverflow(e),$t=GetPlainDateTimeFor(GetSlot($t,g),GetSlot($t,S),GetSlot($t,p))),IsTemporalDateTime($t))return ToTemporalOverflow(e),CreateTemporalDate(GetSlot($t,i$1),GetSlot($t,s),GetSlot($t,l),GetSlot($t,p));const Lt=GetTemporalCalendarSlotValueWithISODefault($t);return CalendarDateFromFields(Lt,PrepareTemporalFields($t,CalendarFields(Lt,["day","month","monthCode","year"]),[]),e)}ToTemporalOverflow(e);let{year:xt,month:At,day:kt,calendar:Bt,z:jt}=function(Ut){return ParseISODateTime(Ut)}(ToString($t));if(jt)throw new RangeError("Z designator not supported for PlainDate");if(Bt||(Bt="iso8601"),!IsBuiltinCalendar(Bt))throw new RangeError(`invalid calendar identifier ${Bt}`);return Bt=ASCIILowercase(Bt),CreateTemporalDate(xt,At,kt,Bt)}function InterpretTemporalDateTimeFields(_t,e,$t){let{hour:xt,minute:At,second:kt,millisecond:Bt,microsecond:jt,nanosecond:Lt}=ToTemporalTimeRecord(e);const Ut=ToTemporalOverflow($t),Nt=CalendarDateFromFields(_t,e,$t),qt=GetSlot(Nt,i$1),Kt=GetSlot(Nt,s),zt=GetSlot(Nt,l);return{hour:xt,minute:At,second:kt,millisecond:Bt,microsecond:jt,nanosecond:Lt}=RegulateTime(xt,At,kt,Bt,jt,Lt,Ut),{year:qt,month:Kt,day:zt,hour:xt,minute:At,second:kt,millisecond:Bt,microsecond:jt,nanosecond:Lt}}function ToTemporalDateTime(_t,e){let $t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt;if(IsObject(_t)){if(IsTemporalDateTime(_t))return _t;if(IsTemporalZonedDateTime(_t))return ToTemporalOverflow(e),GetPlainDateTimeFor(GetSlot(_t,g),GetSlot(_t,S),GetSlot(_t,p));if(IsTemporalDate(_t))return ToTemporalOverflow(e),CreateTemporalDateTime(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l),0,0,0,0,0,0,GetSlot(_t,p));qt=GetTemporalCalendarSlotValueWithISODefault(_t);const Kt=PrepareTemporalFields(_t,CalendarFields(qt,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt}=InterpretTemporalDateTimeFields(qt,Kt,e))}else{let Kt;if(ToTemporalOverflow(e),{year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt,calendar:qt,z:Kt}=function(Vt){return ParseISODateTime(Vt)}(ToString(_t)),Kt)throw new RangeError("Z designator not supported for PlainDateTime");if(RejectDateTime($t,xt,At,kt,Bt,jt,Lt,Ut,Nt),qt||(qt="iso8601"),!IsBuiltinCalendar(qt))throw new RangeError(`invalid calendar identifier ${qt}`);qt=ASCIILowercase(qt)}return CreateTemporalDateTime($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt)}function ToTemporalDuration(_t){if(IsTemporalDuration(_t))return _t;let{years:e,months:$t,weeks:xt,days:At,hours:kt,minutes:Bt,seconds:jt,milliseconds:Lt,microseconds:Ut,nanoseconds:Nt}=ToTemporalDurationRecord(_t);return new(GetIntrinsic("%Temporal.Duration%"))(e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt)}function ToTemporalInstant(_t){if(IsTemporalInstant(_t))return _t;if(IsTemporalZonedDateTime(_t))return new(GetIntrinsic("%Temporal.Instant%"))(GetSlot(_t,n));const e=ParseTemporalInstant(ToString(_t));return new(GetIntrinsic("%Temporal.Instant%"))(e)}function ToTemporalMonthDay(_t,e){let $t=_t;if(IsObject($t)){if(IsTemporalMonthDay($t))return $t;let jt,Lt;if(HasSlot($t,p))jt=GetSlot($t,p),Lt=!1;else{let Nt=$t.calendar;Lt=Nt===void 0,Nt===void 0&&(Nt="iso8601"),jt=ToTemporalCalendarSlotValue(Nt)}const Ut=PrepareTemporalFields($t,CalendarFields(jt,["day","month","monthCode","year"]),[]);return Lt&&Ut.month!==void 0&&Ut.monthCode===void 0&&Ut.year===void 0&&(Ut.year=1972),CalendarMonthDayFromFields(jt,Ut,e)}ToTemporalOverflow(e);let{month:xt,day:At,referenceISOYear:kt,calendar:Bt}=ParseTemporalMonthDayString(ToString($t));if(Bt===void 0&&(Bt="iso8601"),!IsBuiltinCalendar(Bt))throw new RangeError(`invalid calendar identifier ${Bt}`);return Bt=ASCIILowercase(Bt),kt===void 0?(RejectISODate(1972,xt,At),CreateTemporalMonthDay(xt,At,Bt)):CalendarMonthDayFromFields(Bt,CreateTemporalMonthDay(xt,At,Bt,kt))}function ToTemporalTime(_t,e="constrain"){let $t,xt,At,kt,Bt,jt,Lt=_t;if(IsObject(Lt)){if(IsTemporalTime(Lt))return Lt;if(IsTemporalZonedDateTime(Lt)&&(Lt=GetPlainDateTimeFor(GetSlot(Lt,g),GetSlot(Lt,S),GetSlot(Lt,p))),IsTemporalDateTime(Lt))return new(GetIntrinsic("%Temporal.PlainTime%"))(GetSlot(Lt,d),GetSlot(Lt,m),GetSlot(Lt,c),GetSlot(Lt,h),GetSlot(Lt,u),GetSlot(Lt,T));({hour:$t,minute:xt,second:At,millisecond:kt,microsecond:Bt,nanosecond:jt}=ToTemporalTimeRecord(Lt)),{hour:$t,minute:xt,second:At,millisecond:kt,microsecond:Bt,nanosecond:jt}=RegulateTime($t,xt,At,kt,Bt,jt,e)}else({hour:$t,minute:xt,second:At,millisecond:kt,microsecond:Bt,nanosecond:jt}=function(Nt){const qt=z.exec(Nt);let Kt,zt,Vt,Ht,Jt,rr,Qt;if(qt){Kt=ToIntegerOrInfinity(qt[1]),zt=ToIntegerOrInfinity(qt[2]||qt[5]),Vt=ToIntegerOrInfinity(qt[3]||qt[6]),Vt===60&&(Vt=59);const Wt=(qt[4]||qt[7])+"000000000";Ht=ToIntegerOrInfinity(Wt.slice(0,3)),Jt=ToIntegerOrInfinity(Wt.slice(3,6)),rr=ToIntegerOrInfinity(Wt.slice(6,9)),Qt=qt[14];for(const[,nr,yr,vr]of Qt.matchAll(H))if(yr!=="u-ca"&&nr==="!")throw new RangeError(`Unrecognized annotation: !${yr}=${vr}`);if(qt[8])throw new RangeError("Z designator not supported for PlainTime")}else{let Wt,nr;if({hasTime:nr,hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr,z:Wt}=ParseISODateTime(Nt),!nr)throw new RangeError(`time is missing in string: ${Nt}`);if(Wt)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(Nt))return{hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr};try{const{month:Wt,day:nr}=ParseTemporalMonthDayString(Nt);RejectISODate(1972,Wt,nr)}catch{try{const{year:Wt,month:nr}=ParseTemporalYearMonthString(Nt);RejectISODate(Wt,nr,1)}catch{return{hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr}}}throw new RangeError(`invalid ISO 8601 time-only string ${Nt}; may need a T prefix`)}(ToString(Lt))),RejectTime($t,xt,At,kt,Bt,jt);return new(GetIntrinsic("%Temporal.PlainTime%"))($t,xt,At,kt,Bt,jt)}function ToTemporalYearMonth(_t,e){if(IsObject(_t)){if(IsTemporalYearMonth(_t))return _t;const Bt=GetTemporalCalendarSlotValueWithISODefault(_t);return CalendarYearMonthFromFields(Bt,PrepareTemporalFields(_t,CalendarFields(Bt,["month","monthCode","year"]),[]),e)}ToTemporalOverflow(e);let{year:$t,month:xt,referenceISODay:At,calendar:kt}=ParseTemporalYearMonthString(ToString(_t));if(kt===void 0&&(kt="iso8601"),!IsBuiltinCalendar(kt))throw new RangeError(`invalid calendar identifier ${kt}`);return kt=ASCIILowercase(kt),At===void 0?(RejectISODate($t,xt,1),CreateTemporalYearMonth($t,xt,kt)):CalendarYearMonthFromFields(kt,CreateTemporalYearMonth($t,xt,kt,At))}function InterpretISODateTimeOffset(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt){const Ht=new(GetIntrinsic("%Temporal.PlainDateTime%"))(_t,e,$t,xt,At,kt,Bt,jt,Lt);if(Ut==="wall"||zt==="ignore")return GetSlot(GetInstantFor(qt,Ht,Kt),n);if(Ut==="exact"||zt==="use"){const rr=GetUTCEpochNanoseconds(_t,e,$t,xt,At,kt,Bt,jt,Lt);if(rr===null)throw new RangeError("ZonedDateTime outside of supported range");return JSBI.subtract(rr,JSBI.BigInt(Nt))}const Jt=GetPossibleInstantsFor(qt,Ht);for(const rr of Jt){const Qt=GetOffsetNanosecondsFor(qt,rr),Wt=JSBI.toNumber(RoundNumberToIncrement(JSBI.BigInt(Qt),be,"halfExpand"));if(Qt===Nt||Vt&&Wt===Nt)return GetSlot(rr,n)}if(zt==="reject"){const rr=FormatTimeZoneOffsetString(Nt),Qt=IsTemporalTimeZone(qt)?GetSlot(qt,a):"time zone";throw new RangeError(`Offset ${rr} is invalid for ${Ht.toString()} in ${Qt}`)}return GetSlot(DisambiguatePossibleInstants(Jt,qt,Ht,Kt),n)}function ToTemporalZonedDateTime(_t,e){let $t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt=!1,rr="option";if(IsObject(_t)){if(IsTemporalZonedDateTime(_t))return _t;zt=GetTemporalCalendarSlotValueWithISODefault(_t);const Wt=CalendarFields(zt,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);Wt.push("timeZone","offset");const nr=PrepareTemporalFields(_t,Wt,["timeZone"]);qt=ToTemporalTimeZoneSlotValue(nr.timeZone),Kt=nr.offset,Kt===void 0&&(rr="wall"),Vt=ToTemporalDisambiguation(e),Ht=ToTemporalOffset(e,"reject"),{year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt}=InterpretTemporalDateTimeFields(zt,nr,e)}else{let Wt,nr;if({year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt,ianaName:Wt,offset:Kt,z:nr,calendar:zt}=function(vr){const Ir=ParseISODateTime(vr);if(!Ir.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return Ir}(ToString(_t)),qt=ToTemporalTimeZoneSlotValue(Wt),nr?rr="exact":Kt||(rr="wall"),zt||(zt="iso8601"),!IsBuiltinCalendar(zt))throw new RangeError(`invalid calendar identifier ${zt}`);zt=ASCIILowercase(zt),Jt=!0,Vt=ToTemporalDisambiguation(e),Ht=ToTemporalOffset(e,"reject"),ToTemporalOverflow(e)}let Qt=0;return rr==="option"&&(Qt=ParseTimeZoneOffsetString(Kt)),CreateTemporalZonedDateTime(InterpretISODateTimeOffset($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,rr,Qt,qt,Vt,Ht,Jt),qt,zt)}function CreateTemporalDateSlots(_t,e,$t,xt,At){RejectISODate(e,$t,xt),RejectDateRange(e,$t,xt),N(_t),SetSlot(_t,i$1,e),SetSlot(_t,s,$t),SetSlot(_t,l,xt),SetSlot(_t,p,At),SetSlot(_t,f,!0)}function CreateTemporalDate(_t,e,$t,xt="iso8601"){const At=GetIntrinsic("%Temporal.PlainDate%"),kt=Te(At.prototype);return CreateTemporalDateSlots(kt,_t,e,$t,xt),kt}function CreateTemporalDateTimeSlots(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt){RejectDateTime(e,$t,xt,At,kt,Bt,jt,Lt,Ut),RejectDateTimeRange(e,$t,xt,At,kt,Bt,jt,Lt,Ut),N(_t),SetSlot(_t,i$1,e),SetSlot(_t,s,$t),SetSlot(_t,l,xt),SetSlot(_t,d,At),SetSlot(_t,m,kt),SetSlot(_t,c,Bt),SetSlot(_t,h,jt),SetSlot(_t,u,Lt),SetSlot(_t,T,Ut),SetSlot(_t,p,Nt)}function CreateTemporalDateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut="iso8601"){const Nt=GetIntrinsic("%Temporal.PlainDateTime%"),qt=Te(Nt.prototype);return CreateTemporalDateTimeSlots(qt,_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut),qt}function CreateTemporalMonthDaySlots(_t,e,$t,xt,At){RejectISODate(At,e,$t),RejectDateRange(At,e,$t),N(_t),SetSlot(_t,s,e),SetSlot(_t,l,$t),SetSlot(_t,i$1,At),SetSlot(_t,p,xt),SetSlot(_t,I,!0)}function CreateTemporalMonthDay(_t,e,$t="iso8601",xt=1972){const At=GetIntrinsic("%Temporal.PlainMonthDay%"),kt=Te(At.prototype);return CreateTemporalMonthDaySlots(kt,_t,e,$t,xt),kt}function CreateTemporalYearMonthSlots(_t,e,$t,xt,At){RejectISODate(e,$t,At),function(Bt,jt){RejectToRange(Bt,Fe,Ye),Bt===Fe?RejectToRange(jt,4,12):Bt===Ye&&RejectToRange(jt,1,9)}(e,$t),N(_t),SetSlot(_t,i$1,e),SetSlot(_t,s,$t),SetSlot(_t,l,At),SetSlot(_t,p,xt),SetSlot(_t,y,!0)}function CreateTemporalYearMonth(_t,e,$t="iso8601",xt=1){const At=GetIntrinsic("%Temporal.PlainYearMonth%"),kt=Te(At.prototype);return CreateTemporalYearMonthSlots(kt,_t,e,$t,xt),kt}function CreateTemporalZonedDateTimeSlots(_t,e,$t,xt){ValidateEpochNanoseconds(e),N(_t),SetSlot(_t,n,e),SetSlot(_t,g,$t),SetSlot(_t,p,xt);const At=new(GetIntrinsic("%Temporal.Instant%"))(GetSlot(_t,n));SetSlot(_t,S,At)}function CreateTemporalZonedDateTime(_t,e,$t="iso8601"){const xt=GetIntrinsic("%Temporal.ZonedDateTime%"),At=Te(xt.prototype);return CreateTemporalZonedDateTimeSlots(At,_t,e,$t),At}function CalendarFields(_t,e){if(typeof _t=="string"){const At=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.fields%"),At,[e])}const $t=Call(GetMethod(_t,"fields"),_t,[e]),xt=[];for(const At of $t){if(typeof At!="string")throw new TypeError("bad return from calendar.fields()");te.call(xt,At)}return xt}function CalendarMergeFields(_t,e,$t){if(typeof _t=="string"){const At=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.mergeFields%"),At,[e,$t])}const xt=Call(GetMethod(_t,"mergeFields"),_t,[e,$t]);if(!IsObject(xt))throw new TypeError("bad return from calendar.mergeFields()");return xt}function CalendarDateAdd(_t,e,$t,xt,At){let kt=At;if(typeof _t=="string"){const jt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.dateAdd%"),jt,[e,$t,xt])}kt===void 0&&(kt=GetMethod(_t,"dateAdd"));const Bt=fe(kt,_t,[e,$t,xt]);if(!IsTemporalDate(Bt))throw new TypeError("invalid result");return Bt}function CalendarDateUntil(_t,e,$t,xt,At){let kt=At;if(typeof _t=="string"){const jt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.dateUntil%"),jt,[e,$t,xt])}kt===void 0&&(kt=GetMethod(_t,"dateUntil"));const Bt=fe(kt,_t,[e,$t,xt]);if(!IsTemporalDuration(Bt))throw new TypeError("invalid result");return Bt}function CalendarYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.year%"),xt,[e])}let $t=Call(GetMethod(_t,"year"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar year result must be an integer");if(!IsIntegralNumber($t))throw new RangeError("calendar year result must be an integer");return $t}function CalendarMonth(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.month%"),xt,[e])}let $t=Call(GetMethod(_t,"month"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar month result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar month result must be a positive integer");return $t}function CalendarMonthCode(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.monthCode%"),xt,[e])}let $t=Call(GetMethod(_t,"monthCode"),_t,[e]);if(typeof $t!="string")throw new TypeError("calendar monthCode result must be a string");return $t}function CalendarDay(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.day%"),xt,[e])}const $t=Call(GetMethod(_t,"day"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar day result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar day result must be a positive integer");return $t}function CalendarEra(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.era%"),xt,[e])}let $t=Call(GetMethod(_t,"era"),_t,[e]);if($t===void 0)return $t;if(typeof $t!="string")throw new TypeError("calendar era result must be a string or undefined");return $t}function CalendarEraYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.eraYear%"),xt,[e])}let $t=Call(GetMethod(_t,"eraYear"),_t,[e]);if($t===void 0)return $t;if(typeof $t!="number")throw new TypeError("calendar eraYear result must be an integer or undefined");if(!IsIntegralNumber($t))throw new RangeError("calendar eraYear result must be an integer or undefined");return $t}function CalendarDayOfWeek(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.dayOfWeek%"),xt,[e])}const $t=Call(GetMethod(_t,"dayOfWeek"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return $t}function CalendarDayOfYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.dayOfYear%"),xt,[e])}const $t=Call(GetMethod(_t,"dayOfYear"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar dayOfYear result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return $t}function CalendarWeekOfYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.weekOfYear%"),xt,[e])}const $t=Call(GetMethod(_t,"weekOfYear"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar weekOfYear result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return $t}function CalendarYearOfWeek(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.yearOfWeek%"),xt,[e])}const $t=Call(GetMethod(_t,"yearOfWeek"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar yearOfWeek result must be an integer");if(!IsIntegralNumber($t))throw new RangeError("calendar yearOfWeek result must be an integer");return $t}function CalendarDaysInWeek(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.daysInWeek%"),xt,[e])}const $t=Call(GetMethod(_t,"daysInWeek"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar daysInWeek result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return $t}function CalendarDaysInMonth(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.daysInMonth%"),xt,[e])}const $t=Call(GetMethod(_t,"daysInMonth"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar daysInMonth result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return $t}function CalendarDaysInYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.daysInYear%"),xt,[e])}const $t=Call(GetMethod(_t,"daysInYear"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar daysInYear result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar daysInYear result must be a positive integer");return $t}function CalendarMonthsInYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.monthsInYear%"),xt,[e])}const $t=Call(GetMethod(_t,"monthsInYear"),_t,[e]);if(typeof $t!="number")throw new TypeError("calendar monthsInYear result must be a positive integer");if(!IsIntegralNumber($t)||$t<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return $t}function CalendarInLeapYear(_t,e){if(typeof _t=="string"){const xt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.inLeapYear%"),xt,[e])}const $t=Call(GetMethod(_t,"inLeapYear"),_t,[e]);if(typeof $t!="boolean")throw new TypeError("calendar inLeapYear result must be a boolean");return $t}function ToTemporalCalendarSlotValue(_t){if(IsObject(_t)){if(HasSlot(_t,p))return GetSlot(_t,p);if(!function(At){return!!IsTemporalCalendar(At)||"dateAdd"in At&&"dateFromFields"in At&&"dateUntil"in At&&"day"in At&&"dayOfWeek"in At&&"dayOfYear"in At&&"daysInMonth"in At&&"daysInWeek"in At&&"daysInYear"in At&&"fields"in At&&"id"in At&&"inLeapYear"in At&&"mergeFields"in At&&"month"in At&&"monthCode"in At&&"monthDayFromFields"in At&&"monthsInYear"in At&&"weekOfYear"in At&&"year"in At&&"yearMonthFromFields"in At&&"yearOfWeek"in At}(_t))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return _t}const e=ToString(_t);if(IsBuiltinCalendar(e))return ASCIILowercase(e);let $t;try{({calendar:$t}=ParseISODateTime(e))}catch{try{({calendar:$t}=ParseTemporalYearMonthString(e))}catch{({calendar:$t}=ParseTemporalMonthDayString(e))}}if($t||($t="iso8601"),!IsBuiltinCalendar($t))throw new RangeError(`invalid calendar identifier ${$t}`);return ASCIILowercase($t)}function GetTemporalCalendarSlotValueWithISODefault(_t){if(HasSlot(_t,p))return GetSlot(_t,p);const{calendar:e}=_t;return e===void 0?"iso8601":ToTemporalCalendarSlotValue(e)}function ToTemporalCalendarIdentifier(_t){if(typeof _t=="string")return _t;const e=_t.id;if(typeof e!="string")throw new TypeError("calendar.id should be a string");return e}function ToTemporalCalendarObject(_t){return IsObject(_t)?_t:new(GetIntrinsic("%Temporal.Calendar%"))(_t)}function CalendarEquals(_t,e){return _t===e?!0:ToTemporalCalendarIdentifier(_t)===ToTemporalCalendarIdentifier(e)}function ThrowIfCalendarsNotEqual(_t,e,$t){if(_t===e)return;const xt=ToTemporalCalendarIdentifier(_t),At=ToTemporalCalendarIdentifier(e);if(xt!==At)throw new RangeError(`cannot ${$t} of ${xt} and ${At} calendars`)}function ConsolidateCalendars(_t,e){if(_t===e)return e;const $t=ToTemporalCalendarIdentifier(_t),xt=ToTemporalCalendarIdentifier(e);if($t===xt||$t==="iso8601")return e;if(xt==="iso8601")return _t;throw new RangeError("irreconcilable calendars")}function CalendarDateFromFields(_t,e,$t,xt){if(typeof _t=="string"){const kt=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.dateFromFields%"),kt,[e,$t])}const At=Call(GetMethod(_t,"dateFromFields"),_t,[e,$t]);if(!IsTemporalDate(At))throw new TypeError("invalid result");return At}function CalendarYearMonthFromFields(_t,e,$t){if(typeof _t=="string"){const At=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.yearMonthFromFields%"),At,[e,$t])}let xt=Call(GetMethod(_t,"yearMonthFromFields"),_t,[e,$t]);if(!IsTemporalYearMonth(xt))throw new TypeError("invalid result");return xt}function CalendarMonthDayFromFields(_t,e,$t){if(typeof _t=="string"){const At=new(GetIntrinsic("%Temporal.Calendar%"))(_t);return Call(GetIntrinsic("%Temporal.Calendar.prototype.monthDayFromFields%"),At,[e,$t])}let xt=Call(GetMethod(_t,"monthDayFromFields"),_t,[e,$t]);if(!IsTemporalMonthDay(xt))throw new TypeError("invalid result");return xt}function ToTemporalTimeZoneSlotValue(_t){if(IsObject(_t)){if(IsTemporalZonedDateTime(_t))return GetSlot(_t,g);if(!function($t){return!!IsTemporalTimeZone($t)||"getOffsetNanosecondsFor"in $t&&"getPossibleInstantsFor"in $t&&"id"in $t}(_t))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return _t}return ParseTemporalTimeZone(ToString(_t))}function ToTemporalTimeZoneIdentifier(_t){if(typeof _t=="string")return _t;const e=_t.id;if(typeof e!="string")throw new TypeError("timeZone.id should be a string");return e}function ToTemporalTimeZoneObject(_t){return IsObject(_t)?_t:new(GetIntrinsic("%Temporal.TimeZone%"))(_t)}function TimeZoneEquals(_t,e){return _t===e?!0:ToTemporalTimeZoneIdentifier(_t)===ToTemporalTimeZoneIdentifier(e)}function TemporalDateTimeToDate(_t){return CreateTemporalDate(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l),GetSlot(_t,p))}function TemporalDateTimeToTime(_t){return new(GetIntrinsic("%Temporal.PlainTime%"))(GetSlot(_t,d),GetSlot(_t,m),GetSlot(_t,c),GetSlot(_t,h),GetSlot(_t,u),GetSlot(_t,T))}function GetOffsetNanosecondsFor(_t,e,$t){if(typeof _t=="string"){const At=new(GetIntrinsic("%Temporal.TimeZone%"))(_t);return Call(GetIntrinsic("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),At,[e])}const xt=Call(GetMethod(_t,"getOffsetNanosecondsFor"),_t,[e]);if(typeof xt!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!IsIntegralNumber(xt)||ae(xt)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return xt}function GetOffsetStringFor(_t,e){return FormatTimeZoneOffsetString(GetOffsetNanosecondsFor(_t,e))}function GetPlainDateTimeFor(_t,e,$t){const xt=GetSlot(e,n),At=GetOffsetNanosecondsFor(_t,e);let{year:kt,month:Bt,day:jt,hour:Lt,minute:Ut,second:Nt,millisecond:qt,microsecond:Kt,nanosecond:zt}=GetISOPartsFromEpoch(xt);return{year:kt,month:Bt,day:jt,hour:Lt,minute:Ut,second:Nt,millisecond:qt,microsecond:Kt,nanosecond:zt}=BalanceISODateTime(kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt+At),CreateTemporalDateTime(kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,$t)}function GetInstantFor(_t,e,$t){return DisambiguatePossibleInstants(GetPossibleInstantsFor(_t,e),_t,e,$t)}function DisambiguatePossibleInstants(_t,e,$t,xt){const At=GetIntrinsic("%Temporal.Instant%"),kt=_t.length;if(kt===1)return _t[0];if(kt)switch(xt){case"compatible":case"earlier":return _t[0];case"later":return _t[kt-1];case"reject":throw new RangeError("multiple instants found")}const Bt=GetSlot($t,i$1),jt=GetSlot($t,s),Lt=GetSlot($t,l),Ut=GetSlot($t,d),Nt=GetSlot($t,m),qt=GetSlot($t,c),Kt=GetSlot($t,h),zt=GetSlot($t,u),Vt=GetSlot($t,T),Ht=GetUTCEpochNanoseconds(Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt);if(Ht===null)throw new RangeError("DateTime outside of supported range");const Jt=new At(JSBI.subtract(Ht,Ee)),rr=new At(JSBI.add(Ht,Ee)),Qt=GetOffsetNanosecondsFor(e,Jt),Wt=GetOffsetNanosecondsFor(e,rr)-Qt;switch(xt){case"earlier":{const nr=GetSlot($t,p),yr=GetIntrinsic("%Temporal.PlainDateTime%"),vr=AddDateTime(Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,nr,0,0,0,0,0,0,0,0,0,-Wt,void 0);return GetPossibleInstantsFor(e,new yr(vr.year,vr.month,vr.day,vr.hour,vr.minute,vr.second,vr.millisecond,vr.microsecond,vr.nanosecond,nr))[0]}case"compatible":case"later":{const nr=GetSlot($t,p),yr=GetIntrinsic("%Temporal.PlainDateTime%"),vr=AddDateTime(Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,nr,0,0,0,0,0,0,0,0,0,Wt,void 0),Ir=GetPossibleInstantsFor(e,new yr(vr.year,vr.month,vr.day,vr.hour,vr.minute,vr.second,vr.millisecond,vr.microsecond,vr.nanosecond,nr));return Ir[Ir.length-1]}case"reject":throw new RangeError("no such instant found")}}function GetPossibleInstantsFor(_t,e,$t){if(typeof _t=="string"){const kt=new(GetIntrinsic("%Temporal.TimeZone%"))(_t);return Call(GetIntrinsic("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),kt,[e])}const xt=Call(GetMethod(_t,"getPossibleInstantsFor"),_t,[e]),At=[];for(const kt of xt){if(!IsTemporalInstant(kt))throw new TypeError("bad return from getPossibleInstantsFor");te.call(At,kt)}return At}function ISOYearString(_t){let e;return _t<0||_t>9999?e=(_t<0?"-":"+")+`000000${ae(_t)}`.slice(-6):e=`0000${_t}`.slice(-4),e}function ISODateTimePartString(_t){return`00${_t}`.slice(-2)}function FormatSecondsStringPart(_t,e,$t,xt,At){if(At==="minute")return"";const kt=`:${ISODateTimePartString(_t)}`;let Bt,jt=1e6*e+1e3*$t+xt;if(At==="auto"){if(jt===0)return kt;for(Bt=`${jt}`.padStart(9,"0");Bt[Bt.length-1]==="0";)Bt=Bt.slice(0,-1)}else{if(At===0)return kt;Bt=`${jt}`.padStart(9,"0").slice(0,At)}return`${kt}.${Bt}`}function TemporalInstantToString(_t,e,$t){let xt=e;xt===void 0&&(xt="UTC");const At=GetPlainDateTimeFor(xt,_t,"iso8601"),kt=ISOYearString(GetSlot(At,i$1)),Bt=ISODateTimePartString(GetSlot(At,s)),jt=ISODateTimePartString(GetSlot(At,l)),Lt=ISODateTimePartString(GetSlot(At,d)),Ut=ISODateTimePartString(GetSlot(At,m)),Nt=FormatSecondsStringPart(GetSlot(At,c),GetSlot(At,h),GetSlot(At,u),GetSlot(At,T),$t);let qt="Z";return e!==void 0&&(qt=FormatISOTimeZoneOffsetString(GetOffsetNanosecondsFor(xt,_t))),`${kt}-${Bt}-${jt}T${Lt}:${Ut}${Nt}${qt}`}function TemporalDurationToString(_t,e="auto",$t){function xt(Or){return Or<=ue?Or.toString(10):JSBI.BigInt(Or).toString(10)}const At=GetSlot(_t,w),kt=GetSlot(_t,D),Bt=GetSlot(_t,G),jt=GetSlot(_t,v),Lt=GetSlot(_t,C),Ut=GetSlot(_t,O);let Nt=GetSlot(_t,b),qt=GetSlot(_t,E$1),Kt=GetSlot(_t,M),zt=GetSlot(_t,R);const Vt=DurationSign(At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt);if($t){const{unit:Or,increment:Nr,roundingMode:kr}=$t;({seconds:Nt,milliseconds:qt,microseconds:Kt,nanoseconds:zt}=RoundDuration(0,0,0,0,0,0,Nt,qt,Kt,zt,Nr,Or,kr))}const Ht=[];At&&Ht.push(`${xt(ae(At))}Y`),kt&&Ht.push(`${xt(ae(kt))}M`),Bt&&Ht.push(`${xt(ae(Bt))}W`),jt&&Ht.push(`${xt(ae(jt))}D`);const Jt=[];Lt&&Jt.push(`${xt(ae(Lt))}H`),Ut&&Jt.push(`${xt(ae(Ut))}M`);const rr=[];let Qt,Wt,nr,yr,vr=TotalDurationNanoseconds(0,0,0,Nt,qt,Kt,zt,0);({quotient:vr,remainder:Qt}=divmod(vr,De)),{quotient:vr,remainder:Wt}=divmod(vr,De),{quotient:yr,remainder:nr}=divmod(vr,De);const Ir=1e6*ae(JSBI.toNumber(nr))+1e3*ae(JSBI.toNumber(Wt))+ae(JSBI.toNumber(Qt));let xr;if(e==="auto"){if(Ir!==0)for(xr=`${Ir}`.padStart(9,"0");xr[xr.length-1]==="0";)xr=xr.slice(0,-1)}else e!==0&&(xr=`${Ir}`.padStart(9,"0").slice(0,e));return xr&&rr.unshift(".",xr),JSBI.equal(yr,Ie)&&!rr.length&&e==="auto"||rr.unshift(abs(yr).toString()),rr.length&&Jt.push(`${rr.join("")}S`),Jt.length&&Jt.unshift("T"),Ht.length||Jt.length?`${Vt<0?"-":""}P${Ht.join("")}${Jt.join("")}`:"PT0S"}function TemporalDateToString(_t,e="auto"){return`${ISOYearString(GetSlot(_t,i$1))}-${ISODateTimePartString(GetSlot(_t,s))}-${ISODateTimePartString(GetSlot(_t,l))}${MaybeFormatCalendarAnnotation(GetSlot(_t,p),e)}`}function TemporalDateTimeToString(_t,e,$t="auto",xt){let At=GetSlot(_t,i$1),kt=GetSlot(_t,s),Bt=GetSlot(_t,l),jt=GetSlot(_t,d),Lt=GetSlot(_t,m),Ut=GetSlot(_t,c),Nt=GetSlot(_t,h),qt=GetSlot(_t,u),Kt=GetSlot(_t,T);if(xt){const{unit:zt,increment:Vt,roundingMode:Ht}=xt;({year:At,month:kt,day:Bt,hour:jt,minute:Lt,second:Ut,millisecond:Nt,microsecond:qt,nanosecond:Kt}=RoundISODateTime(At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,Vt,zt,Ht))}return`${ISOYearString(At)}-${ISODateTimePartString(kt)}-${ISODateTimePartString(Bt)}T${ISODateTimePartString(jt)}:${ISODateTimePartString(Lt)}${FormatSecondsStringPart(Ut,Nt,qt,Kt,e)}${MaybeFormatCalendarAnnotation(GetSlot(_t,p),$t)}`}function TemporalMonthDayToString(_t,e="auto"){let $t=`${ISODateTimePartString(GetSlot(_t,s))}-${ISODateTimePartString(GetSlot(_t,l))}`;const xt=ToTemporalCalendarIdentifier(GetSlot(_t,p));(e==="always"||e==="critical"||xt!=="iso8601")&&($t=`${ISOYearString(GetSlot(_t,i$1))}-${$t}`);const At=FormatCalendarAnnotation(xt,e);return At&&($t+=At),$t}function TemporalYearMonthToString(_t,e="auto"){let $t=`${ISOYearString(GetSlot(_t,i$1))}-${ISODateTimePartString(GetSlot(_t,s))}`;const xt=ToTemporalCalendarIdentifier(GetSlot(_t,p));(e==="always"||e==="critical"||xt!=="iso8601")&&($t+=`-${ISODateTimePartString(GetSlot(_t,l))}`);const At=FormatCalendarAnnotation(xt,e);return At&&($t+=At),$t}function TemporalZonedDateTimeToString(_t,e,$t="auto",xt="auto",At="auto",kt){let Bt=GetSlot(_t,S);if(kt){const{unit:Nt,increment:qt,roundingMode:Kt}=kt,zt=RoundInstant(GetSlot(_t,n),qt,Nt,Kt);Bt=new(GetIntrinsic("%Temporal.Instant%"))(zt)}const jt=GetSlot(_t,g),Lt=GetPlainDateTimeFor(jt,Bt,"iso8601");let Ut=`${ISOYearString(GetSlot(Lt,i$1))}-${ISODateTimePartString(GetSlot(Lt,s))}-${ISODateTimePartString(GetSlot(Lt,l))}T${ISODateTimePartString(GetSlot(Lt,d))}:${ISODateTimePartString(GetSlot(Lt,m))}${FormatSecondsStringPart(GetSlot(Lt,c),GetSlot(Lt,h),GetSlot(Lt,u),GetSlot(Lt,T),e)}`;return At!=="never"&&(Ut+=FormatISOTimeZoneOffsetString(GetOffsetNanosecondsFor(jt,Bt))),xt!=="never"&&(Ut+=`[${xt==="critical"?"!":""}${ToTemporalTimeZoneIdentifier(jt)}]`),Ut+=MaybeFormatCalendarAnnotation(GetSlot(_t,p),$t),Ut}function IsTimeZoneOffsetString(_t){return ze.test(he(_t))}function ParseTimeZoneOffsetString(_t){const e=ze.exec(he(_t));if(!e)throw new RangeError(`invalid time zone offset: ${_t}`);return(e[1]==="-"||e[1]==="−"?-1:1)*(1e9*(60*(60*+e[2]+ +(e[3]||0))+ +(e[4]||0))+ +((e[5]||0)+"000000000").slice(0,9))}function GetCanonicalTimeZoneIdentifier(_t){return IsTimeZoneOffsetString(_t)?FormatTimeZoneOffsetString(ParseTimeZoneOffsetString(_t)):getIntlDateTimeFormatEnUsForTimeZone(he(_t)).resolvedOptions().timeZone}function GetNamedTimeZoneOffsetNanoseconds(_t,e){const{year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut,nanosecond:Nt}=GetNamedTimeZoneDateTimeParts(_t,e),qt=$t%400,Kt=($t-qt)/400,zt=JSBI.multiply(JSBI.BigInt(146097),Ee),Vt=GetUTCEpochNanoseconds(qt,xt,At,kt,Bt,jt,Lt,Ut,Nt),Ht=JSBI.add(Vt,JSBI.multiply(zt,JSBI.BigInt(Kt)));return JSBI.toNumber(JSBI.subtract(Ht,e))}function FormatTimeZoneOffsetString(_t){const e=_t<0?"-":"+",$t=ae(_t),xt=$t%1e9,At=ie($t/1e9)%60,kt=ie($t/6e10)%60,Bt=ISODateTimePartString(ie($t/36e11)),jt=ISODateTimePartString(kt),Lt=ISODateTimePartString(At);let Ut="";if(xt){let Nt=`${xt}`.padStart(9,"0");for(;Nt[Nt.length-1]==="0";)Nt=Nt.slice(0,-1);Ut=`:${Lt}.${Nt}`}else At&&(Ut=`:${Lt}`);return`${e}${Bt}:${jt}${Ut}`}function FormatISOTimeZoneOffsetString(_t){let e=JSBI.toNumber(RoundNumberToIncrement(JSBI.BigInt(_t),be,"halfExpand"));const $t=e<0?"-":"+";e=ae(e);const xt=e/6e10%60;return`${$t}${ISODateTimePartString(ie(e/36e11))}:${ISODateTimePartString(xt)}`}function GetUTCEpochNanoseconds(_t,e,$t,xt,At,kt,Bt,jt,Lt){const Ut=new Date;Ut.setUTCHours(xt,At,kt,Bt),Ut.setUTCFullYear(_t,e-1,$t);const Nt=Ut.getTime();if(de(Nt))return null;let qt=JSBI.multiply(JSBI.BigInt(Nt),Ge);return qt=JSBI.add(qt,JSBI.multiply(JSBI.BigInt(jt),De)),qt=JSBI.add(qt,JSBI.BigInt(Lt)),JSBI.lessThan(qt,Me)||JSBI.greaterThan(qt,Re)?null:qt}function GetISOPartsFromEpoch(_t){const{quotient:e,remainder:$t}=divmod(_t,Ge);let xt=JSBI.toNumber(e),At=JSBI.toNumber($t);At<0&&(At+=1e6,xt-=1);const kt=ie(At/1e3)%1e3,Bt=At%1e3,jt=new Date(xt);return{epochMilliseconds:xt,year:jt.getUTCFullYear(),month:jt.getUTCMonth()+1,day:jt.getUTCDate(),hour:jt.getUTCHours(),minute:jt.getUTCMinutes(),second:jt.getUTCSeconds(),millisecond:jt.getUTCMilliseconds(),microsecond:kt,nanosecond:Bt}}function GetNamedTimeZoneDateTimeParts(_t,e){const{epochMilliseconds:$t,millisecond:xt,microsecond:At,nanosecond:kt}=GetISOPartsFromEpoch(e),{year:Bt,month:jt,day:Lt,hour:Ut,minute:Nt,second:qt}=function(zt,Vt){const Ht=getIntlDateTimeFormatEnUsForTimeZone(zt).format(new Date(Vt));return function(rr){const Qt=rr.split(/[^\w]+/);if(Qt.length!==7)throw new RangeError(`expected 7 parts in "${rr}`);const Wt=+Qt[0],nr=+Qt[1];let yr=+Qt[2];const vr=Qt[3].toUpperCase();if(vr==="B"||vr==="BC")yr=1-yr;else if(vr!=="A"&&vr!=="AD")throw new RangeError(`Unknown era ${vr} in "${rr}`);let Ir=+Qt[4];Ir===24&&(Ir=0);const xr=+Qt[5],Or=+Qt[6];if(!(me(yr)&&me(Wt)&&me(nr)&&me(Ir)&&me(xr)&&me(Or)))throw new RangeError(`Invalid number in "${rr}`);return{year:yr,month:Wt,day:nr,hour:Ir,minute:xr,second:Or}}(Ht)}(_t,$t);return BalanceISODateTime(Bt,jt,Lt,Ut,Nt,qt,xt,At,kt)}function maxJSBI(_t,e){return JSBI.lessThan(_t,e)?e:_t}function afterLatestPossibleTzdbRuleChange(){return JSBI.add(Ve(),Ze)}function GetNamedTimeZoneNextTransition(_t,e){if(JSBI.lessThan(e,Pe))return GetNamedTimeZoneNextTransition(_t,Pe);const $t=JSBI.add(e,Be),xt=maxJSBI(afterLatestPossibleTzdbRuleChange(),$t);let At=maxJSBI(Pe,e);const kt=GetNamedTimeZoneOffsetNanoseconds(_t,At);let Bt=At,jt=kt;for(;kt===jt&&JSBI.lessThan(JSBI.BigInt(At),xt);){if(Bt=JSBI.add(At,Ne),JSBI.greaterThan(Bt,Re))return null;jt=GetNamedTimeZoneOffsetNanoseconds(_t,Bt),kt===jt&&(At=Bt)}return kt===jt?null:bisect(Lt=>GetNamedTimeZoneOffsetNanoseconds(_t,Lt),At,Bt,kt,jt)}function GetNamedTimeZonePreviousTransition(_t,e){const $t=afterLatestPossibleTzdbRuleChange(),xt=JSBI.greaterThan(e,$t),At=xt?JSBI.subtract(e,Be):Pe;if(_t==="Africa/Casablanca"||_t==="Africa/El_Aaiun"){const Ut=GetSlot(ToTemporalInstant("2088-01-01T00Z"),n);if(JSBI.lessThan(Ut,e))return GetNamedTimeZonePreviousTransition(_t,Ut)}let kt=JSBI.subtract(e,Se);if(JSBI.lessThan(kt,Pe))return null;const Bt=GetNamedTimeZoneOffsetNanoseconds(_t,kt);let jt=kt,Lt=Bt;for(;Bt===Lt&&JSBI.greaterThan(kt,At);){if(jt=JSBI.subtract(kt,Ne),JSBI.lessThan(jt,Pe))return null;Lt=GetNamedTimeZoneOffsetNanoseconds(_t,jt),Bt===Lt&&(kt=jt)}if(Bt===Lt){if(xt){const Ut=JSBI.subtract($t,Ee);return GetNamedTimeZonePreviousTransition(_t,Ut)}return null}return bisect(Ut=>GetNamedTimeZoneOffsetNanoseconds(_t,Ut),jt,kt,Lt,Bt)}function LeapYear(_t){return _t===void 0?!1:_t%4==0&&(_t%100!=0||_t%400==0)}function ISODaysInMonth(_t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[LeapYear(_t)?"leapyear":"standard"][e-1]}function DayOfWeek(_t,e,$t){const xt=e+(e<3?10:-2),At=_t-(e<3?1:0),kt=ie(At/100),Bt=At-100*kt,jt=($t+ie(2.6*xt-.2)+(Bt+ie(Bt/4))+(ie(kt/4)-2*kt))%7;return jt+(jt<=0?7:0)}function DayOfYear(_t,e,$t){let xt=$t;for(let At=e-1;At>0;At--)xt+=ISODaysInMonth(_t,At);return xt}function WeekOfYear(_t,e,$t){const xt=DayOfYear(_t,e,$t),At=DayOfWeek(_t,e,$t)||7,kt=DayOfWeek(_t,1,1),Bt=ie((xt-At+10)/7);return Bt<1?kt===5||kt===6&&LeapYear(_t-1)?{week:53,year:_t-1}:{week:52,year:_t-1}:Bt===53&&(LeapYear(_t)?366:365)-xt<4-At?{week:1,year:_t+1}:{week:Bt,year:_t}}function DurationSign(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){for(const Nt of[_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut])if(Nt!==0)return Nt<0?-1:1;return 0}function BalanceISOYearMonth(_t,e){let $t=_t,xt=e;if(!me($t)||!me(xt))throw new RangeError("infinity is out of range");return xt-=1,$t+=ie(xt/12),xt%=12,xt<0&&(xt+=12),xt+=1,{year:$t,month:xt}}function BalanceISODate(_t,e,$t){let xt=_t,At=e,kt=$t;if(!me(kt))throw new RangeError("infinity is out of range");({year:xt,month:At}=BalanceISOYearMonth(xt,At));const Bt=146097;if(ae(kt)>Bt){const Ut=le(kt/Bt);xt+=400*Ut,kt-=Ut*Bt}let jt=0,Lt=At>2?xt:xt-1;for(;jt=LeapYear(Lt)?366:365,kt<-jt;)xt-=1,Lt-=1,kt+=jt;for(Lt+=1;jt=LeapYear(Lt)?366:365,kt>jt;)xt+=1,Lt+=1,kt-=jt;for(;kt<1;)({year:xt,month:At}=BalanceISOYearMonth(xt,At-1)),kt+=ISODaysInMonth(xt,At);for(;kt>ISODaysInMonth(xt,At);)kt-=ISODaysInMonth(xt,At),{year:xt,month:At}=BalanceISOYearMonth(xt,At+1);return{year:xt,month:At,day:kt}}function BalanceISODateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt){const{deltaDays:Ut,hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}=BalanceTime(xt,At,kt,Bt,jt,Lt),{year:Jt,month:rr,day:Qt}=BalanceISODate(_t,e,$t+Ut);return{year:Jt,month:rr,day:Qt,hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}}function BalanceTime(_t,e,$t,xt,At,kt){let Bt,jt=JSBI.BigInt(_t),Lt=JSBI.BigInt(e),Ut=JSBI.BigInt($t),Nt=JSBI.BigInt(xt),qt=JSBI.BigInt(At),Kt=JSBI.BigInt(kt);return{quotient:Bt,remainder:Kt}=NonNegativeBigIntDivmod(Kt,De),qt=JSBI.add(qt,Bt),{quotient:Bt,remainder:qt}=NonNegativeBigIntDivmod(qt,De),Nt=JSBI.add(Nt,Bt),{quotient:Bt,remainder:Nt}=NonNegativeBigIntDivmod(Nt,De),Ut=JSBI.add(Ut,Bt),{quotient:Bt,remainder:Ut}=NonNegativeBigIntDivmod(Ut,ge),Lt=JSBI.add(Lt,Bt),{quotient:Bt,remainder:Lt}=NonNegativeBigIntDivmod(Lt,ge),jt=JSBI.add(jt,Bt),{quotient:Bt,remainder:jt}=NonNegativeBigIntDivmod(jt,we),{deltaDays:JSBI.toNumber(Bt),hour:JSBI.toNumber(jt),minute:JSBI.toNumber(Lt),second:JSBI.toNumber(Ut),millisecond:JSBI.toNumber(Nt),microsecond:JSBI.toNumber(qt),nanosecond:JSBI.toNumber(Kt)}}function TotalDurationNanoseconds(_t,e,$t,xt,At,kt,Bt,jt){const Lt=JSBI.BigInt(_t);let Ut=JSBI.BigInt(Bt);_t!==0&&(Ut=JSBI.subtract(JSBI.BigInt(Bt),JSBI.BigInt(jt)));const Nt=JSBI.add(JSBI.BigInt(e),JSBI.multiply(Lt,JSBI.BigInt(24))),qt=JSBI.add(JSBI.BigInt($t),JSBI.multiply(Nt,ge)),Kt=JSBI.add(JSBI.BigInt(xt),JSBI.multiply(qt,ge)),zt=JSBI.add(JSBI.BigInt(At),JSBI.multiply(Kt,De)),Vt=JSBI.add(JSBI.BigInt(kt),JSBI.multiply(zt,De));return JSBI.add(JSBI.BigInt(Ut),JSBI.multiply(Vt,De))}function NanosecondsToDays(_t,e){const $t=GetIntrinsic("%Temporal.Instant%"),xt=se(JSBI.toNumber(_t));let At=JSBI.BigInt(_t),kt=864e11;if(xt===0)return{days:0,nanoseconds:Ie,dayLengthNs:kt};if(!IsTemporalZonedDateTime(e)){let Wt;return{quotient:Wt,remainder:At}=divmod(At,JSBI.BigInt(kt)),{days:JSBI.toNumber(Wt),nanoseconds:At,dayLengthNs:kt}}const Bt=GetSlot(e,n),jt=GetSlot(e,S),Lt=JSBI.add(Bt,At),Ut=new $t(Lt),Nt=GetSlot(e,g),qt=GetSlot(e,p),Kt=GetPlainDateTimeFor(Nt,jt,qt),zt=GetPlainDateTimeFor(Nt,Ut,qt);let{days:Vt}=DifferenceISODateTime(GetSlot(Kt,i$1),GetSlot(Kt,s),GetSlot(Kt,l),GetSlot(Kt,d),GetSlot(Kt,m),GetSlot(Kt,c),GetSlot(Kt,h),GetSlot(Kt,u),GetSlot(Kt,T),GetSlot(zt,i$1),GetSlot(zt,s),GetSlot(zt,l),GetSlot(zt,d),GetSlot(zt,m),GetSlot(zt,c),GetSlot(zt,h),GetSlot(zt,u),GetSlot(zt,T),qt,"day",Te(null)),Ht=AddZonedDateTime(jt,Nt,qt,0,0,0,Vt,0,0,0,0,0,0),Jt=JSBI.BigInt(Vt);if(xt===1)for(;JSBI.greaterThan(Jt,Ie)&&JSBI.greaterThan(Ht,Lt);)Jt=JSBI.subtract(Jt,Se),Ht=AddZonedDateTime(jt,Nt,qt,0,0,0,JSBI.toNumber(Jt),0,0,0,0,0,0);At=JSBI.subtract(Lt,Ht);let rr=!1,Qt=new $t(Ht);do{const Wt=AddZonedDateTime(Qt,Nt,qt,0,0,0,xt,0,0,0,0,0,0),nr=GetSlot(Qt,n);kt=JSBI.toNumber(JSBI.subtract(Wt,nr)),rr=JSBI.greaterThanOrEqual(JSBI.multiply(JSBI.subtract(At,JSBI.BigInt(kt)),JSBI.BigInt(xt)),Ie),rr&&(At=JSBI.subtract(At,JSBI.BigInt(kt)),Qt=new $t(Wt),Jt=JSBI.add(Jt,JSBI.BigInt(xt)))}while(rr);if(!isZero(Jt)&&signJSBI(Jt)!==xt)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!isZero(At)&&signJSBI(At)!==xt)throw isNegativeJSBI(At)&&xt===1?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if(JSBI.greaterThanOrEqual(abs(At),abs(JSBI.BigInt(kt))))throw new Error("assert not reached");return{days:JSBI.toNumber(Jt),nanoseconds:At,dayLengthNs:ae(kt)}}function BalanceDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt){let Ut=BalancePossiblyInfiniteDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt);if(Ut==="positive overflow"||Ut==="negative overflow")throw new RangeError("Duration out of range");return Ut}function BalancePossiblyInfiniteDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt){let Ut,Nt,qt,Kt,zt,Vt,Ht=_t;if(IsTemporalZonedDateTime(Lt)){const Ir=AddZonedDateTime(GetSlot(Lt,S),GetSlot(Lt,g),GetSlot(Lt,p),0,0,0,Ht,e,$t,xt,At,kt,Bt),xr=GetSlot(Lt,n);Ut=JSBI.subtract(Ir,xr)}else Ut=TotalDurationNanoseconds(Ht,e,$t,xt,At,kt,Bt,0);jt==="year"||jt==="month"||jt==="week"||jt==="day"?{days:Ht,nanoseconds:Ut}=NanosecondsToDays(Ut,Lt):Ht=0;const Jt=JSBI.lessThan(Ut,Ie)?-1:1;switch(Ut=abs(Ut),Nt=qt=Kt=zt=Vt=Ie,jt){case"year":case"month":case"week":case"day":case"hour":({quotient:Nt,remainder:Ut}=divmod(Ut,De)),{quotient:qt,remainder:Nt}=divmod(Nt,De),{quotient:Kt,remainder:qt}=divmod(qt,De),{quotient:zt,remainder:Kt}=divmod(Kt,ge),{quotient:Vt,remainder:zt}=divmod(zt,ge);break;case"minute":({quotient:Nt,remainder:Ut}=divmod(Ut,De)),{quotient:qt,remainder:Nt}=divmod(Nt,De),{quotient:Kt,remainder:qt}=divmod(qt,De),{quotient:zt,remainder:Kt}=divmod(Kt,ge);break;case"second":({quotient:Nt,remainder:Ut}=divmod(Ut,De)),{quotient:qt,remainder:Nt}=divmod(Nt,De),{quotient:Kt,remainder:qt}=divmod(qt,De);break;case"millisecond":({quotient:Nt,remainder:Ut}=divmod(Ut,De)),{quotient:qt,remainder:Nt}=divmod(Nt,De);break;case"microsecond":({quotient:Nt,remainder:Ut}=divmod(Ut,De));break;case"nanosecond":break;default:throw new Error("assert not reached")}const rr=JSBI.toNumber(Vt)*Jt,Qt=JSBI.toNumber(zt)*Jt,Wt=JSBI.toNumber(Kt)*Jt,nr=JSBI.toNumber(qt)*Jt,yr=JSBI.toNumber(Nt)*Jt,vr=JSBI.toNumber(Ut)*Jt;for(const Ir of[Ht,rr,Qt,Wt,nr,yr,vr])if(!me(Ir))return Jt===1?"positive overflow":"negative overflow";return{days:Ht,hours:rr,minutes:Qt,seconds:Wt,milliseconds:nr,microseconds:yr,nanoseconds:vr}}function UnbalanceDurationRelative(_t,e,$t,xt,At,kt){const Bt=GetIntrinsic("%Temporal.Duration%"),jt=DurationSign(_t,e,$t,xt,0,0,0,0,0,0);if(jt===0)return{years:_t,months:e,weeks:$t,days:xt};const Lt=JSBI.BigInt(jt);let Ut,Nt,qt=JSBI.BigInt(_t),Kt=JSBI.BigInt(e),zt=JSBI.BigInt($t),Vt=JSBI.BigInt(xt);kt&&(Nt=ToTemporalDate(kt),Ut=GetSlot(Nt,p));const Ht=new Bt(jt),Jt=new Bt(0,jt),rr=new Bt(0,0,jt);switch(At){case"year":break;case"month":{if(!Ut)throw new RangeError("a starting point is required for months balancing");let Qt,Wt;for(typeof Ut!="string"&&(Qt=GetMethod(Ut,"dateAdd"),Wt=GetMethod(Ut,"dateUntil"));!isZero(qt);){const nr=CalendarDateAdd(Ut,Nt,Ht,void 0,Qt),yr=Te(null);yr.largestUnit="month";const vr=CalendarDateUntil(Ut,Nt,nr,yr,Wt),Ir=JSBI.BigInt(GetSlot(vr,D));Nt=nr,Kt=JSBI.add(Kt,Ir),qt=JSBI.subtract(qt,Lt)}}break;case"week":{if(!Ut)throw new RangeError("a starting point is required for weeks balancing");const Qt=typeof Ut!="string"?GetMethod(Ut,"dateAdd"):void 0;for(;!isZero(qt);){let Wt;({relativeTo:Nt,days:Wt}=MoveRelativeDate(Ut,Nt,Ht,Qt)),Vt=JSBI.add(Vt,JSBI.BigInt(Wt)),qt=JSBI.subtract(qt,Lt)}for(;!isZero(Kt);){let Wt;({relativeTo:Nt,days:Wt}=MoveRelativeDate(Ut,Nt,Jt,Qt)),Vt=JSBI.add(Vt,JSBI.BigInt(Wt)),Kt=JSBI.subtract(Kt,Lt)}break}default:{if(isZero(qt)&&isZero(Kt)&&isZero(zt))break;if(!Ut)throw new RangeError("a starting point is required for balancing calendar units");const Qt=typeof Ut!="string"?GetMethod(Ut,"dateAdd"):void 0;for(;!isZero(qt);){let Wt;({relativeTo:Nt,days:Wt}=MoveRelativeDate(Ut,Nt,Ht,Qt)),Vt=JSBI.add(Vt,JSBI.BigInt(Wt)),qt=JSBI.subtract(qt,Lt)}for(;!isZero(Kt);){let Wt;({relativeTo:Nt,days:Wt}=MoveRelativeDate(Ut,Nt,Jt,Qt)),Vt=JSBI.add(Vt,JSBI.BigInt(Wt)),Kt=JSBI.subtract(Kt,Lt)}for(;!isZero(zt);){let Wt;({relativeTo:Nt,days:Wt}=MoveRelativeDate(Ut,Nt,rr,Qt)),Vt=JSBI.add(Vt,JSBI.BigInt(Wt)),zt=JSBI.subtract(zt,Lt)}break}}return{years:JSBI.toNumber(qt),months:JSBI.toNumber(Kt),weeks:JSBI.toNumber(zt),days:JSBI.toNumber(Vt)}}function CalculateOffsetShift(_t,e,$t,xt,At){if(IsTemporalZonedDateTime(_t)){const kt=GetSlot(_t,S),Bt=GetSlot(_t,g),jt=GetSlot(_t,p),Lt=GetOffsetNanosecondsFor(Bt,kt),Ut=AddZonedDateTime(kt,Bt,jt,e,$t,xt,At,0,0,0,0,0,0);return GetOffsetNanosecondsFor(Bt,new(GetIntrinsic("%Temporal.Instant%"))(Ut))-Lt}return 0}function CreateNegatedTemporalDuration(_t){return new(GetIntrinsic("%Temporal.Duration%"))(-GetSlot(_t,w),-GetSlot(_t,D),-GetSlot(_t,G),-GetSlot(_t,v),-GetSlot(_t,C),-GetSlot(_t,O),-GetSlot(_t,b),-GetSlot(_t,E$1),-GetSlot(_t,M),-GetSlot(_t,R))}function ConstrainToRange(_t,e,$t){return oe($t,ne(e,_t))}function ConstrainISODate(_t,e,$t){const xt=ConstrainToRange(e,1,12);return{year:_t,month:xt,day:ConstrainToRange($t,1,ISODaysInMonth(_t,xt))}}function RejectToRange(_t,e,$t){if(_t<e||_t>$t)throw new RangeError(`value out of range: ${e} <= ${_t} <= ${$t}`)}function RejectISODate(_t,e,$t){RejectToRange(e,1,12),RejectToRange($t,1,ISODaysInMonth(_t,e))}function RejectDateRange(_t,e,$t){RejectDateTimeRange(_t,e,$t,12,0,0,0,0,0)}function RejectTime(_t,e,$t,xt,At,kt){RejectToRange(_t,0,23),RejectToRange(e,0,59),RejectToRange($t,0,59),RejectToRange(xt,0,999),RejectToRange(At,0,999),RejectToRange(kt,0,999)}function RejectDateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt){RejectISODate(_t,e,$t),RejectTime(xt,At,kt,Bt,jt,Lt)}function RejectDateTimeRange(_t,e,$t,xt,At,kt,Bt,jt,Lt){if(RejectToRange(_t,Fe,Ye),_t===Fe&&GetUTCEpochNanoseconds(_t,e,$t+1,xt,At,kt,Bt,jt,Lt-1)==null||_t===Ye&&GetUTCEpochNanoseconds(_t,e,$t-1,xt,At,kt,Bt,jt,Lt+1)==null)throw new RangeError("DateTime outside of supported range")}function ValidateEpochNanoseconds(_t){if(JSBI.lessThan(_t,Me)||JSBI.greaterThan(_t,Re))throw new RangeError("Instant outside of supported range")}function RejectDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){const Nt=DurationSign(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut);for(const qt of[_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut]){if(!me(qt))throw new RangeError("infinite values not allowed as duration fields");const Kt=se(qt);if(Kt!==0&&Kt!==Nt)throw new RangeError("mixed-sign values not allowed as duration fields")}}function DifferenceISODate(_t,e,$t,xt,At,kt,Bt){switch(Bt){case"year":case"month":{const jt=-CompareISODate(_t,e,$t,xt,At,kt);if(jt===0)return{years:0,months:0,weeks:0,days:0};const Lt={year:_t,month:e,day:$t},Ut={year:xt,month:At,day:kt};let Nt=Ut.year-Lt.year,qt=AddISODate(_t,e,$t,Nt,0,0,0,"constrain"),Kt=-CompareISODate(qt.year,qt.month,qt.day,xt,At,kt);if(Kt===0)return Bt==="year"?{years:Nt,months:0,weeks:0,days:0}:{years:0,months:12*Nt,weeks:0,days:0};let zt=Ut.month-Lt.month;if(Kt!==jt&&(Nt-=jt,zt+=12*jt),qt=AddISODate(_t,e,$t,Nt,zt,0,0,"constrain"),Kt=-CompareISODate(qt.year,qt.month,qt.day,xt,At,kt),Kt===0)return Bt==="year"?{years:Nt,months:zt,weeks:0,days:0}:{years:0,months:zt+12*Nt,weeks:0,days:0};Kt!==jt&&(zt-=jt,zt===-jt&&(Nt-=jt,zt=11*jt),qt=AddISODate(_t,e,$t,Nt,zt,0,0,"constrain"));let Vt=0;return Vt=qt.month===Ut.month?Ut.day-qt.day:jt<0?-qt.day-(ISODaysInMonth(Ut.year,Ut.month)-Ut.day):Ut.day+(ISODaysInMonth(qt.year,qt.month)-qt.day),Bt==="month"&&(zt+=12*Nt,Nt=0),{years:Nt,months:zt,weeks:0,days:Vt}}case"week":case"day":{let jt,Lt,Ut;CompareISODate(_t,e,$t,xt,At,kt)<0?(Lt={year:_t,month:e,day:$t},jt={year:xt,month:At,day:kt},Ut=1):(Lt={year:xt,month:At,day:kt},jt={year:_t,month:e,day:$t},Ut=-1);let Nt=DayOfYear(jt.year,jt.month,jt.day)-DayOfYear(Lt.year,Lt.month,Lt.day);for(let Kt=Lt.year;Kt<jt.year;++Kt)Nt+=LeapYear(Kt)?366:365;let qt=0;return Bt==="week"&&(qt=ie(Nt/7),Nt%=7),qt*=Ut,Nt*=Ut,{years:0,months:0,weeks:qt,days:Nt}}default:throw new Error("assert not reached")}}function DifferenceTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt){let Kt=Bt-_t,zt=jt-e,Vt=Lt-$t,Ht=Ut-xt,Jt=Nt-At,rr=qt-kt;const Qt=DurationSign(0,0,0,0,Kt,zt,Vt,Ht,Jt,rr);Kt*=Qt,zt*=Qt,Vt*=Qt,Ht*=Qt,Jt*=Qt,rr*=Qt;let Wt=0;if({deltaDays:Wt,hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr}=BalanceTime(Kt,zt,Vt,Ht,Jt,rr),Wt!=0)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return Kt*=Qt,zt*=Qt,Vt*=Qt,Ht*=Qt,Jt*=Qt,rr*=Qt,{hours:Kt,minutes:zt,seconds:Vt,milliseconds:Ht,microseconds:Jt,nanoseconds:rr}}function DifferenceInstant(_t,e,$t,xt,At,kt){const Bt=JSBI.subtract(e,_t);let jt=0,Lt=0,Ut=JSBI.toNumber(JSBI.remainder(Bt,De)),Nt=JSBI.toNumber(JSBI.remainder(JSBI.divide(Bt,De),De)),qt=JSBI.toNumber(JSBI.remainder(JSBI.divide(Bt,Ge),De)),Kt=JSBI.toNumber(JSBI.divide(Bt,ve));return{hours:jt,minutes:Lt,seconds:Kt,milliseconds:qt,microseconds:Nt,nanoseconds:Ut}=RoundDuration(0,0,0,0,0,0,Kt,qt,Nt,Ut,$t,xt,kt),BalanceDuration(0,jt,Lt,Kt,qt,Nt,Ut,At)}function DifferenceISODateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr){let yr=_t,vr=e,Ir=$t,{hours:xr,minutes:Or,seconds:Nr,milliseconds:kr,microseconds:lr,nanoseconds:ir}=DifferenceTime(xt,At,kt,Bt,jt,Lt,Kt,zt,Vt,Ht,Jt,rr);const Xt=DurationSign(0,0,0,0,xr,Or,Nr,kr,lr,ir);CompareISODate(Ut,Nt,qt,yr,vr,Ir)===-Xt&&({year:yr,month:vr,day:Ir}=BalanceISODate(yr,vr,Ir-Xt),{hours:xr,minutes:Or,seconds:Nr,milliseconds:kr,microseconds:lr,nanoseconds:ir}=BalanceDuration(-Xt,xr,Or,Nr,kr,lr,ir,Wt));const er=CreateTemporalDate(yr,vr,Ir,Qt),pr=CreateTemporalDate(Ut,Nt,qt,Qt),ur=LargerOfTwoTemporalUnits("day",Wt),gr=CopyOptions(nr);gr.largestUnit=ur;let{years:ar,months:tr,weeks:dr,days:fr}=CalendarDateUntil(Qt,er,pr,gr);return{days:fr,hours:xr,minutes:Or,seconds:Nr,milliseconds:kr,microseconds:lr,nanoseconds:ir}=BalanceDuration(fr,xr,Or,Nr,kr,lr,ir,Wt),{years:ar,months:tr,weeks:dr,days:fr,hours:xr,minutes:Or,seconds:Nr,milliseconds:kr,microseconds:lr,nanoseconds:ir}}function DifferenceZonedDateTime(_t,e,$t,xt,At,kt){const Bt=JSBI.subtract(e,_t);if(JSBI.equal(Bt,Ie))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const jt=GetIntrinsic("%Temporal.Instant%"),Lt=new jt(_t),Ut=new jt(e),Nt=GetPlainDateTimeFor($t,Lt,xt),qt=GetPlainDateTimeFor($t,Ut,xt);let{years:Kt,months:zt,weeks:Vt,days:Ht}=DifferenceISODateTime(GetSlot(Nt,i$1),GetSlot(Nt,s),GetSlot(Nt,l),GetSlot(Nt,d),GetSlot(Nt,m),GetSlot(Nt,c),GetSlot(Nt,h),GetSlot(Nt,u),GetSlot(Nt,T),GetSlot(qt,i$1),GetSlot(qt,s),GetSlot(qt,l),GetSlot(qt,d),GetSlot(qt,m),GetSlot(qt,c),GetSlot(qt,h),GetSlot(qt,u),GetSlot(qt,T),xt,At,kt);const Jt=AddZonedDateTime(Lt,$t,xt,Kt,zt,Vt,0,0,0,0,0,0,0);let rr=JSBI.subtract(e,Jt);const Qt=CreateTemporalZonedDateTime(Jt,$t,xt);({nanoseconds:rr,days:Ht}=NanosecondsToDays(rr,Qt));const{hours:Wt,minutes:nr,seconds:yr,milliseconds:vr,microseconds:Ir,nanoseconds:xr}=BalanceDuration(0,0,0,0,0,0,JSBI.toNumber(rr),"hour");return{years:Kt,months:zt,weeks:Vt,days:Ht,hours:Wt,minutes:nr,seconds:yr,milliseconds:vr,microseconds:Ir,nanoseconds:xr}}function GetDifferenceSettings(_t,e,$t,xt,At,kt){const Bt=Ue.reduce((zt,Vt)=>{const Ht=Vt[0],Jt=Vt[1],rr=Vt[2];return $t!=="datetime"&&rr!==$t||xt.includes(Jt)||zt.push(Jt,Ht),zt},[]);let jt=GetTemporalUnit(e,"largestUnit",$t,"auto");if(xt.includes(jt))throw new RangeError(`largestUnit must be one of ${Bt.join(", ")}, not ${jt}`);const Lt=ToTemporalRoundingIncrement(e);let Ut=ToTemporalRoundingMode(e,"trunc");_t==="since"&&(Ut=function(Vt){switch(Vt){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return Vt}}(Ut));const Nt=GetTemporalUnit(e,"smallestUnit",$t,At);if(xt.includes(Nt))throw new RangeError(`smallestUnit must be one of ${Bt.join(", ")}, not ${Nt}`);const qt=LargerOfTwoTemporalUnits(kt,Nt);if(jt==="auto"&&(jt=qt),LargerOfTwoTemporalUnits(jt,Nt)!==jt)throw new RangeError(`largestUnit ${jt} cannot be smaller than smallestUnit ${Nt}`);const Kt={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[Nt];return Kt!==void 0&&ValidateTemporalRoundingIncrement(Lt,Kt,!1),{largestUnit:jt,roundingIncrement:Lt,roundingMode:Ut,smallestUnit:Nt}}function DifferenceTemporalInstant(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalInstant($t),Bt=GetDifferenceSettings(_t,CopyOptions(xt),"time",[],"nanosecond","second"),jt=GetSlot(e,n),Lt=GetSlot(kt,n);let{hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=DifferenceInstant(jt,Lt,Bt.roundingIncrement,Bt.smallestUnit,Bt.largestUnit,Bt.roundingMode);return new(GetIntrinsic("%Temporal.Duration%"))(0,0,0,0,At*Ut,At*Nt,At*qt,At*Kt,At*zt,At*Vt)}function DifferenceTemporalPlainDate(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalDate($t),Bt=GetSlot(e,p);ThrowIfCalendarsNotEqual(Bt,GetSlot(kt,p),"compute difference between dates");const jt=CopyOptions(xt),Lt=GetDifferenceSettings(_t,jt,"date",[],"day","day");jt.largestUnit=Lt.largestUnit;let{years:Ut,months:Nt,weeks:qt,days:Kt}=CalendarDateUntil(Bt,e,kt,jt);return Lt.smallestUnit==="day"&&Lt.roundingIncrement===1||({years:Ut,months:Nt,weeks:qt,days:Kt}=RoundDuration(Ut,Nt,qt,Kt,0,0,0,0,0,0,Lt.roundingIncrement,Lt.smallestUnit,Lt.roundingMode,e)),new(GetIntrinsic("%Temporal.Duration%"))(At*Ut,At*Nt,At*qt,At*Kt,0,0,0,0,0,0)}function DifferenceTemporalPlainDateTime(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalDateTime($t),Bt=GetSlot(e,p);ThrowIfCalendarsNotEqual(Bt,GetSlot(kt,p),"compute difference between dates");const jt=CopyOptions(xt),Lt=GetDifferenceSettings(_t,jt,"datetime",[],"nanosecond","day");let{years:Ut,months:Nt,weeks:qt,days:Kt,hours:zt,minutes:Vt,seconds:Ht,milliseconds:Jt,microseconds:rr,nanoseconds:Qt}=DifferenceISODateTime(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T),GetSlot(kt,i$1),GetSlot(kt,s),GetSlot(kt,l),GetSlot(kt,d),GetSlot(kt,m),GetSlot(kt,c),GetSlot(kt,h),GetSlot(kt,u),GetSlot(kt,T),Bt,Lt.largestUnit,jt);const Wt=TemporalDateTimeToDate(e);return{years:Ut,months:Nt,weeks:qt,days:Kt,hours:zt,minutes:Vt,seconds:Ht,milliseconds:Jt,microseconds:rr,nanoseconds:Qt}=RoundDuration(Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Lt.roundingIncrement,Lt.smallestUnit,Lt.roundingMode,Wt),{days:Kt,hours:zt,minutes:Vt,seconds:Ht,milliseconds:Jt,microseconds:rr,nanoseconds:Qt}=BalanceDuration(Kt,zt,Vt,Ht,Jt,rr,Qt,Lt.largestUnit),new(GetIntrinsic("%Temporal.Duration%"))(At*Ut,At*Nt,At*qt,At*Kt,At*zt,At*Vt,At*Ht,At*Jt,At*rr,At*Qt)}function DifferenceTemporalPlainTime(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalTime($t),Bt=GetDifferenceSettings(_t,CopyOptions(xt),"time",[],"nanosecond","hour");let{hours:jt,minutes:Lt,seconds:Ut,milliseconds:Nt,microseconds:qt,nanoseconds:Kt}=DifferenceTime(GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T),GetSlot(kt,d),GetSlot(kt,m),GetSlot(kt,c),GetSlot(kt,h),GetSlot(kt,u),GetSlot(kt,T));return{hours:jt,minutes:Lt,seconds:Ut,milliseconds:Nt,microseconds:qt,nanoseconds:Kt}=RoundDuration(0,0,0,0,jt,Lt,Ut,Nt,qt,Kt,Bt.roundingIncrement,Bt.smallestUnit,Bt.roundingMode),{hours:jt,minutes:Lt,seconds:Ut,milliseconds:Nt,microseconds:qt,nanoseconds:Kt}=BalanceDuration(0,jt,Lt,Ut,Nt,qt,Kt,Bt.largestUnit),new(GetIntrinsic("%Temporal.Duration%"))(0,0,0,0,At*jt,At*Lt,At*Ut,At*Nt,At*qt,At*Kt)}function DifferenceTemporalPlainYearMonth(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalYearMonth($t),Bt=GetSlot(e,p);ThrowIfCalendarsNotEqual(Bt,GetSlot(kt,p),"compute difference between months");const jt=CopyOptions(xt),Lt=GetDifferenceSettings(_t,jt,"date",["week","day"],"month","year");jt.largestUnit=Lt.largestUnit;const Ut=CalendarFields(Bt,["monthCode","year"]),Nt=PrepareTemporalFields(e,Ut,[]);Nt.day=1;const qt=CalendarDateFromFields(Bt,Nt),Kt=PrepareTemporalFields(kt,Ut,[]);Kt.day=1;const zt=CalendarDateFromFields(Bt,Kt);let{years:Vt,months:Ht}=CalendarDateUntil(Bt,qt,zt,jt);return Lt.smallestUnit==="month"&&Lt.roundingIncrement===1||({years:Vt,months:Ht}=RoundDuration(Vt,Ht,0,0,0,0,0,0,0,0,Lt.roundingIncrement,Lt.smallestUnit,Lt.roundingMode,qt)),new(GetIntrinsic("%Temporal.Duration%"))(At*Vt,At*Ht,0,0,0,0,0,0,0,0)}function DifferenceTemporalZonedDateTime(_t,e,$t,xt){const At=_t==="since"?-1:1,kt=ToTemporalZonedDateTime($t),Bt=GetSlot(e,p);ThrowIfCalendarsNotEqual(Bt,GetSlot(kt,p),"compute difference between dates");const jt=CopyOptions(xt),Lt=GetDifferenceSettings(_t,jt,"datetime",[],"nanosecond","hour");jt.largestUnit=Lt.largestUnit;const Ut=GetSlot(e,n),Nt=GetSlot(kt,n);let qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr;if(Lt.largestUnit!=="year"&&Lt.largestUnit!=="month"&&Lt.largestUnit!=="week"&&Lt.largestUnit!=="day")qt=0,Kt=0,zt=0,Vt=0,{hours:Ht,minutes:Jt,seconds:rr,milliseconds:Qt,microseconds:Wt,nanoseconds:nr}=DifferenceInstant(Ut,Nt,Lt.roundingIncrement,Lt.smallestUnit,Lt.largestUnit,Lt.roundingMode);else{const yr=GetSlot(e,g);if(!TimeZoneEquals(yr,GetSlot(kt,g)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:qt,months:Kt,weeks:zt,days:Vt,hours:Ht,minutes:Jt,seconds:rr,milliseconds:Qt,microseconds:Wt,nanoseconds:nr}=DifferenceZonedDateTime(Ut,Nt,yr,Bt,Lt.largestUnit,jt)),{years:qt,months:Kt,weeks:zt,days:Vt,hours:Ht,minutes:Jt,seconds:rr,milliseconds:Qt,microseconds:Wt,nanoseconds:nr}=RoundDuration(qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr,Lt.roundingIncrement,Lt.smallestUnit,Lt.roundingMode,e),{years:qt,months:Kt,weeks:zt,days:Vt,hours:Ht,minutes:Jt,seconds:rr,milliseconds:Qt,microseconds:Wt,nanoseconds:nr}=AdjustRoundedDurationDays(qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr,Lt.roundingIncrement,Lt.smallestUnit,Lt.roundingMode,e)}return new(GetIntrinsic("%Temporal.Duration%"))(At*qt,At*Kt,At*zt,At*Vt,At*Ht,At*Jt,At*rr,At*Qt,At*Wt,At*nr)}function AddISODate(_t,e,$t,xt,At,kt,Bt,jt){let Lt=_t,Ut=e,Nt=$t,qt=kt,Kt=Bt;return Lt+=xt,Ut+=At,{year:Lt,month:Ut}=BalanceISOYearMonth(Lt,Ut),{year:Lt,month:Ut,day:Nt}=RegulateISODate(Lt,Ut,Nt,jt),Kt+=7*qt,Nt+=Kt,{year:Lt,month:Ut,day:Nt}=BalanceISODate(Lt,Ut,Nt),{year:Lt,month:Ut,day:Nt}}function AddTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt){let Kt=_t,zt=e,Vt=$t,Ht=xt,Jt=At,rr=kt;Kt+=Bt,zt+=jt,Vt+=Lt,Ht+=Ut,Jt+=Nt,rr+=qt;let Qt=0;return{deltaDays:Qt,hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr}=BalanceTime(Kt,zt,Vt,Ht,Jt,rr),{deltaDays:Qt,hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr}}function AddDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr){const yr=LargerOfTwoTemporalUnits(DefaultTemporalLargestUnit(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut),DefaultTemporalLargestUnit(Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt));let vr,Ir,xr,Or,Nr,kr,lr,ir,Xt,er;if(nr)if(IsTemporalDate(nr)){const pr=GetIntrinsic("%Temporal.Duration%"),ur=GetSlot(nr,p),gr=new pr(_t,e,$t,xt,0,0,0,0,0,0),ar=new pr(Nt,qt,Kt,zt,0,0,0,0,0,0),tr=typeof ur!="string"?GetMethod(ur,"dateAdd"):void 0,dr=CalendarDateAdd(ur,nr,gr,void 0,tr),fr=CalendarDateAdd(ur,dr,ar,void 0,tr),br=LargerOfTwoTemporalUnits("day",yr),Sr=Te(null);Sr.largestUnit=br,{years:vr,months:Ir,weeks:xr,days:Or}=CalendarDateUntil(ur,nr,fr,Sr),{days:Or,hours:Nr,minutes:kr,seconds:lr,milliseconds:ir,microseconds:Xt,nanoseconds:er}=BalanceDuration(Or,JSBI.add(JSBI.BigInt(At),JSBI.BigInt(Vt)),JSBI.add(JSBI.BigInt(kt),JSBI.BigInt(Ht)),JSBI.add(JSBI.BigInt(Bt),JSBI.BigInt(Jt)),JSBI.add(JSBI.BigInt(jt),JSBI.BigInt(rr)),JSBI.add(JSBI.BigInt(Lt),JSBI.BigInt(Qt)),JSBI.add(JSBI.BigInt(Ut),JSBI.BigInt(Wt)),yr)}else{const pr=GetIntrinsic("%Temporal.Instant%"),ur=GetSlot(nr,g),gr=GetSlot(nr,p),ar=AddZonedDateTime(GetSlot(nr,S),ur,gr,_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut),tr=AddZonedDateTime(new pr(ar),ur,gr,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt);yr!=="year"&&yr!=="month"&&yr!=="week"&&yr!=="day"?(vr=0,Ir=0,xr=0,Or=0,{hours:Nr,minutes:kr,seconds:lr,milliseconds:ir,microseconds:Xt,nanoseconds:er}=DifferenceInstant(GetSlot(nr,n),tr,1,"nanosecond",yr,"halfExpand")):{years:vr,months:Ir,weeks:xr,days:Or,hours:Nr,minutes:kr,seconds:lr,milliseconds:ir,microseconds:Xt,nanoseconds:er}=DifferenceZonedDateTime(GetSlot(nr,n),tr,ur,gr,yr,Te(null))}else{if(yr==="year"||yr==="month"||yr==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");vr=Ir=xr=0,{days:Or,hours:Nr,minutes:kr,seconds:lr,milliseconds:ir,microseconds:Xt,nanoseconds:er}=BalanceDuration(xt+zt,JSBI.add(JSBI.BigInt(At),JSBI.BigInt(Vt)),JSBI.add(JSBI.BigInt(kt),JSBI.BigInt(Ht)),JSBI.add(JSBI.BigInt(Bt),JSBI.BigInt(Jt)),JSBI.add(JSBI.BigInt(jt),JSBI.BigInt(rr)),JSBI.add(JSBI.BigInt(Lt),JSBI.BigInt(Qt)),JSBI.add(JSBI.BigInt(Ut),JSBI.BigInt(Wt)),yr)}return RejectDuration(vr,Ir,xr,Or,Nr,kr,lr,ir,Xt,er),{years:vr,months:Ir,weeks:xr,days:Or,hours:Nr,minutes:kr,seconds:lr,milliseconds:ir,microseconds:Xt,nanoseconds:er}}function AddInstant(_t,e,$t,xt,At,kt,Bt){let jt=Ie;jt=JSBI.add(jt,JSBI.BigInt(Bt)),jt=JSBI.add(jt,JSBI.multiply(JSBI.BigInt(kt),De)),jt=JSBI.add(jt,JSBI.multiply(JSBI.BigInt(At),Ge)),jt=JSBI.add(jt,JSBI.multiply(JSBI.BigInt(xt),ve)),jt=JSBI.add(jt,JSBI.multiply(JSBI.BigInt($t),JSBI.BigInt(6e10))),jt=JSBI.add(jt,JSBI.multiply(JSBI.BigInt(e),JSBI.BigInt(36e11)));const Lt=JSBI.add(_t,jt);return ValidateEpochNanoseconds(Lt),Lt}function AddDateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr){let yr=zt,{deltaDays:vr,hour:Ir,minute:xr,second:Or,millisecond:Nr,microsecond:kr,nanosecond:lr}=AddTime(xt,At,kt,Bt,jt,Lt,Vt,Ht,Jt,rr,Qt,Wt);yr+=vr;const ir=GetIntrinsic("%Temporal.Duration%"),Xt=CalendarDateAdd(Ut,CreateTemporalDate(_t,e,$t,Ut),new ir(Nt,qt,Kt,yr,0,0,0,0,0,0),nr);return{year:GetSlot(Xt,i$1),month:GetSlot(Xt,s),day:GetSlot(Xt,l),hour:Ir,minute:xr,second:Or,millisecond:Nr,microsecond:kr,nanosecond:lr}}function AddZonedDateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt){const Vt=GetIntrinsic("%Temporal.Duration%");if(DurationSign(xt,At,kt,Bt,0,0,0,0,0,0)===0)return AddInstant(GetSlot(_t,n),jt,Lt,Ut,Nt,qt,Kt);const Ht=GetPlainDateTimeFor(e,_t,$t),Jt=CalendarDateAdd($t,CreateTemporalDate(GetSlot(Ht,i$1),GetSlot(Ht,s),GetSlot(Ht,l),$t),new Vt(xt,At,kt,Bt,0,0,0,0,0,0),zt),rr=CreateTemporalDateTime(GetSlot(Jt,i$1),GetSlot(Jt,s),GetSlot(Jt,l),GetSlot(Ht,d),GetSlot(Ht,m),GetSlot(Ht,c),GetSlot(Ht,h),GetSlot(Ht,u),GetSlot(Ht,T),$t);return AddInstant(GetSlot(GetInstantFor(e,rr,"compatible"),n),jt,Lt,Ut,Nt,qt,Kt)}function AddDurationToOrSubtractDurationFromDuration(_t,e,$t,xt){const At=_t==="subtract"?-1:1;let{years:kt,months:Bt,weeks:jt,days:Lt,hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=ToTemporalDurationRecord($t);const Ht=ToRelativeTemporalObject(GetOptionsObject(xt));return{years:kt,months:Bt,weeks:jt,days:Lt,hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=AddDuration(GetSlot(e,w),GetSlot(e,D),GetSlot(e,G),GetSlot(e,v),GetSlot(e,C),GetSlot(e,O),GetSlot(e,b),GetSlot(e,E$1),GetSlot(e,M),GetSlot(e,R),At*kt,At*Bt,At*jt,At*Lt,At*Ut,At*Nt,At*qt,At*Kt,At*zt,At*Vt,Ht),new(GetIntrinsic("%Temporal.Duration%"))(kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt)}function AddDurationToOrSubtractDurationFromInstant(_t,e,$t){const xt=_t==="subtract"?-1:1,{hours:At,minutes:kt,seconds:Bt,milliseconds:jt,microseconds:Lt,nanoseconds:Ut}=function(Kt,zt){let Vt=ToTemporalDurationRecord(Kt);for(const Ht of zt)if(Vt[Ht]!==0)throw new RangeError(`Duration field ${Ht} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return Vt}($t,["years","months","weeks","days"]),Nt=AddInstant(GetSlot(e,n),xt*At,xt*kt,xt*Bt,xt*jt,xt*Lt,xt*Ut);return new(GetIntrinsic("%Temporal.Instant%"))(Nt)}function AddDurationToOrSubtractDurationFromPlainDateTime(_t,e,$t,xt){const At=_t==="subtract"?-1:1,{years:kt,months:Bt,weeks:jt,days:Lt,hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=ToTemporalDurationRecord($t),Ht=GetOptionsObject(xt),Jt=GetSlot(e,p),{year:rr,month:Qt,day:Wt,hour:nr,minute:yr,second:vr,millisecond:Ir,microsecond:xr,nanosecond:Or}=AddDateTime(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T),Jt,At*kt,At*Bt,At*jt,At*Lt,At*Ut,At*Nt,At*qt,At*Kt,At*zt,At*Vt,Ht);return CreateTemporalDateTime(rr,Qt,Wt,nr,yr,vr,Ir,xr,Or,Jt)}function AddDurationToOrSubtractDurationFromPlainTime(_t,e,$t){const xt=_t==="subtract"?-1:1,{hours:At,minutes:kt,seconds:Bt,milliseconds:jt,microseconds:Lt,nanoseconds:Ut}=ToTemporalDurationRecord($t);let{hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}=AddTime(GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T),xt*At,xt*kt,xt*Bt,xt*jt,xt*Lt,xt*Ut);return{hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}=RegulateTime(Nt,qt,Kt,zt,Vt,Ht,"reject"),new(GetIntrinsic("%Temporal.PlainTime%"))(Nt,qt,Kt,zt,Vt,Ht)}function AddDurationToOrSubtractDurationFromPlainYearMonth(_t,e,$t,xt){let At=ToTemporalDurationRecord($t);_t==="subtract"&&(At={years:-At.years,months:-At.months,weeks:-At.weeks,days:-At.days,hours:-At.hours,minutes:-At.minutes,seconds:-At.seconds,milliseconds:-At.milliseconds,microseconds:-At.microseconds,nanoseconds:-At.nanoseconds});let{years:kt,months:Bt,weeks:jt,days:Lt,hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=At;({days:Lt}=BalanceDuration(Lt,Ut,Nt,qt,Kt,zt,Vt,"day"));const Ht=GetOptionsObject(xt),Jt=GetSlot(e,p),rr=CalendarFields(Jt,["monthCode","year"]),Qt=PrepareTemporalFields(e,rr,[]),Wt=Te(null);CopyDataProperties(Wt,Qt,[]),Qt.day=1;let nr=CalendarDateFromFields(Jt,Qt);const yr=DurationSign(kt,Bt,jt,Lt,0,0,0,0,0,0),vr=GetMethod(Jt,"dateAdd"),Ir=GetIntrinsic("%Temporal.Duration%");if(yr<0){const Nr=CalendarDateAdd(Jt,nr,new Ir(0,1,0,0,0,0,0,0,0,0),void 0,vr),kr=CalendarDateAdd(Jt,Nr,new Ir(0,0,0,-1,0,0,0,0,0,0),void 0,vr);Wt.day=CalendarDay(Jt,kr),nr=CalendarDateFromFields(Jt,Wt)}const xr=new Ir(kt,Bt,jt,Lt,0,0,0,0,0,0),Or=CopyOptions(Ht);return CalendarYearMonthFromFields(Jt,PrepareTemporalFields(CalendarDateAdd(Jt,nr,xr,Ht,vr),rr,[]),Or)}function AddDurationToOrSubtractDurationFromZonedDateTime(_t,e,$t,xt){const At=_t==="subtract"?-1:1,{years:kt,months:Bt,weeks:jt,days:Lt,hours:Ut,minutes:Nt,seconds:qt,milliseconds:Kt,microseconds:zt,nanoseconds:Vt}=ToTemporalDurationRecord($t),Ht=GetOptionsObject(xt),Jt=GetSlot(e,g),rr=GetSlot(e,p);return CreateTemporalZonedDateTime(AddZonedDateTime(GetSlot(e,S),Jt,rr,At*kt,At*Bt,At*jt,At*Lt,At*Ut,At*Nt,At*qt,At*Kt,At*zt,At*Vt,Ht),Jt,rr)}function RoundNumberToIncrement(_t,e,$t){if(JSBI.equal(e,Se))return _t;let{quotient:xt,remainder:At}=divmod(_t,e);if(JSBI.equal(At,Ie))return _t;const kt=JSBI.lessThan(At,Ie)?-1:1,Bt=abs(JSBI.multiply(At,JSBI.BigInt(2))),jt=JSBI.equal(Bt,e),Lt=JSBI.greaterThan(Bt,e);switch($t){case"ceil":kt>0&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"floor":kt<0&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"expand":xt=JSBI.add(xt,JSBI.BigInt(kt));break;case"trunc":break;case"halfCeil":(Lt||jt&&kt>0)&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"halfFloor":(Lt||jt&&kt<0)&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"halfExpand":(Lt||jt)&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"halfTrunc":Lt&&(xt=JSBI.add(xt,JSBI.BigInt(kt)));break;case"halfEven":(Lt||jt&&JSBI.toNumber(JSBI.remainder(abs(xt),JSBI.BigInt(2)))===1)&&(xt=JSBI.add(xt,JSBI.BigInt(kt)))}return JSBI.multiply(xt,e)}function RoundInstant(_t,e,$t,xt){let{remainder:At}=NonNegativeBigIntDivmod(_t,Ee);const kt=JSBI.subtract(_t,At),Bt=RoundNumberToIncrement(At,JSBI.BigInt(_e[$t]*e),xt);return JSBI.add(kt,Bt)}function RoundISODateTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt=864e11){const{deltaDays:zt,hour:Vt,minute:Ht,second:Jt,millisecond:rr,microsecond:Qt,nanosecond:Wt}=RoundTime(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt),{year:nr,month:yr,day:vr}=BalanceISODate(_t,e,$t+zt);return{year:nr,month:yr,day:vr,hour:Vt,minute:Ht,second:Jt,millisecond:rr,microsecond:Qt,nanosecond:Wt}}function RoundTime(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut=864e11){let Nt=Ie;switch(jt){case"day":case"hour":Nt=JSBI.BigInt(_t);case"minute":Nt=JSBI.add(JSBI.multiply(Nt,ge),JSBI.BigInt(e));case"second":Nt=JSBI.add(JSBI.multiply(Nt,ge),JSBI.BigInt($t));case"millisecond":Nt=JSBI.add(JSBI.multiply(Nt,De),JSBI.BigInt(xt));case"microsecond":Nt=JSBI.add(JSBI.multiply(Nt,De),JSBI.BigInt(At));case"nanosecond":Nt=JSBI.add(JSBI.multiply(Nt,De),JSBI.BigInt(kt))}const qt=jt==="day"?Ut:_e[jt],Kt=RoundNumberToIncrement(Nt,JSBI.BigInt(qt*Bt),Lt),zt=JSBI.toNumber(JSBI.divide(Kt,JSBI.BigInt(qt)));switch(jt){case"day":return{deltaDays:zt,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return BalanceTime(zt,0,0,0,0,0);case"minute":return BalanceTime(_t,zt,0,0,0,0);case"second":return BalanceTime(_t,e,zt,0,0,0);case"millisecond":return BalanceTime(_t,e,$t,zt,0,0);case"microsecond":return BalanceTime(_t,e,$t,xt,zt,0);case"nanosecond":return BalanceTime(_t,e,$t,xt,At,zt);default:throw new Error(`Invalid unit ${jt}`)}}function DaysUntil(_t,e){return DifferenceISODate(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l),GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),"day").days}function MoveRelativeDate(_t,e,$t,xt){const At=CalendarDateAdd(_t,e,$t,void 0,xt);return{relativeTo:At,days:DaysUntil(e,At)}}function MoveRelativeZonedDateTime(_t,e,$t,xt,At){const kt=GetSlot(_t,g),Bt=GetSlot(_t,p);return CreateTemporalZonedDateTime(AddZonedDateTime(GetSlot(_t,S),kt,Bt,e,$t,xt,At,0,0,0,0,0,0),kt,Bt)}function AdjustRoundedDurationDays(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt){let Vt=_t,Ht=e,Jt=$t,rr=xt,Qt=At,Wt=kt,nr=Bt,yr=jt,vr=Lt,Ir=Ut;if(!IsTemporalZonedDateTime(zt)||qt==="year"||qt==="month"||qt==="week"||qt==="day"||qt==="nanosecond"&&Nt===1)return{years:Vt,months:Ht,weeks:Jt,days:rr,hours:Qt,minutes:Wt,seconds:nr,milliseconds:yr,microseconds:vr,nanoseconds:Ir};let xr=TotalDurationNanoseconds(0,Qt,Wt,nr,yr,vr,Ir,0);const Or=se(JSBI.toNumber(xr)),Nr=GetSlot(zt,g),kr=GetSlot(zt,p),lr=AddZonedDateTime(GetSlot(zt,S),Nr,kr,Vt,Ht,Jt,rr,0,0,0,0,0,0),ir=AddZonedDateTime(new(GetIntrinsic("%Temporal.Instant%"))(lr),Nr,kr,0,0,0,Or,0,0,0,0,0,0),Xt=JSBI.subtract(ir,lr);return JSBI.greaterThanOrEqual(JSBI.multiply(JSBI.subtract(xr,Xt),JSBI.BigInt(Or)),Ie)&&({years:Vt,months:Ht,weeks:Jt,days:rr}=AddDuration(Vt,Ht,Jt,rr,0,0,0,0,0,0,0,0,0,Or,0,0,0,0,0,0,zt),xr=RoundInstant(JSBI.subtract(xr,Xt),Nt,qt,Kt),{hours:Qt,minutes:Wt,seconds:nr,milliseconds:yr,microseconds:vr,nanoseconds:Ir}=BalanceDuration(0,0,0,0,0,0,JSBI.toNumber(xr),"hour")),{years:Vt,months:Ht,weeks:Jt,days:rr,hours:Qt,minutes:Wt,seconds:nr,milliseconds:yr,microseconds:vr,nanoseconds:Ir}}function RoundDuration(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt){let Vt=_t,Ht=e,Jt=$t,rr=xt,Qt=At,Wt=kt,nr=Bt,yr=jt,vr=Lt,Ir=JSBI.BigInt(Ut);const xr=GetIntrinsic("%Temporal.Duration%");let Or,Nr,kr,lr,ir=zt;if(ir){if(IsTemporalZonedDateTime(ir))Nr=ir,ir=ToTemporalDate(ir);else if(!IsTemporalDate(ir))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Or=GetSlot(ir,p)}if(qt==="year"||qt==="month"||qt==="week"||qt==="day"){let Xt,er,pr;Ir=TotalDurationNanoseconds(0,Qt,Wt,nr,yr,vr,Ut,0),Nr&&(Xt=MoveRelativeZonedDateTime(Nr,Vt,Ht,Jt,rr)),{days:er,nanoseconds:Ir,dayLengthNs:pr}=NanosecondsToDays(Ir,Xt),kr=JSBI.BigInt(pr),rr+=er,Qt=Wt=nr=yr=vr=0}switch(qt){case"year":{if(!Or)throw new RangeError("A starting point is required for years rounding");const Xt=new xr(Vt),er=typeof Or!="string"?GetMethod(Or,"dateAdd"):void 0,pr=CalendarDateAdd(Or,ir,Xt,void 0,er),ur=CalendarDateAdd(Or,ir,new xr(Vt,Ht,Jt),void 0,er);ir=pr,rr+=DaysUntil(pr,ur);const gr=CalendarDateAdd(Or,ir,new xr(0,0,0,rr),void 0,er),ar=Te(null);ar.largestUnit="year";const tr=CalendarDateUntil(Or,ir,gr,ar).years;Vt+=tr;const dr=ir;ir=CalendarDateAdd(Or,ir,new xr(tr),void 0,er),rr-=DaysUntil(dr,ir);const fr=new xr(rr<0?-1:1);let{days:br}=MoveRelativeDate(Or,ir,fr,er);br=ae(br);const Sr=JSBI.multiply(JSBI.BigInt(br),kr);Ir=JSBI.add(JSBI.add(JSBI.multiply(Sr,JSBI.BigInt(Vt)),JSBI.multiply(JSBI.BigInt(rr),kr)),Ir);const Dr=RoundNumberToIncrement(Ir,JSBI.multiply(Sr,JSBI.BigInt(Nt)),Kt);lr=BigIntDivideToNumber(Ir,Sr),Vt=JSBI.toNumber(JSBI.divide(Dr,Sr)),Ir=Ie,Ht=Jt=rr=0;break}case"month":{if(!Or)throw new RangeError("A starting point is required for months rounding");const Xt=new xr(Vt,Ht),er=typeof Or!="string"?GetMethod(Or,"dateAdd"):void 0,pr=CalendarDateAdd(Or,ir,Xt,void 0,er),ur=CalendarDateAdd(Or,ir,new xr(Vt,Ht,Jt),void 0,er);ir=pr,rr+=DaysUntil(pr,ur);const gr=se(rr),ar=new xr(0,rr<0?-1:1);let tr;for({relativeTo:ir,days:tr}=MoveRelativeDate(Or,ir,ar,er);ae(rr)>=ae(tr);)Ht+=gr,rr-=tr,{relativeTo:ir,days:tr}=MoveRelativeDate(Or,ir,ar,er);tr=ae(tr);const dr=JSBI.multiply(JSBI.BigInt(tr),kr);Ir=JSBI.add(JSBI.add(JSBI.multiply(dr,JSBI.BigInt(Ht)),JSBI.multiply(JSBI.BigInt(rr),kr)),Ir);const fr=RoundNumberToIncrement(Ir,JSBI.multiply(dr,JSBI.BigInt(Nt)),Kt);lr=BigIntDivideToNumber(Ir,dr),Ht=JSBI.toNumber(JSBI.divide(fr,dr)),Ir=Ie,Jt=rr=0;break}case"week":{if(!Or)throw new RangeError("A starting point is required for weeks rounding");const Xt=se(rr),er=new xr(0,0,rr<0?-1:1),pr=typeof Or!="string"?GetMethod(Or,"dateAdd"):void 0;let ur;for({relativeTo:ir,days:ur}=MoveRelativeDate(Or,ir,er,pr);ae(rr)>=ae(ur);)Jt+=Xt,rr-=ur,{relativeTo:ir,days:ur}=MoveRelativeDate(Or,ir,er,pr);ur=ae(ur);const gr=JSBI.multiply(JSBI.BigInt(ur),kr);Ir=JSBI.add(JSBI.add(JSBI.multiply(gr,JSBI.BigInt(Jt)),JSBI.multiply(JSBI.BigInt(rr),kr)),Ir);const ar=RoundNumberToIncrement(Ir,JSBI.multiply(gr,JSBI.BigInt(Nt)),Kt);lr=BigIntDivideToNumber(Ir,gr),Jt=JSBI.toNumber(JSBI.divide(ar,gr)),Ir=Ie,rr=0;break}case"day":{const Xt=kr;Ir=JSBI.add(JSBI.multiply(Xt,JSBI.BigInt(rr)),Ir);const er=RoundNumberToIncrement(Ir,JSBI.multiply(Xt,JSBI.BigInt(Nt)),Kt);lr=BigIntDivideToNumber(Ir,Xt),rr=JSBI.toNumber(JSBI.divide(er,Xt)),Ir=Ie;break}case"hour":{let er=JSBI.multiply(JSBI.BigInt(Qt),JSBI.BigInt(36e11));er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(Wt),JSBI.BigInt(6e10))),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(nr),ve)),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(yr),Ge)),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(vr),De)),er=JSBI.add(er,Ir),lr=BigIntDivideToNumber(er,JSBI.BigInt(36e11));const pr=RoundNumberToIncrement(er,JSBI.BigInt(36e11*Nt),Kt);Qt=JSBI.toNumber(JSBI.divide(pr,JSBI.BigInt(36e11))),Ir=Ie,Wt=nr=yr=vr=0;break}case"minute":{let er=JSBI.multiply(JSBI.BigInt(Wt),JSBI.BigInt(6e10));er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(nr),ve)),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(yr),Ge)),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(vr),De)),er=JSBI.add(er,Ir),lr=BigIntDivideToNumber(er,JSBI.BigInt(6e10));const pr=RoundNumberToIncrement(er,JSBI.BigInt(6e10*Nt),Kt);Wt=JSBI.toNumber(JSBI.divide(pr,JSBI.BigInt(6e10))),Ir=Ie,nr=yr=vr=0;break}case"second":{let er=JSBI.multiply(JSBI.BigInt(nr),ve);er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(yr),Ge)),er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(vr),De)),er=JSBI.add(er,Ir),lr=BigIntDivideToNumber(er,JSBI.BigInt(1e9));const pr=RoundNumberToIncrement(er,JSBI.BigInt(1e9*Nt),Kt);nr=JSBI.toNumber(JSBI.divide(pr,JSBI.BigInt(1e9))),Ir=Ie,yr=vr=0;break}case"millisecond":{let er=JSBI.multiply(JSBI.BigInt(yr),Ge);er=JSBI.add(er,JSBI.multiply(JSBI.BigInt(vr),De)),er=JSBI.add(er,Ir),lr=BigIntDivideToNumber(er,JSBI.BigInt(1e6));const pr=RoundNumberToIncrement(er,JSBI.BigInt(1e6*Nt),Kt);yr=JSBI.toNumber(JSBI.divide(pr,JSBI.BigInt(1e6))),Ir=Ie,vr=0;break}case"microsecond":{let er=JSBI.multiply(JSBI.BigInt(vr),De);er=JSBI.add(er,Ir),lr=BigIntDivideToNumber(er,JSBI.BigInt(1e3));const pr=RoundNumberToIncrement(er,JSBI.BigInt(1e3*Nt),Kt);vr=JSBI.toNumber(JSBI.divide(pr,JSBI.BigInt(1e3))),Ir=Ie;break}case"nanosecond":lr=JSBI.toNumber(Ir),Ir=RoundNumberToIncrement(JSBI.BigInt(Ir),JSBI.BigInt(Nt),Kt)}return{years:Vt,months:Ht,weeks:Jt,days:rr,hours:Qt,minutes:Wt,seconds:nr,milliseconds:yr,microseconds:vr,nanoseconds:JSBI.toNumber(Ir),total:lr}}function CompareISODate(_t,e,$t,xt,At,kt){for(const[Bt,jt]of[[_t,xt],[e,At],[$t,kt]])if(Bt!==jt)return ComparisonResult(Bt-jt);return 0}function NonNegativeBigIntDivmod(_t,e){let{quotient:$t,remainder:xt}=divmod(_t,e);return JSBI.lessThan(xt,Ie)&&($t=JSBI.subtract($t,Se),xt=JSBI.add(xt,e)),{quotient:$t,remainder:xt}}function BigIntFloorDiv(_t,e){const{quotient:$t,remainder:xt}=divmod(_t,e);return isZero(xt)||!isNegativeJSBI(_t)==!isNegativeJSBI(e)?$t:JSBI.subtract($t,Se)}function BigIntDivideToNumber(_t,e){const{quotient:$t,remainder:xt}=divmod(_t,e);return JSBI.toNumber($t)+JSBI.toNumber(xt)/JSBI.toNumber(e)}function ToBigIntExternal(_t){const e=ToBigInt(_t);return globalThis.BigInt!==void 0?globalThis.BigInt(e.toString(10)):e}function ToBigInt(_t){let e=_t;if(typeof _t=="object"){const $t=_t[Symbol.toPrimitive];$t&&typeof $t=="function"&&(e=fe($t,_t,["number"]))}if(typeof e=="number")throw new TypeError("cannot convert number to bigint");return typeof e=="bigint"?JSBI.BigInt(e.toString(10)):JSBI.BigInt(e)}const Ve=(()=>{let _t=JSBI.BigInt(Date.now()%1e6);return()=>{const e=JSBI.BigInt(Date.now()),$t=JSBI.add(JSBI.multiply(e,Ge),_t);return _t=JSBI.remainder(e,Ge),JSBI.greaterThan($t,Re)?Re:JSBI.lessThan($t,Me)?Me:$t}})();function DefaultTimeZone(){return new re().resolvedOptions().timeZone}function ComparisonResult(_t){return _t<0?-1:_t>0?1:_t}function GetOptionsObject(_t){if(_t===void 0)return Te(null);if(IsObject(_t)&&_t!==null)return _t;throw new TypeError("Options parameter must be an object, not "+(_t===null?"null":typeof _t))}function CreateOnePropObject(_t,e){const $t=Te(null);return $t[_t]=e,$t}function CopyOptions(_t){const e=Te(null);return CopyDataProperties(e,GetOptionsObject(_t),[]),e}function GetOption(_t,e,$t,xt){let At=_t[e];if(At!==void 0){if(At=ToString(At),!$t.includes(At))throw new RangeError(`${e} must be one of ${$t.join(", ")}, not ${At}`);return At}return xt}function IsBuiltinCalendar(_t){return je.includes(ASCIILowercase(_t))}function ASCIILowercase(_t){return _t.replace(/[A-Z]/g,e=>{const $t=e.charCodeAt(0);return String.fromCharCode($t+32)})}const ze=new RegExp(`^${W.source}$`);function bisect(_t,e,$t,xt=_t(e),At=_t($t)){let kt=JSBI.BigInt(e),Bt=JSBI.BigInt($t),jt=xt,Lt=At;for(;JSBI.greaterThan(JSBI.subtract(Bt,kt),Se);){const Ut=JSBI.divide(JSBI.add(kt,Bt),JSBI.BigInt(2)),Nt=_t(Ut);if(Nt===jt)kt=Ut,jt=Nt;else{if(Nt!==Lt)throw new Error(`invalid state in bisection ${jt} - ${Nt} - ${Lt}`);Bt=Ut,Lt=Nt}}return Bt}const _e={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Je=Symbol("date"),Ke=Symbol("ym"),Xe=Symbol("md"),Qe=Symbol("time"),et=Symbol("datetime"),tt=Symbol("instant"),rt=Symbol("original"),ot=Symbol("timezone"),nt=Symbol("calendar-id"),at=Symbol("locale"),it=Symbol("options"),descriptor=_t=>({value:_t,enumerable:!0,writable:!1,configurable:!0}),st=globalThis.Intl.DateTimeFormat,lt=Object.assign,dt=Object.prototype.hasOwnProperty,mt=Reflect.apply;function getPropLazy(_t,e){let $t=_t[e];return typeof $t=="function"&&($t=new st(_t[at],$t(_t[it])),_t[e]=$t),$t}function DateTimeFormatImpl(_t,e={}){if(!(this instanceof DateTimeFormatImpl))return new DateTimeFormatImpl(_t,e);const $t=e!==void 0,xt=$t?lt({},e):{},At=new st(_t,xt),kt=At.resolvedOptions();if($t){const Bt=lt({},kt);for(const jt in Bt)mt(dt,xt,[jt])||delete Bt[jt];this[it]=Bt}else this[it]=xt;this[at]=kt.locale,this[rt]=At,this[ot]=kt.timeZone,this[nt]=kt.calendar,this[Je]=dateAmend,this[Ke]=yearMonthAmend,this[Xe]=monthDayAmend,this[Qe]=timeAmend,this[et]=datetimeAmend,this[tt]=instantAmend}Object.defineProperty(DateTimeFormatImpl,"name",{writable:!0,value:"DateTimeFormat"}),DateTimeFormatImpl.supportedLocalesOf=function(_t,e){return st.supportedLocalesOf(_t,e)};const ct={resolvedOptions:descriptor(function _t(){return this[rt].resolvedOptions()}),format:descriptor(function _t(e,...$t){let{instant:xt,formatter:At}=extractOverrides(e,this);return xt&&At?At.format(xt.epochMilliseconds):this[rt].format(e,...$t)}),formatRange:descriptor(function _t(e,$t){if(isTemporalObject(e)||isTemporalObject($t)){if(!sameTemporalType(e,$t))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:xt,formatter:At}=extractOverrides(e,this),{instant:kt,formatter:Bt}=extractOverrides($t,this);if(xt&&kt&&At&&Bt&&At===Bt)return At.formatRange(xt.epochMilliseconds,kt.epochMilliseconds)}return this[rt].formatRange(e,$t)})};"formatToParts"in st.prototype&&(ct.formatToParts=descriptor(function _t(e,...$t){let{instant:xt,formatter:At}=extractOverrides(e,this);return xt&&At?At.formatToParts(xt.epochMilliseconds):this[rt].formatToParts(e,...$t)})),"formatRangeToParts"in st.prototype&&(ct.formatRangeToParts=descriptor(function _t(e,$t){if(isTemporalObject(e)||isTemporalObject($t)){if(!sameTemporalType(e,$t))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:xt,formatter:At}=extractOverrides(e,this),{instant:kt,formatter:Bt}=extractOverrides($t,this);if(xt&&kt&&At&&Bt&&At===Bt)return At.formatRangeToParts(xt.epochMilliseconds,kt.epochMilliseconds)}return this[rt].formatRangeToParts(e,$t)})),DateTimeFormatImpl.prototype=Object.create(st.prototype,ct),Object.defineProperty(DateTimeFormatImpl,"prototype",{writable:!1,enumerable:!1,configurable:!1});const ht=DateTimeFormatImpl;function amend(_t={},e={}){const $t=lt({},_t);for(const xt of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])$t[xt]=xt in e?e[xt]:$t[xt],$t[xt]!==!1&&$t[xt]!==void 0||delete $t[xt];return $t}function timeAmend(_t){let e=amend(_t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return hasTimeOptions(e)||(e=lt({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function yearMonthAmend(_t){let e=amend(_t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=lt(e,{year:"numeric",month:"numeric"})),e}function monthDayAmend(_t){let e=amend(_t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=lt({},e,{month:"numeric",day:"numeric"})),e}function dateAmend(_t){let e=amend(_t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return hasDateOptions(e)||(e=lt({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function datetimeAmend(_t){let e=amend(_t,{timeZoneName:!1});return hasTimeOptions(e)||hasDateOptions(e)||(e=lt({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function instantAmend(_t){let e=_t;return hasTimeOptions(e)||hasDateOptions(e)||(e=lt({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function hasDateOptions(_t){return"year"in _t||"month"in _t||"day"in _t||"weekday"in _t||"dateStyle"in _t}function hasTimeOptions(_t){return"hour"in _t||"minute"in _t||"second"in _t||"timeStyle"in _t||"dayPeriod"in _t}function isTemporalObject(_t){return IsTemporalDate(_t)||IsTemporalTime(_t)||IsTemporalDateTime(_t)||IsTemporalZonedDateTime(_t)||IsTemporalYearMonth(_t)||IsTemporalMonthDay(_t)||IsTemporalInstant(_t)}function sameTemporalType(_t,e){return!(!isTemporalObject(_t)||!isTemporalObject(e))&&!(IsTemporalTime(_t)&&!IsTemporalTime(e))&&!(IsTemporalDate(_t)&&!IsTemporalDate(e))&&!(IsTemporalDateTime(_t)&&!IsTemporalDateTime(e))&&!(IsTemporalZonedDateTime(_t)&&!IsTemporalZonedDateTime(e))&&!(IsTemporalYearMonth(_t)&&!IsTemporalYearMonth(e))&&!(IsTemporalMonthDay(_t)&&!IsTemporalMonthDay(e))&&!(IsTemporalInstant(_t)&&!IsTemporalInstant(e))}function extractOverrides(_t,e){const $t=GetIntrinsic("%Temporal.PlainDateTime%");if(IsTemporalTime(_t)){const xt=new $t(1970,1,1,GetSlot(_t,d),GetSlot(_t,m),GetSlot(_t,c),GetSlot(_t,h),GetSlot(_t,u),GetSlot(_t,T),e[nt]);return{instant:GetInstantFor(e[ot],xt,"compatible"),formatter:getPropLazy(e,Qe)}}if(IsTemporalYearMonth(_t)){const xt=GetSlot(_t,i$1),At=GetSlot(_t,s),kt=GetSlot(_t,l),Bt=ToTemporalCalendarIdentifier(GetSlot(_t,p));if(Bt!==e[nt])throw new RangeError(`cannot format PlainYearMonth with calendar ${Bt} in locale with calendar ${e[nt]}`);const jt=new $t(xt,At,kt,12,0,0,0,0,0,Bt);return{instant:GetInstantFor(e[ot],jt,"compatible"),formatter:getPropLazy(e,Ke)}}if(IsTemporalMonthDay(_t)){const xt=GetSlot(_t,i$1),At=GetSlot(_t,s),kt=GetSlot(_t,l),Bt=ToTemporalCalendarIdentifier(GetSlot(_t,p));if(Bt!==e[nt])throw new RangeError(`cannot format PlainMonthDay with calendar ${Bt} in locale with calendar ${e[nt]}`);const jt=new $t(xt,At,kt,12,0,0,0,0,0,Bt);return{instant:GetInstantFor(e[ot],jt,"compatible"),formatter:getPropLazy(e,Xe)}}if(IsTemporalDate(_t)){const xt=GetSlot(_t,i$1),At=GetSlot(_t,s),kt=GetSlot(_t,l),Bt=ToTemporalCalendarIdentifier(GetSlot(_t,p));if(Bt!=="iso8601"&&Bt!==e[nt])throw new RangeError(`cannot format PlainDate with calendar ${Bt} in locale with calendar ${e[nt]}`);const jt=new $t(xt,At,kt,12,0,0,0,0,0,e[nt]);return{instant:GetInstantFor(e[ot],jt,"compatible"),formatter:getPropLazy(e,Je)}}if(IsTemporalDateTime(_t)){const xt=GetSlot(_t,i$1),At=GetSlot(_t,s),kt=GetSlot(_t,l),Bt=GetSlot(_t,d),jt=GetSlot(_t,m),Lt=GetSlot(_t,c),Ut=GetSlot(_t,h),Nt=GetSlot(_t,u),qt=GetSlot(_t,T),Kt=ToTemporalCalendarIdentifier(GetSlot(_t,p));if(Kt!=="iso8601"&&Kt!==e[nt])throw new RangeError(`cannot format PlainDateTime with calendar ${Kt} in locale with calendar ${e[nt]}`);let zt=_t;return Kt==="iso8601"&&(zt=new $t(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,e[nt])),{instant:GetInstantFor(e[ot],zt,"compatible"),formatter:getPropLazy(e,et)}}if(IsTemporalZonedDateTime(_t))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return IsTemporalInstant(_t)?{instant:_t,formatter:getPropLazy(e,tt)}:{}}class Instant{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const $t=ToBigInt(e);ValidateEpochNanoseconds($t),N(this),SetSlot(this,n,$t)}get epochSeconds(){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");const e=GetSlot(this,n);return JSBI.toNumber(BigIntFloorDiv(e,ve))}get epochMilliseconds(){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");const e=JSBI.BigInt(GetSlot(this,n));return JSBI.toNumber(BigIntFloorDiv(e,Ge))}get epochMicroseconds(){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return ToBigIntExternal(BigIntFloorDiv(JSBI.BigInt(GetSlot(this,n)),De))}get epochNanoseconds(){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return ToBigIntExternal(JSBI.BigInt(GetSlot(this,n)))}add(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromInstant("add",this,e)}subtract(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromInstant("subtract",this,e)}until(e,$t){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return DifferenceTemporalInstant("until",this,e,$t)}since(e,$t){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return DifferenceTemporalInstant("since",this,e,$t)}round(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const $t=typeof e=="string"?CreateOnePropObject("smallestUnit",e):GetOptionsObject(e),xt=ToTemporalRoundingIncrement($t),At=ToTemporalRoundingMode($t,"halfExpand"),kt=GetTemporalUnit($t,"smallestUnit","time",He);ValidateTemporalRoundingIncrement(xt,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[kt],!0);const Bt=RoundInstant(GetSlot(this,n),xt,kt,At);return new Instant(Bt)}equals(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");const $t=ToTemporalInstant(e),xt=GetSlot(this,n),At=GetSlot($t,n);return JSBI.equal(JSBI.BigInt(xt),JSBI.BigInt(At))}toString(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");const $t=GetOptionsObject(e),xt=ToFractionalSecondDigits($t),At=ToTemporalRoundingMode($t,"trunc"),kt=GetTemporalUnit($t,"smallestUnit","time",void 0);if(kt==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let Bt=$t.timeZone;Bt!==void 0&&(Bt=ToTemporalTimeZoneSlotValue(Bt));const{precision:jt,unit:Lt,increment:Ut}=ToSecondsStringPrecisionRecord(kt,xt),Nt=RoundInstant(GetSlot(this,n),Ut,Lt,At);return TemporalInstantToString(new Instant(Nt),Bt,jt)}toJSON(){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return TemporalInstantToString(this,void 0,"auto")}toLocaleString(e,$t){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument in toZonedDateTime");const $t=e.calendar;if($t===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const xt=ToTemporalCalendarSlotValue($t),At=e.timeZone;if(At===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const kt=ToTemporalTimeZoneSlotValue(At);return CreateTemporalZonedDateTime(GetSlot(this,n),kt,xt)}toZonedDateTimeISO(e){if(!IsTemporalInstant(this))throw new TypeError("invalid receiver");const $t=ToTemporalTimeZoneSlotValue(e);return CreateTemporalZonedDateTime(GetSlot(this,n),$t,"iso8601")}static fromEpochSeconds(e){const $t=ToNumber(e),xt=JSBI.multiply(JSBI.BigInt($t),ve);return ValidateEpochNanoseconds(xt),new Instant(xt)}static fromEpochMilliseconds(e){const $t=ToNumber(e),xt=JSBI.multiply(JSBI.BigInt($t),Ge);return ValidateEpochNanoseconds(xt),new Instant(xt)}static fromEpochMicroseconds(e){const $t=ToBigInt(e),xt=JSBI.multiply($t,De);return ValidateEpochNanoseconds(xt),new Instant(xt)}static fromEpochNanoseconds(e){const $t=ToBigInt(e);return ValidateEpochNanoseconds($t),new Instant($t)}static from(e){return IsTemporalInstant(e)?new Instant(GetSlot(e,n)):ToTemporalInstant(e)}static compare(e,$t){const xt=ToTemporalInstant(e),At=ToTemporalInstant($t),kt=GetSlot(xt,n),Bt=GetSlot(At,n);return JSBI.lessThan(kt,Bt)?-1:JSBI.greaterThan(kt,Bt)?1:0}}MakeIntrinsicClass(Instant,"Temporal.Instant");const Tt=Array.prototype.includes,pt=Array.prototype.push,ft=globalThis.Intl.DateTimeFormat,yt=Array.prototype.sort,It=Math.abs,St=Math.floor,gt=Object.create,wt=Object.entries,Dt=Set,Gt=Reflect.ownKeys,vt=Set.prototype.add,Ct=Set.prototype.values,Ot={};class Calendar{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const $t=ToString(e);if(!IsBuiltinCalendar($t))throw new RangeError(`invalid calendar identifier ${$t}`);N(this),SetSlot(this,F,ASCIILowercase($t))}get id(){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return GetSlot(this,F)}dateFromFields(e,$t){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid fields");const xt=GetOptionsObject($t),At=GetSlot(this,F);return Ot[At].dateFromFields(e,xt,At)}yearMonthFromFields(e,$t){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid fields");const xt=GetOptionsObject($t),At=GetSlot(this,F);return Ot[At].yearMonthFromFields(e,xt,At)}monthDayFromFields(e,$t){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid fields");const xt=GetOptionsObject($t),At=GetSlot(this,F);return Ot[At].monthDayFromFields(e,xt,At)}fields(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=[],xt=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const At of e){if(typeof At!="string")throw new TypeError("invalid fields");if(!xt.has(At))throw new RangeError(`invalid field name ${At}`);xt.delete(At),pt.call($t,At)}return Ot[GetSlot(this,F)].fields($t)}mergeFields(e,$t){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const xt=ToObject(e),At=gt(null);CopyDataProperties(At,xt,[],[void 0]);const kt=ToObject($t),Bt=gt(null);CopyDataProperties(Bt,kt,[],[void 0]);const jt=Gt(Bt),Lt=Ot[GetSlot(this,F)].fieldKeysToIgnore(jt),Ut=gt(null),Nt=Gt(At);for(const qt of Nt){let Kt;Kt=Call(Tt,Lt,[qt])?Bt[qt]:At[qt],Kt!==void 0&&(Ut[qt]=Kt)}return CopyDataProperties(Ut,Bt,[]),Ut}dateAdd(e,$t,xt){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const At=ToTemporalDate(e),kt=ToTemporalDuration($t),Bt=ToTemporalOverflow(GetOptionsObject(xt)),{days:jt}=BalanceDuration(GetSlot(kt,v),GetSlot(kt,C),GetSlot(kt,O),GetSlot(kt,b),GetSlot(kt,E$1),GetSlot(kt,M),GetSlot(kt,R),"day"),Lt=GetSlot(this,F);return Ot[Lt].dateAdd(At,GetSlot(kt,w),GetSlot(kt,D),GetSlot(kt,G),jt,Bt,Lt)}dateUntil(e,$t,xt){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const At=ToTemporalDate(e),kt=ToTemporalDate($t);let Bt=GetTemporalUnit(GetOptionsObject(xt),"largestUnit","date","auto");Bt==="auto"&&(Bt="day");const{years:jt,months:Lt,weeks:Ut,days:Nt}=Ot[GetSlot(this,F)].dateUntil(At,kt,Bt);return new(GetIntrinsic("%Temporal.Duration%"))(jt,Lt,Ut,Nt,0,0,0,0,0,0)}year(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].year($t)}month(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");if(IsTemporalMonthDay($t))throw new TypeError("use monthCode on PlainMonthDay instead");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].month($t)}monthCode(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||IsTemporalMonthDay($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].monthCode($t)}day(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalMonthDay($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].day($t)}era(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].era($t)}eraYear(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].eraYear($t)}dayOfWeek(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);return Ot[GetSlot(this,F)].dayOfWeek($t)}dayOfYear(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);return Ot[GetSlot(this,F)].dayOfYear($t)}weekOfYear(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);return Ot[GetSlot(this,F)].weekOfYear($t)}yearOfWeek(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);return Ot[GetSlot(this,F)].yearOfWeek($t)}daysInWeek(e){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);return Ot[GetSlot(this,F)].daysInWeek($t)}daysInMonth(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].daysInMonth($t)}daysInYear(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].daysInYear($t)}monthsInYear(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].monthsInYear($t)}inLeapYear(e){let $t=e;if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return IsTemporalYearMonth($t)||($t=ToTemporalDate($t)),Ot[GetSlot(this,F)].inLeapYear($t)}toString(){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return GetSlot(this,F)}toJSON(){if(!IsTemporalCalendar(this))throw new TypeError("invalid receiver");return GetSlot(this,F)}static from(e){return ToTemporalCalendarObject(ToTemporalCalendarSlotValue(e))}}function monthCodeNumberPart(_t){if(!_t.startsWith("M"))throw new RangeError(`Invalid month code: ${_t}.  Month codes must start with M.`);const e=+_t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${_t}`);return e}function buildMonthCode(_t,e=!1){return`M${_t.toString().padStart(2,"0")}${e?"L":""}`}function resolveNonLunisolarMonth(_t,e,$t=12){let{month:xt,monthCode:At}=_t;if(At===void 0){if(xt===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&RejectToRange(xt,1,$t),e==="constrain"&&(xt=ConstrainToRange(xt,1,$t)),At=buildMonthCode(xt)}else{const kt=monthCodeNumberPart(At);if(xt!==void 0&&xt!==kt)throw new RangeError(`monthCode ${At} and month ${xt} must match if both are present`);if(At!==buildMonthCode(kt))throw new RangeError(`Invalid month code: ${At}`);if(xt=kt,xt<1||xt>$t)throw new RangeError(`Invalid monthCode: ${At}`)}return{..._t,month:xt,monthCode:At}}MakeIntrinsicClass(Calendar,"Temporal.Calendar"),DefineIntrinsic("Temporal.Calendar.from",Calendar.from),DefineIntrinsic("Temporal.Calendar.prototype.dateAdd",Calendar.prototype.dateAdd),DefineIntrinsic("Temporal.Calendar.prototype.dateFromFields",Calendar.prototype.dateFromFields),DefineIntrinsic("Temporal.Calendar.prototype.dateUntil",Calendar.prototype.dateUntil),DefineIntrinsic("Temporal.Calendar.prototype.day",Calendar.prototype.day),DefineIntrinsic("Temporal.Calendar.prototype.dayOfWeek",Calendar.prototype.dayOfWeek),DefineIntrinsic("Temporal.Calendar.prototype.dayOfYear",Calendar.prototype.dayOfYear),DefineIntrinsic("Temporal.Calendar.prototype.daysInMonth",Calendar.prototype.daysInMonth),DefineIntrinsic("Temporal.Calendar.prototype.daysInWeek",Calendar.prototype.daysInWeek),DefineIntrinsic("Temporal.Calendar.prototype.daysInYear",Calendar.prototype.daysInYear),DefineIntrinsic("Temporal.Calendar.prototype.era",Calendar.prototype.era),DefineIntrinsic("Temporal.Calendar.prototype.eraYear",Calendar.prototype.eraYear),DefineIntrinsic("Temporal.Calendar.prototype.fields",Calendar.prototype.fields),DefineIntrinsic("Temporal.Calendar.prototype.inLeapYear",Calendar.prototype.inLeapYear),DefineIntrinsic("Temporal.Calendar.prototype.mergeFields",Calendar.prototype.mergeFields),DefineIntrinsic("Temporal.Calendar.prototype.month",Calendar.prototype.month),DefineIntrinsic("Temporal.Calendar.prototype.monthCode",Calendar.prototype.monthCode),DefineIntrinsic("Temporal.Calendar.prototype.monthDayFromFields",Calendar.prototype.monthDayFromFields),DefineIntrinsic("Temporal.Calendar.prototype.monthsInYear",Calendar.prototype.monthsInYear),DefineIntrinsic("Temporal.Calendar.prototype.weekOfYear",Calendar.prototype.weekOfYear),DefineIntrinsic("Temporal.Calendar.prototype.year",Calendar.prototype.year),DefineIntrinsic("Temporal.Calendar.prototype.yearMonthFromFields",Calendar.prototype.yearMonthFromFields),DefineIntrinsic("Temporal.Calendar.prototype.yearOfWeek",Calendar.prototype.yearOfWeek),Ot.iso8601={dateFromFields(_t,e,$t){let xt=PrepareTemporalFields(_t,["day","month","monthCode","year"],["year","day"]);const At=ToTemporalOverflow(e);xt=resolveNonLunisolarMonth(xt);let{year:kt,month:Bt,day:jt}=xt;return{year:kt,month:Bt,day:jt}=RegulateISODate(kt,Bt,jt,At),CreateTemporalDate(kt,Bt,jt,$t)},yearMonthFromFields(_t,e,$t){let xt=PrepareTemporalFields(_t,["month","monthCode","year"],["year"]);const At=ToTemporalOverflow(e);xt=resolveNonLunisolarMonth(xt);let{year:kt,month:Bt}=xt;return{year:kt,month:Bt}=function(Lt,Ut,Nt){let qt=Lt,Kt=Ut;switch(Nt){case"reject":RejectISODate(qt,Kt,1);break;case"constrain":({year:qt,month:Kt}=ConstrainISODate(qt,Kt))}return{year:qt,month:Kt}}(kt,Bt,At),CreateTemporalYearMonth(kt,Bt,$t,1)},monthDayFromFields(_t,e,$t){let xt=PrepareTemporalFields(_t,["day","month","monthCode","year"],["day"]);const At=ToTemporalOverflow(e);if(xt.month!==void 0&&xt.year===void 0&&xt.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const kt=xt.monthCode===void 0;xt=resolveNonLunisolarMonth(xt);let{month:Bt,day:jt,year:Lt}=xt;return{month:Bt,day:jt}=RegulateISODate(kt?Lt:1972,Bt,jt,At),CreateTemporalMonthDay(Bt,jt,$t,1972)},fields:_t=>_t,fieldKeysToIgnore(_t){const e=new Dt;for(let $t=0;$t<_t.length;$t++){const xt=_t[$t];Call(vt,e,[xt]),xt==="month"?Call(vt,e,["monthCode"]):xt==="monthCode"&&Call(vt,e,["month"])}return[...Call(Ct,e,[])]},dateAdd(_t,e,$t,xt,At,kt,Bt){let jt=GetSlot(_t,i$1),Lt=GetSlot(_t,s),Ut=GetSlot(_t,l);return{year:jt,month:Lt,day:Ut}=AddISODate(jt,Lt,Ut,e,$t,xt,At,kt),CreateTemporalDate(jt,Lt,Ut,Bt)},dateUntil:(_t,e,$t)=>DifferenceISODate(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l),GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),$t),year:_t=>GetSlot(_t,i$1),era(){},eraYear(){},month:_t=>GetSlot(_t,s),monthCode:_t=>buildMonthCode(GetSlot(_t,s)),day:_t=>GetSlot(_t,l),dayOfWeek:_t=>DayOfWeek(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l)),dayOfYear:_t=>DayOfYear(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l)),weekOfYear:_t=>WeekOfYear(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l)).week,yearOfWeek:_t=>WeekOfYear(GetSlot(_t,i$1),GetSlot(_t,s),GetSlot(_t,l)).year,daysInWeek:()=>7,daysInMonth:_t=>ISODaysInMonth(GetSlot(_t,i$1),GetSlot(_t,s)),daysInYear(_t){let e=_t;return HasSlot(e,i$1)||(e=ToTemporalDate(e)),LeapYear(GetSlot(e,i$1))?366:365},monthsInYear:()=>12,inLeapYear(_t){let e=_t;return HasSlot(e,i$1)||(e=ToTemporalDate(e)),LeapYear(GetSlot(e,i$1))}};class OneObjectCache{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let $t=0;for(const xt of e.map.entries()){if(++$t>OneObjectCache.MAX_CACHE_ENTRIES)break;this.map.set(...xt)}}}get(e){const $t=this.map.get(e);return $t&&(this.hits++,this.report()),this.calls++,$t}set(e,$t){this.map.set(e,$t),this.misses++,this.report()}report(){}setObject(e){if(OneObjectCache.objectMap.get(e))throw new RangeError("object already cached");OneObjectCache.objectMap.set(e,this),this.report()}static getCacheForObject(e){let $t=OneObjectCache.objectMap.get(e);return $t||($t=new OneObjectCache,OneObjectCache.objectMap.set(e,$t)),$t}}function toUtcIsoDateString({isoYear:_t,isoMonth:e,isoDay:$t}){return`${ISOYearString(_t)}-${ISODateTimePartString(e)}-${ISODateTimePartString($t)}T00:00Z`}function simpleDateDiff(_t,e){return{years:_t.year-e.year,months:_t.month-e.month,days:_t.day-e.day}}OneObjectCache.objectMap=new WeakMap,OneObjectCache.MAX_CACHE_ENTRIES=1e3;class HelperBase{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new ft(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,$t){const{year:xt,month:At,day:kt}=e,Bt=JSON.stringify({func:"isoToCalendarDate",isoYear:xt,isoMonth:At,isoDay:kt,id:this.id}),jt=$t.get(Bt);if(jt)return jt;const Lt=this.getFormatter();let Ut,Nt;try{Nt=toUtcIsoDateString({isoYear:xt,isoMonth:At,isoDay:kt}),Ut=Lt.formatToParts(new Date(Nt))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:xt,isoMonth:At,isoDay:kt})}`)}const qt={};for(let{type:zt,value:Vt}of Ut){if(zt==="year"&&(qt.eraYear=+Vt),zt==="relatedYear"&&(qt.eraYear=+Vt),zt==="month"){const Ht=/^([0-9]*)(.*?)$/.exec(Vt);if(!Ht||Ht.length!=3||!Ht[1]&&!Ht[2])throw new RangeError(`Unexpected month: ${Vt}`);if(qt.month=Ht[1]?+Ht[1]:1,qt.month<1)throw new RangeError(`Invalid month ${Vt} from ${Nt}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(qt.month>13)throw new RangeError(`Invalid month ${Vt} from ${Nt}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);Ht[2]&&(qt.monthExtra=Ht[2])}zt==="day"&&(qt.day=+Vt),this.hasEra&&zt==="era"&&Vt!=null&&Vt!==""&&(Vt=Vt.split(" (")[0],qt.era=Vt.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(qt.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:zt,eraYear:Vt}=this.reviseIntlEra(qt,e);qt.era=zt,qt.eraYear=Vt}this.checkIcuBugs&&this.checkIcuBugs(e);const Kt=this.adjustCalendarDate(qt,$t,"constrain",!0);if(Kt.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(Kt.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(Kt.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return $t.set(Bt,Kt),["constrain","reject"].forEach(zt=>{const Vt=JSON.stringify({func:"calendarToIsoDate",year:Kt.year,month:Kt.month,day:Kt.day,overflow:zt,id:this.id});$t.set(Vt,e)}),Kt}validateCalendarDate(e){const{era:$t,month:xt,year:At,day:kt,eraYear:Bt,monthCode:jt,monthExtra:Lt}=e;if(Lt!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(At===void 0&&Bt===void 0)throw new TypeError("year or eraYear is required");if(xt===void 0&&jt===void 0)throw new TypeError("month or monthCode is required");if(kt===void 0)throw new RangeError("Missing day");if(jt!==void 0){if(typeof jt!="string")throw new RangeError("monthCode must be a string, not "+typeof jt);if(!/^M([01]?\d)(L?)$/.test(jt))throw new RangeError(`Invalid monthCode: ${jt}`)}if(this.constantEra){if($t!==void 0&&$t!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${$t}`);if(Bt!==void 0&&At!==void 0&&Bt!==At)throw new RangeError(`eraYear ${Bt} does not match year ${At}`)}if(this.hasEra&&e.era===void 0!=(e.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(e,$t,xt="constrain",At=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let kt=e;if(this.validateCalendarDate(kt),this.constantEra){const{year:Ut,eraYear:Nt}=kt;kt={...kt,era:this.constantEra,year:Ut!==void 0?Ut:Nt,eraYear:Nt!==void 0?Nt:Ut}}const Bt=this.monthsInYear(kt,$t);let{month:jt,monthCode:Lt}=kt;return{month:jt,monthCode:Lt}=resolveNonLunisolarMonth(kt,xt,Bt),{...kt,month:jt,monthCode:Lt}}regulateMonthDayNaive(e,$t,xt){const At=this.monthsInYear(e,xt);let{month:kt,day:Bt}=e;return $t==="reject"?(RejectToRange(kt,1,At),RejectToRange(Bt,1,this.maximumMonthLength(e))):(kt=ConstrainToRange(kt,1,At),Bt=ConstrainToRange(Bt,1,this.maximumMonthLength({...e,month:kt}))),{...e,month:kt,day:Bt}}calendarToIsoDate(e,$t="constrain",xt){const At=e;let kt=this.adjustCalendarDate(e,xt,$t,!1);kt=this.regulateMonthDayNaive(kt,$t,xt);const{year:Bt,month:jt,day:Lt}=kt,Ut=JSON.stringify({func:"calendarToIsoDate",year:Bt,month:jt,day:Lt,overflow:$t,id:this.id});let Nt,qt=xt.get(Ut);if(qt||At.year!==void 0&&At.month!==void 0&&At.day!==void 0&&(At.year!==kt.year||At.month!==kt.month||At.day!==kt.day)&&(Nt=JSON.stringify({func:"calendarToIsoDate",year:At.year,month:At.month,day:At.day,overflow:$t,id:this.id}),qt=xt.get(Nt),qt))return qt;let Kt=this.estimateIsoDate({year:Bt,month:jt,day:Lt});const zt=Qt=>{let Wt=this.addDaysIso(Kt,Qt);if(kt.day>this.minimumMonthLength(kt)){let nr=this.isoToCalendarDate(Wt,xt);for(;nr.month!==jt||nr.year!==Bt;){if($t==="reject")throw new RangeError(`day ${Lt} does not exist in month ${jt} of year ${Bt}`);Wt=this.addDaysIso(Wt,-1),nr=this.isoToCalendarDate(Wt,xt)}}return Wt};let Vt=0,Ht=this.isoToCalendarDate(Kt,xt),Jt=simpleDateDiff(kt,Ht);if(Jt.years!==0||Jt.months!==0||Jt.days!==0){const Qt=365*Jt.years+30*Jt.months+Jt.days;Kt=this.addDaysIso(Kt,Qt),Ht=this.isoToCalendarDate(Kt,xt),Jt=simpleDateDiff(kt,Ht),Jt.years===0&&Jt.months===0?Kt=zt(Jt.days):Vt=this.compareCalendarDates(kt,Ht)}let rr=8;for(;Vt;){Kt=this.addDaysIso(Kt,Vt*rr);const Qt=Ht;Ht=this.isoToCalendarDate(Kt,xt);const Wt=Vt;if(Vt=this.compareCalendarDates(kt,Ht),Vt){if(Jt=simpleDateDiff(kt,Ht),Jt.years===0&&Jt.months===0)Kt=zt(Jt.days),Vt=0;else if(Wt&&Vt!==Wt)if(rr>1)rr/=2;else{if($t==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...At})}`);this.compareCalendarDates(Ht,Qt)>0&&(Kt=this.addDaysIso(Kt,-1)),Vt=0}}}if(xt.set(Ut,Kt),Nt&&xt.set(Nt,Kt),kt.year===void 0||kt.month===void 0||kt.day===void 0||kt.monthCode===void 0||this.hasEra&&(kt.era===void 0||kt.eraYear===void 0))throw new RangeError("Unexpected missing property");return Kt}temporalToCalendarDate(e,$t){const xt={year:GetSlot(e,i$1),month:GetSlot(e,s),day:GetSlot(e,l)};return this.isoToCalendarDate(xt,$t)}compareCalendarDates(e,$t){const xt=PrepareTemporalFields(e,["day","month","year"],["day","month","year"]),At=PrepareTemporalFields($t,["day","month","year"],["day","month","year"]);return xt.year!==At.year?ComparisonResult(xt.year-At.year):xt.month!==At.month?ComparisonResult(xt.month-At.month):xt.day!==At.day?ComparisonResult(xt.day-At.day):0}regulateDate(e,$t="constrain",xt){const At=this.calendarToIsoDate(e,$t,xt);return this.isoToCalendarDate(At,xt)}addDaysIso(e,$t){return AddISODate(e.year,e.month,e.day,0,0,0,$t,"constrain")}addDaysCalendar(e,$t,xt){const At=this.calendarToIsoDate(e,"constrain",xt),kt=this.addDaysIso(At,$t);return this.isoToCalendarDate(kt,xt)}addMonthsCalendar(e,$t,xt,At){let kt=e;const{day:Bt}=kt;for(let jt=0,Lt=It($t);jt<Lt;jt++){const{month:Ut}=kt,Nt=kt,qt=$t<0?-Math.max(Bt,this.daysInPreviousMonth(kt,At)):this.daysInMonth(kt,At),Kt=this.calendarToIsoDate(kt,"constrain",At);let zt=this.addDaysIso(Kt,qt);if(kt=this.isoToCalendarDate(zt,At),$t>0){const Vt=this.monthsInYear(Nt,At);for(;kt.month-1!=Ut%Vt;)zt=this.addDaysIso(zt,-1),kt=this.isoToCalendarDate(zt,At)}kt.day!==Bt&&(kt=this.regulateDate({...kt,day:Bt},"constrain",At))}if(xt==="reject"&&kt.day!==Bt)throw new RangeError(`Day ${Bt} does not exist in resulting calendar month`);return kt}addCalendar(e,{years:$t=0,months:xt=0,weeks:At=0,days:kt=0},Bt,jt){const{year:Lt,day:Ut,monthCode:Nt}=e,qt=this.adjustCalendarDate({year:Lt+$t,monthCode:Nt,day:Ut},jt),Kt=this.addMonthsCalendar(qt,xt,Bt,jt),zt=kt+7*At;return this.addDaysCalendar(Kt,zt,jt)}untilCalendar(e,$t,xt,At){let kt=0,Bt=0,jt=0,Lt=0;switch(xt){case"day":kt=this.calendarDaysUntil(e,$t,At);break;case"week":{const Ut=this.calendarDaysUntil(e,$t,At);kt=Ut%7,Bt=(Ut-kt)/7;break}case"month":case"year":{const Ut=this.compareCalendarDates($t,e);if(!Ut)return{years:0,months:0,weeks:0,days:0};const Nt=$t.year-e.year,qt=$t.day-e.day;if(xt==="year"&&Nt){let Vt=0;$t.monthCode>e.monthCode&&(Vt=1),$t.monthCode<e.monthCode&&(Vt=-1),Vt||(Vt=Math.sign(qt)),Lt=Vt*Ut<0?Nt-Ut:Nt}let Kt,zt=Lt?this.addCalendar(e,{years:Lt},"constrain",At):e;do jt+=Ut,Kt=zt,zt=this.addMonthsCalendar(Kt,Ut,"constrain",At),zt.day!==e.day&&(zt=this.regulateDate({...zt,day:e.day},"constrain",At));while(this.compareCalendarDates($t,zt)*Ut>=0);jt-=Ut,kt=this.calendarDaysUntil(Kt,$t,At);break}}return{years:Lt,months:jt,weeks:Bt,days:kt}}daysInMonth(e,$t){const{day:xt}=e,At=this.maximumMonthLength(e),kt=this.minimumMonthLength(e);if(kt===At)return kt;const Bt=xt<=At-kt?At:kt,jt=this.calendarToIsoDate(e,"constrain",$t),Lt=this.addDaysIso(jt,Bt),Ut=this.isoToCalendarDate(Lt,$t),Nt=this.addDaysIso(Lt,-Ut.day);return this.isoToCalendarDate(Nt,$t).day}daysInPreviousMonth(e,$t){const{day:xt,month:At,year:kt}=e;let Bt={year:At>1?kt:kt-1,month:At,day:1};const jt=At>1?At-1:this.monthsInYear(Bt,$t);Bt={...Bt,month:jt};const Lt=this.minimumMonthLength(Bt),Ut=this.maximumMonthLength(Bt);if(Lt===Ut)return Ut;const Nt=this.calendarToIsoDate(e,"constrain",$t),qt=this.addDaysIso(Nt,-xt);return this.isoToCalendarDate(qt,$t).day}startOfCalendarYear(e){return{year:e.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,$t,xt){const At=this.calendarToIsoDate(e,"constrain",xt),kt=this.calendarToIsoDate($t,"constrain",xt);return this.isoDaysUntil(At,kt)}isoDaysUntil(e,$t){return DifferenceISODate(e.year,e.month,e.day,$t.year,$t.month,$t.day,"day").days}monthDayFromFields(e,$t,xt){let At,kt,Bt,jt,Lt,{monthCode:Ut,day:Nt}=e;if(Ut===void 0){let{year:zt,era:Vt,eraYear:Ht}=e;if(zt===void 0&&(Vt===void 0||Ht===void 0))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:Ut,day:Nt}=this.isoToCalendarDate(this.calendarToIsoDate(e,$t,xt),xt))}const qt=this.isoToCalendarDate({year:1972,month:12,day:31},xt),Kt=qt.monthCode>Ut||qt.monthCode===Ut&&qt.day>=Nt?qt.year:qt.year-1;for(let zt=0;zt<100;zt++){const Vt=this.adjustCalendarDate({day:Nt,monthCode:Ut,year:Kt-zt},xt),Ht=this.calendarToIsoDate(Vt,"constrain",xt),Jt=this.isoToCalendarDate(Ht,xt);if({year:At,month:kt,day:Bt}=Ht,Jt.monthCode===Ut&&Jt.day===Nt)return{month:kt,day:Bt,year:At};$t==="constrain"&&(jt===void 0||Jt.monthCode===jt.monthCode&&Jt.day>jt.day)&&(jt=Jt,Lt=Ht)}if($t==="constrain"&&Lt!==void 0)return Lt;throw new RangeError(`No recent ${this.id} year with monthCode ${Ut} and day ${Nt}`)}}class HebrewHelper extends HelperBase{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:$t}=e;return(7*$t+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,$t){const{month:xt,year:At}=e,kt=this.getMonthCode(At,xt),Bt=wt(this.months).find(Lt=>Lt[1].monthCode===kt);if(Bt===void 0)throw new RangeError(`unmatched Hebrew month: ${xt}`);const jt=Bt[1].days;return typeof jt=="number"?jt:jt[$t]}estimateIsoDate(e){const{year:$t}=e;return{year:$t-3760,month:1,day:1}}getMonthCode(e,$t){return this.inLeapYear({year:e})?$t===6?buildMonthCode(5,!0):buildMonthCode($t<6?$t:$t-1):buildMonthCode($t)}adjustCalendarDate(e,$t,xt="constrain",At=!1){let{year:kt,eraYear:Bt,month:jt,monthCode:Lt,day:Ut,monthExtra:Nt}=e;if(kt===void 0&&Bt!==void 0&&(kt=Bt),Bt===void 0&&kt!==void 0&&(Bt=kt),At){if(Nt){const qt=this.months[Nt];if(!qt)throw new RangeError(`Unrecognized month from formatToParts: ${Nt}`);jt=this.inLeapYear({year:kt})?qt.leap:qt.regular}return Lt=this.getMonthCode(kt,jt),{year:kt,month:jt,day:Ut,era:void 0,eraYear:Bt,monthCode:Lt}}if(this.validateCalendarDate(e),jt===void 0)if(Lt.endsWith("L")){if(Lt!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${Lt}`);if(jt=6,!this.inLeapYear({year:kt})){if(xt==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${kt} which is not a leap year`);jt=6,Lt="M06"}}else{jt=monthCodeNumberPart(Lt),this.inLeapYear({year:kt})&&jt>=6&&jt++;const qt=this.monthsInYear({year:kt});if(jt<1||jt>qt)throw new RangeError(`Invalid monthCode: ${Lt}`)}else if(xt==="reject"?(RejectToRange(jt,1,this.monthsInYear({year:kt})),RejectToRange(Ut,1,this.maximumMonthLength({year:kt,month:jt}))):(jt=ConstrainToRange(jt,1,this.monthsInYear({year:kt})),Ut=ConstrainToRange(Ut,1,this.maximumMonthLength({year:kt,month:jt}))),Lt===void 0)Lt=this.getMonthCode(kt,jt);else if(this.getMonthCode(kt,jt)!==Lt)throw new RangeError(`monthCode ${Lt} doesn't correspond to month ${jt} in Hebrew year ${kt}`);return{...e,day:Ut,month:jt,monthCode:Lt,year:kt,eraYear:Bt}}}class IslamicBaseHelper extends HelperBase{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,$t){return this.daysInMonth({year:e.year,month:12,day:1},$t)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:$t}=this.adjustCalendarDate(e);return{year:St($t*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class IslamicHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamic"}}class IslamicUmalquraHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamic-umalqura"}}class IslamicTblaHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamic-tbla"}}class IslamicCivilHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamic-civil"}}class IslamicRgsaHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamic-rgsa"}}class IslamicCcHelper extends IslamicBaseHelper{constructor(){super(...arguments),this.id="islamicc"}}class PersianHelper extends HelperBase{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,$t){return IslamicHelper.prototype.inLeapYear.call(this,e,$t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:$t}=e;return $t===12?29:$t<=6?31:30}maximumMonthLength(e){const{month:$t}=e;return $t===12?30:$t<=6?31:30}estimateIsoDate(e){const{year:$t}=this.adjustCalendarDate(e);return{year:$t+621,month:1,day:1}}}class IndianHelper extends HelperBase{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return isGregorianLeapYear(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:$t}=e;let xt=this.months[$t];if(xt===void 0)throw new RangeError(`Invalid month: ${$t}`);return this.inLeapYear(e)&&xt.leap&&(xt=xt.leap),xt}estimateIsoDate(e){const $t=this.adjustCalendarDate(e),xt=this.getMonthInfo($t);return AddISODate($t.year+78+(xt.nextYear?1:0),xt.month,xt.day,0,0,0,$t.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function isGregorianLeapYear(_t){return _t%4==0&&(_t%100!=0||_t%400==0)}class GregorianBaseHelper extends HelperBase{constructor(e,$t){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:xt,anchorEra:At}=function(Bt){let jt,Lt=Bt;if(Lt.length===0)throw new RangeError("Invalid era data: eras are required");if(Lt.length===1&&Lt[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(Lt.length===1&&!Lt[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(Lt.filter(Nt=>Nt.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");Lt.forEach(Nt=>{if(Nt.isAnchor||!Nt.anchorEpoch&&!Nt.reverseOf){if(jt)throw new RangeError("Invalid era data: cannot have multiple anchor eras");jt=Nt,Nt.anchorEpoch={year:Nt.hasYearZero?0:1}}else if(!Nt.name)throw new RangeError("If era name is blank, it must be the anchor era")}),Lt=Lt.filter(Nt=>Nt.name),Lt.forEach(Nt=>{const{reverseOf:qt}=Nt;if(qt){const Kt=Lt.find(zt=>zt.name===qt);if(Kt===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${qt}`);Nt.reverseOf=Kt,Nt.anchorEpoch=Kt.anchorEpoch,Nt.isoEpoch=Kt.isoEpoch}Nt.anchorEpoch.month===void 0&&(Nt.anchorEpoch.month=1),Nt.anchorEpoch.day===void 0&&(Nt.anchorEpoch.day=1)}),yt.call(Lt,(Nt,qt)=>{if(Nt.reverseOf)return 1;if(qt.reverseOf)return-1;if(!Nt.isoEpoch||!qt.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return qt.isoEpoch.year-Nt.isoEpoch.year});const Ut=Lt[Lt.length-1].reverseOf;if(Ut&&Ut!==Lt[Lt.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return Lt.forEach((Nt,qt)=>{Nt.genericName="era"+(Lt.length-1-qt)}),{eras:Lt,anchorEra:jt||Lt[0]}}($t);this.anchorEra=At,this.eras=xt}inLeapYear(e){const{year:$t}=this.estimateIsoDate({month:1,day:1,year:e.year});return isGregorianLeapYear($t)}monthsInYear(){return 12}minimumMonthLength(e){const{month:$t}=e;return $t===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf($t)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const $t=(jt,Lt)=>{const Ut=e[jt];if(Ut!=null&&Ut!=Lt)throw new RangeError(`Input ${jt} ${Ut} doesn't match calculated value ${Lt}`)},xt=jt=>{let Lt;const Ut={...e,year:jt},Nt=this.eras.find((qt,Kt)=>{if(Kt===this.eras.length-1){if(qt.reverseOf){if(jt>0)throw new RangeError(`Signed year ${jt} is invalid for era ${qt.name}`);return Lt=qt.anchorEpoch.year-jt,!0}return Lt=jt-qt.anchorEpoch.year+(qt.hasYearZero?0:1),!0}return this.compareCalendarDates(Ut,qt.anchorEpoch)>=0&&(Lt=jt-qt.anchorEpoch.year+(qt.hasYearZero?0:1),!0)});if(!Nt)throw new RangeError(`Year ${jt} was not matched by any era`);return{eraYear:Lt,era:Nt.name}};let{year:At,eraYear:kt,era:Bt}=e;if(At!=null)({eraYear:kt,era:Bt}=xt(At)),$t("era",Bt),$t("eraYear",kt);else{if(kt==null)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const jt=Bt===void 0?void 0:this.eras.find(Lt=>Lt.name===Bt||Lt.genericName===Bt);if(!jt)throw new RangeError(`Era ${Bt} (ISO year ${kt}) was not matched by any era`);if(kt<1&&jt.reverseOf)throw new RangeError(`Years in ${Bt} era must be positive, not ${At}`);At=jt.reverseOf?jt.anchorEpoch.year-kt:kt+jt.anchorEpoch.year-(jt.hasYearZero?0:1),$t("year",At),{eraYear:kt,era:Bt}=xt(At)}}return{...e,year:At,eraYear:kt,era:Bt}}adjustCalendarDate(e,$t,xt="constrain"){let At=e;const{month:kt,monthCode:Bt}=At;return kt===void 0&&(At={...At,month:monthCodeNumberPart(Bt)}),this.validateCalendarDate(At),At=this.completeEraYear(At),super.adjustCalendarDate(At,$t,xt)}estimateIsoDate(e){const $t=this.adjustCalendarDate(e),{year:xt,month:At,day:kt}=$t,{anchorEra:Bt}=this;return RegulateISODate(xt+Bt.isoEpoch.year-(Bt.hasYearZero?0:1),At,kt,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&CompareISODate(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class OrthodoxBaseHelper extends GregorianBaseHelper{constructor(e,$t){super(e,$t)}inLeapYear(e){const{year:$t}=e;return($t+1)%4==0}monthsInYear(){return 13}minimumMonthLength(e){const{month:$t}=e;return $t===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class EthioaaHelper extends OrthodoxBaseHelper{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class CopticHelper extends OrthodoxBaseHelper{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class EthiopicHelper extends OrthodoxBaseHelper{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class RocHelper extends GregorianBaseHelper{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class BuddhistHelper extends GregorianBaseHelper{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class GregoryHelper extends GregorianBaseHelper{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:$t,eraYear:xt}=e;return $t!=="bc"&&$t!=="b"||($t="bce"),$t!=="ad"&&$t!=="a"||($t="ce"),{era:$t,eraYear:xt}}}class JapaneseHelper extends GregorianBaseHelper{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(e,$t){const{era:xt,eraYear:At}=e,{year:kt}=$t;return this.eras.find(Bt=>Bt.name===xt)?{era:xt,eraYear:At}:kt<1?{era:"bce",eraYear:1-kt}:{era:"ce",eraYear:kt}}}class ChineseBaseHelper extends HelperBase{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,$t){const xt=this.getMonthList(e.year,$t);return wt(xt).length===13}monthsInYear(e,$t){return this.inLeapYear(e,$t)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,$t){if(e===void 0)throw new TypeError("Missing year");const xt=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),At=$t.get(xt);if(At)return At;const kt=this.getFormatter(),Bt=(Jt,rr)=>{const Qt=toUtcIsoDateString({isoYear:Jt,isoMonth:2,isoDay:1}),Wt=new Date(Qt);Wt.setUTCDate(rr+1);const nr=kt.formatToParts(Wt),yr=nr.find(xr=>xr.type==="month").value,vr=+nr.find(xr=>xr.type==="day").value;let Ir=nr.find(xr=>xr.type==="relatedYear");if(Ir===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return Ir=+Ir.value,{calendarMonthString:yr,calendarDay:vr,calendarYearToVerify:Ir}};let jt=17,{calendarMonthString:Lt,calendarDay:Ut,calendarYearToVerify:Nt}=Bt(e,jt);Lt!=="1"&&(jt+=29,{calendarMonthString:Lt,calendarDay:Ut}=Bt(e,jt)),jt-=Ut-5;const qt={};let Kt,zt,Vt=1,Ht=!1;do({calendarMonthString:Lt,calendarDay:Ut,calendarYearToVerify:Nt}=Bt(e,jt)),Kt&&(qt[zt].daysInMonth=Kt+30-Ut),Nt!==e?Ht=!0:(qt[Lt]={monthIndex:Vt++},jt+=30),Kt=Ut,zt=Lt;while(!Ht);return qt[zt].daysInMonth=Kt+30-Ut,$t.set(xt,qt),qt}estimateIsoDate(e){const{year:$t,month:xt}=e;return{year:$t,month:xt>=12?12:xt+1,day:1}}adjustCalendarDate(e,$t,xt="constrain",At=!1){let{year:kt,month:Bt,monthExtra:jt,day:Lt,monthCode:Ut,eraYear:Nt}=e;if(At){if(kt=Nt,jt&&jt!=="bis")throw new RangeError(`Unexpected leap month suffix: ${jt}`);const qt=buildMonthCode(Bt,jt!==void 0),Kt=`${Bt}${jt||""}`,zt=this.getMonthList(kt,$t)[Kt];if(zt===void 0)throw new RangeError(`Unmatched month ${Kt} in Chinese year ${kt}`);return Bt=zt.monthIndex,{year:kt,month:Bt,day:Lt,era:void 0,eraYear:Nt,monthCode:qt}}if(this.validateCalendarDate(e),kt===void 0&&(kt=Nt),Nt===void 0&&(Nt=kt),Bt===void 0){const qt=this.getMonthList(kt,$t);let Kt=Ut.replace("L","bis").slice(1);Kt[0]==="0"&&(Kt=Kt.slice(1));let zt=qt[Kt];if(Bt=zt&&zt.monthIndex,Bt===void 0&&Ut.endsWith("L")&&Ut!="M13L"&&xt==="constrain"){let Vt=Ut.slice(1,-1);Vt[0]==="0"&&(Vt=Vt.slice(1)),zt=qt[Vt],zt&&(Bt=zt.monthIndex,Ut=buildMonthCode(Vt))}if(Bt===void 0)throw new RangeError(`Unmatched month ${Ut} in Chinese year ${kt}`)}else if(Ut===void 0){const qt=this.getMonthList(kt,$t),Kt=wt(qt),zt=Kt.length;xt==="reject"?(RejectToRange(Bt,1,zt),RejectToRange(Lt,1,this.maximumMonthLength())):(Bt=ConstrainToRange(Bt,1,zt),Lt=ConstrainToRange(Lt,1,this.maximumMonthLength()));const Vt=Kt.find(([,Ht])=>Ht.monthIndex===Bt);if(Vt===void 0)throw new RangeError(`Invalid month ${Bt} in Chinese year ${kt}`);Ut=buildMonthCode(Vt[0].replace("bis",""),Vt[0].indexOf("bis")!==-1)}else{const qt=this.getMonthList(kt,$t);let Kt=Ut.replace("L","bis").slice(1);Kt[0]==="0"&&(Kt=Kt.slice(1));const zt=qt[Kt];if(!zt)throw new RangeError(`Unmatched monthCode ${Ut} in Chinese year ${kt}`);if(Bt!==zt.monthIndex)throw new RangeError(`monthCode ${Ut} doesn't correspond to month ${Bt} in Chinese year ${kt}`)}return{...e,year:kt,eraYear:Nt,month:Bt,monthCode:Ut,day:Lt}}}class ChineseHelper extends ChineseBaseHelper{constructor(){super(...arguments),this.id="chinese"}}class DangiHelper extends ChineseBaseHelper{constructor(){super(...arguments),this.id="dangi"}}class NonIsoCalendar{constructor(e){this.helper=e}dateFromFields(e,$t,xt){const At=new OneObjectCache,kt=PrepareTemporalFields(e,this.fields(["day","month","monthCode","year"]),[]),Bt=ToTemporalOverflow($t),{year:jt,month:Lt,day:Ut}=this.helper.calendarToIsoDate(kt,Bt,At),Nt=CreateTemporalDate(jt,Lt,Ut,xt);return At.setObject(Nt),Nt}yearMonthFromFields(e,$t,xt){const At=new OneObjectCache,kt=PrepareTemporalFields(e,this.fields(["month","monthCode","year"]),[]),Bt=ToTemporalOverflow($t),{year:jt,month:Lt,day:Ut}=this.helper.calendarToIsoDate({...kt,day:1},Bt,At),Nt=CreateTemporalYearMonth(jt,Lt,xt,Ut);return At.setObject(Nt),Nt}monthDayFromFields(e,$t,xt){const At=new OneObjectCache,kt=PrepareTemporalFields(e,this.fields(["day","month","monthCode","year"]),[]),Bt=ToTemporalOverflow($t),{year:jt,month:Lt,day:Ut}=this.helper.monthDayFromFields(kt,Bt,At),Nt=CreateTemporalMonthDay(Lt,Ut,xt,jt);return At.setObject(Nt),Nt}fields(e){let $t=e;return Tt.call($t,"year")&&($t=[...$t,"era","eraYear"]),$t}fieldKeysToIgnore(e){const $t=new Dt;for(let xt=0;xt<e.length;xt++){const At=e[xt];switch(Call(vt,$t,[At]),At){case"era":Call(vt,$t,["eraYear"]),Call(vt,$t,["year"]);break;case"eraYear":Call(vt,$t,["era"]),Call(vt,$t,["year"]);break;case"year":Call(vt,$t,["era"]),Call(vt,$t,["eraYear"]);break;case"month":Call(vt,$t,["monthCode"]),this.helper.erasBeginMidYear&&(Call(vt,$t,["era"]),Call(vt,$t,["eraYear"]));break;case"monthCode":Call(vt,$t,["month"]),this.helper.erasBeginMidYear&&(Call(vt,$t,["era"]),Call(vt,$t,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(Call(vt,$t,["era"]),Call(vt,$t,["eraYear"]))}}return[...Call(Ct,$t,[])]}dateAdd(e,$t,xt,At,kt,Bt,jt){const Lt=OneObjectCache.getCacheForObject(e),Ut=this.helper.temporalToCalendarDate(e,Lt),Nt=this.helper.addCalendar(Ut,{years:$t,months:xt,weeks:At,days:kt},Bt,Lt),qt=this.helper.calendarToIsoDate(Nt,"constrain",Lt),{year:Kt,month:zt,day:Vt}=qt,Ht=CreateTemporalDate(Kt,zt,Vt,jt);return new OneObjectCache(Lt).setObject(Ht),Ht}dateUntil(e,$t,xt){const At=OneObjectCache.getCacheForObject(e),kt=OneObjectCache.getCacheForObject($t),Bt=this.helper.temporalToCalendarDate(e,At),jt=this.helper.temporalToCalendarDate($t,kt);return this.helper.untilCalendar(Bt,jt,xt,At)}year(e){const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).year}month(e){const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).month}day(e){const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).day}era(e){if(!this.helper.hasEra)return;const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).era}eraYear(e){if(!this.helper.hasEra)return;const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).eraYear}monthCode(e){const $t=OneObjectCache.getCacheForObject(e);return this.helper.temporalToCalendarDate(e,$t).monthCode}dayOfWeek(e){return Ot.iso8601.dayOfWeek(e)}dayOfYear(e){const $t=OneObjectCache.getCacheForObject(e),xt=this.helper.isoToCalendarDate(e,$t),At=this.helper.startOfCalendarYear(xt);return this.helper.calendarDaysUntil(At,xt,$t)+1}weekOfYear(e){return Ot.iso8601.weekOfYear(e)}yearOfWeek(e){return Ot.iso8601.yearOfWeek(e)}daysInWeek(e){return Ot.iso8601.daysInWeek(e)}daysInMonth(e){const $t=OneObjectCache.getCacheForObject(e),xt=this.helper.temporalToCalendarDate(e,$t),At=this.helper.maximumMonthLength(xt);if(At===this.helper.minimumMonthLength(xt))return At;const kt=this.helper.startOfCalendarMonth(xt),Bt=this.helper.addMonthsCalendar(kt,1,"constrain",$t);return this.helper.calendarDaysUntil(kt,Bt,$t)}daysInYear(e){let $t=e;HasSlot($t,i$1)||($t=ToTemporalDate($t));const xt=OneObjectCache.getCacheForObject($t),At=this.helper.temporalToCalendarDate($t,xt),kt=this.helper.startOfCalendarYear(At),Bt=this.helper.addCalendar(kt,{years:1},"constrain",xt);return this.helper.calendarDaysUntil(kt,Bt,xt)}monthsInYear(e){const $t=OneObjectCache.getCacheForObject(e),xt=this.helper.temporalToCalendarDate(e,$t);return this.helper.monthsInYear(xt,$t)}inLeapYear(e){let $t=e;HasSlot($t,i$1)||($t=ToTemporalDate($t));const xt=OneObjectCache.getCacheForObject($t),At=this.helper.temporalToCalendarDate($t,xt);return this.helper.inLeapYear(At,xt)}}for(const _t of[HebrewHelper,PersianHelper,EthiopicHelper,EthioaaHelper,CopticHelper,ChineseHelper,DangiHelper,RocHelper,IndianHelper,BuddhistHelper,GregoryHelper,JapaneseHelper,IslamicHelper,IslamicUmalquraHelper,IslamicTblaHelper,IslamicCivilHelper,IslamicRgsaHelper,IslamicCcHelper]){const e=new _t;Ot[e.id]=new NonIsoCalendar(e)}class PlainDate{constructor(e,$t,xt,At="iso8601"){CreateTemporalDateSlots(this,ToIntegerWithTruncation(e),ToIntegerWithTruncation($t),ToIntegerWithTruncation(xt),ToTemporalCalendarSlotValue(At))}get calendarId(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return ToTemporalCalendarIdentifier(GetSlot(this,p))}get era(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarEra(GetSlot(this,p),this)}get eraYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarEraYear(GetSlot(this,p),this)}get year(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarYear(GetSlot(this,p),this)}get month(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarMonth(GetSlot(this,p),this)}get monthCode(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarMonthCode(GetSlot(this,p),this)}get day(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDay(GetSlot(this,p),this)}get dayOfWeek(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDayOfWeek(GetSlot(this,p),this)}get dayOfYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDayOfYear(GetSlot(this,p),this)}get weekOfYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarWeekOfYear(GetSlot(this,p),this)}get yearOfWeek(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarYearOfWeek(GetSlot(this,p),this)}get daysInWeek(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDaysInWeek(GetSlot(this,p),this)}get daysInMonth(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDaysInMonth(GetSlot(this,p),this)}get daysInYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarDaysInYear(GetSlot(this,p),this)}get monthsInYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarMonthsInYear(GetSlot(this,p),this)}get inLeapYear(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return CalendarInLeapYear(GetSlot(this,p),this)}with(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");RejectTemporalLikeObject(e);const xt=GetOptionsObject($t),At=GetSlot(this,p),kt=CalendarFields(At,["day","month","monthCode","year"]);let Bt=PrepareTemporalFields(this,kt,[]);return Bt=CalendarMergeFields(At,Bt,PrepareTemporalFields(e,kt,"partial")),Bt=PrepareTemporalFields(Bt,kt,[]),CalendarDateFromFields(At,Bt,xt)}withCalendar(e){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const $t=ToTemporalCalendarSlotValue(e);return new PlainDate(GetSlot(this,i$1),GetSlot(this,s),GetSlot(this,l),$t)}add(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const xt=ToTemporalDuration(e),At=GetOptionsObject($t);return CalendarDateAdd(GetSlot(this,p),this,xt,At)}subtract(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const xt=CreateNegatedTemporalDuration(ToTemporalDuration(e)),At=GetOptionsObject($t);return CalendarDateAdd(GetSlot(this,p),this,xt,At)}until(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainDate("until",this,e,$t)}since(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainDate("since",this,e,$t)}equals(e){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e);for(const xt of[i$1,s,l])if(GetSlot(this,xt)!==GetSlot($t,xt))return!1;return CalendarEquals(GetSlot(this,p),GetSlot($t,p))}toString(e){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return TemporalDateToString(this,ToCalendarNameOption(GetOptionsObject(e)))}toJSON(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return TemporalDateToString(this)}toLocaleString(e,$t){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const $t=GetSlot(this,i$1),xt=GetSlot(this,s),At=GetSlot(this,l),kt=GetSlot(this,p);if(e===void 0)return CreateTemporalDateTime($t,xt,At,0,0,0,0,0,0,kt);const Bt=ToTemporalTime(e);return CreateTemporalDateTime($t,xt,At,GetSlot(Bt,d),GetSlot(Bt,m),GetSlot(Bt,c),GetSlot(Bt,h),GetSlot(Bt,u),GetSlot(Bt,T),kt)}toZonedDateTime(e){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");let $t,xt;if(IsObject(e))if(IsTemporalTimeZone(e))$t=e;else{const Vt=e.timeZone;Vt===void 0?$t=ToTemporalTimeZoneSlotValue(e):($t=ToTemporalTimeZoneSlotValue(Vt),xt=e.plainTime)}else $t=ToTemporalTimeZoneSlotValue(e);const At=GetSlot(this,i$1),kt=GetSlot(this,s),Bt=GetSlot(this,l),jt=GetSlot(this,p);let Lt=0,Ut=0,Nt=0,qt=0,Kt=0,zt=0;return xt!==void 0&&(xt=ToTemporalTime(xt),Lt=GetSlot(xt,d),Ut=GetSlot(xt,m),Nt=GetSlot(xt,c),qt=GetSlot(xt,h),Kt=GetSlot(xt,u),zt=GetSlot(xt,T)),CreateTemporalZonedDateTime(GetSlot(GetInstantFor($t,CreateTemporalDateTime(At,kt,Bt,Lt,Ut,Nt,qt,Kt,zt,jt),"compatible"),n),$t,jt)}toPlainYearMonth(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarYearMonthFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarMonthDayFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["day","monthCode"]),[]))}getISOFields(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return{calendar:GetSlot(this,p),isoDay:GetSlot(this,l),isoMonth:GetSlot(this,s),isoYear:GetSlot(this,i$1)}}getCalendar(){if(!IsTemporalDate(this))throw new TypeError("invalid receiver");return ToTemporalCalendarObject(GetSlot(this,p))}static from(e,$t){const xt=GetOptionsObject($t);return IsTemporalDate(e)?(ToTemporalOverflow(xt),CreateTemporalDate(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),GetSlot(e,p))):ToTemporalDate(e,xt)}static compare(e,$t){const xt=ToTemporalDate(e),At=ToTemporalDate($t);return CompareISODate(GetSlot(xt,i$1),GetSlot(xt,s),GetSlot(xt,l),GetSlot(At,i$1),GetSlot(At,s),GetSlot(At,l))}}MakeIntrinsicClass(PlainDate,"Temporal.PlainDate");class PlainDateTime{constructor(e,$t,xt,At=0,kt=0,Bt=0,jt=0,Lt=0,Ut=0,Nt="iso8601"){CreateTemporalDateTimeSlots(this,ToIntegerWithTruncation(e),ToIntegerWithTruncation($t),ToIntegerWithTruncation(xt),At===void 0?0:ToIntegerWithTruncation(At),kt===void 0?0:ToIntegerWithTruncation(kt),Bt===void 0?0:ToIntegerWithTruncation(Bt),jt===void 0?0:ToIntegerWithTruncation(jt),Lt===void 0?0:ToIntegerWithTruncation(Lt),Ut===void 0?0:ToIntegerWithTruncation(Ut),ToTemporalCalendarSlotValue(Nt))}get calendarId(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return ToTemporalCalendarIdentifier(GetSlot(this,p))}get year(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarYear(GetSlot(this,p),this)}get month(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarMonth(GetSlot(this,p),this)}get monthCode(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarMonthCode(GetSlot(this,p),this)}get day(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDay(GetSlot(this,p),this)}get hour(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,d)}get minute(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,m)}get second(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,c)}get millisecond(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,h)}get microsecond(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,u)}get nanosecond(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return GetSlot(this,T)}get era(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarEra(GetSlot(this,p),this)}get eraYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarEraYear(GetSlot(this,p),this)}get dayOfWeek(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDayOfWeek(GetSlot(this,p),this)}get dayOfYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDayOfYear(GetSlot(this,p),this)}get weekOfYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarWeekOfYear(GetSlot(this,p),this)}get yearOfWeek(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarYearOfWeek(GetSlot(this,p),this)}get daysInWeek(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInWeek(GetSlot(this,p),this)}get daysInYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInYear(GetSlot(this,p),this)}get daysInMonth(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInMonth(GetSlot(this,p),this)}get monthsInYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarMonthsInYear(GetSlot(this,p),this)}get inLeapYear(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return CalendarInLeapYear(GetSlot(this,p),this)}with(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");RejectTemporalLikeObject(e);const xt=GetOptionsObject($t),At=GetSlot(this,p),kt=CalendarFields(At,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);let Bt=PrepareTemporalFields(this,kt,[]);Bt=CalendarMergeFields(At,Bt,PrepareTemporalFields(e,kt,"partial")),Bt=PrepareTemporalFields(Bt,kt,[]);const{year:jt,month:Lt,day:Ut,hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}=InterpretTemporalDateTimeFields(At,Bt,xt);return CreateTemporalDateTime(jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,At)}withPlainTime(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const $t=GetSlot(this,i$1),xt=GetSlot(this,s),At=GetSlot(this,l),kt=GetSlot(this,p);if(e===void 0)return CreateTemporalDateTime($t,xt,At,0,0,0,0,0,0,kt);const Bt=ToTemporalTime(e);return CreateTemporalDateTime($t,xt,At,GetSlot(Bt,d),GetSlot(Bt,m),GetSlot(Bt,c),GetSlot(Bt,h),GetSlot(Bt,u),GetSlot(Bt,T),kt)}withPlainDate(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e),xt=GetSlot($t,i$1),At=GetSlot($t,s),kt=GetSlot($t,l);let Bt=GetSlot($t,p);const jt=GetSlot(this,d),Lt=GetSlot(this,m),Ut=GetSlot(this,c),Nt=GetSlot(this,h),qt=GetSlot(this,u),Kt=GetSlot(this,T);return Bt=ConsolidateCalendars(GetSlot(this,p),Bt),CreateTemporalDateTime(xt,At,kt,jt,Lt,Ut,Nt,qt,Kt,Bt)}withCalendar(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalCalendarSlotValue(e);return new PlainDateTime(GetSlot(this,i$1),GetSlot(this,s),GetSlot(this,l),GetSlot(this,d),GetSlot(this,m),GetSlot(this,c),GetSlot(this,h),GetSlot(this,u),GetSlot(this,T),$t)}add(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainDateTime("add",this,e,$t)}subtract(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainDateTime("subtract",this,e,$t)}until(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainDateTime("until",this,e,$t)}since(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainDateTime("since",this,e,$t)}round(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const $t=typeof e=="string"?CreateOnePropObject("smallestUnit",e):GetOptionsObject(e),xt=ToTemporalRoundingIncrement($t),At=ToTemporalRoundingMode($t,"halfExpand"),kt=GetTemporalUnit($t,"smallestUnit","time",He,["day"]),Bt={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[kt];ValidateTemporalRoundingIncrement(xt,Bt,Bt===1);let jt=GetSlot(this,i$1),Lt=GetSlot(this,s),Ut=GetSlot(this,l),Nt=GetSlot(this,d),qt=GetSlot(this,m),Kt=GetSlot(this,c),zt=GetSlot(this,h),Vt=GetSlot(this,u),Ht=GetSlot(this,T);return{year:jt,month:Lt,day:Ut,hour:Nt,minute:qt,second:Kt,millisecond:zt,microsecond:Vt,nanosecond:Ht}=RoundISODateTime(jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,xt,kt,At),CreateTemporalDateTime(jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,GetSlot(this,p))}equals(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalDateTime(e);for(const xt of[i$1,s,l,d,m,c,h,u,T])if(GetSlot(this,xt)!==GetSlot($t,xt))return!1;return CalendarEquals(GetSlot(this,p),GetSlot($t,p))}toString(e){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const $t=GetOptionsObject(e),xt=ToCalendarNameOption($t),At=ToFractionalSecondDigits($t),kt=ToTemporalRoundingMode($t,"trunc"),Bt=GetTemporalUnit($t,"smallestUnit","time",void 0);if(Bt==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:jt,unit:Lt,increment:Ut}=ToSecondsStringPrecisionRecord(Bt,At);return TemporalDateTimeToString(this,jt,xt,{unit:Lt,increment:Ut,roundingMode:kt})}toJSON(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return TemporalDateTimeToString(this,"auto")}toLocaleString(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,$t){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const xt=ToTemporalTimeZoneSlotValue(e);return CreateTemporalZonedDateTime(GetSlot(GetInstantFor(xt,this,ToTemporalDisambiguation(GetOptionsObject($t))),n),xt,GetSlot(this,p))}toPlainDate(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return TemporalDateTimeToDate(this)}toPlainYearMonth(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarYearMonthFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarMonthDayFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["day","monthCode"]),[]))}toPlainTime(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return TemporalDateTimeToTime(this)}getISOFields(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return{calendar:GetSlot(this,p),isoDay:GetSlot(this,l),isoHour:GetSlot(this,d),isoMicrosecond:GetSlot(this,u),isoMillisecond:GetSlot(this,h),isoMinute:GetSlot(this,m),isoMonth:GetSlot(this,s),isoNanosecond:GetSlot(this,T),isoSecond:GetSlot(this,c),isoYear:GetSlot(this,i$1)}}getCalendar(){if(!IsTemporalDateTime(this))throw new TypeError("invalid receiver");return ToTemporalCalendarObject(GetSlot(this,p))}static from(e,$t){const xt=GetOptionsObject($t);return IsTemporalDateTime(e)?(ToTemporalOverflow(xt),CreateTemporalDateTime(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T),GetSlot(e,p))):ToTemporalDateTime(e,xt)}static compare(e,$t){const xt=ToTemporalDateTime(e),At=ToTemporalDateTime($t);for(const kt of[i$1,s,l,d,m,c,h,u,T]){const Bt=GetSlot(xt,kt),jt=GetSlot(At,kt);if(Bt!==jt)return ComparisonResult(Bt-jt)}return 0}}MakeIntrinsicClass(PlainDateTime,"Temporal.PlainDateTime");class Duration{constructor(e=0,$t=0,xt=0,At=0,kt=0,Bt=0,jt=0,Lt=0,Ut=0,Nt=0){const qt=e===void 0?0:ToIntegerIfIntegral(e),Kt=$t===void 0?0:ToIntegerIfIntegral($t),zt=xt===void 0?0:ToIntegerIfIntegral(xt),Vt=At===void 0?0:ToIntegerIfIntegral(At),Ht=kt===void 0?0:ToIntegerIfIntegral(kt),Jt=Bt===void 0?0:ToIntegerIfIntegral(Bt),rr=jt===void 0?0:ToIntegerIfIntegral(jt),Qt=Lt===void 0?0:ToIntegerIfIntegral(Lt),Wt=Ut===void 0?0:ToIntegerIfIntegral(Ut),nr=Nt===void 0?0:ToIntegerIfIntegral(Nt);RejectDuration(qt,Kt,zt,Vt,Ht,Jt,rr,Qt,Wt,nr),N(this),SetSlot(this,w,qt),SetSlot(this,D,Kt),SetSlot(this,G,zt),SetSlot(this,v,Vt),SetSlot(this,C,Ht),SetSlot(this,O,Jt),SetSlot(this,b,rr),SetSlot(this,E$1,Qt),SetSlot(this,M,Wt),SetSlot(this,R,nr)}get years(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,w)}get months(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,D)}get weeks(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,G)}get days(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,v)}get hours(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,C)}get minutes(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,O)}get seconds(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,b)}get milliseconds(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,E$1)}get microseconds(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,M)}get nanoseconds(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return GetSlot(this,R)}get sign(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return DurationSign(GetSlot(this,w),GetSlot(this,D),GetSlot(this,G),GetSlot(this,v),GetSlot(this,C),GetSlot(this,O),GetSlot(this,b),GetSlot(this,E$1),GetSlot(this,M),GetSlot(this,R))}get blank(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return DurationSign(GetSlot(this,w),GetSlot(this,D),GetSlot(this,G),GetSlot(this,v),GetSlot(this,C),GetSlot(this,O),GetSlot(this,b),GetSlot(this,E$1),GetSlot(this,M),GetSlot(this,R))===0}with(e){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");const $t=PrepareTemporalFields(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:xt=GetSlot(this,w),months:At=GetSlot(this,D),weeks:kt=GetSlot(this,G),days:Bt=GetSlot(this,v),hours:jt=GetSlot(this,C),minutes:Lt=GetSlot(this,O),seconds:Ut=GetSlot(this,b),milliseconds:Nt=GetSlot(this,E$1),microseconds:qt=GetSlot(this,M),nanoseconds:Kt=GetSlot(this,R)}=$t;return new Duration(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt)}negated(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return CreateNegatedTemporalDuration(this)}abs(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return new Duration(Math.abs(GetSlot(this,w)),Math.abs(GetSlot(this,D)),Math.abs(GetSlot(this,G)),Math.abs(GetSlot(this,v)),Math.abs(GetSlot(this,C)),Math.abs(GetSlot(this,O)),Math.abs(GetSlot(this,b)),Math.abs(GetSlot(this,E$1)),Math.abs(GetSlot(this,M)),Math.abs(GetSlot(this,R)))}add(e,$t){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromDuration("add",this,e,$t)}subtract(e,$t){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromDuration("subtract",this,e,$t)}round(e){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let $t=GetSlot(this,w),xt=GetSlot(this,D),At=GetSlot(this,G),kt=GetSlot(this,v),Bt=GetSlot(this,C),jt=GetSlot(this,O),Lt=GetSlot(this,b),Ut=GetSlot(this,E$1),Nt=GetSlot(this,M),qt=GetSlot(this,R),Kt=DefaultTemporalLargestUnit($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt);const zt=typeof e=="string"?CreateOnePropObject("smallestUnit",e):GetOptionsObject(e);let Vt=GetTemporalUnit(zt,"largestUnit","datetime",void 0,["auto"]),Ht=ToRelativeTemporalObject(zt);const Jt=ToTemporalRoundingIncrement(zt),rr=ToTemporalRoundingMode(zt,"halfExpand");let Qt=GetTemporalUnit(zt,"smallestUnit","datetime",void 0),Wt=!0;Qt||(Wt=!1,Qt="nanosecond"),Kt=LargerOfTwoTemporalUnits(Kt,Qt);let nr=!0;if(Vt||(nr=!1,Vt=Kt),Vt==="auto"&&(Vt=Kt),!Wt&&!nr)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(LargerOfTwoTemporalUnits(Vt,Qt)!==Vt)throw new RangeError(`largestUnit ${Vt} cannot be smaller than smallestUnit ${Qt}`);const yr={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[Qt];return yr!==void 0&&ValidateTemporalRoundingIncrement(Jt,yr,!1),{years:$t,months:xt,weeks:At,days:kt}=UnbalanceDurationRelative($t,xt,At,kt,Vt,Ht),{years:$t,months:xt,weeks:At,days:kt,hours:Bt,minutes:jt,seconds:Lt,milliseconds:Ut,microseconds:Nt,nanoseconds:qt}=RoundDuration($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Jt,Qt,rr,Ht),{years:$t,months:xt,weeks:At,days:kt,hours:Bt,minutes:jt,seconds:Lt,milliseconds:Ut,microseconds:Nt,nanoseconds:qt}=AdjustRoundedDurationDays($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Jt,Qt,rr,Ht),{days:kt,hours:Bt,minutes:jt,seconds:Lt,milliseconds:Ut,microseconds:Nt,nanoseconds:qt}=BalanceDuration(kt,Bt,jt,Lt,Ut,Nt,qt,Vt,Ht),{years:$t,months:xt,weeks:At,days:kt}=function(Ir,xr,Or,Nr,kr,lr){const ir=GetIntrinsic("%Temporal.Duration%"),Xt=DurationSign(Ir,xr,Or,Nr,0,0,0,0,0,0);if(Xt===0)return{years:Ir,months:xr,weeks:Or,days:Nr};const er=JSBI.BigInt(Xt);let pr,ur,gr=JSBI.BigInt(Ir),ar=JSBI.BigInt(xr),tr=JSBI.BigInt(Or),dr=JSBI.BigInt(Nr);lr&&(ur=ToTemporalDate(lr),pr=GetSlot(ur,p));const fr=new ir(Xt),br=new ir(0,Xt),Sr=new ir(0,0,Xt);switch(kr){case"year":{if(!pr)throw new RangeError("a starting point is required for years balancing");const Dr=typeof pr!="string"?GetMethod(pr,"dateAdd"):void 0;let Er,wr,Tr;for({relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,fr,Dr);JSBI.greaterThanOrEqual(abs(dr),JSBI.BigInt(ae(wr)));)dr=JSBI.subtract(dr,JSBI.BigInt(wr)),gr=JSBI.add(gr,er),ur=Er,{relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,fr,Dr);for({relativeTo:Er,days:Tr}=MoveRelativeDate(pr,ur,br,Dr);JSBI.greaterThanOrEqual(abs(dr),JSBI.BigInt(ae(Tr)));)dr=JSBI.subtract(dr,JSBI.BigInt(Tr)),ar=JSBI.add(ar,er),ur=Er,{relativeTo:Er,days:Tr}=MoveRelativeDate(pr,ur,br,Dr);Er=CalendarDateAdd(pr,ur,fr,void 0,Dr);const Mr=typeof pr!="string"?GetMethod(pr,"dateUntil"):void 0,Lr=Te(null);Lr.largestUnit="month";let Cr=CalendarDateUntil(pr,ur,Er,Lr,Mr),Br=GetSlot(Cr,D);for(;JSBI.greaterThanOrEqual(abs(ar),JSBI.BigInt(ae(Br)));){ar=JSBI.subtract(ar,JSBI.BigInt(Br)),gr=JSBI.add(gr,er),ur=Er,Er=CalendarDateAdd(pr,ur,fr,void 0,Dr);const $r=Te(null);$r.largestUnit="month",Cr=CalendarDateUntil(pr,ur,Er,$r,Mr),Br=GetSlot(Cr,D)}break}case"month":{if(!pr)throw new RangeError("a starting point is required for months balancing");const Dr=typeof pr!="string"?GetMethod(pr,"dateAdd"):void 0;let Er,wr;for({relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,br,Dr);JSBI.greaterThanOrEqual(abs(dr),JSBI.BigInt(ae(wr)));)dr=JSBI.subtract(dr,JSBI.BigInt(wr)),ar=JSBI.add(ar,er),ur=Er,{relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,br,Dr);break}case"week":{if(!pr)throw new RangeError("a starting point is required for weeks balancing");const Dr=typeof pr!="string"?GetMethod(pr,"dateAdd"):void 0;let Er,wr;for({relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,Sr,Dr);JSBI.greaterThanOrEqual(abs(dr),JSBI.BigInt(ae(wr)));)dr=JSBI.subtract(dr,JSBI.BigInt(wr)),tr=JSBI.add(tr,er),ur=Er,{relativeTo:Er,days:wr}=MoveRelativeDate(pr,ur,Sr,Dr);break}}return{years:JSBI.toNumber(gr),months:JSBI.toNumber(ar),weeks:JSBI.toNumber(tr),days:JSBI.toNumber(dr)}}($t,xt,At,kt,Vt,Ht),new Duration($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt)}total(e){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");let $t=GetSlot(this,w),xt=GetSlot(this,D),At=GetSlot(this,G),kt=GetSlot(this,v),Bt=GetSlot(this,C),jt=GetSlot(this,O),Lt=GetSlot(this,b),Ut=GetSlot(this,E$1),Nt=GetSlot(this,M),qt=GetSlot(this,R);if(e===void 0)throw new TypeError("options argument is required");const Kt=typeof e=="string"?CreateOnePropObject("unit",e):GetOptionsObject(e),zt=ToRelativeTemporalObject(Kt),Vt=GetTemporalUnit(Kt,"unit","datetime",He);let Ht;({years:$t,months:xt,weeks:At,days:kt}=UnbalanceDurationRelative($t,xt,At,kt,Vt,zt)),IsTemporalZonedDateTime(zt)&&(Ht=MoveRelativeZonedDateTime(zt,$t,xt,At,0));let Jt=BalancePossiblyInfiniteDuration(kt,Bt,jt,Lt,Ut,Nt,qt,Vt,Ht);if(Jt==="positive overflow")return 1/0;if(Jt==="negative overflow")return-1/0;({days:kt,hours:Bt,minutes:jt,seconds:Lt,milliseconds:Ut,microseconds:Nt,nanoseconds:qt}=Jt);const{total:rr}=RoundDuration($t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,1,Vt,"trunc",zt);return rr}toString(e){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");const $t=GetOptionsObject(e),xt=ToFractionalSecondDigits($t),At=ToTemporalRoundingMode($t,"trunc"),kt=GetTemporalUnit($t,"smallestUnit","time",void 0);if(kt==="hour"||kt==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:Bt,unit:jt,increment:Lt}=ToSecondsStringPrecisionRecord(kt,xt);return TemporalDurationToString(this,Bt,{unit:jt,increment:Lt,roundingMode:At})}toJSON(){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return TemporalDurationToString(this)}toLocaleString(e,$t){if(!IsTemporalDuration(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&Intl.DurationFormat!==void 0?new Intl.DurationFormat(e,$t).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),TemporalDurationToString(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return IsTemporalDuration(e)?new Duration(GetSlot(e,w),GetSlot(e,D),GetSlot(e,G),GetSlot(e,v),GetSlot(e,C),GetSlot(e,O),GetSlot(e,b),GetSlot(e,E$1),GetSlot(e,M),GetSlot(e,R)):ToTemporalDuration(e)}static compare(e,$t,xt){const At=ToTemporalDuration(e),kt=ToTemporalDuration($t),Bt=ToRelativeTemporalObject(GetOptionsObject(xt)),jt=GetSlot(At,w),Lt=GetSlot(At,D),Ut=GetSlot(At,G);let Nt=GetSlot(At,v);const qt=GetSlot(At,C),Kt=GetSlot(At,O),zt=GetSlot(At,b),Vt=GetSlot(At,E$1),Ht=GetSlot(At,M);let Jt=GetSlot(At,R);const rr=GetSlot(kt,w),Qt=GetSlot(kt,D),Wt=GetSlot(kt,G);let nr=GetSlot(kt,v);const yr=GetSlot(kt,C),vr=GetSlot(kt,O),Ir=GetSlot(kt,b),xr=GetSlot(kt,E$1),Or=GetSlot(kt,M);let Nr=GetSlot(kt,R);const kr=CalculateOffsetShift(Bt,jt,Lt,Ut,Nt),lr=CalculateOffsetShift(Bt,rr,Qt,Wt,nr);jt===0&&rr===0&&Lt===0&&Qt===0&&Ut===0&&Wt===0||({days:Nt}=UnbalanceDurationRelative(jt,Lt,Ut,Nt,"day",Bt),{days:nr}=UnbalanceDurationRelative(rr,Qt,Wt,nr,"day",Bt));const ir=TotalDurationNanoseconds(Nt,qt,Kt,zt,Vt,Ht,Jt,kr),Xt=TotalDurationNanoseconds(nr,yr,vr,Ir,xr,Or,Nr,lr);return ComparisonResult(JSBI.toNumber(JSBI.subtract(ir,Xt)))}}MakeIntrinsicClass(Duration,"Temporal.Duration");const bt=Object.create;class PlainMonthDay{constructor(e,$t,xt="iso8601",At=1972){CreateTemporalMonthDaySlots(this,ToIntegerWithTruncation(e),ToIntegerWithTruncation($t),ToTemporalCalendarSlotValue(xt),ToIntegerWithTruncation(At))}get monthCode(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return CalendarMonthCode(GetSlot(this,p),this)}get day(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return CalendarDay(GetSlot(this,p),this)}get calendarId(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return ToTemporalCalendarIdentifier(GetSlot(this,p))}with(e,$t){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");RejectTemporalLikeObject(e);const xt=GetOptionsObject($t),At=GetSlot(this,p),kt=CalendarFields(At,["day","month","monthCode","year"]);let Bt=PrepareTemporalFields(this,kt,[]);return Bt=CalendarMergeFields(At,Bt,PrepareTemporalFields(e,kt,"partial")),Bt=PrepareTemporalFields(Bt,kt,[]),CalendarMonthDayFromFields(At,Bt,xt)}equals(e){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");const $t=ToTemporalMonthDay(e);for(const xt of[s,l,i$1])if(GetSlot(this,xt)!==GetSlot($t,xt))return!1;return CalendarEquals(GetSlot(this,p),GetSlot($t,p))}toString(e){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return TemporalMonthDayToString(this,ToCalendarNameOption(GetOptionsObject(e)))}toJSON(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return TemporalMonthDayToString(this)}toLocaleString(e,$t){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("argument should be an object");const $t=GetSlot(this,p),xt=CalendarFields($t,["day","monthCode"]),At=PrepareTemporalFields(this,xt,[]),kt=CalendarFields($t,["year"]);let Bt=CalendarMergeFields($t,At,PrepareTemporalFields(e,kt,[]));Bt=PrepareTemporalFields(Bt,[...new Set([...xt,...kt])],[]);const jt=bt(null);return jt.overflow="reject",CalendarDateFromFields($t,Bt,jt)}getISOFields(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return{calendar:GetSlot(this,p),isoDay:GetSlot(this,l),isoMonth:GetSlot(this,s),isoYear:GetSlot(this,i$1)}}getCalendar(){if(!IsTemporalMonthDay(this))throw new TypeError("invalid receiver");return ToTemporalCalendarObject(GetSlot(this,p))}static from(e,$t){const xt=GetOptionsObject($t);return IsTemporalMonthDay(e)?(ToTemporalOverflow(xt),CreateTemporalMonthDay(GetSlot(e,s),GetSlot(e,l),GetSlot(e,p),GetSlot(e,i$1))):ToTemporalMonthDay(e,xt)}}MakeIntrinsicClass(PlainMonthDay,"Temporal.PlainMonthDay");const instant=()=>new(GetIntrinsic("%Temporal.Instant%"))(Ve()),plainDateTime=(_t,e=DefaultTimeZone())=>{const $t=ToTemporalTimeZoneSlotValue(e),xt=ToTemporalCalendarSlotValue(_t);return GetPlainDateTimeFor($t,instant(),xt)},plainDateTimeISO=(_t=DefaultTimeZone())=>GetPlainDateTimeFor(ToTemporalTimeZoneSlotValue(_t),instant(),"iso8601"),zonedDateTime=(_t,e=DefaultTimeZone())=>{const $t=ToTemporalTimeZoneSlotValue(e),xt=ToTemporalCalendarSlotValue(_t);return CreateTemporalZonedDateTime(Ve(),$t,xt)},Et={instant,plainDateTime,plainDateTimeISO,plainDate:(_t,e=DefaultTimeZone())=>TemporalDateTimeToDate(plainDateTime(_t,e)),plainDateISO:(_t=DefaultTimeZone())=>TemporalDateTimeToDate(plainDateTimeISO(_t)),plainTimeISO:(_t=DefaultTimeZone())=>TemporalDateTimeToTime(plainDateTimeISO(_t)),timeZoneId:()=>DefaultTimeZone(),zonedDateTime,zonedDateTimeISO:(_t=DefaultTimeZone())=>zonedDateTime("iso8601",_t),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Et,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const Mt=Object.assign;function TemporalTimeToString(_t,e,$t){let xt=GetSlot(_t,d),At=GetSlot(_t,m),kt=GetSlot(_t,c),Bt=GetSlot(_t,h),jt=GetSlot(_t,u),Lt=GetSlot(_t,T);if($t){const{unit:Ut,increment:Nt,roundingMode:qt}=$t;({hour:xt,minute:At,second:kt,millisecond:Bt,microsecond:jt,nanosecond:Lt}=RoundTime(xt,At,kt,Bt,jt,Lt,Nt,Ut,qt))}return`${ISODateTimePartString(xt)}:${ISODateTimePartString(At)}${FormatSecondsStringPart(kt,Bt,jt,Lt,e)}`}class PlainTime{constructor(e=0,$t=0,xt=0,At=0,kt=0,Bt=0){const jt=e===void 0?0:ToIntegerWithTruncation(e),Lt=$t===void 0?0:ToIntegerWithTruncation($t),Ut=xt===void 0?0:ToIntegerWithTruncation(xt),Nt=At===void 0?0:ToIntegerWithTruncation(At),qt=kt===void 0?0:ToIntegerWithTruncation(kt),Kt=Bt===void 0?0:ToIntegerWithTruncation(Bt);RejectTime(jt,Lt,Ut,Nt,qt,Kt),N(this),SetSlot(this,d,jt),SetSlot(this,m,Lt),SetSlot(this,c,Ut),SetSlot(this,h,Nt),SetSlot(this,u,qt),SetSlot(this,T,Kt)}get hour(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,d)}get minute(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,m)}get second(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,c)}get millisecond(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,h)}get microsecond(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,u)}get nanosecond(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return GetSlot(this,T)}with(e,$t){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");RejectTemporalLikeObject(e);const xt=ToTemporalOverflow(GetOptionsObject($t)),At=ToTemporalTimeRecord(e,"partial"),kt=ToTemporalTimeRecord(this);let{hour:Bt,minute:jt,second:Lt,millisecond:Ut,microsecond:Nt,nanosecond:qt}=Mt(kt,At);return{hour:Bt,minute:jt,second:Lt,millisecond:Ut,microsecond:Nt,nanosecond:qt}=RegulateTime(Bt,jt,Lt,Ut,Nt,qt,xt),new PlainTime(Bt,jt,Lt,Ut,Nt,qt)}add(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainTime("add",this,e)}subtract(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainTime("subtract",this,e)}until(e,$t){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainTime("until",this,e,$t)}since(e,$t){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainTime("since",this,e,$t)}round(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const $t=typeof e=="string"?CreateOnePropObject("smallestUnit",e):GetOptionsObject(e),xt=ToTemporalRoundingIncrement($t),At=ToTemporalRoundingMode($t,"halfExpand"),kt=GetTemporalUnit($t,"smallestUnit","time",He);ValidateTemporalRoundingIncrement(xt,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[kt],!1);let Bt=GetSlot(this,d),jt=GetSlot(this,m),Lt=GetSlot(this,c),Ut=GetSlot(this,h),Nt=GetSlot(this,u),qt=GetSlot(this,T);return{hour:Bt,minute:jt,second:Lt,millisecond:Ut,microsecond:Nt,nanosecond:qt}=RoundTime(Bt,jt,Lt,Ut,Nt,qt,xt,kt,At),new PlainTime(Bt,jt,Lt,Ut,Nt,qt)}equals(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalTime(e);for(const xt of[d,m,c,h,u,T])if(GetSlot(this,xt)!==GetSlot($t,xt))return!1;return!0}toString(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");const $t=GetOptionsObject(e),xt=ToFractionalSecondDigits($t),At=ToTemporalRoundingMode($t,"trunc"),kt=GetTemporalUnit($t,"smallestUnit","time",void 0);if(kt==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:Bt,unit:jt,increment:Lt}=ToSecondsStringPrecisionRecord(kt,xt);return TemporalTimeToString(this,Bt,{unit:jt,increment:Lt,roundingMode:At})}toJSON(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return TemporalTimeToString(this,"auto")}toLocaleString(e,$t){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e),xt=GetSlot($t,i$1),At=GetSlot($t,s),kt=GetSlot($t,l),Bt=GetSlot($t,p);return CreateTemporalDateTime(xt,At,kt,GetSlot(this,d),GetSlot(this,m),GetSlot(this,c),GetSlot(this,h),GetSlot(this,u),GetSlot(this,T),Bt)}toZonedDateTime(e){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");const $t=e.plainDate;if($t===void 0)throw new TypeError("missing date property");const xt=ToTemporalDate($t),At=e.timeZone;if(At===void 0)throw new TypeError("missing timeZone property");const kt=ToTemporalTimeZoneSlotValue(At),Bt=GetSlot(xt,i$1),jt=GetSlot(xt,s),Lt=GetSlot(xt,l),Ut=GetSlot(xt,p),Nt=GetSlot(this,d),qt=GetSlot(this,m),Kt=GetSlot(this,c),zt=GetSlot(this,h),Vt=GetSlot(this,u),Ht=GetSlot(this,T);return CreateTemporalZonedDateTime(GetSlot(GetInstantFor(kt,new(GetIntrinsic("%Temporal.PlainDateTime%"))(Bt,jt,Lt,Nt,qt,Kt,zt,Vt,Ht,Ut),"compatible"),n),kt,Ut)}getISOFields(){if(!IsTemporalTime(this))throw new TypeError("invalid receiver");return{isoHour:GetSlot(this,d),isoMicrosecond:GetSlot(this,u),isoMillisecond:GetSlot(this,h),isoMinute:GetSlot(this,m),isoNanosecond:GetSlot(this,T),isoSecond:GetSlot(this,c)}}static from(e,$t){const xt=ToTemporalOverflow(GetOptionsObject($t));return IsTemporalTime(e)?new PlainTime(GetSlot(e,d),GetSlot(e,m),GetSlot(e,c),GetSlot(e,h),GetSlot(e,u),GetSlot(e,T)):ToTemporalTime(e,xt)}static compare(e,$t){const xt=ToTemporalTime(e),At=ToTemporalTime($t);for(const kt of[d,m,c,h,u,T]){const Bt=GetSlot(xt,kt),jt=GetSlot(At,kt);if(Bt!==jt)return ComparisonResult(Bt-jt)}return 0}}MakeIntrinsicClass(PlainTime,"Temporal.PlainTime");class TimeZone{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const $t=GetCanonicalTimeZoneIdentifier(e);N(this),SetSlot(this,a,$t)}get id(){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetSlot(this,a)}getOffsetNanosecondsFor(e){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");const $t=ToTemporalInstant(e),xt=GetSlot(this,a);return IsTimeZoneOffsetString(xt)?ParseTimeZoneOffsetString(xt):GetNamedTimeZoneOffsetNanoseconds(xt,GetSlot($t,n))}getOffsetStringFor(e){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetOffsetStringFor(this,ToTemporalInstant(e))}getPlainDateTimeFor(e,$t="iso8601"){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetPlainDateTimeFor(this,ToTemporalInstant(e),ToTemporalCalendarSlotValue($t))}getInstantFor(e,$t){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetInstantFor(this,ToTemporalDateTime(e),ToTemporalDisambiguation(GetOptionsObject($t)))}getPossibleInstantsFor(e){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");const $t=ToTemporalDateTime(e),xt=GetIntrinsic("%Temporal.Instant%"),At=GetSlot(this,a);if(IsTimeZoneOffsetString(At)){const Bt=GetUTCEpochNanoseconds(GetSlot($t,i$1),GetSlot($t,s),GetSlot($t,l),GetSlot($t,d),GetSlot($t,m),GetSlot($t,c),GetSlot($t,h),GetSlot($t,u),GetSlot($t,T));if(Bt===null)throw new RangeError("DateTime outside of supported range");const jt=ParseTimeZoneOffsetString(At);return[new xt(JSBI.subtract(Bt,JSBI.BigInt(jt)))]}return function(jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt){const rr=GetUTCEpochNanoseconds(Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt);if(rr===null)throw new RangeError("DateTime outside of supported range");let Qt=JSBI.subtract(rr,Ee);JSBI.lessThan(Qt,Me)&&(Qt=rr);let Wt=JSBI.add(rr,Ee);JSBI.greaterThan(Wt,Re)&&(Wt=rr);const nr=GetNamedTimeZoneOffsetNanoseconds(jt,Qt),yr=GetNamedTimeZoneOffsetNanoseconds(jt,Wt);return(nr===yr?[nr]:[nr,yr]).map(vr=>{const Ir=JSBI.subtract(rr,JSBI.BigInt(vr)),xr=GetNamedTimeZoneDateTimeParts(jt,Ir);if(Lt===xr.year&&Ut===xr.month&&Nt===xr.day&&qt===xr.hour&&Kt===xr.minute&&zt===xr.second&&Vt===xr.millisecond&&Ht===xr.microsecond&&Jt===xr.nanosecond)return Ir}).filter(vr=>vr!==void 0)}(At,GetSlot($t,i$1),GetSlot($t,s),GetSlot($t,l),GetSlot($t,d),GetSlot($t,m),GetSlot($t,c),GetSlot($t,h),GetSlot($t,u),GetSlot($t,T)).map(Bt=>new xt(Bt))}getNextTransition(e){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");const $t=ToTemporalInstant(e),xt=GetSlot(this,a);if(IsTimeZoneOffsetString(xt)||xt==="UTC")return null;let At=GetSlot($t,n);const kt=GetIntrinsic("%Temporal.Instant%");return At=GetNamedTimeZoneNextTransition(xt,At),At===null?null:new kt(At)}getPreviousTransition(e){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");const $t=ToTemporalInstant(e),xt=GetSlot(this,a);if(IsTimeZoneOffsetString(xt)||xt==="UTC")return null;let At=GetSlot($t,n);const kt=GetIntrinsic("%Temporal.Instant%");return At=GetNamedTimeZonePreviousTransition(xt,At),At===null?null:new kt(At)}toString(){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetSlot(this,a)}toJSON(){if(!IsTemporalTimeZone(this))throw new TypeError("invalid receiver");return GetSlot(this,a)}static from(e){return ToTemporalTimeZoneObject(ToTemporalTimeZoneSlotValue(e))}}MakeIntrinsicClass(TimeZone,"Temporal.TimeZone"),DefineIntrinsic("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",TimeZone.prototype.getOffsetNanosecondsFor),DefineIntrinsic("Temporal.TimeZone.prototype.getPossibleInstantsFor",TimeZone.prototype.getPossibleInstantsFor);const Rt=Object.create;class PlainYearMonth{constructor(e,$t,xt="iso8601",At=1){CreateTemporalYearMonthSlots(this,ToIntegerWithTruncation(e),ToIntegerWithTruncation($t),ToTemporalCalendarSlotValue(xt),ToIntegerWithTruncation(At))}get year(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarYear(GetSlot(this,p),this)}get month(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarMonth(GetSlot(this,p),this)}get monthCode(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarMonthCode(GetSlot(this,p),this)}get calendarId(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return ToTemporalCalendarIdentifier(GetSlot(this,p))}get era(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarEra(GetSlot(this,p),this)}get eraYear(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarEraYear(GetSlot(this,p),this)}get daysInMonth(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarDaysInMonth(GetSlot(this,p),this)}get daysInYear(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarDaysInYear(GetSlot(this,p),this)}get monthsInYear(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarMonthsInYear(GetSlot(this,p),this)}get inLeapYear(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return CalendarInLeapYear(GetSlot(this,p),this)}with(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid argument");RejectTemporalLikeObject(e);const xt=GetOptionsObject($t),At=GetSlot(this,p),kt=CalendarFields(At,["month","monthCode","year"]);let Bt=PrepareTemporalFields(this,kt,[]);return Bt=CalendarMergeFields(At,Bt,PrepareTemporalFields(e,kt,"partial")),Bt=PrepareTemporalFields(Bt,kt,[]),CalendarYearMonthFromFields(At,Bt,xt)}add(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainYearMonth("add",this,e,$t)}subtract(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromPlainYearMonth("subtract",this,e,$t)}until(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainYearMonth("until",this,e,$t)}since(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return DifferenceTemporalPlainYearMonth("since",this,e,$t)}equals(e){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");const $t=ToTemporalYearMonth(e);for(const xt of[i$1,s,l])if(GetSlot(this,xt)!==GetSlot($t,xt))return!1;return CalendarEquals(GetSlot(this,p),GetSlot($t,p))}toString(e){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return TemporalYearMonthToString(this,ToCalendarNameOption(GetOptionsObject(e)))}toJSON(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return TemporalYearMonthToString(this)}toLocaleString(e,$t){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return new ht(e,$t).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("argument should be an object");const $t=GetSlot(this,p),xt=CalendarFields($t,["monthCode","year"]),At=PrepareTemporalFields(this,xt,[]),kt=CalendarFields($t,["day"]);let Bt=CalendarMergeFields($t,At,PrepareTemporalFields(e,kt,[]));Bt=PrepareTemporalFields(Bt,[...new Set([...xt,...kt])],[]);const jt=Rt(null);return jt.overflow="reject",CalendarDateFromFields($t,Bt,jt)}getISOFields(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return{calendar:GetSlot(this,p),isoDay:GetSlot(this,l),isoMonth:GetSlot(this,s),isoYear:GetSlot(this,i$1)}}getCalendar(){if(!IsTemporalYearMonth(this))throw new TypeError("invalid receiver");return ToTemporalCalendarObject(GetSlot(this,p))}static from(e,$t){const xt=GetOptionsObject($t);return IsTemporalYearMonth(e)?(ToTemporalOverflow(xt),CreateTemporalYearMonth(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,p),GetSlot(e,l))):ToTemporalYearMonth(e,xt)}static compare(e,$t){const xt=ToTemporalYearMonth(e),At=ToTemporalYearMonth($t);return CompareISODate(GetSlot(xt,i$1),GetSlot(xt,s),GetSlot(xt,l),GetSlot(At,i$1),GetSlot(At,s),GetSlot(At,l))}}MakeIntrinsicClass(PlainYearMonth,"Temporal.PlainYearMonth");const Ft=ht.prototype.resolvedOptions,Yt=Object.create;class ZonedDateTime{constructor(e,$t,xt="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");CreateTemporalZonedDateTimeSlots(this,ToBigInt(e),ToTemporalTimeZoneSlotValue($t),ToTemporalCalendarSlotValue(xt))}get calendarId(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToTemporalCalendarIdentifier(GetSlot(this,p))}get timeZoneId(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToTemporalTimeZoneIdentifier(GetSlot(this,g))}get year(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarYear(GetSlot(this,p),dateTime(this))}get month(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarMonth(GetSlot(this,p),dateTime(this))}get monthCode(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarMonthCode(GetSlot(this,p),dateTime(this))}get day(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDay(GetSlot(this,p),dateTime(this))}get hour(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),d)}get minute(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),m)}get second(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),c)}get millisecond(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),h)}get microsecond(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),u)}get nanosecond(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetSlot(dateTime(this),T)}get era(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarEra(GetSlot(this,p),dateTime(this))}get eraYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarEraYear(GetSlot(this,p),dateTime(this))}get epochSeconds(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,n);return JSBI.toNumber(BigIntFloorDiv(e,ve))}get epochMilliseconds(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,n);return JSBI.toNumber(BigIntFloorDiv(e,Ge))}get epochMicroseconds(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToBigIntExternal(BigIntFloorDiv(GetSlot(this,n),De))}get epochNanoseconds(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToBigIntExternal(GetSlot(this,n))}get dayOfWeek(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDayOfWeek(GetSlot(this,p),dateTime(this))}get dayOfYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDayOfYear(GetSlot(this,p),dateTime(this))}get weekOfYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarWeekOfYear(GetSlot(this,p),dateTime(this))}get yearOfWeek(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarYearOfWeek(GetSlot(this,p),dateTime(this))}get hoursInDay(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=dateTime(this),$t=GetIntrinsic("%Temporal.PlainDateTime%"),xt=GetSlot(e,i$1),At=GetSlot(e,s),kt=GetSlot(e,l),Bt=new $t(xt,At,kt,0,0,0,0,0,0),jt=AddISODate(xt,At,kt,0,0,0,1,"reject"),Lt=new $t(jt.year,jt.month,jt.day,0,0,0,0,0,0),Ut=GetSlot(this,g),Nt=GetSlot(GetInstantFor(Ut,Bt,"compatible"),n),qt=GetSlot(GetInstantFor(Ut,Lt,"compatible"),n);return BigIntDivideToNumber(JSBI.subtract(qt,Nt),Oe)}get daysInWeek(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInWeek(GetSlot(this,p),dateTime(this))}get daysInMonth(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInMonth(GetSlot(this,p),dateTime(this))}get daysInYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarDaysInYear(GetSlot(this,p),dateTime(this))}get monthsInYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarMonthsInYear(GetSlot(this,p),dateTime(this))}get inLeapYear(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return CalendarInLeapYear(GetSlot(this,p),dateTime(this))}get offset(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetOffsetStringFor(GetSlot(this,g),GetSlot(this,S))}get offsetNanoseconds(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return GetOffsetNanosecondsFor(GetSlot(this,g),GetSlot(this,S))}with(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");if(!IsObject(e))throw new TypeError("invalid zoned-date-time-like");RejectTemporalLikeObject(e);const xt=GetOptionsObject($t),At=GetSlot(this,p);let kt=CalendarFields(At,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);kt.push("offset");let Bt=PrepareTemporalFields(this,kt,["offset"]);Bt=CalendarMergeFields(At,Bt,PrepareTemporalFields(e,kt,"partial")),Bt=PrepareTemporalFields(Bt,kt,["offset"]);const jt=ToTemporalDisambiguation(xt),Lt=ToTemporalOffset(xt,"prefer");let{year:Ut,month:Nt,day:qt,hour:Kt,minute:zt,second:Vt,millisecond:Ht,microsecond:Jt,nanosecond:rr}=InterpretTemporalDateTimeFields(At,Bt,xt);const Qt=ParseTimeZoneOffsetString(Bt.offset),Wt=GetSlot(this,g);return CreateTemporalZonedDateTime(InterpretISODateTimeOffset(Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,"option",Qt,Wt,jt,Lt,!1),Wt,At)}withPlainDate(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalDate(e),xt=GetSlot($t,i$1),At=GetSlot($t,s),kt=GetSlot($t,l);let Bt=GetSlot($t,p);const jt=dateTime(this),Lt=GetSlot(jt,d),Ut=GetSlot(jt,m),Nt=GetSlot(jt,c),qt=GetSlot(jt,h),Kt=GetSlot(jt,u),zt=GetSlot(jt,T);Bt=ConsolidateCalendars(GetSlot(this,p),Bt);const Vt=GetSlot(this,g);return CreateTemporalZonedDateTime(GetSlot(GetInstantFor(Vt,new(GetIntrinsic("%Temporal.PlainDateTime%"))(xt,At,kt,Lt,Ut,Nt,qt,Kt,zt,Bt),"compatible"),n),Vt,Bt)}withPlainTime(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=GetIntrinsic("%Temporal.PlainTime%"),xt=e===void 0?new $t:ToTemporalTime(e),At=dateTime(this),kt=GetSlot(At,i$1),Bt=GetSlot(At,s),jt=GetSlot(At,l),Lt=GetSlot(this,p),Ut=GetSlot(xt,d),Nt=GetSlot(xt,m),qt=GetSlot(xt,c),Kt=GetSlot(xt,h),zt=GetSlot(xt,u),Vt=GetSlot(xt,T),Ht=GetSlot(this,g);return CreateTemporalZonedDateTime(GetSlot(GetInstantFor(Ht,new(GetIntrinsic("%Temporal.PlainDateTime%"))(kt,Bt,jt,Ut,Nt,qt,Kt,zt,Vt,Lt),"compatible"),n),Ht,Lt)}withTimeZone(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalTimeZoneSlotValue(e);return CreateTemporalZonedDateTime(GetSlot(this,n),$t,GetSlot(this,p))}withCalendar(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalCalendarSlotValue(e);return CreateTemporalZonedDateTime(GetSlot(this,n),GetSlot(this,g),$t)}add(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromZonedDateTime("add",this,e,$t)}subtract(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return AddDurationToOrSubtractDurationFromZonedDateTime("subtract",this,e,$t)}until(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalZonedDateTime("until",this,e,$t)}since(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return DifferenceTemporalZonedDateTime("since",this,e,$t)}round(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const $t=typeof e=="string"?CreateOnePropObject("smallestUnit",e):GetOptionsObject(e),xt=ToTemporalRoundingIncrement($t),At=ToTemporalRoundingMode($t,"halfExpand"),kt=GetTemporalUnit($t,"smallestUnit","time",He,["day"]),Bt={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[kt];ValidateTemporalRoundingIncrement(xt,Bt,Bt===1);const jt=dateTime(this);let Lt=GetSlot(jt,i$1),Ut=GetSlot(jt,s),Nt=GetSlot(jt,l),qt=GetSlot(jt,d),Kt=GetSlot(jt,m),zt=GetSlot(jt,c),Vt=GetSlot(jt,h),Ht=GetSlot(jt,u),Jt=GetSlot(jt,T);const rr=GetIntrinsic("%Temporal.PlainDateTime%"),Qt=GetSlot(this,g),Wt=GetSlot(this,p),nr=GetInstantFor(Qt,new rr(GetSlot(jt,i$1),GetSlot(jt,s),GetSlot(jt,l),0,0,0,0,0,0),"compatible"),yr=AddZonedDateTime(nr,Qt,Wt,0,0,0,1,0,0,0,0,0,0),vr=JSBI.subtract(yr,JSBI.BigInt(GetSlot(nr,n)));if(JSBI.lessThanOrEqual(vr,Ie))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return{year:Lt,month:Ut,day:Nt,hour:qt,minute:Kt,second:zt,millisecond:Vt,microsecond:Ht,nanosecond:Jt}=RoundISODateTime(Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,xt,kt,At,JSBI.toNumber(vr)),CreateTemporalZonedDateTime(InterpretISODateTimeOffset(Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,"option",GetOffsetNanosecondsFor(Qt,GetSlot(this,S)),Qt,"compatible","prefer",!1),Qt,GetSlot(this,p))}equals(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=ToTemporalZonedDateTime(e),xt=GetSlot(this,n),At=GetSlot($t,n);return!!JSBI.equal(JSBI.BigInt(xt),JSBI.BigInt(At))&&!!TimeZoneEquals(GetSlot(this,g),GetSlot($t,g))&&CalendarEquals(GetSlot(this,p),GetSlot($t,p))}toString(e){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const $t=GetOptionsObject(e),xt=ToCalendarNameOption($t),At=ToFractionalSecondDigits($t),kt=function(zt){return GetOption(zt,"offset",["auto","never"],"auto")}($t),Bt=ToTemporalRoundingMode($t,"trunc"),jt=GetTemporalUnit($t,"smallestUnit","time",void 0);if(jt==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const Lt=function(zt){return GetOption(zt,"timeZoneName",["auto","never","critical"],"auto")}($t),{precision:Ut,unit:Nt,increment:qt}=ToSecondsStringPrecisionRecord(jt,At);return TemporalZonedDateTimeToString(this,Ut,xt,Lt,kt,{unit:Nt,increment:qt,roundingMode:Bt})}toLocaleString(e,$t){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const xt=GetOptionsObject($t),At=Yt(null);if(CopyDataProperties(At,xt,["timeZone"]),xt.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");At.year===void 0&&At.month===void 0&&At.day===void 0&&At.weekday===void 0&&At.dateStyle===void 0&&At.hour===void 0&&At.minute===void 0&&At.second===void 0&&At.timeStyle===void 0&&At.dayPeriod===void 0&&At.timeZoneName===void 0&&(At.timeZoneName="short");let kt=ToTemporalTimeZoneIdentifier(GetSlot(this,g));if(IsTimeZoneOffsetString(kt))throw new RangeError("toLocaleString does not support offset string time zones");kt=GetCanonicalTimeZoneIdentifier(kt),At.timeZone=kt;const Bt=new ht(e,At),jt=Call(Ft,Bt,[]).calendar,Lt=ToTemporalCalendarIdentifier(GetSlot(this,p));if(Lt!=="iso8601"&&jt!=="iso8601"&&jt!==Lt)throw new RangeError(`cannot format ZonedDateTime with calendar ${Lt} in locale with calendar ${jt}`);return Bt.format(GetSlot(this,S))}toJSON(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return TemporalZonedDateTimeToString(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=dateTime(this),$t=GetIntrinsic("%Temporal.PlainDateTime%"),xt=GetSlot(this,p),At=new $t(GetSlot(e,i$1),GetSlot(e,s),GetSlot(e,l),0,0,0,0,0,0,xt),kt=GetSlot(this,g);return CreateTemporalZonedDateTime(GetSlot(GetInstantFor(kt,At,"compatible"),n),kt,xt)}toInstant(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return new(GetIntrinsic("%Temporal.Instant%"))(GetSlot(this,n))}toPlainDate(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return TemporalDateTimeToDate(dateTime(this))}toPlainTime(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return TemporalDateTimeToTime(dateTime(this))}toPlainDateTime(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return dateTime(this)}toPlainYearMonth(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarYearMonthFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["monthCode","year"]),[]))}toPlainMonthDay(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=GetSlot(this,p);return CalendarMonthDayFromFields(e,PrepareTemporalFields(this,CalendarFields(e,["day","monthCode"]),[]))}getISOFields(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");const e=dateTime(this),$t=GetSlot(this,g);return{calendar:GetSlot(this,p),isoDay:GetSlot(e,l),isoHour:GetSlot(e,d),isoMicrosecond:GetSlot(e,u),isoMillisecond:GetSlot(e,h),isoMinute:GetSlot(e,m),isoMonth:GetSlot(e,s),isoNanosecond:GetSlot(e,T),isoSecond:GetSlot(e,c),isoYear:GetSlot(e,i$1),offset:GetOffsetStringFor($t,GetSlot(this,S)),timeZone:$t}}getCalendar(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToTemporalCalendarObject(GetSlot(this,p))}getTimeZone(){if(!IsTemporalZonedDateTime(this))throw new TypeError("invalid receiver");return ToTemporalTimeZoneObject(GetSlot(this,g))}static from(e,$t){const xt=GetOptionsObject($t);return IsTemporalZonedDateTime(e)?(ToTemporalDisambiguation(xt),ToTemporalOffset(xt,"reject"),ToTemporalOverflow(xt),CreateTemporalZonedDateTime(GetSlot(e,n),GetSlot(e,g),GetSlot(e,p))):ToTemporalZonedDateTime(e,xt)}static compare(e,$t){const xt=ToTemporalZonedDateTime(e),At=ToTemporalZonedDateTime($t),kt=GetSlot(xt,n),Bt=GetSlot(At,n);return JSBI.lessThan(JSBI.BigInt(kt),JSBI.BigInt(Bt))?-1:JSBI.greaterThan(JSBI.BigInt(kt),JSBI.BigInt(Bt))?1:0}}function dateTime(_t){return GetPlainDateTimeFor(GetSlot(_t,g),GetSlot(_t,S),GetSlot(_t,p))}MakeIntrinsicClass(ZonedDateTime,"Temporal.ZonedDateTime");var Pt=Object.freeze({__proto__:null,Calendar,Duration,Instant,Now:Et,PlainDate,PlainDateTime,PlainMonthDay,PlainTime,PlainYearMonth,TimeZone,ZonedDateTime});const Zt=[Instant,Calendar,PlainDate,PlainDateTime,Duration,PlainMonthDay,PlainTime,TimeZone,PlainYearMonth,ZonedDateTime];for(const _t of Zt){const e=Object.getOwnPropertyDescriptor(_t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(_t,"prototype",e))}var __awaiter$B=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Time{static sleep(e){return __awaiter$B(this,void 0,void 0,function*(){return new Promise($t=>setTimeout($t,e))})}static minimalSleep(){return __awaiter$B(this,void 0,void 0,function*(){yield Time.sleep(2)})}static getCurrentTimestamp(){return Pt.Now.instant().toString({smallestUnit:"microseconds"})}static createTimestamp(e){const{year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut}=e;return Pt.ZonedDateTime.from({timeZone:"UTC",year:$t,month:xt,day:At,hour:kt,minute:Bt,second:jt,millisecond:Lt,microsecond:Ut}).toInstant().toString({smallestUnit:"microseconds"})}static createOffsetTimestamp(e,$t){const xt=$t?Pt.Instant.from($t):Pt.Now.instant(),At=Pt.Duration.from(e);return xt.add(At).toString({smallestUnit:"microseconds"})}static validateTimestamp(e){try{Pt.Instant.from(e)}catch{throw new DwnError(DwnErrorCode.TimestampInvalid,`Invalid timestamp: ${e}`)}}}var __awaiter$A=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$6=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class RecordsWrite{get message(){if(this._message.authorization===void 0)throw new DwnError(DwnErrorCode.RecordsWriteMissingSigner,"This RecordsWrite is not yet signed, JSON message cannot be generated from an incomplete state.");return this._message}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get owner(){return this._owner}get ownerSignaturePayload(){return this._ownerSignaturePayload}get isSignedByAuthorDelegate(){return Message.isSignedByAuthorDelegate(this._message)}get isSignedByOwnerDelegate(){return Message.isSignedByOwnerDelegate(this._message)}get signer(){return Message.getSigner(this._message)}get ownerSignatureSigner(){var e;return((e=this._message.authorization)===null||e===void 0?void 0:e.ownerSignature)===void 0?void 0:Jws.getSignerDid(this._message.authorization.ownerSignature.signatures[0])}constructor(e,$t){this.parentContextId=$t,this._message=e,e.authorization!==void 0&&(this._author=Message.getAuthor(e),this._signaturePayload=Jws.decodePlainObjectPayload(e.authorization.signature),e.authorization.ownerSignature!==void 0&&(e.authorization.ownerDelegatedGrant!==void 0?this._owner=Message.getSigner(e.authorization.ownerDelegatedGrant):this._owner=Jws.getSignerDid(e.authorization.ownerSignature.signatures[0]),this._ownerSignaturePayload=Jws.decodePlainObjectPayload(e.authorization.ownerSignature))),this.attesters=RecordsWrite.getAttesters(e)}static parse(e){return __awaiter$A(this,void 0,void 0,function*(){const $t=JSON.parse(JSON.stringify(e));yield Message.validateSignatureStructure($t.authorization.signature,$t.descriptor,"RecordsWriteSignaturePayload"),$t.authorization.ownerSignature!==void 0&&(yield Message.validateSignatureStructure($t.authorization.ownerSignature,$t.descriptor)),yield RecordsWrite.validateAttestationIntegrity($t);const xt=new RecordsWrite($t);return yield xt.validateIntegrity(),xt})}static create(e){var $t,xt,At,kt;return __awaiter$A(this,void 0,void 0,function*(){if(e.protocol===void 0&&e.protocolPath!==void 0||e.protocol!==void 0&&e.protocolPath===void 0)throw new DwnError(DwnErrorCode.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive,"`protocol` and `protocolPath` must both be defined or undefined at the same time");if(e.data===void 0&&e.dataCid===void 0||e.data!==void 0&&e.dataCid!==void 0)throw new DwnError(DwnErrorCode.RecordsWriteCreateDataAndDataCidMutuallyExclusive,"one and only one parameter between `data` and `dataCid` is required");if(e.dataCid===void 0&&e.dataSize!==void 0||e.dataCid!==void 0&&e.dataSize===void 0)throw new DwnError(DwnErrorCode.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive,"`dataCid` and `dataSize` must both be defined or undefined at the same time");if(e.signer===void 0&&e.delegatedGrant!==void 0)throw new DwnError(DwnErrorCode.RecordsWriteCreateMissingSigner,"`signer` must be given when `delegatedGrant` is given");const Bt=($t=e.dataCid)!==null&&$t!==void 0?$t:yield Cid.computeDagPbCidFromBytes(e.data),jt=(xt=e.dataSize)!==null&&xt!==void 0?xt:e.data.length,Lt=Time.getCurrentTimestamp(),Ut={interface:DwnInterfaceName.Records,method:DwnMethodName.Write,protocol:e.protocol!==void 0?normalizeProtocolUrl(e.protocol):void 0,protocolPath:e.protocolPath,recipient:e.recipient,schema:e.schema!==void 0?normalizeSchemaUrl(e.schema):void 0,tags:e.tags,parentId:RecordsWrite.getRecordIdFromContextId(e.parentContextId),dataCid:Bt,dataSize:jt,dateCreated:(At=e.dateCreated)!==null&&At!==void 0?At:Lt,messageTimestamp:(kt=e.messageTimestamp)!==null&&kt!==void 0?kt:Lt,published:e.published,datePublished:e.datePublished,dataFormat:e.dataFormat};e.published===!0&&e.datePublished===void 0&&(Ut.datePublished=Lt),removeUndefinedProperties$1(Ut);const Nt=e.recordId,qt=yield Cid.computeCid(Ut),Kt=yield RecordsWrite.createAttestation(qt,e.attestationSigners),zt=yield RecordsWrite.createEncryptionProperty(Ut,e.encryptionInput),Vt={recordId:Nt,descriptor:Ut};Kt!==void 0&&(Vt.attestation=Kt),zt!==void 0&&(Vt.encryption=zt);const Ht=new RecordsWrite(Vt,e.parentContextId);return e.signer!==void 0&&(yield Ht.sign({signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId,protocolRole:e.protocolRole})),Ht})}static getRecordIdFromContextId(e){return e==null?void 0:e.split("/").filter($t=>$t!=="").pop()}static createFrom(e){var $t,xt,At,kt;return __awaiter$A(this,void 0,void 0,function*(){const Bt=e.recordsWriteMessage,jt=yield RecordsWrite.parse(Bt),Lt=Time.getCurrentTimestamp(),Ut=($t=e.published)!==null&&$t!==void 0?$t:e.datePublished?!0:Bt.descriptor.published;let Nt;e.datePublished?Nt=e.datePublished:Ut&&(Bt.descriptor.published?Nt=Bt.descriptor.datePublished:Nt=Lt);const qt={recipient:Bt.descriptor.recipient,recordId:Bt.recordId,dateCreated:Bt.descriptor.dateCreated,protocol:Bt.descriptor.protocol,protocolPath:Bt.descriptor.protocolPath,schema:Bt.descriptor.schema,parentContextId:Records.getParentContextFromOfContextId(Bt.contextId),messageTimestamp:(xt=e.messageTimestamp)!==null&&xt!==void 0?xt:Lt,published:Ut,datePublished:Nt,tags:e.tags,data:e.data,dataCid:e.data?void 0:Bt.descriptor.dataCid,dataSize:e.data?void 0:Bt.descriptor.dataSize,dataFormat:(At=e.dataFormat)!==null&&At!==void 0?At:Bt.descriptor.dataFormat,protocolRole:(kt=e.protocolRole)!==null&&kt!==void 0?kt:jt.signaturePayload.protocolRole,delegatedGrant:e.delegatedGrant,signer:e.signer,attestationSigners:e.attestationSigners};return yield RecordsWrite.create(qt)})}toJSON(){return this.message}encryptSymmetricEncryptionKey(e){return __awaiter$A(this,void 0,void 0,function*(){this._message.encryption=yield RecordsWrite.createEncryptionProperty(this._message.descriptor,e),delete this._message.authorization,this._signaturePayload=void 0,this._author=void 0})}sign(e){var $t;return __awaiter$A(this,void 0,void 0,function*(){const{signer:xt,delegatedGrant:At,permissionGrantId:kt,protocolRole:Bt}=e;let jt,Lt;At!==void 0?(jt=yield Message.getCid(At),Lt=Jws.getSignerDid(At.authorization.signature.signatures[0])):Lt=Jws.extractDid(xt.keyId);const Ut=this._message.descriptor,Nt=yield Cid.computeCid(Ut);this._message.recordId=($t=this._message.recordId)!==null&&$t!==void 0?$t:yield RecordsWrite.getEntryId(Lt,Ut),this._message.descriptor.protocol!==void 0&&(this.parentContextId===void 0||this.parentContextId===""?this._message.contextId=this._message.recordId:this._message.contextId=this.parentContextId+"/"+this._message.recordId);const qt=yield RecordsWrite.createSignerSignature({recordId:this._message.recordId,contextId:this._message.contextId,descriptorCid:Nt,attestation:this._message.attestation,encryption:this._message.encryption,signer:xt,delegatedGrantId:jt,permissionGrantId:kt,protocolRole:Bt});this._message.authorization={signature:qt},At!==void 0&&(this._message.authorization.authorDelegatedGrant=At),this._signaturePayload=Jws.decodePlainObjectPayload(qt),this._author=Lt})}signAsOwner(e){return __awaiter$A(this,void 0,void 0,function*(){if(this._author===void 0)throw new DwnError(DwnErrorCode.RecordsWriteSignAsOwnerUnknownAuthor,"Unable to sign as owner without message signature because owner needs to sign over `recordId` which depends on author DID.");const $t=this._message.descriptor,xt=yield Message.createSignature($t,e);this._message.authorization.ownerSignature=xt,this._ownerSignaturePayload=Jws.decodePlainObjectPayload(xt),this._owner=Jws.extractDid(e.keyId)})}signAsOwnerDelegate(e,$t){return __awaiter$A(this,void 0,void 0,function*(){if(this._author===void 0)throw new DwnError(DwnErrorCode.RecordsWriteSignAsOwnerDelegateUnknownAuthor,"Unable to sign as owner delegate without message signature because owner delegate needs to sign over `recordId` which depends on author DID.");const xt=yield Message.getCid($t),At=this._message.descriptor,kt=yield Message.createSignature(At,e,{delegatedGrantId:xt});this._message.authorization.ownerSignature=kt,this._message.authorization.ownerDelegatedGrant=$t,this._ownerSignaturePayload=Jws.decodePlainObjectPayload(kt),this._owner=Jws.getSignerDid($t.authorization.signature.signatures[0])})}validateIntegrity(){return __awaiter$A(this,void 0,void 0,function*(){if(yield this.isInitialWrite()){const xt=this.message.descriptor.dateCreated,At=this.message.descriptor.messageTimestamp;if(At!==xt)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityDateCreatedMismatch,`messageTimestamp ${At} must match dateCreated ${xt} for the initial write`);if(this.message.descriptor.protocol!==void 0&&this.message.descriptor.parentId===void 0){const kt=yield this.getEntryId();if(this.message.contextId!==kt)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityContextIdMismatch,`contextId in message: ${this.message.contextId} does not match deterministic contextId: ${kt}`)}}const $t=this.signaturePayload;if(this.message.recordId!==$t.recordId)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityRecordIdUnauthorized,`recordId in message ${this.message.recordId} does not match recordId in authorization: ${$t.recordId}`);if(this.message.contextId!==$t.contextId)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload,`contextId in message ${this.message.contextId} does not match contextId in authorization: ${$t.contextId}`);if(yield Records.validateDelegatedGrantReferentialIntegrity(this.message,$t,this.ownerSignaturePayload),$t.attestationCid!==void 0){const xt=yield Cid.computeCid(this.message.attestation),At=$t.attestationCid;if(At!==xt)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityAttestationMismatch,`CID ${xt} of attestation property in message does not match attestationCid in authorization: ${At}`)}if($t.encryptionCid!==void 0){const xt=yield Cid.computeCid(this.message.encryption),At=$t.encryptionCid;if(At!==xt)throw new DwnError(DwnErrorCode.RecordsWriteValidateIntegrityEncryptionCidMismatch,`CID ${xt} of encryption property in message does not match encryptionCid in authorization: ${At}`)}this.message.descriptor.protocol!==void 0&&validateProtocolUrlNormalized(this.message.descriptor.protocol),this.message.descriptor.schema!==void 0&&validateSchemaUrlNormalized(this.message.descriptor.schema),Time.validateTimestamp(this.message.descriptor.messageTimestamp),Time.validateTimestamp(this.message.descriptor.dateCreated),this.message.descriptor.datePublished&&Time.validateTimestamp(this.message.descriptor.datePublished)})}static validateAttestationIntegrity(e){return __awaiter$A(this,void 0,void 0,function*(){if(e.attestation===void 0)return;if(e.attestation.signatures.length!==1)throw new DwnError(DwnErrorCode.RecordsWriteAttestationIntegrityMoreThanOneSignature,`Currently implementation only supports 1 attester, but got ${e.attestation.signatures.length}`);const $t=Jws.decodePlainObjectPayload(e.attestation),{descriptorCid:xt}=$t,At=yield Cid.computeCid(e.descriptor);if(xt!==At)throw new DwnError(DwnErrorCode.RecordsWriteAttestationIntegrityDescriptorCidMismatch,`descriptorCid ${xt} does not match expected descriptorCid ${At}`);const kt=Object.keys($t).length;if(kt>1)throw new DwnError(DwnErrorCode.RecordsWriteAttestationIntegrityInvalidPayloadProperty,`Only 'descriptorCid' is allowed in attestation payload, but got ${kt} properties.`)})}getEntryId(){return __awaiter$A(this,void 0,void 0,function*(){return yield RecordsWrite.getEntryId(this.author,this.message.descriptor)})}static getEntryId(e,$t){return __awaiter$A(this,void 0,void 0,function*(){if(e===void 0)throw new DwnError(DwnErrorCode.RecordsWriteGetEntryIdUndefinedAuthor,"Property `author` is needed to compute entry ID.");const xt=Object.assign({},$t);return xt.author=e,yield Cid.computeCid(xt)})}isInitialWrite(){return __awaiter$A(this,void 0,void 0,function*(){return(yield this.getEntryId())===this.message.recordId})}constructIndexes(e){return __awaiter$A(this,void 0,void 0,function*(){const $t=this.message,xt=$t.descriptor,{tags:At}=xt,kt=__rest$6(xt,["tags"]);delete kt.published;let Bt=Object.assign(Object.assign({},kt),{isLatestBaseState:e,published:!!$t.descriptor.published,author:this.author,recordId:$t.recordId,entryId:yield RecordsWrite.getEntryId(this.author,this.message.descriptor)});if(At!==void 0&&e===!0){const jt=Records.buildTagIndexes(Object.assign({},At));Bt=Object.assign(Object.assign({},Bt),jt)}return this.attesters.length>0&&(Bt.attester=this.attesters[0]),$t.contextId!==void 0&&(Bt.contextId=$t.contextId),Bt})}authorizeAuthorDelegate(e){return __awaiter$A(this,void 0,void 0,function*(){const $t=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield RecordsGrantAuthorization.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:$t,messageStore:e})})}authorizeOwnerDelegate(e){return __awaiter$A(this,void 0,void 0,function*(){const $t=yield PermissionGrant$1.parse(this.message.authorization.ownerDelegatedGrant);yield RecordsGrantAuthorization.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.owner,expectedGrantee:this.ownerSignatureSigner,permissionGrant:$t,messageStore:e})})}static isInitialWrite(e){return __awaiter$A(this,void 0,void 0,function*(){if(e.descriptor.interface!==DwnInterfaceName.Records||e.descriptor.method!==DwnMethodName.Write)return!1;const $t=e,xt=Message.getAuthor($t);return(yield RecordsWrite.getEntryId(xt,$t.descriptor))===$t.recordId})}static createEncryptionProperty(e,$t){var xt,At;return __awaiter$A(this,void 0,void 0,function*(){if($t===void 0)return;const kt=[];for(const jt of $t.keyEncryptionInputs){if(jt.derivationScheme===KeyDerivationScheme.ProtocolPath&&e.protocol===void 0)throw new DwnError(DwnErrorCode.RecordsWriteMissingProtocol,"`protocols` encryption scheme cannot be applied to record without the `protocol` property.");if(jt.derivationScheme===KeyDerivationScheme.Schemas&&e.schema===void 0)throw new DwnError(DwnErrorCode.RecordsWriteMissingSchema,"`schemas` encryption scheme cannot be applied to record without the `schema` property.");const Lt=Secp256k1$1.publicJwkToBytes(jt.publicKey),Ut=yield Encryption.eciesSecp256k1Encrypt(Lt,$t.key),Nt=Encoder$4.bytesToBase64Url(Ut.ciphertext),qt=yield Secp256k1$1.publicKeyToJwk(Ut.ephemeralPublicKey),Kt=Encoder$4.bytesToBase64Url(Ut.initializationVector),zt=Encoder$4.bytesToBase64Url(Ut.messageAuthenticationCode),Vt={rootKeyId:jt.publicKeyId,algorithm:(xt=jt.algorithm)!==null&&xt!==void 0?xt:EncryptionAlgorithm.EciesSecp256k1,derivationScheme:jt.derivationScheme,ephemeralPublicKey:qt,initializationVector:Kt,messageAuthenticationCode:zt,encryptedKey:Nt};jt.derivationScheme===KeyDerivationScheme.ProtocolContext&&(Vt.derivedPublicKey=jt.publicKey),kt.push(Vt)}return{algorithm:(At=$t.algorithm)!==null&&At!==void 0?At:EncryptionAlgorithm.Aes256Ctr,initializationVector:Encoder$4.bytesToBase64Url($t.initializationVector),keyEncryption:kt}})}static createAttestation(e,$t){return __awaiter$A(this,void 0,void 0,function*(){if($t===void 0||$t.length===0)return;const xt={descriptorCid:e},At=Encoder$4.objectToBytes(xt);return(yield GeneralJwsBuilder.create(At,$t)).getJws()})}static createSignerSignature(e){return __awaiter$A(this,void 0,void 0,function*(){const{recordId:$t,contextId:xt,descriptorCid:At,attestation:kt,encryption:Bt,signer:jt,delegatedGrantId:Lt,permissionGrantId:Ut,protocolRole:Nt}=e,qt=kt?yield Cid.computeCid(kt):void 0,Kt=Bt?yield Cid.computeCid(Bt):void 0,zt={recordId:$t,descriptorCid:At,contextId:xt,attestationCid:qt,encryptionCid:Kt,delegatedGrantId:Lt,permissionGrantId:Ut,protocolRole:Nt};removeUndefinedProperties$1(zt);const Vt=Encoder$4.objectToBytes(zt);return(yield GeneralJwsBuilder.create(Vt,[jt])).getJws()})}static getInitialWrite(e){return __awaiter$A(this,void 0,void 0,function*(){for(const $t of e)if(yield RecordsWrite.isInitialWrite($t))return $t;throw new DwnError(DwnErrorCode.RecordsWriteGetInitialWriteNotFound,"Initial write is not found.")})}static verifyEqualityOfImmutableProperties(e,$t){const xt=["dataCid","dataSize","dataFormat","datePublished","published","messageTimestamp","tags"];let At=[];At.push(...Object.keys(e.descriptor)),At.push(...Object.keys($t.descriptor)),At=[...new Set(At)];for(const kt of At)if(xt.indexOf(kt)===-1){const Bt=e.descriptor[kt],jt=$t.descriptor[kt];if(jt!==Bt)throw new DwnError(DwnErrorCode.RecordsWriteImmutablePropertyChanged,`${kt} is an immutable property: cannot change '${Bt}' to '${jt}'`)}return!0}static getAttesters(e){var $t,xt;return((xt=($t=e.attestation)===null||$t===void 0?void 0:$t.signatures)!==null&&xt!==void 0?xt:[]).map(Bt=>Jws.getSignerDid(Bt))}static fetchNewestRecordsWrite(e,$t,xt){return __awaiter$A(this,void 0,void 0,function*(){const At={interface:DwnInterfaceName.Records,method:DwnMethodName.Write,recordId:xt},{messages:kt}=yield e.query($t,[At]),Bt=yield Message.getNewestMessage(kt);if(Bt!==void 0)return Bt;throw new DwnError(DwnErrorCode.RecordsWriteGetNewestWriteRecordNotFound,"record not found")})}static fetchInitialRecordsWrite(e,$t,xt){return __awaiter$A(this,void 0,void 0,function*(){const At={entryId:xt},{messages:kt}=yield e.query($t,[At]);return kt.length===0?void 0:yield RecordsWrite.parse(kt[0])})}}class AbstractMessage{get message(){return this._message}get signer(){return this._signer}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get isSignedByAuthorDelegate(){return Message.isSignedByAuthorDelegate(this._message)}constructor(e){this._message=e,e.authorization!==void 0&&(this._signer=Message.getSigner(e),e.authorization.authorDelegatedGrant!==void 0?this._author=Message.getSigner(e.authorization.authorDelegatedGrant):this._author=this._signer,this._signaturePayload=Jws.decodePlainObjectPayload(e.authorization.signature))}toJSON(){return this.message}}var __awaiter$z=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class RecordsQuery extends AbstractMessage{static parse(e){return __awaiter$z(this,void 0,void 0,function*(){if(e.descriptor.filter.published===!1&&(e.descriptor.dateSort===DateSort.PublishedAscending||e.descriptor.dateSort===DateSort.PublishedDescending))throw new DwnError(DwnErrorCode.RecordsQueryParseFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.descriptor.dateSort}`);let $t;if(e.authorization!==void 0&&($t=yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield Records.validateDelegatedGrantReferentialIntegrity(e,$t),($t==null?void 0:$t.protocolRole)!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new DwnError(DwnErrorCode.RecordsQueryFilterMissingRequiredProperties,"Role-authorized queries must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&validateProtocolUrlNormalized(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&validateSchemaUrlNormalized(e.descriptor.filter.schema),Time.validateTimestamp(e.descriptor.messageTimestamp),new RecordsQuery(e)})}static create(e){var $t;return __awaiter$z(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Records,method:DwnMethodName.Query,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp(),filter:Records.normalizeFilter(e.filter),dateSort:e.dateSort,pagination:e.pagination};if(e.filter.published===!1&&(e.dateSort===DateSort.PublishedAscending||e.dateSort===DateSort.PublishedDescending))throw new DwnError(DwnErrorCode.RecordsQueryCreateFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${e.dateSort}`);removeUndefinedProperties$1(xt);const At=e.signer;let kt;At&&(kt=yield Message.createAuthorization({descriptor:xt,signer:At,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));const Bt={descriptor:xt,authorization:kt};return Message.validateJsonSchema(Bt),new RecordsQuery(Bt)})}authorizeDelegate(e){return __awaiter$z(this,void 0,void 0,function*(){const $t=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield RecordsGrantAuthorization.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantee:this.signer,expectedGrantor:this.author,permissionGrant:$t,messageStore:e})})}}var __awaiter$y=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};let PermissionRequest$1=class bi{static parse(e){return __awaiter$y(this,void 0,void 0,function*(){return new bi(e)})}constructor(e){this.id=e.recordId,this.requester=Message.getSigner(e);const $t=e.encodedData,xt=Encoder$4.base64UrlToObject($t);this.delegated=xt.delegated,this.description=xt.description,this.scope=xt.scope,this.conditions=xt.conditions}};var __awaiter$x=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class PermissionsProtocol{static parseRequest(e){return Encoder$4.base64UrlToObject(e)}static createRequest(e){return __awaiter$x(this,void 0,void 0,function*(){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new DwnError(DwnErrorCode.PermissionsProtocolCreateRequestRecordsScopeMissingProtocol,"Permission request for Records must have a scope with a `protocol` property");const $t=PermissionsProtocol.normalizePermissionScope(e.scope),xt={description:e.description,delegated:e.delegated,scope:$t,conditions:e.conditions};let At;this.hasProtocolScope($t)&&(At={protocol:$t.protocol});const kt=Encoder$4.objectToBytes(xt),Bt=yield RecordsWrite.create({signer:e.signer,messageTimestamp:e.dateRequested,protocol:PermissionsProtocol.uri,protocolPath:PermissionsProtocol.requestPath,dataFormat:"application/json",data:kt,tags:At}),jt=Object.assign(Object.assign({},Bt.message),{encodedData:Encoder$4.bytesToBase64Url(kt)});return{recordsWrite:Bt,permissionRequestData:xt,permissionRequestBytes:kt,dataEncodedMessage:jt}})}static createGrant(e){return __awaiter$x(this,void 0,void 0,function*(){if(this.isRecordPermissionScope(e.scope)&&e.scope.protocol===void 0)throw new DwnError(DwnErrorCode.PermissionsProtocolCreateGrantRecordsScopeMissingProtocol,"Permission grants for Records must have a scope with a `protocol` property");const $t=PermissionsProtocol.normalizePermissionScope(e.scope),xt={dateExpires:e.dateExpires,requestId:e.requestId,description:e.description,delegated:e.delegated,scope:$t,conditions:e.conditions};let At;this.hasProtocolScope($t)&&(At={protocol:$t.protocol});const kt=Encoder$4.objectToBytes(xt),Bt=yield RecordsWrite.create({signer:e.signer,messageTimestamp:e.dateGranted,dateCreated:e.dateGranted,recipient:e.grantedTo,protocol:PermissionsProtocol.uri,protocolPath:PermissionsProtocol.grantPath,dataFormat:"application/json",data:kt,tags:At}),jt=Object.assign(Object.assign({},Bt.message),{encodedData:Encoder$4.bytesToBase64Url(kt)});return{recordsWrite:Bt,permissionGrantData:xt,permissionGrantBytes:kt,dataEncodedMessage:jt}})}static createRevocation(e){return __awaiter$x(this,void 0,void 0,function*(){const $t={description:e.description},xt=e.grant.id;let At;this.hasProtocolScope(e.grant.scope)&&(At={protocol:normalizeProtocolUrl(e.grant.scope.protocol)});const kt=Encoder$4.objectToBytes($t),Bt=yield RecordsWrite.create({signer:e.signer,parentContextId:xt,protocol:PermissionsProtocol.uri,protocolPath:PermissionsProtocol.revocationPath,dataFormat:"application/json",data:kt,tags:At}),jt=Object.assign(Object.assign({},Bt.message),{encodedData:Encoder$4.bytesToBase64Url(kt)});return{recordsWrite:Bt,permissionRevocationData:$t,permissionRevocationBytes:kt,dataEncodedMessage:jt}})}static validateSchema(e,$t){const xt=Encoder$4.bytesToString($t),At=JSON.parse(xt);if(e.descriptor.protocolPath===PermissionsProtocol.requestPath){const kt=At;validateJsonSchema("PermissionRequestData",kt),PermissionsProtocol.validateScopeAndTags(kt.scope,e)}else if(e.descriptor.protocolPath===PermissionsProtocol.grantPath){validateJsonSchema("PermissionGrantData",At);const kt=At;PermissionsProtocol.validateScopeAndTags(kt.scope,e),Time.validateTimestamp(kt.dateExpires)}else if(e.descriptor.protocolPath===PermissionsProtocol.revocationPath)validateJsonSchema("PermissionRevocationData",At);else throw new DwnError(DwnErrorCode.PermissionsProtocolValidateSchemaUnexpectedRecord,`Unexpected permission record: ${e.descriptor.protocolPath}`)}static fetchGrant(e,$t,xt){return __awaiter$x(this,void 0,void 0,function*(){const At={recordId:xt,isLatestBaseState:!0},{messages:kt}=yield $t.query(e,[At]),Bt=kt[0],jt=Bt==null?void 0:Bt.descriptor.interface,Lt=Bt==null?void 0:Bt.descriptor.method;if(jt!==DwnInterfaceName.Records||Lt!==DwnMethodName.Write||Bt.descriptor.protocolPath!==PermissionsProtocol.grantPath)throw new DwnError(DwnErrorCode.GrantAuthorizationGrantMissing,`Could not find permission grant with record ID ${xt}.`);const Ut=Bt;return yield PermissionGrant$1.parse(Ut)})}static getScopeFromPermissionRecord(e,$t,xt){return __awaiter$x(this,void 0,void 0,function*(){if(xt.descriptor.protocol!==PermissionsProtocol.uri)throw new DwnError(DwnErrorCode.PermissionsProtocolGetScopeInvalidProtocol,`Unexpected protocol for permission record: ${xt.descriptor.protocol}`);return xt.descriptor.protocolPath===PermissionsProtocol.revocationPath?(yield PermissionsProtocol.fetchGrant(e,$t,xt.descriptor.parentId)).scope:xt.descriptor.protocolPath===PermissionsProtocol.grantPath?(yield PermissionGrant$1.parse(xt)).scope:(yield PermissionRequest$1.parse(xt)).scope})}static normalizePermissionScope(e){const $t=Object.assign({},e);return PermissionsProtocol.hasProtocolScope($t)&&($t.protocol=normalizeProtocolUrl($t.protocol)),$t}static isRecordPermissionScope(e){return e.interface==="Records"}static hasProtocolScope(e){return"protocol"in e&&e.protocol!==void 0}static validateTags(e,$t){if(e.descriptor.tags===void 0||e.descriptor.tags.protocol===void 0)throw new DwnError(DwnErrorCode.PermissionsProtocolValidateScopeMissingProtocolTag,"Permission grants must have a `tags` property that contains a protocol tag");const xt=e.descriptor.tags.protocol;if(xt!==$t)throw new DwnError(DwnErrorCode.PermissionsProtocolValidateScopeProtocolMismatch,`Permission grants must have a scope with a protocol that matches the tagged protocol: ${xt}`)}static validateScopeAndTags(e,$t){if(this.hasProtocolScope(e)&&(validateProtocolUrlNormalized(e.protocol),this.validateTags($t,e.protocol)),!!this.isRecordPermissionScope(e)&&e.contextId!==void 0&&e.protocolPath!==void 0)throw new DwnError(DwnErrorCode.PermissionsProtocolValidateScopeContextIdProhibitedProperties,"Permission grants cannot have both `contextId` and `protocolPath` present")}}PermissionsProtocol.uri="https://tbd.website/dwn/permissions";PermissionsProtocol.requestPath="request";PermissionsProtocol.grantPath="grant";PermissionsProtocol.revocationPath="grant/revocation";PermissionsProtocol.definition={published:!0,protocol:PermissionsProtocol.uri,types:{request:{dataFormats:["application/json"]},grant:{dataFormats:["application/json"]},revocation:{dataFormats:["application/json"]}},structure:{request:{$size:{max:1e4},$actions:[{who:"anyone",can:["create"]}]},grant:{$size:{max:1e4},$actions:[{who:"recipient",of:"grant",can:["read","query"]}],revocation:{$size:{max:1e4},$actions:[{who:"anyone",can:["read"]}]}}}};class Messages{static normalizeFilters(e){const $t=[];for(const xt of e){const At=xt.protocol!==void 0?normalizeProtocolUrl(xt.protocol):void 0,kt=Object.assign(Object.assign({},xt),{protocol:At});removeUndefinedProperties$1(kt),isEmptyObject(kt)||$t.push(kt)}return $t}static convertFilters(e){const $t=[];for(const xt of e){const At=this.constructPermissionRecordsFilter(xt);At&&$t.push(At),$t.push(this.convertFilter(xt))}return $t}static constructPermissionRecordsFilter(e){const{protocol:$t,messageTimestamp:xt}=e;if($t!==void 0){const At=Object.assign({protocol:PermissionsProtocol.uri},Records.convertTagsFilter({protocol:$t}));if(xt!=null){const kt=FilterUtility.convertRangeCriterion(xt);kt&&(At.messageTimestamp=kt)}return At}}static convertFilter(e){const $t=Object.assign({},e),{messageTimestamp:xt}=e,At=xt?FilterUtility.convertRangeCriterion(xt):void 0;return At&&($t.messageTimestamp=At,delete $t.dateUpdated),$t}}var __awaiter$w=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class MessagesQuery extends AbstractMessage{static parse(e){return __awaiter$w(this,void 0,void 0,function*(){Message.validateJsonSchema(e),yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor);for(const $t of e.descriptor.filters)"protocol"in $t&&$t.protocol!==void 0&&validateProtocolUrlNormalized($t.protocol);return new MessagesQuery(e)})}static create(e){var $t;return __awaiter$w(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Messages,method:DwnMethodName.Query,filters:e.filters?Messages.normalizeFilters(e.filters):[],messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp(),cursor:e.cursor};removeUndefinedProperties$1(xt);const{permissionGrantId:At,signer:kt}=e,Bt=yield Message.createAuthorization({descriptor:xt,signer:kt,permissionGrantId:At}),jt={descriptor:xt,authorization:Bt};return Message.validateJsonSchema(jt),new MessagesQuery(jt)})}}var __awaiter$v=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class MessagesRead extends AbstractMessage{static parse(e){return __awaiter$v(this,void 0,void 0,function*(){return Message.validateJsonSchema(e),this.validateMessageCid(e.descriptor.messageCid),yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor),Time.validateTimestamp(e.descriptor.messageTimestamp),new MessagesRead(e)})}static create(e){var $t;return __awaiter$v(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Messages,method:DwnMethodName.Read,messageCid:e.messageCid,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp()},{signer:At,permissionGrantId:kt}=e,Bt=yield Message.createAuthorization({descriptor:xt,signer:At,permissionGrantId:kt}),jt={descriptor:xt,authorization:Bt};return Message.validateJsonSchema(jt),MessagesRead.validateMessageCid(e.messageCid),new MessagesRead(jt)})}static validateMessageCid(e){try{Cid.parseCid(e)}catch{throw new DwnError(DwnErrorCode.MessagesReadInvalidCid,`${e} is not a valid CID`)}}}var __awaiter$u=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class MessagesSubscribe extends AbstractMessage{static parse(e){return __awaiter$u(this,void 0,void 0,function*(){Message.validateJsonSchema(e),yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor);for(const $t of e.descriptor.filters)"protocol"in $t&&$t.protocol!==void 0&&validateProtocolUrlNormalized($t.protocol);return Time.validateTimestamp(e.descriptor.messageTimestamp),new MessagesSubscribe(e)})}static create(e){var $t,xt;return __awaiter$u(this,void 0,void 0,function*(){const At=Time.getCurrentTimestamp(),kt={interface:DwnInterfaceName.Messages,method:DwnMethodName.Subscribe,filters:($t=e.filters)!==null&&$t!==void 0?$t:[],messageTimestamp:(xt=e.messageTimestamp)!==null&&xt!==void 0?xt:At};removeUndefinedProperties$1(kt);const{permissionGrantId:Bt,signer:jt}=e,Lt=yield Message.createAuthorization({descriptor:kt,signer:jt,permissionGrantId:Bt}),Ut={descriptor:kt,authorization:Lt};return Message.validateJsonSchema(Ut),new MessagesSubscribe(Ut)})}}var _2020={exports:{}},core$3={},validate={},boolSchema={},errors$1={},codegen={},code$1={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.regexpCode=_t.getEsmExportName=_t.getProperty=_t.safeStringify=_t.stringify=_t.strConcat=_t.addCodeArg=_t.str=_t._=_t.nil=_t._Code=_t.Name=_t.IDENTIFIER=_t._CodeOrName=void 0;class e{}_t._CodeOrName=e,_t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class $t extends e{constructor(Qt){if(super(),!_t.IDENTIFIER.test(Qt))throw new Error("CodeGen: name must be a valid identifier");this.str=Qt}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}_t.Name=$t;class xt extends e{constructor(Qt){super(),this._items=typeof Qt=="string"?[Qt]:Qt}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const Qt=this._items[0];return Qt===""||Qt==='""'}get str(){var Qt;return(Qt=this._str)!==null&&Qt!==void 0?Qt:this._str=this._items.reduce((Wt,nr)=>`${Wt}${nr}`,"")}get names(){var Qt;return(Qt=this._names)!==null&&Qt!==void 0?Qt:this._names=this._items.reduce((Wt,nr)=>(nr instanceof $t&&(Wt[nr.str]=(Wt[nr.str]||0)+1),Wt),{})}}_t._Code=xt,_t.nil=new xt("");function At(rr,...Qt){const Wt=[rr[0]];let nr=0;for(;nr<Qt.length;)jt(Wt,Qt[nr]),Wt.push(rr[++nr]);return new xt(Wt)}_t._=At;const kt=new xt("+");function Bt(rr,...Qt){const Wt=[zt(rr[0])];let nr=0;for(;nr<Qt.length;)Wt.push(kt),jt(Wt,Qt[nr]),Wt.push(kt,zt(rr[++nr]));return Lt(Wt),new xt(Wt)}_t.str=Bt;function jt(rr,Qt){Qt instanceof xt?rr.push(...Qt._items):Qt instanceof $t?rr.push(Qt):rr.push(qt(Qt))}_t.addCodeArg=jt;function Lt(rr){let Qt=1;for(;Qt<rr.length-1;){if(rr[Qt]===kt){const Wt=Ut(rr[Qt-1],rr[Qt+1]);if(Wt!==void 0){rr.splice(Qt-1,3,Wt);continue}rr[Qt++]="+"}Qt++}}function Ut(rr,Qt){if(Qt==='""')return rr;if(rr==='""')return Qt;if(typeof rr=="string")return Qt instanceof $t||rr[rr.length-1]!=='"'?void 0:typeof Qt!="string"?`${rr.slice(0,-1)}${Qt}"`:Qt[0]==='"'?rr.slice(0,-1)+Qt.slice(1):void 0;if(typeof Qt=="string"&&Qt[0]==='"'&&!(rr instanceof $t))return`"${rr}${Qt.slice(1)}`}function Nt(rr,Qt){return Qt.emptyStr()?rr:rr.emptyStr()?Qt:Bt`${rr}${Qt}`}_t.strConcat=Nt;function qt(rr){return typeof rr=="number"||typeof rr=="boolean"||rr===null?rr:zt(Array.isArray(rr)?rr.join(","):rr)}function Kt(rr){return new xt(zt(rr))}_t.stringify=Kt;function zt(rr){return JSON.stringify(rr).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}_t.safeStringify=zt;function Vt(rr){return typeof rr=="string"&&_t.IDENTIFIER.test(rr)?new xt(`.${rr}`):At`[${rr}]`}_t.getProperty=Vt;function Ht(rr){if(typeof rr=="string"&&_t.IDENTIFIER.test(rr))return new xt(`${rr}`);throw new Error(`CodeGen: invalid export name: ${rr}, use explicit $id name mapping`)}_t.getEsmExportName=Ht;function Jt(rr){return new xt(rr.toString())}_t.regexpCode=Jt})(code$1);var scope$1={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.ValueScope=_t.ValueScopeName=_t.Scope=_t.varKinds=_t.UsedValueState=void 0;const e=code$1;class $t extends Error{constructor(Ut){super(`CodeGen: "code" for ${Ut} not defined`),this.value=Ut.value}}var xt;(function(Lt){Lt[Lt.Started=0]="Started",Lt[Lt.Completed=1]="Completed"})(xt=_t.UsedValueState||(_t.UsedValueState={})),_t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class At{constructor({prefixes:Ut,parent:Nt}={}){this._names={},this._prefixes=Ut,this._parent=Nt}toName(Ut){return Ut instanceof e.Name?Ut:this.name(Ut)}name(Ut){return new e.Name(this._newName(Ut))}_newName(Ut){const Nt=this._names[Ut]||this._nameGroup(Ut);return`${Ut}${Nt.index++}`}_nameGroup(Ut){var Nt,qt;if(!((qt=(Nt=this._parent)===null||Nt===void 0?void 0:Nt._prefixes)===null||qt===void 0)&&qt.has(Ut)||this._prefixes&&!this._prefixes.has(Ut))throw new Error(`CodeGen: prefix "${Ut}" is not allowed in this scope`);return this._names[Ut]={prefix:Ut,index:0}}}_t.Scope=At;class kt extends e.Name{constructor(Ut,Nt){super(Nt),this.prefix=Ut}setValue(Ut,{property:Nt,itemIndex:qt}){this.value=Ut,this.scopePath=(0,e._)`.${new e.Name(Nt)}[${qt}]`}}_t.ValueScopeName=kt;const Bt=(0,e._)`\n`;class jt extends At{constructor(Ut){super(Ut),this._values={},this._scope=Ut.scope,this.opts={...Ut,_n:Ut.lines?Bt:e.nil}}get(){return this._scope}name(Ut){return new kt(Ut,this._newName(Ut))}value(Ut,Nt){var qt;if(Nt.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const Kt=this.toName(Ut),{prefix:zt}=Kt,Vt=(qt=Nt.key)!==null&&qt!==void 0?qt:Nt.ref;let Ht=this._values[zt];if(Ht){const Qt=Ht.get(Vt);if(Qt)return Qt}else Ht=this._values[zt]=new Map;Ht.set(Vt,Kt);const Jt=this._scope[zt]||(this._scope[zt]=[]),rr=Jt.length;return Jt[rr]=Nt.ref,Kt.setValue(Nt,{property:zt,itemIndex:rr}),Kt}getValue(Ut,Nt){const qt=this._values[Ut];if(qt)return qt.get(Nt)}scopeRefs(Ut,Nt=this._values){return this._reduceValues(Nt,qt=>{if(qt.scopePath===void 0)throw new Error(`CodeGen: name "${qt}" has no value`);return(0,e._)`${Ut}${qt.scopePath}`})}scopeCode(Ut=this._values,Nt,qt){return this._reduceValues(Ut,Kt=>{if(Kt.value===void 0)throw new Error(`CodeGen: name "${Kt}" has no value`);return Kt.value.code},Nt,qt)}_reduceValues(Ut,Nt,qt={},Kt){let zt=e.nil;for(const Vt in Ut){const Ht=Ut[Vt];if(!Ht)continue;const Jt=qt[Vt]=qt[Vt]||new Map;Ht.forEach(rr=>{if(Jt.has(rr))return;Jt.set(rr,xt.Started);let Qt=Nt(rr);if(Qt){const Wt=this.opts.es5?_t.varKinds.var:_t.varKinds.const;zt=(0,e._)`${zt}${Wt} ${rr} = ${Qt};${this.opts._n}`}else if(Qt=Kt==null?void 0:Kt(rr))zt=(0,e._)`${zt}${Qt}${this.opts._n}`;else throw new $t(rr);Jt.set(rr,xt.Completed)})}return zt}}_t.ValueScope=jt})(scope$1);(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.or=_t.and=_t.not=_t.CodeGen=_t.operators=_t.varKinds=_t.ValueScopeName=_t.ValueScope=_t.Scope=_t.Name=_t.regexpCode=_t.stringify=_t.getProperty=_t.nil=_t.strConcat=_t.str=_t._=void 0;const e=code$1,$t=scope$1;var xt=code$1;Object.defineProperty(_t,"_",{enumerable:!0,get:function(){return xt._}}),Object.defineProperty(_t,"str",{enumerable:!0,get:function(){return xt.str}}),Object.defineProperty(_t,"strConcat",{enumerable:!0,get:function(){return xt.strConcat}}),Object.defineProperty(_t,"nil",{enumerable:!0,get:function(){return xt.nil}}),Object.defineProperty(_t,"getProperty",{enumerable:!0,get:function(){return xt.getProperty}}),Object.defineProperty(_t,"stringify",{enumerable:!0,get:function(){return xt.stringify}}),Object.defineProperty(_t,"regexpCode",{enumerable:!0,get:function(){return xt.regexpCode}}),Object.defineProperty(_t,"Name",{enumerable:!0,get:function(){return xt.Name}});var At=scope$1;Object.defineProperty(_t,"Scope",{enumerable:!0,get:function(){return At.Scope}}),Object.defineProperty(_t,"ValueScope",{enumerable:!0,get:function(){return At.ValueScope}}),Object.defineProperty(_t,"ValueScopeName",{enumerable:!0,get:function(){return At.ValueScopeName}}),Object.defineProperty(_t,"varKinds",{enumerable:!0,get:function(){return At.varKinds}}),_t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class kt{optimizeNodes(){return this}optimizeNames(Sr,Dr){return this}}class Bt extends kt{constructor(Sr,Dr,Er){super(),this.varKind=Sr,this.name=Dr,this.rhs=Er}render({es5:Sr,_n:Dr}){const Er=Sr?$t.varKinds.var:this.varKind,wr=this.rhs===void 0?"":` = ${this.rhs}`;return`${Er} ${this.name}${wr};`+Dr}optimizeNames(Sr,Dr){if(Sr[this.name.str])return this.rhs&&(this.rhs=Xt(this.rhs,Sr,Dr)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class jt extends kt{constructor(Sr,Dr,Er){super(),this.lhs=Sr,this.rhs=Dr,this.sideEffects=Er}render({_n:Sr}){return`${this.lhs} = ${this.rhs};`+Sr}optimizeNames(Sr,Dr){if(!(this.lhs instanceof e.Name&&!Sr[this.lhs.str]&&!this.sideEffects))return this.rhs=Xt(this.rhs,Sr,Dr),this}get names(){const Sr=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ir(Sr,this.rhs)}}class Lt extends jt{constructor(Sr,Dr,Er,wr){super(Sr,Er,wr),this.op=Dr}render({_n:Sr}){return`${this.lhs} ${this.op}= ${this.rhs};`+Sr}}class Ut extends kt{constructor(Sr){super(),this.label=Sr,this.names={}}render({_n:Sr}){return`${this.label}:`+Sr}}class Nt extends kt{constructor(Sr){super(),this.label=Sr,this.names={}}render({_n:Sr}){return`break${this.label?` ${this.label}`:""};`+Sr}}class qt extends kt{constructor(Sr){super(),this.error=Sr}render({_n:Sr}){return`throw ${this.error};`+Sr}get names(){return this.error.names}}class Kt extends kt{constructor(Sr){super(),this.code=Sr}render({_n:Sr}){return`${this.code};`+Sr}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Sr,Dr){return this.code=Xt(this.code,Sr,Dr),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class zt extends kt{constructor(Sr=[]){super(),this.nodes=Sr}render(Sr){return this.nodes.reduce((Dr,Er)=>Dr+Er.render(Sr),"")}optimizeNodes(){const{nodes:Sr}=this;let Dr=Sr.length;for(;Dr--;){const Er=Sr[Dr].optimizeNodes();Array.isArray(Er)?Sr.splice(Dr,1,...Er):Er?Sr[Dr]=Er:Sr.splice(Dr,1)}return Sr.length>0?this:void 0}optimizeNames(Sr,Dr){const{nodes:Er}=this;let wr=Er.length;for(;wr--;){const Tr=Er[wr];Tr.optimizeNames(Sr,Dr)||(er(Sr,Tr.names),Er.splice(wr,1))}return Er.length>0?this:void 0}get names(){return this.nodes.reduce((Sr,Dr)=>lr(Sr,Dr.names),{})}}class Vt extends zt{render(Sr){return"{"+Sr._n+super.render(Sr)+"}"+Sr._n}}class Ht extends zt{}class Jt extends Vt{}Jt.kind="else";class rr extends Vt{constructor(Sr,Dr){super(Dr),this.condition=Sr}render(Sr){let Dr=`if(${this.condition})`+super.render(Sr);return this.else&&(Dr+="else "+this.else.render(Sr)),Dr}optimizeNodes(){super.optimizeNodes();const Sr=this.condition;if(Sr===!0)return this.nodes;let Dr=this.else;if(Dr){const Er=Dr.optimizeNodes();Dr=this.else=Array.isArray(Er)?new Jt(Er):Er}if(Dr)return Sr===!1?Dr instanceof rr?Dr:Dr.nodes:this.nodes.length?this:new rr(pr(Sr),Dr instanceof rr?[Dr]:Dr.nodes);if(!(Sr===!1||!this.nodes.length))return this}optimizeNames(Sr,Dr){var Er;if(this.else=(Er=this.else)===null||Er===void 0?void 0:Er.optimizeNames(Sr,Dr),!!(super.optimizeNames(Sr,Dr)||this.else))return this.condition=Xt(this.condition,Sr,Dr),this}get names(){const Sr=super.names;return ir(Sr,this.condition),this.else&&lr(Sr,this.else.names),Sr}}rr.kind="if";class Qt extends Vt{}Qt.kind="for";class Wt extends Qt{constructor(Sr){super(),this.iteration=Sr}render(Sr){return`for(${this.iteration})`+super.render(Sr)}optimizeNames(Sr,Dr){if(super.optimizeNames(Sr,Dr))return this.iteration=Xt(this.iteration,Sr,Dr),this}get names(){return lr(super.names,this.iteration.names)}}class nr extends Qt{constructor(Sr,Dr,Er,wr){super(),this.varKind=Sr,this.name=Dr,this.from=Er,this.to=wr}render(Sr){const Dr=Sr.es5?$t.varKinds.var:this.varKind,{name:Er,from:wr,to:Tr}=this;return`for(${Dr} ${Er}=${wr}; ${Er}<${Tr}; ${Er}++)`+super.render(Sr)}get names(){const Sr=ir(super.names,this.from);return ir(Sr,this.to)}}class yr extends Qt{constructor(Sr,Dr,Er,wr){super(),this.loop=Sr,this.varKind=Dr,this.name=Er,this.iterable=wr}render(Sr){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Sr)}optimizeNames(Sr,Dr){if(super.optimizeNames(Sr,Dr))return this.iterable=Xt(this.iterable,Sr,Dr),this}get names(){return lr(super.names,this.iterable.names)}}class vr extends Vt{constructor(Sr,Dr,Er){super(),this.name=Sr,this.args=Dr,this.async=Er}render(Sr){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Sr)}}vr.kind="func";class Ir extends zt{render(Sr){return"return "+super.render(Sr)}}Ir.kind="return";class xr extends Vt{render(Sr){let Dr="try"+super.render(Sr);return this.catch&&(Dr+=this.catch.render(Sr)),this.finally&&(Dr+=this.finally.render(Sr)),Dr}optimizeNodes(){var Sr,Dr;return super.optimizeNodes(),(Sr=this.catch)===null||Sr===void 0||Sr.optimizeNodes(),(Dr=this.finally)===null||Dr===void 0||Dr.optimizeNodes(),this}optimizeNames(Sr,Dr){var Er,wr;return super.optimizeNames(Sr,Dr),(Er=this.catch)===null||Er===void 0||Er.optimizeNames(Sr,Dr),(wr=this.finally)===null||wr===void 0||wr.optimizeNames(Sr,Dr),this}get names(){const Sr=super.names;return this.catch&&lr(Sr,this.catch.names),this.finally&&lr(Sr,this.finally.names),Sr}}class Or extends Vt{constructor(Sr){super(),this.error=Sr}render(Sr){return`catch(${this.error})`+super.render(Sr)}}Or.kind="catch";class Nr extends Vt{render(Sr){return"finally"+super.render(Sr)}}Nr.kind="finally";class kr{constructor(Sr,Dr={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Dr,_n:Dr.lines?`
`:""},this._extScope=Sr,this._scope=new $t.Scope({parent:Sr}),this._nodes=[new Ht]}toString(){return this._root.render(this.opts)}name(Sr){return this._scope.name(Sr)}scopeName(Sr){return this._extScope.name(Sr)}scopeValue(Sr,Dr){const Er=this._extScope.value(Sr,Dr);return(this._values[Er.prefix]||(this._values[Er.prefix]=new Set)).add(Er),Er}getScopeValue(Sr,Dr){return this._extScope.getValue(Sr,Dr)}scopeRefs(Sr){return this._extScope.scopeRefs(Sr,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Sr,Dr,Er,wr){const Tr=this._scope.toName(Dr);return Er!==void 0&&wr&&(this._constants[Tr.str]=Er),this._leafNode(new Bt(Sr,Tr,Er)),Tr}const(Sr,Dr,Er){return this._def($t.varKinds.const,Sr,Dr,Er)}let(Sr,Dr,Er){return this._def($t.varKinds.let,Sr,Dr,Er)}var(Sr,Dr,Er){return this._def($t.varKinds.var,Sr,Dr,Er)}assign(Sr,Dr,Er){return this._leafNode(new jt(Sr,Dr,Er))}add(Sr,Dr){return this._leafNode(new Lt(Sr,_t.operators.ADD,Dr))}code(Sr){return typeof Sr=="function"?Sr():Sr!==e.nil&&this._leafNode(new Kt(Sr)),this}object(...Sr){const Dr=["{"];for(const[Er,wr]of Sr)Dr.length>1&&Dr.push(","),Dr.push(Er),(Er!==wr||this.opts.es5)&&(Dr.push(":"),(0,e.addCodeArg)(Dr,wr));return Dr.push("}"),new e._Code(Dr)}if(Sr,Dr,Er){if(this._blockNode(new rr(Sr)),Dr&&Er)this.code(Dr).else().code(Er).endIf();else if(Dr)this.code(Dr).endIf();else if(Er)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Sr){return this._elseNode(new rr(Sr))}else(){return this._elseNode(new Jt)}endIf(){return this._endBlockNode(rr,Jt)}_for(Sr,Dr){return this._blockNode(Sr),Dr&&this.code(Dr).endFor(),this}for(Sr,Dr){return this._for(new Wt(Sr),Dr)}forRange(Sr,Dr,Er,wr,Tr=this.opts.es5?$t.varKinds.var:$t.varKinds.let){const Mr=this._scope.toName(Sr);return this._for(new nr(Tr,Mr,Dr,Er),()=>wr(Mr))}forOf(Sr,Dr,Er,wr=$t.varKinds.const){const Tr=this._scope.toName(Sr);if(this.opts.es5){const Mr=Dr instanceof e.Name?Dr:this.var("_arr",Dr);return this.forRange("_i",0,(0,e._)`${Mr}.length`,Lr=>{this.var(Tr,(0,e._)`${Mr}[${Lr}]`),Er(Tr)})}return this._for(new yr("of",wr,Tr,Dr),()=>Er(Tr))}forIn(Sr,Dr,Er,wr=this.opts.es5?$t.varKinds.var:$t.varKinds.const){if(this.opts.ownProperties)return this.forOf(Sr,(0,e._)`Object.keys(${Dr})`,Er);const Tr=this._scope.toName(Sr);return this._for(new yr("in",wr,Tr,Dr),()=>Er(Tr))}endFor(){return this._endBlockNode(Qt)}label(Sr){return this._leafNode(new Ut(Sr))}break(Sr){return this._leafNode(new Nt(Sr))}return(Sr){const Dr=new Ir;if(this._blockNode(Dr),this.code(Sr),Dr.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Ir)}try(Sr,Dr,Er){if(!Dr&&!Er)throw new Error('CodeGen: "try" without "catch" and "finally"');const wr=new xr;if(this._blockNode(wr),this.code(Sr),Dr){const Tr=this.name("e");this._currNode=wr.catch=new Or(Tr),Dr(Tr)}return Er&&(this._currNode=wr.finally=new Nr,this.code(Er)),this._endBlockNode(Or,Nr)}throw(Sr){return this._leafNode(new qt(Sr))}block(Sr,Dr){return this._blockStarts.push(this._nodes.length),Sr&&this.code(Sr).endBlock(Dr),this}endBlock(Sr){const Dr=this._blockStarts.pop();if(Dr===void 0)throw new Error("CodeGen: not in self-balancing block");const Er=this._nodes.length-Dr;if(Er<0||Sr!==void 0&&Er!==Sr)throw new Error(`CodeGen: wrong number of nodes: ${Er} vs ${Sr} expected`);return this._nodes.length=Dr,this}func(Sr,Dr=e.nil,Er,wr){return this._blockNode(new vr(Sr,Dr,Er)),wr&&this.code(wr).endFunc(),this}endFunc(){return this._endBlockNode(vr)}optimize(Sr=1){for(;Sr-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Sr){return this._currNode.nodes.push(Sr),this}_blockNode(Sr){this._currNode.nodes.push(Sr),this._nodes.push(Sr)}_endBlockNode(Sr,Dr){const Er=this._currNode;if(Er instanceof Sr||Dr&&Er instanceof Dr)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Dr?`${Sr.kind}/${Dr.kind}`:Sr.kind}"`)}_elseNode(Sr){const Dr=this._currNode;if(!(Dr instanceof rr))throw new Error('CodeGen: "else" without "if"');return this._currNode=Dr.else=Sr,this}get _root(){return this._nodes[0]}get _currNode(){const Sr=this._nodes;return Sr[Sr.length-1]}set _currNode(Sr){const Dr=this._nodes;Dr[Dr.length-1]=Sr}}_t.CodeGen=kr;function lr(br,Sr){for(const Dr in Sr)br[Dr]=(br[Dr]||0)+(Sr[Dr]||0);return br}function ir(br,Sr){return Sr instanceof e._CodeOrName?lr(br,Sr.names):br}function Xt(br,Sr,Dr){if(br instanceof e.Name)return Er(br);if(!wr(br))return br;return new e._Code(br._items.reduce((Tr,Mr)=>(Mr instanceof e.Name&&(Mr=Er(Mr)),Mr instanceof e._Code?Tr.push(...Mr._items):Tr.push(Mr),Tr),[]));function Er(Tr){const Mr=Dr[Tr.str];return Mr===void 0||Sr[Tr.str]!==1?Tr:(delete Sr[Tr.str],Mr)}function wr(Tr){return Tr instanceof e._Code&&Tr._items.some(Mr=>Mr instanceof e.Name&&Sr[Mr.str]===1&&Dr[Mr.str]!==void 0)}}function er(br,Sr){for(const Dr in Sr)br[Dr]=(br[Dr]||0)-(Sr[Dr]||0)}function pr(br){return typeof br=="boolean"||typeof br=="number"||br===null?!br:(0,e._)`!${fr(br)}`}_t.not=pr;const ur=dr(_t.operators.AND);function gr(...br){return br.reduce(ur)}_t.and=gr;const ar=dr(_t.operators.OR);function tr(...br){return br.reduce(ar)}_t.or=tr;function dr(br){return(Sr,Dr)=>Sr===e.nil?Dr:Dr===e.nil?Sr:(0,e._)`${fr(Sr)} ${br} ${fr(Dr)}`}function fr(br){return br instanceof e.Name?br:(0,e._)`(${br})`}})(codegen);var util$1={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.checkStrictMode=_t.getErrorPath=_t.Type=_t.useFunc=_t.setEvaluated=_t.evaluatedPropsToName=_t.mergeEvaluated=_t.eachItem=_t.unescapeJsonPointer=_t.escapeJsonPointer=_t.escapeFragment=_t.unescapeFragment=_t.schemaRefOrVal=_t.schemaHasRulesButRef=_t.schemaHasRules=_t.checkUnknownRules=_t.alwaysValidSchema=_t.toHash=void 0;const e=codegen,$t=code$1;function xt(vr){const Ir={};for(const xr of vr)Ir[xr]=!0;return Ir}_t.toHash=xt;function At(vr,Ir){return typeof Ir=="boolean"?Ir:Object.keys(Ir).length===0?!0:(kt(vr,Ir),!Bt(Ir,vr.self.RULES.all))}_t.alwaysValidSchema=At;function kt(vr,Ir=vr.schema){const{opts:xr,self:Or}=vr;if(!xr.strictSchema||typeof Ir=="boolean")return;const Nr=Or.RULES.keywords;for(const kr in Ir)Nr[kr]||yr(vr,`unknown keyword: "${kr}"`)}_t.checkUnknownRules=kt;function Bt(vr,Ir){if(typeof vr=="boolean")return!vr;for(const xr in vr)if(Ir[xr])return!0;return!1}_t.schemaHasRules=Bt;function jt(vr,Ir){if(typeof vr=="boolean")return!vr;for(const xr in vr)if(xr!=="$ref"&&Ir.all[xr])return!0;return!1}_t.schemaHasRulesButRef=jt;function Lt({topSchemaRef:vr,schemaPath:Ir},xr,Or,Nr){if(!Nr){if(typeof xr=="number"||typeof xr=="boolean")return xr;if(typeof xr=="string")return(0,e._)`${xr}`}return(0,e._)`${vr}${Ir}${(0,e.getProperty)(Or)}`}_t.schemaRefOrVal=Lt;function Ut(vr){return Kt(decodeURIComponent(vr))}_t.unescapeFragment=Ut;function Nt(vr){return encodeURIComponent(qt(vr))}_t.escapeFragment=Nt;function qt(vr){return typeof vr=="number"?`${vr}`:vr.replace(/~/g,"~0").replace(/\//g,"~1")}_t.escapeJsonPointer=qt;function Kt(vr){return vr.replace(/~1/g,"/").replace(/~0/g,"~")}_t.unescapeJsonPointer=Kt;function zt(vr,Ir){if(Array.isArray(vr))for(const xr of vr)Ir(xr);else Ir(vr)}_t.eachItem=zt;function Vt({mergeNames:vr,mergeToName:Ir,mergeValues:xr,resultToName:Or}){return(Nr,kr,lr,ir)=>{const Xt=lr===void 0?kr:lr instanceof e.Name?(kr instanceof e.Name?vr(Nr,kr,lr):Ir(Nr,kr,lr),lr):kr instanceof e.Name?(Ir(Nr,lr,kr),kr):xr(kr,lr);return ir===e.Name&&!(Xt instanceof e.Name)?Or(Nr,Xt):Xt}}_t.mergeEvaluated={props:Vt({mergeNames:(vr,Ir,xr)=>vr.if((0,e._)`${xr} !== true && ${Ir} !== undefined`,()=>{vr.if((0,e._)`${Ir} === true`,()=>vr.assign(xr,!0),()=>vr.assign(xr,(0,e._)`${xr} || {}`).code((0,e._)`Object.assign(${xr}, ${Ir})`))}),mergeToName:(vr,Ir,xr)=>vr.if((0,e._)`${xr} !== true`,()=>{Ir===!0?vr.assign(xr,!0):(vr.assign(xr,(0,e._)`${xr} || {}`),Jt(vr,xr,Ir))}),mergeValues:(vr,Ir)=>vr===!0?!0:{...vr,...Ir},resultToName:Ht}),items:Vt({mergeNames:(vr,Ir,xr)=>vr.if((0,e._)`${xr} !== true && ${Ir} !== undefined`,()=>vr.assign(xr,(0,e._)`${Ir} === true ? true : ${xr} > ${Ir} ? ${xr} : ${Ir}`)),mergeToName:(vr,Ir,xr)=>vr.if((0,e._)`${xr} !== true`,()=>vr.assign(xr,Ir===!0?!0:(0,e._)`${xr} > ${Ir} ? ${xr} : ${Ir}`)),mergeValues:(vr,Ir)=>vr===!0?!0:Math.max(vr,Ir),resultToName:(vr,Ir)=>vr.var("items",Ir)})};function Ht(vr,Ir){if(Ir===!0)return vr.var("props",!0);const xr=vr.var("props",(0,e._)`{}`);return Ir!==void 0&&Jt(vr,xr,Ir),xr}_t.evaluatedPropsToName=Ht;function Jt(vr,Ir,xr){Object.keys(xr).forEach(Or=>vr.assign((0,e._)`${Ir}${(0,e.getProperty)(Or)}`,!0))}_t.setEvaluated=Jt;const rr={};function Qt(vr,Ir){return vr.scopeValue("func",{ref:Ir,code:rr[Ir.code]||(rr[Ir.code]=new $t._Code(Ir.code))})}_t.useFunc=Qt;var Wt;(function(vr){vr[vr.Num=0]="Num",vr[vr.Str=1]="Str"})(Wt=_t.Type||(_t.Type={}));function nr(vr,Ir,xr){if(vr instanceof e.Name){const Or=Ir===Wt.Num;return xr?Or?(0,e._)`"[" + ${vr} + "]"`:(0,e._)`"['" + ${vr} + "']"`:Or?(0,e._)`"/" + ${vr}`:(0,e._)`"/" + ${vr}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return xr?(0,e.getProperty)(vr).toString():"/"+qt(vr)}_t.getErrorPath=nr;function yr(vr,Ir,xr=vr.opts.strictSchema){if(xr){if(Ir=`strict mode: ${Ir}`,xr===!0)throw new Error(Ir);vr.self.logger.warn(Ir)}}_t.checkStrictMode=yr})(util$1);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$x=codegen,names={data:new codegen_1$x.Name("data"),valCxt:new codegen_1$x.Name("valCxt"),instancePath:new codegen_1$x.Name("instancePath"),parentData:new codegen_1$x.Name("parentData"),parentDataProperty:new codegen_1$x.Name("parentDataProperty"),rootData:new codegen_1$x.Name("rootData"),dynamicAnchors:new codegen_1$x.Name("dynamicAnchors"),vErrors:new codegen_1$x.Name("vErrors"),errors:new codegen_1$x.Name("errors"),this:new codegen_1$x.Name("this"),self:new codegen_1$x.Name("self"),scope:new codegen_1$x.Name("scope"),json:new codegen_1$x.Name("json"),jsonPos:new codegen_1$x.Name("jsonPos"),jsonLen:new codegen_1$x.Name("jsonLen"),jsonPart:new codegen_1$x.Name("jsonPart")};names$1.default=names;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.extendErrors=_t.resetErrorsCount=_t.reportExtraError=_t.reportError=_t.keyword$DataError=_t.keywordError=void 0;const e=codegen,$t=util$1,xt=names$1;_t.keywordError={message:({keyword:Jt})=>(0,e.str)`must pass "${Jt}" keyword validation`},_t.keyword$DataError={message:({keyword:Jt,schemaType:rr})=>rr?(0,e.str)`"${Jt}" keyword must be ${rr} ($data)`:(0,e.str)`"${Jt}" keyword is invalid ($data)`};function At(Jt,rr=_t.keywordError,Qt,Wt){const{it:nr}=Jt,{gen:yr,compositeRule:vr,allErrors:Ir}=nr,xr=qt(Jt,rr,Qt);Wt??(vr||Ir)?Lt(yr,xr):Ut(nr,(0,e._)`[${xr}]`)}_t.reportError=At;function kt(Jt,rr=_t.keywordError,Qt){const{it:Wt}=Jt,{gen:nr,compositeRule:yr,allErrors:vr}=Wt,Ir=qt(Jt,rr,Qt);Lt(nr,Ir),yr||vr||Ut(Wt,xt.default.vErrors)}_t.reportExtraError=kt;function Bt(Jt,rr){Jt.assign(xt.default.errors,rr),Jt.if((0,e._)`${xt.default.vErrors} !== null`,()=>Jt.if(rr,()=>Jt.assign((0,e._)`${xt.default.vErrors}.length`,rr),()=>Jt.assign(xt.default.vErrors,null)))}_t.resetErrorsCount=Bt;function jt({gen:Jt,keyword:rr,schemaValue:Qt,data:Wt,errsCount:nr,it:yr}){if(nr===void 0)throw new Error("ajv implementation error");const vr=Jt.name("err");Jt.forRange("i",nr,xt.default.errors,Ir=>{Jt.const(vr,(0,e._)`${xt.default.vErrors}[${Ir}]`),Jt.if((0,e._)`${vr}.instancePath === undefined`,()=>Jt.assign((0,e._)`${vr}.instancePath`,(0,e.strConcat)(xt.default.instancePath,yr.errorPath))),Jt.assign((0,e._)`${vr}.schemaPath`,(0,e.str)`${yr.errSchemaPath}/${rr}`),yr.opts.verbose&&(Jt.assign((0,e._)`${vr}.schema`,Qt),Jt.assign((0,e._)`${vr}.data`,Wt))})}_t.extendErrors=jt;function Lt(Jt,rr){const Qt=Jt.const("err",rr);Jt.if((0,e._)`${xt.default.vErrors} === null`,()=>Jt.assign(xt.default.vErrors,(0,e._)`[${Qt}]`),(0,e._)`${xt.default.vErrors}.push(${Qt})`),Jt.code((0,e._)`${xt.default.errors}++`)}function Ut(Jt,rr){const{gen:Qt,validateName:Wt,schemaEnv:nr}=Jt;nr.$async?Qt.throw((0,e._)`new ${Jt.ValidationError}(${rr})`):(Qt.assign((0,e._)`${Wt}.errors`,rr),Qt.return(!1))}const Nt={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function qt(Jt,rr,Qt){const{createErrors:Wt}=Jt.it;return Wt===!1?(0,e._)`{}`:Kt(Jt,rr,Qt)}function Kt(Jt,rr,Qt={}){const{gen:Wt,it:nr}=Jt,yr=[zt(nr,Qt),Vt(Jt,Qt)];return Ht(Jt,rr,yr),Wt.object(...yr)}function zt({errorPath:Jt},{instancePath:rr}){const Qt=rr?(0,e.str)`${Jt}${(0,$t.getErrorPath)(rr,$t.Type.Str)}`:Jt;return[xt.default.instancePath,(0,e.strConcat)(xt.default.instancePath,Qt)]}function Vt({keyword:Jt,it:{errSchemaPath:rr}},{schemaPath:Qt,parentSchema:Wt}){let nr=Wt?rr:(0,e.str)`${rr}/${Jt}`;return Qt&&(nr=(0,e.str)`${nr}${(0,$t.getErrorPath)(Qt,$t.Type.Str)}`),[Nt.schemaPath,nr]}function Ht(Jt,{params:rr,message:Qt},Wt){const{keyword:nr,data:yr,schemaValue:vr,it:Ir}=Jt,{opts:xr,propertyName:Or,topSchemaRef:Nr,schemaPath:kr}=Ir;Wt.push([Nt.keyword,nr],[Nt.params,typeof rr=="function"?rr(Jt):rr||(0,e._)`{}`]),xr.messages&&Wt.push([Nt.message,typeof Qt=="function"?Qt(Jt):Qt]),xr.verbose&&Wt.push([Nt.schema,vr],[Nt.parentSchema,(0,e._)`${Nr}${kr}`],[xt.default.data,yr]),Or&&Wt.push([Nt.propertyName,Or])}})(errors$1);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors$1,codegen_1$w=codegen,names_1$9=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(_t){const{gen:e,schema:$t,validateName:xt}=_t;$t===!1?falseSchemaError(_t,!1):typeof $t=="object"&&$t.$async===!0?e.return(names_1$9.default.data):(e.assign((0,codegen_1$w._)`${xt}.errors`,null),e.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(_t,e){const{gen:$t,schema:xt}=_t;xt===!1?($t.var(e,!1),falseSchemaError(_t)):$t.var(e,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(_t,e){const{gen:$t,data:xt}=_t,At={gen:$t,keyword:"false schema",data:xt,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:_t};(0,errors_1$2.reportError)(At,boolError,void 0,e)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(_t){return typeof _t=="string"&&jsonTypes.has(_t)}rules.isJSONType=isJSONType;function getRules(){const _t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{..._t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},_t.number,_t.string,_t.array,_t.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:_t,self:e},$t){const xt=e.RULES.types[$t];return xt&&xt!==!0&&shouldUseGroup(_t,xt)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(_t,e){return e.rules.some($t=>shouldUseRule(_t,$t))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(_t,e){var $t;return _t[e.keyword]!==void 0||(($t=e.definition.implements)===null||$t===void 0?void 0:$t.some(xt=>_t[xt]!==void 0))}applicability.shouldUseRule=shouldUseRule;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.reportTypeError=_t.checkDataTypes=_t.checkDataType=_t.coerceAndCheckDataType=_t.getJSONTypes=_t.getSchemaTypes=_t.DataType=void 0;const e=rules,$t=applicability,xt=errors$1,At=codegen,kt=util$1;var Bt;(function(Wt){Wt[Wt.Correct=0]="Correct",Wt[Wt.Wrong=1]="Wrong"})(Bt=_t.DataType||(_t.DataType={}));function jt(Wt){const nr=Lt(Wt.type);if(nr.includes("null")){if(Wt.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!nr.length&&Wt.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');Wt.nullable===!0&&nr.push("null")}return nr}_t.getSchemaTypes=jt;function Lt(Wt){const nr=Array.isArray(Wt)?Wt:Wt?[Wt]:[];if(nr.every(e.isJSONType))return nr;throw new Error("type must be JSONType or JSONType[]: "+nr.join(","))}_t.getJSONTypes=Lt;function Ut(Wt,nr){const{gen:yr,data:vr,opts:Ir}=Wt,xr=qt(nr,Ir.coerceTypes),Or=nr.length>0&&!(xr.length===0&&nr.length===1&&(0,$t.schemaHasRulesForType)(Wt,nr[0]));if(Or){const Nr=Ht(nr,vr,Ir.strictNumbers,Bt.Wrong);yr.if(Nr,()=>{xr.length?Kt(Wt,nr,xr):rr(Wt)})}return Or}_t.coerceAndCheckDataType=Ut;const Nt=new Set(["string","number","integer","boolean","null"]);function qt(Wt,nr){return nr?Wt.filter(yr=>Nt.has(yr)||nr==="array"&&yr==="array"):[]}function Kt(Wt,nr,yr){const{gen:vr,data:Ir,opts:xr}=Wt,Or=vr.let("dataType",(0,At._)`typeof ${Ir}`),Nr=vr.let("coerced",(0,At._)`undefined`);xr.coerceTypes==="array"&&vr.if((0,At._)`${Or} == 'object' && Array.isArray(${Ir}) && ${Ir}.length == 1`,()=>vr.assign(Ir,(0,At._)`${Ir}[0]`).assign(Or,(0,At._)`typeof ${Ir}`).if(Ht(nr,Ir,xr.strictNumbers),()=>vr.assign(Nr,Ir))),vr.if((0,At._)`${Nr} !== undefined`);for(const lr of yr)(Nt.has(lr)||lr==="array"&&xr.coerceTypes==="array")&&kr(lr);vr.else(),rr(Wt),vr.endIf(),vr.if((0,At._)`${Nr} !== undefined`,()=>{vr.assign(Ir,Nr),zt(Wt,Nr)});function kr(lr){switch(lr){case"string":vr.elseIf((0,At._)`${Or} == "number" || ${Or} == "boolean"`).assign(Nr,(0,At._)`"" + ${Ir}`).elseIf((0,At._)`${Ir} === null`).assign(Nr,(0,At._)`""`);return;case"number":vr.elseIf((0,At._)`${Or} == "boolean" || ${Ir} === null
              || (${Or} == "string" && ${Ir} && ${Ir} == +${Ir})`).assign(Nr,(0,At._)`+${Ir}`);return;case"integer":vr.elseIf((0,At._)`${Or} === "boolean" || ${Ir} === null
              || (${Or} === "string" && ${Ir} && ${Ir} == +${Ir} && !(${Ir} % 1))`).assign(Nr,(0,At._)`+${Ir}`);return;case"boolean":vr.elseIf((0,At._)`${Ir} === "false" || ${Ir} === 0 || ${Ir} === null`).assign(Nr,!1).elseIf((0,At._)`${Ir} === "true" || ${Ir} === 1`).assign(Nr,!0);return;case"null":vr.elseIf((0,At._)`${Ir} === "" || ${Ir} === 0 || ${Ir} === false`),vr.assign(Nr,null);return;case"array":vr.elseIf((0,At._)`${Or} === "string" || ${Or} === "number"
              || ${Or} === "boolean" || ${Ir} === null`).assign(Nr,(0,At._)`[${Ir}]`)}}}function zt({gen:Wt,parentData:nr,parentDataProperty:yr},vr){Wt.if((0,At._)`${nr} !== undefined`,()=>Wt.assign((0,At._)`${nr}[${yr}]`,vr))}function Vt(Wt,nr,yr,vr=Bt.Correct){const Ir=vr===Bt.Correct?At.operators.EQ:At.operators.NEQ;let xr;switch(Wt){case"null":return(0,At._)`${nr} ${Ir} null`;case"array":xr=(0,At._)`Array.isArray(${nr})`;break;case"object":xr=(0,At._)`${nr} && typeof ${nr} == "object" && !Array.isArray(${nr})`;break;case"integer":xr=Or((0,At._)`!(${nr} % 1) && !isNaN(${nr})`);break;case"number":xr=Or();break;default:return(0,At._)`typeof ${nr} ${Ir} ${Wt}`}return vr===Bt.Correct?xr:(0,At.not)(xr);function Or(Nr=At.nil){return(0,At.and)((0,At._)`typeof ${nr} == "number"`,Nr,yr?(0,At._)`isFinite(${nr})`:At.nil)}}_t.checkDataType=Vt;function Ht(Wt,nr,yr,vr){if(Wt.length===1)return Vt(Wt[0],nr,yr,vr);let Ir;const xr=(0,kt.toHash)(Wt);if(xr.array&&xr.object){const Or=(0,At._)`typeof ${nr} != "object"`;Ir=xr.null?Or:(0,At._)`!${nr} || ${Or}`,delete xr.null,delete xr.array,delete xr.object}else Ir=At.nil;xr.number&&delete xr.integer;for(const Or in xr)Ir=(0,At.and)(Ir,Vt(Or,nr,yr,vr));return Ir}_t.checkDataTypes=Ht;const Jt={message:({schema:Wt})=>`must be ${Wt}`,params:({schema:Wt,schemaValue:nr})=>typeof Wt=="string"?(0,At._)`{type: ${Wt}}`:(0,At._)`{type: ${nr}}`};function rr(Wt){const nr=Qt(Wt);(0,xt.reportError)(nr,Jt)}_t.reportTypeError=rr;function Qt(Wt){const{gen:nr,data:yr,schema:vr}=Wt,Ir=(0,kt.schemaRefOrVal)(Wt,vr,"type");return{gen:nr,keyword:"type",data:yr,schema:vr.type,schemaCode:Ir,schemaValue:Ir,parentSchema:vr,params:{},it:Wt}}})(dataType);var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0});defaults.assignDefaults=void 0;const codegen_1$v=codegen,util_1$t=util$1;function assignDefaults(_t,e){const{properties:$t,items:xt}=_t.schema;if(e==="object"&&$t)for(const At in $t)assignDefault(_t,At,$t[At].default);else e==="array"&&Array.isArray(xt)&&xt.forEach((At,kt)=>assignDefault(_t,kt,At.default))}defaults.assignDefaults=assignDefaults;function assignDefault(_t,e,$t){const{gen:xt,compositeRule:At,data:kt,opts:Bt}=_t;if($t===void 0)return;const jt=(0,codegen_1$v._)`${kt}${(0,codegen_1$v.getProperty)(e)}`;if(At){(0,util_1$t.checkStrictMode)(_t,`default is ignored for: ${jt}`);return}let Lt=(0,codegen_1$v._)`${jt} === undefined`;Bt.useDefaults==="empty"&&(Lt=(0,codegen_1$v._)`${Lt} || ${jt} === null || ${jt} === ""`),xt.if(Lt,(0,codegen_1$v._)`${jt} = ${(0,codegen_1$v.stringify)($t)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$u=codegen,util_1$s=util$1,names_1$8=names$1,util_2$1=util$1;function checkReportMissingProp(_t,e){const{gen:$t,data:xt,it:At}=_t;$t.if(noPropertyInData($t,xt,e,At.opts.ownProperties),()=>{_t.setParams({missingProperty:(0,codegen_1$u._)`${e}`},!0),_t.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:_t,data:e,it:{opts:$t}},xt,At){return(0,codegen_1$u.or)(...xt.map(kt=>(0,codegen_1$u.and)(noPropertyInData(_t,e,kt,$t.ownProperties),(0,codegen_1$u._)`${At} = ${kt}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(_t,e){_t.setParams({missingProperty:e},!0),_t.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(_t){return _t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$u._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(_t,e,$t){return(0,codegen_1$u._)`${hasPropFunc(_t)}.call(${e}, ${$t})`}code.isOwnProperty=isOwnProperty;function propertyInData(_t,e,$t,xt){const At=(0,codegen_1$u._)`${e}${(0,codegen_1$u.getProperty)($t)} !== undefined`;return xt?(0,codegen_1$u._)`${At} && ${isOwnProperty(_t,e,$t)}`:At}code.propertyInData=propertyInData;function noPropertyInData(_t,e,$t,xt){const At=(0,codegen_1$u._)`${e}${(0,codegen_1$u.getProperty)($t)} === undefined`;return xt?(0,codegen_1$u.or)(At,(0,codegen_1$u.not)(isOwnProperty(_t,e,$t))):At}code.noPropertyInData=noPropertyInData;function allSchemaProperties(_t){return _t?Object.keys(_t).filter(e=>e!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(_t,e){return allSchemaProperties(e).filter($t=>!(0,util_1$s.alwaysValidSchema)(_t,e[$t]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:_t,data:e,it:{gen:$t,topSchemaRef:xt,schemaPath:At,errorPath:kt},it:Bt},jt,Lt,Ut){const Nt=Ut?(0,codegen_1$u._)`${_t}, ${e}, ${xt}${At}`:e,qt=[[names_1$8.default.instancePath,(0,codegen_1$u.strConcat)(names_1$8.default.instancePath,kt)],[names_1$8.default.parentData,Bt.parentData],[names_1$8.default.parentDataProperty,Bt.parentDataProperty],[names_1$8.default.rootData,names_1$8.default.rootData]];Bt.opts.dynamicRef&&qt.push([names_1$8.default.dynamicAnchors,names_1$8.default.dynamicAnchors]);const Kt=(0,codegen_1$u._)`${Nt}, ${$t.object(...qt)}`;return Lt!==codegen_1$u.nil?(0,codegen_1$u._)`${jt}.call(${Lt}, ${Kt})`:(0,codegen_1$u._)`${jt}(${Kt})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$u._)`new RegExp`;function usePattern({gen:_t,it:{opts:e}},$t){const xt=e.unicodeRegExp?"u":"",{regExp:At}=e.code,kt=At($t,xt);return _t.scopeValue("pattern",{key:kt.toString(),ref:kt,code:(0,codegen_1$u._)`${At.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(_t,At)}(${$t}, ${xt})`})}code.usePattern=usePattern;function validateArray$1(_t){const{gen:e,data:$t,keyword:xt,it:At}=_t,kt=e.name("valid");if(At.allErrors){const jt=e.let("valid",!0);return Bt(()=>e.assign(jt,!1)),jt}return e.var(kt,!0),Bt(()=>e.break()),kt;function Bt(jt){const Lt=e.const("len",(0,codegen_1$u._)`${$t}.length`);e.forRange("i",0,Lt,Ut=>{_t.subschema({keyword:xt,dataProp:Ut,dataPropType:util_1$s.Type.Num},kt),e.if((0,codegen_1$u.not)(kt),jt)})}}code.validateArray=validateArray$1;function validateUnion$1(_t){const{gen:e,schema:$t,keyword:xt,it:At}=_t;if(!Array.isArray($t))throw new Error("ajv implementation error");if($t.some(Lt=>(0,util_1$s.alwaysValidSchema)(At,Lt))&&!At.opts.unevaluated)return;const Bt=e.let("valid",!1),jt=e.name("_valid");e.block(()=>$t.forEach((Lt,Ut)=>{const Nt=_t.subschema({keyword:xt,schemaProp:Ut,compositeRule:!0},jt);e.assign(Bt,(0,codegen_1$u._)`${Bt} || ${jt}`),_t.mergeValidEvaluated(Nt,jt)||e.if((0,codegen_1$u.not)(Bt))})),_t.result(Bt,()=>_t.reset(),()=>_t.error(!0))}code.validateUnion=validateUnion$1;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$t=codegen,names_1$7=names$1,code_1$9=code,errors_1$1=errors$1;function macroKeywordCode(_t,e){const{gen:$t,keyword:xt,schema:At,parentSchema:kt,it:Bt}=_t,jt=e.macro.call(Bt.self,At,kt,Bt),Lt=useKeyword($t,xt,jt);Bt.opts.validateSchema!==!1&&Bt.self.validateSchema(jt,!0);const Ut=$t.name("valid");_t.subschema({schema:jt,schemaPath:codegen_1$t.nil,errSchemaPath:`${Bt.errSchemaPath}/${xt}`,topSchemaRef:Lt,compositeRule:!0},Ut),_t.pass(Ut,()=>_t.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(_t,e){var $t;const{gen:xt,keyword:At,schema:kt,parentSchema:Bt,$data:jt,it:Lt}=_t;checkAsyncKeyword(Lt,e);const Ut=!jt&&e.compile?e.compile.call(Lt.self,kt,Bt,Lt):e.validate,Nt=useKeyword(xt,At,Ut),qt=xt.let("valid");_t.block$data(qt,Kt),_t.ok(($t=e.valid)!==null&&$t!==void 0?$t:qt);function Kt(){if(e.errors===!1)Ht(),e.modifying&&modifyData(_t),Jt(()=>_t.error());else{const rr=e.async?zt():Vt();e.modifying&&modifyData(_t),Jt(()=>addErrs(_t,rr))}}function zt(){const rr=xt.let("ruleErrs",null);return xt.try(()=>Ht((0,codegen_1$t._)`await `),Qt=>xt.assign(qt,!1).if((0,codegen_1$t._)`${Qt} instanceof ${Lt.ValidationError}`,()=>xt.assign(rr,(0,codegen_1$t._)`${Qt}.errors`),()=>xt.throw(Qt))),rr}function Vt(){const rr=(0,codegen_1$t._)`${Nt}.errors`;return xt.assign(rr,null),Ht(codegen_1$t.nil),rr}function Ht(rr=e.async?(0,codegen_1$t._)`await `:codegen_1$t.nil){const Qt=Lt.opts.passContext?names_1$7.default.this:names_1$7.default.self,Wt=!("compile"in e&&!jt||e.schema===!1);xt.assign(qt,(0,codegen_1$t._)`${rr}${(0,code_1$9.callValidateCode)(_t,Nt,Qt,Wt)}`,e.modifying)}function Jt(rr){var Qt;xt.if((0,codegen_1$t.not)((Qt=e.valid)!==null&&Qt!==void 0?Qt:qt),rr)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(_t){const{gen:e,data:$t,it:xt}=_t;e.if(xt.parentData,()=>e.assign($t,(0,codegen_1$t._)`${xt.parentData}[${xt.parentDataProperty}]`))}function addErrs(_t,e){const{gen:$t}=_t;$t.if((0,codegen_1$t._)`Array.isArray(${e})`,()=>{$t.assign(names_1$7.default.vErrors,(0,codegen_1$t._)`${names_1$7.default.vErrors} === null ? ${e} : ${names_1$7.default.vErrors}.concat(${e})`).assign(names_1$7.default.errors,(0,codegen_1$t._)`${names_1$7.default.vErrors}.length`),(0,errors_1$1.extendErrors)(_t)},()=>_t.error())}function checkAsyncKeyword({schemaEnv:_t},e){if(e.async&&!_t.$async)throw new Error("async keyword in sync schema")}function useKeyword(_t,e,$t){if($t===void 0)throw new Error(`keyword "${e}" failed to compile`);return _t.scopeValue("keyword",typeof $t=="function"?{ref:$t}:{ref:$t,code:(0,codegen_1$t.stringify)($t)})}function validSchemaType(_t,e,$t=!1){return!e.length||e.some(xt=>xt==="array"?Array.isArray(_t):xt==="object"?_t&&typeof _t=="object"&&!Array.isArray(_t):typeof _t==xt||$t&&typeof _t>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:_t,opts:e,self:$t,errSchemaPath:xt},At,kt){if(Array.isArray(At.keyword)?!At.keyword.includes(kt):At.keyword!==kt)throw new Error("ajv implementation error");const Bt=At.dependencies;if(Bt!=null&&Bt.some(jt=>!Object.prototype.hasOwnProperty.call(_t,jt)))throw new Error(`parent schema must have dependencies of ${kt}: ${Bt.join(",")}`);if(At.validateSchema&&!At.validateSchema(_t[kt])){const Lt=`keyword "${kt}" value is invalid at path "${xt}": `+$t.errorsText(At.validateSchema.errors);if(e.validateSchema==="log")$t.logger.error(Lt);else throw new Error(Lt)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$s=codegen,util_1$r=util$1;function getSubschema(_t,{keyword:e,schemaProp:$t,schema:xt,schemaPath:At,errSchemaPath:kt,topSchemaRef:Bt}){if(e!==void 0&&xt!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const jt=_t.schema[e];return $t===void 0?{schema:jt,schemaPath:(0,codegen_1$s._)`${_t.schemaPath}${(0,codegen_1$s.getProperty)(e)}`,errSchemaPath:`${_t.errSchemaPath}/${e}`}:{schema:jt[$t],schemaPath:(0,codegen_1$s._)`${_t.schemaPath}${(0,codegen_1$s.getProperty)(e)}${(0,codegen_1$s.getProperty)($t)}`,errSchemaPath:`${_t.errSchemaPath}/${e}/${(0,util_1$r.escapeFragment)($t)}`}}if(xt!==void 0){if(At===void 0||kt===void 0||Bt===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:xt,schemaPath:At,topSchemaRef:Bt,errSchemaPath:kt}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(_t,e,{dataProp:$t,dataPropType:xt,data:At,dataTypes:kt,propertyName:Bt}){if(At!==void 0&&$t!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:jt}=e;if($t!==void 0){const{errorPath:Ut,dataPathArr:Nt,opts:qt}=e,Kt=jt.let("data",(0,codegen_1$s._)`${e.data}${(0,codegen_1$s.getProperty)($t)}`,!0);Lt(Kt),_t.errorPath=(0,codegen_1$s.str)`${Ut}${(0,util_1$r.getErrorPath)($t,xt,qt.jsPropertySyntax)}`,_t.parentDataProperty=(0,codegen_1$s._)`${$t}`,_t.dataPathArr=[...Nt,_t.parentDataProperty]}if(At!==void 0){const Ut=At instanceof codegen_1$s.Name?At:jt.let("data",At,!0);Lt(Ut),Bt!==void 0&&(_t.propertyName=Bt)}kt&&(_t.dataTypes=kt);function Lt(Ut){_t.data=Ut,_t.dataLevel=e.dataLevel+1,_t.dataTypes=[],e.definedProperties=new Set,_t.parentData=e.data,_t.dataNames=[...e.dataNames,Ut]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(_t,{jtdDiscriminator:e,jtdMetadata:$t,compositeRule:xt,createErrors:At,allErrors:kt}){xt!==void 0&&(_t.compositeRule=xt),At!==void 0&&(_t.createErrors=At),kt!==void 0&&(_t.allErrors=kt),_t.jtdDiscriminator=e,_t.jtdMetadata=$t}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function _t(e,$t){if(e===$t)return!0;if(e&&$t&&typeof e=="object"&&typeof $t=="object"){if(e.constructor!==$t.constructor)return!1;var xt,At,kt;if(Array.isArray(e)){if(xt=e.length,xt!=$t.length)return!1;for(At=xt;At--!==0;)if(!_t(e[At],$t[At]))return!1;return!0}if(e.constructor===RegExp)return e.source===$t.source&&e.flags===$t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===$t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===$t.toString();if(kt=Object.keys(e),xt=kt.length,xt!==Object.keys($t).length)return!1;for(At=xt;At--!==0;)if(!Object.prototype.hasOwnProperty.call($t,kt[At]))return!1;for(At=xt;At--!==0;){var Bt=kt[At];if(!_t(e[Bt],$t[Bt]))return!1}return!0}return e!==e&&$t!==$t},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(_t,e,$t){typeof e=="function"&&($t=e,e={}),$t=e.cb||$t;var xt=typeof $t=="function"?$t:$t.pre||function(){},At=$t.post||function(){};_traverse(e,xt,At,_t,"",_t)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(_t,e,$t,xt,At,kt,Bt,jt,Lt,Ut){if(xt&&typeof xt=="object"&&!Array.isArray(xt)){e(xt,At,kt,Bt,jt,Lt,Ut);for(var Nt in xt){var qt=xt[Nt];if(Array.isArray(qt)){if(Nt in traverse$1.arrayKeywords)for(var Kt=0;Kt<qt.length;Kt++)_traverse(_t,e,$t,qt[Kt],At+"/"+Nt+"/"+Kt,kt,At,Nt,xt,Kt)}else if(Nt in traverse$1.propsKeywords){if(qt&&typeof qt=="object")for(var zt in qt)_traverse(_t,e,$t,qt[zt],At+"/"+Nt+"/"+escapeJsonPtr(zt),kt,At,Nt,xt,zt)}else(Nt in traverse$1.keywords||_t.allKeys&&!(Nt in traverse$1.skipKeywords))&&_traverse(_t,e,$t,qt,At+"/"+Nt,kt,At,Nt,xt)}$t(xt,At,kt,Bt,jt,Lt,Ut)}}function escapeJsonPtr(_t){return _t.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$1,"__esModule",{value:!0});resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$q=util$1,equal$2=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(_t,e=!0){return typeof _t=="boolean"?!0:e===!0?!hasRef(_t):e?countKeys(_t)<=e:!1}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(_t){for(const e in _t){if(REF_KEYWORDS.has(e))return!0;const $t=_t[e];if(Array.isArray($t)&&$t.some(hasRef)||typeof $t=="object"&&hasRef($t))return!0}return!1}function countKeys(_t){let e=0;for(const $t in _t){if($t==="$ref")return 1/0;if(e++,!SIMPLE_INLINED.has($t)&&(typeof _t[$t]=="object"&&(0,util_1$q.eachItem)(_t[$t],xt=>e+=countKeys(xt)),e===1/0))return 1/0}return e}function getFullPath(_t,e="",$t){$t!==!1&&(e=normalizeId(e));const xt=_t.parse(e);return _getFullPath(_t,xt)}resolve$1.getFullPath=getFullPath;function _getFullPath(_t,e){return _t.serialize(e).split("#")[0]+"#"}resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(_t){return _t?_t.replace(TRAILING_SLASH_HASH,""):""}resolve$1.normalizeId=normalizeId;function resolveUrl(_t,e,$t){return $t=normalizeId($t),_t.resolve(e,$t)}resolve$1.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(_t,e){if(typeof _t=="boolean")return{};const{schemaId:$t,uriResolver:xt}=this.opts,At=normalizeId(_t[$t]||e),kt={"":At},Bt=getFullPath(xt,At,!1),jt={},Lt=new Set;return traverse(_t,{allKeys:!0},(qt,Kt,zt,Vt)=>{if(Vt===void 0)return;const Ht=Bt+Kt;let Jt=kt[Vt];typeof qt[$t]=="string"&&(Jt=rr.call(this,qt[$t])),Qt.call(this,qt.$anchor),Qt.call(this,qt.$dynamicAnchor),kt[Kt]=Jt;function rr(Wt){const nr=this.opts.uriResolver.resolve;if(Wt=normalizeId(Jt?nr(Jt,Wt):Wt),Lt.has(Wt))throw Nt(Wt);Lt.add(Wt);let yr=this.refs[Wt];return typeof yr=="string"&&(yr=this.refs[yr]),typeof yr=="object"?Ut(qt,yr.schema,Wt):Wt!==normalizeId(Ht)&&(Wt[0]==="#"?(Ut(qt,jt[Wt],Wt),jt[Wt]=qt):this.refs[Wt]=Ht),Wt}function Qt(Wt){if(typeof Wt=="string"){if(!ANCHOR.test(Wt))throw new Error(`invalid anchor "${Wt}"`);rr.call(this,`#${Wt}`)}}}),jt;function Ut(qt,Kt,zt){if(Kt!==void 0&&!equal$2(qt,Kt))throw Nt(zt)}function Nt(qt){return new Error(`reference "${qt}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults,keyword_1=keyword,subschema_1=subschema,codegen_1$r=codegen,names_1$6=names$1,resolve_1$2=resolve$1,util_1$p=util$1,errors_1=errors$1;function validateFunctionCode(_t){if(isSchemaObj(_t)&&(checkKeywords(_t),schemaCxtHasRules(_t))){topSchemaObjCode(_t);return}validateFunction$3(_t,()=>(0,boolSchema_1.topBoolOrEmptySchema)(_t))}validate.validateFunctionCode=validateFunctionCode;function validateFunction$3({gen:_t,validateName:e,schema:$t,schemaEnv:xt,opts:At},kt){At.code.es5?_t.func(e,(0,codegen_1$r._)`${names_1$6.default.data}, ${names_1$6.default.valCxt}`,xt.$async,()=>{_t.code((0,codegen_1$r._)`"use strict"; ${funcSourceUrl($t,At)}`),destructureValCxtES5(_t,At),_t.code(kt)}):_t.func(e,(0,codegen_1$r._)`${names_1$6.default.data}, ${destructureValCxt(At)}`,xt.$async,()=>_t.code(funcSourceUrl($t,At)).code(kt))}function destructureValCxt(_t){return(0,codegen_1$r._)`{${names_1$6.default.instancePath}="", ${names_1$6.default.parentData}, ${names_1$6.default.parentDataProperty}, ${names_1$6.default.rootData}=${names_1$6.default.data}${_t.dynamicRef?(0,codegen_1$r._)`, ${names_1$6.default.dynamicAnchors}={}`:codegen_1$r.nil}}={}`}function destructureValCxtES5(_t,e){_t.if(names_1$6.default.valCxt,()=>{_t.var(names_1$6.default.instancePath,(0,codegen_1$r._)`${names_1$6.default.valCxt}.${names_1$6.default.instancePath}`),_t.var(names_1$6.default.parentData,(0,codegen_1$r._)`${names_1$6.default.valCxt}.${names_1$6.default.parentData}`),_t.var(names_1$6.default.parentDataProperty,(0,codegen_1$r._)`${names_1$6.default.valCxt}.${names_1$6.default.parentDataProperty}`),_t.var(names_1$6.default.rootData,(0,codegen_1$r._)`${names_1$6.default.valCxt}.${names_1$6.default.rootData}`),e.dynamicRef&&_t.var(names_1$6.default.dynamicAnchors,(0,codegen_1$r._)`${names_1$6.default.valCxt}.${names_1$6.default.dynamicAnchors}`)},()=>{_t.var(names_1$6.default.instancePath,(0,codegen_1$r._)`""`),_t.var(names_1$6.default.parentData,(0,codegen_1$r._)`undefined`),_t.var(names_1$6.default.parentDataProperty,(0,codegen_1$r._)`undefined`),_t.var(names_1$6.default.rootData,names_1$6.default.data),e.dynamicRef&&_t.var(names_1$6.default.dynamicAnchors,(0,codegen_1$r._)`{}`)})}function topSchemaObjCode(_t){const{schema:e,opts:$t,gen:xt}=_t;validateFunction$3(_t,()=>{$t.$comment&&e.$comment&&commentKeyword(_t),checkNoDefault(_t),xt.let(names_1$6.default.vErrors,null),xt.let(names_1$6.default.errors,0),$t.unevaluated&&resetEvaluated(_t),typeAndKeywords(_t),returnResults(_t)})}function resetEvaluated(_t){const{gen:e,validateName:$t}=_t;_t.evaluated=e.const("evaluated",(0,codegen_1$r._)`${$t}.evaluated`),e.if((0,codegen_1$r._)`${_t.evaluated}.dynamicProps`,()=>e.assign((0,codegen_1$r._)`${_t.evaluated}.props`,(0,codegen_1$r._)`undefined`)),e.if((0,codegen_1$r._)`${_t.evaluated}.dynamicItems`,()=>e.assign((0,codegen_1$r._)`${_t.evaluated}.items`,(0,codegen_1$r._)`undefined`))}function funcSourceUrl(_t,e){const $t=typeof _t=="object"&&_t[e.schemaId];return $t&&(e.code.source||e.code.process)?(0,codegen_1$r._)`/*# sourceURL=${$t} */`:codegen_1$r.nil}function subschemaCode(_t,e){if(isSchemaObj(_t)&&(checkKeywords(_t),schemaCxtHasRules(_t))){subSchemaObjCode(_t,e);return}(0,boolSchema_1.boolOrEmptySchema)(_t,e)}function schemaCxtHasRules({schema:_t,self:e}){if(typeof _t=="boolean")return!_t;for(const $t in _t)if(e.RULES.all[$t])return!0;return!1}function isSchemaObj(_t){return typeof _t.schema!="boolean"}function subSchemaObjCode(_t,e){const{schema:$t,gen:xt,opts:At}=_t;At.$comment&&$t.$comment&&commentKeyword(_t),updateContext(_t),checkAsyncSchema(_t);const kt=xt.const("_errs",names_1$6.default.errors);typeAndKeywords(_t,kt),xt.var(e,(0,codegen_1$r._)`${kt} === ${names_1$6.default.errors}`)}function checkKeywords(_t){(0,util_1$p.checkUnknownRules)(_t),checkRefsAndKeywords(_t)}function typeAndKeywords(_t,e){if(_t.opts.jtd)return schemaKeywords(_t,[],!1,e);const $t=(0,dataType_1$1.getSchemaTypes)(_t.schema),xt=(0,dataType_1$1.coerceAndCheckDataType)(_t,$t);schemaKeywords(_t,$t,!xt,e)}function checkRefsAndKeywords(_t){const{schema:e,errSchemaPath:$t,opts:xt,self:At}=_t;e.$ref&&xt.ignoreKeywordsWithRef&&(0,util_1$p.schemaHasRulesButRef)(e,At.RULES)&&At.logger.warn(`$ref: keywords ignored in schema at path "${$t}"`)}function checkNoDefault(_t){const{schema:e,opts:$t}=_t;e.default!==void 0&&$t.useDefaults&&$t.strictSchema&&(0,util_1$p.checkStrictMode)(_t,"default is ignored in the schema root")}function updateContext(_t){const e=_t.schema[_t.opts.schemaId];e&&(_t.baseId=(0,resolve_1$2.resolveUrl)(_t.opts.uriResolver,_t.baseId,e))}function checkAsyncSchema(_t){if(_t.schema.$async&&!_t.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:_t,schemaEnv:e,schema:$t,errSchemaPath:xt,opts:At}){const kt=$t.$comment;if(At.$comment===!0)_t.code((0,codegen_1$r._)`${names_1$6.default.self}.logger.log(${kt})`);else if(typeof At.$comment=="function"){const Bt=(0,codegen_1$r.str)`${xt}/$comment`,jt=_t.scopeValue("root",{ref:e.root});_t.code((0,codegen_1$r._)`${names_1$6.default.self}.opts.$comment(${kt}, ${Bt}, ${jt}.schema)`)}}function returnResults(_t){const{gen:e,schemaEnv:$t,validateName:xt,ValidationError:At,opts:kt}=_t;$t.$async?e.if((0,codegen_1$r._)`${names_1$6.default.errors} === 0`,()=>e.return(names_1$6.default.data),()=>e.throw((0,codegen_1$r._)`new ${At}(${names_1$6.default.vErrors})`)):(e.assign((0,codegen_1$r._)`${xt}.errors`,names_1$6.default.vErrors),kt.unevaluated&&assignEvaluated(_t),e.return((0,codegen_1$r._)`${names_1$6.default.errors} === 0`))}function assignEvaluated({gen:_t,evaluated:e,props:$t,items:xt}){$t instanceof codegen_1$r.Name&&_t.assign((0,codegen_1$r._)`${e}.props`,$t),xt instanceof codegen_1$r.Name&&_t.assign((0,codegen_1$r._)`${e}.items`,xt)}function schemaKeywords(_t,e,$t,xt){const{gen:At,schema:kt,data:Bt,allErrors:jt,opts:Lt,self:Ut}=_t,{RULES:Nt}=Ut;if(kt.$ref&&(Lt.ignoreKeywordsWithRef||!(0,util_1$p.schemaHasRulesButRef)(kt,Nt))){At.block(()=>keywordCode(_t,"$ref",Nt.all.$ref.definition));return}Lt.jtd||checkStrictTypes(_t,e),At.block(()=>{for(const Kt of Nt.rules)qt(Kt);qt(Nt.post)});function qt(Kt){(0,applicability_1.shouldUseGroup)(kt,Kt)&&(Kt.type?(At.if((0,dataType_2.checkDataType)(Kt.type,Bt,Lt.strictNumbers)),iterateKeywords(_t,Kt),e.length===1&&e[0]===Kt.type&&$t&&(At.else(),(0,dataType_2.reportTypeError)(_t)),At.endIf()):iterateKeywords(_t,Kt),jt||At.if((0,codegen_1$r._)`${names_1$6.default.errors} === ${xt||0}`))}}function iterateKeywords(_t,e){const{gen:$t,schema:xt,opts:{useDefaults:At}}=_t;At&&(0,defaults_1.assignDefaults)(_t,e.type),$t.block(()=>{for(const kt of e.rules)(0,applicability_1.shouldUseRule)(xt,kt)&&keywordCode(_t,kt.keyword,kt.definition,e.type)})}function checkStrictTypes(_t,e){_t.schemaEnv.meta||!_t.opts.strictTypes||(checkContextTypes(_t,e),_t.opts.allowUnionTypes||checkMultipleTypes(_t,e),checkKeywordTypes(_t,_t.dataTypes))}function checkContextTypes(_t,e){if(e.length){if(!_t.dataTypes.length){_t.dataTypes=e;return}e.forEach($t=>{includesType(_t.dataTypes,$t)||strictTypesError(_t,`type "${$t}" not allowed by context "${_t.dataTypes.join(",")}"`)}),narrowSchemaTypes(_t,e)}}function checkMultipleTypes(_t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&strictTypesError(_t,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(_t,e){const $t=_t.self.RULES.all;for(const xt in $t){const At=$t[xt];if(typeof At=="object"&&(0,applicability_1.shouldUseRule)(_t.schema,At)){const{type:kt}=At.definition;kt.length&&!kt.some(Bt=>hasApplicableType(e,Bt))&&strictTypesError(_t,`missing type "${kt.join(",")}" for keyword "${xt}"`)}}}function hasApplicableType(_t,e){return _t.includes(e)||e==="number"&&_t.includes("integer")}function includesType(_t,e){return _t.includes(e)||e==="integer"&&_t.includes("number")}function narrowSchemaTypes(_t,e){const $t=[];for(const xt of _t.dataTypes)includesType(e,xt)?$t.push(xt):e.includes("integer")&&xt==="number"&&$t.push("integer");_t.dataTypes=$t}function strictTypesError(_t,e){const $t=_t.schemaEnv.baseId+_t.errSchemaPath;e+=` at "${$t}" (strictTypes)`,(0,util_1$p.checkStrictMode)(_t,e,_t.opts.strictTypes)}class KeywordCxt{constructor(e,$t,xt){if((0,keyword_1.validateKeywordUsage)(e,$t,xt),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=xt,this.data=e.data,this.schema=e.schema[xt],this.$data=$t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$p.schemaRefOrVal)(e,this.schema,xt,this.$data),this.schemaType=$t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=$t,this.$data)this.schemaCode=e.gen.const("vSchema",getData(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,$t.schemaType,$t.allowUndefined))throw new Error(`${xt} value must be ${JSON.stringify($t.schemaType)}`);("code"in $t?$t.trackErrors:$t.errors!==!1)&&(this.errsCount=e.gen.const("_errs",names_1$6.default.errors))}result(e,$t,xt){this.failResult((0,codegen_1$r.not)(e),$t,xt)}failResult(e,$t,xt){this.gen.if(e),xt?xt():this.error(),$t?(this.gen.else(),$t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,$t){this.failResult((0,codegen_1$r.not)(e),void 0,$t)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:$t}=this;this.fail((0,codegen_1$r._)`${$t} !== undefined && (${(0,codegen_1$r.or)(this.invalid$data(),e)})`)}error(e,$t,xt){if($t){this.setParams($t),this._error(e,xt),this.setParams({});return}this._error(e,xt)}_error(e,$t){(e?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,$t)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,$t){$t?Object.assign(this.params,e):this.params=e}block$data(e,$t,xt=codegen_1$r.nil){this.gen.block(()=>{this.check$data(e,xt),$t()})}check$data(e=codegen_1$r.nil,$t=codegen_1$r.nil){if(!this.$data)return;const{gen:xt,schemaCode:At,schemaType:kt,def:Bt}=this;xt.if((0,codegen_1$r.or)((0,codegen_1$r._)`${At} === undefined`,$t)),e!==codegen_1$r.nil&&xt.assign(e,!0),(kt.length||Bt.validateSchema)&&(xt.elseIf(this.invalid$data()),this.$dataError(),e!==codegen_1$r.nil&&xt.assign(e,!1)),xt.else()}invalid$data(){const{gen:e,schemaCode:$t,schemaType:xt,def:At,it:kt}=this;return(0,codegen_1$r.or)(Bt(),jt());function Bt(){if(xt.length){if(!($t instanceof codegen_1$r.Name))throw new Error("ajv implementation error");const Lt=Array.isArray(xt)?xt:[xt];return(0,codegen_1$r._)`${(0,dataType_2.checkDataTypes)(Lt,$t,kt.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$r.nil}function jt(){if(At.validateSchema){const Lt=e.scopeValue("validate$data",{ref:At.validateSchema});return(0,codegen_1$r._)`!${Lt}(${$t})`}return codegen_1$r.nil}}subschema(e,$t){const xt=(0,subschema_1.getSubschema)(this.it,e);(0,subschema_1.extendSubschemaData)(xt,this.it,e),(0,subschema_1.extendSubschemaMode)(xt,e);const At={...this.it,...xt,items:void 0,props:void 0};return subschemaCode(At,$t),At}mergeEvaluated(e,$t){const{it:xt,gen:At}=this;xt.opts.unevaluated&&(xt.props!==!0&&e.props!==void 0&&(xt.props=util_1$p.mergeEvaluated.props(At,e.props,xt.props,$t)),xt.items!==!0&&e.items!==void 0&&(xt.items=util_1$p.mergeEvaluated.items(At,e.items,xt.items,$t)))}mergeValidEvaluated(e,$t){const{it:xt,gen:At}=this;if(xt.opts.unevaluated&&(xt.props!==!0||xt.items!==!0))return At.if($t,()=>this.mergeEvaluated(e,codegen_1$r.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(_t,e,$t,xt){const At=new KeywordCxt(_t,$t,e);"code"in $t?$t.code(At,xt):At.$data&&$t.validate?(0,keyword_1.funcKeywordCode)(At,$t):"macro"in $t?(0,keyword_1.macroKeywordCode)(At,$t):($t.compile||$t.validate)&&(0,keyword_1.funcKeywordCode)(At,$t)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(_t,{dataLevel:e,dataNames:$t,dataPathArr:xt}){let At,kt;if(_t==="")return names_1$6.default.rootData;if(_t[0]==="/"){if(!JSON_POINTER.test(_t))throw new Error(`Invalid JSON-pointer: ${_t}`);At=_t,kt=names_1$6.default.rootData}else{const Ut=RELATIVE_JSON_POINTER.exec(_t);if(!Ut)throw new Error(`Invalid JSON-pointer: ${_t}`);const Nt=+Ut[1];if(At=Ut[2],At==="#"){if(Nt>=e)throw new Error(Lt("property/index",Nt));return xt[e-Nt]}if(Nt>e)throw new Error(Lt("data",Nt));if(kt=$t[e-Nt],!At)return kt}let Bt=kt;const jt=At.split("/");for(const Ut of jt)Ut&&(kt=(0,codegen_1$r._)`${kt}${(0,codegen_1$r.getProperty)((0,util_1$p.unescapeJsonPointer)(Ut))}`,Bt=(0,codegen_1$r._)`${Bt} && ${kt}`);return Bt;function Lt(Ut,Nt){return`Cannot access ${Ut} ${Nt} levels up, current level is ${e}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(e,$t,xt,At){super(At||`can't resolve reference ${xt} from id ${$t}`),this.missingRef=(0,resolve_1$1.resolveUrl)(e,$t,xt),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(e,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$q=codegen,validation_error_1=validation_error,names_1$5=names$1,resolve_1=resolve$1,util_1$o=util$1,validate_1$1=validate;class SchemaEnv{constructor(e){var $t;this.refs={},this.dynamicAnchors={};let xt;typeof e.schema=="object"&&(xt=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=($t=e.baseId)!==null&&$t!==void 0?$t:(0,resolve_1.normalizeId)(xt==null?void 0:xt[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=xt==null?void 0:xt.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(_t){const e=getCompilingSchema.call(this,_t);if(e)return e;const $t=(0,resolve_1.getFullPath)(this.opts.uriResolver,_t.root.baseId),{es5:xt,lines:At}=this.opts.code,{ownProperties:kt}=this.opts,Bt=new codegen_1$q.CodeGen(this.scope,{es5:xt,lines:At,ownProperties:kt});let jt;_t.$async&&(jt=Bt.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$q._)`require("ajv/dist/runtime/validation_error").default`}));const Lt=Bt.scopeName("validate");_t.validateName=Lt;const Ut={gen:Bt,allErrors:this.opts.allErrors,data:names_1$5.default.data,parentData:names_1$5.default.parentData,parentDataProperty:names_1$5.default.parentDataProperty,dataNames:[names_1$5.default.data],dataPathArr:[codegen_1$q.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:Bt.scopeValue("schema",this.opts.code.source===!0?{ref:_t.schema,code:(0,codegen_1$q.stringify)(_t.schema)}:{ref:_t.schema}),validateName:Lt,ValidationError:jt,schema:_t.schema,schemaEnv:_t,rootId:$t,baseId:_t.baseId||$t,schemaPath:codegen_1$q.nil,errSchemaPath:_t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$q._)`""`,opts:this.opts,self:this};let Nt;try{this._compilations.add(_t),(0,validate_1$1.validateFunctionCode)(Ut),Bt.optimize(this.opts.code.optimize);const qt=Bt.toString();Nt=`${Bt.scopeRefs(names_1$5.default.scope)}return ${qt}`,this.opts.code.process&&(Nt=this.opts.code.process(Nt,_t));const zt=new Function(`${names_1$5.default.self}`,`${names_1$5.default.scope}`,Nt)(this,this.scope.get());if(this.scope.value(Lt,{ref:zt}),zt.errors=null,zt.schema=_t.schema,zt.schemaEnv=_t,_t.$async&&(zt.$async=!0),this.opts.code.source===!0&&(zt.source={validateName:Lt,validateCode:qt,scopeValues:Bt._values}),this.opts.unevaluated){const{props:Vt,items:Ht}=Ut;zt.evaluated={props:Vt instanceof codegen_1$q.Name?void 0:Vt,items:Ht instanceof codegen_1$q.Name?void 0:Ht,dynamicProps:Vt instanceof codegen_1$q.Name,dynamicItems:Ht instanceof codegen_1$q.Name},zt.source&&(zt.source.evaluated=(0,codegen_1$q.stringify)(zt.evaluated))}return _t.validate=zt,_t}catch(qt){throw delete _t.validate,delete _t.validateName,Nt&&this.logger.error("Error compiling schema, function code:",Nt),qt}finally{this._compilations.delete(_t)}}compile.compileSchema=compileSchema;function resolveRef(_t,e,$t){var xt;$t=(0,resolve_1.resolveUrl)(this.opts.uriResolver,e,$t);const At=_t.refs[$t];if(At)return At;let kt=resolve.call(this,_t,$t);if(kt===void 0){const Bt=(xt=_t.localRefs)===null||xt===void 0?void 0:xt[$t],{schemaId:jt}=this.opts;Bt&&(kt=new SchemaEnv({schema:Bt,schemaId:jt,root:_t,baseId:e}))}if(kt!==void 0)return _t.refs[$t]=inlineOrCompile.call(this,kt)}compile.resolveRef=resolveRef;function inlineOrCompile(_t){return(0,resolve_1.inlineRef)(_t.schema,this.opts.inlineRefs)?_t.schema:_t.validate?_t:compileSchema.call(this,_t)}function getCompilingSchema(_t){for(const e of this._compilations)if(sameSchemaEnv(e,_t))return e}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(_t,e){return _t.schema===e.schema&&_t.root===e.root&&_t.baseId===e.baseId}function resolve(_t,e){let $t;for(;typeof($t=this.refs[e])=="string";)e=$t;return $t||this.schemas[e]||resolveSchema.call(this,_t,e)}function resolveSchema(_t,e){const $t=this.opts.uriResolver.parse(e),xt=(0,resolve_1._getFullPath)(this.opts.uriResolver,$t);let At=(0,resolve_1.getFullPath)(this.opts.uriResolver,_t.baseId,void 0);if(Object.keys(_t.schema).length>0&&xt===At)return getJsonPointer.call(this,$t,_t);const kt=(0,resolve_1.normalizeId)(xt),Bt=this.refs[kt]||this.schemas[kt];if(typeof Bt=="string"){const jt=resolveSchema.call(this,_t,Bt);return typeof(jt==null?void 0:jt.schema)!="object"?void 0:getJsonPointer.call(this,$t,jt)}if(typeof(Bt==null?void 0:Bt.schema)=="object"){if(Bt.validate||compileSchema.call(this,Bt),kt===(0,resolve_1.normalizeId)(e)){const{schema:jt}=Bt,{schemaId:Lt}=this.opts,Ut=jt[Lt];return Ut&&(At=(0,resolve_1.resolveUrl)(this.opts.uriResolver,At,Ut)),new SchemaEnv({schema:jt,schemaId:Lt,root:_t,baseId:At})}return getJsonPointer.call(this,$t,Bt)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(_t,{baseId:e,schema:$t,root:xt}){var At;if(((At=_t.fragment)===null||At===void 0?void 0:At[0])!=="/")return;for(const jt of _t.fragment.slice(1).split("/")){if(typeof $t=="boolean")return;const Lt=$t[(0,util_1$o.unescapeFragment)(jt)];if(Lt===void 0)return;$t=Lt;const Ut=typeof $t=="object"&&$t[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(jt)&&Ut&&(e=(0,resolve_1.resolveUrl)(this.opts.uriResolver,e,Ut))}let kt;if(typeof $t!="boolean"&&$t.$ref&&!(0,util_1$o.schemaHasRulesButRef)($t,this.RULES)){const jt=(0,resolve_1.resolveUrl)(this.opts.uriResolver,e,$t.$ref);kt=resolveSchema.call(this,xt,jt)}const{schemaId:Bt}=this.opts;if(kt=kt||new SchemaEnv({schema:$t,schemaId:Bt,root:xt,baseId:e}),kt.schema!==kt.root.schema)return kt}const $id$8="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$8="object",required$1=["$data"],properties$9={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$8,description,type:type$8,required:required$1,properties:properties$9,additionalProperties:additionalProperties$1};var uri$1={},uri_all={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(_t,e){(function($t,xt){xt(e)})(commonjsGlobal,function($t){function xt(){for(var Wr=arguments.length,Hr=Array(Wr),Yr=0;Yr<Wr;Yr++)Hr[Yr]=arguments[Yr];if(Hr.length>1){Hr[0]=Hr[0].slice(0,-1);for(var Qr=Hr.length-1,rn=1;rn<Qr;++rn)Hr[rn]=Hr[rn].slice(1,-1);return Hr[Qr]=Hr[Qr].slice(1),Hr.join("")}else return Hr[0]}function At(Wr){return"(?:"+Wr+")"}function kt(Wr){return Wr===void 0?"undefined":Wr===null?"null":Object.prototype.toString.call(Wr).split(" ").pop().split("]").shift().toLowerCase()}function Bt(Wr){return Wr.toUpperCase()}function jt(Wr){return Wr!=null?Wr instanceof Array?Wr:typeof Wr.length!="number"||Wr.split||Wr.setInterval||Wr.call?[Wr]:Array.prototype.slice.call(Wr):[]}function Lt(Wr,Hr){var Yr=Wr;if(Hr)for(var Qr in Hr)Yr[Qr]=Hr[Qr];return Yr}function Ut(Wr){var Hr="[A-Za-z]",Yr="[0-9]",Qr=xt(Yr,"[A-Fa-f]"),rn=At(At("%[EFef]"+Qr+"%"+Qr+Qr+"%"+Qr+Qr)+"|"+At("%[89A-Fa-f]"+Qr+"%"+Qr+Qr)+"|"+At("%"+Qr+Qr)),fn="[\\:\\/\\?\\#\\[\\]\\@]",ln="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",mn=xt(fn,ln),wn=Wr?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",_n=Wr?"[\\uE000-\\uF8FF]":"[]",$n=xt(Hr,Yr,"[\\-\\.\\_\\~]",wn);At(Hr+xt(Hr,Yr,"[\\+\\-\\.]")+"*"),At(At(rn+"|"+xt($n,ln,"[\\:]"))+"*");var xn=At(At("25[0-5]")+"|"+At("2[0-4]"+Yr)+"|"+At("1"+Yr+Yr)+"|"+At("0?[1-9]"+Yr)+"|0?0?"+Yr),Un=At(xn+"\\."+xn+"\\."+xn+"\\."+xn),Sn=At(Qr+"{1,4}"),jn=At(At(Sn+"\\:"+Sn)+"|"+Un),Gn=At(At(Sn+"\\:")+"{6}"+jn),Nn=At("\\:\\:"+At(Sn+"\\:")+"{5}"+jn),Vn=At(At(Sn)+"?\\:\\:"+At(Sn+"\\:")+"{4}"+jn),qn=At(At(At(Sn+"\\:")+"{0,1}"+Sn)+"?\\:\\:"+At(Sn+"\\:")+"{3}"+jn),Kn=At(At(At(Sn+"\\:")+"{0,2}"+Sn)+"?\\:\\:"+At(Sn+"\\:")+"{2}"+jn),Xn=At(At(At(Sn+"\\:")+"{0,3}"+Sn)+"?\\:\\:"+Sn+"\\:"+jn),Zn=At(At(At(Sn+"\\:")+"{0,4}"+Sn)+"?\\:\\:"+jn),Fn=At(At(At(Sn+"\\:")+"{0,5}"+Sn)+"?\\:\\:"+Sn),zn=At(At(At(Sn+"\\:")+"{0,6}"+Sn)+"?\\:\\:"),Yn=At([Gn,Nn,Vn,qn,Kn,Xn,Zn,Fn,zn].join("|")),Hn=At(At($n+"|"+rn)+"+");At("[vV]"+Qr+"+\\."+xt($n,ln,"[\\:]")+"+"),At(At(rn+"|"+xt($n,ln))+"*");var Qn=At(rn+"|"+xt($n,ln,"[\\:\\@]"));return At(At(rn+"|"+xt($n,ln,"[\\@]"))+"+"),At(At(Qn+"|"+xt("[\\/\\?]",_n))+"*"),{NOT_SCHEME:new RegExp(xt("[^]",Hr,Yr,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(xt("[^\\%\\:]",$n,ln),"g"),NOT_HOST:new RegExp(xt("[^\\%\\[\\]\\:]",$n,ln),"g"),NOT_PATH:new RegExp(xt("[^\\%\\/\\:\\@]",$n,ln),"g"),NOT_PATH_NOSCHEME:new RegExp(xt("[^\\%\\/\\@]",$n,ln),"g"),NOT_QUERY:new RegExp(xt("[^\\%]",$n,ln,"[\\:\\@\\/\\?]",_n),"g"),NOT_FRAGMENT:new RegExp(xt("[^\\%]",$n,ln,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(xt("[^]",$n,ln),"g"),UNRESERVED:new RegExp($n,"g"),OTHER_CHARS:new RegExp(xt("[^\\%]",$n,mn),"g"),PCT_ENCODED:new RegExp(rn,"g"),IPV4ADDRESS:new RegExp("^("+Un+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Yn+")"+At(At("\\%25|\\%(?!"+Qr+"{2})")+"("+Hn+")")+"?\\]?$")}}var Nt=Ut(!1),qt=Ut(!0),Kt=function(){function Wr(Hr,Yr){var Qr=[],rn=!0,fn=!1,ln=void 0;try{for(var mn=Hr[Symbol.iterator](),wn;!(rn=(wn=mn.next()).done)&&(Qr.push(wn.value),!(Yr&&Qr.length===Yr));rn=!0);}catch(_n){fn=!0,ln=_n}finally{try{!rn&&mn.return&&mn.return()}finally{if(fn)throw ln}}return Qr}return function(Hr,Yr){if(Array.isArray(Hr))return Hr;if(Symbol.iterator in Object(Hr))return Wr(Hr,Yr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),zt=function(Wr){if(Array.isArray(Wr)){for(var Hr=0,Yr=Array(Wr.length);Hr<Wr.length;Hr++)Yr[Hr]=Wr[Hr];return Yr}else return Array.from(Wr)},Vt=2147483647,Ht=36,Jt=1,rr=26,Qt=38,Wt=700,nr=72,yr=128,vr="-",Ir=/^xn--/,xr=/[^\0-\x7E]/,Or=/[\x2E\u3002\uFF0E\uFF61]/g,Nr={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},kr=Ht-Jt,lr=Math.floor,ir=String.fromCharCode;function Xt(Wr){throw new RangeError(Nr[Wr])}function er(Wr,Hr){for(var Yr=[],Qr=Wr.length;Qr--;)Yr[Qr]=Hr(Wr[Qr]);return Yr}function pr(Wr,Hr){var Yr=Wr.split("@"),Qr="";Yr.length>1&&(Qr=Yr[0]+"@",Wr=Yr[1]),Wr=Wr.replace(Or,".");var rn=Wr.split("."),fn=er(rn,Hr).join(".");return Qr+fn}function ur(Wr){for(var Hr=[],Yr=0,Qr=Wr.length;Yr<Qr;){var rn=Wr.charCodeAt(Yr++);if(rn>=55296&&rn<=56319&&Yr<Qr){var fn=Wr.charCodeAt(Yr++);(fn&64512)==56320?Hr.push(((rn&1023)<<10)+(fn&1023)+65536):(Hr.push(rn),Yr--)}else Hr.push(rn)}return Hr}var gr=function(Hr){return String.fromCodePoint.apply(String,zt(Hr))},ar=function(Hr){return Hr-48<10?Hr-22:Hr-65<26?Hr-65:Hr-97<26?Hr-97:Ht},tr=function(Hr,Yr){return Hr+22+75*(Hr<26)-((Yr!=0)<<5)},dr=function(Hr,Yr,Qr){var rn=0;for(Hr=Qr?lr(Hr/Wt):Hr>>1,Hr+=lr(Hr/Yr);Hr>kr*rr>>1;rn+=Ht)Hr=lr(Hr/kr);return lr(rn+(kr+1)*Hr/(Hr+Qt))},fr=function(Hr){var Yr=[],Qr=Hr.length,rn=0,fn=yr,ln=nr,mn=Hr.lastIndexOf(vr);mn<0&&(mn=0);for(var wn=0;wn<mn;++wn)Hr.charCodeAt(wn)>=128&&Xt("not-basic"),Yr.push(Hr.charCodeAt(wn));for(var _n=mn>0?mn+1:0;_n<Qr;){for(var $n=rn,xn=1,Un=Ht;;Un+=Ht){_n>=Qr&&Xt("invalid-input");var Sn=ar(Hr.charCodeAt(_n++));(Sn>=Ht||Sn>lr((Vt-rn)/xn))&&Xt("overflow"),rn+=Sn*xn;var jn=Un<=ln?Jt:Un>=ln+rr?rr:Un-ln;if(Sn<jn)break;var Gn=Ht-jn;xn>lr(Vt/Gn)&&Xt("overflow"),xn*=Gn}var Nn=Yr.length+1;ln=dr(rn-$n,Nn,$n==0),lr(rn/Nn)>Vt-fn&&Xt("overflow"),fn+=lr(rn/Nn),rn%=Nn,Yr.splice(rn++,0,fn)}return String.fromCodePoint.apply(String,Yr)},br=function(Hr){var Yr=[];Hr=ur(Hr);var Qr=Hr.length,rn=yr,fn=0,ln=nr,mn=!0,wn=!1,_n=void 0;try{for(var $n=Hr[Symbol.iterator](),xn;!(mn=(xn=$n.next()).done);mn=!0){var Un=xn.value;Un<128&&Yr.push(ir(Un))}}catch(ai){wn=!0,_n=ai}finally{try{!mn&&$n.return&&$n.return()}finally{if(wn)throw _n}}var Sn=Yr.length,jn=Sn;for(Sn&&Yr.push(vr);jn<Qr;){var Gn=Vt,Nn=!0,Vn=!1,qn=void 0;try{for(var Kn=Hr[Symbol.iterator](),Xn;!(Nn=(Xn=Kn.next()).done);Nn=!0){var Zn=Xn.value;Zn>=rn&&Zn<Gn&&(Gn=Zn)}}catch(ai){Vn=!0,qn=ai}finally{try{!Nn&&Kn.return&&Kn.return()}finally{if(Vn)throw qn}}var Fn=jn+1;Gn-rn>lr((Vt-fn)/Fn)&&Xt("overflow"),fn+=(Gn-rn)*Fn,rn=Gn;var zn=!0,Yn=!1,Hn=void 0;try{for(var Qn=Hr[Symbol.iterator](),ni;!(zn=(ni=Qn.next()).done);zn=!0){var ii=ni.value;if(ii<rn&&++fn>Vt&&Xt("overflow"),ii==rn){for(var ci=fn,di=Ht;;di+=Ht){var li=di<=ln?Jt:di>=ln+rr?rr:di-ln;if(ci<li)break;var hi=ci-li,pi=Ht-li;Yr.push(ir(tr(li+hi%pi,0))),ci=lr(hi/pi)}Yr.push(ir(tr(ci,0))),ln=dr(fn,Fn,jn==Sn),fn=0,++jn}}}catch(ai){Yn=!0,Hn=ai}finally{try{!zn&&Qn.return&&Qn.return()}finally{if(Yn)throw Hn}}++fn,++rn}return Yr.join("")},Sr=function(Hr){return pr(Hr,function(Yr){return Ir.test(Yr)?fr(Yr.slice(4).toLowerCase()):Yr})},Dr=function(Hr){return pr(Hr,function(Yr){return xr.test(Yr)?"xn--"+br(Yr):Yr})},Er={version:"2.1.0",ucs2:{decode:ur,encode:gr},decode:fr,encode:br,toASCII:Dr,toUnicode:Sr},wr={};function Tr(Wr){var Hr=Wr.charCodeAt(0),Yr=void 0;return Hr<16?Yr="%0"+Hr.toString(16).toUpperCase():Hr<128?Yr="%"+Hr.toString(16).toUpperCase():Hr<2048?Yr="%"+(Hr>>6|192).toString(16).toUpperCase()+"%"+(Hr&63|128).toString(16).toUpperCase():Yr="%"+(Hr>>12|224).toString(16).toUpperCase()+"%"+(Hr>>6&63|128).toString(16).toUpperCase()+"%"+(Hr&63|128).toString(16).toUpperCase(),Yr}function Mr(Wr){for(var Hr="",Yr=0,Qr=Wr.length;Yr<Qr;){var rn=parseInt(Wr.substr(Yr+1,2),16);if(rn<128)Hr+=String.fromCharCode(rn),Yr+=3;else if(rn>=194&&rn<224){if(Qr-Yr>=6){var fn=parseInt(Wr.substr(Yr+4,2),16);Hr+=String.fromCharCode((rn&31)<<6|fn&63)}else Hr+=Wr.substr(Yr,6);Yr+=6}else if(rn>=224){if(Qr-Yr>=9){var ln=parseInt(Wr.substr(Yr+4,2),16),mn=parseInt(Wr.substr(Yr+7,2),16);Hr+=String.fromCharCode((rn&15)<<12|(ln&63)<<6|mn&63)}else Hr+=Wr.substr(Yr,9);Yr+=9}else Hr+=Wr.substr(Yr,3),Yr+=3}return Hr}function Lr(Wr,Hr){function Yr(Qr){var rn=Mr(Qr);return rn.match(Hr.UNRESERVED)?rn:Qr}return Wr.scheme&&(Wr.scheme=String(Wr.scheme).replace(Hr.PCT_ENCODED,Yr).toLowerCase().replace(Hr.NOT_SCHEME,"")),Wr.userinfo!==void 0&&(Wr.userinfo=String(Wr.userinfo).replace(Hr.PCT_ENCODED,Yr).replace(Hr.NOT_USERINFO,Tr).replace(Hr.PCT_ENCODED,Bt)),Wr.host!==void 0&&(Wr.host=String(Wr.host).replace(Hr.PCT_ENCODED,Yr).toLowerCase().replace(Hr.NOT_HOST,Tr).replace(Hr.PCT_ENCODED,Bt)),Wr.path!==void 0&&(Wr.path=String(Wr.path).replace(Hr.PCT_ENCODED,Yr).replace(Wr.scheme?Hr.NOT_PATH:Hr.NOT_PATH_NOSCHEME,Tr).replace(Hr.PCT_ENCODED,Bt)),Wr.query!==void 0&&(Wr.query=String(Wr.query).replace(Hr.PCT_ENCODED,Yr).replace(Hr.NOT_QUERY,Tr).replace(Hr.PCT_ENCODED,Bt)),Wr.fragment!==void 0&&(Wr.fragment=String(Wr.fragment).replace(Hr.PCT_ENCODED,Yr).replace(Hr.NOT_FRAGMENT,Tr).replace(Hr.PCT_ENCODED,Bt)),Wr}function Cr(Wr){return Wr.replace(/^0*(.*)/,"$1")||"0"}function Br(Wr,Hr){var Yr=Wr.match(Hr.IPV4ADDRESS)||[],Qr=Kt(Yr,2),rn=Qr[1];return rn?rn.split(".").map(Cr).join("."):Wr}function $r(Wr,Hr){var Yr=Wr.match(Hr.IPV6ADDRESS)||[],Qr=Kt(Yr,3),rn=Qr[1],fn=Qr[2];if(rn){for(var ln=rn.toLowerCase().split("::").reverse(),mn=Kt(ln,2),wn=mn[0],_n=mn[1],$n=_n?_n.split(":").map(Cr):[],xn=wn.split(":").map(Cr),Un=Hr.IPV4ADDRESS.test(xn[xn.length-1]),Sn=Un?7:8,jn=xn.length-Sn,Gn=Array(Sn),Nn=0;Nn<Sn;++Nn)Gn[Nn]=$n[Nn]||xn[jn+Nn]||"";Un&&(Gn[Sn-1]=Br(Gn[Sn-1],Hr));var Vn=Gn.reduce(function(Fn,zn,Yn){if(!zn||zn==="0"){var Hn=Fn[Fn.length-1];Hn&&Hn.index+Hn.length===Yn?Hn.length++:Fn.push({index:Yn,length:1})}return Fn},[]),qn=Vn.sort(function(Fn,zn){return zn.length-Fn.length})[0],Kn=void 0;if(qn&&qn.length>1){var Xn=Gn.slice(0,qn.index),Zn=Gn.slice(qn.index+qn.length);Kn=Xn.join(":")+"::"+Zn.join(":")}else Kn=Gn.join(":");return fn&&(Kn+="%"+fn),Kn}else return Wr}var Rr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ur="".match(/(){0}/)[1]===void 0;function Pr(Wr){var Hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yr={},Qr=Hr.iri!==!1?qt:Nt;Hr.reference==="suffix"&&(Wr=(Hr.scheme?Hr.scheme+":":"")+"//"+Wr);var rn=Wr.match(Rr);if(rn){Ur?(Yr.scheme=rn[1],Yr.userinfo=rn[3],Yr.host=rn[4],Yr.port=parseInt(rn[5],10),Yr.path=rn[6]||"",Yr.query=rn[7],Yr.fragment=rn[8],isNaN(Yr.port)&&(Yr.port=rn[5])):(Yr.scheme=rn[1]||void 0,Yr.userinfo=Wr.indexOf("@")!==-1?rn[3]:void 0,Yr.host=Wr.indexOf("//")!==-1?rn[4]:void 0,Yr.port=parseInt(rn[5],10),Yr.path=rn[6]||"",Yr.query=Wr.indexOf("?")!==-1?rn[7]:void 0,Yr.fragment=Wr.indexOf("#")!==-1?rn[8]:void 0,isNaN(Yr.port)&&(Yr.port=Wr.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?rn[4]:void 0)),Yr.host&&(Yr.host=$r(Br(Yr.host,Qr),Qr)),Yr.scheme===void 0&&Yr.userinfo===void 0&&Yr.host===void 0&&Yr.port===void 0&&!Yr.path&&Yr.query===void 0?Yr.reference="same-document":Yr.scheme===void 0?Yr.reference="relative":Yr.fragment===void 0?Yr.reference="absolute":Yr.reference="uri",Hr.reference&&Hr.reference!=="suffix"&&Hr.reference!==Yr.reference&&(Yr.error=Yr.error||"URI is not a "+Hr.reference+" reference.");var fn=wr[(Hr.scheme||Yr.scheme||"").toLowerCase()];if(!Hr.unicodeSupport&&(!fn||!fn.unicodeSupport)){if(Yr.host&&(Hr.domainHost||fn&&fn.domainHost))try{Yr.host=Er.toASCII(Yr.host.replace(Qr.PCT_ENCODED,Mr).toLowerCase())}catch(ln){Yr.error=Yr.error||"Host's domain name can not be converted to ASCII via punycode: "+ln}Lr(Yr,Nt)}else Lr(Yr,Qr);fn&&fn.parse&&fn.parse(Yr,Hr)}else Yr.error=Yr.error||"URI can not be parsed.";return Yr}function _r(Wr,Hr){var Yr=Hr.iri!==!1?qt:Nt,Qr=[];return Wr.userinfo!==void 0&&(Qr.push(Wr.userinfo),Qr.push("@")),Wr.host!==void 0&&Qr.push($r(Br(String(Wr.host),Yr),Yr).replace(Yr.IPV6ADDRESS,function(rn,fn,ln){return"["+fn+(ln?"%25"+ln:"")+"]"})),(typeof Wr.port=="number"||typeof Wr.port=="string")&&(Qr.push(":"),Qr.push(String(Wr.port))),Qr.length?Qr.join(""):void 0}var Ar=/^\.\.?\//,jr=/^\/\.(\/|$)/,Kr=/^\/\.\.(\/|$)/,Zr=/^\/?(?:.|\n)*?(?=\/|$)/;function Jr(Wr){for(var Hr=[];Wr.length;)if(Wr.match(Ar))Wr=Wr.replace(Ar,"");else if(Wr.match(jr))Wr=Wr.replace(jr,"/");else if(Wr.match(Kr))Wr=Wr.replace(Kr,"/"),Hr.pop();else if(Wr==="."||Wr==="..")Wr="";else{var Yr=Wr.match(Zr);if(Yr){var Qr=Yr[0];Wr=Wr.slice(Qr.length),Hr.push(Qr)}else throw new Error("Unexpected dot segment condition")}return Hr.join("")}function nn(Wr){var Hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yr=Hr.iri?qt:Nt,Qr=[],rn=wr[(Hr.scheme||Wr.scheme||"").toLowerCase()];if(rn&&rn.serialize&&rn.serialize(Wr,Hr),Wr.host&&!Yr.IPV6ADDRESS.test(Wr.host)){if(Hr.domainHost||rn&&rn.domainHost)try{Wr.host=Hr.iri?Er.toUnicode(Wr.host):Er.toASCII(Wr.host.replace(Yr.PCT_ENCODED,Mr).toLowerCase())}catch(mn){Wr.error=Wr.error||"Host's domain name can not be converted to "+(Hr.iri?"Unicode":"ASCII")+" via punycode: "+mn}}Lr(Wr,Yr),Hr.reference!=="suffix"&&Wr.scheme&&(Qr.push(Wr.scheme),Qr.push(":"));var fn=_r(Wr,Hr);if(fn!==void 0&&(Hr.reference!=="suffix"&&Qr.push("//"),Qr.push(fn),Wr.path&&Wr.path.charAt(0)!=="/"&&Qr.push("/")),Wr.path!==void 0){var ln=Wr.path;!Hr.absolutePath&&(!rn||!rn.absolutePath)&&(ln=Jr(ln)),fn===void 0&&(ln=ln.replace(/^\/\//,"/%2F")),Qr.push(ln)}return Wr.query!==void 0&&(Qr.push("?"),Qr.push(Wr.query)),Wr.fragment!==void 0&&(Qr.push("#"),Qr.push(Wr.fragment)),Qr.join("")}function on(Wr,Hr){var Yr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qr=arguments[3],rn={};return Qr||(Wr=Pr(nn(Wr,Yr),Yr),Hr=Pr(nn(Hr,Yr),Yr)),Yr=Yr||{},!Yr.tolerant&&Hr.scheme?(rn.scheme=Hr.scheme,rn.userinfo=Hr.userinfo,rn.host=Hr.host,rn.port=Hr.port,rn.path=Jr(Hr.path||""),rn.query=Hr.query):(Hr.userinfo!==void 0||Hr.host!==void 0||Hr.port!==void 0?(rn.userinfo=Hr.userinfo,rn.host=Hr.host,rn.port=Hr.port,rn.path=Jr(Hr.path||""),rn.query=Hr.query):(Hr.path?(Hr.path.charAt(0)==="/"?rn.path=Jr(Hr.path):((Wr.userinfo!==void 0||Wr.host!==void 0||Wr.port!==void 0)&&!Wr.path?rn.path="/"+Hr.path:Wr.path?rn.path=Wr.path.slice(0,Wr.path.lastIndexOf("/")+1)+Hr.path:rn.path=Hr.path,rn.path=Jr(rn.path)),rn.query=Hr.query):(rn.path=Wr.path,Hr.query!==void 0?rn.query=Hr.query:rn.query=Wr.query),rn.userinfo=Wr.userinfo,rn.host=Wr.host,rn.port=Wr.port),rn.scheme=Wr.scheme),rn.fragment=Hr.fragment,rn}function Gr(Wr,Hr,Yr){var Qr=Lt({scheme:"null"},Yr);return nn(on(Pr(Wr,Qr),Pr(Hr,Qr),Qr,!0),Qr)}function Fr(Wr,Hr){return typeof Wr=="string"?Wr=nn(Pr(Wr,Hr),Hr):kt(Wr)==="object"&&(Wr=Pr(nn(Wr,Hr),Hr)),Wr}function Xr(Wr,Hr,Yr){return typeof Wr=="string"?Wr=nn(Pr(Wr,Yr),Yr):kt(Wr)==="object"&&(Wr=nn(Wr,Yr)),typeof Hr=="string"?Hr=nn(Pr(Hr,Yr),Yr):kt(Hr)==="object"&&(Hr=nn(Hr,Yr)),Wr===Hr}function tn(Wr,Hr){return Wr&&Wr.toString().replace(!Hr||!Hr.iri?Nt.ESCAPE:qt.ESCAPE,Tr)}function en(Wr,Hr){return Wr&&Wr.toString().replace(!Hr||!Hr.iri?Nt.PCT_ENCODED:qt.PCT_ENCODED,Mr)}var un={scheme:"http",domainHost:!0,parse:function(Hr,Yr){return Hr.host||(Hr.error=Hr.error||"HTTP URIs must have a host."),Hr},serialize:function(Hr,Yr){var Qr=String(Hr.scheme).toLowerCase()==="https";return(Hr.port===(Qr?443:80)||Hr.port==="")&&(Hr.port=void 0),Hr.path||(Hr.path="/"),Hr}},hn={scheme:"https",domainHost:un.domainHost,parse:un.parse,serialize:un.serialize};function yn(Wr){return typeof Wr.secure=="boolean"?Wr.secure:String(Wr.scheme).toLowerCase()==="wss"}var pn={scheme:"ws",domainHost:!0,parse:function(Hr,Yr){var Qr=Hr;return Qr.secure=yn(Qr),Qr.resourceName=(Qr.path||"/")+(Qr.query?"?"+Qr.query:""),Qr.path=void 0,Qr.query=void 0,Qr},serialize:function(Hr,Yr){if((Hr.port===(yn(Hr)?443:80)||Hr.port==="")&&(Hr.port=void 0),typeof Hr.secure=="boolean"&&(Hr.scheme=Hr.secure?"wss":"ws",Hr.secure=void 0),Hr.resourceName){var Qr=Hr.resourceName.split("?"),rn=Kt(Qr,2),fn=rn[0],ln=rn[1];Hr.path=fn&&fn!=="/"?fn:void 0,Hr.query=ln,Hr.resourceName=void 0}return Hr.fragment=void 0,Hr}},Dn={scheme:"wss",domainHost:pn.domainHost,parse:pn.parse,serialize:pn.serialize},An={},vn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",In="[0-9A-Fa-f]",Rn=At(At("%[EFef]"+In+"%"+In+In+"%"+In+In)+"|"+At("%[89A-Fa-f]"+In+"%"+In+In)+"|"+At("%"+In+In)),En="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",On="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Cn=xt(On,'[\\"\\\\]'),gn="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",kn=new RegExp(vn,"g"),Mn=new RegExp(Rn,"g"),Tn=new RegExp(xt("[^]",En,"[\\.]",'[\\"]',Cn),"g"),Ln=new RegExp(xt("[^]",vn,gn),"g"),qr=Ln;function Vr(Wr){var Hr=Mr(Wr);return Hr.match(kn)?Hr:Wr}var sn={scheme:"mailto",parse:function(Hr,Yr){var Qr=Hr,rn=Qr.to=Qr.path?Qr.path.split(","):[];if(Qr.path=void 0,Qr.query){for(var fn=!1,ln={},mn=Qr.query.split("&"),wn=0,_n=mn.length;wn<_n;++wn){var $n=mn[wn].split("=");switch($n[0]){case"to":for(var xn=$n[1].split(","),Un=0,Sn=xn.length;Un<Sn;++Un)rn.push(xn[Un]);break;case"subject":Qr.subject=en($n[1],Yr);break;case"body":Qr.body=en($n[1],Yr);break;default:fn=!0,ln[en($n[0],Yr)]=en($n[1],Yr);break}}fn&&(Qr.headers=ln)}Qr.query=void 0;for(var jn=0,Gn=rn.length;jn<Gn;++jn){var Nn=rn[jn].split("@");if(Nn[0]=en(Nn[0]),Yr.unicodeSupport)Nn[1]=en(Nn[1],Yr).toLowerCase();else try{Nn[1]=Er.toASCII(en(Nn[1],Yr).toLowerCase())}catch(Vn){Qr.error=Qr.error||"Email address's domain name can not be converted to ASCII via punycode: "+Vn}rn[jn]=Nn.join("@")}return Qr},serialize:function(Hr,Yr){var Qr=Hr,rn=jt(Hr.to);if(rn){for(var fn=0,ln=rn.length;fn<ln;++fn){var mn=String(rn[fn]),wn=mn.lastIndexOf("@"),_n=mn.slice(0,wn).replace(Mn,Vr).replace(Mn,Bt).replace(Tn,Tr),$n=mn.slice(wn+1);try{$n=Yr.iri?Er.toUnicode($n):Er.toASCII(en($n,Yr).toLowerCase())}catch(jn){Qr.error=Qr.error||"Email address's domain name can not be converted to "+(Yr.iri?"Unicode":"ASCII")+" via punycode: "+jn}rn[fn]=_n+"@"+$n}Qr.path=rn.join(",")}var xn=Hr.headers=Hr.headers||{};Hr.subject&&(xn.subject=Hr.subject),Hr.body&&(xn.body=Hr.body);var Un=[];for(var Sn in xn)xn[Sn]!==An[Sn]&&Un.push(Sn.replace(Mn,Vr).replace(Mn,Bt).replace(Ln,Tr)+"="+xn[Sn].replace(Mn,Vr).replace(Mn,Bt).replace(qr,Tr));return Un.length&&(Qr.query=Un.join("&")),Qr}},an=/^([^\:]+)\:(.*)/,cn={scheme:"urn",parse:function(Hr,Yr){var Qr=Hr.path&&Hr.path.match(an),rn=Hr;if(Qr){var fn=Yr.scheme||rn.scheme||"urn",ln=Qr[1].toLowerCase(),mn=Qr[2],wn=fn+":"+(Yr.nid||ln),_n=wr[wn];rn.nid=ln,rn.nss=mn,rn.path=void 0,_n&&(rn=_n.parse(rn,Yr))}else rn.error=rn.error||"URN can not be parsed.";return rn},serialize:function(Hr,Yr){var Qr=Yr.scheme||Hr.scheme||"urn",rn=Hr.nid,fn=Qr+":"+(Yr.nid||rn),ln=wr[fn];ln&&(Hr=ln.serialize(Hr,Yr));var mn=Hr,wn=Hr.nss;return mn.path=(rn||Yr.nid)+":"+wn,mn}},Pn=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Bn={scheme:"urn:uuid",parse:function(Hr,Yr){var Qr=Hr;return Qr.uuid=Qr.nss,Qr.nss=void 0,!Yr.tolerant&&(!Qr.uuid||!Qr.uuid.match(Pn))&&(Qr.error=Qr.error||"UUID is not valid."),Qr},serialize:function(Hr,Yr){var Qr=Hr;return Qr.nss=(Hr.uuid||"").toLowerCase(),Qr}};wr[un.scheme]=un,wr[hn.scheme]=hn,wr[pn.scheme]=pn,wr[Dn.scheme]=Dn,wr[sn.scheme]=sn,wr[cn.scheme]=cn,wr[Bn.scheme]=Bn,$t.SCHEMES=wr,$t.pctEncChar=Tr,$t.pctDecChars=Mr,$t.parse=Pr,$t.removeDotSegments=Jr,$t.serialize=nn,$t.resolveComponents=on,$t.resolve=Gr,$t.normalize=Fr,$t.equal=Xr,$t.escapeComponent=tn,$t.unescapeComponent=en,Object.defineProperty($t,"__esModule",{value:!0})})})(uri_all,uri_all.exports);var uri_allExports=uri_all.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_allExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.CodeGen=_t.Name=_t.nil=_t.stringify=_t.str=_t._=_t.KeywordCxt=void 0;var e=validate;Object.defineProperty(_t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var $t=codegen;Object.defineProperty(_t,"_",{enumerable:!0,get:function(){return $t._}}),Object.defineProperty(_t,"str",{enumerable:!0,get:function(){return $t.str}}),Object.defineProperty(_t,"stringify",{enumerable:!0,get:function(){return $t.stringify}}),Object.defineProperty(_t,"nil",{enumerable:!0,get:function(){return $t.nil}}),Object.defineProperty(_t,"Name",{enumerable:!0,get:function(){return $t.Name}}),Object.defineProperty(_t,"CodeGen",{enumerable:!0,get:function(){return $t.CodeGen}});const xt=validation_error,At=ref_error,kt=rules,Bt=compile,jt=codegen,Lt=resolve$1,Ut=dataType,Nt=util$1,qt=require$$9,Kt=uri$1,zt=(tr,dr)=>new RegExp(tr,dr);zt.code="new RegExp";const Vt=["removeAdditional","useDefaults","coerceTypes"],Ht=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Jt={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},rr={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Qt=200;function Wt(tr){var dr,fr,br,Sr,Dr,Er,wr,Tr,Mr,Lr,Cr,Br,$r,Rr,Ur,Pr,_r,Ar,jr,Kr,Zr,Jr,nn,on,Gr;const Fr=tr.strict,Xr=(dr=tr.code)===null||dr===void 0?void 0:dr.optimize,tn=Xr===!0||Xr===void 0?1:Xr||0,en=(br=(fr=tr.code)===null||fr===void 0?void 0:fr.regExp)!==null&&br!==void 0?br:zt,un=(Sr=tr.uriResolver)!==null&&Sr!==void 0?Sr:Kt.default;return{strictSchema:(Er=(Dr=tr.strictSchema)!==null&&Dr!==void 0?Dr:Fr)!==null&&Er!==void 0?Er:!0,strictNumbers:(Tr=(wr=tr.strictNumbers)!==null&&wr!==void 0?wr:Fr)!==null&&Tr!==void 0?Tr:!0,strictTypes:(Lr=(Mr=tr.strictTypes)!==null&&Mr!==void 0?Mr:Fr)!==null&&Lr!==void 0?Lr:"log",strictTuples:(Br=(Cr=tr.strictTuples)!==null&&Cr!==void 0?Cr:Fr)!==null&&Br!==void 0?Br:"log",strictRequired:(Rr=($r=tr.strictRequired)!==null&&$r!==void 0?$r:Fr)!==null&&Rr!==void 0?Rr:!1,code:tr.code?{...tr.code,optimize:tn,regExp:en}:{optimize:tn,regExp:en},loopRequired:(Ur=tr.loopRequired)!==null&&Ur!==void 0?Ur:Qt,loopEnum:(Pr=tr.loopEnum)!==null&&Pr!==void 0?Pr:Qt,meta:(_r=tr.meta)!==null&&_r!==void 0?_r:!0,messages:(Ar=tr.messages)!==null&&Ar!==void 0?Ar:!0,inlineRefs:(jr=tr.inlineRefs)!==null&&jr!==void 0?jr:!0,schemaId:(Kr=tr.schemaId)!==null&&Kr!==void 0?Kr:"$id",addUsedSchema:(Zr=tr.addUsedSchema)!==null&&Zr!==void 0?Zr:!0,validateSchema:(Jr=tr.validateSchema)!==null&&Jr!==void 0?Jr:!0,validateFormats:(nn=tr.validateFormats)!==null&&nn!==void 0?nn:!0,unicodeRegExp:(on=tr.unicodeRegExp)!==null&&on!==void 0?on:!0,int32range:(Gr=tr.int32range)!==null&&Gr!==void 0?Gr:!0,uriResolver:un}}class nr{constructor(dr={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,dr=this.opts={...dr,...Wt(dr)};const{es5:fr,lines:br}=this.opts.code;this.scope=new jt.ValueScope({scope:{},prefixes:Ht,es5:fr,lines:br}),this.logger=lr(dr.logger);const Sr=dr.validateFormats;dr.validateFormats=!1,this.RULES=(0,kt.getRules)(),yr.call(this,Jt,dr,"NOT SUPPORTED"),yr.call(this,rr,dr,"DEPRECATED","warn"),this._metaOpts=Nr.call(this),dr.formats&&xr.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),dr.keywords&&Or.call(this,dr.keywords),typeof dr.meta=="object"&&this.addMetaSchema(dr.meta),Ir.call(this),dr.validateFormats=Sr}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:dr,meta:fr,schemaId:br}=this.opts;let Sr=qt;br==="id"&&(Sr={...qt},Sr.id=Sr.$id,delete Sr.$id),fr&&dr&&this.addMetaSchema(Sr,Sr[br],!1)}defaultMeta(){const{meta:dr,schemaId:fr}=this.opts;return this.opts.defaultMeta=typeof dr=="object"?dr[fr]||dr:void 0}validate(dr,fr){let br;if(typeof dr=="string"){if(br=this.getSchema(dr),!br)throw new Error(`no schema with key or ref "${dr}"`)}else br=this.compile(dr);const Sr=br(fr);return"$async"in br||(this.errors=br.errors),Sr}compile(dr,fr){const br=this._addSchema(dr,fr);return br.validate||this._compileSchemaEnv(br)}compileAsync(dr,fr){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:br}=this.opts;return Sr.call(this,dr,fr);async function Sr(Lr,Cr){await Dr.call(this,Lr.$schema);const Br=this._addSchema(Lr,Cr);return Br.validate||Er.call(this,Br)}async function Dr(Lr){Lr&&!this.getSchema(Lr)&&await Sr.call(this,{$ref:Lr},!0)}async function Er(Lr){try{return this._compileSchemaEnv(Lr)}catch(Cr){if(!(Cr instanceof At.default))throw Cr;return wr.call(this,Cr),await Tr.call(this,Cr.missingSchema),Er.call(this,Lr)}}function wr({missingSchema:Lr,missingRef:Cr}){if(this.refs[Lr])throw new Error(`AnySchema ${Lr} is loaded but ${Cr} cannot be resolved`)}async function Tr(Lr){const Cr=await Mr.call(this,Lr);this.refs[Lr]||await Dr.call(this,Cr.$schema),this.refs[Lr]||this.addSchema(Cr,Lr,fr)}async function Mr(Lr){const Cr=this._loading[Lr];if(Cr)return Cr;try{return await(this._loading[Lr]=br(Lr))}finally{delete this._loading[Lr]}}}addSchema(dr,fr,br,Sr=this.opts.validateSchema){if(Array.isArray(dr)){for(const Er of dr)this.addSchema(Er,void 0,br,Sr);return this}let Dr;if(typeof dr=="object"){const{schemaId:Er}=this.opts;if(Dr=dr[Er],Dr!==void 0&&typeof Dr!="string")throw new Error(`schema ${Er} must be string`)}return fr=(0,Lt.normalizeId)(fr||Dr),this._checkUnique(fr),this.schemas[fr]=this._addSchema(dr,br,fr,Sr,!0),this}addMetaSchema(dr,fr,br=this.opts.validateSchema){return this.addSchema(dr,fr,!0,br),this}validateSchema(dr,fr){if(typeof dr=="boolean")return!0;let br;if(br=dr.$schema,br!==void 0&&typeof br!="string")throw new Error("$schema must be a string");if(br=br||this.opts.defaultMeta||this.defaultMeta(),!br)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Sr=this.validate(br,dr);if(!Sr&&fr){const Dr="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Dr);else throw new Error(Dr)}return Sr}getSchema(dr){let fr;for(;typeof(fr=vr.call(this,dr))=="string";)dr=fr;if(fr===void 0){const{schemaId:br}=this.opts,Sr=new Bt.SchemaEnv({schema:{},schemaId:br});if(fr=Bt.resolveSchema.call(this,Sr,dr),!fr)return;this.refs[dr]=fr}return fr.validate||this._compileSchemaEnv(fr)}removeSchema(dr){if(dr instanceof RegExp)return this._removeAllSchemas(this.schemas,dr),this._removeAllSchemas(this.refs,dr),this;switch(typeof dr){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const fr=vr.call(this,dr);return typeof fr=="object"&&this._cache.delete(fr.schema),delete this.schemas[dr],delete this.refs[dr],this}case"object":{const fr=dr;this._cache.delete(fr);let br=dr[this.opts.schemaId];return br&&(br=(0,Lt.normalizeId)(br),delete this.schemas[br],delete this.refs[br]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(dr){for(const fr of dr)this.addKeyword(fr);return this}addKeyword(dr,fr){let br;if(typeof dr=="string")br=dr,typeof fr=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),fr.keyword=br);else if(typeof dr=="object"&&fr===void 0){if(fr=dr,br=fr.keyword,Array.isArray(br)&&!br.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Xt.call(this,br,fr),!fr)return(0,Nt.eachItem)(br,Dr=>er.call(this,Dr)),this;ur.call(this,fr);const Sr={...fr,type:(0,Ut.getJSONTypes)(fr.type),schemaType:(0,Ut.getJSONTypes)(fr.schemaType)};return(0,Nt.eachItem)(br,Sr.type.length===0?Dr=>er.call(this,Dr,Sr):Dr=>Sr.type.forEach(Er=>er.call(this,Dr,Sr,Er))),this}getKeyword(dr){const fr=this.RULES.all[dr];return typeof fr=="object"?fr.definition:!!fr}removeKeyword(dr){const{RULES:fr}=this;delete fr.keywords[dr],delete fr.all[dr];for(const br of fr.rules){const Sr=br.rules.findIndex(Dr=>Dr.keyword===dr);Sr>=0&&br.rules.splice(Sr,1)}return this}addFormat(dr,fr){return typeof fr=="string"&&(fr=new RegExp(fr)),this.formats[dr]=fr,this}errorsText(dr=this.errors,{separator:fr=", ",dataVar:br="data"}={}){return!dr||dr.length===0?"No errors":dr.map(Sr=>`${br}${Sr.instancePath} ${Sr.message}`).reduce((Sr,Dr)=>Sr+fr+Dr)}$dataMetaSchema(dr,fr){const br=this.RULES.all;dr=JSON.parse(JSON.stringify(dr));for(const Sr of fr){const Dr=Sr.split("/").slice(1);let Er=dr;for(const wr of Dr)Er=Er[wr];for(const wr in br){const Tr=br[wr];if(typeof Tr!="object")continue;const{$data:Mr}=Tr.definition,Lr=Er[wr];Mr&&Lr&&(Er[wr]=ar(Lr))}}return dr}_removeAllSchemas(dr,fr){for(const br in dr){const Sr=dr[br];(!fr||fr.test(br))&&(typeof Sr=="string"?delete dr[br]:Sr&&!Sr.meta&&(this._cache.delete(Sr.schema),delete dr[br]))}}_addSchema(dr,fr,br,Sr=this.opts.validateSchema,Dr=this.opts.addUsedSchema){let Er;const{schemaId:wr}=this.opts;if(typeof dr=="object")Er=dr[wr];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof dr!="boolean")throw new Error("schema must be object or boolean")}let Tr=this._cache.get(dr);if(Tr!==void 0)return Tr;br=(0,Lt.normalizeId)(Er||br);const Mr=Lt.getSchemaRefs.call(this,dr,br);return Tr=new Bt.SchemaEnv({schema:dr,schemaId:wr,meta:fr,baseId:br,localRefs:Mr}),this._cache.set(Tr.schema,Tr),Dr&&!br.startsWith("#")&&(br&&this._checkUnique(br),this.refs[br]=Tr),Sr&&this.validateSchema(dr,!0),Tr}_checkUnique(dr){if(this.schemas[dr]||this.refs[dr])throw new Error(`schema with key or id "${dr}" already exists`)}_compileSchemaEnv(dr){if(dr.meta?this._compileMetaSchema(dr):Bt.compileSchema.call(this,dr),!dr.validate)throw new Error("ajv implementation error");return dr.validate}_compileMetaSchema(dr){const fr=this.opts;this.opts=this._metaOpts;try{Bt.compileSchema.call(this,dr)}finally{this.opts=fr}}}_t.default=nr,nr.ValidationError=xt.default,nr.MissingRefError=At.default;function yr(tr,dr,fr,br="error"){for(const Sr in tr){const Dr=Sr;Dr in dr&&this.logger[br](`${fr}: option ${Sr}. ${tr[Dr]}`)}}function vr(tr){return tr=(0,Lt.normalizeId)(tr),this.schemas[tr]||this.refs[tr]}function Ir(){const tr=this.opts.schemas;if(tr)if(Array.isArray(tr))this.addSchema(tr);else for(const dr in tr)this.addSchema(tr[dr],dr)}function xr(){for(const tr in this.opts.formats){const dr=this.opts.formats[tr];dr&&this.addFormat(tr,dr)}}function Or(tr){if(Array.isArray(tr)){this.addVocabulary(tr);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const dr in tr){const fr=tr[dr];fr.keyword||(fr.keyword=dr),this.addKeyword(fr)}}function Nr(){const tr={...this.opts};for(const dr of Vt)delete tr[dr];return tr}const kr={log(){},warn(){},error(){}};function lr(tr){if(tr===!1)return kr;if(tr===void 0)return console;if(tr.log&&tr.warn&&tr.error)return tr;throw new Error("logger must implement log, warn and error methods")}const ir=/^[a-z_$][a-z0-9_$:-]*$/i;function Xt(tr,dr){const{RULES:fr}=this;if((0,Nt.eachItem)(tr,br=>{if(fr.keywords[br])throw new Error(`Keyword ${br} is already defined`);if(!ir.test(br))throw new Error(`Keyword ${br} has invalid name`)}),!!dr&&dr.$data&&!("code"in dr||"validate"in dr))throw new Error('$data keyword must have "code" or "validate" function')}function er(tr,dr,fr){var br;const Sr=dr==null?void 0:dr.post;if(fr&&Sr)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Dr}=this;let Er=Sr?Dr.post:Dr.rules.find(({type:Tr})=>Tr===fr);if(Er||(Er={type:fr,rules:[]},Dr.rules.push(Er)),Dr.keywords[tr]=!0,!dr)return;const wr={keyword:tr,definition:{...dr,type:(0,Ut.getJSONTypes)(dr.type),schemaType:(0,Ut.getJSONTypes)(dr.schemaType)}};dr.before?pr.call(this,Er,wr,dr.before):Er.rules.push(wr),Dr.all[tr]=wr,(br=dr.implements)===null||br===void 0||br.forEach(Tr=>this.addKeyword(Tr))}function pr(tr,dr,fr){const br=tr.rules.findIndex(Sr=>Sr.keyword===fr);br>=0?tr.rules.splice(br,0,dr):(tr.rules.push(dr),this.logger.warn(`rule ${fr} is not defined`))}function ur(tr){let{metaSchema:dr}=tr;dr!==void 0&&(tr.$data&&this.opts.$data&&(dr=ar(dr)),tr.validateSchema=this.compile(dr,!0))}const gr={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ar(tr){return{anyOf:[tr,gr]}}})(core$3);var draft2020={},core$2={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$B={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$B;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code,codegen_1$p=codegen,names_1$4=names$1,compile_1$2=compile,util_1$n=util$1,def$A={keyword:"$ref",schemaType:"string",code(_t){const{gen:e,schema:$t,it:xt}=_t,{baseId:At,schemaEnv:kt,validateName:Bt,opts:jt,self:Lt}=xt,{root:Ut}=kt;if(($t==="#"||$t==="#/")&&At===Ut.baseId)return qt();const Nt=compile_1$2.resolveRef.call(Lt,Ut,At,$t);if(Nt===void 0)throw new ref_error_1.default(xt.opts.uriResolver,At,$t);if(Nt instanceof compile_1$2.SchemaEnv)return Kt(Nt);return zt(Nt);function qt(){if(kt===Ut)return callRef(_t,Bt,kt,kt.$async);const Vt=e.scopeValue("root",{ref:Ut});return callRef(_t,(0,codegen_1$p._)`${Vt}.validate`,Ut,Ut.$async)}function Kt(Vt){const Ht=getValidate(_t,Vt);callRef(_t,Ht,Vt,Vt.$async)}function zt(Vt){const Ht=e.scopeValue("schema",jt.code.source===!0?{ref:Vt,code:(0,codegen_1$p.stringify)(Vt)}:{ref:Vt}),Jt=e.name("valid"),rr=_t.subschema({schema:Vt,dataTypes:[],schemaPath:codegen_1$p.nil,topSchemaRef:Ht,errSchemaPath:$t},Jt);_t.mergeEvaluated(rr),_t.ok(Jt)}}};function getValidate(_t,e){const{gen:$t}=_t;return e.validate?$t.scopeValue("validate",{ref:e.validate}):(0,codegen_1$p._)`${$t.scopeValue("wrapper",{ref:e})}.validate`}ref.getValidate=getValidate;function callRef(_t,e,$t,xt){const{gen:At,it:kt}=_t,{allErrors:Bt,schemaEnv:jt,opts:Lt}=kt,Ut=Lt.passContext?names_1$4.default.this:codegen_1$p.nil;xt?Nt():qt();function Nt(){if(!jt.$async)throw new Error("async schema referenced by sync schema");const Vt=At.let("valid");At.try(()=>{At.code((0,codegen_1$p._)`await ${(0,code_1$8.callValidateCode)(_t,e,Ut)}`),zt(e),Bt||At.assign(Vt,!0)},Ht=>{At.if((0,codegen_1$p._)`!(${Ht} instanceof ${kt.ValidationError})`,()=>At.throw(Ht)),Kt(Ht),Bt||At.assign(Vt,!1)}),_t.ok(Vt)}function qt(){_t.result((0,code_1$8.callValidateCode)(_t,e,Ut),()=>zt(e),()=>Kt(e))}function Kt(Vt){const Ht=(0,codegen_1$p._)`${Vt}.errors`;At.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${Ht} : ${names_1$4.default.vErrors}.concat(${Ht})`),At.assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`)}function zt(Vt){var Ht;if(!kt.opts.unevaluated)return;const Jt=(Ht=$t==null?void 0:$t.validate)===null||Ht===void 0?void 0:Ht.evaluated;if(kt.props!==!0)if(Jt&&!Jt.dynamicProps)Jt.props!==void 0&&(kt.props=util_1$n.mergeEvaluated.props(At,Jt.props,kt.props));else{const rr=At.var("props",(0,codegen_1$p._)`${Vt}.evaluated.props`);kt.props=util_1$n.mergeEvaluated.props(At,rr,kt.props,codegen_1$p.Name)}if(kt.items!==!0)if(Jt&&!Jt.dynamicItems)Jt.items!==void 0&&(kt.items=util_1$n.mergeEvaluated.items(At,Jt.items,kt.items));else{const rr=At.var("items",(0,codegen_1$p._)`${Vt}.evaluated.items`);kt.items=util_1$n.mergeEvaluated.items(At,rr,kt.items,codegen_1$p.Name)}}}ref.callRef=callRef;ref.default=def$A;Object.defineProperty(core$2,"__esModule",{value:!0});const id_1=id,ref_1$2=ref,core$1=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1$2.default];core$2.default=core$1;var validation$2={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$o=codegen,ops=codegen_1$o.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$k={message:({keyword:_t,schemaCode:e})=>(0,codegen_1$o.str)`must be ${KWDs[_t].okStr} ${e}`,params:({keyword:_t,schemaCode:e})=>(0,codegen_1$o._)`{comparison: ${KWDs[_t].okStr}, limit: ${e}}`},def$z={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$k,code(_t){const{keyword:e,data:$t,schemaCode:xt}=_t;_t.fail$data((0,codegen_1$o._)`${$t} ${KWDs[e].fail} ${xt} || isNaN(${$t})`)}};limitNumber.default=def$z;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$n=codegen,error$j={message:({schemaCode:_t})=>(0,codegen_1$n.str)`must be multiple of ${_t}`,params:({schemaCode:_t})=>(0,codegen_1$n._)`{multipleOf: ${_t}}`},def$y={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$j,code(_t){const{gen:e,data:$t,schemaCode:xt,it:At}=_t,kt=At.opts.multipleOfPrecision,Bt=e.let("res"),jt=kt?(0,codegen_1$n._)`Math.abs(Math.round(${Bt}) - ${Bt}) > 1e-${kt}`:(0,codegen_1$n._)`${Bt} !== parseInt(${Bt})`;_t.fail$data((0,codegen_1$n._)`(${xt} === 0 || (${Bt} = ${$t}/${xt}, ${jt}))`)}};multipleOf.default=def$y;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(_t){const e=_t.length;let $t=0,xt=0,At;for(;xt<e;)$t++,At=_t.charCodeAt(xt++),At>=55296&&At<=56319&&xt<e&&(At=_t.charCodeAt(xt),(At&64512)===56320&&xt++);return $t}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$m=codegen,util_1$m=util$1,ucs2length_1=ucs2length$1,error$i={message({keyword:_t,schemaCode:e}){const $t=_t==="maxLength"?"more":"fewer";return(0,codegen_1$m.str)`must NOT have ${$t} than ${e} characters`},params:({schemaCode:_t})=>(0,codegen_1$m._)`{limit: ${_t}}`},def$x={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$i,code(_t){const{keyword:e,data:$t,schemaCode:xt,it:At}=_t,kt=e==="maxLength"?codegen_1$m.operators.GT:codegen_1$m.operators.LT,Bt=At.opts.unicode===!1?(0,codegen_1$m._)`${$t}.length`:(0,codegen_1$m._)`${(0,util_1$m.useFunc)(_t.gen,ucs2length_1.default)}(${$t})`;_t.fail$data((0,codegen_1$m._)`${Bt} ${kt} ${xt}`)}};limitLength.default=def$x;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$l=codegen,error$h={message:({schemaCode:_t})=>(0,codegen_1$l.str)`must match pattern "${_t}"`,params:({schemaCode:_t})=>(0,codegen_1$l._)`{pattern: ${_t}}`},def$w={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$h,code(_t){const{data:e,$data:$t,schema:xt,schemaCode:At,it:kt}=_t,Bt=kt.opts.unicodeRegExp?"u":"",jt=$t?(0,codegen_1$l._)`(new RegExp(${At}, ${Bt}))`:(0,code_1$7.usePattern)(_t,xt);_t.fail$data((0,codegen_1$l._)`!${jt}.test(${e})`)}};pattern.default=def$w;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$k=codegen,error$g={message({keyword:_t,schemaCode:e}){const $t=_t==="maxProperties"?"more":"fewer";return(0,codegen_1$k.str)`must NOT have ${$t} than ${e} properties`},params:({schemaCode:_t})=>(0,codegen_1$k._)`{limit: ${_t}}`},def$v={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$g,code(_t){const{keyword:e,data:$t,schemaCode:xt}=_t,At=e==="maxProperties"?codegen_1$k.operators.GT:codegen_1$k.operators.LT;_t.fail$data((0,codegen_1$k._)`Object.keys(${$t}).length ${At} ${xt}`)}};limitProperties.default=def$v;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$j=codegen,util_1$l=util$1,error$f={message:({params:{missingProperty:_t}})=>(0,codegen_1$j.str)`must have required property '${_t}'`,params:({params:{missingProperty:_t}})=>(0,codegen_1$j._)`{missingProperty: ${_t}}`},def$u={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$f,code(_t){const{gen:e,schema:$t,schemaCode:xt,data:At,$data:kt,it:Bt}=_t,{opts:jt}=Bt;if(!kt&&$t.length===0)return;const Lt=$t.length>=jt.loopRequired;if(Bt.allErrors?Ut():Nt(),jt.strictRequired){const zt=_t.parentSchema.properties,{definedProperties:Vt}=_t.it;for(const Ht of $t)if((zt==null?void 0:zt[Ht])===void 0&&!Vt.has(Ht)){const Jt=Bt.schemaEnv.baseId+Bt.errSchemaPath,rr=`required property "${Ht}" is not defined at "${Jt}" (strictRequired)`;(0,util_1$l.checkStrictMode)(Bt,rr,Bt.opts.strictRequired)}}function Ut(){if(Lt||kt)_t.block$data(codegen_1$j.nil,qt);else for(const zt of $t)(0,code_1$6.checkReportMissingProp)(_t,zt)}function Nt(){const zt=e.let("missing");if(Lt||kt){const Vt=e.let("valid",!0);_t.block$data(Vt,()=>Kt(zt,Vt)),_t.ok(Vt)}else e.if((0,code_1$6.checkMissingProp)(_t,$t,zt)),(0,code_1$6.reportMissingProp)(_t,zt),e.else()}function qt(){e.forOf("prop",xt,zt=>{_t.setParams({missingProperty:zt}),e.if((0,code_1$6.noPropertyInData)(e,At,zt,jt.ownProperties),()=>_t.error())})}function Kt(zt,Vt){_t.setParams({missingProperty:zt}),e.forOf(zt,xt,()=>{e.assign(Vt,(0,code_1$6.propertyInData)(e,At,zt,jt.ownProperties)),e.if((0,codegen_1$j.not)(Vt),()=>{_t.error(),e.break()})},codegen_1$j.nil)}}};required.default=def$u;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$i=codegen,error$e={message({keyword:_t,schemaCode:e}){const $t=_t==="maxItems"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${$t} than ${e} items`},params:({schemaCode:_t})=>(0,codegen_1$i._)`{limit: ${_t}}`},def$t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$e,code(_t){const{keyword:e,data:$t,schemaCode:xt}=_t,At=e==="maxItems"?codegen_1$i.operators.GT:codegen_1$i.operators.LT;_t.fail$data((0,codegen_1$i._)`${$t}.length ${At} ${xt}`)}};limitItems.default=def$t;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$h=codegen,util_1$k=util$1,equal_1$2=equal$1,error$d={message:({params:{i:_t,j:e}})=>(0,codegen_1$h.str)`must NOT have duplicate items (items ## ${e} and ${_t} are identical)`,params:({params:{i:_t,j:e}})=>(0,codegen_1$h._)`{i: ${_t}, j: ${e}}`},def$s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$d,code(_t){const{gen:e,data:$t,$data:xt,schema:At,parentSchema:kt,schemaCode:Bt,it:jt}=_t;if(!xt&&!At)return;const Lt=e.let("valid"),Ut=kt.items?(0,dataType_1.getSchemaTypes)(kt.items):[];_t.block$data(Lt,Nt,(0,codegen_1$h._)`${Bt} === false`),_t.ok(Lt);function Nt(){const Vt=e.let("i",(0,codegen_1$h._)`${$t}.length`),Ht=e.let("j");_t.setParams({i:Vt,j:Ht}),e.assign(Lt,!0),e.if((0,codegen_1$h._)`${Vt} > 1`,()=>(qt()?Kt:zt)(Vt,Ht))}function qt(){return Ut.length>0&&!Ut.some(Vt=>Vt==="object"||Vt==="array")}function Kt(Vt,Ht){const Jt=e.name("item"),rr=(0,dataType_1.checkDataTypes)(Ut,Jt,jt.opts.strictNumbers,dataType_1.DataType.Wrong),Qt=e.const("indices",(0,codegen_1$h._)`{}`);e.for((0,codegen_1$h._)`;${Vt}--;`,()=>{e.let(Jt,(0,codegen_1$h._)`${$t}[${Vt}]`),e.if(rr,(0,codegen_1$h._)`continue`),Ut.length>1&&e.if((0,codegen_1$h._)`typeof ${Jt} == "string"`,(0,codegen_1$h._)`${Jt} += "_"`),e.if((0,codegen_1$h._)`typeof ${Qt}[${Jt}] == "number"`,()=>{e.assign(Ht,(0,codegen_1$h._)`${Qt}[${Jt}]`),_t.error(),e.assign(Lt,!1).break()}).code((0,codegen_1$h._)`${Qt}[${Jt}] = ${Vt}`)})}function zt(Vt,Ht){const Jt=(0,util_1$k.useFunc)(e,equal_1$2.default),rr=e.name("outer");e.label(rr).for((0,codegen_1$h._)`;${Vt}--;`,()=>e.for((0,codegen_1$h._)`${Ht} = ${Vt}; ${Ht}--;`,()=>e.if((0,codegen_1$h._)`${Jt}(${$t}[${Vt}], ${$t}[${Ht}])`,()=>{_t.error(),e.assign(Lt,!1).break(rr)})))}}};uniqueItems.default=def$s;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$g=codegen,util_1$j=util$1,equal_1$1=equal$1,error$c={message:"must be equal to constant",params:({schemaCode:_t})=>(0,codegen_1$g._)`{allowedValue: ${_t}}`},def$r={keyword:"const",$data:!0,error:error$c,code(_t){const{gen:e,data:$t,$data:xt,schemaCode:At,schema:kt}=_t;xt||kt&&typeof kt=="object"?_t.fail$data((0,codegen_1$g._)`!${(0,util_1$j.useFunc)(e,equal_1$1.default)}(${$t}, ${At})`):_t.fail((0,codegen_1$g._)`${kt} !== ${$t}`)}};_const.default=def$r;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$f=codegen,util_1$i=util$1,equal_1=equal$1,error$b={message:"must be equal to one of the allowed values",params:({schemaCode:_t})=>(0,codegen_1$f._)`{allowedValues: ${_t}}`},def$q={keyword:"enum",schemaType:"array",$data:!0,error:error$b,code(_t){const{gen:e,data:$t,$data:xt,schema:At,schemaCode:kt,it:Bt}=_t;if(!xt&&At.length===0)throw new Error("enum must have non-empty array");const jt=At.length>=Bt.opts.loopEnum;let Lt;const Ut=()=>Lt??(Lt=(0,util_1$i.useFunc)(e,equal_1.default));let Nt;if(jt||xt)Nt=e.let("valid"),_t.block$data(Nt,qt);else{if(!Array.isArray(At))throw new Error("ajv implementation error");const zt=e.const("vSchema",kt);Nt=(0,codegen_1$f.or)(...At.map((Vt,Ht)=>Kt(zt,Ht)))}_t.pass(Nt);function qt(){e.assign(Nt,!1),e.forOf("v",kt,zt=>e.if((0,codegen_1$f._)`${Ut()}(${$t}, ${zt})`,()=>e.assign(Nt,!0).break()))}function Kt(zt,Vt){const Ht=At[Vt];return typeof Ht=="object"&&Ht!==null?(0,codegen_1$f._)`${Ut()}(${$t}, ${zt}[${Vt}])`:(0,codegen_1$f._)`${$t} === ${Ht}`}}};_enum.default=def$q;Object.defineProperty(validation$2,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation$1=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$2.default=validation$1;var applicator$1={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$e=codegen,util_1$h=util$1,error$a={message:({params:{len:_t}})=>(0,codegen_1$e.str)`must NOT have more than ${_t} items`,params:({params:{len:_t}})=>(0,codegen_1$e._)`{limit: ${_t}}`},def$p={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$a,code(_t){const{parentSchema:e,it:$t}=_t,{items:xt}=e;if(!Array.isArray(xt)){(0,util_1$h.checkStrictMode)($t,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(_t,xt)}};function validateAdditionalItems(_t,e){const{gen:$t,schema:xt,data:At,keyword:kt,it:Bt}=_t;Bt.items=!0;const jt=$t.const("len",(0,codegen_1$e._)`${At}.length`);if(xt===!1)_t.setParams({len:e.length}),_t.pass((0,codegen_1$e._)`${jt} <= ${e.length}`);else if(typeof xt=="object"&&!(0,util_1$h.alwaysValidSchema)(Bt,xt)){const Ut=$t.var("valid",(0,codegen_1$e._)`${jt} <= ${e.length}`);$t.if((0,codegen_1$e.not)(Ut),()=>Lt(Ut)),_t.ok(Ut)}function Lt(Ut){$t.forRange("i",e.length,jt,Nt=>{_t.subschema({keyword:kt,dataProp:Nt,dataPropType:util_1$h.Type.Num},Ut),Bt.allErrors||$t.if((0,codegen_1$e.not)(Ut),()=>$t.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$p;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$d=codegen,util_1$g=util$1,code_1$5=code,def$o={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(_t){const{schema:e,it:$t}=_t;if(Array.isArray(e))return validateTuple(_t,"additionalItems",e);$t.items=!0,!(0,util_1$g.alwaysValidSchema)($t,e)&&_t.ok((0,code_1$5.validateArray)(_t))}};function validateTuple(_t,e,$t=_t.schema){const{gen:xt,parentSchema:At,data:kt,keyword:Bt,it:jt}=_t;Nt(At),jt.opts.unevaluated&&$t.length&&jt.items!==!0&&(jt.items=util_1$g.mergeEvaluated.items(xt,$t.length,jt.items));const Lt=xt.name("valid"),Ut=xt.const("len",(0,codegen_1$d._)`${kt}.length`);$t.forEach((qt,Kt)=>{(0,util_1$g.alwaysValidSchema)(jt,qt)||(xt.if((0,codegen_1$d._)`${Ut} > ${Kt}`,()=>_t.subschema({keyword:Bt,schemaProp:Kt,dataProp:Kt},Lt)),_t.ok(Lt))});function Nt(qt){const{opts:Kt,errSchemaPath:zt}=jt,Vt=$t.length,Ht=Vt===qt.minItems&&(Vt===qt.maxItems||qt[e]===!1);if(Kt.strictTuples&&!Ht){const Jt=`"${Bt}" is ${Vt}-tuple, but minItems or maxItems/${e} are not specified or different at path "${zt}"`;(0,util_1$g.checkStrictMode)(jt,Jt,Kt.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$o;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$n={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:_t=>(0,items_1$1.validateTuple)(_t,"items")};prefixItems.default=def$n;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util$1,code_1$4=code,additionalItems_1$1=additionalItems,error$9={message:({params:{len:_t}})=>(0,codegen_1$c.str)`must NOT have more than ${_t} items`,params:({params:{len:_t}})=>(0,codegen_1$c._)`{limit: ${_t}}`},def$m={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$9,code(_t){const{schema:e,parentSchema:$t,it:xt}=_t,{prefixItems:At}=$t;xt.items=!0,!(0,util_1$f.alwaysValidSchema)(xt,e)&&(At?(0,additionalItems_1$1.validateAdditionalItems)(_t,At):_t.ok((0,code_1$4.validateArray)(_t)))}};items2020.default=def$m;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util$1,error$8={message:({params:{min:_t,max:e}})=>e===void 0?(0,codegen_1$b.str)`must contain at least ${_t} valid item(s)`:(0,codegen_1$b.str)`must contain at least ${_t} and no more than ${e} valid item(s)`,params:({params:{min:_t,max:e}})=>e===void 0?(0,codegen_1$b._)`{minContains: ${_t}}`:(0,codegen_1$b._)`{minContains: ${_t}, maxContains: ${e}}`},def$l={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$8,code(_t){const{gen:e,schema:$t,parentSchema:xt,data:At,it:kt}=_t;let Bt,jt;const{minContains:Lt,maxContains:Ut}=xt;kt.opts.next?(Bt=Lt===void 0?1:Lt,jt=Ut):Bt=1;const Nt=e.const("len",(0,codegen_1$b._)`${At}.length`);if(_t.setParams({min:Bt,max:jt}),jt===void 0&&Bt===0){(0,util_1$e.checkStrictMode)(kt,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(jt!==void 0&&Bt>jt){(0,util_1$e.checkStrictMode)(kt,'"minContains" > "maxContains" is always invalid'),_t.fail();return}if((0,util_1$e.alwaysValidSchema)(kt,$t)){let Ht=(0,codegen_1$b._)`${Nt} >= ${Bt}`;jt!==void 0&&(Ht=(0,codegen_1$b._)`${Ht} && ${Nt} <= ${jt}`),_t.pass(Ht);return}kt.items=!0;const qt=e.name("valid");jt===void 0&&Bt===1?zt(qt,()=>e.if(qt,()=>e.break())):Bt===0?(e.let(qt,!0),jt!==void 0&&e.if((0,codegen_1$b._)`${At}.length > 0`,Kt)):(e.let(qt,!1),Kt()),_t.result(qt,()=>_t.reset());function Kt(){const Ht=e.name("_valid"),Jt=e.let("count",0);zt(Ht,()=>e.if(Ht,()=>Vt(Jt)))}function zt(Ht,Jt){e.forRange("i",0,Nt,rr=>{_t.subschema({keyword:"contains",dataProp:rr,dataPropType:util_1$e.Type.Num,compositeRule:!0},Ht),Jt()})}function Vt(Ht){e.code((0,codegen_1$b._)`${Ht}++`),jt===void 0?e.if((0,codegen_1$b._)`${Ht} >= ${Bt}`,()=>e.assign(qt,!0).break()):(e.if((0,codegen_1$b._)`${Ht} > ${jt}`,()=>e.assign(qt,!1).break()),Bt===1?e.assign(qt,!0):e.if((0,codegen_1$b._)`${Ht} >= ${Bt}`,()=>e.assign(qt,!0)))}}};contains.default=def$l;var dependencies={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.validateSchemaDeps=_t.validatePropertyDeps=_t.error=void 0;const e=codegen,$t=util$1,xt=code;_t.error={message:({params:{property:Lt,depsCount:Ut,deps:Nt}})=>{const qt=Ut===1?"property":"properties";return(0,e.str)`must have ${qt} ${Nt} when property ${Lt} is present`},params:({params:{property:Lt,depsCount:Ut,deps:Nt,missingProperty:qt}})=>(0,e._)`{property: ${Lt},
    missingProperty: ${qt},
    depsCount: ${Ut},
    deps: ${Nt}}`};const At={keyword:"dependencies",type:"object",schemaType:"object",error:_t.error,code(Lt){const[Ut,Nt]=kt(Lt);Bt(Lt,Ut),jt(Lt,Nt)}};function kt({schema:Lt}){const Ut={},Nt={};for(const qt in Lt){if(qt==="__proto__")continue;const Kt=Array.isArray(Lt[qt])?Ut:Nt;Kt[qt]=Lt[qt]}return[Ut,Nt]}function Bt(Lt,Ut=Lt.schema){const{gen:Nt,data:qt,it:Kt}=Lt;if(Object.keys(Ut).length===0)return;const zt=Nt.let("missing");for(const Vt in Ut){const Ht=Ut[Vt];if(Ht.length===0)continue;const Jt=(0,xt.propertyInData)(Nt,qt,Vt,Kt.opts.ownProperties);Lt.setParams({property:Vt,depsCount:Ht.length,deps:Ht.join(", ")}),Kt.allErrors?Nt.if(Jt,()=>{for(const rr of Ht)(0,xt.checkReportMissingProp)(Lt,rr)}):(Nt.if((0,e._)`${Jt} && (${(0,xt.checkMissingProp)(Lt,Ht,zt)})`),(0,xt.reportMissingProp)(Lt,zt),Nt.else())}}_t.validatePropertyDeps=Bt;function jt(Lt,Ut=Lt.schema){const{gen:Nt,data:qt,keyword:Kt,it:zt}=Lt,Vt=Nt.name("valid");for(const Ht in Ut)(0,$t.alwaysValidSchema)(zt,Ut[Ht])||(Nt.if((0,xt.propertyInData)(Nt,qt,Ht,zt.opts.ownProperties),()=>{const Jt=Lt.subschema({keyword:Kt,schemaProp:Ht},Vt);Lt.mergeValidEvaluated(Jt,Vt)},()=>Nt.var(Vt,!0)),Lt.ok(Vt))}_t.validateSchemaDeps=jt,_t.default=At})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$a=codegen,util_1$d=util$1,error$7={message:"property name must be valid",params:({params:_t})=>(0,codegen_1$a._)`{propertyName: ${_t.propertyName}}`},def$k={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$7,code(_t){const{gen:e,schema:$t,data:xt,it:At}=_t;if((0,util_1$d.alwaysValidSchema)(At,$t))return;const kt=e.name("valid");e.forIn("key",xt,Bt=>{_t.setParams({propertyName:Bt}),_t.subschema({keyword:"propertyNames",data:Bt,dataTypes:["string"],propertyName:Bt,compositeRule:!0},kt),e.if((0,codegen_1$a.not)(kt),()=>{_t.error(!0),At.allErrors||e.break()})}),_t.ok(kt)}};propertyNames.default=def$k;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$9=codegen,names_1$3=names$1,util_1$c=util$1,error$6={message:"must NOT have additional properties",params:({params:_t})=>(0,codegen_1$9._)`{additionalProperty: ${_t.additionalProperty}}`},def$j={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$6,code(_t){const{gen:e,schema:$t,parentSchema:xt,data:At,errsCount:kt,it:Bt}=_t;if(!kt)throw new Error("ajv implementation error");const{allErrors:jt,opts:Lt}=Bt;if(Bt.props=!0,Lt.removeAdditional!=="all"&&(0,util_1$c.alwaysValidSchema)(Bt,$t))return;const Ut=(0,code_1$3.allSchemaProperties)(xt.properties),Nt=(0,code_1$3.allSchemaProperties)(xt.patternProperties);qt(),_t.ok((0,codegen_1$9._)`${kt} === ${names_1$3.default.errors}`);function qt(){e.forIn("key",At,Jt=>{!Ut.length&&!Nt.length?Vt(Jt):e.if(Kt(Jt),()=>Vt(Jt))})}function Kt(Jt){let rr;if(Ut.length>8){const Qt=(0,util_1$c.schemaRefOrVal)(Bt,xt.properties,"properties");rr=(0,code_1$3.isOwnProperty)(e,Qt,Jt)}else Ut.length?rr=(0,codegen_1$9.or)(...Ut.map(Qt=>(0,codegen_1$9._)`${Jt} === ${Qt}`)):rr=codegen_1$9.nil;return Nt.length&&(rr=(0,codegen_1$9.or)(rr,...Nt.map(Qt=>(0,codegen_1$9._)`${(0,code_1$3.usePattern)(_t,Qt)}.test(${Jt})`))),(0,codegen_1$9.not)(rr)}function zt(Jt){e.code((0,codegen_1$9._)`delete ${At}[${Jt}]`)}function Vt(Jt){if(Lt.removeAdditional==="all"||Lt.removeAdditional&&$t===!1){zt(Jt);return}if($t===!1){_t.setParams({additionalProperty:Jt}),_t.error(),jt||e.break();return}if(typeof $t=="object"&&!(0,util_1$c.alwaysValidSchema)(Bt,$t)){const rr=e.name("valid");Lt.removeAdditional==="failing"?(Ht(Jt,rr,!1),e.if((0,codegen_1$9.not)(rr),()=>{_t.reset(),zt(Jt)})):(Ht(Jt,rr),jt||e.if((0,codegen_1$9.not)(rr),()=>e.break()))}}function Ht(Jt,rr,Qt){const Wt={keyword:"additionalProperties",dataProp:Jt,dataPropType:util_1$c.Type.Str};Qt===!1&&Object.assign(Wt,{compositeRule:!0,createErrors:!1,allErrors:!1}),_t.subschema(Wt,rr)}}};additionalProperties.default=def$j;var properties$8={};Object.defineProperty(properties$8,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$b=util$1,additionalProperties_1$1=additionalProperties,def$i={keyword:"properties",type:"object",schemaType:"object",code(_t){const{gen:e,schema:$t,parentSchema:xt,data:At,it:kt}=_t;kt.opts.removeAdditional==="all"&&xt.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(kt,additionalProperties_1$1.default,"additionalProperties"));const Bt=(0,code_1$2.allSchemaProperties)($t);for(const qt of Bt)kt.definedProperties.add(qt);kt.opts.unevaluated&&Bt.length&&kt.props!==!0&&(kt.props=util_1$b.mergeEvaluated.props(e,(0,util_1$b.toHash)(Bt),kt.props));const jt=Bt.filter(qt=>!(0,util_1$b.alwaysValidSchema)(kt,$t[qt]));if(jt.length===0)return;const Lt=e.name("valid");for(const qt of jt)Ut(qt)?Nt(qt):(e.if((0,code_1$2.propertyInData)(e,At,qt,kt.opts.ownProperties)),Nt(qt),kt.allErrors||e.else().var(Lt,!0),e.endIf()),_t.it.definedProperties.add(qt),_t.ok(Lt);function Ut(qt){return kt.opts.useDefaults&&!kt.compositeRule&&$t[qt].default!==void 0}function Nt(qt){_t.subschema({keyword:"properties",schemaProp:qt,dataProp:qt},Lt)}}};properties$8.default=def$i;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$8=codegen,util_1$a=util$1,util_2=util$1,def$h={keyword:"patternProperties",type:"object",schemaType:"object",code(_t){const{gen:e,schema:$t,data:xt,parentSchema:At,it:kt}=_t,{opts:Bt}=kt,jt=(0,code_1$1.allSchemaProperties)($t),Lt=jt.filter(Ht=>(0,util_1$a.alwaysValidSchema)(kt,$t[Ht]));if(jt.length===0||Lt.length===jt.length&&(!kt.opts.unevaluated||kt.props===!0))return;const Ut=Bt.strictSchema&&!Bt.allowMatchingProperties&&At.properties,Nt=e.name("valid");kt.props!==!0&&!(kt.props instanceof codegen_1$8.Name)&&(kt.props=(0,util_2.evaluatedPropsToName)(e,kt.props));const{props:qt}=kt;Kt();function Kt(){for(const Ht of jt)Ut&&zt(Ht),kt.allErrors?Vt(Ht):(e.var(Nt,!0),Vt(Ht),e.if(Nt))}function zt(Ht){for(const Jt in Ut)new RegExp(Ht).test(Jt)&&(0,util_1$a.checkStrictMode)(kt,`property ${Jt} matches pattern ${Ht} (use allowMatchingProperties)`)}function Vt(Ht){e.forIn("key",xt,Jt=>{e.if((0,codegen_1$8._)`${(0,code_1$1.usePattern)(_t,Ht)}.test(${Jt})`,()=>{const rr=Lt.includes(Ht);rr||_t.subschema({keyword:"patternProperties",schemaProp:Ht,dataProp:Jt,dataPropType:util_2.Type.Str},Nt),kt.opts.unevaluated&&qt!==!0?e.assign((0,codegen_1$8._)`${qt}[${Jt}]`,!0):!rr&&!kt.allErrors&&e.if((0,codegen_1$8.not)(Nt),()=>e.break())})})}}};patternProperties.default=def$h;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$9=util$1,def$g={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(_t){const{gen:e,schema:$t,it:xt}=_t;if((0,util_1$9.alwaysValidSchema)(xt,$t)){_t.fail();return}const At=e.name("valid");_t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},At),_t.failResult(At,()=>_t.reset(),()=>_t.error())},error:{message:"must NOT be valid"}};not.default=def$g;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$f={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$f;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$8=util$1,error$5={message:"must match exactly one schema in oneOf",params:({params:_t})=>(0,codegen_1$7._)`{passingSchemas: ${_t.passing}}`},def$e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$5,code(_t){const{gen:e,schema:$t,parentSchema:xt,it:At}=_t;if(!Array.isArray($t))throw new Error("ajv implementation error");if(At.opts.discriminator&&xt.discriminator)return;const kt=$t,Bt=e.let("valid",!1),jt=e.let("passing",null),Lt=e.name("_valid");_t.setParams({passing:jt}),e.block(Ut),_t.result(Bt,()=>_t.reset(),()=>_t.error(!0));function Ut(){kt.forEach((Nt,qt)=>{let Kt;(0,util_1$8.alwaysValidSchema)(At,Nt)?e.var(Lt,!0):Kt=_t.subschema({keyword:"oneOf",schemaProp:qt,compositeRule:!0},Lt),qt>0&&e.if((0,codegen_1$7._)`${Lt} && ${Bt}`).assign(Bt,!1).assign(jt,(0,codegen_1$7._)`[${jt}, ${qt}]`).else(),e.if(Lt,()=>{e.assign(Bt,!0),e.assign(jt,qt),Kt&&_t.mergeEvaluated(Kt,codegen_1$7.Name)})})}}};oneOf.default=def$e;var allOf$1={};Object.defineProperty(allOf$1,"__esModule",{value:!0});const util_1$7=util$1,def$d={keyword:"allOf",schemaType:"array",code(_t){const{gen:e,schema:$t,it:xt}=_t;if(!Array.isArray($t))throw new Error("ajv implementation error");const At=e.name("valid");$t.forEach((kt,Bt)=>{if((0,util_1$7.alwaysValidSchema)(xt,kt))return;const jt=_t.subschema({keyword:"allOf",schemaProp:Bt},At);_t.ok(At),_t.mergeEvaluated(jt)})}};allOf$1.default=def$d;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$6=util$1,error$4={message:({params:_t})=>(0,codegen_1$6.str)`must match "${_t.ifClause}" schema`,params:({params:_t})=>(0,codegen_1$6._)`{failingKeyword: ${_t.ifClause}}`},def$c={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$4,code(_t){const{gen:e,parentSchema:$t,it:xt}=_t;$t.then===void 0&&$t.else===void 0&&(0,util_1$6.checkStrictMode)(xt,'"if" without "then" and "else" is ignored');const At=hasSchema(xt,"then"),kt=hasSchema(xt,"else");if(!At&&!kt)return;const Bt=e.let("valid",!0),jt=e.name("_valid");if(Lt(),_t.reset(),At&&kt){const Nt=e.let("ifClause");_t.setParams({ifClause:Nt}),e.if(jt,Ut("then",Nt),Ut("else",Nt))}else At?e.if(jt,Ut("then")):e.if((0,codegen_1$6.not)(jt),Ut("else"));_t.pass(Bt,()=>_t.error(!0));function Lt(){const Nt=_t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},jt);_t.mergeEvaluated(Nt)}function Ut(Nt,qt){return()=>{const Kt=_t.subschema({keyword:Nt},jt);e.assign(Bt,jt),_t.mergeValidEvaluated(Kt,Bt),qt?e.assign(qt,(0,codegen_1$6._)`${Nt}`):_t.setParams({ifClause:Nt})}}}};function hasSchema(_t,e){const $t=_t.schema[e];return $t!==void 0&&!(0,util_1$6.alwaysValidSchema)(_t,$t)}_if.default=def$c;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$5=util$1,def$b={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:_t,parentSchema:e,it:$t}){e.if===void 0&&(0,util_1$5.checkStrictMode)($t,`"${_t}" without "if" is ignored`)}};thenElse.default=def$b;Object.defineProperty(applicator$1,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1$2=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$8,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf$1,if_1=_if,thenElse_1=thenElse;function getApplicator(_t=!1){const e=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1$2.default,properties_1.default,patternProperties_1.default];return _t?e.push(prefixItems_1.default,items2020_1.default):e.push(additionalItems_1.default,items_1.default),e.push(contains_1.default),e}applicator$1.default=getApplicator;var dynamic$1={},dynamicAnchor$1={};Object.defineProperty(dynamicAnchor$1,"__esModule",{value:!0});dynamicAnchor$1.dynamicAnchor=void 0;const codegen_1$5=codegen,names_1$2=names$1,compile_1$1=compile,ref_1$1=ref,def$a={keyword:"$dynamicAnchor",schemaType:"string",code:_t=>dynamicAnchor(_t,_t.schema)};function dynamicAnchor(_t,e){const{gen:$t,it:xt}=_t;xt.schemaEnv.root.dynamicAnchors[e]=!0;const At=(0,codegen_1$5._)`${names_1$2.default.dynamicAnchors}${(0,codegen_1$5.getProperty)(e)}`,kt=xt.errSchemaPath==="#"?xt.validateName:_getValidate(_t);$t.if((0,codegen_1$5._)`!${At}`,()=>$t.assign(At,kt))}dynamicAnchor$1.dynamicAnchor=dynamicAnchor;function _getValidate(_t){const{schemaEnv:e,schema:$t,self:xt}=_t.it,{root:At,baseId:kt,localRefs:Bt,meta:jt}=e.root,{schemaId:Lt}=xt.opts,Ut=new compile_1$1.SchemaEnv({schema:$t,schemaId:Lt,root:At,baseId:kt,localRefs:Bt,meta:jt});return compile_1$1.compileSchema.call(xt,Ut),(0,ref_1$1.getValidate)(_t,Ut)}dynamicAnchor$1.default=def$a;var dynamicRef$1={};Object.defineProperty(dynamicRef$1,"__esModule",{value:!0});dynamicRef$1.dynamicRef=void 0;const codegen_1$4=codegen,names_1$1=names$1,ref_1=ref,def$9={keyword:"$dynamicRef",schemaType:"string",code:_t=>dynamicRef(_t,_t.schema)};function dynamicRef(_t,e){const{gen:$t,keyword:xt,it:At}=_t;if(e[0]!=="#")throw new Error(`"${xt}" only supports hash fragment reference`);const kt=e.slice(1);if(At.allErrors)Bt();else{const Lt=$t.let("valid",!1);Bt(Lt),_t.ok(Lt)}function Bt(Lt){if(At.schemaEnv.root.dynamicAnchors[kt]){const Ut=$t.let("_v",(0,codegen_1$4._)`${names_1$1.default.dynamicAnchors}${(0,codegen_1$4.getProperty)(kt)}`);$t.if(Ut,jt(Ut,Lt),jt(At.validateName,Lt))}else jt(At.validateName,Lt)()}function jt(Lt,Ut){return Ut?()=>$t.block(()=>{(0,ref_1.callRef)(_t,Lt),$t.let(Ut,!0)}):()=>(0,ref_1.callRef)(_t,Lt)}}dynamicRef$1.dynamicRef=dynamicRef;dynamicRef$1.default=def$9;var recursiveAnchor={};Object.defineProperty(recursiveAnchor,"__esModule",{value:!0});const dynamicAnchor_1$1=dynamicAnchor$1,util_1$4=util$1,def$8={keyword:"$recursiveAnchor",schemaType:"boolean",code(_t){_t.schema?(0,dynamicAnchor_1$1.dynamicAnchor)(_t,""):(0,util_1$4.checkStrictMode)(_t.it,"$recursiveAnchor: false is ignored")}};recursiveAnchor.default=def$8;var recursiveRef={};Object.defineProperty(recursiveRef,"__esModule",{value:!0});const dynamicRef_1$1=dynamicRef$1,def$7={keyword:"$recursiveRef",schemaType:"string",code:_t=>(0,dynamicRef_1$1.dynamicRef)(_t,_t.schema)};recursiveRef.default=def$7;Object.defineProperty(dynamic$1,"__esModule",{value:!0});const dynamicAnchor_1=dynamicAnchor$1,dynamicRef_1=dynamicRef$1,recursiveAnchor_1=recursiveAnchor,recursiveRef_1=recursiveRef,dynamic=[dynamicAnchor_1.default,dynamicRef_1.default,recursiveAnchor_1.default,recursiveRef_1.default];dynamic$1.default=dynamic;var next$1={},dependentRequired={};Object.defineProperty(dependentRequired,"__esModule",{value:!0});const dependencies_1$1=dependencies,def$6={keyword:"dependentRequired",type:"object",schemaType:"object",error:dependencies_1$1.error,code:_t=>(0,dependencies_1$1.validatePropertyDeps)(_t)};dependentRequired.default=def$6;var dependentSchemas={};Object.defineProperty(dependentSchemas,"__esModule",{value:!0});const dependencies_1=dependencies,def$5={keyword:"dependentSchemas",type:"object",schemaType:"object",code:_t=>(0,dependencies_1.validateSchemaDeps)(_t)};dependentSchemas.default=def$5;var limitContains={};Object.defineProperty(limitContains,"__esModule",{value:!0});const util_1$3=util$1,def$4={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:_t,parentSchema:e,it:$t}){e.contains===void 0&&(0,util_1$3.checkStrictMode)($t,`"${_t}" without "contains" is ignored`)}};limitContains.default=def$4;Object.defineProperty(next$1,"__esModule",{value:!0});const dependentRequired_1=dependentRequired,dependentSchemas_1=dependentSchemas,limitContains_1=limitContains,next=[dependentRequired_1.default,dependentSchemas_1.default,limitContains_1.default];next$1.default=next;var unevaluated$2={},unevaluatedProperties={};Object.defineProperty(unevaluatedProperties,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$2=util$1,names_1=names$1,error$3={message:"must NOT have unevaluated properties",params:({params:_t})=>(0,codegen_1$3._)`{unevaluatedProperty: ${_t.unevaluatedProperty}}`},def$3={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:error$3,code(_t){const{gen:e,schema:$t,data:xt,errsCount:At,it:kt}=_t;if(!At)throw new Error("ajv implementation error");const{allErrors:Bt,props:jt}=kt;jt instanceof codegen_1$3.Name?e.if((0,codegen_1$3._)`${jt} !== true`,()=>e.forIn("key",xt,qt=>e.if(Ut(jt,qt),()=>Lt(qt)))):jt!==!0&&e.forIn("key",xt,qt=>jt===void 0?Lt(qt):e.if(Nt(jt,qt),()=>Lt(qt))),kt.props=!0,_t.ok((0,codegen_1$3._)`${At} === ${names_1.default.errors}`);function Lt(qt){if($t===!1){_t.setParams({unevaluatedProperty:qt}),_t.error(),Bt||e.break();return}if(!(0,util_1$2.alwaysValidSchema)(kt,$t)){const Kt=e.name("valid");_t.subschema({keyword:"unevaluatedProperties",dataProp:qt,dataPropType:util_1$2.Type.Str},Kt),Bt||e.if((0,codegen_1$3.not)(Kt),()=>e.break())}}function Ut(qt,Kt){return(0,codegen_1$3._)`!${qt} || !${qt}[${Kt}]`}function Nt(qt,Kt){const zt=[];for(const Vt in qt)qt[Vt]===!0&&zt.push((0,codegen_1$3._)`${Kt} !== ${Vt}`);return(0,codegen_1$3.and)(...zt)}}};unevaluatedProperties.default=def$3;var unevaluatedItems={};Object.defineProperty(unevaluatedItems,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$1=util$1,error$2={message:({params:{len:_t}})=>(0,codegen_1$2.str)`must NOT have more than ${_t} items`,params:({params:{len:_t}})=>(0,codegen_1$2._)`{limit: ${_t}}`},def$2={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:error$2,code(_t){const{gen:e,schema:$t,data:xt,it:At}=_t,kt=At.items||0;if(kt===!0)return;const Bt=e.const("len",(0,codegen_1$2._)`${xt}.length`);if($t===!1)_t.setParams({len:kt}),_t.fail((0,codegen_1$2._)`${Bt} > ${kt}`);else if(typeof $t=="object"&&!(0,util_1$1.alwaysValidSchema)(At,$t)){const Lt=e.var("valid",(0,codegen_1$2._)`${Bt} <= ${kt}`);e.if((0,codegen_1$2.not)(Lt),()=>jt(Lt,kt)),_t.ok(Lt)}At.items=!0;function jt(Lt,Ut){e.forRange("i",Ut,Bt,Nt=>{_t.subschema({keyword:"unevaluatedItems",dataProp:Nt,dataPropType:util_1$1.Type.Num},Lt),At.allErrors||e.if((0,codegen_1$2.not)(Lt),()=>e.break())})}}};unevaluatedItems.default=def$2;Object.defineProperty(unevaluated$2,"__esModule",{value:!0});const unevaluatedProperties_1=unevaluatedProperties,unevaluatedItems_1=unevaluatedItems,unevaluated$1=[unevaluatedProperties_1.default,unevaluatedItems_1.default];unevaluated$2.default=unevaluated$1;var format$4={},format$3={};Object.defineProperty(format$3,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:_t})=>(0,codegen_1$1.str)`must match format "${_t}"`,params:({schemaCode:_t})=>(0,codegen_1$1._)`{format: ${_t}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(_t,e){const{gen:$t,data:xt,$data:At,schema:kt,schemaCode:Bt,it:jt}=_t,{opts:Lt,errSchemaPath:Ut,schemaEnv:Nt,self:qt}=jt;if(!Lt.validateFormats)return;At?Kt():zt();function Kt(){const Vt=$t.scopeValue("formats",{ref:qt.formats,code:Lt.code.formats}),Ht=$t.const("fDef",(0,codegen_1$1._)`${Vt}[${Bt}]`),Jt=$t.let("fType"),rr=$t.let("format");$t.if((0,codegen_1$1._)`typeof ${Ht} == "object" && !(${Ht} instanceof RegExp)`,()=>$t.assign(Jt,(0,codegen_1$1._)`${Ht}.type || "string"`).assign(rr,(0,codegen_1$1._)`${Ht}.validate`),()=>$t.assign(Jt,(0,codegen_1$1._)`"string"`).assign(rr,Ht)),_t.fail$data((0,codegen_1$1.or)(Qt(),Wt()));function Qt(){return Lt.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${Bt} && !${rr}`}function Wt(){const nr=Nt.$async?(0,codegen_1$1._)`(${Ht}.async ? await ${rr}(${xt}) : ${rr}(${xt}))`:(0,codegen_1$1._)`${rr}(${xt})`,yr=(0,codegen_1$1._)`(typeof ${rr} == "function" ? ${nr} : ${rr}.test(${xt}))`;return(0,codegen_1$1._)`${rr} && ${rr} !== true && ${Jt} === ${e} && !${yr}`}}function zt(){const Vt=qt.formats[kt];if(!Vt){Qt();return}if(Vt===!0)return;const[Ht,Jt,rr]=Wt(Vt);Ht===e&&_t.pass(nr());function Qt(){if(Lt.strictSchema===!1){qt.logger.warn(yr());return}throw new Error(yr());function yr(){return`unknown format "${kt}" ignored in schema at path "${Ut}"`}}function Wt(yr){const vr=yr instanceof RegExp?(0,codegen_1$1.regexpCode)(yr):Lt.code.formats?(0,codegen_1$1._)`${Lt.code.formats}${(0,codegen_1$1.getProperty)(kt)}`:void 0,Ir=$t.scopeValue("formats",{key:kt,ref:yr,code:vr});return typeof yr=="object"&&!(yr instanceof RegExp)?[yr.type||"string",yr.validate,(0,codegen_1$1._)`${Ir}.validate`]:["string",yr,Ir]}function nr(){if(typeof Vt=="object"&&!(Vt instanceof RegExp)&&Vt.async){if(!Nt.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${rr}(${xt})`}return typeof Jt=="function"?(0,codegen_1$1._)`${rr}(${xt})`:(0,codegen_1$1._)`${rr}.test(${xt})`}}}};format$3.default=def$1;Object.defineProperty(format$4,"__esModule",{value:!0});const format_1$1=format$3,format$2=[format_1$1.default];format$4.default=format$2;var metadata$1={};Object.defineProperty(metadata$1,"__esModule",{value:!0});metadata$1.contentVocabulary=metadata$1.metadataVocabulary=void 0;metadata$1.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata$1.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft2020,"__esModule",{value:!0});const core_1=core$2,validation_1=validation$2,applicator_1=applicator$1,dynamic_1=dynamic$1,next_1=next$1,unevaluated_1=unevaluated$2,format_1=format$4,metadata_1=metadata$1,draft2020Vocabularies=[dynamic_1.default,core_1.default,validation_1.default,(0,applicator_1.default)(!0),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary,next_1.default,unevaluated_1.default];draft2020.default=draft2020Vocabularies;var discriminator={},types={};(function(_t){Object.defineProperty(_t,"__esModule",{value:!0}),_t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(_t.DiscrError||(_t.DiscrError={}))})(types);Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types,compile_1=compile,util_1=util$1,error={message:({params:{discrError:_t,tagName:e}})=>_t===types_1.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:_t,tag:e,tagName:$t}})=>(0,codegen_1._)`{error: ${_t}, tag: ${$t}, tagValue: ${e}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(_t){const{gen:e,data:$t,schema:xt,parentSchema:At,it:kt}=_t,{oneOf:Bt}=At;if(!kt.opts.discriminator)throw new Error("discriminator: requires discriminator option");const jt=xt.propertyName;if(typeof jt!="string")throw new Error("discriminator: requires propertyName");if(xt.mapping)throw new Error("discriminator: mapping is not supported");if(!Bt)throw new Error("discriminator: requires oneOf keyword");const Lt=e.let("valid",!1),Ut=e.const("tag",(0,codegen_1._)`${$t}${(0,codegen_1.getProperty)(jt)}`);e.if((0,codegen_1._)`typeof ${Ut} == "string"`,()=>Nt(),()=>_t.error(!1,{discrError:types_1.DiscrError.Tag,tag:Ut,tagName:jt})),_t.ok(Lt);function Nt(){const zt=Kt();e.if(!1);for(const Vt in zt)e.elseIf((0,codegen_1._)`${Ut} === ${Vt}`),e.assign(Lt,qt(zt[Vt]));e.else(),_t.error(!1,{discrError:types_1.DiscrError.Mapping,tag:Ut,tagName:jt}),e.endIf()}function qt(zt){const Vt=e.name("valid"),Ht=_t.subschema({keyword:"oneOf",schemaProp:zt},Vt);return _t.mergeEvaluated(Ht,codegen_1.Name),Vt}function Kt(){var zt;const Vt={},Ht=rr(At);let Jt=!0;for(let nr=0;nr<Bt.length;nr++){let yr=Bt[nr];yr!=null&&yr.$ref&&!(0,util_1.schemaHasRulesButRef)(yr,kt.self.RULES)&&(yr=compile_1.resolveRef.call(kt.self,kt.schemaEnv.root,kt.baseId,yr==null?void 0:yr.$ref),yr instanceof compile_1.SchemaEnv&&(yr=yr.schema));const vr=(zt=yr==null?void 0:yr.properties)===null||zt===void 0?void 0:zt[jt];if(typeof vr!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${jt}"`);Jt=Jt&&(Ht||rr(yr)),Qt(vr,nr)}if(!Jt)throw new Error(`discriminator: "${jt}" must be required`);return Vt;function rr({required:nr}){return Array.isArray(nr)&&nr.includes(jt)}function Qt(nr,yr){if(nr.const)Wt(nr.const,yr);else if(nr.enum)for(const vr of nr.enum)Wt(vr,yr);else throw new Error(`discriminator: "properties/${jt}" must have "const" or "enum"`)}function Wt(nr,yr){if(typeof nr!="string"||nr in Vt)throw new Error(`discriminator: "${jt}" values must be unique strings`);Vt[nr]=yr}}}};discriminator.default=def;var jsonSchema202012={};const $schema$7="https://json-schema.org/draft/2020-12/schema",$id$7="https://json-schema.org/draft/2020-12/schema",$vocabulary$7={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor$7="meta",title$7="Core and Validation specifications meta-schema",allOf=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],type$7=["object","boolean"],$comment="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",properties$7={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},require$$0={$schema:$schema$7,$id:$id$7,$vocabulary:$vocabulary$7,$dynamicAnchor:$dynamicAnchor$7,title:title$7,allOf,type:type$7,$comment,properties:properties$7},$schema$6="https://json-schema.org/draft/2020-12/schema",$id$6="https://json-schema.org/draft/2020-12/meta/applicator",$vocabulary$6={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},$dynamicAnchor$6="meta",title$6="Applicator vocabulary meta-schema",type$6=["object","boolean"],properties$6={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},$defs$2={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},require$$1={$schema:$schema$6,$id:$id$6,$vocabulary:$vocabulary$6,$dynamicAnchor:$dynamicAnchor$6,title:title$6,type:type$6,properties:properties$6,$defs:$defs$2},$schema$5="https://json-schema.org/draft/2020-12/schema",$id$5="https://json-schema.org/draft/2020-12/meta/unevaluated",$vocabulary$5={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},$dynamicAnchor$5="meta",title$5="Unevaluated applicator vocabulary meta-schema",type$5=["object","boolean"],properties$5={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},require$$2={$schema:$schema$5,$id:$id$5,$vocabulary:$vocabulary$5,$dynamicAnchor:$dynamicAnchor$5,title:title$5,type:type$5,properties:properties$5},$schema$4="https://json-schema.org/draft/2020-12/schema",$id$4="https://json-schema.org/draft/2020-12/meta/content",$vocabulary$4={"https://json-schema.org/draft/2020-12/vocab/content":!0},$dynamicAnchor$4="meta",title$4="Content vocabulary meta-schema",type$4=["object","boolean"],properties$4={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},require$$3={$schema:$schema$4,$id:$id$4,$vocabulary:$vocabulary$4,$dynamicAnchor:$dynamicAnchor$4,title:title$4,type:type$4,properties:properties$4},$schema$3="https://json-schema.org/draft/2020-12/schema",$id$3="https://json-schema.org/draft/2020-12/meta/core",$vocabulary$3={"https://json-schema.org/draft/2020-12/vocab/core":!0},$dynamicAnchor$3="meta",title$3="Core vocabulary meta-schema",type$3=["object","boolean"],properties$3={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},$defs$1={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},require$$4={$schema:$schema$3,$id:$id$3,$vocabulary:$vocabulary$3,$dynamicAnchor:$dynamicAnchor$3,title:title$3,type:type$3,properties:properties$3,$defs:$defs$1},$schema$2="https://json-schema.org/draft/2020-12/schema",$id$2="https://json-schema.org/draft/2020-12/meta/format-annotation",$vocabulary$2={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},$dynamicAnchor$2="meta",title$2="Format vocabulary meta-schema for annotation results",type$2=["object","boolean"],properties$2={format:{type:"string"}},require$$5={$schema:$schema$2,$id:$id$2,$vocabulary:$vocabulary$2,$dynamicAnchor:$dynamicAnchor$2,title:title$2,type:type$2,properties:properties$2},$schema$1="https://json-schema.org/draft/2020-12/schema",$id$1="https://json-schema.org/draft/2020-12/meta/meta-data",$vocabulary$1={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},$dynamicAnchor$1="meta",title$1="Meta-data vocabulary meta-schema",type$1=["object","boolean"],properties$1={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},require$$6={$schema:$schema$1,$id:$id$1,$vocabulary:$vocabulary$1,$dynamicAnchor:$dynamicAnchor$1,title:title$1,type:type$1,properties:properties$1},$schema="https://json-schema.org/draft/2020-12/schema",$id="https://json-schema.org/draft/2020-12/meta/validation",$vocabulary={"https://json-schema.org/draft/2020-12/vocab/validation":!0},$dynamicAnchor="meta",title="Validation vocabulary meta-schema",type=["object","boolean"],properties={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},$defs={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},require$$7={$schema,$id,$vocabulary,$dynamicAnchor,title,type,properties,$defs};Object.defineProperty(jsonSchema202012,"__esModule",{value:!0});const metaSchema=require$$0,applicator=require$$1,unevaluated=require$$2,content=require$$3,core=require$$4,format$1=require$$5,metadata=require$$6,validation=require$$7,META_SUPPORT_DATA=["/properties"];function addMetaSchema2020(_t){return[metaSchema,applicator,unevaluated,content,core,e(this,format$1),metadata,e(this,validation)].forEach($t=>this.addMetaSchema($t,void 0,!1)),this;function e($t,xt){return _t?$t.$dataMetaSchema(xt,META_SUPPORT_DATA):xt}}jsonSchema202012.default=addMetaSchema2020;(function(_t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const $t=core$3,xt=draft2020,At=discriminator,kt=jsonSchema202012,Bt="https://json-schema.org/draft/2020-12/schema";class jt extends $t.default{constructor(zt={}){super({...zt,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),xt.default.forEach(zt=>this.addVocabulary(zt)),this.opts.discriminator&&this.addKeyword(At.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:zt,meta:Vt}=this.opts;Vt&&(kt.default.call(this,zt),this.refs["http://json-schema.org/schema"]=Bt)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Bt)?Bt:void 0)}}_t.exports=e=jt,Object.defineProperty(e,"__esModule",{value:!0}),e.default=jt;var Lt=validate;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return Lt.KeywordCxt}});var Ut=codegen;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return Ut._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return Ut.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return Ut.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return Ut.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return Ut.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return Ut.CodeGen}});var Nt=validation_error;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return Nt.default}});var qt=ref_error;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return qt.default}})})(_2020,_2020.exports);var _2020Exports=_2020.exports;const Ajv=getDefaultExportFromCjs(_2020Exports);var __awaiter$t=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class ProtocolsGrantAuthorization{static authorizeConfigure(e){return __awaiter$t(this,void 0,void 0,function*(){const{protocolsConfigureMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:$t,expectedGrantor:xt,expectedGrantee:At,permissionGrant:kt,messageStore:Bt}),ProtocolsGrantAuthorization.verifyScope($t,kt.scope)})}static authorizeQuery(e){var $t;return __awaiter$t(this,void 0,void 0,function*(){const{expectedGrantee:xt,expectedGrantor:At,incomingMessage:kt,permissionGrant:Bt,messageStore:jt}=e;yield GrantAuthorization.performBaseValidation({incomingMessage:kt,expectedGrantor:At,expectedGrantee:xt,permissionGrant:Bt,messageStore:jt});const Ut=Bt.scope.protocol,Nt=($t=kt.descriptor.filter)===null||$t===void 0?void 0:$t.protocol;if(Ut!==void 0&&Nt!==Ut)throw new DwnError(DwnErrorCode.ProtocolsGrantAuthorizationQueryProtocolScopeMismatch,`Grant protocol scope ${Ut} does not match protocol in message ${Nt}`)})}static verifyScope(e,$t){if($t.protocol!==void 0&&$t.protocol!==e.descriptor.definition.protocol)throw new DwnError(DwnErrorCode.ProtocolsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the configure message.")}}var ProtocolActor;(function(_t){_t.Anyone="anyone",_t.Author="author",_t.Recipient="recipient"})(ProtocolActor||(ProtocolActor={}));var ProtocolAction;(function(_t){_t.CoDelete="co-delete",_t.CoPrune="co-prune",_t.CoUpdate="co-update",_t.Create="create",_t.Delete="delete",_t.Prune="prune",_t.Query="query",_t.Read="read",_t.Subscribe="subscribe",_t.Update="update"})(ProtocolAction||(ProtocolAction={}));var __awaiter$s=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$5=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class ProtocolsConfigure extends AbstractMessage{static parse(e){return __awaiter$s(this,void 0,void 0,function*(){return Message.validateJsonSchema(e),ProtocolsConfigure.validateProtocolDefinition(e.descriptor.definition),yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor),Time.validateTimestamp(e.descriptor.messageTimestamp),new ProtocolsConfigure(e)})}static create(e){var $t;return __awaiter$s(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Protocols,method:DwnMethodName.Configure,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp(),definition:ProtocolsConfigure.normalizeDefinition(e.definition)},At=yield Message.createAuthorization({descriptor:xt,signer:e.signer,delegatedGrant:e.delegatedGrant,permissionGrantId:e.permissionGrantId}),kt={descriptor:xt,authorization:At};return Message.validateJsonSchema(kt),ProtocolsConfigure.validateProtocolDefinition(kt.descriptor.definition),new ProtocolsConfigure(kt)})}authorizeAuthorDelegate(e){return __awaiter$s(this,void 0,void 0,function*(){const $t=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield ProtocolsGrantAuthorization.authorizeConfigure({protocolsConfigureMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:$t,messageStore:e})})}static validateProtocolDefinition(e){const{protocol:$t,types:xt}=e;validateProtocolUrlNormalized($t);for(const At in xt){const kt=xt[At].schema;kt!==void 0&&validateSchemaUrlNormalized(kt)}ProtocolsConfigure.validateStructure(e)}static validateStructure(e){const $t=Object.keys(e.types),xt=ProtocolsConfigure.fetchAllRolePathsRecursively("",e.structure,[]);ProtocolsConfigure.validateRuleSetRecursively({ruleSet:e.structure,ruleSetProtocolPath:"",recordTypes:$t,roles:xt})}static fetchAllRolePathsRecursively(e,$t,xt){if(e.split("/").length>10)throw new DwnError(DwnErrorCode.ProtocolsConfigureRecordNestingDepthExceeded,"Record nesting depth exceeded 10 levels.");for(const At in $t){if(At.startsWith("$"))continue;const kt=$t[At];let Bt;e===""?Bt=At:Bt=`${e}/${At}`,kt.$role?xt.push(Bt):ProtocolsConfigure.fetchAllRolePathsRecursively(Bt,kt,xt)}return xt}static validateRuleSetRecursively(e){var $t;const{ruleSet:xt,ruleSetProtocolPath:At,recordTypes:kt,roles:Bt}=e;if(xt.$size!==void 0){const{min:Lt=0,max:Ut}=xt.$size;if(Ut!==void 0&&Ut<Lt)throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidSize,`Invalid size range found: max limit ${Ut} less than min limit ${Lt} at protocol path '${At}'`)}if(xt.$tags){const Lt=new Ajv.default,Ut=xt.$tags,Nt=__rest$5(Ut,["$allowUndefinedTags","$requiredTags"]);for(const qt in Nt){const Kt=Nt[qt];if(!Lt.validateSchema(Kt)){const zt=Lt.errorsText(Lt.errors,{dataVar:`${At}/$tags/${qt}`});throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidTagSchema,`tags schema validation error: ${zt}`)}}}const jt=($t=xt.$actions)!==null&&$t!==void 0?$t:[];for(let Lt=0;Lt<jt.length;Lt++){const Ut=jt[Lt];if(Ut.role!==void 0&&!Bt.includes(Ut.role))throw new DwnError(DwnErrorCode.ProtocolsConfigureRoleDoesNotExistAtGivenPath,`Role in action ${JSON.stringify(Ut)} for rule set ${At} does not exist.`);if(Ut.who==="anyone"&&Ut.of)throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidActionOfNotAllowed,`'of' is not allowed at rule set protocol path (${At})`);if(Ut.who===ProtocolActor.Recipient&&Ut.of===void 0&&Ut.can.some(qt=>![ProtocolAction.CoUpdate,ProtocolAction.CoDelete,ProtocolAction.CoPrune].includes(qt)))throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidRecipientOfAction,"Rules for `recipient` without `of` property must have `can` containing only `co-update`, `co-delete`, and `co-prune`.");if(Ut.who===ProtocolActor.Author&&!Ut.of)throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidActionMissingOf,"'of' is required when 'author' is specified as 'who'");if(Ut.can!==void 0){if(Ut.can.includes(ProtocolAction.Update)&&!Ut.can.includes(ProtocolAction.Create))throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidActionUpdateWithoutCreate,`Action rule ${JSON.stringify(Ut)} contains 'update' action but missing the required 'create' action.`);if(Ut.can.includes(ProtocolAction.Delete)&&!Ut.can.includes(ProtocolAction.Create))throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidActionDeleteWithoutCreate,`Action rule ${JSON.stringify(Ut)} contains 'delete' action but missing the required 'create' action.`)}for(let Nt=Lt+1;Nt<jt.length;Nt++){const qt=jt[Nt];if(Ut.who!==void 0){if(Ut.who===qt.who&&Ut.of===qt.of)throw new DwnError(DwnErrorCode.ProtocolsConfigureDuplicateActorInRuleSet,`More than one action rule per actor ${Ut.who} of ${Ut.of} not allowed within a rule set: ${JSON.stringify(Ut)}`)}else if(Ut.role===qt.role)throw new DwnError(DwnErrorCode.ProtocolsConfigureDuplicateRoleInRuleSet,`More than one action rule per role ${Ut.role} not allowed within a rule set: ${JSON.stringify(Ut)}`)}}for(const Lt in xt){if(Lt.startsWith("$"))continue;if(!kt.includes(Lt))throw new DwnError(DwnErrorCode.ProtocolsConfigureInvalidRuleSetRecordType,`Rule set ${Lt} is not declared as an allowed type in the protocol definition.`);const Ut=xt[Lt];let Nt;At===""?Nt=Lt:Nt=`${At}/${Lt}`,ProtocolsConfigure.validateRuleSetRecursively({ruleSet:Ut,ruleSetProtocolPath:Nt,recordTypes:kt,roles:Bt})}}static normalizeDefinition(e){const $t=Object.assign({},e.types);for(const xt in $t){const At=$t[xt].schema;At!==void 0&&($t[xt].schema=normalizeSchemaUrl(At))}return Object.assign(Object.assign({},e),{protocol:normalizeProtocolUrl(e.protocol),types:$t})}}var __awaiter$r=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class ProtocolsQuery extends AbstractMessage{static parse(e){return __awaiter$r(this,void 0,void 0,function*(){return e.authorization!==void 0&&(yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor)),e.descriptor.filter!==void 0&&validateProtocolUrlNormalized(e.descriptor.filter.protocol),Time.validateTimestamp(e.descriptor.messageTimestamp),new ProtocolsQuery(e)})}static create(e){var $t;return __awaiter$r(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Protocols,method:DwnMethodName.Query,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp(),filter:e.filter?ProtocolsQuery.normalizeFilter(e.filter):void 0};removeUndefinedProperties$1(xt);let At;e.signer!==void 0&&(At=yield Message.createAuthorization({descriptor:xt,signer:e.signer,permissionGrantId:e.permissionGrantId}));const kt={descriptor:xt,authorization:At};return Message.validateJsonSchema(kt),new ProtocolsQuery(kt)})}static normalizeFilter(e){return Object.assign(Object.assign({},e),{protocol:normalizeProtocolUrl(e.protocol)})}authorize(e,$t){return __awaiter$r(this,void 0,void 0,function*(){if(this.author!==e)if(this.author!==void 0&&this.signaturePayload.permissionGrantId){const xt=yield PermissionsProtocol.fetchGrant(e,$t,this.signaturePayload.permissionGrantId);yield ProtocolsGrantAuthorization.authorizeQuery({expectedGrantor:e,expectedGrantee:this.author,incomingMessage:this.message,permissionGrant:xt,messageStore:$t})}else throw new DwnError(DwnErrorCode.ProtocolsQueryUnauthorized,"The ProtocolsQuery failed authorization")})}}var __awaiter$q=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class RecordsDelete extends AbstractMessage{static parse(e){return __awaiter$q(this,void 0,void 0,function*(){let $t;return e.authorization!==void 0&&($t=yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield Records.validateDelegatedGrantReferentialIntegrity(e,$t),Time.validateTimestamp(e.descriptor.messageTimestamp),new RecordsDelete(e)})}static create(e){var $t,xt;return __awaiter$q(this,void 0,void 0,function*(){const At=e.recordId,kt=Time.getCurrentTimestamp(),Bt={interface:DwnInterfaceName.Records,method:DwnMethodName.Delete,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:kt,recordId:At,prune:(xt=e.prune)!==null&&xt!==void 0?xt:!1},jt=yield Message.createAuthorization({descriptor:Bt,signer:e.signer,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}),Lt={descriptor:Bt,authorization:jt};return Message.validateJsonSchema(Lt),new RecordsDelete(Lt)})}constructIndexes(e){const $t=this.message,xt=Object.assign({},$t.descriptor),{protocol:At,protocolPath:kt,recipient:Bt,schema:jt,parentId:Lt,dateCreated:Ut}=e.descriptor,Nt=Object.assign({protocol:At,protocolPath:kt,recipient:Bt,schema:jt,parentId:Lt,dateCreated:Ut,contextId:e.contextId,author:this.author},xt);return removeUndefinedProperties$1(Nt),Nt}authorizeDelegate(e,$t){return __awaiter$q(this,void 0,void 0,function*(){const xt=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield RecordsGrantAuthorization.authorizeDelete({recordsDeleteMessage:this.message,recordsWriteToDelete:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:xt,messageStore:$t})})}}var ResumableTaskName;(function(_t){_t.RecordsDelete="RecordsDelete"})(ResumableTaskName||(ResumableTaskName={}));var SortDirection;(function(_t){_t[_t.Descending=-1]="Descending",_t[_t.Ascending=1]="Ascending"})(SortDirection||(SortDirection={}));var __awaiter$p=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class RecordsRead extends AbstractMessage{static parse(e){return __awaiter$p(this,void 0,void 0,function*(){let $t;return e.authorization!==void 0&&($t=yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield Records.validateDelegatedGrantReferentialIntegrity(e,$t),Time.validateTimestamp(e.descriptor.messageTimestamp),new RecordsRead(e)})}static create(e){var $t;return __awaiter$p(this,void 0,void 0,function*(){const{filter:xt,signer:At,permissionGrantId:kt,protocolRole:Bt}=e,jt=Time.getCurrentTimestamp(),Lt={interface:DwnInterfaceName.Records,method:DwnMethodName.Read,filter:Records.normalizeFilter(xt),messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:jt};removeUndefinedProperties$1(Lt);let Ut;At!==void 0&&(Ut=yield Message.createAuthorization({descriptor:Lt,signer:At,permissionGrantId:kt,protocolRole:Bt,delegatedGrant:e.delegatedGrant}));const Nt={descriptor:Lt,authorization:Ut};return Message.validateJsonSchema(Nt),new RecordsRead(Nt)})}authorizeDelegate(e,$t){return __awaiter$p(this,void 0,void 0,function*(){const xt=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield RecordsGrantAuthorization.authorizeRead({recordsReadMessage:this.message,recordsWriteMessageToBeRead:e,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:xt,messageStore:$t})})}}var __awaiter$o=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class RecordsSubscribe extends AbstractMessage{static parse(e){return __awaiter$o(this,void 0,void 0,function*(){let $t;if(e.authorization!==void 0&&($t=yield Message.validateSignatureStructure(e.authorization.signature,e.descriptor)),yield Records.validateDelegatedGrantReferentialIntegrity(e,$t),($t==null?void 0:$t.protocolRole)!==void 0&&e.descriptor.filter.protocolPath===void 0)throw new DwnError(DwnErrorCode.RecordsSubscribeFilterMissingRequiredProperties,"Role-authorized subscriptions must include `protocolPath` in the filter");return e.descriptor.filter.protocol!==void 0&&validateProtocolUrlNormalized(e.descriptor.filter.protocol),e.descriptor.filter.schema!==void 0&&validateSchemaUrlNormalized(e.descriptor.filter.schema),Time.validateTimestamp(e.descriptor.messageTimestamp),new RecordsSubscribe(e)})}static create(e){var $t;return __awaiter$o(this,void 0,void 0,function*(){const xt={interface:DwnInterfaceName.Records,method:DwnMethodName.Subscribe,messageTimestamp:($t=e.messageTimestamp)!==null&&$t!==void 0?$t:Time.getCurrentTimestamp(),filter:Records.normalizeFilter(e.filter)};removeUndefinedProperties$1(xt);const At=e.signer;let kt;At&&(kt=yield Message.createAuthorization({descriptor:xt,signer:At,protocolRole:e.protocolRole,delegatedGrant:e.delegatedGrant}));const Bt={descriptor:xt,authorization:kt};return Message.validateJsonSchema(Bt),new RecordsSubscribe(Bt)})}authorizeDelegate(e){return __awaiter$o(this,void 0,void 0,function*(){const $t=yield PermissionGrant$1.parse(this.message.authorization.authorDelegatedGrant);yield RecordsGrantAuthorization.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:$t,messageStore:e})})}}var DidVerificationRelationship$2;(function(_t){_t.authentication="authentication",_t.assertionMethod="assertionMethod",_t.keyAgreement="keyAgreement",_t.capabilityInvocation="capabilityInvocation",_t.capabilityDelegation="capabilityDelegation"})(DidVerificationRelationship$2||(DidVerificationRelationship$2={}));var DidErrorCode$2;(function(_t){_t.InvalidDid="invalidDid",_t.MethodNotSupported="methodNotSupported",_t.InternalError="internalError",_t.InvalidDidDocument="invalidDidDocument",_t.InvalidDidDocumentLength="invalidDidDocumentLength",_t.InvalidDidUrl="invalidDidUrl",_t.InvalidPreviousDidProof="invalidPreviousDidProof",_t.InvalidPublicKey="invalidPublicKey",_t.InvalidPublicKeyLength="invalidPublicKeyLength",_t.InvalidPublicKeyType="invalidPublicKeyType",_t.InvalidSignature="invalidSignature",_t.NotFound="notFound",_t.RepresentationNotSupported="representationNotSupported",_t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(DidErrorCode$2||(DidErrorCode$2={}));function coerce(_t){if(_t instanceof Uint8Array&&_t.constructor.name==="Uint8Array")return _t;if(_t instanceof ArrayBuffer)return new Uint8Array(_t);if(ArrayBuffer.isView(_t))return new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength);throw new Error("Unknown type, must be binary type")}function base(_t,e){if(_t.length>=255)throw new TypeError("Alphabet too long");for(var $t=new Uint8Array(256),xt=0;xt<$t.length;xt++)$t[xt]=255;for(var At=0;At<_t.length;At++){var kt=_t.charAt(At),Bt=kt.charCodeAt(0);if($t[Bt]!==255)throw new TypeError(kt+" is ambiguous");$t[Bt]=At}var jt=_t.length,Lt=_t.charAt(0),Ut=Math.log(jt)/Math.log(256),Nt=Math.log(256)/Math.log(jt);function qt(Vt){if(Vt instanceof Uint8Array||(ArrayBuffer.isView(Vt)?Vt=new Uint8Array(Vt.buffer,Vt.byteOffset,Vt.byteLength):Array.isArray(Vt)&&(Vt=Uint8Array.from(Vt))),!(Vt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Vt.length===0)return"";for(var Ht=0,Jt=0,rr=0,Qt=Vt.length;rr!==Qt&&Vt[rr]===0;)rr++,Ht++;for(var Wt=(Qt-rr)*Nt+1>>>0,nr=new Uint8Array(Wt);rr!==Qt;){for(var yr=Vt[rr],vr=0,Ir=Wt-1;(yr!==0||vr<Jt)&&Ir!==-1;Ir--,vr++)yr+=256*nr[Ir]>>>0,nr[Ir]=yr%jt>>>0,yr=yr/jt>>>0;if(yr!==0)throw new Error("Non-zero carry");Jt=vr,rr++}for(var xr=Wt-Jt;xr!==Wt&&nr[xr]===0;)xr++;for(var Or=Lt.repeat(Ht);xr<Wt;++xr)Or+=_t.charAt(nr[xr]);return Or}function Kt(Vt){if(typeof Vt!="string")throw new TypeError("Expected String");if(Vt.length===0)return new Uint8Array;var Ht=0;if(Vt[Ht]!==" "){for(var Jt=0,rr=0;Vt[Ht]===Lt;)Jt++,Ht++;for(var Qt=(Vt.length-Ht)*Ut+1>>>0,Wt=new Uint8Array(Qt);Vt[Ht];){var nr=$t[Vt.charCodeAt(Ht)];if(nr===255)return;for(var yr=0,vr=Qt-1;(nr!==0||yr<rr)&&vr!==-1;vr--,yr++)nr+=jt*Wt[vr]>>>0,Wt[vr]=nr%256>>>0,nr=nr/256>>>0;if(nr!==0)throw new Error("Non-zero carry");rr=yr,Ht++}if(Vt[Ht]!==" "){for(var Ir=Qt-rr;Ir!==Qt&&Wt[Ir]===0;)Ir++;for(var xr=new Uint8Array(Jt+(Qt-Ir)),Or=Jt;Ir!==Qt;)xr[Or++]=Wt[Ir++];return xr}}}function zt(Vt){var Ht=Kt(Vt);if(Ht)return Ht;throw new Error(`Non-${e} character`)}return{encode:qt,decodeUnsafe:Kt,decode:zt}}var src=base,_brrp__multiformats_scope_baseX=src;let Encoder$1=class{constructor(e,$t,xt){dn(this,"name");dn(this,"prefix");dn(this,"baseEncode");this.name=e,this.prefix=$t,this.baseEncode=xt}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}};class Decoder{constructor(e,$t,xt){dn(this,"name");dn(this,"prefix");dn(this,"baseDecode");dn(this,"prefixCodePoint");if(this.name=e,this.prefix=$t,$t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=$t.codePointAt(0),this.baseDecode=xt}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){dn(this,"decoders");this.decoders=e}or(e){return or(this,e)}decode(e){const $t=e[0],xt=this.decoders[$t];if(xt!=null)return xt.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function or(_t,e){return new ComposedDecoder({..._t.decoders??{[_t.prefix]:_t},...e.decoders??{[e.prefix]:e}})}class Codec{constructor(e,$t,xt,At){dn(this,"name");dn(this,"prefix");dn(this,"baseEncode");dn(this,"baseDecode");dn(this,"encoder");dn(this,"decoder");this.name=e,this.prefix=$t,this.baseEncode=xt,this.baseDecode=At,this.encoder=new Encoder$1(e,$t,xt),this.decoder=new Decoder(e,$t,At)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function from$3({name:_t,prefix:e,encode:$t,decode:xt}){return new Codec(_t,e,$t,xt)}function baseX({name:_t,prefix:e,alphabet:$t}){const{encode:xt,decode:At}=_brrp__multiformats_scope_baseX($t,_t);return from$3({prefix:e,name:_t,encode:xt,decode:kt=>coerce(At(kt))})}function decode$6(_t,e,$t,xt){const At={};for(let Nt=0;Nt<e.length;++Nt)At[e[Nt]]=Nt;let kt=_t.length;for(;_t[kt-1]==="=";)--kt;const Bt=new Uint8Array(kt*$t/8|0);let jt=0,Lt=0,Ut=0;for(let Nt=0;Nt<kt;++Nt){const qt=At[_t[Nt]];if(qt===void 0)throw new SyntaxError(`Non-${xt} character`);Lt=Lt<<$t|qt,jt+=$t,jt>=8&&(jt-=8,Bt[Ut++]=255&Lt>>jt)}if(jt>=$t||255&Lt<<8-jt)throw new SyntaxError("Unexpected end of data");return Bt}function encode$5(_t,e,$t){const xt=e[e.length-1]==="=",At=(1<<$t)-1;let kt="",Bt=0,jt=0;for(let Lt=0;Lt<_t.length;++Lt)for(jt=jt<<8|_t[Lt],Bt+=8;Bt>$t;)Bt-=$t,kt+=e[At&jt>>Bt];if(Bt!==0&&(kt+=e[At&jt<<$t-Bt]),xt)for(;kt.length*$t&7;)kt+="=";return kt}function rfc4648({name:_t,prefix:e,bitsPerChar:$t,alphabet:xt}){return from$3({prefix:e,name:_t,encode(At){return encode$5(At,xt,$t)},decode(At){return decode$6(At,xt,$t,_t)}})}rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});new TextEncoder;new TextDecoder;var encode_1=encode$4,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$4(_t,e,$t){e=e||[],$t=$t||0;for(var xt=$t;_t>=INT;)e[$t++]=_t&255|MSB,_t/=128;for(;_t&MSBALL;)e[$t++]=_t&255|MSB,_t>>>=7;return e[$t]=_t|0,encode$4.bytes=$t-xt+1,e}var decode$5=read,MSB$1=128,REST$1=127;function read(_t,xt){var $t=0,xt=xt||0,At=0,kt=xt,Bt,jt=_t.length;do{if(kt>=jt)throw read.bytes=0,new RangeError("Could not decode varint");Bt=_t[kt++],$t+=At<28?(Bt&REST$1)<<At:(Bt&REST$1)*Math.pow(2,At),At+=7}while(Bt>=MSB$1);return read.bytes=kt-xt,$t}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(_t){return _t<N1?1:_t<N2?2:_t<N3?3:_t<N4?4:_t<N5?5:_t<N6?6:_t<N7?7:_t<N8?8:_t<N9?9:10},varint={encode:encode_1,decode:decode$5,encodingLength:length},_brrp_varint=varint;function decode$4(_t,e=0){return[_brrp_varint.decode(_t,e),_brrp_varint.decode.bytes]}function encodeTo(_t,e,$t=0){return _brrp_varint.encode(_t,e,$t),e}function encodingLength$4(_t){return _brrp_varint.encodingLength(_t)}let Multicodec$1=class ti{static addPrefix(e){var $t;let{code:xt,data:At,name:kt}=e;if(!(kt?!xt:xt))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(xt=ti.codeToName.has(xt)?xt:ti.nameToCode.get(kt),xt===void 0)throw new Error(`Unsupported multicodec: ${($t=e.name)!==null&&$t!==void 0?$t:e.code}`);const Bt=encodingLength$4(xt),jt=new Uint8Array(Bt+At.byteLength);return jt.set(At,Bt),encodeTo(xt,jt),jt}static getCodeFromData(e){const{prefixedData:$t}=e,[xt,At]=decode$4($t);return xt}static getCodeFromName(e){const{name:$t}=e,xt=ti.nameToCode.get($t);if(xt===void 0)throw new Error(`Unsupported multicodec: ${$t}`);return xt}static getNameFromCode(e){const{code:$t}=e,xt=ti.codeToName.get($t);if(xt===void 0)throw new Error(`Unsupported multicodec: ${$t}`);return xt}static registerCodec(e){ti.codeToName.set(e.code,e.name),ti.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:$t}=e,[xt,At]=decode$4($t),kt=ti.codeToName.get(xt);if(kt===void 0)throw new Error(`Unsupported multicodec: ${xt}`);return{code:xt,data:$t.slice(At),name:kt}}};Multicodec$1.codeToName=new Map;Multicodec$1.nameToCode=new Map;Multicodec$1.registerCodec({code:237,name:"ed25519-pub"});Multicodec$1.registerCodec({code:4864,name:"ed25519-priv"});Multicodec$1.registerCodec({code:236,name:"x25519-pub"});Multicodec$1.registerCodec({code:4866,name:"x25519-priv"});Multicodec$1.registerCodec({code:231,name:"secp256k1-pub"});Multicodec$1.registerCodec({code:4865,name:"secp256k1-priv"});var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function _t(...e){const $t=e.reduce((xt,At)=>Object.assign(xt,At),{});return Object.assign($t,{snapshots:$t.snapshots||!1,permanence:$t.permanence||!1,seek:$t.seek||!1,clear:$t.clear||!1,getMany:$t.getMany||!1,keyIterator:$t.keyIterator||!1,valueIterator:$t.valueIterator||!1,iteratorNextv:$t.iteratorNextv||!1,iteratorAll:$t.iteratorAll||!1,status:$t.status||!1,createIfMissing:$t.createIfMissing||!1,errorIfExists:$t.errorIfExists||!1,deferredOpen:$t.deferredOpen||!1,promises:$t.promises||!1,streams:$t.streams||!1,encodings:Object.assign({},$t.encodings),events:Object.assign({},$t.events),additionalMethods:Object.assign({},$t.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,$t){super(e||""),typeof $t=="object"&&$t!==null&&($t.code&&(this.code=String($t.code)),$t.expected&&(this.expected=!0),$t.transient&&(this.transient=!0),$t.cause&&(this.cause=$t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$3}=buffer$2||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$3.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const $t=this.encode(e);return Buffer$3.from($t.buffer,$t.byteOffset,$t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$3.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:$t}=textEndec();return new ViewFormat$2({encode:xt=>e.encode(this.encode(xt)),decode:xt=>this.decode($t.decode(xt)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$2}=buffer$2||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$2,textDecoder:textDecoder$1}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity=_t=>_t;encodings$1.utf8=new UTF8Format$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t.toString("utf8"):ArrayBuffer.isView(_t)?textDecoder$1.decode(_t):String(_t)},decode:identity,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(_t){return ArrayBuffer.isView(_t)?_t:textEncoder$2.encode(_t)},decode:function(_t){return textDecoder$1.decode(_t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t:ArrayBuffer.isView(_t)?Buffer$2.from(_t.buffer,_t.byteOffset,_t.byteLength):Buffer$2.from(String(_t),"utf8")},decode:function(_t){return _t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t:ArrayBuffer.isView(_t)?Buffer$2.from(_t.buffer,_t.byteOffset,_t.byteLength):Buffer$2.from(String(_t),"utf8")},decode:identity,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(_t){return ArrayBuffer.isView(_t)?_t:Buffer$2.from(String(_t),"utf8")},decode:function(_t){return Buffer$2.from(_t.buffer,_t.byteOffset,_t.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(_t){return ArrayBuffer.isView(_t)?_t:textEncoder$2.encode(_t)},decode:identity,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t:ArrayBuffer.isView(_t)?Buffer$2.from(_t.buffer,_t.byteOffset,_t.byteLength):Buffer$2.from(String(_t),"utf8")},decode:identity,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t:Buffer$2.from(String(_t),"hex")},decode:function(_t){return _t.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(_t){return Buffer$2.isBuffer(_t)?_t:Buffer$2.from(String(_t),"base64")},decode:function(_t){return _t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every($t=>validFormats.has($t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const $t in encodings)try{this.encoding($t)}catch(xt){if(xt.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw xt}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let $t=this[kEncodings].get(e);if($t===void 0){if(typeof e=="string"&&e!==""){if($t=lookup$1[e],!$t)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");$t=from$2(e)}const{name:xt,format:At}=$t;if(!this[kFormats].has(At))if(this[kFormats].has("view"))$t=$t.createViewTranscoder();else if(this[kFormats].has("buffer"))$t=$t.createBufferTranscoder();else if(this[kFormats].has("utf8"))$t=$t.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${xt}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const kt of[e,xt,$t.name,$t.commonName])this[kEncodings].set(kt,$t)}return $t}};levelTranscoder.Transcoder=Transcoder$1;function from$2(_t){if(_t instanceof Encoding)return _t;const e="type"in _t&&typeof _t.type=="string"?_t.type:void 0,$t=_t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(_t)){case"view":return new ViewFormat({..._t,name:$t});case"utf8":return new UTF8Format({..._t,name:$t});case"buffer":return new BufferFormat({..._t,name:$t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(_t){return"format"in _t&&_t.format!==void 0?_t.format:"buffer"in _t&&typeof _t.buffer=="boolean"?_t.buffer?"buffer":"utf8":"code"in _t&&Number.isInteger(_t.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup$1={...encodings,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:_t=>Promise.resolve().then(_t),nextTick=nextTickBrowser$1;catering.fromCallback=function(_t,e){if(_t===void 0){var $t=new Promise(function(xt,At){_t=function(kt,Bt){kt?At(kt):xt(Bt)}});_t[e!==void 0?e:"promise"]=$t}else if(typeof _t!="function")throw new TypeError("Callback must be a function");return _t};catering.fromPromise=function(_t,e){if(e===void 0)return _t;_t.then(function($t){nextTick(()=>e(null,$t))}).catch(function($t){nextTick(()=>e($t))})};var abstractIterator={},common={};common.getCallback=function(_t,e){return typeof _t=="function"?_t:e};common.getOptions=function(_t,e){return typeof _t=="object"&&_t!==null?_t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common,kPromise$3=Symbol("promise"),kCallback$2=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,$t,xt){if(typeof e!="object"||e===null){const At=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${At}`)}if(typeof $t!="object"||$t===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$2]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=$t[kKeyEncoding$1],this[kValueEncoding$1]=$t[kValueEncoding$1],this[kLegacy]=xt,this[kLimit]=Number.isInteger($t.limit)&&$t.limit>=0?$t.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!$t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let $t;if(e===void 0)$t=new Promise((xt,At)=>{e=(kt,Bt,jt)=>{kt?At(kt):this[kLegacy]?Bt===void 0&&jt===void 0?xt():xt([Bt,jt]):xt(Bt)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$2]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),$t}_next(e){this.nextTick(e)}nextv(e,$t,xt){return xt=getCallback$2($t,xt),xt=fromCallback$3(xt,kPromise$3),$t=getOptions$2($t,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(xt,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(xt,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$2]=xt,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,$t,this[kHandleMany$1])),xt[kPromise$3]):(this.nextTick(xt,new TypeError("The first argument 'size' must be an integer")),xt[kPromise$3])}_nextv(e,$t,xt){const At=[],kt=(Bt,jt,Lt)=>{if(Bt)return xt(Bt);if(this[kLegacy]?jt===void 0&&Lt===void 0:jt===void 0)return xt(null,At);At.push(this[kLegacy]?[jt,Lt]:jt),At.length===e?xt(null,At):this._next(kt)};this._next(kt)}all(e,$t){return $t=getCallback$2(e,$t),$t=fromCallback$3($t,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick($t,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick($t,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$2]=$t,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),$t[kPromise$3]}_all(e,$t){let xt=this[kCount];const At=[],kt=()=>{const jt=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-xt):1e3;jt<=0?this.nextTick($t,null,At):this._nextv(jt,emptyOptions$1,Bt)},Bt=(jt,Lt)=>{jt?$t(jt):Lt.length===0?$t(null,At):(At.push.apply(At,Lt),xt+=Lt.length,kt())};kt()}[kFinishWork](){const e=this[kCallback$2];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$2]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,$t,xt){this[kAutoClose]?this.close(e.bind(null,$t,xt)):e($t,xt)}seek(e,$t){if($t=getOptions$2($t,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const xt=this.db.keyEncoding($t.keyEncoding||this[kKeyEncoding$1]),At=xt.format;$t.keyEncoding!==At&&($t={...$t,keyEncoding:At});const kt=this.db.prefixKey(xt.encode(e),At);this._seek(kt,$t)}}}_seek(e,$t){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const $t of e)$t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,$t){super(e,$t,!0),this[kKeys]=$t.keys!==!1,this[kValues]=$t.values!==!1}[kHandleOne$1](e,$t,xt){const At=this[kFinishWork]();if(e)return At(e);try{$t=this[kKeys]&&$t!==void 0?this[kKeyEncoding$1].decode($t):void 0,xt=this[kValues]&&xt!==void 0?this[kValueEncoding$1].decode(xt):void 0}catch(kt){return At(new IteratorDecodeError("entry",kt))}$t===void 0&&xt===void 0||this[kCount]++,At(null,$t,xt)}[kHandleMany$1](e,$t){const xt=this[kFinishWork]();if(e)return this[kReturnMany](xt,e);try{for(const At of $t){const kt=At[0],Bt=At[1];At[0]=this[kKeys]&&kt!==void 0?this[kKeyEncoding$1].decode(kt):void 0,At[1]=this[kValues]&&Bt!==void 0?this[kValueEncoding$1].decode(Bt):void 0}}catch(At){return this[kReturnMany](xt,new IteratorDecodeError("entries",At))}this[kCount]+=$t.length,this[kReturnMany](xt,null,$t)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(e,$t){super(e,$t,!1)}[kHandleOne$1](e,$t){const xt=this[kFinishWork]();if(e)return xt(e);try{$t=$t!==void 0?this[kKeyEncoding$1].decode($t):void 0}catch(At){return xt(new IteratorDecodeError("key",At))}$t!==void 0&&this[kCount]++,xt(null,$t)}[kHandleMany$1](e,$t){const xt=this[kFinishWork]();if(e)return this[kReturnMany](xt,e);try{for(let At=0;At<$t.length;At++){const kt=$t[At];$t[At]=kt!==void 0?this[kKeyEncoding$1].decode(kt):void 0}}catch(At){return this[kReturnMany](xt,new IteratorDecodeError("keys",At))}this[kCount]+=$t.length,this[kReturnMany](xt,null,$t)}},AbstractValueIterator$2=class extends CommonIterator{constructor(e,$t){super(e,$t,!1)}[kHandleOne$1](e,$t){const xt=this[kFinishWork]();if(e)return xt(e);try{$t=$t!==void 0?this[kValueEncoding$1].decode($t):void 0}catch(At){return xt(new IteratorDecodeError("value",At))}$t!==void 0&&this[kCount]++,xt(null,$t)}[kHandleMany$1](e,$t){const xt=this[kFinishWork]();if(e)return this[kReturnMany](xt,e);try{for(let At=0;At<$t.length;At++){const kt=$t[At];$t[At]=kt!==void 0?this[kValueEncoding$1].decode(kt):void 0}}catch(At){return this[kReturnMany](xt,new IteratorDecodeError("values",At))}this[kCount]+=$t.length,this[kReturnMany](xt,null,$t)}};class IteratorDecodeError extends ModuleError$6{constructor(e,$t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:$t})}}for(const _t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,_t.split(" ")[0],{get(){throw new ModuleError$6(`The ${_t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${_t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback$1=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,$t){super(e,$t),this[kIterator]=e.iterator({...$t,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(e,$t){super(e,$t),this[kIterator]=e.iterator({...$t,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const _t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=_t===DefaultKeyIterator$1,$t=e?xt=>xt[0]:xt=>xt[1];_t.prototype._next=function(xt){this[kCallback$1]=xt,this[kIterator].next(this[kHandleOne])},_t.prototype[kHandleOne]=function(xt,At,kt){const Bt=this[kCallback$1];xt?Bt(xt):Bt(null,e?At:kt)},_t.prototype._nextv=function(xt,At,kt){this[kCallback$1]=kt,this[kIterator].nextv(xt,At,this[kHandleMany])},_t.prototype._all=function(xt,At){this[kCallback$1]=At,this[kIterator].all(xt,this[kHandleMany])},_t.prototype[kHandleMany]=function(xt,At){const kt=this[kCallback$1];xt?kt(xt):kt(null,At.map($t))},_t.prototype._seek=function(xt,At){this[kIterator].seek(xt,At)},_t.prototype._close=function(xt){this[kIterator].close(xt)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,$t){super(e,$t),this[kNut]=null,this[kFactory]=()=>e.iterator($t),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(e,$t){super(e,$t),this[kNut]=null,this[kFactory]=()=>e.keys($t),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(e,$t){super(e,$t),this[kNut]=null,this[kFactory]=()=>e.values($t),this.db.defer(()=>this[kUndefer$1]())}};for(const _t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])_t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},_t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},_t.prototype._nextv=function(e,$t,xt){this[kNut]!==null?this[kNut].nextv(e,$t,xt):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,$t,xt)):this.nextTick(xt,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},_t.prototype._all=function(e,$t){this[kNut]!==null?this[kNut].all($t):this.db.status==="opening"?this.db.defer(()=>this._all(e,$t)):this.nextTick($t,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},_t.prototype._seek=function(e,$t){this[kNut]!==null?this[kNut]._seek(e,$t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,$t))},_t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const $t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${$t}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,$t,xt){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const At=this.db._checkKey(e)||this.db._checkValue($t);if(At)throw At;const kt=xt&&xt.sublevel!=null?xt.sublevel:this.db,Bt=xt,jt=kt.keyEncoding(xt&&xt.keyEncoding),Lt=kt.valueEncoding(xt&&xt.valueEncoding),Ut=jt.format;xt={...xt,keyEncoding:Ut,valueEncoding:Lt.format},kt!==this.db&&(xt.sublevel=null);const Nt=kt.prefixKey(jt.encode(e),Ut),qt=Lt.encode($t);return this._put(Nt,qt,xt),this[kOperations$1].push({...Bt,type:"put",key:e,value:$t}),this}_put(e,$t,xt){}del(e,$t){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const xt=this.db._checkKey(e);if(xt)throw xt;const At=$t&&$t.sublevel!=null?$t.sublevel:this.db,kt=$t,Bt=At.keyEncoding($t&&$t.keyEncoding),jt=Bt.format;return $t={...$t,keyEncoding:jt},At!==this.db&&($t.sublevel=null),this._del(At.prefixKey(Bt.encode(e),jt),$t),this[kOperations$1].push({...kt,type:"del",key:e}),this}_del(e,$t){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,$t){return $t=getCallback$1(e,$t),$t=fromCallback$2($t,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick($t,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close($t):(this[kStatus$1]="writing",this._write(e,xt=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>$t(xt)),xt||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),$t[kPromise$2]}_write(e,$t){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const $t of e)$t()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,$t,xt){this[kEncoded].push({...xt,type:"put",key:e,value:$t})}_del(e,$t){this[kEncoded].push({...$t,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,$t){this.db.status==="opening"?this.db.defer(()=>this._write(e,$t)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick($t):this.db._batch(this[kEncoded],e,$t):this.nextTick($t,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(_t,e){const $t={};for(const xt in _t)if(hasOwnProperty.call(_t,xt)&&!(xt==="keyEncoding"||xt==="valueEncoding")){if(xt==="start"||xt==="end")throw new ModuleError$2(`The legacy range option '${xt}' has been removed`,{code:"LEVEL_LEGACY"});if(xt==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(xt)?$t[xt]=e.encode(_t[xt]):$t[xt]=_t[xt]}return $t.reverse=!!$t.reverse,$t.limit=Number.isInteger($t.limit)&&$t.limit>=0?$t.limit:-1,$t};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):_t=>(promise||(promise=Promise.resolve())).then(_t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const _t=queueMicrotask_1;return nextTickBrowser=function(e,...$t){$t.length===0?_t(e):_t(()=>e(...$t))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:_t,AbstractKeyIterator:e,AbstractValueIterator:$t}=abstractIterator,xt=Symbol("unfix"),At=Symbol("iterator"),kt=Symbol("handleOne"),Bt=Symbol("handleMany"),jt=Symbol("callback");class Lt extends _t{constructor(Kt,zt,Vt,Ht){super(Kt,zt),this[At]=Vt,this[xt]=Ht,this[kt]=this[kt].bind(this),this[Bt]=this[Bt].bind(this),this[jt]=null}[kt](Kt,zt,Vt){const Ht=this[jt];if(Kt)return Ht(Kt);zt!==void 0&&(zt=this[xt](zt)),Ht(Kt,zt,Vt)}[Bt](Kt,zt){const Vt=this[jt];if(Kt)return Vt(Kt);for(const Ht of zt){const Jt=Ht[0];Jt!==void 0&&(Ht[0]=this[xt](Jt))}Vt(Kt,zt)}}class Ut extends e{constructor(Kt,zt,Vt,Ht){super(Kt,zt),this[At]=Vt,this[xt]=Ht,this[kt]=this[kt].bind(this),this[Bt]=this[Bt].bind(this),this[jt]=null}[kt](Kt,zt){const Vt=this[jt];if(Kt)return Vt(Kt);zt!==void 0&&(zt=this[xt](zt)),Vt(Kt,zt)}[Bt](Kt,zt){const Vt=this[jt];if(Kt)return Vt(Kt);for(let Ht=0;Ht<zt.length;Ht++){const Jt=zt[Ht];Jt!==void 0&&(zt[Ht]=this[xt](Jt))}Vt(Kt,zt)}}class Nt extends $t{constructor(Kt,zt,Vt){super(Kt,zt),this[At]=Vt}}for(const qt of[Lt,Ut])qt.prototype._next=function(Kt){this[jt]=Kt,this[At].next(this[kt])},qt.prototype._nextv=function(Kt,zt,Vt){this[jt]=Vt,this[At].nextv(Kt,zt,this[Bt])},qt.prototype._all=function(Kt,zt){this[jt]=zt,this[At].all(Kt,this[Bt])};for(const qt of[Nt])qt.prototype._next=function(Kt){this[At].next(Kt)},qt.prototype._nextv=function(Kt,zt,Vt){this[At].nextv(Kt,zt,Vt)},qt.prototype._all=function(Kt,zt){this[At].all(Kt,zt)};for(const qt of[Lt,Ut,Nt])qt.prototype._seek=function(Kt,zt){this[At].seek(Kt,zt)},qt.prototype._close=function(Kt){this[At].close(Kt)};return abstractSublevelIterator.AbstractSublevelIterator=Lt,abstractSublevelIterator.AbstractSublevelKeyIterator=Ut,abstractSublevelIterator.AbstractSublevelValueIterator=Nt,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const _t=moduleError,{Buffer:e}=buffer$2||{},{AbstractSublevelIterator:$t,AbstractSublevelKeyIterator:xt,AbstractSublevelValueIterator:At}=requireAbstractSublevelIterator(),kt=Symbol("prefix"),Bt=Symbol("upperBound"),jt=Symbol("prefixRange"),Lt=Symbol("parent"),Ut=Symbol("unfix"),Nt=new TextEncoder,qt={separator:"!"};abstractSublevel=function({AbstractLevel:rr}){class Qt extends rr{static defaults(nr){if(typeof nr=="string")throw new _t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(nr&&nr.open)throw new _t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return nr==null?qt:nr.separator?nr:{...nr,separator:"!"}}constructor(nr,yr,vr){const{separator:Ir,manifest:xr,...Or}=Qt.defaults(vr);yr=Jt(yr,Ir);const Nr=Ir.charCodeAt(0)+1,kr=nr[Lt]||nr;if(!Nt.encode(yr).every(Xt=>Xt>Nr&&Xt<127))throw new _t(`Prefix must use bytes > ${Nr} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(Kt(kr,xr),Or);const lr=(nr.prefix||"")+Ir+yr+Ir,ir=lr.slice(0,-1)+String.fromCharCode(Nr);this[Lt]=kr,this[kt]=new Vt(lr),this[Bt]=new Vt(ir),this[Ut]=new Ht,this.nextTick=kr.nextTick}prefixKey(nr,yr){if(yr==="utf8")return this[kt].utf8+nr;if(nr.byteLength===0)return this[kt][yr];if(yr==="view"){const vr=this[kt].view,Ir=new Uint8Array(vr.byteLength+nr.byteLength);return Ir.set(vr,0),Ir.set(nr,vr.byteLength),Ir}else{const vr=this[kt].buffer;return e.concat([vr,nr],vr.byteLength+nr.byteLength)}}[jt](nr,yr){nr.gte!==void 0?nr.gte=this.prefixKey(nr.gte,yr):nr.gt!==void 0?nr.gt=this.prefixKey(nr.gt,yr):nr.gte=this[kt][yr],nr.lte!==void 0?nr.lte=this.prefixKey(nr.lte,yr):nr.lt!==void 0?nr.lt=this.prefixKey(nr.lt,yr):nr.lte=this[Bt][yr]}get prefix(){return this[kt].utf8}get db(){return this[Lt]}_open(nr,yr){this[Lt].open({passive:!0},yr)}_put(nr,yr,vr,Ir){this[Lt].put(nr,yr,vr,Ir)}_get(nr,yr,vr){this[Lt].get(nr,yr,vr)}_getMany(nr,yr,vr){this[Lt].getMany(nr,yr,vr)}_del(nr,yr,vr){this[Lt].del(nr,yr,vr)}_batch(nr,yr,vr){this[Lt].batch(nr,yr,vr)}_clear(nr,yr){this[jt](nr,nr.keyEncoding),this[Lt].clear(nr,yr)}_iterator(nr){this[jt](nr,nr.keyEncoding);const yr=this[Lt].iterator(nr),vr=this[Ut].get(this[kt].utf8.length,nr.keyEncoding);return new $t(this,nr,yr,vr)}_keys(nr){this[jt](nr,nr.keyEncoding);const yr=this[Lt].keys(nr),vr=this[Ut].get(this[kt].utf8.length,nr.keyEncoding);return new xt(this,nr,yr,vr)}_values(nr){this[jt](nr,nr.keyEncoding);const yr=this[Lt].values(nr);return new At(this,nr,yr)}}return{AbstractSublevel:Qt}};const Kt=function(rr,Qt){return{...rr.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...Qt,encodings:{utf8:zt(rr,"utf8"),buffer:zt(rr,"buffer"),view:zt(rr,"view")}}},zt=function(rr,Qt){return rr.supports.encodings[Qt]?rr.keyEncoding(Qt).name===Qt:!1};class Vt{constructor(Qt){this.utf8=Qt,this.view=Nt.encode(Qt),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class Ht{constructor(){this.cache=new Map}get(Qt,Wt){let nr=this.cache.get(Wt);return nr===void 0&&(Wt==="view"?nr=(function(yr,vr){return vr.subarray(yr)}).bind(null,Qt):nr=(function(yr,vr){return vr.slice(yr)}).bind(null,Qt),this.cache.set(Wt,nr)),nr}}const Jt=function(rr,Qt){let Wt=0,nr=rr.length;for(;Wt<nr&&rr[Wt]===Qt;)Wt++;for(;nr>Wt&&rr[nr-1]===Qt;)nr--;return rr.slice(Wt,nr)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};let AbstractLevel$1=class extends EventEmitter{constructor(e,$t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");$t=getOptions($t);const{keyEncoding:xt,valueEncoding:At,passive:kt,...Bt}=$t;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=Bt,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(xt||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(At||"utf8");for(const jt of this[kTranscoder].encodings())this.supports.encodings[jt.commonName]||(this.supports.encodings[jt.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,$t){$t=getCallback(e,$t),$t=fromCallback$1($t,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const xt=At=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,At?()=>xt(At):xt):this[kStatus]!=="open"?$t(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:At})):$t()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,xt):this.nextTick(xt):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,At=>{if(At){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),xt(At)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),xt()})):this[kStatus]==="open"?this.nextTick(xt):this.once(kLanded,()=>this.open(e,$t)),$t[kPromise$1]}_open(e,$t){this.nextTick($t)}close(e){e=fromCallback$1(e,kPromise$1);const $t=xt=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,xt?$t(xt):$t):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:xt})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const xt=At=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),$t(At)};this[kCloseResources](()=>{this._close(At=>{if(At)return xt(At);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),$t()})})}else this[kStatus]==="closed"?this.nextTick($t):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let $t=this[kResources].size,xt=!0;const At=()=>{--$t===0&&(xt?this.nextTick(e):e())};for(const kt of this[kResources])kt.close(At);xt=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,$t,xt){if(xt=getCallback($t,xt),xt=fromCallback$1(xt,kPromise$1),$t=getOptions($t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,$t,xt)),xt[kPromise$1];if(maybeError(this,xt))return xt[kPromise$1];const At=this._checkKey(e);if(At)return this.nextTick(xt,At),xt[kPromise$1];const kt=this.keyEncoding($t.keyEncoding),Bt=this.valueEncoding($t.valueEncoding),jt=kt.format,Lt=Bt.format;return($t.keyEncoding!==jt||$t.valueEncoding!==Lt)&&($t=Object.assign({},$t,{keyEncoding:jt,valueEncoding:Lt})),this._get(this.prefixKey(kt.encode(e),jt),$t,(Ut,Nt)=>{if(Ut)return(Ut.code==="LEVEL_NOT_FOUND"||Ut.notFound||/NotFound/i.test(Ut))&&(Ut.code||(Ut.code="LEVEL_NOT_FOUND"),Ut.notFound||(Ut.notFound=!0),Ut.status||(Ut.status=404)),xt(Ut);try{Nt=Bt.decode(Nt)}catch(qt){return xt(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:qt}))}xt(null,Nt)}),xt[kPromise$1]}_get(e,$t,xt){this.nextTick(xt,new Error("NotFound"))}getMany(e,$t,xt){if(xt=getCallback($t,xt),xt=fromCallback$1(xt,kPromise$1),$t=getOptions($t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,$t,xt)),xt[kPromise$1];if(maybeError(this,xt))return xt[kPromise$1];if(!Array.isArray(e))return this.nextTick(xt,new TypeError("The first argument 'keys' must be an array")),xt[kPromise$1];if(e.length===0)return this.nextTick(xt,null,[]),xt[kPromise$1];const At=this.keyEncoding($t.keyEncoding),kt=this.valueEncoding($t.valueEncoding),Bt=At.format,jt=kt.format;($t.keyEncoding!==Bt||$t.valueEncoding!==jt)&&($t=Object.assign({},$t,{keyEncoding:Bt,valueEncoding:jt}));const Lt=new Array(e.length);for(let Ut=0;Ut<e.length;Ut++){const Nt=e[Ut],qt=this._checkKey(Nt);if(qt)return this.nextTick(xt,qt),xt[kPromise$1];Lt[Ut]=this.prefixKey(At.encode(Nt),Bt)}return this._getMany(Lt,$t,(Ut,Nt)=>{if(Ut)return xt(Ut);try{for(let qt=0;qt<Nt.length;qt++)Nt[qt]!==void 0&&(Nt[qt]=kt.decode(Nt[qt]))}catch(qt){return xt(new ModuleError$1(`Could not decode one or more of ${Nt.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:qt}))}xt(null,Nt)}),xt[kPromise$1]}_getMany(e,$t,xt){this.nextTick(xt,null,new Array(e.length).fill(void 0))}put(e,$t,xt,At){if(At=getCallback(xt,At),At=fromCallback$1(At,kPromise$1),xt=getOptions(xt,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,$t,xt,At)),At[kPromise$1];if(maybeError(this,At))return At[kPromise$1];const kt=this._checkKey(e)||this._checkValue($t);if(kt)return this.nextTick(At,kt),At[kPromise$1];const Bt=this.keyEncoding(xt.keyEncoding),jt=this.valueEncoding(xt.valueEncoding),Lt=Bt.format,Ut=jt.format;(xt.keyEncoding!==Lt||xt.valueEncoding!==Ut)&&(xt=Object.assign({},xt,{keyEncoding:Lt,valueEncoding:Ut}));const Nt=this.prefixKey(Bt.encode(e),Lt),qt=jt.encode($t);return this._put(Nt,qt,xt,Kt=>{if(Kt)return At(Kt);this.emit("put",e,$t),At()}),At[kPromise$1]}_put(e,$t,xt,At){this.nextTick(At)}del(e,$t,xt){if(xt=getCallback($t,xt),xt=fromCallback$1(xt,kPromise$1),$t=getOptions($t,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,$t,xt)),xt[kPromise$1];if(maybeError(this,xt))return xt[kPromise$1];const At=this._checkKey(e);if(At)return this.nextTick(xt,At),xt[kPromise$1];const kt=this.keyEncoding($t.keyEncoding),Bt=kt.format;return $t.keyEncoding!==Bt&&($t=Object.assign({},$t,{keyEncoding:Bt})),this._del(this.prefixKey(kt.encode(e),Bt),$t,jt=>{if(jt)return xt(jt);this.emit("del",e),xt()}),xt[kPromise$1]}_del(e,$t,xt){this.nextTick(xt)}batch(e,$t,xt){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?xt=e:xt=getCallback($t,xt),xt=fromCallback$1(xt,kPromise$1),$t=getOptions($t,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,$t,xt)),xt[kPromise$1];if(maybeError(this,xt))return xt[kPromise$1];if(!Array.isArray(e))return this.nextTick(xt,new TypeError("The first argument 'operations' must be an array")),xt[kPromise$1];if(e.length===0)return this.nextTick(xt),xt[kPromise$1];const At=new Array(e.length),{keyEncoding:kt,valueEncoding:Bt,...jt}=$t;for(let Lt=0;Lt<e.length;Lt++){if(typeof e[Lt]!="object"||e[Lt]===null)return this.nextTick(xt,new TypeError("A batch operation must be an object")),xt[kPromise$1];const Ut=Object.assign({},e[Lt]);if(Ut.type!=="put"&&Ut.type!=="del")return this.nextTick(xt,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),xt[kPromise$1];const Nt=this._checkKey(Ut.key);if(Nt)return this.nextTick(xt,Nt),xt[kPromise$1];const qt=Ut.sublevel!=null?Ut.sublevel:this,Kt=qt.keyEncoding(Ut.keyEncoding||kt),zt=Kt.format;if(Ut.key=qt.prefixKey(Kt.encode(Ut.key),zt),Ut.keyEncoding=zt,Ut.type==="put"){const Vt=this._checkValue(Ut.value);if(Vt)return this.nextTick(xt,Vt),xt[kPromise$1];const Ht=qt.valueEncoding(Ut.valueEncoding||Bt);Ut.value=Ht.encode(Ut.value),Ut.valueEncoding=Ht.format}qt!==this&&(Ut.sublevel=null),At[Lt]=Ut}return this._batch(At,jt,Lt=>{if(Lt)return xt(Lt);this.emit("batch",e),xt()}),xt[kPromise$1]}_batch(e,$t,xt){this.nextTick(xt)}sublevel(e,$t){return this._sublevel(e,AbstractSublevel.defaults($t))}_sublevel(e,$t){return new AbstractSublevel(this,e,$t)}prefixKey(e,$t){return e}clear(e,$t){if($t=getCallback(e,$t),$t=fromCallback$1($t,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,$t)),$t[kPromise$1];if(maybeError(this,$t))return $t[kPromise$1];const xt=e,At=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,At),e.keyEncoding=At.format,e.limit===0?this.nextTick($t):this._clear(e,kt=>{if(kt)return $t(kt);this.emit("clear",xt),$t()}),$t[kPromise$1]}_clear(e,$t){this.nextTick($t)}iterator(e){const $t=this.keyEncoding(e&&e.keyEncoding),xt=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,$t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=$t,e[AbstractIterator$1.valueEncoding]=xt,e.keyEncoding=$t.format,e.valueEncoding=xt.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const $t=this.keyEncoding(e&&e.keyEncoding),xt=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,$t),e[AbstractIterator$1.keyEncoding]=$t,e[AbstractIterator$1.valueEncoding]=xt,e.keyEncoding=$t.format,e.valueEncoding=xt.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const $t=this.keyEncoding(e&&e.keyEncoding),xt=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,$t),e[AbstractIterator$1.keyEncoding]=$t,e[AbstractIterator$1.valueEncoding]=xt,e.keyEncoding=$t.format,e.valueEncoding=xt.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const $t of e)$t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(_t,e){return _t[kStatus]!=="open"?(_t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(_t){return Object.keys(_t.supports.encodings).filter(e=>!!_t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(_t,e,$t){if(typeof e!="number")throw new Error("second argument must be a Number");let xt,At,kt,Bt,jt,Lt=!0,Ut;Array.isArray(_t)?(xt=[],kt=At=_t.length):(Bt=Object.keys(_t),xt={},kt=At=Bt.length);function Nt(Kt){function zt(){$t&&$t(Kt,xt),$t=null}Lt?queueMicrotask$1(zt):zt()}function qt(Kt,zt,Vt){if(xt[Kt]=Vt,zt&&(jt=!0),--kt===0||zt)Nt(zt);else if(!jt&&Ut<At){let Ht;Bt?(Ht=Bt[Ut],Ut+=1,_t[Ht](function(Jt,rr){qt(Ht,Jt,rr)})):(Ht=Ut,Ut+=1,_t[Ht](function(Jt,rr){qt(Ht,Jt,rr)}))}}Ut=e,kt?Bt?Bt.some(function(Kt,zt){return _t[Kt](function(Vt,Ht){qt(Kt,Vt,Ht)}),zt===e-1}):_t.some(function(Kt,zt){return Kt(function(Vt,Ht){qt(zt,Vt,Ht)}),zt===e-1}):Nt(null),Lt=!1}var iterator={},keyRange=function _t(e){const $t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,xt=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,At=e.gte===void 0,kt=e.lte===void 0;return $t!==void 0&&xt!==void 0?IDBKeyRange.bound($t,xt,At,kt):$t!==void 0?IDBKeyRange.lowerBound($t,At):xt!==void 0?IDBKeyRange.upperBound(xt,kt):null};const textEncoder$1=new TextEncoder;var deserialize$2=function(_t){return _t instanceof Uint8Array?_t:_t instanceof ArrayBuffer?new Uint8Array(_t):textEncoder$1.encode(_t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(e,$t,xt){super(e,xt),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=xt,this[kCurrentOptions]={...xt},this[kPosition]=void 0,this[kLocation$1]=$t,this[kFirst]=!0}_nextv(e,$t,xt){if(this[kFirst]=!1,this[kFinished])return this.nextTick(xt,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(xt,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let At;try{At=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(xt,null,[])}const kt=this.db.db.transaction([this[kLocation$1]],"readonly"),Bt=kt.objectStore(this[kLocation$1]),jt=[];if(this[kOptions].reverse){const Lt=!this[kOptions].values&&Bt.openKeyCursor?"openKeyCursor":"openCursor";Bt[Lt](At,"prev").onsuccess=Ut=>{const Nt=Ut.target.result;if(Nt){const{key:qt,value:Kt}=Nt;this[kPosition]=qt,jt.push([this[kOptions].keys&&qt!==void 0?deserialize$1(qt):void 0,this[kOptions].values&&Kt!==void 0?deserialize$1(Kt):void 0]),jt.length<e?Nt.continue():maybeCommit(kt)}else this[kFinished]=!0}}else{let Lt,Ut;const Nt=()=>{if(Lt===void 0||Ut===void 0)return;const qt=Math.max(Lt.length,Ut.length);qt===0||e===1/0?this[kFinished]=!0:this[kPosition]=Lt[qt-1],jt.length=qt;for(let Kt=0;Kt<qt;Kt++){const zt=Lt[Kt],Vt=Ut[Kt];jt[Kt]=[this[kOptions].keys&&zt!==void 0?deserialize$1(zt):void 0,this[kOptions].values&&Vt!==void 0?deserialize$1(Vt):void 0]}maybeCommit(kt)};this[kOptions].keys||e<1/0?Bt.getAllKeys(At,e<1/0?e:void 0).onsuccess=qt=>{Lt=qt.target.result,Nt()}:(Lt=[],this.nextTick(Nt)),this[kOptions].values?Bt.getAll(At,e<1/0?e:void 0).onsuccess=qt=>{Ut=qt.target.result,Nt()}:(Ut=[],this.nextTick(Nt))}kt.onabort=()=>{xt(kt.error||new Error("aborted by user")),xt=null},kt.oncomplete=()=>{xt(null,jt),xt=null}}_next(e){if(this[kCache].length>0){const[$t,xt]=this[kCache].shift();this.nextTick(e,null,$t,xt)}else if(this[kFinished])this.nextTick(e);else{let $t=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,$t=1),this._nextv($t,emptyOptions,(xt,At)=>{if(xt)return e(xt);this[kCache]=At,this._next(e)})}}_all(e,$t){this[kFirst]=!1;const xt=this[kCache].splice(0,this[kCache].length),At=this.limit-this.count-xt.length;if(At<=0)return this.nextTick($t,null,xt);this._nextv(At,emptyOptions,(kt,Bt)=>{if(kt)return $t(kt);xt.length>0&&(Bt=xt.concat(Bt)),$t(null,Bt)})}_seek(e,$t){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let xt;try{xt=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}xt!==null&&!xt.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}};iterator.Iterator=Iterator$1;function maybeCommit(_t){typeof _t.commit=="function"&&_t.commit()}var clear$1=function _t(e,$t,xt,At,kt){if(At.limit===0)return e.nextTick(kt);const Bt=e.db.transaction([$t],"readwrite"),jt=Bt.objectStore($t);let Lt=0;Bt.oncomplete=function(){kt()},Bt.onabort=function(){kt(Bt.error||new Error("aborted by user"))};const Ut=jt.openKeyCursor?"openKeyCursor":"openCursor",Nt=At.reverse?"prev":"next";jt[Ut](xt,Nt).onsuccess=function(qt){const Kt=qt.target.result;Kt&&(jt.delete(Kt.key).onsuccess=function(){(At.limit<=0||++Lt<At.limit)&&Kt.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,$t,xt){if(typeof $t=="function"||typeof xt=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:At,version:kt,...Bt}=$t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},Bt),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=At??DEFAULT_PREFIX,this[kVersion]=parseInt(kt||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,$t){const xt=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);xt.onerror=function(){$t(xt.error||new Error("unknown error"))},xt.onsuccess=()=>{this[kIDB]=xt.result,$t()},xt.onupgradeneeded=At=>{const kt=At.target.result;kt.objectStoreNames.contains(this[kLocation])||kt.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,$t){const xt=e.transaction;xt.onabort=function(){$t(xt.error||new Error("aborted by user"))},xt.oncomplete=function(){$t(null,e.result)}}_get(e,$t,xt){const At=this[kStore]("readonly");let kt;try{kt=At.get(e)}catch(Bt){return this.nextTick(xt,Bt)}this[kOnComplete](kt,function(Bt,jt){if(Bt)return xt(Bt);if(jt===void 0)return xt(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));xt(null,deserialize(jt))})}_getMany(e,$t,xt){const At=this[kStore]("readonly"),kt=e.map(Bt=>jt=>{let Lt;try{Lt=At.get(Bt)}catch(Ut){return jt(Ut)}Lt.onsuccess=()=>{const Ut=Lt.result;jt(null,Ut===void 0?Ut:deserialize(Ut))},Lt.onerror=Ut=>{Ut.stopPropagation(),jt(Lt.error)}});parallel(kt,16,xt)}_del(e,$t,xt){const At=this[kStore]("readwrite");let kt;try{kt=At.delete(e)}catch(Bt){return this.nextTick(xt,Bt)}this[kOnComplete](kt,xt)}_put(e,$t,xt,At){const kt=this[kStore]("readwrite");let Bt;try{Bt=kt.put($t,e)}catch(jt){return this.nextTick(At,jt)}this[kOnComplete](Bt,At)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,$t,xt){const At=this[kStore]("readwrite"),kt=At.transaction;let Bt=0,jt;kt.onabort=function(){xt(jt||kt.error||new Error("aborted by user"))},kt.oncomplete=function(){xt()};function Lt(){const Ut=e[Bt++],Nt=Ut.key;let qt;try{qt=Ut.type==="del"?At.delete(Nt):At.put(Ut.value,Nt)}catch(Kt){jt=Kt,kt.abort();return}Bt<e.length?qt.onsuccess=Lt:typeof kt.commit=="function"&&kt.commit()}Lt()}_clear(e,$t){let xt,At;try{xt=createKeyRange(e)}catch{return this.nextTick($t)}if(e.limit>=0)return clear(this,this[kLocation],xt,e,$t);try{const kt=this[kStore]("readwrite");At=xt?kt.delete(xt):kt.clear()}catch(kt){return this.nextTick($t,kt)}this[kOnComplete](At,$t)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(_t,e,$t){typeof e=="function"&&($t=e,e=DEFAULT_PREFIX),$t=fromCallback($t,kPromise);const xt=indexedDB.deleteDatabase(e+_t);return xt.onsuccess=function(){$t()},xt.onerror=function(At){$t(At)},$t[kPromise]};var __await$4=function(_t){return this instanceof __await$4?(this.v=_t,this):new __await$4(_t)},browser={exports:{}},stream={exports:{}},primordials={ArrayIsArray(_t){return Array.isArray(_t)},ArrayPrototypeIncludes(_t,e){return _t.includes(e)},ArrayPrototypeIndexOf(_t,e){return _t.indexOf(e)},ArrayPrototypeJoin(_t,e){return _t.join(e)},ArrayPrototypeMap(_t,e){return _t.map(e)},ArrayPrototypePop(_t,e){return _t.pop(e)},ArrayPrototypePush(_t,e){return _t.push(e)},ArrayPrototypeSlice(_t,e,$t){return _t.slice(e,$t)},Error,FunctionPrototypeCall(_t,e,...$t){return _t.call(e,...$t)},FunctionPrototypeSymbolHasInstance(_t,e){return Function.prototype[Symbol.hasInstance].call(_t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(_t,e){return Object.defineProperties(_t,e)},ObjectDefineProperty(_t,e,$t){return Object.defineProperty(_t,e,$t)},ObjectGetOwnPropertyDescriptor(_t,e){return Object.getOwnPropertyDescriptor(_t,e)},ObjectKeys(_t){return Object.keys(_t)},ObjectSetPrototypeOf(_t,e){return Object.setPrototypeOf(_t,e)},Promise,PromisePrototypeCatch(_t,e){return _t.catch(e)},PromisePrototypeThen(_t,e,$t){return _t.then(e,$t)},PromiseReject(_t){return Promise.reject(_t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(_t,e){return _t.test(e)},SafeSet:Set,String,StringPrototypeSlice(_t,e,$t){return _t.slice(e,$t)},StringPrototypeToLowerCase(_t){return _t.toLowerCase()},StringPrototypeToUpperCase(_t){return _t.toUpperCase()},StringPrototypeTrim(_t){return _t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(_t,e,$t){return _t.set(e,$t)},Uint8Array},util={exports:{}};(function(_t){const e=buffer$2,$t=Object.getPrototypeOf(async function(){}).constructor,xt=globalThis.Blob||e.Blob,At=typeof xt<"u"?function(jt){return jt instanceof xt}:function(jt){return!1};class kt extends Error{constructor(jt){if(!Array.isArray(jt))throw new TypeError(`Expected input to be an Array, got ${typeof jt}`);let Lt="";for(let Ut=0;Ut<jt.length;Ut++)Lt+=`    ${jt[Ut].stack}
`;super(Lt),this.name="AggregateError",this.errors=jt}}_t.exports={AggregateError:kt,kEmptyObject:Object.freeze({}),once(Bt){let jt=!1;return function(...Lt){jt||(jt=!0,Bt.apply(this,Lt))}},createDeferredPromise:function(){let Bt,jt;return{promise:new Promise((Ut,Nt)=>{Bt=Ut,jt=Nt}),resolve:Bt,reject:jt}},promisify(Bt){return new Promise((jt,Lt)=>{Bt((Ut,...Nt)=>Ut?Lt(Ut):jt(...Nt))})},debuglog(){return function(){}},format(Bt,...jt){return Bt.replace(/%([sdifj])/g,function(...[Lt,Ut]){const Nt=jt.shift();return Ut==="f"?Nt.toFixed(6):Ut==="j"?JSON.stringify(Nt):Ut==="s"&&typeof Nt=="object"?`${Nt.constructor!==Object?Nt.constructor.name:""} {}`.trim():Nt.toString()})},inspect(Bt){switch(typeof Bt){case"string":if(Bt.includes("'"))if(Bt.includes('"')){if(!Bt.includes("`")&&!Bt.includes("${"))return`\`${Bt}\``}else return`"${Bt}"`;return`'${Bt}'`;case"number":return isNaN(Bt)?"NaN":Object.is(Bt,-0)?String(Bt):Bt;case"bigint":return`${String(Bt)}n`;case"boolean":case"undefined":return String(Bt);case"object":return"{}"}},types:{isAsyncFunction(Bt){return Bt instanceof $t},isArrayBufferView(Bt){return ArrayBuffer.isView(Bt)}},isBlob:At},_t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util);var utilExports=util.exports,operators={};const{format,inspect:inspect$1,AggregateError:CustomAggregateError}=utilExports,AggregateError$1=globalThis.AggregateError||CustomAggregateError,kIsNodeError=Symbol("kIsNodeError"),kTypes=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix="__node_internal_",codes$1={};function assert(_t,e){if(!_t)throw new codes$1.ERR_INTERNAL_ASSERTION(e)}function addNumericalSeparator(_t){let e="",$t=_t.length;const xt=_t[0]==="-"?1:0;for(;$t>=xt+4;$t-=3)e=`_${_t.slice($t-3,$t)}${e}`;return`${_t.slice(0,$t)}${e}`}function getMessage(_t,e,$t){if(typeof e=="function")return assert(e.length<=$t.length,`Code: ${_t}; The provided arguments length (${$t.length}) does not match the required ones (${e.length}).`),e(...$t);const xt=(e.match(/%[dfijoOs]/g)||[]).length;return assert(xt===$t.length,`Code: ${_t}; The provided arguments length (${$t.length}) does not match the required ones (${xt}).`),$t.length===0?e:format(e,...$t)}function E(_t,e,$t){$t||($t=Error);class xt extends $t{constructor(...kt){super(getMessage(_t,e,kt))}toString(){return`${this.name} [${_t}]: ${this.message}`}}Object.defineProperties(xt.prototype,{name:{value:$t.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),xt.prototype.code=_t,xt.prototype[kIsNodeError]=!0,codes$1[_t]=xt}function hideStackFrames$1(_t){const e=nodeInternalPrefix+_t.name;return Object.defineProperty(_t,"name",{value:e}),_t}function aggregateTwoErrors$2(_t,e){if(_t&&e&&_t!==e){if(Array.isArray(e.errors))return e.errors.push(_t),e;const $t=new AggregateError$1([e,_t],e.message);return $t.code=e.code,$t}return _t||e}let AbortError$5=class extends Error{constructor(e="The operation was aborted",$t=void 0){if($t!==void 0&&typeof $t!="object")throw new codes$1.ERR_INVALID_ARG_TYPE("options","Object",$t);super(e,$t),this.code="ABORT_ERR",this.name="AbortError"}};E("ERR_ASSERTION","%s",Error);E("ERR_INVALID_ARG_TYPE",(_t,e,$t)=>{assert(typeof _t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let xt="The ";_t.endsWith(" argument")?xt+=`${_t} `:xt+=`"${_t}" ${_t.includes(".")?"property":"argument"} `,xt+="must be ";const At=[],kt=[],Bt=[];for(const Lt of e)assert(typeof Lt=="string","All expected entries have to be of type string"),kTypes.includes(Lt)?At.push(Lt.toLowerCase()):classRegExp.test(Lt)?kt.push(Lt):(assert(Lt!=="object",'The value "object" should be written as "Object"'),Bt.push(Lt));if(kt.length>0){const Lt=At.indexOf("object");Lt!==-1&&(At.splice(At,Lt,1),kt.push("Object"))}if(At.length>0){switch(At.length){case 1:xt+=`of type ${At[0]}`;break;case 2:xt+=`one of type ${At[0]} or ${At[1]}`;break;default:{const Lt=At.pop();xt+=`one of type ${At.join(", ")}, or ${Lt}`}}(kt.length>0||Bt.length>0)&&(xt+=" or ")}if(kt.length>0){switch(kt.length){case 1:xt+=`an instance of ${kt[0]}`;break;case 2:xt+=`an instance of ${kt[0]} or ${kt[1]}`;break;default:{const Lt=kt.pop();xt+=`an instance of ${kt.join(", ")}, or ${Lt}`}}Bt.length>0&&(xt+=" or ")}switch(Bt.length){case 0:break;case 1:Bt[0].toLowerCase()!==Bt[0]&&(xt+="an "),xt+=`${Bt[0]}`;break;case 2:xt+=`one of ${Bt[0]} or ${Bt[1]}`;break;default:{const Lt=Bt.pop();xt+=`one of ${Bt.join(", ")}, or ${Lt}`}}if($t==null)xt+=`. Received ${$t}`;else if(typeof $t=="function"&&$t.name)xt+=`. Received function ${$t.name}`;else if(typeof $t=="object"){var jt;if((jt=$t.constructor)!==null&&jt!==void 0&&jt.name)xt+=`. Received an instance of ${$t.constructor.name}`;else{const Lt=inspect$1($t,{depth:-1});xt+=`. Received ${Lt}`}}else{let Lt=inspect$1($t,{colors:!1});Lt.length>25&&(Lt=`${Lt.slice(0,25)}...`),xt+=`. Received type ${typeof $t} (${Lt})`}return xt},TypeError);E("ERR_INVALID_ARG_VALUE",(_t,e,$t="is invalid")=>{let xt=inspect$1(e);return xt.length>128&&(xt=xt.slice(0,128)+"..."),`The ${_t.includes(".")?"property":"argument"} '${_t}' ${$t}. Received ${xt}`},TypeError);E("ERR_INVALID_RETURN_VALUE",(_t,e,$t)=>{var xt;const At=$t!=null&&(xt=$t.constructor)!==null&&xt!==void 0&&xt.name?`instance of ${$t.constructor.name}`:`type ${typeof $t}`;return`Expected ${_t} to be returned from the "${e}" function but got ${At}.`},TypeError);E("ERR_MISSING_ARGS",(..._t)=>{assert(_t.length>0,"At least one arg needs to be specified");let e;const $t=_t.length;switch(_t=(Array.isArray(_t)?_t:[_t]).map(xt=>`"${xt}"`).join(" or "),$t){case 1:e+=`The ${_t[0]} argument`;break;case 2:e+=`The ${_t[0]} and ${_t[1]} arguments`;break;default:{const xt=_t.pop();e+=`The ${_t.join(", ")}, and ${xt} arguments`}break}return`${e} must be specified`},TypeError);E("ERR_OUT_OF_RANGE",(_t,e,$t)=>{assert(e,'Missing "range" argument');let xt;return Number.isInteger($t)&&Math.abs($t)>2**32?xt=addNumericalSeparator(String($t)):typeof $t=="bigint"?(xt=String($t),($t>2n**32n||$t<-(2n**32n))&&(xt=addNumericalSeparator(xt)),xt+="n"):xt=inspect$1($t),`The value of "${_t}" is out of range. It must be ${e}. Received ${xt}`},RangeError);E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors={AbortError:AbortError$5,aggregateTwoErrors:hideStackFrames$1(aggregateTwoErrors$2),hideStackFrames:hideStackFrames$1,codes:codes$1};const{ArrayIsArray:ArrayIsArray$2,ArrayPrototypeIncludes,ArrayPrototypeJoin,ArrayPrototypeMap,NumberIsInteger:NumberIsInteger$1,NumberIsNaN:NumberIsNaN$1,NumberMAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER,NumberParseInt,ObjectPrototypeHasOwnProperty,RegExpPrototypeExec,String:String$1,StringPrototypeToUpperCase,StringPrototypeTrim}=primordials,{hideStackFrames,codes:{ERR_SOCKET_BAD_PORT,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$5,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$1,ERR_UNKNOWN_SIGNAL}}=errors,{normalizeEncoding}=utilExports,{isAsyncFunction,isArrayBufferView}=utilExports.types,signals={};function isInt32(_t){return _t===(_t|0)}function isUint32(_t){return _t===_t>>>0}const octalReg=/^[0-7]+$/,modeDesc="must be a 32-bit unsigned integer or an octal string";function parseFileMode(_t,e,$t){if(typeof _t>"u"&&(_t=$t),typeof _t=="string"){if(RegExpPrototypeExec(octalReg,_t)===null)throw new ERR_INVALID_ARG_VALUE$3(e,_t,modeDesc);_t=NumberParseInt(_t,8)}return validateUint32(_t,e),_t}const validateInteger$1=hideStackFrames((_t,e,$t=NumberMIN_SAFE_INTEGER,xt=NumberMAX_SAFE_INTEGER)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$5(e,"number",_t);if(!NumberIsInteger$1(_t))throw new ERR_OUT_OF_RANGE$1(e,"an integer",_t);if(_t<$t||_t>xt)throw new ERR_OUT_OF_RANGE$1(e,`>= ${$t} && <= ${xt}`,_t)}),validateInt32=hideStackFrames((_t,e,$t=-2147483648,xt=2147483647)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$5(e,"number",_t);if(!NumberIsInteger$1(_t))throw new ERR_OUT_OF_RANGE$1(e,"an integer",_t);if(_t<$t||_t>xt)throw new ERR_OUT_OF_RANGE$1(e,`>= ${$t} && <= ${xt}`,_t)}),validateUint32=hideStackFrames((_t,e,$t=!1)=>{if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$5(e,"number",_t);if(!NumberIsInteger$1(_t))throw new ERR_OUT_OF_RANGE$1(e,"an integer",_t);const xt=$t?1:0,At=4294967295;if(_t<xt||_t>At)throw new ERR_OUT_OF_RANGE$1(e,`>= ${xt} && <= ${At}`,_t)});function validateString(_t,e){if(typeof _t!="string")throw new ERR_INVALID_ARG_TYPE$5(e,"string",_t)}function validateNumber(_t,e,$t=void 0,xt){if(typeof _t!="number")throw new ERR_INVALID_ARG_TYPE$5(e,"number",_t);if($t!=null&&_t<$t||xt!=null&&_t>xt||($t!=null||xt!=null)&&NumberIsNaN$1(_t))throw new ERR_OUT_OF_RANGE$1(e,`${$t!=null?`>= ${$t}`:""}${$t!=null&&xt!=null?" && ":""}${xt!=null?`<= ${xt}`:""}`,_t)}const validateOneOf=hideStackFrames((_t,e,$t)=>{if(!ArrayPrototypeIncludes($t,_t)){const At="must be one of: "+ArrayPrototypeJoin(ArrayPrototypeMap($t,kt=>typeof kt=="string"?`'${kt}'`:String$1(kt)),", ");throw new ERR_INVALID_ARG_VALUE$3(e,_t,At)}});function validateBoolean$1(_t,e){if(typeof _t!="boolean")throw new ERR_INVALID_ARG_TYPE$5(e,"boolean",_t)}function getOwnPropertyValueOrDefault(_t,e,$t){return _t==null||!ObjectPrototypeHasOwnProperty(_t,e)?$t:_t[e]}const validateObject$3=hideStackFrames((_t,e,$t=null)=>{const xt=getOwnPropertyValueOrDefault($t,"allowArray",!1),At=getOwnPropertyValueOrDefault($t,"allowFunction",!1);if(!getOwnPropertyValueOrDefault($t,"nullable",!1)&&_t===null||!xt&&ArrayIsArray$2(_t)||typeof _t!="object"&&(!At||typeof _t!="function"))throw new ERR_INVALID_ARG_TYPE$5(e,"Object",_t)}),validateDictionary=hideStackFrames((_t,e)=>{if(_t!=null&&typeof _t!="object"&&typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$5(e,"a dictionary",_t)}),validateArray=hideStackFrames((_t,e,$t=0)=>{if(!ArrayIsArray$2(_t))throw new ERR_INVALID_ARG_TYPE$5(e,"Array",_t);if(_t.length<$t){const xt=`must be longer than ${$t}`;throw new ERR_INVALID_ARG_VALUE$3(e,_t,xt)}});function validateStringArray(_t,e){validateArray(_t,e);for(let $t=0;$t<_t.length;$t++)validateString(_t[$t],`${e}[${$t}]`)}function validateBooleanArray(_t,e){validateArray(_t,e);for(let $t=0;$t<_t.length;$t++)validateBoolean$1(_t[$t],`${e}[${$t}]`)}function validateSignalName(_t,e="signal"){if(validateString(_t,e),signals[_t]===void 0)throw signals[StringPrototypeToUpperCase(_t)]!==void 0?new ERR_UNKNOWN_SIGNAL(_t+" (signals must use all capital letters)"):new ERR_UNKNOWN_SIGNAL(_t)}const validateBuffer=hideStackFrames((_t,e="buffer")=>{if(!isArrayBufferView(_t))throw new ERR_INVALID_ARG_TYPE$5(e,["Buffer","TypedArray","DataView"],_t)});function validateEncoding(_t,e){const $t=normalizeEncoding(e),xt=_t.length;if($t==="hex"&&xt%2!==0)throw new ERR_INVALID_ARG_VALUE$3("encoding",e,`is invalid for data of length ${xt}`)}function validatePort(_t,e="Port",$t=!0){if(typeof _t!="number"&&typeof _t!="string"||typeof _t=="string"&&StringPrototypeTrim(_t).length===0||+_t!==+_t>>>0||_t>65535||_t===0&&!$t)throw new ERR_SOCKET_BAD_PORT(e,_t,$t);return _t|0}const validateAbortSignal$3=hideStackFrames((_t,e)=>{if(_t!==void 0&&(_t===null||typeof _t!="object"||!("aborted"in _t)))throw new ERR_INVALID_ARG_TYPE$5(e,"AbortSignal",_t)}),validateFunction$2=hideStackFrames((_t,e)=>{if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$5(e,"Function",_t)}),validatePlainFunction=hideStackFrames((_t,e)=>{if(typeof _t!="function"||isAsyncFunction(_t))throw new ERR_INVALID_ARG_TYPE$5(e,"Function",_t)}),validateUndefined=hideStackFrames((_t,e)=>{if(_t!==void 0)throw new ERR_INVALID_ARG_TYPE$5(e,"undefined",_t)});function validateUnion(_t,e,$t){if(!ArrayPrototypeIncludes($t,_t))throw new ERR_INVALID_ARG_TYPE$5(e,`('${ArrayPrototypeJoin($t,"|")}')`,_t)}const linkValueRegExp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat(_t,e){if(typeof _t>"u"||!RegExpPrototypeExec(linkValueRegExp,_t))throw new ERR_INVALID_ARG_VALUE$3(e,_t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function validateLinkHeaderValue(_t){if(typeof _t=="string")return validateLinkHeaderFormat(_t,"hints"),_t;if(ArrayIsArray$2(_t)){const e=_t.length;let $t="";if(e===0)return $t;for(let xt=0;xt<e;xt++){const At=_t[xt];validateLinkHeaderFormat(At,"hints"),$t+=At,xt!==e-1&&($t+=", ")}return $t}throw new ERR_INVALID_ARG_VALUE$3("hints",_t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var validators={isInt32,isUint32,parseFileMode,validateArray,validateStringArray,validateBooleanArray,validateBoolean:validateBoolean$1,validateBuffer,validateDictionary,validateEncoding,validateFunction:validateFunction$2,validateInt32,validateInteger:validateInteger$1,validateNumber,validateObject:validateObject$3,validateOneOf,validatePlainFunction,validatePort,validateSignalName,validateString,validateUint32,validateUndefined,validateUnion,validateAbortSignal:validateAbortSignal$3,validateLinkHeaderValue},endOfStream={exports:{}};const{Symbol:Symbol$4,SymbolAsyncIterator:SymbolAsyncIterator$2,SymbolIterator:SymbolIterator$2,SymbolFor}=primordials,kDestroyed$1=Symbol$4("kDestroyed"),kIsErrored=Symbol$4("kIsErrored"),kIsReadable=Symbol$4("kIsReadable"),kIsDisturbed=Symbol$4("kIsDisturbed"),kIsClosedPromise$1=SymbolFor("nodejs.webstream.isClosedPromise"),kControllerErrorFunction=SymbolFor("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$2(_t,e=!1){var $t;return!!(_t&&typeof _t.pipe=="function"&&typeof _t.on=="function"&&(!e||typeof _t.pause=="function"&&typeof _t.resume=="function")&&(!_t._writableState||(($t=_t._readableState)===null||$t===void 0?void 0:$t.readable)!==!1)&&(!_t._writableState||_t._readableState))}function isWritableNodeStream$1(_t){var e;return!!(_t&&typeof _t.write=="function"&&typeof _t.on=="function"&&(!_t._readableState||((e=_t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function isDuplexNodeStream(_t){return!!(_t&&typeof _t.pipe=="function"&&_t._readableState&&typeof _t.on=="function"&&typeof _t.write=="function")}function isNodeStream$4(_t){return _t&&(_t._readableState||_t._writableState||typeof _t.write=="function"&&typeof _t.on=="function"||typeof _t.pipe=="function"&&typeof _t.on=="function")}function isReadableStream$3(_t){return!!(_t&&!isNodeStream$4(_t)&&typeof _t.pipeThrough=="function"&&typeof _t.getReader=="function"&&typeof _t.cancel=="function")}function isWritableStream$2(_t){return!!(_t&&!isNodeStream$4(_t)&&typeof _t.getWriter=="function"&&typeof _t.abort=="function")}function isTransformStream$2(_t){return!!(_t&&!isNodeStream$4(_t)&&typeof _t.readable=="object"&&typeof _t.writable=="object")}function isWebStream$2(_t){return isReadableStream$3(_t)||isWritableStream$2(_t)||isTransformStream$2(_t)}function isIterable$1(_t,e){return _t==null?!1:e===!0?typeof _t[SymbolAsyncIterator$2]=="function":e===!1?typeof _t[SymbolIterator$2]=="function":typeof _t[SymbolAsyncIterator$2]=="function"||typeof _t[SymbolIterator$2]=="function"}function isDestroyed$1(_t){if(!isNodeStream$4(_t))return null;const e=_t._writableState,$t=_t._readableState,xt=e||$t;return!!(_t.destroyed||_t[kDestroyed$1]||xt!=null&&xt.destroyed)}function isWritableEnded(_t){if(!isWritableNodeStream$1(_t))return null;if(_t.writableEnded===!0)return!0;const e=_t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function isWritableFinished$1(_t,e){if(!isWritableNodeStream$1(_t))return null;if(_t.writableFinished===!0)return!0;const $t=_t._writableState;return $t!=null&&$t.errored?!1:typeof($t==null?void 0:$t.finished)!="boolean"?null:!!($t.finished||e===!1&&$t.ended===!0&&$t.length===0)}function isReadableEnded$1(_t){if(!isReadableNodeStream$2(_t))return null;if(_t.readableEnded===!0)return!0;const e=_t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function isReadableFinished$1(_t,e){if(!isReadableNodeStream$2(_t))return null;const $t=_t._readableState;return $t!=null&&$t.errored?!1:typeof($t==null?void 0:$t.endEmitted)!="boolean"?null:!!($t.endEmitted||e===!1&&$t.ended===!0&&$t.length===0)}function isReadable$3(_t){return _t&&_t[kIsReadable]!=null?_t[kIsReadable]:typeof(_t==null?void 0:_t.readable)!="boolean"?null:isDestroyed$1(_t)?!1:isReadableNodeStream$2(_t)&&_t.readable&&!isReadableFinished$1(_t)}function isWritable$3(_t){return typeof(_t==null?void 0:_t.writable)!="boolean"?null:isDestroyed$1(_t)?!1:isWritableNodeStream$1(_t)&&_t.writable&&!isWritableEnded(_t)}function isFinished$1(_t,e){return isNodeStream$4(_t)?isDestroyed$1(_t)?!0:!((e==null?void 0:e.readable)!==!1&&isReadable$3(_t)||(e==null?void 0:e.writable)!==!1&&isWritable$3(_t)):null}function isWritableErrored$1(_t){var e,$t;return isNodeStream$4(_t)?_t.writableErrored?_t.writableErrored:(e=($t=_t._writableState)===null||$t===void 0?void 0:$t.errored)!==null&&e!==void 0?e:null:null}function isReadableErrored$1(_t){var e,$t;return isNodeStream$4(_t)?_t.readableErrored?_t.readableErrored:(e=($t=_t._readableState)===null||$t===void 0?void 0:$t.errored)!==null&&e!==void 0?e:null:null}function isClosed$1(_t){if(!isNodeStream$4(_t))return null;if(typeof _t.closed=="boolean")return _t.closed;const e=_t._writableState,$t=_t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof($t==null?void 0:$t.closed)=="boolean"?(e==null?void 0:e.closed)||($t==null?void 0:$t.closed):typeof _t._closed=="boolean"&&isOutgoingMessage(_t)?_t._closed:null}function isOutgoingMessage(_t){return typeof _t._closed=="boolean"&&typeof _t._defaultKeepAlive=="boolean"&&typeof _t._removedConnection=="boolean"&&typeof _t._removedContLen=="boolean"}function isServerResponse(_t){return typeof _t._sent100=="boolean"&&isOutgoingMessage(_t)}function isServerRequest$1(_t){var e;return typeof _t._consuming=="boolean"&&typeof _t._dumped=="boolean"&&((e=_t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function willEmitClose(_t){if(!isNodeStream$4(_t))return null;const e=_t._writableState,$t=_t._readableState,xt=e||$t;return!xt&&isServerResponse(_t)||!!(xt&&xt.autoDestroy&&xt.emitClose&&xt.closed===!1)}function isDisturbed(_t){var e;return!!(_t&&((e=_t[kIsDisturbed])!==null&&e!==void 0?e:_t.readableDidRead||_t.readableAborted))}function isErrored(_t){var e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt;return!!(_t&&((e=($t=(xt=(At=(kt=(Bt=_t[kIsErrored])!==null&&Bt!==void 0?Bt:_t.readableErrored)!==null&&kt!==void 0?kt:_t.writableErrored)!==null&&At!==void 0?At:(jt=_t._readableState)===null||jt===void 0?void 0:jt.errorEmitted)!==null&&xt!==void 0?xt:(Lt=_t._writableState)===null||Lt===void 0?void 0:Lt.errorEmitted)!==null&&$t!==void 0?$t:(Ut=_t._readableState)===null||Ut===void 0?void 0:Ut.errored)!==null&&e!==void 0?e:!((Nt=_t._writableState)===null||Nt===void 0)&&Nt.errored))}var utils={kDestroyed:kDestroyed$1,isDisturbed,kIsDisturbed,isErrored,kIsErrored,isReadable:isReadable$3,kIsReadable,kIsClosedPromise:kIsClosedPromise$1,kControllerErrorFunction,isClosed:isClosed$1,isDestroyed:isDestroyed$1,isDuplexNodeStream,isFinished:isFinished$1,isIterable:isIterable$1,isReadableNodeStream:isReadableNodeStream$2,isReadableStream:isReadableStream$3,isReadableEnded:isReadableEnded$1,isReadableFinished:isReadableFinished$1,isReadableErrored:isReadableErrored$1,isNodeStream:isNodeStream$4,isWebStream:isWebStream$2,isWritable:isWritable$3,isWritableNodeStream:isWritableNodeStream$1,isWritableStream:isWritableStream$2,isWritableEnded,isWritableFinished:isWritableFinished$1,isWritableErrored:isWritableErrored$1,isServerRequest:isServerRequest$1,isServerResponse,willEmitClose,isTransformStream:isTransformStream$2};const process$3=browserExports$2,{AbortError:AbortError$4,codes}=errors,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$4,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$1}=codes,{kEmptyObject,once:once$1}=utilExports,{validateAbortSignal:validateAbortSignal$2,validateFunction:validateFunction$1,validateObject:validateObject$2,validateBoolean}=validators,{Promise:Promise$3,PromisePrototypeThen:PromisePrototypeThen$2}=primordials,{isClosed,isReadable:isReadable$2,isReadableNodeStream:isReadableNodeStream$1,isReadableStream:isReadableStream$2,isReadableFinished,isReadableErrored,isWritable:isWritable$2,isWritableNodeStream,isWritableStream:isWritableStream$1,isWritableFinished,isWritableErrored,isNodeStream:isNodeStream$3,willEmitClose:_willEmitClose,kIsClosedPromise}=utils;function isRequest$1(_t){return _t.setHeader&&typeof _t.abort=="function"}const nop=()=>{};function eos$2(_t,e,$t){var xt,At;if(arguments.length===2?($t=e,e=kEmptyObject):e==null?e=kEmptyObject:validateObject$2(e,"options"),validateFunction$1($t,"callback"),validateAbortSignal$2(e.signal,"options.signal"),$t=once$1($t),isReadableStream$2(_t)||isWritableStream$1(_t))return eosWeb(_t,e,$t);if(!isNodeStream$3(_t))throw new ERR_INVALID_ARG_TYPE$4("stream",["ReadableStream","WritableStream","Stream"],_t);const kt=(xt=e.readable)!==null&&xt!==void 0?xt:isReadableNodeStream$1(_t),Bt=(At=e.writable)!==null&&At!==void 0?At:isWritableNodeStream(_t),jt=_t._writableState,Lt=_t._readableState,Ut=()=>{_t.writable||Kt()};let Nt=_willEmitClose(_t)&&isReadableNodeStream$1(_t)===kt&&isWritableNodeStream(_t)===Bt,qt=isWritableFinished(_t,!1);const Kt=()=>{qt=!0,_t.destroyed&&(Nt=!1),!(Nt&&(!_t.readable||kt))&&(!kt||zt)&&$t.call(_t)};let zt=isReadableFinished(_t,!1);const Vt=()=>{zt=!0,_t.destroyed&&(Nt=!1),!(Nt&&(!_t.writable||Bt))&&(!Bt||qt)&&$t.call(_t)},Ht=yr=>{$t.call(_t,yr)};let Jt=isClosed(_t);const rr=()=>{Jt=!0;const yr=isWritableErrored(_t)||isReadableErrored(_t);if(yr&&typeof yr!="boolean")return $t.call(_t,yr);if(kt&&!zt&&isReadableNodeStream$1(_t,!0)&&!isReadableFinished(_t,!1))return $t.call(_t,new ERR_STREAM_PREMATURE_CLOSE$1);if(Bt&&!qt&&!isWritableFinished(_t,!1))return $t.call(_t,new ERR_STREAM_PREMATURE_CLOSE$1);$t.call(_t)},Qt=()=>{Jt=!0;const yr=isWritableErrored(_t)||isReadableErrored(_t);if(yr&&typeof yr!="boolean")return $t.call(_t,yr);$t.call(_t)},Wt=()=>{_t.req.on("finish",Kt)};isRequest$1(_t)?(_t.on("complete",Kt),Nt||_t.on("abort",rr),_t.req?Wt():_t.on("request",Wt)):Bt&&!jt&&(_t.on("end",Ut),_t.on("close",Ut)),!Nt&&typeof _t.aborted=="boolean"&&_t.on("aborted",rr),_t.on("end",Vt),_t.on("finish",Kt),e.error!==!1&&_t.on("error",Ht),_t.on("close",rr),Jt?process$3.nextTick(rr):jt!=null&&jt.errorEmitted||Lt!=null&&Lt.errorEmitted?Nt||process$3.nextTick(Qt):(!kt&&(!Nt||isReadable$2(_t))&&(qt||isWritable$2(_t)===!1)||!Bt&&(!Nt||isWritable$2(_t))&&(zt||isReadable$2(_t)===!1)||Lt&&_t.req&&_t.aborted)&&process$3.nextTick(Qt);const nr=()=>{$t=nop,_t.removeListener("aborted",rr),_t.removeListener("complete",Kt),_t.removeListener("abort",rr),_t.removeListener("request",Wt),_t.req&&_t.req.removeListener("finish",Kt),_t.removeListener("end",Ut),_t.removeListener("close",Ut),_t.removeListener("finish",Kt),_t.removeListener("end",Vt),_t.removeListener("error",Ht),_t.removeListener("close",rr)};if(e.signal&&!Jt){const yr=()=>{const vr=$t;nr(),vr.call(_t,new AbortError$4(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)process$3.nextTick(yr);else{const vr=$t;$t=once$1((...Ir)=>{e.signal.removeEventListener("abort",yr),vr.apply(_t,Ir)}),e.signal.addEventListener("abort",yr)}}return nr}function eosWeb(_t,e,$t){let xt=!1,At=nop;if(e.signal)if(At=()=>{xt=!0,$t.call(_t,new AbortError$4(void 0,{cause:e.signal.reason}))},e.signal.aborted)process$3.nextTick(At);else{const Bt=$t;$t=once$1((...jt)=>{e.signal.removeEventListener("abort",At),Bt.apply(_t,jt)}),e.signal.addEventListener("abort",At)}const kt=(...Bt)=>{xt||process$3.nextTick(()=>$t.apply(_t,Bt))};return PromisePrototypeThen$2(_t[kIsClosedPromise].promise,kt,kt),nop}function finished$1(_t,e){var $t;let xt=!1;return e===null&&(e=kEmptyObject),($t=e)!==null&&$t!==void 0&&$t.cleanup&&(validateBoolean(e.cleanup,"cleanup"),xt=e.cleanup),new Promise$3((At,kt)=>{const Bt=eos$2(_t,e,jt=>{xt&&Bt(),jt?kt(jt):At()})})}endOfStream.exports=eos$2;endOfStream.exports.finished=finished$1;var endOfStreamExports=endOfStream.exports;const process$2=browserExports$2,{aggregateTwoErrors:aggregateTwoErrors$1,codes:{ERR_MULTIPLE_CALLBACK},AbortError:AbortError$3}=errors,{Symbol:Symbol$3}=primordials,{kDestroyed,isDestroyed,isFinished,isServerRequest}=utils,kDestroy=Symbol$3("kDestroy"),kConstruct=Symbol$3("kConstruct");function checkError(_t,e,$t){_t&&(_t.stack,e&&!e.errored&&(e.errored=_t),$t&&!$t.errored&&($t.errored=_t))}function destroy(_t,e){const $t=this._readableState,xt=this._writableState,At=xt||$t;return xt!=null&&xt.destroyed||$t!=null&&$t.destroyed?(typeof e=="function"&&e(),this):(checkError(_t,xt,$t),xt&&(xt.destroyed=!0),$t&&($t.destroyed=!0),At.constructed?_destroy(this,_t,e):this.once(kDestroy,function(kt){_destroy(this,aggregateTwoErrors$1(kt,_t),e)}),this)}function _destroy(_t,e,$t){let xt=!1;function At(kt){if(xt)return;xt=!0;const Bt=_t._readableState,jt=_t._writableState;checkError(kt,jt,Bt),jt&&(jt.closed=!0),Bt&&(Bt.closed=!0),typeof $t=="function"&&$t(kt),kt?process$2.nextTick(emitErrorCloseNT,_t,kt):process$2.nextTick(emitCloseNT,_t)}try{_t._destroy(e||null,At)}catch(kt){At(kt)}}function emitErrorCloseNT(_t,e){emitErrorNT(_t,e),emitCloseNT(_t)}function emitCloseNT(_t){const e=_t._readableState,$t=_t._writableState;$t&&($t.closeEmitted=!0),e&&(e.closeEmitted=!0),($t!=null&&$t.emitClose||e!=null&&e.emitClose)&&_t.emit("close")}function emitErrorNT(_t,e){const $t=_t._readableState,xt=_t._writableState;xt!=null&&xt.errorEmitted||$t!=null&&$t.errorEmitted||(xt&&(xt.errorEmitted=!0),$t&&($t.errorEmitted=!0),_t.emit("error",e))}function undestroy(){const _t=this._readableState,e=this._writableState;_t&&(_t.constructed=!0,_t.closed=!1,_t.closeEmitted=!1,_t.destroyed=!1,_t.errored=null,_t.errorEmitted=!1,_t.reading=!1,_t.ended=_t.readable===!1,_t.endEmitted=_t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function errorOrDestroy(_t,e,$t){const xt=_t._readableState,At=_t._writableState;if(At!=null&&At.destroyed||xt!=null&&xt.destroyed)return this;xt!=null&&xt.autoDestroy||At!=null&&At.autoDestroy?_t.destroy(e):e&&(e.stack,At&&!At.errored&&(At.errored=e),xt&&!xt.errored&&(xt.errored=e),$t?process$2.nextTick(emitErrorNT,_t,e):emitErrorNT(_t,e))}function construct(_t,e){if(typeof _t._construct!="function")return;const $t=_t._readableState,xt=_t._writableState;$t&&($t.constructed=!1),xt&&(xt.constructed=!1),_t.once(kConstruct,e),!(_t.listenerCount(kConstruct)>1)&&process$2.nextTick(constructNT,_t)}function constructNT(_t){let e=!1;function $t(xt){if(e){errorOrDestroy(_t,xt??new ERR_MULTIPLE_CALLBACK);return}e=!0;const At=_t._readableState,kt=_t._writableState,Bt=kt||At;At&&(At.constructed=!0),kt&&(kt.constructed=!0),Bt.destroyed?_t.emit(kDestroy,xt):xt?errorOrDestroy(_t,xt,!0):process$2.nextTick(emitConstructNT,_t)}try{_t._construct(xt=>{process$2.nextTick($t,xt)})}catch(xt){process$2.nextTick($t,xt)}}function emitConstructNT(_t){_t.emit(kConstruct)}function isRequest(_t){return(_t==null?void 0:_t.setHeader)&&typeof _t.abort=="function"}function emitCloseLegacy(_t){_t.emit("close")}function emitErrorCloseLegacy(_t,e){_t.emit("error",e),process$2.nextTick(emitCloseLegacy,_t)}function destroyer$2(_t,e){!_t||isDestroyed(_t)||(!e&&!isFinished(_t)&&(e=new AbortError$3),isServerRequest(_t)?(_t.socket=null,_t.destroy(e)):isRequest(_t)?_t.abort():isRequest(_t.req)?_t.req.abort():typeof _t.destroy=="function"?_t.destroy(e):typeof _t.close=="function"?_t.close():e?process$2.nextTick(emitErrorCloseLegacy,_t,e):process$2.nextTick(emitCloseLegacy,_t),_t.destroyed||(_t[kDestroyed]=!0))}var destroy_1={construct,destroyer:destroyer$2,destroy,undestroy,errorOrDestroy};const{ArrayIsArray:ArrayIsArray$1,ObjectSetPrototypeOf:ObjectSetPrototypeOf$2}=primordials,{EventEmitter:EE}=eventsExports;function Stream(_t){EE.call(this,_t)}ObjectSetPrototypeOf$2(Stream.prototype,EE.prototype);ObjectSetPrototypeOf$2(Stream,EE);Stream.prototype.pipe=function(_t,e){const $t=this;function xt(Nt){_t.writable&&_t.write(Nt)===!1&&$t.pause&&$t.pause()}$t.on("data",xt);function At(){$t.readable&&$t.resume&&$t.resume()}_t.on("drain",At),!_t._isStdio&&(!e||e.end!==!1)&&($t.on("end",Bt),$t.on("close",jt));let kt=!1;function Bt(){kt||(kt=!0,_t.end())}function jt(){kt||(kt=!0,typeof _t.destroy=="function"&&_t.destroy())}function Lt(Nt){Ut(),EE.listenerCount(this,"error")===0&&this.emit("error",Nt)}prependListener($t,"error",Lt),prependListener(_t,"error",Lt);function Ut(){$t.removeListener("data",xt),_t.removeListener("drain",At),$t.removeListener("end",Bt),$t.removeListener("close",jt),$t.removeListener("error",Lt),_t.removeListener("error",Lt),$t.removeListener("end",Ut),$t.removeListener("close",Ut),_t.removeListener("close",Ut)}return $t.on("end",Ut),$t.on("close",Ut),_t.on("close",Ut),_t.emit("pipe",$t),_t};function prependListener(_t,e,$t){if(typeof _t.prependListener=="function")return _t.prependListener(e,$t);!_t._events||!_t._events[e]?_t.on(e,$t):ArrayIsArray$1(_t._events[e])?_t._events[e].unshift($t):_t._events[e]=[$t,_t._events[e]]}var legacy={Stream,prependListener},addAbortSignal={exports:{}};(function(_t){const{AbortError:e,codes:$t}=errors,{isNodeStream:xt,isWebStream:At,kControllerErrorFunction:kt}=utils,Bt=endOfStreamExports,{ERR_INVALID_ARG_TYPE:jt}=$t,Lt=(Ut,Nt)=>{if(typeof Ut!="object"||!("aborted"in Ut))throw new jt(Nt,"AbortSignal",Ut)};_t.exports.addAbortSignal=function(Nt,qt){if(Lt(Nt,"signal"),!xt(qt)&&!At(qt))throw new jt("stream",["ReadableStream","WritableStream","Stream"],qt);return _t.exports.addAbortSignalNoValidate(Nt,qt)},_t.exports.addAbortSignalNoValidate=function(Ut,Nt){if(typeof Ut!="object"||!("aborted"in Ut))return Nt;const qt=xt(Nt)?()=>{Nt.destroy(new e(void 0,{cause:Ut.reason}))}:()=>{Nt[kt](new e(void 0,{cause:Ut.reason}))};return Ut.aborted?qt():(Ut.addEventListener("abort",qt),Bt(Nt,()=>Ut.removeEventListener("abort",qt))),Nt}})(addAbortSignal);var addAbortSignalExports=addAbortSignal.exports;const{StringPrototypeSlice,SymbolIterator:SymbolIterator$1,TypedArrayPrototypeSet,Uint8Array:Uint8Array$1}=primordials,{Buffer:Buffer$1}=buffer$2,{inspect}=utilExports;var buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const $t={data:e,next:null};this.length>0?this.tail.next=$t:this.head=$t,this.tail=$t,++this.length}unshift(e){const $t={data:e,next:this.head};this.length===0&&(this.tail=$t),this.head=$t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let $t=this.head,xt=""+$t.data;for(;($t=$t.next)!==null;)xt+=e+$t.data;return xt}concat(e){if(this.length===0)return Buffer$1.alloc(0);const $t=Buffer$1.allocUnsafe(e>>>0);let xt=this.head,At=0;for(;xt;)TypedArrayPrototypeSet($t,xt.data,At),At+=xt.data.length,xt=xt.next;return $t}consume(e,$t){const xt=this.head.data;if(e<xt.length){const At=xt.slice(0,e);return this.head.data=xt.slice(e),At}return e===xt.length?this.shift():$t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[SymbolIterator$1](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let $t="",xt=this.head,At=0;do{const kt=xt.data;if(e>kt.length)$t+=kt,e-=kt.length;else{e===kt.length?($t+=kt,++At,xt.next?this.head=xt.next:this.head=this.tail=null):($t+=StringPrototypeSlice(kt,0,e),this.head=xt,xt.data=StringPrototypeSlice(kt,e));break}++At}while((xt=xt.next)!==null);return this.length-=At,$t}_getBuffer(e){const $t=Buffer$1.allocUnsafe(e),xt=e;let At=this.head,kt=0;do{const Bt=At.data;if(e>Bt.length)TypedArrayPrototypeSet($t,Bt,xt-e),e-=Bt.length;else{e===Bt.length?(TypedArrayPrototypeSet($t,Bt,xt-e),++kt,At.next?this.head=At.next:this.head=this.tail=null):(TypedArrayPrototypeSet($t,new Uint8Array$1(Bt.buffer,Bt.byteOffset,e),xt-e),this.head=At,At.data=Bt.slice(e));break}++kt}while((At=At.next)!==null);return this.length-=kt,$t}[Symbol.for("nodejs.util.inspect.custom")](e,$t){return inspect(this,{...$t,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$1,NumberIsInteger}=primordials,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$2}=errors.codes;function highWaterMarkFrom(_t,e,$t){return _t.highWaterMark!=null?_t.highWaterMark:e?_t[$t]:null}function getDefaultHighWaterMark(_t){return _t?16:16*1024}function getHighWaterMark$1(_t,e,$t,xt){const At=highWaterMarkFrom(e,xt,$t);if(At!=null){if(!NumberIsInteger(At)||At<0){const kt=xt?`options.${$t}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$2(kt,At)}return MathFloor$1(At)}return getDefaultHighWaterMark(_t.objectMode)}var state={getHighWaterMark:getHighWaterMark$1,getDefaultHighWaterMark};const process$1=browserExports$2,{PromisePrototypeThen:PromisePrototypeThen$1,SymbolAsyncIterator:SymbolAsyncIterator$1,SymbolIterator}=primordials,{Buffer}=buffer$2,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$3,ERR_STREAM_NULL_VALUES}=errors.codes;function from$1(_t,e,$t){let xt;if(typeof e=="string"||e instanceof Buffer)return new _t({objectMode:!0,...$t,read(){this.push(e),this.push(null)}});let At;if(e&&e[SymbolAsyncIterator$1])At=!0,xt=e[SymbolAsyncIterator$1]();else if(e&&e[SymbolIterator])At=!1,xt=e[SymbolIterator]();else throw new ERR_INVALID_ARG_TYPE$3("iterable",["Iterable"],e);const kt=new _t({objectMode:!0,highWaterMark:1,...$t});let Bt=!1;kt._read=function(){Bt||(Bt=!0,Lt())},kt._destroy=function(Ut,Nt){PromisePrototypeThen$1(jt(Ut),()=>process$1.nextTick(Nt,Ut),qt=>process$1.nextTick(Nt,qt||Ut))};async function jt(Ut){const Nt=Ut!=null,qt=typeof xt.throw=="function";if(Nt&&qt){const{value:Kt,done:zt}=await xt.throw(Ut);if(await Kt,zt)return}if(typeof xt.return=="function"){const{value:Kt}=await xt.return();await Kt}}async function Lt(){for(;;){try{const{value:Ut,done:Nt}=At?await xt.next():xt.next();if(Nt)kt.push(null);else{const qt=Ut&&typeof Ut.then=="function"?await Ut:Ut;if(qt===null)throw Bt=!1,new ERR_STREAM_NULL_VALUES;if(kt.push(qt))continue;Bt=!1}}catch(Ut){kt.destroy(Ut)}break}}return kt}var from_1=from$1,readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const _t=browserExports$2,{ArrayPrototypeIndexOf:e,NumberIsInteger:$t,NumberIsNaN:xt,NumberParseInt:At,ObjectDefineProperties:kt,ObjectKeys:Bt,ObjectSetPrototypeOf:jt,Promise:Lt,SafeSet:Ut,SymbolAsyncIterator:Nt,Symbol:qt}=primordials;readable=tr,tr.ReadableState=ar;const{EventEmitter:Kt}=eventsExports,{Stream:zt,prependListener:Vt}=legacy,{Buffer:Ht}=buffer$2,{addAbortSignal:Jt}=addAbortSignalExports,rr=endOfStreamExports;let Qt=utilExports.debuglog("stream",Gr=>{Qt=Gr});const Wt=buffer_list,nr=destroy_1,{getHighWaterMark:yr,getDefaultHighWaterMark:vr}=state,{aggregateTwoErrors:Ir,codes:{ERR_INVALID_ARG_TYPE:xr,ERR_METHOD_NOT_IMPLEMENTED:Or,ERR_OUT_OF_RANGE:Nr,ERR_STREAM_PUSH_AFTER_EOF:kr,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:lr}}=errors,{validateObject:ir}=validators,Xt=qt("kPaused"),{StringDecoder:er}=string_decoder,pr=from_1;jt(tr.prototype,zt.prototype),jt(tr,zt);const ur=()=>{},{errorOrDestroy:gr}=nr;function ar(Gr,Fr,Xr){typeof Xr!="boolean"&&(Xr=Fr instanceof requireDuplex()),this.objectMode=!!(Gr&&Gr.objectMode),Xr&&(this.objectMode=this.objectMode||!!(Gr&&Gr.readableObjectMode)),this.highWaterMark=Gr?yr(this,Gr,"readableHighWaterMark",Xr):vr(!1),this.buffer=new Wt,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Xt]=null,this.errorEmitted=!1,this.emitClose=!Gr||Gr.emitClose!==!1,this.autoDestroy=!Gr||Gr.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=Gr&&Gr.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,Gr&&Gr.encoding&&(this.decoder=new er(Gr.encoding),this.encoding=Gr.encoding)}function tr(Gr){if(!(this instanceof tr))return new tr(Gr);const Fr=this instanceof requireDuplex();this._readableState=new ar(Gr,this,Fr),Gr&&(typeof Gr.read=="function"&&(this._read=Gr.read),typeof Gr.destroy=="function"&&(this._destroy=Gr.destroy),typeof Gr.construct=="function"&&(this._construct=Gr.construct),Gr.signal&&!Fr&&Jt(Gr.signal,this)),zt.call(this,Gr),nr.construct(this,()=>{this._readableState.needReadable&&Mr(this,this._readableState)})}tr.prototype.destroy=nr.destroy,tr.prototype._undestroy=nr.undestroy,tr.prototype._destroy=function(Gr,Fr){Fr(Gr)},tr.prototype[Kt.captureRejectionSymbol]=function(Gr){this.destroy(Gr)},tr.prototype.push=function(Gr,Fr){return dr(this,Gr,Fr,!1)},tr.prototype.unshift=function(Gr,Fr){return dr(this,Gr,Fr,!0)};function dr(Gr,Fr,Xr,tn){Qt("readableAddChunk",Fr);const en=Gr._readableState;let un;if(en.objectMode||(typeof Fr=="string"?(Xr=Xr||en.defaultEncoding,en.encoding!==Xr&&(tn&&en.encoding?Fr=Ht.from(Fr,Xr).toString(en.encoding):(Fr=Ht.from(Fr,Xr),Xr=""))):Fr instanceof Ht?Xr="":zt._isUint8Array(Fr)?(Fr=zt._uint8ArrayToBuffer(Fr),Xr=""):Fr!=null&&(un=new xr("chunk",["string","Buffer","Uint8Array"],Fr))),un)gr(Gr,un);else if(Fr===null)en.reading=!1,Er(Gr,en);else if(en.objectMode||Fr&&Fr.length>0)if(tn)if(en.endEmitted)gr(Gr,new lr);else{if(en.destroyed||en.errored)return!1;fr(Gr,en,Fr,!0)}else if(en.ended)gr(Gr,new kr);else{if(en.destroyed||en.errored)return!1;en.reading=!1,en.decoder&&!Xr?(Fr=en.decoder.write(Fr),en.objectMode||Fr.length!==0?fr(Gr,en,Fr,!1):Mr(Gr,en)):fr(Gr,en,Fr,!1)}else tn||(en.reading=!1,Mr(Gr,en));return!en.ended&&(en.length<en.highWaterMark||en.length===0)}function fr(Gr,Fr,Xr,tn){Fr.flowing&&Fr.length===0&&!Fr.sync&&Gr.listenerCount("data")>0?(Fr.multiAwaitDrain?Fr.awaitDrainWriters.clear():Fr.awaitDrainWriters=null,Fr.dataEmitted=!0,Gr.emit("data",Xr)):(Fr.length+=Fr.objectMode?1:Xr.length,tn?Fr.buffer.unshift(Xr):Fr.buffer.push(Xr),Fr.needReadable&&wr(Gr)),Mr(Gr,Fr)}tr.prototype.isPaused=function(){const Gr=this._readableState;return Gr[Xt]===!0||Gr.flowing===!1},tr.prototype.setEncoding=function(Gr){const Fr=new er(Gr);this._readableState.decoder=Fr,this._readableState.encoding=this._readableState.decoder.encoding;const Xr=this._readableState.buffer;let tn="";for(const en of Xr)tn+=Fr.write(en);return Xr.clear(),tn!==""&&Xr.push(tn),this._readableState.length=tn.length,this};const br=1073741824;function Sr(Gr){if(Gr>br)throw new Nr("size","<= 1GiB",Gr);return Gr--,Gr|=Gr>>>1,Gr|=Gr>>>2,Gr|=Gr>>>4,Gr|=Gr>>>8,Gr|=Gr>>>16,Gr++,Gr}function Dr(Gr,Fr){return Gr<=0||Fr.length===0&&Fr.ended?0:Fr.objectMode?1:xt(Gr)?Fr.flowing&&Fr.length?Fr.buffer.first().length:Fr.length:Gr<=Fr.length?Gr:Fr.ended?Fr.length:0}tr.prototype.read=function(Gr){Qt("read",Gr),Gr===void 0?Gr=NaN:$t(Gr)||(Gr=At(Gr,10));const Fr=this._readableState,Xr=Gr;if(Gr>Fr.highWaterMark&&(Fr.highWaterMark=Sr(Gr)),Gr!==0&&(Fr.emittedReadable=!1),Gr===0&&Fr.needReadable&&((Fr.highWaterMark!==0?Fr.length>=Fr.highWaterMark:Fr.length>0)||Fr.ended))return Qt("read: emitReadable",Fr.length,Fr.ended),Fr.length===0&&Fr.ended?Kr(this):wr(this),null;if(Gr=Dr(Gr,Fr),Gr===0&&Fr.ended)return Fr.length===0&&Kr(this),null;let tn=Fr.needReadable;if(Qt("need readable",tn),(Fr.length===0||Fr.length-Gr<Fr.highWaterMark)&&(tn=!0,Qt("length less than watermark",tn)),Fr.ended||Fr.reading||Fr.destroyed||Fr.errored||!Fr.constructed)tn=!1,Qt("reading, ended or constructing",tn);else if(tn){Qt("do read"),Fr.reading=!0,Fr.sync=!0,Fr.length===0&&(Fr.needReadable=!0);try{this._read(Fr.highWaterMark)}catch(un){gr(this,un)}Fr.sync=!1,Fr.reading||(Gr=Dr(Xr,Fr))}let en;return Gr>0?en=jr(Gr,Fr):en=null,en===null?(Fr.needReadable=Fr.length<=Fr.highWaterMark,Gr=0):(Fr.length-=Gr,Fr.multiAwaitDrain?Fr.awaitDrainWriters.clear():Fr.awaitDrainWriters=null),Fr.length===0&&(Fr.ended||(Fr.needReadable=!0),Xr!==Gr&&Fr.ended&&Kr(this)),en!==null&&!Fr.errorEmitted&&!Fr.closeEmitted&&(Fr.dataEmitted=!0,this.emit("data",en)),en};function Er(Gr,Fr){if(Qt("onEofChunk"),!Fr.ended){if(Fr.decoder){const Xr=Fr.decoder.end();Xr&&Xr.length&&(Fr.buffer.push(Xr),Fr.length+=Fr.objectMode?1:Xr.length)}Fr.ended=!0,Fr.sync?wr(Gr):(Fr.needReadable=!1,Fr.emittedReadable=!0,Tr(Gr))}}function wr(Gr){const Fr=Gr._readableState;Qt("emitReadable",Fr.needReadable,Fr.emittedReadable),Fr.needReadable=!1,Fr.emittedReadable||(Qt("emitReadable",Fr.flowing),Fr.emittedReadable=!0,_t.nextTick(Tr,Gr))}function Tr(Gr){const Fr=Gr._readableState;Qt("emitReadable_",Fr.destroyed,Fr.length,Fr.ended),!Fr.destroyed&&!Fr.errored&&(Fr.length||Fr.ended)&&(Gr.emit("readable"),Fr.emittedReadable=!1),Fr.needReadable=!Fr.flowing&&!Fr.ended&&Fr.length<=Fr.highWaterMark,Pr(Gr)}function Mr(Gr,Fr){!Fr.readingMore&&Fr.constructed&&(Fr.readingMore=!0,_t.nextTick(Lr,Gr,Fr))}function Lr(Gr,Fr){for(;!Fr.reading&&!Fr.ended&&(Fr.length<Fr.highWaterMark||Fr.flowing&&Fr.length===0);){const Xr=Fr.length;if(Qt("maybeReadMore read 0"),Gr.read(0),Xr===Fr.length)break}Fr.readingMore=!1}tr.prototype._read=function(Gr){throw new Or("_read()")},tr.prototype.pipe=function(Gr,Fr){const Xr=this,tn=this._readableState;tn.pipes.length===1&&(tn.multiAwaitDrain||(tn.multiAwaitDrain=!0,tn.awaitDrainWriters=new Ut(tn.awaitDrainWriters?[tn.awaitDrainWriters]:[]))),tn.pipes.push(Gr),Qt("pipe count=%d opts=%j",tn.pipes.length,Fr);const un=(!Fr||Fr.end!==!1)&&Gr!==_t.stdout&&Gr!==_t.stderr?yn:Cn;tn.endEmitted?_t.nextTick(un):Xr.once("end",un),Gr.on("unpipe",hn);function hn(gn,kn){Qt("onunpipe"),gn===Xr&&kn&&kn.hasUnpiped===!1&&(kn.hasUnpiped=!0,An())}function yn(){Qt("onend"),Gr.end()}let pn,Dn=!1;function An(){Qt("cleanup"),Gr.removeListener("close",En),Gr.removeListener("finish",On),pn&&Gr.removeListener("drain",pn),Gr.removeListener("error",Rn),Gr.removeListener("unpipe",hn),Xr.removeListener("end",yn),Xr.removeListener("end",Cn),Xr.removeListener("data",In),Dn=!0,pn&&tn.awaitDrainWriters&&(!Gr._writableState||Gr._writableState.needDrain)&&pn()}function vn(){Dn||(tn.pipes.length===1&&tn.pipes[0]===Gr?(Qt("false write response, pause",0),tn.awaitDrainWriters=Gr,tn.multiAwaitDrain=!1):tn.pipes.length>1&&tn.pipes.includes(Gr)&&(Qt("false write response, pause",tn.awaitDrainWriters.size),tn.awaitDrainWriters.add(Gr)),Xr.pause()),pn||(pn=Cr(Xr,Gr),Gr.on("drain",pn))}Xr.on("data",In);function In(gn){Qt("ondata");const kn=Gr.write(gn);Qt("dest.write",kn),kn===!1&&vn()}function Rn(gn){if(Qt("onerror",gn),Cn(),Gr.removeListener("error",Rn),Gr.listenerCount("error")===0){const kn=Gr._writableState||Gr._readableState;kn&&!kn.errorEmitted?gr(Gr,gn):Gr.emit("error",gn)}}Vt(Gr,"error",Rn);function En(){Gr.removeListener("finish",On),Cn()}Gr.once("close",En);function On(){Qt("onfinish"),Gr.removeListener("close",En),Cn()}Gr.once("finish",On);function Cn(){Qt("unpipe"),Xr.unpipe(Gr)}return Gr.emit("pipe",Xr),Gr.writableNeedDrain===!0?tn.flowing&&vn():tn.flowing||(Qt("pipe resume"),Xr.resume()),Gr};function Cr(Gr,Fr){return function(){const tn=Gr._readableState;tn.awaitDrainWriters===Fr?(Qt("pipeOnDrain",1),tn.awaitDrainWriters=null):tn.multiAwaitDrain&&(Qt("pipeOnDrain",tn.awaitDrainWriters.size),tn.awaitDrainWriters.delete(Fr)),(!tn.awaitDrainWriters||tn.awaitDrainWriters.size===0)&&Gr.listenerCount("data")&&Gr.resume()}}tr.prototype.unpipe=function(Gr){const Fr=this._readableState,Xr={hasUnpiped:!1};if(Fr.pipes.length===0)return this;if(!Gr){const en=Fr.pipes;Fr.pipes=[],this.pause();for(let un=0;un<en.length;un++)en[un].emit("unpipe",this,{hasUnpiped:!1});return this}const tn=e(Fr.pipes,Gr);return tn===-1?this:(Fr.pipes.splice(tn,1),Fr.pipes.length===0&&this.pause(),Gr.emit("unpipe",this,Xr),this)},tr.prototype.on=function(Gr,Fr){const Xr=zt.prototype.on.call(this,Gr,Fr),tn=this._readableState;return Gr==="data"?(tn.readableListening=this.listenerCount("readable")>0,tn.flowing!==!1&&this.resume()):Gr==="readable"&&!tn.endEmitted&&!tn.readableListening&&(tn.readableListening=tn.needReadable=!0,tn.flowing=!1,tn.emittedReadable=!1,Qt("on readable",tn.length,tn.reading),tn.length?wr(this):tn.reading||_t.nextTick($r,this)),Xr},tr.prototype.addListener=tr.prototype.on,tr.prototype.removeListener=function(Gr,Fr){const Xr=zt.prototype.removeListener.call(this,Gr,Fr);return Gr==="readable"&&_t.nextTick(Br,this),Xr},tr.prototype.off=tr.prototype.removeListener,tr.prototype.removeAllListeners=function(Gr){const Fr=zt.prototype.removeAllListeners.apply(this,arguments);return(Gr==="readable"||Gr===void 0)&&_t.nextTick(Br,this),Fr};function Br(Gr){const Fr=Gr._readableState;Fr.readableListening=Gr.listenerCount("readable")>0,Fr.resumeScheduled&&Fr[Xt]===!1?Fr.flowing=!0:Gr.listenerCount("data")>0?Gr.resume():Fr.readableListening||(Fr.flowing=null)}function $r(Gr){Qt("readable nexttick read 0"),Gr.read(0)}tr.prototype.resume=function(){const Gr=this._readableState;return Gr.flowing||(Qt("resume"),Gr.flowing=!Gr.readableListening,Rr(this,Gr)),Gr[Xt]=!1,this};function Rr(Gr,Fr){Fr.resumeScheduled||(Fr.resumeScheduled=!0,_t.nextTick(Ur,Gr,Fr))}function Ur(Gr,Fr){Qt("resume",Fr.reading),Fr.reading||Gr.read(0),Fr.resumeScheduled=!1,Gr.emit("resume"),Pr(Gr),Fr.flowing&&!Fr.reading&&Gr.read(0)}tr.prototype.pause=function(){return Qt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Qt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Xt]=!0,this};function Pr(Gr){const Fr=Gr._readableState;for(Qt("flow",Fr.flowing);Fr.flowing&&Gr.read()!==null;);}tr.prototype.wrap=function(Gr){let Fr=!1;Gr.on("data",tn=>{!this.push(tn)&&Gr.pause&&(Fr=!0,Gr.pause())}),Gr.on("end",()=>{this.push(null)}),Gr.on("error",tn=>{gr(this,tn)}),Gr.on("close",()=>{this.destroy()}),Gr.on("destroy",()=>{this.destroy()}),this._read=()=>{Fr&&Gr.resume&&(Fr=!1,Gr.resume())};const Xr=Bt(Gr);for(let tn=1;tn<Xr.length;tn++){const en=Xr[tn];this[en]===void 0&&typeof Gr[en]=="function"&&(this[en]=Gr[en].bind(Gr))}return this},tr.prototype[Nt]=function(){return _r(this)},tr.prototype.iterator=function(Gr){return Gr!==void 0&&ir(Gr,"options"),_r(this,Gr)};function _r(Gr,Fr){typeof Gr.read!="function"&&(Gr=tr.wrap(Gr,{objectMode:!0}));const Xr=Ar(Gr,Fr);return Xr.stream=Gr,Xr}async function*Ar(Gr,Fr){let Xr=ur;function tn(hn){this===Gr?(Xr(),Xr=ur):Xr=hn}Gr.on("readable",tn);let en;const un=rr(Gr,{writable:!1},hn=>{en=hn?Ir(en,hn):null,Xr(),Xr=ur});try{for(;;){const hn=Gr.destroyed?null:Gr.read();if(hn!==null)yield hn;else{if(en)throw en;if(en===null)return;await new Lt(tn)}}}catch(hn){throw en=Ir(en,hn),en}finally{(en||(Fr==null?void 0:Fr.destroyOnReturn)!==!1)&&(en===void 0||Gr._readableState.autoDestroy)?nr.destroyer(Gr,null):(Gr.off("readable",tn),un())}}kt(tr.prototype,{readable:{__proto__:null,get(){const Gr=this._readableState;return!!Gr&&Gr.readable!==!1&&!Gr.destroyed&&!Gr.errorEmitted&&!Gr.endEmitted},set(Gr){this._readableState&&(this._readableState.readable=!!Gr)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Gr){this._readableState&&(this._readableState.flowing=Gr)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Gr){this._readableState&&(this._readableState.destroyed=Gr)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),kt(ar.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Xt]!==!1},set(Gr){this[Xt]=!!Gr}}}),tr._fromList=jr;function jr(Gr,Fr){if(Fr.length===0)return null;let Xr;return Fr.objectMode?Xr=Fr.buffer.shift():!Gr||Gr>=Fr.length?(Fr.decoder?Xr=Fr.buffer.join(""):Fr.buffer.length===1?Xr=Fr.buffer.first():Xr=Fr.buffer.concat(Fr.length),Fr.buffer.clear()):Xr=Fr.buffer.consume(Gr,Fr.decoder),Xr}function Kr(Gr){const Fr=Gr._readableState;Qt("endReadable",Fr.endEmitted),Fr.endEmitted||(Fr.ended=!0,_t.nextTick(Zr,Fr,Gr))}function Zr(Gr,Fr){if(Qt("endReadableNT",Gr.endEmitted,Gr.length),!Gr.errored&&!Gr.closeEmitted&&!Gr.endEmitted&&Gr.length===0){if(Gr.endEmitted=!0,Fr.emit("end"),Fr.writable&&Fr.allowHalfOpen===!1)_t.nextTick(Jr,Fr);else if(Gr.autoDestroy){const Xr=Fr._writableState;(!Xr||Xr.autoDestroy&&(Xr.finished||Xr.writable===!1))&&Fr.destroy()}}}function Jr(Gr){Gr.writable&&!Gr.writableEnded&&!Gr.destroyed&&Gr.end()}tr.from=function(Gr,Fr){return pr(tr,Gr,Fr)};let nn;function on(){return nn===void 0&&(nn={}),nn}return tr.fromWeb=function(Gr,Fr){return on().newStreamReadableFromReadableStream(Gr,Fr)},tr.toWeb=function(Gr,Fr){return on().newReadableStreamFromStreamReadable(Gr,Fr)},tr.wrap=function(Gr,Fr){var Xr,tn;return new tr({objectMode:(Xr=(tn=Gr.readableObjectMode)!==null&&tn!==void 0?tn:Gr.objectMode)!==null&&Xr!==void 0?Xr:!0,...Fr,destroy(en,un){nr.destroyer(Gr,en),un(en)}}).wrap(Gr)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const _t=browserExports$2,{ArrayPrototypeSlice:e,Error:$t,FunctionPrototypeSymbolHasInstance:xt,ObjectDefineProperty:At,ObjectDefineProperties:kt,ObjectSetPrototypeOf:Bt,StringPrototypeToLowerCase:jt,Symbol:Lt,SymbolHasInstance:Ut}=primordials;writable=er,er.WritableState=ir;const{EventEmitter:Nt}=eventsExports,qt=legacy.Stream,{Buffer:Kt}=buffer$2,zt=destroy_1,{addAbortSignal:Vt}=addAbortSignalExports,{getHighWaterMark:Ht,getDefaultHighWaterMark:Jt}=state,{ERR_INVALID_ARG_TYPE:rr,ERR_METHOD_NOT_IMPLEMENTED:Qt,ERR_MULTIPLE_CALLBACK:Wt,ERR_STREAM_CANNOT_PIPE:nr,ERR_STREAM_DESTROYED:yr,ERR_STREAM_ALREADY_FINISHED:vr,ERR_STREAM_NULL_VALUES:Ir,ERR_STREAM_WRITE_AFTER_END:xr,ERR_UNKNOWN_ENCODING:Or}=errors.codes,{errorOrDestroy:Nr}=zt;Bt(er.prototype,qt.prototype),Bt(er,qt);function kr(){}const lr=Lt("kOnFinished");function ir($r,Rr,Ur){typeof Ur!="boolean"&&(Ur=Rr instanceof requireDuplex()),this.objectMode=!!($r&&$r.objectMode),Ur&&(this.objectMode=this.objectMode||!!($r&&$r.writableObjectMode)),this.highWaterMark=$r?Ht(this,$r,"writableHighWaterMark",Ur):Jt(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Pr=!!($r&&$r.decodeStrings===!1);this.decodeStrings=!Pr,this.defaultEncoding=$r&&$r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=tr.bind(void 0,Rr),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Xt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!$r||$r.emitClose!==!1,this.autoDestroy=!$r||$r.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[lr]=[]}function Xt($r){$r.buffered=[],$r.bufferedIndex=0,$r.allBuffers=!0,$r.allNoop=!0}ir.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},At(ir.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function er($r){const Rr=this instanceof requireDuplex();if(!Rr&&!xt(er,this))return new er($r);this._writableState=new ir($r,this,Rr),$r&&(typeof $r.write=="function"&&(this._write=$r.write),typeof $r.writev=="function"&&(this._writev=$r.writev),typeof $r.destroy=="function"&&(this._destroy=$r.destroy),typeof $r.final=="function"&&(this._final=$r.final),typeof $r.construct=="function"&&(this._construct=$r.construct),$r.signal&&Vt($r.signal,this)),qt.call(this,$r),zt.construct(this,()=>{const Ur=this._writableState;Ur.writing||Sr(this,Ur),Tr(this,Ur)})}At(er,Ut,{__proto__:null,value:function($r){return xt(this,$r)?!0:this!==er?!1:$r&&$r._writableState instanceof ir}}),er.prototype.pipe=function(){Nr(this,new nr)};function pr($r,Rr,Ur,Pr){const _r=$r._writableState;if(typeof Ur=="function")Pr=Ur,Ur=_r.defaultEncoding;else{if(!Ur)Ur=_r.defaultEncoding;else if(Ur!=="buffer"&&!Kt.isEncoding(Ur))throw new Or(Ur);typeof Pr!="function"&&(Pr=kr)}if(Rr===null)throw new Ir;if(!_r.objectMode)if(typeof Rr=="string")_r.decodeStrings!==!1&&(Rr=Kt.from(Rr,Ur),Ur="buffer");else if(Rr instanceof Kt)Ur="buffer";else if(qt._isUint8Array(Rr))Rr=qt._uint8ArrayToBuffer(Rr),Ur="buffer";else throw new rr("chunk",["string","Buffer","Uint8Array"],Rr);let Ar;return _r.ending?Ar=new xr:_r.destroyed&&(Ar=new yr("write")),Ar?(_t.nextTick(Pr,Ar),Nr($r,Ar,!0),Ar):(_r.pendingcb++,ur($r,_r,Rr,Ur,Pr))}er.prototype.write=function($r,Rr,Ur){return pr(this,$r,Rr,Ur)===!0},er.prototype.cork=function(){this._writableState.corked++},er.prototype.uncork=function(){const $r=this._writableState;$r.corked&&($r.corked--,$r.writing||Sr(this,$r))},er.prototype.setDefaultEncoding=function(Rr){if(typeof Rr=="string"&&(Rr=jt(Rr)),!Kt.isEncoding(Rr))throw new Or(Rr);return this._writableState.defaultEncoding=Rr,this};function ur($r,Rr,Ur,Pr,_r){const Ar=Rr.objectMode?1:Ur.length;Rr.length+=Ar;const jr=Rr.length<Rr.highWaterMark;return jr||(Rr.needDrain=!0),Rr.writing||Rr.corked||Rr.errored||!Rr.constructed?(Rr.buffered.push({chunk:Ur,encoding:Pr,callback:_r}),Rr.allBuffers&&Pr!=="buffer"&&(Rr.allBuffers=!1),Rr.allNoop&&_r!==kr&&(Rr.allNoop=!1)):(Rr.writelen=Ar,Rr.writecb=_r,Rr.writing=!0,Rr.sync=!0,$r._write(Ur,Pr,Rr.onwrite),Rr.sync=!1),jr&&!Rr.errored&&!Rr.destroyed}function gr($r,Rr,Ur,Pr,_r,Ar,jr){Rr.writelen=Pr,Rr.writecb=jr,Rr.writing=!0,Rr.sync=!0,Rr.destroyed?Rr.onwrite(new yr("write")):Ur?$r._writev(_r,Rr.onwrite):$r._write(_r,Ar,Rr.onwrite),Rr.sync=!1}function ar($r,Rr,Ur,Pr){--Rr.pendingcb,Pr(Ur),br(Rr),Nr($r,Ur)}function tr($r,Rr){const Ur=$r._writableState,Pr=Ur.sync,_r=Ur.writecb;if(typeof _r!="function"){Nr($r,new Wt);return}Ur.writing=!1,Ur.writecb=null,Ur.length-=Ur.writelen,Ur.writelen=0,Rr?(Rr.stack,Ur.errored||(Ur.errored=Rr),$r._readableState&&!$r._readableState.errored&&($r._readableState.errored=Rr),Pr?_t.nextTick(ar,$r,Ur,Rr,_r):ar($r,Ur,Rr,_r)):(Ur.buffered.length>Ur.bufferedIndex&&Sr($r,Ur),Pr?Ur.afterWriteTickInfo!==null&&Ur.afterWriteTickInfo.cb===_r?Ur.afterWriteTickInfo.count++:(Ur.afterWriteTickInfo={count:1,cb:_r,stream:$r,state:Ur},_t.nextTick(dr,Ur.afterWriteTickInfo)):fr($r,Ur,1,_r))}function dr({stream:$r,state:Rr,count:Ur,cb:Pr}){return Rr.afterWriteTickInfo=null,fr($r,Rr,Ur,Pr)}function fr($r,Rr,Ur,Pr){for(!Rr.ending&&!$r.destroyed&&Rr.length===0&&Rr.needDrain&&(Rr.needDrain=!1,$r.emit("drain"));Ur-- >0;)Rr.pendingcb--,Pr();Rr.destroyed&&br(Rr),Tr($r,Rr)}function br($r){if($r.writing)return;for(let _r=$r.bufferedIndex;_r<$r.buffered.length;++_r){var Rr;const{chunk:Ar,callback:jr}=$r.buffered[_r],Kr=$r.objectMode?1:Ar.length;$r.length-=Kr,jr((Rr=$r.errored)!==null&&Rr!==void 0?Rr:new yr("write"))}const Ur=$r[lr].splice(0);for(let _r=0;_r<Ur.length;_r++){var Pr;Ur[_r]((Pr=$r.errored)!==null&&Pr!==void 0?Pr:new yr("end"))}Xt($r)}function Sr($r,Rr){if(Rr.corked||Rr.bufferProcessing||Rr.destroyed||!Rr.constructed)return;const{buffered:Ur,bufferedIndex:Pr,objectMode:_r}=Rr,Ar=Ur.length-Pr;if(!Ar)return;let jr=Pr;if(Rr.bufferProcessing=!0,Ar>1&&$r._writev){Rr.pendingcb-=Ar-1;const Kr=Rr.allNoop?kr:Jr=>{for(let nn=jr;nn<Ur.length;++nn)Ur[nn].callback(Jr)},Zr=Rr.allNoop&&jr===0?Ur:e(Ur,jr);Zr.allBuffers=Rr.allBuffers,gr($r,Rr,!0,Rr.length,Zr,"",Kr),Xt(Rr)}else{do{const{chunk:Kr,encoding:Zr,callback:Jr}=Ur[jr];Ur[jr++]=null;const nn=_r?1:Kr.length;gr($r,Rr,!1,nn,Kr,Zr,Jr)}while(jr<Ur.length&&!Rr.writing);jr===Ur.length?Xt(Rr):jr>256?(Ur.splice(0,jr),Rr.bufferedIndex=0):Rr.bufferedIndex=jr}Rr.bufferProcessing=!1}er.prototype._write=function($r,Rr,Ur){if(this._writev)this._writev([{chunk:$r,encoding:Rr}],Ur);else throw new Qt("_write()")},er.prototype._writev=null,er.prototype.end=function($r,Rr,Ur){const Pr=this._writableState;typeof $r=="function"?(Ur=$r,$r=null,Rr=null):typeof Rr=="function"&&(Ur=Rr,Rr=null);let _r;if($r!=null){const Ar=pr(this,$r,Rr);Ar instanceof $t&&(_r=Ar)}return Pr.corked&&(Pr.corked=1,this.uncork()),_r||(!Pr.errored&&!Pr.ending?(Pr.ending=!0,Tr(this,Pr,!0),Pr.ended=!0):Pr.finished?_r=new vr("end"):Pr.destroyed&&(_r=new yr("end"))),typeof Ur=="function"&&(_r||Pr.finished?_t.nextTick(Ur,_r):Pr[lr].push(Ur)),this};function Dr($r){return $r.ending&&!$r.destroyed&&$r.constructed&&$r.length===0&&!$r.errored&&$r.buffered.length===0&&!$r.finished&&!$r.writing&&!$r.errorEmitted&&!$r.closeEmitted}function Er($r,Rr){let Ur=!1;function Pr(_r){if(Ur){Nr($r,_r??Wt());return}if(Ur=!0,Rr.pendingcb--,_r){const Ar=Rr[lr].splice(0);for(let jr=0;jr<Ar.length;jr++)Ar[jr](_r);Nr($r,_r,Rr.sync)}else Dr(Rr)&&(Rr.prefinished=!0,$r.emit("prefinish"),Rr.pendingcb++,_t.nextTick(Mr,$r,Rr))}Rr.sync=!0,Rr.pendingcb++;try{$r._final(Pr)}catch(_r){Pr(_r)}Rr.sync=!1}function wr($r,Rr){!Rr.prefinished&&!Rr.finalCalled&&(typeof $r._final=="function"&&!Rr.destroyed?(Rr.finalCalled=!0,Er($r,Rr)):(Rr.prefinished=!0,$r.emit("prefinish")))}function Tr($r,Rr,Ur){Dr(Rr)&&(wr($r,Rr),Rr.pendingcb===0&&(Ur?(Rr.pendingcb++,_t.nextTick((Pr,_r)=>{Dr(_r)?Mr(Pr,_r):_r.pendingcb--},$r,Rr)):Dr(Rr)&&(Rr.pendingcb++,Mr($r,Rr))))}function Mr($r,Rr){Rr.pendingcb--,Rr.finished=!0;const Ur=Rr[lr].splice(0);for(let Pr=0;Pr<Ur.length;Pr++)Ur[Pr]();if($r.emit("finish"),Rr.autoDestroy){const Pr=$r._readableState;(!Pr||Pr.autoDestroy&&(Pr.endEmitted||Pr.readable===!1))&&$r.destroy()}}kt(er.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set($r){this._writableState&&(this._writableState.destroyed=$r)}},writable:{__proto__:null,get(){const $r=this._writableState;return!!$r&&$r.writable!==!1&&!$r.destroyed&&!$r.errored&&!$r.ending&&!$r.ended},set($r){this._writableState&&(this._writableState.writable=!!$r)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const $r=this._writableState;return $r?!$r.destroyed&&!$r.ending&&$r.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Lr=zt.destroy;er.prototype.destroy=function($r,Rr){const Ur=this._writableState;return!Ur.destroyed&&(Ur.bufferedIndex<Ur.buffered.length||Ur[lr].length)&&_t.nextTick(br,Ur),Lr.call(this,$r,Rr),this},er.prototype._undestroy=zt.undestroy,er.prototype._destroy=function($r,Rr){Rr($r)},er.prototype[Nt.captureRejectionSymbol]=function($r){this.destroy($r)};let Cr;function Br(){return Cr===void 0&&(Cr={}),Cr}return er.fromWeb=function($r,Rr){return Br().newStreamWritableFromWritableStream($r,Rr)},er.toWeb=function($r){return Br().newWritableStreamFromStreamWritable($r)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const _t=browserExports$2,e=buffer$2,{isReadable:$t,isWritable:xt,isIterable:At,isNodeStream:kt,isReadableNodeStream:Bt,isWritableNodeStream:jt,isDuplexNodeStream:Lt}=utils,Ut=endOfStreamExports,{AbortError:Nt,codes:{ERR_INVALID_ARG_TYPE:qt,ERR_INVALID_RETURN_VALUE:Kt}}=errors,{destroyer:zt}=destroy_1,Vt=requireDuplex(),Ht=requireReadable(),{createDeferredPromise:Jt}=utilExports,rr=from_1,Qt=globalThis.Blob||e.Blob,Wt=typeof Qt<"u"?function(Nr){return Nr instanceof Qt}:function(Nr){return!1},nr=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:yr}=primordials;class vr extends Vt{constructor(Nr){super(Nr),(Nr==null?void 0:Nr.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Nr==null?void 0:Nr.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function Or(Nr,kr){if(Lt(Nr))return Nr;if(Bt(Nr))return xr({readable:Nr});if(jt(Nr))return xr({writable:Nr});if(kt(Nr))return xr({writable:!1,readable:!1});if(typeof Nr=="function"){const{value:ir,write:Xt,final:er,destroy:pr}=Ir(Nr);if(At(ir))return rr(vr,ir,{objectMode:!0,write:Xt,final:er,destroy:pr});const ur=ir==null?void 0:ir.then;if(typeof ur=="function"){let gr;const ar=yr(ur,ir,tr=>{if(tr!=null)throw new Kt("nully","body",tr)},tr=>{zt(gr,tr)});return gr=new vr({objectMode:!0,readable:!1,write:Xt,final(tr){er(async()=>{try{await ar,_t.nextTick(tr,null)}catch(dr){_t.nextTick(tr,dr)}})},destroy:pr})}throw new Kt("Iterable, AsyncIterable or AsyncFunction",kr,ir)}if(Wt(Nr))return Or(Nr.arrayBuffer());if(At(Nr))return rr(vr,Nr,{objectMode:!0,writable:!1});if(typeof(Nr==null?void 0:Nr.writable)=="object"||typeof(Nr==null?void 0:Nr.readable)=="object"){const ir=Nr!=null&&Nr.readable?Bt(Nr==null?void 0:Nr.readable)?Nr==null?void 0:Nr.readable:Or(Nr.readable):void 0,Xt=Nr!=null&&Nr.writable?jt(Nr==null?void 0:Nr.writable)?Nr==null?void 0:Nr.writable:Or(Nr.writable):void 0;return xr({readable:ir,writable:Xt})}const lr=Nr==null?void 0:Nr.then;if(typeof lr=="function"){let ir;return yr(lr,Nr,Xt=>{Xt!=null&&ir.push(Xt),ir.push(null)},Xt=>{zt(ir,Xt)}),ir=new vr({objectMode:!0,writable:!1,read(){}})}throw new qt(kr,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Nr)};function Ir(Or){let{promise:Nr,resolve:kr}=Jt();const lr=new nr,ir=lr.signal;return{value:Or(async function*(){for(;;){const er=Nr;Nr=null;const{chunk:pr,done:ur,cb:gr}=await er;if(_t.nextTick(gr),ur)return;if(ir.aborted)throw new Nt(void 0,{cause:ir.reason});({promise:Nr,resolve:kr}=Jt()),yield pr}}(),{signal:ir}),write(er,pr,ur){const gr=kr;kr=null,gr({chunk:er,done:!1,cb:ur})},final(er){const pr=kr;kr=null,pr({done:!0,cb:er})},destroy(er,pr){lr.abort(),pr(er)}}}function xr(Or){const Nr=Or.readable&&typeof Or.readable.read!="function"?Ht.wrap(Or.readable):Or.readable,kr=Or.writable;let lr=!!$t(Nr),ir=!!xt(kr),Xt,er,pr,ur,gr;function ar(tr){const dr=ur;ur=null,dr?dr(tr):tr&&gr.destroy(tr)}return gr=new vr({readableObjectMode:!!(Nr!=null&&Nr.readableObjectMode),writableObjectMode:!!(kr!=null&&kr.writableObjectMode),readable:lr,writable:ir}),ir&&(Ut(kr,tr=>{ir=!1,tr&&zt(Nr,tr),ar(tr)}),gr._write=function(tr,dr,fr){kr.write(tr,dr)?fr():Xt=fr},gr._final=function(tr){kr.end(),er=tr},kr.on("drain",function(){if(Xt){const tr=Xt;Xt=null,tr()}}),kr.on("finish",function(){if(er){const tr=er;er=null,tr()}})),lr&&(Ut(Nr,tr=>{lr=!1,tr&&zt(Nr,tr),ar(tr)}),Nr.on("readable",function(){if(pr){const tr=pr;pr=null,tr()}}),Nr.on("end",function(){gr.push(null)}),gr._read=function(){for(;;){const tr=Nr.read();if(tr===null){pr=gr._read;return}if(!gr.push(tr))return}}),gr._destroy=function(tr,dr){!tr&&ur!==null&&(tr=new Nt),pr=null,Xt=null,er=null,ur===null?dr(tr):(ur=dr,zt(kr,tr),zt(Nr,tr))},gr}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:_t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:$t,ObjectSetPrototypeOf:xt}=primordials;duplex=Bt;const At=requireReadable(),kt=requireWritable();xt(Bt.prototype,At.prototype),xt(Bt,At);{const Nt=$t(kt.prototype);for(let qt=0;qt<Nt.length;qt++){const Kt=Nt[qt];Bt.prototype[Kt]||(Bt.prototype[Kt]=kt.prototype[Kt])}}function Bt(Nt){if(!(this instanceof Bt))return new Bt(Nt);At.call(this,Nt),kt.call(this,Nt),Nt?(this.allowHalfOpen=Nt.allowHalfOpen!==!1,Nt.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Nt.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}_t(Bt.prototype,{writable:{__proto__:null,...e(kt.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(kt.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(kt.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(kt.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(kt.prototype,"writableLength")},writableFinished:{__proto__:null,...e(kt.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(kt.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(kt.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(kt.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(Nt){this._readableState&&this._writableState&&(this._readableState.destroyed=Nt,this._writableState.destroyed=Nt)}}});let jt;function Lt(){return jt===void 0&&(jt={}),jt}Bt.fromWeb=function(Nt,qt){return Lt().newStreamDuplexFromReadableWritablePair(Nt,qt)},Bt.toWeb=function(Nt){return Lt().newReadableWritablePairFromDuplex(Nt)};let Ut;return Bt.from=function(Nt){return Ut||(Ut=requireDuplexify()),Ut(Nt,"body")},duplex}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$1,Symbol:Symbol$2}=primordials;var transform=Transform$1;const{ERR_METHOD_NOT_IMPLEMENTED}=errors.codes,Duplex$2=requireDuplex(),{getHighWaterMark}=state;ObjectSetPrototypeOf$1(Transform$1.prototype,Duplex$2.prototype);ObjectSetPrototypeOf$1(Transform$1,Duplex$2);const kCallback=Symbol$2("kCallback");function Transform$1(_t){if(!(this instanceof Transform$1))return new Transform$1(_t);const e=_t?getHighWaterMark(this,_t,"readableHighWaterMark",!0):null;e===0&&(_t={..._t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:_t.writableHighWaterMark||0}),Duplex$2.call(this,_t),this._readableState.sync=!1,this[kCallback]=null,_t&&(typeof _t.transform=="function"&&(this._transform=_t.transform),typeof _t.flush=="function"&&(this._flush=_t.flush)),this.on("prefinish",prefinish)}function final(_t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,$t)=>{if(e){_t?_t(e):this.destroy(e);return}$t!=null&&this.push($t),this.push(null),_t&&_t()}):(this.push(null),_t&&_t())}function prefinish(){this._final!==final&&final.call(this)}Transform$1.prototype._final=final;Transform$1.prototype._transform=function(_t,e,$t){throw new ERR_METHOD_NOT_IMPLEMENTED("_transform()")};Transform$1.prototype._write=function(_t,e,$t){const xt=this._readableState,At=this._writableState,kt=xt.length;this._transform(_t,e,(Bt,jt)=>{if(Bt){$t(Bt);return}jt!=null&&this.push(jt),At.ended||kt===xt.length||xt.length<xt.highWaterMark?$t():this[kCallback]=$t})};Transform$1.prototype._read=function(){if(this[kCallback]){const _t=this[kCallback];this[kCallback]=null,_t()}};const{ObjectSetPrototypeOf}=primordials;var passthrough=PassThrough$1;const Transform=transform;ObjectSetPrototypeOf(PassThrough$1.prototype,Transform.prototype);ObjectSetPrototypeOf(PassThrough$1,Transform);function PassThrough$1(_t){if(!(this instanceof PassThrough$1))return new PassThrough$1(_t);Transform.call(this,_t)}PassThrough$1.prototype._transform=function(_t,e,$t){$t(null,_t)};const process=browserExports$2,{ArrayIsArray,Promise:Promise$2,SymbolAsyncIterator}=primordials,eos$1=endOfStreamExports,{once}=utilExports,destroyImpl=destroy_1,Duplex$1=requireDuplex(),{aggregateTwoErrors,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$2,ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS:ERR_MISSING_ARGS$2,ERR_STREAM_DESTROYED,ERR_STREAM_PREMATURE_CLOSE},AbortError:AbortError$2}=errors,{validateFunction,validateAbortSignal:validateAbortSignal$1}=validators,{isIterable,isReadable:isReadable$1,isReadableNodeStream,isNodeStream:isNodeStream$2,isTransformStream:isTransformStream$1,isWebStream:isWebStream$1,isReadableStream:isReadableStream$1,isReadableEnded}=utils,AbortController$1=globalThis.AbortController||requireBrowser().AbortController;let PassThrough,Readable;function destroyer$1(_t,e,$t){let xt=!1;_t.on("close",()=>{xt=!0});const At=eos$1(_t,{readable:e,writable:$t},kt=>{xt=!kt});return{destroy:kt=>{xt||(xt=!0,destroyImpl.destroyer(_t,kt||new ERR_STREAM_DESTROYED("pipe")))},cleanup:At}}function popCallback(_t){return validateFunction(_t[_t.length-1],"streams[stream.length - 1]"),_t.pop()}function makeAsyncIterable(_t){if(isIterable(_t))return _t;if(isReadableNodeStream(_t))return fromReadable(_t);throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable"],_t)}async function*fromReadable(_t){Readable||(Readable=requireReadable()),yield*Readable.prototype[SymbolAsyncIterator].call(_t)}async function pumpToNode(_t,e,$t,{end:xt}){let At,kt=null;const Bt=Ut=>{if(Ut&&(At=Ut),kt){const Nt=kt;kt=null,Nt()}},jt=()=>new Promise$2((Ut,Nt)=>{At?Nt(At):kt=()=>{At?Nt(At):Ut()}});e.on("drain",Bt);const Lt=eos$1(e,{readable:!1},Bt);try{e.writableNeedDrain&&await jt();for await(const Ut of _t)e.write(Ut)||await jt();xt&&e.end(),await jt(),$t()}catch(Ut){$t(At!==Ut?aggregateTwoErrors(At,Ut):Ut)}finally{Lt(),e.off("drain",Bt)}}async function pumpToWeb(_t,e,$t,{end:xt}){isTransformStream$1(e)&&(e=e.writable);const At=e.getWriter();try{for await(const kt of _t)await At.ready,At.write(kt).catch(()=>{});await At.ready,xt&&await At.close(),$t()}catch(kt){try{await At.abort(kt),$t(kt)}catch(Bt){$t(Bt)}}}function pipeline$1(..._t){return pipelineImpl(_t,once(popCallback(_t)))}function pipelineImpl(_t,e,$t){if(_t.length===1&&ArrayIsArray(_t[0])&&(_t=_t[0]),_t.length<2)throw new ERR_MISSING_ARGS$2("streams");const xt=new AbortController$1,At=xt.signal,kt=$t==null?void 0:$t.signal,Bt=[];validateAbortSignal$1(kt,"options.signal");function jt(){zt(new AbortError$2)}kt==null||kt.addEventListener("abort",jt);let Lt,Ut;const Nt=[];let qt=0;function Kt(rr){zt(rr,--qt===0)}function zt(rr,Qt){if(rr&&(!Lt||Lt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Lt=rr),!(!Lt&&!Qt)){for(;Nt.length;)Nt.shift()(Lt);kt==null||kt.removeEventListener("abort",jt),xt.abort(),Qt&&(Lt||Bt.forEach(Wt=>Wt()),process.nextTick(e,Lt,Ut))}}let Vt;for(let rr=0;rr<_t.length;rr++){const Qt=_t[rr],Wt=rr<_t.length-1,nr=rr>0,yr=Wt||($t==null?void 0:$t.end)!==!1,vr=rr===_t.length-1;if(isNodeStream$2(Qt)){let Ir=function(xr){xr&&xr.name!=="AbortError"&&xr.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Kt(xr)};if(yr){const{destroy:xr,cleanup:Or}=destroyer$1(Qt,Wt,nr);Nt.push(xr),isReadable$1(Qt)&&vr&&Bt.push(Or)}Qt.on("error",Ir),isReadable$1(Qt)&&vr&&Bt.push(()=>{Qt.removeListener("error",Ir)})}if(rr===0)if(typeof Qt=="function"){if(Vt=Qt({signal:At}),!isIterable(Vt))throw new ERR_INVALID_RETURN_VALUE("Iterable, AsyncIterable or Stream","source",Vt)}else isIterable(Qt)||isReadableNodeStream(Qt)||isTransformStream$1(Qt)?Vt=Qt:Vt=Duplex$1.from(Qt);else if(typeof Qt=="function"){if(isTransformStream$1(Vt)){var Ht;Vt=makeAsyncIterable((Ht=Vt)===null||Ht===void 0?void 0:Ht.readable)}else Vt=makeAsyncIterable(Vt);if(Vt=Qt(Vt,{signal:At}),Wt){if(!isIterable(Vt,!0))throw new ERR_INVALID_RETURN_VALUE("AsyncIterable",`transform[${rr-1}]`,Vt)}else{var Jt;PassThrough||(PassThrough=passthrough);const Ir=new PassThrough({objectMode:!0}),xr=(Jt=Vt)===null||Jt===void 0?void 0:Jt.then;if(typeof xr=="function")qt++,xr.call(Vt,kr=>{Ut=kr,kr!=null&&Ir.write(kr),yr&&Ir.end(),process.nextTick(Kt)},kr=>{Ir.destroy(kr),process.nextTick(Kt,kr)});else if(isIterable(Vt,!0))qt++,pumpToNode(Vt,Ir,Kt,{end:yr});else if(isReadableStream$1(Vt)||isTransformStream$1(Vt)){const kr=Vt.readable||Vt;qt++,pumpToNode(kr,Ir,Kt,{end:yr})}else throw new ERR_INVALID_RETURN_VALUE("AsyncIterable or Promise","destination",Vt);Vt=Ir;const{destroy:Or,cleanup:Nr}=destroyer$1(Vt,!1,!0);Nt.push(Or),vr&&Bt.push(Nr)}}else if(isNodeStream$2(Qt)){if(isReadableNodeStream(Vt)){qt+=2;const Ir=pipe(Vt,Qt,Kt,{end:yr});isReadable$1(Qt)&&vr&&Bt.push(Ir)}else if(isTransformStream$1(Vt)||isReadableStream$1(Vt)){const Ir=Vt.readable||Vt;qt++,pumpToNode(Ir,Qt,Kt,{end:yr})}else if(isIterable(Vt))qt++,pumpToNode(Vt,Qt,Kt,{end:yr});else throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Vt);Vt=Qt}else if(isWebStream$1(Qt)){if(isReadableNodeStream(Vt))qt++,pumpToWeb(makeAsyncIterable(Vt),Qt,Kt,{end:yr});else if(isReadableStream$1(Vt)||isIterable(Vt))qt++,pumpToWeb(Vt,Qt,Kt,{end:yr});else if(isTransformStream$1(Vt))qt++,pumpToWeb(Vt.readable,Qt,Kt,{end:yr});else throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Vt);Vt=Qt}else Vt=Duplex$1.from(Qt)}return(At!=null&&At.aborted||kt!=null&&kt.aborted)&&process.nextTick(jt),Vt}function pipe(_t,e,$t,{end:xt}){let At=!1;if(e.on("close",()=>{At||$t(new ERR_STREAM_PREMATURE_CLOSE)}),_t.pipe(e,{end:!1}),xt){let kt=function(){At=!0,e.end()};isReadableEnded(_t)?process.nextTick(kt):_t.once("end",kt)}else $t();return eos$1(_t,{readable:!0,writable:!1},kt=>{const Bt=_t._readableState;kt&&kt.code==="ERR_STREAM_PREMATURE_CLOSE"&&Bt&&Bt.ended&&!Bt.errored&&!Bt.errorEmitted?_t.once("end",$t).once("error",$t):$t(kt)}),eos$1(e,{readable:!1,writable:!0},$t)}var pipeline_1={pipelineImpl,pipeline:pipeline$1};const{pipeline}=pipeline_1,Duplex=requireDuplex(),{destroyer}=destroy_1,{isNodeStream:isNodeStream$1,isReadable,isWritable:isWritable$1,isWebStream,isTransformStream,isWritableStream,isReadableStream}=utils,{AbortError:AbortError$1,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$1}}=errors,eos=endOfStreamExports;var compose$1=function _t(...e){if(e.length===0)throw new ERR_MISSING_ARGS$1("streams");if(e.length===1)return Duplex.from(e[0]);const $t=[...e];if(typeof e[0]=="function"&&(e[0]=Duplex.from(e[0])),typeof e[e.length-1]=="function"){const zt=e.length-1;e[zt]=Duplex.from(e[zt])}for(let zt=0;zt<e.length;++zt)if(!(!isNodeStream$1(e[zt])&&!isWebStream(e[zt]))){if(zt<e.length-1&&!(isReadable(e[zt])||isReadableStream(e[zt])||isTransformStream(e[zt])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${zt}]`,$t[zt],"must be readable");if(zt>0&&!(isWritable$1(e[zt])||isWritableStream(e[zt])||isTransformStream(e[zt])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${zt}]`,$t[zt],"must be writable")}let xt,At,kt,Bt,jt;function Lt(zt){const Vt=Bt;Bt=null,Vt?Vt(zt):zt?jt.destroy(zt):!Kt&&!qt&&jt.destroy()}const Ut=e[0],Nt=pipeline(e,Lt),qt=!!(isWritable$1(Ut)||isWritableStream(Ut)||isTransformStream(Ut)),Kt=!!(isReadable(Nt)||isReadableStream(Nt)||isTransformStream(Nt));if(jt=new Duplex({writableObjectMode:!!(Ut!=null&&Ut.writableObjectMode),readableObjectMode:!!(Nt!=null&&Nt.writableObjectMode),writable:qt,readable:Kt}),qt){if(isNodeStream$1(Ut))jt._write=function(Vt,Ht,Jt){Ut.write(Vt,Ht)?Jt():xt=Jt},jt._final=function(Vt){Ut.end(),At=Vt},Ut.on("drain",function(){if(xt){const Vt=xt;xt=null,Vt()}});else if(isWebStream(Ut)){const Ht=(isTransformStream(Ut)?Ut.writable:Ut).getWriter();jt._write=async function(Jt,rr,Qt){try{await Ht.ready,Ht.write(Jt).catch(()=>{}),Qt()}catch(Wt){Qt(Wt)}},jt._final=async function(Jt){try{await Ht.ready,Ht.close().catch(()=>{}),At=Jt}catch(rr){Jt(rr)}}}const zt=isTransformStream(Nt)?Nt.readable:Nt;eos(zt,()=>{if(At){const Vt=At;At=null,Vt()}})}if(Kt){if(isNodeStream$1(Nt))Nt.on("readable",function(){if(kt){const zt=kt;kt=null,zt()}}),Nt.on("end",function(){jt.push(null)}),jt._read=function(){for(;;){const zt=Nt.read();if(zt===null){kt=jt._read;return}if(!jt.push(zt))return}};else if(isWebStream(Nt)){const Vt=(isTransformStream(Nt)?Nt.readable:Nt).getReader();jt._read=async function(){for(;;)try{const{value:Ht,done:Jt}=await Vt.read();if(!jt.push(Ht))return;if(Jt){jt.push(null);return}}catch{return}}}}return jt._destroy=function(zt,Vt){!zt&&Bt!==null&&(zt=new AbortError$1),kt=null,xt=null,At=null,Bt===null?Vt(zt):(Bt=Vt,isNodeStream$1(Nt)&&destroyer(Nt,zt))},jt};const AbortController=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$1,ERR_MISSING_ARGS,ERR_OUT_OF_RANGE},AbortError}=errors,{validateAbortSignal,validateInteger,validateObject:validateObject$1}=validators,kWeakHandler=primordials.Symbol("kWeak"),{finished}=endOfStreamExports,staticCompose=compose$1,{addAbortSignalNoValidate}=addAbortSignalExports,{isWritable,isNodeStream}=utils,{ArrayPrototypePush,MathFloor,Number:Number$1,NumberIsNaN,Promise:Promise$1,PromiseReject,PromisePrototypeThen,Symbol:Symbol$1}=primordials,kEmpty=Symbol$1("kEmpty"),kEof=Symbol$1("kEof");function compose(_t,e){if(e!=null&&validateObject$1(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal"),isNodeStream(_t)&&!isWritable(_t))throw new ERR_INVALID_ARG_VALUE("stream",_t,"must be writable");const $t=staticCompose(this,_t);return e!=null&&e.signal&&addAbortSignalNoValidate(e.signal,$t),$t}function map(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],_t);e!=null&&validateObject$1(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal");let $t=1;return(e==null?void 0:e.concurrency)!=null&&($t=MathFloor(e.concurrency)),validateInteger($t,"concurrency",1),(async function*(){var At,kt;const Bt=new AbortController,jt=this,Lt=[],Ut=Bt.signal,Nt={signal:Ut},qt=()=>Bt.abort();e!=null&&(At=e.signal)!==null&&At!==void 0&&At.aborted&&qt(),e==null||(kt=e.signal)===null||kt===void 0||kt.addEventListener("abort",qt);let Kt,zt,Vt=!1;function Ht(){Vt=!0}async function Jt(){try{for await(let Wt of jt){var rr;if(Vt)return;if(Ut.aborted)throw new AbortError;try{Wt=_t(Wt,Nt)}catch(nr){Wt=PromiseReject(nr)}Wt!==kEmpty&&(typeof((rr=Wt)===null||rr===void 0?void 0:rr.catch)=="function"&&Wt.catch(Ht),Lt.push(Wt),Kt&&(Kt(),Kt=null),!Vt&&Lt.length&&Lt.length>=$t&&await new Promise$1(nr=>{zt=nr}))}Lt.push(kEof)}catch(Wt){const nr=PromiseReject(Wt);PromisePrototypeThen(nr,void 0,Ht),Lt.push(nr)}finally{var Qt;Vt=!0,Kt&&(Kt(),Kt=null),e==null||(Qt=e.signal)===null||Qt===void 0||Qt.removeEventListener("abort",qt)}}Jt();try{for(;;){for(;Lt.length>0;){const rr=await Lt[0];if(rr===kEof)return;if(Ut.aborted)throw new AbortError;rr!==kEmpty&&(yield rr),Lt.shift(),zt&&(zt(),zt=null)}await new Promise$1(rr=>{Kt=rr})}}finally{Bt.abort(),Vt=!0,zt&&(zt(),zt=null)}}).call(this)}function asIndexedPairs(_t=void 0){return _t!=null&&validateObject$1(_t,"options"),(_t==null?void 0:_t.signal)!=null&&validateAbortSignal(_t.signal,"options.signal"),(async function*(){let $t=0;for await(const At of this){var xt;if(_t!=null&&(xt=_t.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError({cause:_t.signal.reason});yield[$t++,At]}}).call(this)}async function some(_t,e=void 0){for await(const $t of filter.call(this,_t,e))return!0;return!1}async function every(_t,e=void 0){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],_t);return!await some.call(this,async(...$t)=>!await _t(...$t),e)}async function find(_t,e){for await(const $t of filter.call(this,_t,e))return $t}async function forEach(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],_t);async function $t(xt,At){return await _t(xt,At),kEmpty}for await(const xt of map.call(this,$t,e));}function filter(_t,e){if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],_t);async function $t(xt,At){return await _t(xt,At)?xt:kEmpty}return map.call(this,$t,e)}class ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function reduce(_t,e,$t){var xt;if(typeof _t!="function")throw new ERR_INVALID_ARG_TYPE$1("reducer",["Function","AsyncFunction"],_t);$t!=null&&validateObject$1($t,"options"),($t==null?void 0:$t.signal)!=null&&validateAbortSignal($t.signal,"options.signal");let At=arguments.length>1;if($t!=null&&(xt=$t.signal)!==null&&xt!==void 0&&xt.aborted){const Ut=new AbortError(void 0,{cause:$t.signal.reason});throw this.once("error",()=>{}),await finished(this.destroy(Ut)),Ut}const kt=new AbortController,Bt=kt.signal;if($t!=null&&$t.signal){const Ut={once:!0,[kWeakHandler]:this};$t.signal.addEventListener("abort",()=>kt.abort(),Ut)}let jt=!1;try{for await(const Ut of this){var Lt;if(jt=!0,$t!=null&&(Lt=$t.signal)!==null&&Lt!==void 0&&Lt.aborted)throw new AbortError;At?e=await _t(e,Ut,{signal:Bt}):(e=Ut,At=!0)}if(!jt&&!At)throw new ReduceAwareErrMissingArgs}finally{kt.abort()}return e}async function toArray(_t){_t!=null&&validateObject$1(_t,"options"),(_t==null?void 0:_t.signal)!=null&&validateAbortSignal(_t.signal,"options.signal");const e=[];for await(const xt of this){var $t;if(_t!=null&&($t=_t.signal)!==null&&$t!==void 0&&$t.aborted)throw new AbortError(void 0,{cause:_t.signal.reason});ArrayPrototypePush(e,xt)}return e}function flatMap(_t,e){const $t=map.call(this,_t,e);return(async function*(){for await(const At of $t)yield*At}).call(this)}function toIntegerOrInfinity(_t){if(_t=Number$1(_t),NumberIsNaN(_t))return 0;if(_t<0)throw new ERR_OUT_OF_RANGE("number",">= 0",_t);return _t}function drop(_t,e=void 0){return e!=null&&validateObject$1(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal"),_t=toIntegerOrInfinity(_t),(async function*(){var xt;if(e!=null&&(xt=e.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError;for await(const kt of this){var At;if(e!=null&&(At=e.signal)!==null&&At!==void 0&&At.aborted)throw new AbortError;_t--<=0&&(yield kt)}}).call(this)}function take(_t,e=void 0){return e!=null&&validateObject$1(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal"),_t=toIntegerOrInfinity(_t),(async function*(){var xt;if(e!=null&&(xt=e.signal)!==null&&xt!==void 0&&xt.aborted)throw new AbortError;for await(const kt of this){var At;if(e!=null&&(At=e.signal)!==null&&At!==void 0&&At.aborted)throw new AbortError;if(_t-- >0)yield kt;else return}}).call(this)}operators.streamReturningOperators={asIndexedPairs,drop,filter,flatMap,map,take,compose};operators.promiseReturningOperators={every,forEach,reduce,toArray,some,find};var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:_t,Promise:e}=primordials,{isIterable:$t,isNodeStream:xt,isWebStream:At}=utils,{pipelineImpl:kt}=pipeline_1,{finished:Bt}=endOfStreamExports;requireStream();function jt(...Lt){return new e((Ut,Nt)=>{let qt,Kt;const zt=Lt[Lt.length-1];if(zt&&typeof zt=="object"&&!xt(zt)&&!$t(zt)&&!At(zt)){const Vt=_t(Lt);qt=Vt.signal,Kt=Vt.end}kt(Lt,(Vt,Ht)=>{Vt?Nt(Vt):Ut(Ht)},{signal:qt,end:Kt})})}return promises={finished:Bt,pipeline:jt},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:_t}=buffer$2,{ObjectDefineProperty:e,ObjectKeys:$t,ReflectApply:xt}=primordials,{promisify:{custom:At}}=utilExports,{streamReturningOperators:kt,promiseReturningOperators:Bt}=operators,{codes:{ERR_ILLEGAL_CONSTRUCTOR:jt}}=errors,Lt=compose$1,{pipeline:Ut}=pipeline_1,{destroyer:Nt}=destroy_1,qt=endOfStreamExports,Kt=requirePromises(),zt=utils,Vt=stream.exports=legacy.Stream;Vt.isDisturbed=zt.isDisturbed,Vt.isErrored=zt.isErrored,Vt.isReadable=zt.isReadable,Vt.Readable=requireReadable();for(const rr of $t(kt)){let Wt=function(...nr){if(new.target)throw jt();return Vt.Readable.from(xt(Qt,this,nr))};var Jt=Wt;const Qt=kt[rr];e(Wt,"name",{__proto__:null,value:Qt.name}),e(Wt,"length",{__proto__:null,value:Qt.length}),e(Vt.Readable.prototype,rr,{__proto__:null,value:Wt,enumerable:!1,configurable:!0,writable:!0})}for(const rr of $t(Bt)){let Wt=function(...yr){if(new.target)throw jt();return xt(Qt,this,yr)};var Jt=Wt;const Qt=Bt[rr];e(Wt,"name",{__proto__:null,value:Qt.name}),e(Wt,"length",{__proto__:null,value:Qt.length}),e(Vt.Readable.prototype,rr,{__proto__:null,value:Wt,enumerable:!1,configurable:!0,writable:!0})}Vt.Writable=requireWritable(),Vt.Duplex=requireDuplex(),Vt.Transform=transform,Vt.PassThrough=passthrough,Vt.pipeline=Ut;const{addAbortSignal:Ht}=addAbortSignalExports;return Vt.addAbortSignal=Ht,Vt.finished=qt,Vt.destroy=Nt,Vt.compose=Lt,e(Vt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Kt}}),e(Ut,At,{__proto__:null,enumerable:!0,get(){return Kt.pipeline}}),e(qt,At,{__proto__:null,enumerable:!0,get(){return Kt.finished}}),Vt.Stream=Vt,Vt._isUint8Array=function(Qt){return Qt instanceof Uint8Array},Vt._uint8ArrayToBuffer=function(Qt){return _t.from(Qt.buffer,Qt.byteOffset,Qt.byteLength)},stream.exports}(function(_t){const e=requireStream(),$t=requirePromises(),xt=e.Readable.destroy;_t.exports=e.Readable,_t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,_t.exports._isUint8Array=e._isUint8Array,_t.exports.isDisturbed=e.isDisturbed,_t.exports.isErrored=e.isErrored,_t.exports.isReadable=e.isReadable,_t.exports.Readable=e.Readable,_t.exports.Writable=e.Writable,_t.exports.Duplex=e.Duplex,_t.exports.Transform=e.Transform,_t.exports.PassThrough=e.PassThrough,_t.exports.addAbortSignal=e.addAbortSignal,_t.exports.finished=e.finished,_t.exports.destroy=e.destroy,_t.exports.destroy=xt,_t.exports.pipeline=e.pipeline,_t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return $t}}),_t.exports.Stream=e.Stream,_t.exports.default=_t.exports})(browser);function number(_t){if(!Number.isSafeInteger(_t)||_t<0)throw new Error(`Wrong positive integer: ${_t}`)}function isBytes$4(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}function bytes$1(_t,...e){if(!isBytes$4(_t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(_t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${_t.length}`)}function hash(_t){if(typeof _t!="function"||typeof _t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(_t.outputLen),number(_t.blockLen)}function exists$1(_t,e=!0){if(_t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&_t.finished)throw new Error("Hash#digest() has already been called")}function output$1(_t,e){bytes$1(_t);const $t=e.outputLen;if(_t.length<$t)throw new Error(`digestInto() expects output buffer of length at least ${$t}`)}const crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$3(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}const createView=_t=>new DataView(_t.buffer,_t.byteOffset,_t.byteLength),rotr=(_t,e)=>_t<<32-e|_t>>>e,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$2(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function toBytes$1(_t){if(typeof _t=="string"&&(_t=utf8ToBytes$2(_t)),!isBytes$3(_t))throw new Error(`expected Uint8Array, got ${typeof _t}`);return _t}function concatBytes$1(..._t){let e=0;for(let xt=0;xt<_t.length;xt++){const At=_t[xt];if(!isBytes$3(At))throw new Error("Uint8Array expected");e+=At.length}const $t=new Uint8Array(e);for(let xt=0,At=0;xt<_t.length;xt++){const kt=_t[xt];$t.set(kt,At),At+=kt.length}return $t}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(_t){const e=xt=>_t().update(toBytes$1(xt)).digest(),$t=_t();return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=()=>_t(),e}function randomBytes(_t=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(_t));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(_t,e,$t,xt){if(typeof _t.setBigUint64=="function")return _t.setBigUint64(e,$t,xt);const At=BigInt(32),kt=BigInt(4294967295),Bt=Number($t>>At&kt),jt=Number($t&kt),Lt=xt?4:0,Ut=xt?0:4;_t.setUint32(e+Lt,Bt,xt),_t.setUint32(e+Ut,jt,xt)}class SHA2 extends Hash{constructor(e,$t,xt,At){super(),this.blockLen=e,this.outputLen=$t,this.padOffset=xt,this.isLE=At,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){exists$1(this);const{view:$t,buffer:xt,blockLen:At}=this;e=toBytes$1(e);const kt=e.length;for(let Bt=0;Bt<kt;){const jt=Math.min(At-this.pos,kt-Bt);if(jt===At){const Lt=createView(e);for(;At<=kt-Bt;Bt+=At)this.process(Lt,Bt);continue}xt.set(e.subarray(Bt,Bt+jt),this.pos),this.pos+=jt,Bt+=jt,this.pos===At&&(this.process($t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$1(this),output$1(e,this),this.finished=!0;const{buffer:$t,view:xt,blockLen:At,isLE:kt}=this;let{pos:Bt}=this;$t[Bt++]=128,this.buffer.subarray(Bt).fill(0),this.padOffset>At-Bt&&(this.process(xt,0),Bt=0);for(let qt=Bt;qt<At;qt++)$t[qt]=0;setBigUint64(xt,At-8,BigInt(this.length*8),kt),this.process(xt,0);const jt=createView(e),Lt=this.outputLen;if(Lt%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const Ut=Lt/4,Nt=this.get();if(Ut>Nt.length)throw new Error("_sha2: outputLen bigger than state");for(let qt=0;qt<Ut;qt++)jt.setUint32(4*qt,Nt[qt],kt)}digest(){const{buffer:e,outputLen:$t}=this;this.digestInto(e);const xt=e.slice(0,$t);return this.destroy(),xt}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:$t,buffer:xt,length:At,finished:kt,destroyed:Bt,pos:jt}=this;return e.length=At,e.pos=jt,e.finished=kt,e.destroyed=Bt,At%$t&&e.buffer.set(xt),e}}const Chi=(_t,e,$t)=>_t&e^~_t&$t,Maj=(_t,e,$t)=>_t&e^_t&$t^e&$t,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:$t,C:xt,D:At,E:kt,F:Bt,G:jt,H:Lt}=this;return[e,$t,xt,At,kt,Bt,jt,Lt]}set(e,$t,xt,At,kt,Bt,jt,Lt){this.A=e|0,this.B=$t|0,this.C=xt|0,this.D=At|0,this.E=kt|0,this.F=Bt|0,this.G=jt|0,this.H=Lt|0}process(e,$t){for(let qt=0;qt<16;qt++,$t+=4)SHA256_W[qt]=e.getUint32($t,!1);for(let qt=16;qt<64;qt++){const Kt=SHA256_W[qt-15],zt=SHA256_W[qt-2],Vt=rotr(Kt,7)^rotr(Kt,18)^Kt>>>3,Ht=rotr(zt,17)^rotr(zt,19)^zt>>>10;SHA256_W[qt]=Ht+SHA256_W[qt-7]+Vt+SHA256_W[qt-16]|0}let{A:xt,B:At,C:kt,D:Bt,E:jt,F:Lt,G:Ut,H:Nt}=this;for(let qt=0;qt<64;qt++){const Kt=rotr(jt,6)^rotr(jt,11)^rotr(jt,25),zt=Nt+Kt+Chi(jt,Lt,Ut)+SHA256_K[qt]+SHA256_W[qt]|0,Ht=(rotr(xt,2)^rotr(xt,13)^rotr(xt,22))+Maj(xt,At,kt)|0;Nt=Ut,Ut=Lt,Lt=jt,jt=Bt+zt|0,Bt=kt,kt=At,At=xt,xt=zt+Ht|0}xt=xt+this.A|0,At=At+this.B|0,kt=kt+this.C|0,Bt=Bt+this.D|0,jt=jt+this.E|0,Lt=Lt+this.F|0,Ut=Ut+this.G|0,Nt=Nt+this.H|0,this.set(xt,At,kt,Bt,jt,Lt,Ut,Nt)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$4=BigInt(2);function isBytes$2(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}const hexes=Array.from({length:256},(_t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(_t){if(!isBytes$2(_t))throw new Error("Uint8Array expected");let e="";for(let $t=0;$t<_t.length;$t++)e+=hexes[_t[$t]];return e}function numberToHexUnpadded(_t){const e=_t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);return BigInt(_t===""?"0":`0x${_t}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(_t){if(_t>=asciis._0&&_t<=asciis._9)return _t-asciis._0;if(_t>=asciis._A&&_t<=asciis._F)return _t-(asciis._A-10);if(_t>=asciis._a&&_t<=asciis._f)return _t-(asciis._a-10)}function hexToBytes(_t){if(typeof _t!="string")throw new Error("hex string expected, got "+typeof _t);const e=_t.length,$t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const xt=new Uint8Array($t);for(let At=0,kt=0;At<$t;At++,kt+=2){const Bt=asciiToBase16(_t.charCodeAt(kt)),jt=asciiToBase16(_t.charCodeAt(kt+1));if(Bt===void 0||jt===void 0){const Lt=_t[kt]+_t[kt+1];throw new Error('hex string expected, got non-hex character "'+Lt+'" at index '+kt)}xt[At]=Bt*16+jt}return xt}function bytesToNumberBE(_t){return hexToNumber(bytesToHex(_t))}function bytesToNumberLE(_t){if(!isBytes$2(_t))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(_t).reverse()))}function numberToBytesBE(_t,e){return hexToBytes(_t.toString(16).padStart(e*2,"0"))}function numberToBytesLE(_t,e){return numberToBytesBE(_t,e).reverse()}function numberToVarBytesBE(_t){return hexToBytes(numberToHexUnpadded(_t))}function ensureBytes$1(_t,e,$t){let xt;if(typeof e=="string")try{xt=hexToBytes(e)}catch(kt){throw new Error(`${_t} must be valid hex string, got "${e}". Cause: ${kt}`)}else if(isBytes$2(e))xt=Uint8Array.from(e);else throw new Error(`${_t} must be hex string or Uint8Array`);const At=xt.length;if(typeof $t=="number"&&At!==$t)throw new Error(`${_t} expected ${$t} bytes, got ${At}`);return xt}function concatBytes(..._t){let e=0;for(let At=0;At<_t.length;At++){const kt=_t[At];if(!isBytes$2(kt))throw new Error("Uint8Array expected");e+=kt.length}let $t=new Uint8Array(e),xt=0;for(let At=0;At<_t.length;At++){const kt=_t[At];$t.set(kt,xt),xt+=kt.length}return $t}function equalBytes(_t,e){if(_t.length!==e.length)return!1;let $t=0;for(let xt=0;xt<_t.length;xt++)$t|=_t[xt]^e[xt];return $t===0}function utf8ToBytes$1(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function bitLen(_t){let e;for(e=0;_t>_0n$5;_t>>=_1n$7,e+=1);return e}function bitGet(_t,e){return _t>>BigInt(e)&_1n$7}const bitSet=(_t,e,$t)=>_t|($t?_1n$7:_0n$5)<<BigInt(e),bitMask=_t=>(_2n$4<<BigInt(_t-1))-_1n$7,u8n=_t=>new Uint8Array(_t),u8fr=_t=>Uint8Array.from(_t);function createHmacDrbg(_t,e,$t){if(typeof _t!="number"||_t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof $t!="function")throw new Error("hmacFn must be a function");let xt=u8n(_t),At=u8n(_t),kt=0;const Bt=()=>{xt.fill(1),At.fill(0),kt=0},jt=(...qt)=>$t(At,xt,...qt),Lt=(qt=u8n())=>{At=jt(u8fr([0]),qt),xt=jt(),qt.length!==0&&(At=jt(u8fr([1]),qt),xt=jt())},Ut=()=>{if(kt++>=1e3)throw new Error("drbg: tried 1000 values");let qt=0;const Kt=[];for(;qt<e;){xt=jt();const zt=xt.slice();Kt.push(zt),qt+=xt.length}return concatBytes(...Kt)};return(qt,Kt)=>{Bt(),Lt(qt);let zt;for(;!(zt=Kt(Ut()));)Lt();return Bt(),zt}}const validatorFns={bigint:_t=>typeof _t=="bigint",function:_t=>typeof _t=="function",boolean:_t=>typeof _t=="boolean",string:_t=>typeof _t=="string",stringOrUint8Array:_t=>typeof _t=="string"||isBytes$2(_t),isSafeInteger:_t=>Number.isSafeInteger(_t),array:_t=>Array.isArray(_t),field:(_t,e)=>e.Fp.isValid(_t),hash:_t=>typeof _t=="function"&&Number.isSafeInteger(_t.outputLen)};function validateObject(_t,e,$t={}){const xt=(At,kt,Bt)=>{const jt=validatorFns[kt];if(typeof jt!="function")throw new Error(`Invalid validator "${kt}", expected function`);const Lt=_t[At];if(!(Bt&&Lt===void 0)&&!jt(Lt,_t))throw new Error(`Invalid param ${String(At)}=${Lt} (${typeof Lt}), expected ${kt}`)};for(const[At,kt]of Object.entries(e))xt(At,kt,!1);for(const[At,kt]of Object.entries($t))xt(At,kt,!0);return _t}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes:ensureBytes$1,equalBytes,hexToBytes,hexToNumber,isBytes:isBytes$2,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$1,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(_t,e){const $t=_t%e;return $t>=_0n$4?$t:e+$t}function pow(_t,e,$t){if($t<=_0n$4||e<_0n$4)throw new Error("Expected power/modulo > 0");if($t===_1n$6)return _0n$4;let xt=_1n$6;for(;e>_0n$4;)e&_1n$6&&(xt=xt*_t%$t),_t=_t*_t%$t,e>>=_1n$6;return xt}function pow2(_t,e,$t){let xt=_t;for(;e-- >_0n$4;)xt*=xt,xt%=$t;return xt}function invert(_t,e){if(_t===_0n$4||e<=_0n$4)throw new Error(`invert: expected positive integers, got n=${_t} mod=${e}`);let $t=mod(_t,e),xt=e,At=_0n$4,kt=_1n$6;for(;$t!==_0n$4;){const jt=xt/$t,Lt=xt%$t,Ut=At-kt*jt;xt=$t,$t=Lt,At=kt,kt=Ut}if(xt!==_1n$6)throw new Error("invert: does not exist");return mod(At,e)}function tonelliShanks(_t){const e=(_t-_1n$6)/_2n$3;let $t,xt,At;for($t=_t-_1n$6,xt=0;$t%_2n$3===_0n$4;$t/=_2n$3,xt++);for(At=_2n$3;At<_t&&pow(At,e,_t)!==_t-_1n$6;At++);if(xt===1){const Bt=(_t+_1n$6)/_4n;return function(Lt,Ut){const Nt=Lt.pow(Ut,Bt);if(!Lt.eql(Lt.sqr(Nt),Ut))throw new Error("Cannot find square root");return Nt}}const kt=($t+_1n$6)/_2n$3;return function(jt,Lt){if(jt.pow(Lt,e)===jt.neg(jt.ONE))throw new Error("Cannot find square root");let Ut=xt,Nt=jt.pow(jt.mul(jt.ONE,At),$t),qt=jt.pow(Lt,kt),Kt=jt.pow(Lt,$t);for(;!jt.eql(Kt,jt.ONE);){if(jt.eql(Kt,jt.ZERO))return jt.ZERO;let zt=1;for(let Ht=jt.sqr(Kt);zt<Ut&&!jt.eql(Ht,jt.ONE);zt++)Ht=jt.sqr(Ht);const Vt=jt.pow(Nt,_1n$6<<BigInt(Ut-zt-1));Nt=jt.sqr(Vt),qt=jt.mul(qt,Vt),Kt=jt.mul(Kt,Nt),Ut=zt}return qt}}function FpSqrt(_t){if(_t%_4n===_3n$1){const e=(_t+_1n$6)/_4n;return function(xt,At){const kt=xt.pow(At,e);if(!xt.eql(xt.sqr(kt),At))throw new Error("Cannot find square root");return kt}}if(_t%_8n$1===_5n$1){const e=(_t-_5n$1)/_8n$1;return function(xt,At){const kt=xt.mul(At,_2n$3),Bt=xt.pow(kt,e),jt=xt.mul(At,Bt),Lt=xt.mul(xt.mul(jt,_2n$3),Bt),Ut=xt.mul(jt,xt.sub(Lt,xt.ONE));if(!xt.eql(xt.sqr(Ut),At))throw new Error("Cannot find square root");return Ut}}return tonelliShanks(_t)}const isNegativeLE=(_t,e)=>(mod(_t,e)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(_t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},$t=FIELD_FIELDS.reduce((xt,At)=>(xt[At]="function",xt),e);return validateObject(_t,$t)}function FpPow(_t,e,$t){if($t<_0n$4)throw new Error("Expected power > 0");if($t===_0n$4)return _t.ONE;if($t===_1n$6)return e;let xt=_t.ONE,At=e;for(;$t>_0n$4;)$t&_1n$6&&(xt=_t.mul(xt,At)),At=_t.sqr(At),$t>>=_1n$6;return xt}function FpInvertBatch(_t,e){const $t=new Array(e.length),xt=e.reduce((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=kt,_t.mul(kt,Bt)),_t.ONE),At=_t.inv(xt);return e.reduceRight((kt,Bt,jt)=>_t.is0(Bt)?kt:($t[jt]=_t.mul(kt,$t[jt]),_t.mul(kt,Bt)),At),$t}function nLength(_t,e){const $t=e!==void 0?e:_t.toString(2).length,xt=Math.ceil($t/8);return{nBitLength:$t,nByteLength:xt}}function Field(_t,e,$t=!1,xt={}){if(_t<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${_t}`);const{nBitLength:At,nByteLength:kt}=nLength(_t,e);if(kt>2048)throw new Error("Field lengths over 2048 bytes are not supported");const Bt=FpSqrt(_t),jt=Object.freeze({ORDER:_t,BITS:At,BYTES:kt,MASK:bitMask(At),ZERO:_0n$4,ONE:_1n$6,create:Lt=>mod(Lt,_t),isValid:Lt=>{if(typeof Lt!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof Lt}`);return _0n$4<=Lt&&Lt<_t},is0:Lt=>Lt===_0n$4,isOdd:Lt=>(Lt&_1n$6)===_1n$6,neg:Lt=>mod(-Lt,_t),eql:(Lt,Ut)=>Lt===Ut,sqr:Lt=>mod(Lt*Lt,_t),add:(Lt,Ut)=>mod(Lt+Ut,_t),sub:(Lt,Ut)=>mod(Lt-Ut,_t),mul:(Lt,Ut)=>mod(Lt*Ut,_t),pow:(Lt,Ut)=>FpPow(jt,Lt,Ut),div:(Lt,Ut)=>mod(Lt*invert(Ut,_t),_t),sqrN:Lt=>Lt*Lt,addN:(Lt,Ut)=>Lt+Ut,subN:(Lt,Ut)=>Lt-Ut,mulN:(Lt,Ut)=>Lt*Ut,inv:Lt=>invert(Lt,_t),sqrt:xt.sqrt||(Lt=>Bt(jt,Lt)),invertBatch:Lt=>FpInvertBatch(jt,Lt),cmov:(Lt,Ut,Nt)=>Nt?Ut:Lt,toBytes:Lt=>$t?numberToBytesLE(Lt,kt):numberToBytesBE(Lt,kt),fromBytes:Lt=>{if(Lt.length!==kt)throw new Error(`Fp.fromBytes: expected ${kt}, got ${Lt.length}`);return $t?bytesToNumberLE(Lt):bytesToNumberBE(Lt)}});return Object.freeze(jt)}function FpSqrtEven(_t,e){if(!_t.isOdd)throw new Error("Field doesn't have isOdd");const $t=_t.sqrt(e);return _t.isOdd($t)?_t.neg($t):$t}function getFieldBytesLength(_t){if(typeof _t!="bigint")throw new Error("field order must be bigint");const e=_t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(_t){const e=getFieldBytesLength(_t);return e+Math.ceil(e/2)}function mapHashToField(_t,e,$t=!1){const xt=_t.length,At=getFieldBytesLength(e),kt=getMinHashLength(e);if(xt<16||xt<kt||xt>1024)throw new Error(`expected ${kt}-1024 bytes of input, got ${xt}`);const Bt=$t?bytesToNumberBE(_t):bytesToNumberLE(_t),jt=mod(Bt,e-_1n$6)+_1n$6;return $t?numberToBytesLE(jt,At):numberToBytesBE(jt,At)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function wNAF(_t,e){const $t=(At,kt)=>{const Bt=kt.negate();return At?Bt:kt},xt=At=>{const kt=Math.ceil(e/At)+1,Bt=2**(At-1);return{windows:kt,windowSize:Bt}};return{constTimeNegate:$t,unsafeLadder(At,kt){let Bt=_t.ZERO,jt=At;for(;kt>_0n$3;)kt&_1n$5&&(Bt=Bt.add(jt)),jt=jt.double(),kt>>=_1n$5;return Bt},precomputeWindow(At,kt){const{windows:Bt,windowSize:jt}=xt(kt),Lt=[];let Ut=At,Nt=Ut;for(let qt=0;qt<Bt;qt++){Nt=Ut,Lt.push(Nt);for(let Kt=1;Kt<jt;Kt++)Nt=Nt.add(Ut),Lt.push(Nt);Ut=Nt.double()}return Lt},wNAF(At,kt,Bt){const{windows:jt,windowSize:Lt}=xt(At);let Ut=_t.ZERO,Nt=_t.BASE;const qt=BigInt(2**At-1),Kt=2**At,zt=BigInt(At);for(let Vt=0;Vt<jt;Vt++){const Ht=Vt*Lt;let Jt=Number(Bt&qt);Bt>>=zt,Jt>Lt&&(Jt-=Kt,Bt+=_1n$5);const rr=Ht,Qt=Ht+Math.abs(Jt)-1,Wt=Vt%2!==0,nr=Jt<0;Jt===0?Nt=Nt.add($t(Wt,kt[rr])):Ut=Ut.add($t(nr,kt[Qt]))}return{p:Ut,f:Nt}},wNAFCached(At,kt,Bt,jt){const Lt=At._WINDOW_SIZE||1;let Ut=kt.get(At);return Ut||(Ut=this.precomputeWindow(At,Lt),Lt!==1&&kt.set(At,jt(Ut))),this.wNAF(Lt,Ut,Bt)}}}function validateBasic(_t){return validateField(_t.Fp),validateObject(_t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(_t.n,_t.nBitLength),..._t,p:_t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(_t){const e=validateBasic(_t);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:$t,Fp:xt,a:At}=e;if($t){if(!xt.eql(At,xt.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof $t!="object"||typeof $t.beta!="bigint"||typeof $t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(_t){const{Err:e}=DER;if(_t.length<2||_t[0]!==2)throw new e("Invalid signature integer tag");const $t=_t[1],xt=_t.subarray(2,$t+2);if(!$t||xt.length!==$t)throw new e("Invalid signature integer: wrong length");if(xt[0]&128)throw new e("Invalid signature integer: negative");if(xt[0]===0&&!(xt[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(xt),l:_t.subarray($t+2)}},toSig(_t){const{Err:e}=DER,$t=typeof _t=="string"?h2b(_t):_t;if(!isBytes$2($t))throw new Error("ui8a expected");let xt=$t.length;if(xt<2||$t[0]!=48)throw new e("Invalid signature tag");if($t[1]!==xt-2)throw new e("Invalid signature: incorrect length");const{d:At,l:kt}=DER._parseInt($t.subarray(2)),{d:Bt,l:jt}=DER._parseInt(kt);if(jt.length)throw new e("Invalid signature: left bytes after parsing");return{r:At,s:Bt}},hexFromSig(_t){const e=Ut=>Number.parseInt(Ut[0],16)&8?"00"+Ut:Ut,$t=Ut=>{const Nt=Ut.toString(16);return Nt.length&1?`0${Nt}`:Nt},xt=e($t(_t.s)),At=e($t(_t.r)),kt=xt.length/2,Bt=At.length/2,jt=$t(kt),Lt=$t(Bt);return`30${$t(Bt+kt+4)}02${Lt}${At}02${jt}${xt}`}},_0n$2=BigInt(0),_1n$4=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(_t){const e=validatePointOpts(_t),{Fp:$t}=e,xt=e.toBytes||((Vt,Ht,Jt)=>{const rr=Ht.toAffine();return concatBytes(Uint8Array.from([4]),$t.toBytes(rr.x),$t.toBytes(rr.y))}),At=e.fromBytes||(Vt=>{const Ht=Vt.subarray(1),Jt=$t.fromBytes(Ht.subarray(0,$t.BYTES)),rr=$t.fromBytes(Ht.subarray($t.BYTES,2*$t.BYTES));return{x:Jt,y:rr}});function kt(Vt){const{a:Ht,b:Jt}=e,rr=$t.sqr(Vt),Qt=$t.mul(rr,Vt);return $t.add($t.add(Qt,$t.mul(Vt,Ht)),Jt)}if(!$t.eql($t.sqr(e.Gy),kt(e.Gx)))throw new Error("bad generator point: equation left != right");function Bt(Vt){return typeof Vt=="bigint"&&_0n$2<Vt&&Vt<e.n}function jt(Vt){if(!Bt(Vt))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function Lt(Vt){const{allowedPrivateKeyLengths:Ht,nByteLength:Jt,wrapPrivateKey:rr,n:Qt}=e;if(Ht&&typeof Vt!="bigint"){if(isBytes$2(Vt)&&(Vt=bytesToHex(Vt)),typeof Vt!="string"||!Ht.includes(Vt.length))throw new Error("Invalid key");Vt=Vt.padStart(Jt*2,"0")}let Wt;try{Wt=typeof Vt=="bigint"?Vt:bytesToNumberBE(ensureBytes$1("private key",Vt,Jt))}catch{throw new Error(`private key must be ${Jt} bytes, hex or bigint, not ${typeof Vt}`)}return rr&&(Wt=mod(Wt,Qt)),jt(Wt),Wt}const Ut=new Map;function Nt(Vt){if(!(Vt instanceof qt))throw new Error("ProjectivePoint expected")}class qt{constructor(Ht,Jt,rr){if(this.px=Ht,this.py=Jt,this.pz=rr,Ht==null||!$t.isValid(Ht))throw new Error("x required");if(Jt==null||!$t.isValid(Jt))throw new Error("y required");if(rr==null||!$t.isValid(rr))throw new Error("z required")}static fromAffine(Ht){const{x:Jt,y:rr}=Ht||{};if(!Ht||!$t.isValid(Jt)||!$t.isValid(rr))throw new Error("invalid affine point");if(Ht instanceof qt)throw new Error("projective point not allowed");const Qt=Wt=>$t.eql(Wt,$t.ZERO);return Qt(Jt)&&Qt(rr)?qt.ZERO:new qt(Jt,rr,$t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Ht){const Jt=$t.invertBatch(Ht.map(rr=>rr.pz));return Ht.map((rr,Qt)=>rr.toAffine(Jt[Qt])).map(qt.fromAffine)}static fromHex(Ht){const Jt=qt.fromAffine(At(ensureBytes$1("pointHex",Ht)));return Jt.assertValidity(),Jt}static fromPrivateKey(Ht){return qt.BASE.multiply(Lt(Ht))}_setWindowSize(Ht){this._WINDOW_SIZE=Ht,Ut.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!$t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Ht,y:Jt}=this.toAffine();if(!$t.isValid(Ht)||!$t.isValid(Jt))throw new Error("bad point: x or y not FE");const rr=$t.sqr(Jt),Qt=kt(Ht);if(!$t.eql(rr,Qt))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Ht}=this.toAffine();if($t.isOdd)return!$t.isOdd(Ht);throw new Error("Field doesn't support isOdd")}equals(Ht){Nt(Ht);const{px:Jt,py:rr,pz:Qt}=this,{px:Wt,py:nr,pz:yr}=Ht,vr=$t.eql($t.mul(Jt,yr),$t.mul(Wt,Qt)),Ir=$t.eql($t.mul(rr,yr),$t.mul(nr,Qt));return vr&&Ir}negate(){return new qt(this.px,$t.neg(this.py),this.pz)}double(){const{a:Ht,b:Jt}=e,rr=$t.mul(Jt,_3n),{px:Qt,py:Wt,pz:nr}=this;let yr=$t.ZERO,vr=$t.ZERO,Ir=$t.ZERO,xr=$t.mul(Qt,Qt),Or=$t.mul(Wt,Wt),Nr=$t.mul(nr,nr),kr=$t.mul(Qt,Wt);return kr=$t.add(kr,kr),Ir=$t.mul(Qt,nr),Ir=$t.add(Ir,Ir),yr=$t.mul(Ht,Ir),vr=$t.mul(rr,Nr),vr=$t.add(yr,vr),yr=$t.sub(Or,vr),vr=$t.add(Or,vr),vr=$t.mul(yr,vr),yr=$t.mul(kr,yr),Ir=$t.mul(rr,Ir),Nr=$t.mul(Ht,Nr),kr=$t.sub(xr,Nr),kr=$t.mul(Ht,kr),kr=$t.add(kr,Ir),Ir=$t.add(xr,xr),xr=$t.add(Ir,xr),xr=$t.add(xr,Nr),xr=$t.mul(xr,kr),vr=$t.add(vr,xr),Nr=$t.mul(Wt,nr),Nr=$t.add(Nr,Nr),xr=$t.mul(Nr,kr),yr=$t.sub(yr,xr),Ir=$t.mul(Nr,Or),Ir=$t.add(Ir,Ir),Ir=$t.add(Ir,Ir),new qt(yr,vr,Ir)}add(Ht){Nt(Ht);const{px:Jt,py:rr,pz:Qt}=this,{px:Wt,py:nr,pz:yr}=Ht;let vr=$t.ZERO,Ir=$t.ZERO,xr=$t.ZERO;const Or=e.a,Nr=$t.mul(e.b,_3n);let kr=$t.mul(Jt,Wt),lr=$t.mul(rr,nr),ir=$t.mul(Qt,yr),Xt=$t.add(Jt,rr),er=$t.add(Wt,nr);Xt=$t.mul(Xt,er),er=$t.add(kr,lr),Xt=$t.sub(Xt,er),er=$t.add(Jt,Qt);let pr=$t.add(Wt,yr);return er=$t.mul(er,pr),pr=$t.add(kr,ir),er=$t.sub(er,pr),pr=$t.add(rr,Qt),vr=$t.add(nr,yr),pr=$t.mul(pr,vr),vr=$t.add(lr,ir),pr=$t.sub(pr,vr),xr=$t.mul(Or,er),vr=$t.mul(Nr,ir),xr=$t.add(vr,xr),vr=$t.sub(lr,xr),xr=$t.add(lr,xr),Ir=$t.mul(vr,xr),lr=$t.add(kr,kr),lr=$t.add(lr,kr),ir=$t.mul(Or,ir),er=$t.mul(Nr,er),lr=$t.add(lr,ir),ir=$t.sub(kr,ir),ir=$t.mul(Or,ir),er=$t.add(er,ir),kr=$t.mul(lr,er),Ir=$t.add(Ir,kr),kr=$t.mul(pr,er),vr=$t.mul(Xt,vr),vr=$t.sub(vr,kr),kr=$t.mul(Xt,lr),xr=$t.mul(pr,xr),xr=$t.add(xr,kr),new qt(vr,Ir,xr)}subtract(Ht){return this.add(Ht.negate())}is0(){return this.equals(qt.ZERO)}wNAF(Ht){return zt.wNAFCached(this,Ut,Ht,Jt=>{const rr=$t.invertBatch(Jt.map(Qt=>Qt.pz));return Jt.map((Qt,Wt)=>Qt.toAffine(rr[Wt])).map(qt.fromAffine)})}multiplyUnsafe(Ht){const Jt=qt.ZERO;if(Ht===_0n$2)return Jt;if(jt(Ht),Ht===_1n$4)return this;const{endo:rr}=e;if(!rr)return zt.unsafeLadder(this,Ht);let{k1neg:Qt,k1:Wt,k2neg:nr,k2:yr}=rr.splitScalar(Ht),vr=Jt,Ir=Jt,xr=this;for(;Wt>_0n$2||yr>_0n$2;)Wt&_1n$4&&(vr=vr.add(xr)),yr&_1n$4&&(Ir=Ir.add(xr)),xr=xr.double(),Wt>>=_1n$4,yr>>=_1n$4;return Qt&&(vr=vr.negate()),nr&&(Ir=Ir.negate()),Ir=new qt($t.mul(Ir.px,rr.beta),Ir.py,Ir.pz),vr.add(Ir)}multiply(Ht){jt(Ht);let Jt=Ht,rr,Qt;const{endo:Wt}=e;if(Wt){const{k1neg:nr,k1:yr,k2neg:vr,k2:Ir}=Wt.splitScalar(Jt);let{p:xr,f:Or}=this.wNAF(yr),{p:Nr,f:kr}=this.wNAF(Ir);xr=zt.constTimeNegate(nr,xr),Nr=zt.constTimeNegate(vr,Nr),Nr=new qt($t.mul(Nr.px,Wt.beta),Nr.py,Nr.pz),rr=xr.add(Nr),Qt=Or.add(kr)}else{const{p:nr,f:yr}=this.wNAF(Jt);rr=nr,Qt=yr}return qt.normalizeZ([rr,Qt])[0]}multiplyAndAddUnsafe(Ht,Jt,rr){const Qt=qt.BASE,Wt=(yr,vr)=>vr===_0n$2||vr===_1n$4||!yr.equals(Qt)?yr.multiplyUnsafe(vr):yr.multiply(vr),nr=Wt(this,Jt).add(Wt(Ht,rr));return nr.is0()?void 0:nr}toAffine(Ht){const{px:Jt,py:rr,pz:Qt}=this,Wt=this.is0();Ht==null&&(Ht=Wt?$t.ONE:$t.inv(Qt));const nr=$t.mul(Jt,Ht),yr=$t.mul(rr,Ht),vr=$t.mul(Qt,Ht);if(Wt)return{x:$t.ZERO,y:$t.ZERO};if(!$t.eql(vr,$t.ONE))throw new Error("invZ was invalid");return{x:nr,y:yr}}isTorsionFree(){const{h:Ht,isTorsionFree:Jt}=e;if(Ht===_1n$4)return!0;if(Jt)return Jt(qt,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Ht,clearCofactor:Jt}=e;return Ht===_1n$4?this:Jt?Jt(qt,this):this.multiplyUnsafe(e.h)}toRawBytes(Ht=!0){return this.assertValidity(),xt(qt,this,Ht)}toHex(Ht=!0){return bytesToHex(this.toRawBytes(Ht))}}qt.BASE=new qt(e.Gx,e.Gy,$t.ONE),qt.ZERO=new qt($t.ZERO,$t.ONE,$t.ZERO);const Kt=e.nBitLength,zt=wNAF(qt,e.endo?Math.ceil(Kt/2):Kt);return{CURVE:e,ProjectivePoint:qt,normPrivateKeyToScalar:Lt,weierstrassEquation:kt,isWithinCurveOrder:Bt}}function validateOpts$2(_t){const e=validateBasic(_t);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass(_t){const e=validateOpts$2(_t),{Fp:$t,n:xt}=e,At=$t.BYTES+1,kt=2*$t.BYTES+1;function Bt(er){return _0n$2<er&&er<$t.ORDER}function jt(er){return mod(er,xt)}function Lt(er){return invert(er,xt)}const{ProjectivePoint:Ut,normPrivateKeyToScalar:Nt,weierstrassEquation:qt,isWithinCurveOrder:Kt}=weierstrassPoints({...e,toBytes(er,pr,ur){const gr=pr.toAffine(),ar=$t.toBytes(gr.x),tr=concatBytes;return ur?tr(Uint8Array.from([pr.hasEvenY()?2:3]),ar):tr(Uint8Array.from([4]),ar,$t.toBytes(gr.y))},fromBytes(er){const pr=er.length,ur=er[0],gr=er.subarray(1);if(pr===At&&(ur===2||ur===3)){const ar=bytesToNumberBE(gr);if(!Bt(ar))throw new Error("Point is not on curve");const tr=qt(ar);let dr=$t.sqrt(tr);const fr=(dr&_1n$4)===_1n$4;return(ur&1)===1!==fr&&(dr=$t.neg(dr)),{x:ar,y:dr}}else if(pr===kt&&ur===4){const ar=$t.fromBytes(gr.subarray(0,$t.BYTES)),tr=$t.fromBytes(gr.subarray($t.BYTES,2*$t.BYTES));return{x:ar,y:tr}}else throw new Error(`Point of length ${pr} was invalid. Expected ${At} compressed bytes or ${kt} uncompressed bytes`)}}),zt=er=>bytesToHex(numberToBytesBE(er,e.nByteLength));function Vt(er){const pr=xt>>_1n$4;return er>pr}function Ht(er){return Vt(er)?jt(-er):er}const Jt=(er,pr,ur)=>bytesToNumberBE(er.slice(pr,ur));class rr{constructor(pr,ur,gr){this.r=pr,this.s=ur,this.recovery=gr,this.assertValidity()}static fromCompact(pr){const ur=e.nByteLength;return pr=ensureBytes$1("compactSignature",pr,ur*2),new rr(Jt(pr,0,ur),Jt(pr,ur,2*ur))}static fromDER(pr){const{r:ur,s:gr}=DER.toSig(ensureBytes$1("DER",pr));return new rr(ur,gr)}assertValidity(){if(!Kt(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Kt(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(pr){return new rr(this.r,this.s,pr)}recoverPublicKey(pr){const{r:ur,s:gr,recovery:ar}=this,tr=Ir(ensureBytes$1("msgHash",pr));if(ar==null||![0,1,2,3].includes(ar))throw new Error("recovery id invalid");const dr=ar===2||ar===3?ur+e.n:ur;if(dr>=$t.ORDER)throw new Error("recovery id 2 or 3 invalid");const fr=ar&1?"03":"02",br=Ut.fromHex(fr+zt(dr)),Sr=Lt(dr),Dr=jt(-tr*Sr),Er=jt(gr*Sr),wr=Ut.BASE.multiplyAndAddUnsafe(br,Dr,Er);if(!wr)throw new Error("point at infinify");return wr.assertValidity(),wr}hasHighS(){return Vt(this.s)}normalizeS(){return this.hasHighS()?new rr(this.r,jt(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return zt(this.r)+zt(this.s)}}const Qt={isValidPrivateKey(er){try{return Nt(er),!0}catch{return!1}},normPrivateKeyToScalar:Nt,randomPrivateKey:()=>{const er=getMinHashLength(e.n);return mapHashToField(e.randomBytes(er),e.n)},precompute(er=8,pr=Ut.BASE){return pr._setWindowSize(er),pr.multiply(BigInt(3)),pr}};function Wt(er,pr=!0){return Ut.fromPrivateKey(er).toRawBytes(pr)}function nr(er){const pr=isBytes$2(er),ur=typeof er=="string",gr=(pr||ur)&&er.length;return pr?gr===At||gr===kt:ur?gr===2*At||gr===2*kt:er instanceof Ut}function yr(er,pr,ur=!0){if(nr(er))throw new Error("first arg must be private key");if(!nr(pr))throw new Error("second arg must be public key");return Ut.fromHex(pr).multiply(Nt(er)).toRawBytes(ur)}const vr=e.bits2int||function(er){const pr=bytesToNumberBE(er),ur=er.length*8-e.nBitLength;return ur>0?pr>>BigInt(ur):pr},Ir=e.bits2int_modN||function(er){return jt(vr(er))},xr=bitMask(e.nBitLength);function Or(er){if(typeof er!="bigint")throw new Error("bigint expected");if(!(_0n$2<=er&&er<xr))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE(er,e.nByteLength)}function Nr(er,pr,ur=kr){if(["recovered","canonical"].some(Mr=>Mr in ur))throw new Error("sign() legacy options not supported");const{hash:gr,randomBytes:ar}=e;let{lowS:tr,prehash:dr,extraEntropy:fr}=ur;tr==null&&(tr=!0),er=ensureBytes$1("msgHash",er),dr&&(er=ensureBytes$1("prehashed msgHash",gr(er)));const br=Ir(er),Sr=Nt(pr),Dr=[Or(Sr),Or(br)];if(fr!=null){const Mr=fr===!0?ar($t.BYTES):fr;Dr.push(ensureBytes$1("extraEntropy",Mr))}const Er=concatBytes(...Dr),wr=br;function Tr(Mr){const Lr=vr(Mr);if(!Kt(Lr))return;const Cr=Lt(Lr),Br=Ut.BASE.multiply(Lr).toAffine(),$r=jt(Br.x);if($r===_0n$2)return;const Rr=jt(Cr*jt(wr+$r*Sr));if(Rr===_0n$2)return;let Ur=(Br.x===$r?0:2)|Number(Br.y&_1n$4),Pr=Rr;return tr&&Vt(Rr)&&(Pr=Ht(Rr),Ur^=1),new rr($r,Pr,Ur)}return{seed:Er,k2sig:Tr}}const kr={lowS:e.lowS,prehash:!1},lr={lowS:e.lowS,prehash:!1};function ir(er,pr,ur=kr){const{seed:gr,k2sig:ar}=Nr(er,pr,ur),tr=e;return createHmacDrbg(tr.hash.outputLen,tr.nByteLength,tr.hmac)(gr,ar)}Ut.BASE._setWindowSize(8);function Xt(er,pr,ur,gr=lr){var Br;const ar=er;if(pr=ensureBytes$1("msgHash",pr),ur=ensureBytes$1("publicKey",ur),"strict"in gr)throw new Error("options.strict was renamed to lowS");const{lowS:tr,prehash:dr}=gr;let fr,br;try{if(typeof ar=="string"||isBytes$2(ar))try{fr=rr.fromDER(ar)}catch($r){if(!($r instanceof DER.Err))throw $r;fr=rr.fromCompact(ar)}else if(typeof ar=="object"&&typeof ar.r=="bigint"&&typeof ar.s=="bigint"){const{r:$r,s:Rr}=ar;fr=new rr($r,Rr)}else throw new Error("PARSE");br=Ut.fromHex(ur)}catch($r){if($r.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(tr&&fr.hasHighS())return!1;dr&&(pr=e.hash(pr));const{r:Sr,s:Dr}=fr,Er=Ir(pr),wr=Lt(Dr),Tr=jt(Er*wr),Mr=jt(Sr*wr),Lr=(Br=Ut.BASE.multiplyAndAddUnsafe(br,Tr,Mr))==null?void 0:Br.toAffine();return Lr?jt(Lr.x)===Sr:!1}return{CURVE:e,getPublicKey:Wt,getSharedSecret:yr,sign:ir,verify:Xt,ProjectivePoint:Ut,Signature:rr,utils:Qt}}class HMAC extends Hash{constructor(e,$t){super(),this.finished=!1,this.destroyed=!1,hash(e);const xt=toBytes$1($t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const At=this.blockLen,kt=new Uint8Array(At);kt.set(xt.length>At?e.create().update(xt).digest():xt);for(let Bt=0;Bt<kt.length;Bt++)kt[Bt]^=54;this.iHash.update(kt),this.oHash=e.create();for(let Bt=0;Bt<kt.length;Bt++)kt[Bt]^=106;this.oHash.update(kt),kt.fill(0)}update(e){return exists$1(this),this.iHash.update(e),this}digestInto(e){exists$1(this),bytes$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:$t,iHash:xt,finished:At,destroyed:kt,blockLen:Bt,outputLen:jt}=this;return e=e,e.finished=At,e.destroyed=kt,e.blockLen=Bt,e.outputLen=jt,e.oHash=$t._cloneInto(e.oHash),e.iHash=xt._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(_t,e,$t)=>new HMAC(_t,e).update($t).digest();hmac.create=(_t,e)=>new HMAC(_t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(_t){return{hash:_t,hmac:(e,...$t)=>hmac(_t,e,concatBytes$1(...$t)),randomBytes}}function createCurve(_t,e){const $t=xt=>weierstrass({..._t,...getHash(xt)});return Object.freeze({...$t(e),create:$t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$3=BigInt(1),_2n$2=BigInt(2),divNearest=(_t,e)=>(_t+e/_2n$2)/e;function sqrtMod(_t){const e=secp256k1P,$t=BigInt(3),xt=BigInt(6),At=BigInt(11),kt=BigInt(22),Bt=BigInt(23),jt=BigInt(44),Lt=BigInt(88),Ut=_t*_t*_t%e,Nt=Ut*Ut*_t%e,qt=pow2(Nt,$t,e)*Nt%e,Kt=pow2(qt,$t,e)*Nt%e,zt=pow2(Kt,_2n$2,e)*Ut%e,Vt=pow2(zt,At,e)*zt%e,Ht=pow2(Vt,kt,e)*Vt%e,Jt=pow2(Ht,jt,e)*Ht%e,rr=pow2(Jt,Lt,e)*Jt%e,Qt=pow2(rr,jt,e)*Ht%e,Wt=pow2(Qt,$t,e)*Nt%e,nr=pow2(Wt,Bt,e)*Vt%e,yr=pow2(nr,xt,e)*Ut%e,vr=pow2(yr,_2n$2,e);if(!Fp$2.eql(Fp$2.sqr(vr),_t))throw new Error("Cannot find square root");return vr}const Fp$2=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fp$2,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:_t=>{const e=secp256k1N,$t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),xt=-_1n$3*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),At=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),kt=$t,Bt=BigInt("0x100000000000000000000000000000000"),jt=divNearest(kt*_t,e),Lt=divNearest(-xt*_t,e);let Ut=mod(_t-jt*$t-Lt*At,e),Nt=mod(-jt*xt-Lt*kt,e);const qt=Ut>Bt,Kt=Nt>Bt;if(qt&&(Ut=e-Ut),Kt&&(Nt=e-Nt),Ut>Bt||Nt>Bt)throw new Error("splitScalar: Endomorphism failed, k="+_t);return{k1neg:qt,k1:Ut,k2neg:Kt,k2:Nt}}}},sha256);BigInt(0);secp256k1.ProjectivePoint;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fp$1=Field(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),CURVE_A=Fp$1.create(BigInt("-3")),CURVE_B=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),p256=createCurve({a:CURVE_A,b:CURVE_B,Fp:Fp$1,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},sha256),secp256r1=p256,U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(_t,e=!1){return e?{h:Number(_t&U32_MASK64),l:Number(_t>>_32n&U32_MASK64)}:{h:Number(_t>>_32n&U32_MASK64)|0,l:Number(_t&U32_MASK64)|0}}function split(_t,e=!1){let $t=new Uint32Array(_t.length),xt=new Uint32Array(_t.length);for(let At=0;At<_t.length;At++){const{h:kt,l:Bt}=fromBig(_t[At],e);[$t[At],xt[At]]=[kt,Bt]}return[$t,xt]}const toBig=(_t,e)=>BigInt(_t>>>0)<<_32n|BigInt(e>>>0),shrSH=(_t,e,$t)=>_t>>>$t,shrSL=(_t,e,$t)=>_t<<32-$t|e>>>$t,rotrSH=(_t,e,$t)=>_t>>>$t|e<<32-$t,rotrSL=(_t,e,$t)=>_t<<32-$t|e>>>$t,rotrBH=(_t,e,$t)=>_t<<64-$t|e>>>$t-32,rotrBL=(_t,e,$t)=>_t>>>$t-32|e<<64-$t,rotr32H=(_t,e)=>e,rotr32L=(_t,e)=>_t,rotlSH=(_t,e,$t)=>_t<<$t|e>>>32-$t,rotlSL=(_t,e,$t)=>e<<$t|_t>>>32-$t,rotlBH=(_t,e,$t)=>e<<$t-32|_t>>>64-$t,rotlBL=(_t,e,$t)=>_t<<$t-32|e>>>64-$t;function add(_t,e,$t,xt){const At=(e>>>0)+(xt>>>0);return{h:_t+$t+(At/2**32|0)|0,l:At|0}}const add3L=(_t,e,$t)=>(_t>>>0)+(e>>>0)+($t>>>0),add3H=(_t,e,$t,xt)=>e+$t+xt+(_t/2**32|0)|0,add4L=(_t,e,$t,xt)=>(_t>>>0)+(e>>>0)+($t>>>0)+(xt>>>0),add4H=(_t,e,$t,xt,At)=>e+$t+xt+At+(_t/2**32|0)|0,add5L=(_t,e,$t,xt,At)=>(_t>>>0)+(e>>>0)+($t>>>0)+(xt>>>0)+(At>>>0),add5H=(_t,e,$t,xt,At,kt)=>e+$t+xt+At+kt+(_t/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(_t=>BigInt(_t))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:$t,Bh:xt,Bl:At,Ch:kt,Cl:Bt,Dh:jt,Dl:Lt,Eh:Ut,El:Nt,Fh:qt,Fl:Kt,Gh:zt,Gl:Vt,Hh:Ht,Hl:Jt}=this;return[e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt]}set(e,$t,xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt){this.Ah=e|0,this.Al=$t|0,this.Bh=xt|0,this.Bl=At|0,this.Ch=kt|0,this.Cl=Bt|0,this.Dh=jt|0,this.Dl=Lt|0,this.Eh=Ut|0,this.El=Nt|0,this.Fh=qt|0,this.Fl=Kt|0,this.Gh=zt|0,this.Gl=Vt|0,this.Hh=Ht|0,this.Hl=Jt|0}process(e,$t){for(let Wt=0;Wt<16;Wt++,$t+=4)SHA512_W_H[Wt]=e.getUint32($t),SHA512_W_L[Wt]=e.getUint32($t+=4);for(let Wt=16;Wt<80;Wt++){const nr=SHA512_W_H[Wt-15]|0,yr=SHA512_W_L[Wt-15]|0,vr=u64.rotrSH(nr,yr,1)^u64.rotrSH(nr,yr,8)^u64.shrSH(nr,yr,7),Ir=u64.rotrSL(nr,yr,1)^u64.rotrSL(nr,yr,8)^u64.shrSL(nr,yr,7),xr=SHA512_W_H[Wt-2]|0,Or=SHA512_W_L[Wt-2]|0,Nr=u64.rotrSH(xr,Or,19)^u64.rotrBH(xr,Or,61)^u64.shrSH(xr,Or,6),kr=u64.rotrSL(xr,Or,19)^u64.rotrBL(xr,Or,61)^u64.shrSL(xr,Or,6),lr=u64.add4L(Ir,kr,SHA512_W_L[Wt-7],SHA512_W_L[Wt-16]),ir=u64.add4H(lr,vr,Nr,SHA512_W_H[Wt-7],SHA512_W_H[Wt-16]);SHA512_W_H[Wt]=ir|0,SHA512_W_L[Wt]=lr|0}let{Ah:xt,Al:At,Bh:kt,Bl:Bt,Ch:jt,Cl:Lt,Dh:Ut,Dl:Nt,Eh:qt,El:Kt,Fh:zt,Fl:Vt,Gh:Ht,Gl:Jt,Hh:rr,Hl:Qt}=this;for(let Wt=0;Wt<80;Wt++){const nr=u64.rotrSH(qt,Kt,14)^u64.rotrSH(qt,Kt,18)^u64.rotrBH(qt,Kt,41),yr=u64.rotrSL(qt,Kt,14)^u64.rotrSL(qt,Kt,18)^u64.rotrBL(qt,Kt,41),vr=qt&zt^~qt&Ht,Ir=Kt&Vt^~Kt&Jt,xr=u64.add5L(Qt,yr,Ir,SHA512_Kl[Wt],SHA512_W_L[Wt]),Or=u64.add5H(xr,rr,nr,vr,SHA512_Kh[Wt],SHA512_W_H[Wt]),Nr=xr|0,kr=u64.rotrSH(xt,At,28)^u64.rotrBH(xt,At,34)^u64.rotrBH(xt,At,39),lr=u64.rotrSL(xt,At,28)^u64.rotrBL(xt,At,34)^u64.rotrBL(xt,At,39),ir=xt&kt^xt&jt^kt&jt,Xt=At&Bt^At&Lt^Bt&Lt;rr=Ht|0,Qt=Jt|0,Ht=zt|0,Jt=Vt|0,zt=qt|0,Vt=Kt|0,{h:qt,l:Kt}=u64.add(Ut|0,Nt|0,Or|0,Nr|0),Ut=jt|0,Nt=Lt|0,jt=kt|0,Lt=Bt|0,kt=xt|0,Bt=At|0;const er=u64.add3L(Nr,lr,Xt);xt=u64.add3H(er,Or,kr,ir),At=er|0}({h:xt,l:At}=u64.add(this.Ah|0,this.Al|0,xt|0,At|0)),{h:kt,l:Bt}=u64.add(this.Bh|0,this.Bl|0,kt|0,Bt|0),{h:jt,l:Lt}=u64.add(this.Ch|0,this.Cl|0,jt|0,Lt|0),{h:Ut,l:Nt}=u64.add(this.Dh|0,this.Dl|0,Ut|0,Nt|0),{h:qt,l:Kt}=u64.add(this.Eh|0,this.El|0,qt|0,Kt|0),{h:zt,l:Vt}=u64.add(this.Fh|0,this.Fl|0,zt|0,Vt|0),{h:Ht,l:Jt}=u64.add(this.Gh|0,this.Gl|0,Ht|0,Jt|0),{h:rr,l:Qt}=u64.add(this.Hh|0,this.Hl|0,rr|0,Qt|0),this.set(xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt,Vt,Ht,Jt,rr,Qt)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512=wrapConstructor(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$2=BigInt(1),_2n$1=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(_t){const e=validateBasic(_t);return validateObject(_t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards(_t){const e=validateOpts$1(_t),{Fp:$t,n:xt,prehash:At,hash:kt,randomBytes:Bt,nByteLength:jt,h:Lt}=e,Ut=_2n$1<<BigInt(jt*8)-_1n$2,Nt=$t.create,qt=e.uvRatio||((gr,ar)=>{try{return{isValid:!0,value:$t.sqrt(gr*$t.inv(ar))}}catch{return{isValid:!1,value:_0n$1}}}),Kt=e.adjustScalarBytes||(gr=>gr),zt=e.domain||((gr,ar,tr)=>{if(ar.length||tr)throw new Error("Contexts/pre-hash are not supported");return gr}),Vt=gr=>typeof gr=="bigint"&&_0n$1<gr,Ht=(gr,ar)=>Vt(gr)&&Vt(ar)&&gr<ar,Jt=gr=>gr===_0n$1||Ht(gr,Ut);function rr(gr,ar){if(Ht(gr,ar))return gr;throw new Error(`Expected valid scalar < ${ar}, got ${typeof gr} ${gr}`)}function Qt(gr){return gr===_0n$1?gr:rr(gr,xt)}const Wt=new Map;function nr(gr){if(!(gr instanceof yr))throw new Error("ExtendedPoint expected")}class yr{constructor(ar,tr,dr,fr){if(this.ex=ar,this.ey=tr,this.ez=dr,this.et=fr,!Jt(ar))throw new Error("x required");if(!Jt(tr))throw new Error("y required");if(!Jt(dr))throw new Error("z required");if(!Jt(fr))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ar){if(ar instanceof yr)throw new Error("extended point not allowed");const{x:tr,y:dr}=ar||{};if(!Jt(tr)||!Jt(dr))throw new Error("invalid affine point");return new yr(tr,dr,_1n$2,Nt(tr*dr))}static normalizeZ(ar){const tr=$t.invertBatch(ar.map(dr=>dr.ez));return ar.map((dr,fr)=>dr.toAffine(tr[fr])).map(yr.fromAffine)}_setWindowSize(ar){this._WINDOW_SIZE=ar,Wt.delete(this)}assertValidity(){const{a:ar,d:tr}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:dr,ey:fr,ez:br,et:Sr}=this,Dr=Nt(dr*dr),Er=Nt(fr*fr),wr=Nt(br*br),Tr=Nt(wr*wr),Mr=Nt(Dr*ar),Lr=Nt(wr*Nt(Mr+Er)),Cr=Nt(Tr+Nt(tr*Nt(Dr*Er)));if(Lr!==Cr)throw new Error("bad point: equation left != right (1)");const Br=Nt(dr*fr),$r=Nt(br*Sr);if(Br!==$r)throw new Error("bad point: equation left != right (2)")}equals(ar){nr(ar);const{ex:tr,ey:dr,ez:fr}=this,{ex:br,ey:Sr,ez:Dr}=ar,Er=Nt(tr*Dr),wr=Nt(br*fr),Tr=Nt(dr*Dr),Mr=Nt(Sr*fr);return Er===wr&&Tr===Mr}is0(){return this.equals(yr.ZERO)}negate(){return new yr(Nt(-this.ex),this.ey,this.ez,Nt(-this.et))}double(){const{a:ar}=e,{ex:tr,ey:dr,ez:fr}=this,br=Nt(tr*tr),Sr=Nt(dr*dr),Dr=Nt(_2n$1*Nt(fr*fr)),Er=Nt(ar*br),wr=tr+dr,Tr=Nt(Nt(wr*wr)-br-Sr),Mr=Er+Sr,Lr=Mr-Dr,Cr=Er-Sr,Br=Nt(Tr*Lr),$r=Nt(Mr*Cr),Rr=Nt(Tr*Cr),Ur=Nt(Lr*Mr);return new yr(Br,$r,Ur,Rr)}add(ar){nr(ar);const{a:tr,d:dr}=e,{ex:fr,ey:br,ez:Sr,et:Dr}=this,{ex:Er,ey:wr,ez:Tr,et:Mr}=ar;if(tr===BigInt(-1)){const Jr=Nt((br-fr)*(wr+Er)),nn=Nt((br+fr)*(wr-Er)),on=Nt(nn-Jr);if(on===_0n$1)return this.double();const Gr=Nt(Sr*_2n$1*Mr),Fr=Nt(Dr*_2n$1*Tr),Xr=Fr+Gr,tn=nn+Jr,en=Fr-Gr,un=Nt(Xr*on),hn=Nt(tn*en),yn=Nt(Xr*en),pn=Nt(on*tn);return new yr(un,hn,pn,yn)}const Lr=Nt(fr*Er),Cr=Nt(br*wr),Br=Nt(Dr*dr*Mr),$r=Nt(Sr*Tr),Rr=Nt((fr+br)*(Er+wr)-Lr-Cr),Ur=$r-Br,Pr=$r+Br,_r=Nt(Cr-tr*Lr),Ar=Nt(Rr*Ur),jr=Nt(Pr*_r),Kr=Nt(Rr*_r),Zr=Nt(Ur*Pr);return new yr(Ar,jr,Zr,Kr)}subtract(ar){return this.add(ar.negate())}wNAF(ar){return xr.wNAFCached(this,Wt,ar,yr.normalizeZ)}multiply(ar){const{p:tr,f:dr}=this.wNAF(rr(ar,xt));return yr.normalizeZ([tr,dr])[0]}multiplyUnsafe(ar){let tr=Qt(ar);return tr===_0n$1?Ir:this.equals(Ir)||tr===_1n$2?this:this.equals(vr)?this.wNAF(tr).p:xr.unsafeLadder(this,tr)}isSmallOrder(){return this.multiplyUnsafe(Lt).is0()}isTorsionFree(){return xr.unsafeLadder(this,xt).is0()}toAffine(ar){const{ex:tr,ey:dr,ez:fr}=this,br=this.is0();ar==null&&(ar=br?_8n:$t.inv(fr));const Sr=Nt(tr*ar),Dr=Nt(dr*ar),Er=Nt(fr*ar);if(br)return{x:_0n$1,y:_1n$2};if(Er!==_1n$2)throw new Error("invZ was invalid");return{x:Sr,y:Dr}}clearCofactor(){const{h:ar}=e;return ar===_1n$2?this:this.multiplyUnsafe(ar)}static fromHex(ar,tr=!1){const{d:dr,a:fr}=e,br=$t.BYTES;ar=ensureBytes$1("pointHex",ar,br);const Sr=ar.slice(),Dr=ar[br-1];Sr[br-1]=Dr&-129;const Er=bytesToNumberLE(Sr);Er===_0n$1||(tr?rr(Er,Ut):rr(Er,$t.ORDER));const wr=Nt(Er*Er),Tr=Nt(wr-_1n$2),Mr=Nt(dr*wr-fr);let{isValid:Lr,value:Cr}=qt(Tr,Mr);if(!Lr)throw new Error("Point.fromHex: invalid y coordinate");const Br=(Cr&_1n$2)===_1n$2,$r=(Dr&128)!==0;if(!tr&&Cr===_0n$1&&$r)throw new Error("Point.fromHex: x=0 and x_0=1");return $r!==Br&&(Cr=Nt(-Cr)),yr.fromAffine({x:Cr,y:Er})}static fromPrivateKey(ar){return kr(ar).point}toRawBytes(){const{x:ar,y:tr}=this.toAffine(),dr=numberToBytesLE(tr,$t.BYTES);return dr[dr.length-1]|=ar&_1n$2?128:0,dr}toHex(){return bytesToHex(this.toRawBytes())}}yr.BASE=new yr(e.Gx,e.Gy,_1n$2,Nt(e.Gx*e.Gy)),yr.ZERO=new yr(_0n$1,_1n$2,_1n$2,_0n$1);const{BASE:vr,ZERO:Ir}=yr,xr=wNAF(yr,jt*8);function Or(gr){return mod(gr,xt)}function Nr(gr){return Or(bytesToNumberLE(gr))}function kr(gr){const ar=jt;gr=ensureBytes$1("private key",gr,ar);const tr=ensureBytes$1("hashed private key",kt(gr),2*ar),dr=Kt(tr.slice(0,ar)),fr=tr.slice(ar,2*ar),br=Nr(dr),Sr=vr.multiply(br),Dr=Sr.toRawBytes();return{head:dr,prefix:fr,scalar:br,point:Sr,pointBytes:Dr}}function lr(gr){return kr(gr).pointBytes}function ir(gr=new Uint8Array,...ar){const tr=concatBytes(...ar);return Nr(kt(zt(tr,ensureBytes$1("context",gr),!!At)))}function Xt(gr,ar,tr={}){gr=ensureBytes$1("message",gr),At&&(gr=At(gr));const{prefix:dr,scalar:fr,pointBytes:br}=kr(ar),Sr=ir(tr.context,dr,gr),Dr=vr.multiply(Sr).toRawBytes(),Er=ir(tr.context,Dr,br,gr),wr=Or(Sr+Er*fr);Qt(wr);const Tr=concatBytes(Dr,numberToBytesLE(wr,$t.BYTES));return ensureBytes$1("result",Tr,jt*2)}const er=VERIFY_DEFAULT;function pr(gr,ar,tr,dr=er){const{context:fr,zip215:br}=dr,Sr=$t.BYTES;gr=ensureBytes$1("signature",gr,2*Sr),ar=ensureBytes$1("message",ar),At&&(ar=At(ar));const Dr=bytesToNumberLE(gr.slice(Sr,2*Sr));let Er,wr,Tr;try{Er=yr.fromHex(tr,br),wr=yr.fromHex(gr.slice(0,Sr),br),Tr=vr.multiplyUnsafe(Dr)}catch{return!1}if(!br&&Er.isSmallOrder())return!1;const Mr=ir(fr,wr.toRawBytes(),Er.toRawBytes(),ar);return wr.add(Er.multiplyUnsafe(Mr)).subtract(Tr).clearCofactor().equals(yr.ZERO)}return vr._setWindowSize(8),{CURVE:e,getPublicKey:lr,sign:Xt,verify:pr,ExtendedPoint:yr,utils:{getExtendedPublicKey:kr,randomPrivateKey:()=>Bt($t.BYTES),precompute(gr=8,ar=yr.BASE){return ar._setWindowSize(gr),ar.multiply(BigInt(3)),ar}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n$1=BigInt(1);function validateOpts(_t){return validateObject(_t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({..._t})}function montgomery(_t){const e=validateOpts(_t),{P:$t}=e,xt=Wt=>mod(Wt,$t),At=e.montgomeryBits,kt=Math.ceil(At/8),Bt=e.nByteLength,jt=e.adjustScalarBytes||(Wt=>Wt),Lt=e.powPminus2||(Wt=>pow(Wt,$t-BigInt(2),$t));function Ut(Wt,nr,yr){const vr=xt(Wt*(nr-yr));return nr=xt(nr-vr),yr=xt(yr+vr),[nr,yr]}function Nt(Wt){if(typeof Wt=="bigint"&&_0n<=Wt&&Wt<$t)return Wt;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const qt=(e.a-BigInt(2))/BigInt(4);function Kt(Wt,nr){const yr=Nt(Wt),vr=Nt(nr),Ir=yr;let xr=_1n$1,Or=_0n,Nr=yr,kr=_1n$1,lr=_0n,ir;for(let er=BigInt(At-1);er>=_0n;er--){const pr=vr>>er&_1n$1;lr^=pr,ir=Ut(lr,xr,Nr),xr=ir[0],Nr=ir[1],ir=Ut(lr,Or,kr),Or=ir[0],kr=ir[1],lr=pr;const ur=xr+Or,gr=xt(ur*ur),ar=xr-Or,tr=xt(ar*ar),dr=gr-tr,fr=Nr+kr,br=Nr-kr,Sr=xt(br*ur),Dr=xt(fr*ar),Er=Sr+Dr,wr=Sr-Dr;Nr=xt(Er*Er),kr=xt(Ir*xt(wr*wr)),xr=xt(gr*tr),Or=xt(dr*(gr+xt(qt*dr)))}ir=Ut(lr,xr,Nr),xr=ir[0],Nr=ir[1],ir=Ut(lr,Or,kr),Or=ir[0],kr=ir[1];const Xt=Lt(Or);return xt(xr*Xt)}function zt(Wt){return numberToBytesLE(xt(Wt),kt)}function Vt(Wt){const nr=ensureBytes$1("u coordinate",Wt,kt);return Bt===32&&(nr[31]&=127),bytesToNumberLE(nr)}function Ht(Wt){const nr=ensureBytes$1("scalar",Wt),yr=nr.length;if(yr!==kt&&yr!==Bt)throw new Error(`Expected ${kt} or ${Bt} bytes, got ${yr}`);return bytesToNumberLE(jt(nr))}function Jt(Wt,nr){const yr=Vt(nr),vr=Ht(Wt),Ir=Kt(yr,vr);if(Ir===_0n)throw new Error("Invalid private or public key received");return zt(Ir)}const rr=zt(e.Gu);function Qt(Wt){return Jt(Wt,rr)}return{scalarMult:Jt,scalarMultBase:Qt,getSharedSecret:(Wt,nr)=>Jt(Wt,nr),getPublicKey:Wt=>Qt(Wt),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:rr}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n=BigInt(1),_2n=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(_t){const e=ED25519_P,xt=_t*_t%e*_t%e,At=pow2(xt,_2n,e)*xt%e,kt=pow2(At,_1n,e)*_t%e,Bt=pow2(kt,_5n,e)*kt%e,jt=pow2(Bt,_10n,e)*Bt%e,Lt=pow2(jt,_20n,e)*jt%e,Ut=pow2(Lt,_40n,e)*Lt%e,Nt=pow2(Ut,_80n,e)*Ut%e,qt=pow2(Nt,_80n,e)*Ut%e,Kt=pow2(qt,_10n,e)*Bt%e;return{pow_p_5_8:pow2(Kt,_2n,e)*_t%e,b2:xt}}function adjustScalarBytes(_t){return _t[0]&=248,_t[31]&=127,_t[31]|=64,_t}function uvRatio(_t,e){const $t=ED25519_P,xt=mod(e*e*e,$t),At=mod(xt*xt*e,$t),kt=ed25519_pow_2_252_3(_t*At).pow_p_5_8;let Bt=mod(_t*xt*kt,$t);const jt=mod(e*Bt*Bt,$t),Lt=Bt,Ut=mod(Bt*ED25519_SQRT_M1,$t),Nt=jt===_t,qt=jt===mod(-_t,$t),Kt=jt===mod(-_t*ED25519_SQRT_M1,$t);return Nt&&(Bt=Lt),(qt||Kt)&&(Bt=Ut),isNegativeLE(Bt,$t)&&(Bt=mod(-Bt,$t)),{isValid:Nt||qt,value:Bt}}const Fp=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512,randomBytes,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);function ed25519_domain(_t,e,$t){if(e.length>255)throw new Error("Context is too big");return concatBytes$1(utf8ToBytes$2("SigEd25519 no Ed25519 collisions"),new Uint8Array([$t?1:0,e.length]),e,_t)}({...ed25519Defaults});({...ed25519Defaults});const x25519=montgomery({P:ED25519_P,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:_t=>{const e=ED25519_P,{pow_p_5_8:$t,b2:xt}=ed25519_pow_2_252_3(_t);return mod(pow2($t,BigInt(3),e)*xt,e)},adjustScalarBytes,randomBytes});function edwardsToMontgomeryPub(_t){const{y:e}=ed25519.ExtendedPoint.fromHex(_t),$t=BigInt(1);return Fp.toBytes(Fp.create(($t+e)*Fp.inv($t-e)))}function edwardsToMontgomeryPriv(_t){const e=ed25519Defaults.hash(_t.subarray(0,32));return ed25519Defaults.adjustScalarBytes(e).subarray(0,32)}const ELL2_C1=(Fp.ORDER+BigInt(3))/BigInt(8);Fp.pow(_2n,ELL2_C1);Fp.sqrt(Fp.neg(Fp.ONE));(Fp.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp,Fp.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function isArrayBufferSlice(_t){return _t.byteOffset!==0||_t.byteLength!==_t.buffer.byteLength}function isAsyncIterable(_t){return typeof _t!="object"||_t===null?!1:typeof _t[Symbol.asyncIterator]=="function"}function universalTypeOf(_t){const $t=Object.prototype.toString.call(_t).match(/\s([a-zA-Z0-9]+)/),[xt,At]=$t;return At}var __awaiter$n=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__asyncValues=function(_t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=_t[Symbol.asyncIterator],$t;return e?e.call(_t):(_t=typeof __values=="function"?__values(_t):_t[Symbol.iterator](),$t={},xt("next"),xt("throw"),xt("return"),$t[Symbol.asyncIterator]=function(){return this},$t);function xt(kt){$t[kt]=_t[kt]&&function(Bt){return new Promise(function(jt,Lt){Bt=_t[kt](Bt),At(jt,Lt,Bt.done,Bt.value)})}}function At(kt,Bt,jt,Lt){Promise.resolve(Lt).then(function(Ut){kt({value:Ut,done:jt})},Bt)}};const textEncoder=new TextEncoder,textDecoder=new TextDecoder;class Convert{constructor(e,$t){this.data=e,this.format=$t}static arrayBuffer(e){return new Convert(e,"ArrayBuffer")}static asyncIterable(e){if(!isAsyncIterable(e))throw new TypeError("Input must be of type AsyncIterable.");return new Convert(e,"AsyncIterable")}static base32Z(e){return new Convert(e,"Base32Z")}static base58Btc(e){return new Convert(e,"Base58Btc")}static base64Url(e){return new Convert(e,"Base64Url")}static bufferSource(e){return new Convert(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new Convert(e,"Hex")}static multibase(e){return new Convert(e,"Multibase")}static object(e){return new Convert(e,"Object")}static string(e){return new Convert(e,"String")}static uint8Array(e){return new Convert(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return base58btc.baseDecode(this.data).buffer;case"Base64Url":return base64url$2.baseDecode(this.data).buffer;case"BufferSource":{if(universalTypeOf(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return isArrayBufferSlice(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return __awaiter$n(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return base32z.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return base58btc.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return base58btc.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const e=new Uint8Array(this.data);return base64url$2.baseEncode(e)}case"BufferSource":{const e=this.toUint8Array();return base64url$2.baseEncode(e)}case"Object":{const e=JSON.stringify(this.data),$t=textEncoder.encode(e);return base64url$2.baseEncode($t)}case"String":{const e=textEncoder.encode(this.data);return base64url$2.baseEncode(e)}case"Uint8Array":return base64url$2.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,$t,xt,At;return __awaiter$n(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const Lt=[];try{for(var kt=!0,Bt=__asyncValues(this.data),jt;jt=yield Bt.next(),e=jt.done,!e;kt=!0){At=jt.value,kt=!1;const Nt=At;Lt.push(Nt)}}catch(Nt){$t={error:Nt}}finally{try{!kt&&!e&&(xt=Bt.return)&&(yield xt.call(Bt))}finally{if($t)throw $t.error}}return new Blob(Lt)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){const e=Array.from({length:256},($t,xt)=>xt.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const $t=this.toUint8Array();return Convert.uint8Array($t).toHex()}case"Base64Url":{const $t=this.toUint8Array();return Convert.uint8Array($t).toHex()}case"Uint8Array":{let $t="";for(let xt=0;xt<this.data.length;xt++)$t+=e[this.data[xt]];return $t}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{const e=base64url$2.baseDecode(this.data),$t=textDecoder.decode(e);return JSON.parse($t)}case"String":return JSON.parse(this.data);case"Uint8Array":{const e=textDecoder.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return __awaiter$n(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return textDecoder.decode(this.data);case"Base64Url":{const e=base64url$2.baseDecode(this.data);return textDecoder.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return textDecoder.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,$t,xt,At;return __awaiter$n(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let Lt="";try{for(var kt=!0,Bt=__asyncValues(this.data),jt;jt=yield Bt.next(),e=jt.done,!e;kt=!0){At=jt.value,kt=!1;const Ut=At;typeof Ut=="string"?Lt+=Ut:Lt+=textDecoder.decode(Ut,{stream:!0})}}catch(Ut){$t={error:Ut}}finally{try{!kt&&!e&&(xt=Bt.return)&&(yield xt.call(Bt))}finally{if($t)throw $t.error}}return Lt+=textDecoder.decode(void 0,{stream:!1}),Lt}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return base32z.baseDecode(this.data);case"Base58Btc":return base58btc.baseDecode(this.data);case"Base64Url":return base64url$2.baseDecode(this.data);case"BufferSource":{const e=universalTypeOf(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const e=new Uint8Array(this.data.length/2);for(let $t=0;$t<this.data.length;$t+=2){const xt=parseInt(this.data.substring($t,$t+2),16);if(isNaN(xt))throw new TypeError("Input is not a valid hexadecimal string.");e[$t/2]=xt}return e}case"Object":{const e=JSON.stringify(this.data);return textEncoder.encode(e)}case"String":return textEncoder.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return __awaiter$n(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{const e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}}class Multicodec{static addPrefix(e){var $t;let{code:xt,data:At,name:kt}=e;if(!(kt?!xt:xt))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(xt=Multicodec.codeToName.has(xt)?xt:Multicodec.nameToCode.get(kt),xt===void 0)throw new Error(`Unsupported multicodec: ${($t=e.name)!==null&&$t!==void 0?$t:e.code}`);const Bt=encodingLength$8(xt),jt=new Uint8Array(Bt+At.byteLength);return jt.set(At,Bt),encodeTo$3(xt,jt),jt}static getCodeFromData(e){const{prefixedData:$t}=e,[xt,At]=decode$m($t);return xt}static getCodeFromName(e){const{name:$t}=e,xt=Multicodec.nameToCode.get($t);if(xt===void 0)throw new Error(`Unsupported multicodec: ${$t}`);return xt}static getNameFromCode(e){const{code:$t}=e,xt=Multicodec.codeToName.get($t);if(xt===void 0)throw new Error(`Unsupported multicodec: ${$t}`);return xt}static registerCodec(e){Multicodec.codeToName.set(e.code,e.name),Multicodec.nameToCode.set(e.name,e.code)}static removePrefix(e){const{prefixedData:$t}=e,[xt,At]=decode$m($t),kt=Multicodec.codeToName.get(xt);if(kt===void 0)throw new Error(`Unsupported multicodec: ${xt}`);return{code:xt,data:$t.slice(At),name:kt}}}Multicodec.codeToName=new Map;Multicodec.nameToCode=new Map;Multicodec.registerCodec({code:237,name:"ed25519-pub"});Multicodec.registerCodec({code:4864,name:"ed25519-priv"});Multicodec.registerCodec({code:236,name:"x25519-pub"});Multicodec.registerCodec({code:4866,name:"x25519-priv"});Multicodec.registerCodec({code:231,name:"secp256k1-pub"});Multicodec.registerCodec({code:4865,name:"secp256k1-priv"});function removeUndefinedProperties(_t){Object.keys(_t).forEach(e=>{_t[e]===void 0?delete _t[e]:typeof _t[e]=="object"&&removeUndefinedProperties(_t[e])})}var __awaiter$m=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class MemoryStore{constructor(){this.store=new Map}clear(){return __awaiter$m(this,void 0,void 0,function*(){this.store.clear()})}close(){return __awaiter$m(this,void 0,void 0,function*(){})}delete(e){return __awaiter$m(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return __awaiter$m(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return __awaiter$m(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return __awaiter$m(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,$t){return __awaiter$m(this,void 0,void 0,function*(){this.store.set(e,$t)})}}var __await$3=function(_t){return this instanceof __await$3?(this.v=_t,this):new __await$3(_t)};/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const alphabet="0123456789abcdef",encodeLookup=[];for(let _t=0;_t<256;_t++)encodeLookup[_t]=alphabet[_t>>4&15]+alphabet[_t&15];const arr2hex=_t=>{const e=_t.length;let $t="",xt=0;for(;xt<e;)$t+=encodeLookup[_t[xt++]];return $t},concat=(_t,e=0)=>{const $t=_t.length||0;if(!e){let Bt=$t;for(;Bt--;)e+=_t[Bt].length}const xt=new Uint8Array(e);let At=e,kt=$t;for(;kt--;)At-=_t[kt].length,xt.set(_t[kt],At);return xt};var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;const decoder=new TextDecoder,arr2text=(_t,e)=>decoder.decode(_t),encoder=new TextEncoder,text2arr=_t=>encoder.encode(_t),scope=typeof window<"u"?window:self,crypto$1=scope.crypto||scope.msCrypto||{};crypto$1.subtle||crypto$1.webkitSubtle;function digitCount(_t){const e=_t<0?1:0;return _t=Math.abs(Number(_t||1)),Math.floor(Math.log10(_t))+1+e}function getType(_t){return ArrayBuffer.isView(_t)?"arraybufferview":Array.isArray(_t)?"array":_t instanceof Number?"number":_t instanceof Boolean?"boolean":_t instanceof Set?"set":_t instanceof Map?"map":_t instanceof String?"string":_t instanceof ArrayBuffer?"arraybuffer":typeof _t}function encode$3(_t,e,$t){const xt=[];let At=null;return encode$3._encode(xt,_t),At=concat(xt),encode$3.bytes=At.length,ArrayBuffer.isView(e)?(e.set(At,$t),e):At}encode$3.bytes=-1;encode$3._floatConversionDetected=!1;encode$3._encode=function(_t,e){if(e!=null)switch(getType(e)){case"object":encode$3.dict(_t,e);break;case"map":encode$3.dictMap(_t,e);break;case"array":encode$3.list(_t,e);break;case"set":encode$3.listSet(_t,e);break;case"string":encode$3.string(_t,e);break;case"number":encode$3.number(_t,e);break;case"boolean":encode$3.number(_t,e);break;case"arraybufferview":encode$3.buffer(_t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":encode$3.buffer(_t,new Uint8Array(e));break}};const buffE=new Uint8Array([101]),buffD=new Uint8Array([100]),buffL=new Uint8Array([108]);encode$3.buffer=function(_t,e){_t.push(text2arr(e.length+":"),e)};encode$3.string=function(_t,e){_t.push(text2arr(text2arr(e).byteLength+":"+e))};encode$3.number=function(_t,e){if(Number.isInteger(e))return _t.push(text2arr("i"+BigInt(e)+"e"));const $t=2147483648,xt=e/$t<<0,At=e%$t<<0,kt=xt*$t+At;_t.push(text2arr("i"+kt+"e")),kt!==e&&!encode$3._floatConversionDetected&&(encode$3._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+kt+'"'),console.trace())};encode$3.dict=function(_t,e){_t.push(buffD);let $t=0,xt;const At=Object.keys(e).sort(),kt=At.length;for(;$t<kt;$t++)xt=At[$t],e[xt]!=null&&(encode$3.string(_t,xt),encode$3._encode(_t,e[xt]));_t.push(buffE)};encode$3.dictMap=function(_t,e){_t.push(buffD);const $t=Array.from(e.keys()).sort();for(const xt of $t)e.get(xt)!=null&&(ArrayBuffer.isView(xt)?encode$3._encode(_t,xt):encode$3.string(_t,String(xt)),encode$3._encode(_t,e.get(xt)));_t.push(buffE)};encode$3.list=function(_t,e){let $t=0;const xt=e.length;for(_t.push(buffL);$t<xt;$t++)e[$t]!=null&&encode$3._encode(_t,e[$t]);_t.push(buffE)};encode$3.listSet=function(_t,e){_t.push(buffL);for(const $t of e)$t!=null&&encode$3._encode(_t,$t);_t.push(buffE)};const INTEGER_START=105,STRING_DELIM=58,DICTIONARY_START=100,LIST_START=108,END_OF_TYPE=101;function getIntFromBuffer(_t,e,$t){let xt=0,At=1;for(let kt=e;kt<$t;kt++){const Bt=_t[kt];if(Bt<58&&Bt>=48){xt=xt*10+(Bt-48);continue}if(!(kt===e&&Bt===43)){if(kt===e&&Bt===45){At=-1;continue}if(Bt===46)break;throw new Error("not a number: buffer["+kt+"] = "+Bt)}}return xt*At}function decode$3(_t,e,$t,xt){return _t==null||_t.length===0?null:(typeof e!="number"&&xt==null&&(xt=e,e=void 0),typeof $t!="number"&&xt==null&&(xt=$t,$t=void 0),decode$3.position=0,decode$3.encoding=xt||null,decode$3.data=ArrayBuffer.isView(_t)?new Uint8Array(_t.slice(e,$t)):text2arr(_t),decode$3.bytes=decode$3.data.length,decode$3.next())}decode$3.bytes=0;decode$3.position=0;decode$3.data=null;decode$3.encoding=null;decode$3.next=function(){switch(decode$3.data[decode$3.position]){case DICTIONARY_START:return decode$3.dictionary();case LIST_START:return decode$3.list();case INTEGER_START:return decode$3.integer();default:return decode$3.buffer()}};decode$3.find=function(_t){let e=decode$3.position;const $t=decode$3.data.length,xt=decode$3.data;for(;e<$t;){if(xt[e]===_t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(_t)+'" [0x'+_t.toString(16)+"]")};decode$3.dictionary=function(){decode$3.position++;const _t={};for(;decode$3.data[decode$3.position]!==END_OF_TYPE;){const e=decode$3.buffer();let $t=arr2text(e);$t.includes("�")&&($t=arr2hex(e)),_t[$t]=decode$3.next()}return decode$3.position++,_t};decode$3.list=function(){decode$3.position++;const _t=[];for(;decode$3.data[decode$3.position]!==END_OF_TYPE;)_t.push(decode$3.next());return decode$3.position++,_t};decode$3.integer=function(){const _t=decode$3.find(END_OF_TYPE),e=getIntFromBuffer(decode$3.data,decode$3.position+1,_t);return decode$3.position+=_t+1-decode$3.position,e};decode$3.buffer=function(){let _t=decode$3.find(STRING_DELIM);const e=getIntFromBuffer(decode$3.data,decode$3.position,_t),$t=++_t+e;return decode$3.position=$t,decode$3.encoding?arr2text(decode$3.data.slice(_t,$t)):decode$3.data.slice(_t,$t)};function listLength(_t){let e=2;for(const $t of _t)e+=encodingLength$3($t);return e}function mapLength(_t){let e=2;for(const[$t,xt]of _t){const At=text2arr($t).byteLength;e+=digitCount(At)+1+At,e+=encodingLength$3(xt)}return e}function objectLength(_t){let e=2;const $t=Object.keys(_t);for(let xt=0;xt<$t.length;xt++){const At=text2arr($t[xt]).byteLength;e+=digitCount(At)+1+At,e+=encodingLength$3(_t[$t[xt]])}return e}function stringLength(_t){const e=text2arr(_t).byteLength;return digitCount(e)+1+e}function arrayBufferLength(_t){const e=_t.byteLength-_t.byteOffset;return digitCount(e)+1+e}function encodingLength$3(_t){if(_t==null)return 0;const $t=getType(_t);switch($t){case"arraybufferview":return arrayBufferLength(_t);case"string":return stringLength(_t);case"array":case"set":return listLength(_t);case"number":return 1+digitCount(Math.floor(_t))+1;case"bigint":return 1+_t.toString().length+1;case"object":return objectLength(_t);case"map":return mapLength(_t);default:throw new TypeError(`Unsupported value of type "${$t}"`)}}const encodingLength$2=encodingLength$3,bencode={encode:encode$3,decode:decode$3,byteLength:encodingLength$3,encodingLength:encodingLength$2},v4Regex=/^(\d{1,3}\.){3,3}\d{1,3}$/,v4Size=4,v6Regex=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,v6Size=16,v4={name:"v4",size:v4Size,isFormat:_t=>v4Regex.test(_t),encode(_t,e,$t){$t=~~$t,e=e||new Uint8Array($t+v4Size);const xt=_t.length;let At=0;for(let kt=0;kt<xt;){const Bt=_t.charCodeAt(kt++);Bt===46?(e[$t++]=At,At=0):At=At*10+(Bt-48)}return e[$t]=At,e},decode(_t,e){return e=~~e,`${_t[e++]}.${_t[e++]}.${_t[e++]}.${_t[e]}`}},v6={name:"v6",size:v6Size,isFormat:_t=>_t.length>0&&v6Regex.test(_t),encode(_t,e,$t){$t=~~$t;let xt=$t+v6Size,At=-1,kt=0,Bt=0,jt=!0,Lt=!1;e=e||new Uint8Array($t+v6Size);for(let Ut=0;Ut<_t.length;Ut++){let Nt=_t.charCodeAt(Ut);Nt===58?(jt?At!==-1?($t<xt&&(e[$t]=0),$t<xt-1&&(e[$t+1]=0),$t+=2):$t<xt&&(At=$t):(Lt===!0?($t<xt&&(e[$t]=Bt),$t++):($t<xt&&(e[$t]=kt>>8),$t<xt-1&&(e[$t+1]=kt&255),$t+=2),kt=0,Bt=0),jt=!0,Lt=!1):Nt===46?($t<xt&&(e[$t]=Bt),$t++,Bt=0,kt=0,jt=!1,Lt=!0):(jt=!1,Nt>=97?Nt-=87:Nt>=65?Nt-=55:(Nt-=48,Bt=Bt*10+Nt),kt=(kt<<4)+Nt)}if(jt===!1)Lt===!0?($t<xt&&(e[$t]=Bt),$t++):($t<xt&&(e[$t]=kt>>8),$t<xt-1&&(e[$t+1]=kt&255),$t+=2);else if(At===0)$t<xt&&(e[$t]=0),$t<xt-1&&(e[$t+1]=0),$t+=2;else if(At!==-1){$t+=2;for(let Ut=Math.min($t-1,xt-1);Ut>=At+2;Ut--)e[Ut]=e[Ut-2];e[At]=0,e[At+1]=0,At=$t}if(At!==$t&&At!==-1)for($t>xt-2&&($t=xt-2);xt>At;)e[--xt]=$t<xt&&$t>At?e[--$t]:0;else for(;$t<xt;)e[$t++]=0;return e},decode(_t,e){e=~~e;let $t="";for(let xt=0;xt<v6Size;xt+=2)xt!==0&&($t+=":"),$t+=(_t[e+xt]<<8|_t[e+xt+1]).toString(16);return $t.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function sizeOf(_t){if(v4.isFormat(_t))return v4.size;if(v6.isFormat(_t))return v6.size;throw Error(`Invalid ip address: ${_t}`)}function familyOf(_t){return sizeOf(_t)===v4.size?1:2}function encode$2(_t,e,$t){$t=~~$t;const xt=sizeOf(_t);return typeof e=="function"&&(e=e($t+xt)),xt===v4.size?v4.encode(_t,e,$t):v6.encode(_t,e,$t)}function decode$2(_t,e,$t){if(e=~~e,$t=$t||_t.length-e,$t===v4.size)return v4.decode(_t,e,$t);if($t===v6.size)return v6.decode(_t,e,$t);throw Error(`Invalid buffer size needs to be ${v4.size} for v4 or ${v6.size} for v6.`)}function toString$4(_t){switch(_t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+_t}function toType(_t){switch(_t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return _t.toUpperCase().startsWith("UNKNOWN_")?parseInt(_t.slice(8)):0}function toString$3(_t){switch(_t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+_t}function toString$2(_t){switch(_t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+_t}function toString$1(_t){switch(_t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+_t}function toClass(_t){switch(_t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function toString(_t){switch(_t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return _t<0?null:`OPTION_${_t}`}function toCode(_t){if(typeof _t=="number")return _t;if(!_t)return-1;switch(_t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=_t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}const SURROGATE_A=55296,SURROGATE_B=56320;function encodingLength$1(_t){let e=0;const $t=_t.length;for(let xt=0;xt<$t;xt+=1){const At=_t.charCodeAt(xt);if(At<=127)e+=1;else if(At<=2047)e+=2;else if((At&63488)!==SURROGATE_A)e+=3;else{const kt=xt+1;kt===$t||At>=SURROGATE_B||(_t.charCodeAt(kt)&64512)!==SURROGATE_B?e+=3:(xt=kt,e+=4)}}return e}function encode$1(_t,e,$t){const xt=_t.length;$t==null&&($t=0),e===void 0&&(e=new Uint8Array(encodingLength$1(_t)+$t));let At=$t;for(let kt=0;kt<xt;kt+=1){let Bt=_t.charCodeAt(kt);if(Bt<=127)e[At++]=Bt;else if(Bt<=2047)e[At++]=192|(Bt&1984)>>6,e[At++]=128|Bt&63;else if((Bt&63488)!==SURROGATE_A)e[At++]=224|(Bt&61440)>>12,e[At++]=128|(Bt&4032)>>6,e[At++]=128|Bt&63;else{const jt=kt+1;if(jt===xt||Bt>=SURROGATE_B)e[At++]=239,e[At++]=191,e[At++]=189;else{const Lt=_t.charCodeAt(jt);(Lt&64512)!==SURROGATE_B?(e[At++]=239,e[At++]=191,e[At++]=189):(kt=jt,Bt=65536|(Bt&1023)<<10|Lt&1023,e[At++]=240|(Bt&1835008)>>18,e[At++]=128|(Bt&258048)>>12,e[At++]=128|(Bt&4032)>>6,e[At++]=128|Bt&63)}}}return encode$1.bytes=At-$t,e}encode$1.bytes=0;function decode$1(_t,e,$t){let xt="";e==null&&(e=0),$t==null&&($t=_t.length);for(let At=e;At<$t;){const kt=_t[At++];let Bt;if(kt<=128)Bt=kt;else if(kt>191&&kt<224)Bt=(kt&31)<<6|_t[At++]&63;else if(kt>239&&kt<365){Bt=((kt&7)<<18|(_t[At++]&63)<<12|(_t[At++]&63)<<6|_t[At++]&63)-65536;const jt=SURROGATE_A|Bt>>10&1023;xt+=String.fromCharCode(jt),Bt=SURROGATE_B|Bt&1023}else Bt=(kt&15)<<12|(_t[At++]&63)<<6|_t[At++]&63;xt+=String.fromCharCode(Bt)}return decode$1.bytes=$t-e,xt}decode$1.bytes=0;const isU8Arr=_t=>_t instanceof Uint8Array;function bytelength(_t){return typeof _t=="string"?encodingLength$1(_t):_t.byteLength}function from(_t){return _t instanceof Uint8Array?_t:Array.isArray(_t)?new Uint8Array(_t):encode$1(_t)}function write(_t,e,$t){if(typeof e!="string")throw new Error("unknown input type");return encode$1(e,_t,$t),encode$1.bytes}const hexNum={},numHex=new Array(255);for(let _t=0;_t<=15;_t+=1){const e=_t.toString(16),$t=e.toUpperCase();for(let xt=0;xt<=15;xt+=1){const At=xt.toString(16),kt=At.toUpperCase(),Bt=_t<<4|xt,jt=`${e}${At}`;numHex[Bt]=jt,hexNum[jt]=Bt,hexNum[`${$t}${At}`]=Bt,hexNum[`${e}${kt}`]=Bt,hexNum[`${$t}${kt}`]=Bt}}function toHex(_t,e,$t){let xt="";for(let At=e;At<$t;){const kt=_t[At++];xt+=numHex[kt]}return xt}function hexLength(_t){return _t.length>>>1}function writeHex(_t,e,$t,xt){let At=0;for(;$t<xt;){const kt=e.substr(At,2),Bt=hexNum[kt];if(Bt===void 0)return;_t[$t++]=Bt,At+=2}return _t}const P_24=Math.pow(2,24),P_16=Math.pow(2,16),P_8=Math.pow(2,8),readUInt32BE=(_t,e)=>_t[e]*P_24+_t[e+1]*P_16+_t[e+2]*P_8+_t[e+3],readUInt16BE=(_t,e)=>_t[e]<<8|_t[e+1],writeUInt32BE=(_t,e,$t)=>(e=+e,_t[$t+3]=e,e=e>>>8,_t[$t+2]=e,e=e>>>8,_t[$t+1]=e,e=e>>>8,_t[$t]=e,$t+4),writeUInt16BE=(_t,e,$t)=>(_t[$t]=e>>8,_t[$t+1]=e&255,$t+2);function copy(_t,e,$t,xt,At){return $t<0&&(xt-=$t,$t=0),xt<0&&(xt=0),At<0?new Uint8Array(0):$t>=e.length||xt>=At?0:_copyActual(_t,e,$t,xt,At)}function _copyActual(_t,e,$t,xt,At){At-xt>e.length-$t&&(At=xt+e.length-$t);let kt=At-xt;const Bt=_t.length-xt;return kt>Bt&&(kt=Bt),(xt!==0||At<_t.length)&&(_t=new Uint8Array(_t.buffer,_t.byteOffset+xt,kt)),e.set(_t,$t),kt}const QUERY_FLAG=0,RESPONSE_FLAG=32768,FLUSH_MASK=32768,NOT_FLUSH_MASK=~FLUSH_MASK,QU_MASK=32768,NOT_QU_MASK=~QU_MASK;function codec({bytes:_t=0,encode:e,decode:$t,encodingLength:xt}){return e.bytes=_t,$t.bytes=_t,{encode:e,decode:$t,encodingLength:xt||(()=>_t)}}const name=codec({encode(_t,e,$t){e||(e=new Uint8Array(name.encodingLength(_t))),$t||($t=0);const xt=$t,At=_t.replace(/^\.|\.$/gm,"");if(At.length){const kt=At.split(".");for(let Bt=0;Bt<kt.length;Bt++){const jt=write(e,kt[Bt],$t+1);e[$t]=jt,$t+=jt+1}}return e[$t++]=0,name.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=[];let xt=e,At=0,kt=0,Bt=!1;for(;;){if(e>=_t.length)throw new Error("Cannot decode name (buffer overflow)");const jt=_t[e++];if(kt+=Bt?0:1,jt===0)break;if(jt&192)if((jt&192)===192){if(e+1>_t.length)throw new Error("Cannot decode name (buffer overflow)");const Lt=readUInt16BE(_t,e-1)-49152;if(Lt>=xt)throw new Error("Cannot decode name (bad pointer)");e=Lt,xt=Lt,kt+=Bt?0:1,Bt=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+jt>_t.length)throw new Error("Cannot decode name (buffer overflow)");if(At+=jt+1,At>254)throw new Error("Cannot decode name (name too long)");$t.push(decode$1(_t,e,e+jt)),e+=jt,kt+=Bt?0:jt}}return name.decode.bytes=kt,$t.length===0?".":$t.join(".")},encodingLength(_t){return _t==="."||_t===".."?1:bytelength(_t.replace(/^\.|\.$/gm,""))+2}}),string=codec({encode(_t,e,$t){e||(e=new Uint8Array(string.encodingLength(_t))),$t||($t=0);const xt=write(e,_t,$t+1);return e[$t]=xt,string.encode.bytes=xt+1,e},decode(_t,e){e||(e=0);const $t=_t[e],xt=decode$1(_t,e+1,e+1+$t);return string.decode.bytes=$t+1,xt},encodingLength(_t){return bytelength(_t)+1}}),header=codec({bytes:12,encode(_t,e,$t){e||(e=new Uint8Array(header.encodingLength(_t))),$t||($t=0);const xt=(_t.flags||0)&32767,At=_t.type==="response"?RESPONSE_FLAG:QUERY_FLAG;return writeUInt16BE(e,_t.id||0,$t),writeUInt16BE(e,xt|At,$t+2),writeUInt16BE(e,_t.questions.length,$t+4),writeUInt16BE(e,_t.answers.length,$t+6),writeUInt16BE(e,_t.authorities.length,$t+8),writeUInt16BE(e,_t.additionals.length,$t+10),e},decode(_t,e){if(e||(e=0),_t.length<12)throw new Error("Header must be 12 bytes");const $t=readUInt16BE(_t,e+2);return{id:readUInt16BE(_t,e),type:$t&RESPONSE_FLAG?"response":"query",flags:$t&32767,flag_qr:($t>>15&1)===1,opcode:toString$2($t>>11&15),flag_aa:($t>>10&1)===1,flag_tc:($t>>9&1)===1,flag_rd:($t>>8&1)===1,flag_ra:($t>>7&1)===1,flag_z:($t>>6&1)===1,flag_ad:($t>>5&1)===1,flag_cd:($t>>4&1)===1,rcode:toString$3($t&15),questions:new Array(readUInt16BE(_t,e+4)),answers:new Array(readUInt16BE(_t,e+6)),authorities:new Array(readUInt16BE(_t,e+8)),additionals:new Array(readUInt16BE(_t,e+10))}},encodingLength(){return 12}}),runknown=codec({encode(_t,e,$t){e||(e=new Uint8Array(runknown.encodingLength(_t))),$t||($t=0);const xt=_t.length;return writeUInt16BE(e,xt,$t),copy(_t,e,$t+2,0,xt),runknown.encode.bytes=xt+2,e},decode(_t,e){e||(e=0);const $t=readUInt16BE(_t,e),xt=_t.slice(e+2,e+2+$t);return runknown.decode.bytes=$t+2,xt},encodingLength(_t){return _t.length+2}}),rns=codec({encode(_t,e,$t){return e||(e=new Uint8Array(rns.encodingLength(_t))),$t||($t=0),name.encode(_t,e,$t+2),writeUInt16BE(e,name.encode.bytes,$t),rns.encode.bytes=name.encode.bytes+2,e},decode(_t,e){e||(e=0);const $t=readUInt16BE(_t,e),xt=name.decode(_t,e+2);return rns.decode.bytes=$t+2,xt},encodingLength(_t){return name.encodingLength(_t)+2}}),rsoa=codec({encode(_t,e,$t){e||(e=new Uint8Array(rsoa.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,name.encode(_t.mname,e,$t),$t+=name.encode.bytes,name.encode(_t.rname,e,$t),$t+=name.encode.bytes,writeUInt32BE(e,_t.serial||0,$t),$t+=4,writeUInt32BE(e,_t.refresh||0,$t),$t+=4,writeUInt32BE(e,_t.retry||0,$t),$t+=4,writeUInt32BE(e,_t.expire||0,$t),$t+=4,writeUInt32BE(e,_t.minimum||0,$t),$t+=4,writeUInt16BE(e,$t-xt-2,xt),rsoa.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e,xt={};return e+=2,xt.mname=name.decode(_t,e),e+=name.decode.bytes,xt.rname=name.decode(_t,e),e+=name.decode.bytes,xt.serial=readUInt32BE(_t,e),e+=4,xt.refresh=readUInt32BE(_t,e),e+=4,xt.retry=readUInt32BE(_t,e),e+=4,xt.expire=readUInt32BE(_t,e),e+=4,xt.minimum=readUInt32BE(_t,e),e+=4,rsoa.decode.bytes=e-$t,xt},encodingLength(_t){return 22+name.encodingLength(_t.mname)+name.encodingLength(_t.rname)}}),rtxt=codec({encode(_t,e,$t){Array.isArray(_t)||(_t=[_t]);for(let At=0;At<_t.length;At++)if(typeof _t[At]=="string"&&(_t[At]=from(_t[At])),!isU8Arr(_t[At]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(rtxt.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,_t.forEach(function(At){e[$t++]=At.length,copy(At,e,$t,0,At.length),$t+=At.length}),writeUInt16BE(e,$t-xt-2,xt),rtxt.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e;let xt=readUInt16BE(_t,e);e+=2;const At=[];for(;xt>0;){const kt=_t[e++];if(--xt,xt<kt)throw new Error("Buffer overflow");At.push(_t.slice(e,e+kt)),e+=kt,xt-=kt}return rtxt.decode.bytes=e-$t,At},encodingLength(_t){Array.isArray(_t)||(_t=[_t]);let e=2;return _t.forEach(function($t){typeof $t=="string"?e+=bytelength($t)+1:e+=$t.length+1}),e}}),rnull=codec({encode(_t,e,$t){e||(e=new Uint8Array(rnull.encodingLength(_t))),$t||($t=0),typeof _t=="string"&&(_t=from(_t)),_t||(_t=new Uint8Array(0));const xt=$t;$t+=2;const At=_t.length;return copy(_t,e,$t,0,At),$t+=At,writeUInt16BE(e,$t-xt-2,xt),rnull.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e,xt=readUInt16BE(_t,e);e+=2;const At=_t.slice(e,e+xt);return e+=xt,rnull.decode.bytes=e-$t,At},encodingLength(_t){return _t?(isU8Arr(_t)?_t.length:bytelength(_t))+2:2}}),rhinfo=codec({encode(_t,e,$t){e||(e=new Uint8Array(rhinfo.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,string.encode(_t.cpu,e,$t),$t+=string.encode.bytes,string.encode(_t.os,e,$t),$t+=string.encode.bytes,writeUInt16BE(e,$t-xt-2,xt),rhinfo.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e,xt={};return e+=2,xt.cpu=string.decode(_t,e),e+=string.decode.bytes,xt.os=string.decode(_t,e),e+=string.decode.bytes,rhinfo.decode.bytes=e-$t,xt},encodingLength(_t){return string.encodingLength(_t.cpu)+string.encodingLength(_t.os)+2}}),rptr=codec({encode(_t,e,$t){return e||(e=new Uint8Array(rptr.encodingLength(_t))),$t||($t=0),name.encode(_t,e,$t+2),writeUInt16BE(e,name.encode.bytes,$t),rptr.encode.bytes=name.encode.bytes+2,e},decode(_t,e){e||(e=0);const $t=name.decode(_t,e+2);return rptr.decode.bytes=name.decode.bytes+2,$t},encodingLength(_t){return name.encodingLength(_t)+2}}),rsrv=codec({encode(_t,e,$t){e||(e=new Uint8Array(rsrv.encodingLength(_t))),$t||($t=0),writeUInt16BE(e,_t.priority||0,$t+2),writeUInt16BE(e,_t.weight||0,$t+4),writeUInt16BE(e,_t.port||0,$t+6),name.encode(_t.target,e,$t+8);const xt=name.encode.bytes+6;return writeUInt16BE(e,xt,$t),rsrv.encode.bytes=xt+2,e},decode(_t,e){e||(e=0);const $t=readUInt16BE(_t,e),xt={};return xt.priority=readUInt16BE(_t,e+2),xt.weight=readUInt16BE(_t,e+4),xt.port=readUInt16BE(_t,e+6),xt.target=name.decode(_t,e+8),rsrv.decode.bytes=$t+2,xt},encodingLength(_t){return 8+name.encodingLength(_t.target)}}),rcaa=codec({encode(_t,e,$t){const xt=rcaa.encodingLength(_t);return e||(e=new Uint8Array(rcaa.encodingLength(_t))),$t||($t=0),_t.issuerCritical&&(_t.flags=rcaa.ISSUER_CRITICAL),writeUInt16BE(e,xt-2,$t),$t+=2,e[$t]=_t.flags||0,$t+=1,string.encode(_t.tag,e,$t),$t+=string.encode.bytes,write(e,_t.value,$t),$t+=bytelength(_t.value),rcaa.encode.bytes=xt,e},decode(_t,e){e||(e=0);const $t=readUInt16BE(_t,e);e+=2;const xt=e,At={};return At.flags=_t[e],e+=1,At.tag=string.decode(_t,e),e+=string.decode.bytes,At.value=decode$1(_t,e,xt+$t),At.issuerCritical=!!(At.flags&rcaa.ISSUER_CRITICAL),rcaa.decode.bytes=$t+2,At},encodingLength(_t){return string.encodingLength(_t.tag)+string.encodingLength(_t.value)+2}});rcaa.ISSUER_CRITICAL=128;const rmx=codec({encode(_t,e,$t){e||(e=new Uint8Array(rmx.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,writeUInt16BE(e,_t.preference||0,$t),$t+=2,name.encode(_t.exchange,e,$t),$t+=name.encode.bytes,writeUInt16BE(e,$t-xt-2,xt),rmx.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e,xt={};return e+=2,xt.preference=readUInt16BE(_t,e),e+=2,xt.exchange=name.decode(_t,e),e+=name.decode.bytes,rmx.decode.bytes=e-$t,xt},encodingLength(_t){return 4+name.encodingLength(_t.exchange)}}),ra=codec({encode(_t,e,$t){return e||(e=new Uint8Array(ra.encodingLength(_t))),$t||($t=0),writeUInt16BE(e,4,$t),$t+=2,v4.encode(_t,e,$t),e},decode(_t,e){return e||(e=0),e+=2,v4.decode(_t,e)},bytes:6}),raaaa=codec({encode(_t,e,$t){return e||(e=new Uint8Array(raaaa.encodingLength(_t))),$t||($t=0),writeUInt16BE(e,16,$t),$t+=2,v6.encode(_t,e,$t),raaaa.encode.bytes=18,e},decode(_t,e){e||(e=0),e+=2;const $t=v6.decode(_t,e);return raaaa.decode.bytes=18,$t},bytes:18}),alloc=_t=>new Uint8Array(_t),roption=codec({encode(_t,e,$t){e||(e=new Uint8Array(roption.encodingLength(_t))),$t||($t=0);const xt=$t,At=toCode(_t.code);if(writeUInt16BE(e,At,$t),$t+=2,_t.data)writeUInt16BE(e,_t.data.length,$t),$t+=2,copy(_t.data,e,$t),$t+=_t.data.length;else switch(At){case 8:{const kt=_t.sourcePrefixLength||0,Bt=_t.family||familyOf(_t.ip),jt=encode$2(_t.ip,alloc),Lt=Math.ceil(kt/8);writeUInt16BE(e,Lt+4,$t),$t+=2,writeUInt16BE(e,Bt,$t),$t+=2,e[$t++]=kt,e[$t++]=_t.scopePrefixLength||0,copy(jt,e,$t,0,Lt),$t+=Lt}break;case 11:_t.timeout?(writeUInt16BE(e,2,$t),$t+=2,writeUInt16BE(e,_t.timeout,$t),$t+=2):(writeUInt16BE(e,0,$t),$t+=2);break;case 12:{const kt=_t.length||0;writeUInt16BE(e,kt,$t),$t+=2,e.fill(0,$t,$t+kt),$t+=kt}break;case 14:{const kt=_t.tags.length*2;writeUInt16BE(e,kt,$t),$t+=2;for(const Bt of _t.tags)writeUInt16BE(e,Bt,$t),$t+=2}break;default:throw new Error(`Unknown roption code: ${_t.code}`)}return roption.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t={};$t.code=readUInt16BE(_t,e),$t.type=toString($t.code),e+=2;const xt=readUInt16BE(_t,e);switch(e+=2,$t.data=_t.slice(e,e+xt),$t.code){case 8:$t.family=readUInt16BE(_t,e),e+=2,$t.sourcePrefixLength=_t[e++],$t.scopePrefixLength=_t[e++];{const At=new Uint8Array($t.family===1?4:16);copy(_t,At,0,e,e+xt-4),$t.ip=decode$2(At)}break;case 11:xt>0&&($t.timeout=readUInt16BE(_t,e),e+=2);break;case 14:$t.tags=[];for(let At=0;At<xt;At+=2)$t.tags.push(readUInt16BE(_t,e)),e+=2}return roption.decode.bytes=xt+4,$t},encodingLength(_t){if(_t.data)return _t.data.length+4;switch(toCode(_t.code)){case 8:{const $t=_t.sourcePrefixLength||0;return Math.ceil($t/8)+8}case 11:return typeof _t.timeout=="number"?6:4;case 12:return _t.length+4;case 14:return 4+_t.tags.length*2}throw new Error(`Unknown roption code: ${_t.code}`)}}),ropt=codec({encode(_t,e,$t){e||(e=new Uint8Array(ropt.encodingLength(_t))),$t||($t=0);const xt=$t,At=encodingLengthList(_t,roption);return writeUInt16BE(e,At,$t),$t=encodeList(_t,roption,e,$t+2),ropt.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t=e,xt=[];let At=readUInt16BE(_t,e);e+=2;let kt=0;for(;At>0;)xt[kt++]=roption.decode(_t,e),e+=roption.decode.bytes,At-=roption.decode.bytes;return ropt.decode.bytes=e-$t,xt},encodingLength(_t){return 2+encodingLengthList(_t||[],roption)}}),rdnskey=codec({encode(_t,e,$t){e||(e=new Uint8Array(rdnskey.encodingLength(_t))),$t||($t=0);const xt=$t,At=_t.key;if(!isU8Arr(At))throw new Error("Key must be a Buffer");return $t+=2,writeUInt16BE(e,_t.flags,$t),$t+=2,e[$t]=rdnskey.PROTOCOL_DNSSEC,$t+=1,e[$t]=_t.algorithm,$t+=1,copy(At,e,$t,0,At.length),$t+=At.length,rdnskey.encode.bytes=$t-xt,writeUInt16BE(e,rdnskey.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={},At=readUInt16BE(_t,e);if(e+=2,xt.flags=readUInt16BE(_t,e),e+=2,_t[e]!==rdnskey.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,xt.algorithm=_t[e],e+=1,xt.key=_t.slice(e,$t+At+2),e+=xt.key.length,rdnskey.decode.bytes=e-$t,xt},encodingLength(_t){return 6+bytelength(_t.key)}});rdnskey.PROTOCOL_DNSSEC=3;rdnskey.ZONE_KEY=128;rdnskey.SECURE_ENTRYPOINT=32768;const rrrsig=codec({encode(_t,e,$t){e||(e=new Uint8Array(rrrsig.encodingLength(_t))),$t||($t=0);const xt=$t,At=_t.signature;if(!isU8Arr(At))throw new Error("Signature must be a Buffer");return $t+=2,writeUInt16BE(e,toType(_t.typeCovered),$t),$t+=2,e[$t]=_t.algorithm,$t+=1,e[$t]=_t.labels,$t+=1,writeUInt32BE(e,_t.originalTTL,$t),$t+=4,writeUInt32BE(e,_t.expiration,$t),$t+=4,writeUInt32BE(e,_t.inception,$t),$t+=4,writeUInt16BE(e,_t.keyTag,$t),$t+=2,name.encode(_t.signersName,e,$t),$t+=name.encode.bytes,copy(At,e,$t,0,At.length),$t+=At.length,rrrsig.encode.bytes=$t-xt,writeUInt16BE(e,rrrsig.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={},At=readUInt16BE(_t,e);return e+=2,xt.typeCovered=toString$4(readUInt16BE(_t,e)),e+=2,xt.algorithm=_t[e],e+=1,xt.labels=_t[e],e+=1,xt.originalTTL=readUInt32BE(_t,e),e+=4,xt.expiration=readUInt32BE(_t,e),e+=4,xt.inception=readUInt32BE(_t,e),e+=4,xt.keyTag=readUInt16BE(_t,e),e+=2,xt.signersName=name.decode(_t,e),e+=name.decode.bytes,xt.signature=_t.slice(e,$t+At+2),e+=xt.signature.length,rrrsig.decode.bytes=e-$t,xt},encodingLength(_t){return 20+name.encodingLength(_t.signersName)+bytelength(_t.signature)}}),rrp=codec({encode(_t,e,$t){e||(e=new Uint8Array(rrp.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,name.encode(_t.mbox||".",e,$t),$t+=name.encode.bytes,name.encode(_t.txt||".",e,$t),$t+=name.encode.bytes,rrp.encode.bytes=$t-xt,writeUInt16BE(e,rrp.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={};return e+=2,xt.mbox=name.decode(_t,e)||".",e+=name.decode.bytes,xt.txt=name.decode(_t,e)||".",e+=name.decode.bytes,rrp.decode.bytes=e-$t,xt},encodingLength(_t){return 2+name.encodingLength(_t.mbox||".")+name.encodingLength(_t.txt||".")}}),typebitmap=codec({encode(_t,e,$t){e||(e=new Uint8Array(typebitmap.encodingLength(_t))),$t||($t=0);const xt=$t,At=[];for(let kt=0;kt<_t.length;kt++){const Bt=toType(_t[kt]);At[Bt>>8]===void 0&&(At[Bt>>8]=[]),At[Bt>>8][Bt>>3&31]|=1<<7-(Bt&7)}for(let kt=0;kt<At.length;kt++)if(At[kt]!==void 0){const Bt=from(At[kt]);e[$t]=kt,$t+=1,e[$t]=Bt.length,$t+=1,copy(Bt,e,$t,0,Bt.length),$t+=Bt.length}return typebitmap.encode.bytes=$t-xt,e},decode(_t,e,$t){e||(e=0);const xt=e,At=[];for(;e-xt<$t;){const kt=_t[e];e+=1;const Bt=_t[e];e+=1;for(let jt=0;jt<Bt;jt++){const Lt=_t[e+jt];for(let Ut=0;Ut<8;Ut++)if(Lt&1<<7-Ut){const Nt=toString$4(kt<<8|jt<<3|Ut);At.push(Nt)}}e+=Bt}return typebitmap.decode.bytes=e-xt,At},encodingLength(_t){const e=[];for(let xt=0;xt<_t.length;xt++){const At=toType(_t[xt]);e[At>>8]=Math.max(e[At>>8]||0,At&255)}let $t=0;for(let xt=0;xt<e.length;xt++)e[xt]!==void 0&&($t+=2+Math.ceil((e[xt]+1)/8));return $t}}),rnsec=codec({encode(_t,e,$t){e||(e=new Uint8Array(rnsec.encodingLength(_t))),$t||($t=0);const xt=$t;return $t+=2,name.encode(_t.nextDomain,e,$t),$t+=name.encode.bytes,typebitmap.encode(_t.rrtypes,e,$t),$t+=typebitmap.encode.bytes,rnsec.encode.bytes=$t-xt,writeUInt16BE(e,rnsec.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={},At=readUInt16BE(_t,e);return e+=2,xt.nextDomain=name.decode(_t,e),e+=name.decode.bytes,xt.rrtypes=typebitmap.decode(_t,e,At-(e-$t)),e+=typebitmap.decode.bytes,rnsec.decode.bytes=e-$t,xt},encodingLength(_t){return 2+name.encodingLength(_t.nextDomain)+typebitmap.encodingLength(_t.rrtypes)}}),rnsec3=codec({encode(_t,e,$t){e||(e=new Uint8Array(rnsec3.encodingLength(_t))),$t||($t=0);const xt=$t,At=_t.salt;if(!isU8Arr(At))throw new Error("salt must be a Buffer");const kt=_t.nextDomain;if(!isU8Arr(kt))throw new Error("nextDomain must be a Buffer");return $t+=2,e[$t]=_t.algorithm,$t+=1,e[$t]=_t.flags,$t+=1,writeUInt16BE(e,_t.iterations,$t),$t+=2,e[$t]=At.length,$t+=1,copy(At,e,$t,0,At.length),$t+=At.length,e[$t]=kt.length,$t+=1,copy(kt,e,$t,0,kt.length),$t+=kt.length,typebitmap.encode(_t.rrtypes,e,$t),$t+=typebitmap.encode.bytes,rnsec3.encode.bytes=$t-xt,writeUInt16BE(e,rnsec3.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={},At=readUInt16BE(_t,e);e+=2,xt.algorithm=_t[e],e+=1,xt.flags=_t[e],e+=1,xt.iterations=readUInt16BE(_t,e),e+=2;const kt=_t[e];e+=1,xt.salt=_t.slice(e,e+kt),e+=kt;const Bt=_t[e];return e+=1,xt.nextDomain=_t.slice(e,e+Bt),e+=Bt,xt.rrtypes=typebitmap.decode(_t,e,At-(e-$t)),e+=typebitmap.decode.bytes,rnsec3.decode.bytes=e-$t,xt},encodingLength(_t){return 8+_t.salt.length+_t.nextDomain.length+typebitmap.encodingLength(_t.rrtypes)}}),rds=codec({encode(_t,e,$t){e||(e=new Uint8Array(rds.encodingLength(_t))),$t||($t=0);const xt=$t,At=_t.digest;if(!isU8Arr(At))throw new Error("Digest must be a Buffer");return $t+=2,writeUInt16BE(e,_t.keyTag,$t),$t+=2,e[$t]=_t.algorithm,$t+=1,e[$t]=_t.digestType,$t+=1,copy(At,e,$t,0,At.length),$t+=At.length,rds.encode.bytes=$t-xt,writeUInt16BE(e,rds.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={},At=readUInt16BE(_t,e);return e+=2,xt.keyTag=readUInt16BE(_t,e),e+=2,xt.algorithm=_t[e],e+=1,xt.digestType=_t[e],e+=1,xt.digest=_t.slice(e,$t+At+2),e+=xt.digest.length,rds.decode.bytes=e-$t,xt},encodingLength(_t){return 6+bytelength(_t.digest)}}),rsshfp=codec({encode(_t,e,$t){e||(e=new Uint8Array(rsshfp.encodingLength(_t))),$t||($t=0);const xt=$t;$t+=2,e[$t]=_t.algorithm,$t+=1,e[$t]=_t.hash,$t+=1;const At=hexLength(_t.fingerprint),kt=getFingerprintLengthForHashType(_t.hash);if(At!==kt)throw new Error(`Invalid length of fingerprint "${_t.fingerprint}" for hashType=${_t.hash}: ${At} != ${kt}`);return writeHex(e,_t.fingerprint,$t,$t+=At),rsshfp.encode.bytes=$t-xt,writeUInt16BE(e,rsshfp.encode.bytes-2,xt),e},decode(_t,e){e||(e=0);const $t=e,xt={};e+=2,xt.algorithm=_t[e],e+=1,xt.hash=_t[e],e+=1;const At=getFingerprintLengthForHashType(xt.hash);return xt.fingerprint=toHex(_t,e,e+At),e+=At,rsshfp.decode.bytes=e-$t,xt},encodingLength(_t){return 4+hexLength(_t.fingerprint)}});function getFingerprintLengthForHashType(_t){if(_t===1)return 20;if(_t===2)return 32;throw new Error(`Invalid hashType=${_t}, supported=1,2`)}rsshfp.getFingerprintLengthForHashType=getFingerprintLengthForHashType;function renc(_t){switch(_t.toUpperCase()){case"A":return ra;case"PTR":return rptr;case"CNAME":return rptr;case"DNAME":return rptr;case"TXT":return rtxt;case"NULL":return rnull;case"AAAA":return raaaa;case"SRV":return rsrv;case"HINFO":return rhinfo;case"CAA":return rcaa;case"NS":return rns;case"SOA":return rsoa;case"MX":return rmx;case"OPT":return ropt;case"DNSKEY":return rdnskey;case"RRSIG":return rrrsig;case"RP":return rrp;case"NSEC":return rnsec;case"NSEC3":return rnsec3;case"SSHFP":return rsshfp;case"DS":return rds}return runknown}const answer=codec({encode(_t,e,$t){e||(e=new Uint8Array(answer.encodingLength(_t))),$t||($t=0);const xt=$t;if(name.encode(_t.name,e,$t),$t+=name.encode.bytes,writeUInt16BE(e,toType(_t.type),$t),_t.type.toUpperCase()==="OPT"){if(_t.name!==".")throw new Error("OPT name must be root.");writeUInt16BE(e,_t.udpPayloadSize||4096,$t+2),e[$t+4]=_t.extendedRcode||0,e[$t+5]=_t.ednsVersion||0,writeUInt16BE(e,_t.flags||0,$t+6),$t+=8,ropt.encode(_t.options||[],e,$t),$t+=ropt.encode.bytes}else{let At=toClass(_t.class===void 0?"IN":_t.class);_t.flush&&(At|=FLUSH_MASK),writeUInt16BE(e,At,$t+2),writeUInt32BE(e,_t.ttl||0,$t+4),$t+=8;const kt=renc(_t.type);kt.encode(_t.data,e,$t),$t+=kt.encode.bytes}return answer.encode.bytes=$t-xt,e},decode(_t,e){e||(e=0);const $t={},xt=e;if($t.name=name.decode(_t,e),e+=name.decode.bytes,$t.type=toString$4(readUInt16BE(_t,e)),$t.type==="OPT")$t.udpPayloadSize=readUInt16BE(_t,e+2),$t.extendedRcode=_t[e+4],$t.ednsVersion=_t[e+5],$t.flags=readUInt16BE(_t,e+6),$t.flag_do=($t.flags>>15&1)===1,$t.options=ropt.decode(_t,e+8),e+=8+ropt.decode.bytes;else{const At=readUInt16BE(_t,e+2);$t.ttl=readUInt32BE(_t,e+4),$t.class=toString$1(At&NOT_FLUSH_MASK),$t.flush=!!(At&FLUSH_MASK);const kt=renc($t.type);$t.data=kt.decode(_t,e+8),e+=8+kt.decode.bytes}return answer.decode.bytes=e-xt,$t},encodingLength(_t){const e=_t.data!==null&&_t.data!==void 0?_t.data:_t.options;return name.encodingLength(_t.name)+8+renc(_t.type).encodingLength(e)}}),question=codec({encode(_t,e,$t){e||(e=new Uint8Array(question.encodingLength(_t))),$t||($t=0);const xt=$t;return name.encode(_t.name,e,$t),$t+=name.encode.bytes,writeUInt16BE(e,toType(_t.type),$t),$t+=2,writeUInt16BE(e,toClass(_t.class===void 0?"IN":_t.class),$t),$t+=2,question.encode.bytes=$t-xt,_t},decode(_t,e){e||(e=0);const $t=e,xt={};return xt.name=name.decode(_t,e),e+=name.decode.bytes,xt.type=toString$4(readUInt16BE(_t,e)),e+=2,xt.class=toString$1(readUInt16BE(_t,e)),e+=2,!!(xt.class&QU_MASK)&&(xt.class&=NOT_QU_MASK),question.decode.bytes=e-$t,xt},encodingLength(_t){return name.encodingLength(_t.name)+4}}),AUTHORITATIVE_ANSWER=1024,packet={encode:function(_t,e,$t){const xt=!e;xt&&(e=new Uint8Array(encodingLength(_t))),$t||($t=0);const At=$t;return _t.questions||(_t.questions=[]),_t.answers||(_t.answers=[]),_t.authorities||(_t.authorities=[]),_t.additionals||(_t.additionals=[]),header.encode(_t,e,$t),$t+=header.encode.bytes,$t=encodeList(_t.questions,question,e,$t),$t=encodeList(_t.answers,answer,e,$t),$t=encodeList(_t.authorities,answer,e,$t),$t=encodeList(_t.additionals,answer,e,$t),packet.encode.bytes=$t-At,xt&&encode.bytes!==e.length?e.slice(0,encode.bytes):e},decode:function(_t,e){e||(e=0);const $t=e,xt=header.decode(_t,e);return e+=header.decode.bytes,e=decodeList(xt.questions,question,_t,e),e=decodeList(xt.answers,answer,_t,e),e=decodeList(xt.authorities,answer,_t,e),e=decodeList(xt.additionals,answer,_t,e),packet.decode.bytes=e-$t,xt},encodingLength:function(_t){return header.encodingLength(_t)+encodingLengthList(_t.questions||[],question)+encodingLengthList(_t.answers||[],answer)+encodingLengthList(_t.authorities||[],answer)+encodingLengthList(_t.additionals||[],answer)}};packet.encode.bytes=0;packet.decode.bytes=0;const encode=packet.encode,decode=packet.decode,encodingLength=packet.encodingLength;function encodingLengthList(_t,e){let $t=0;for(let xt=0;xt<_t.length;xt++)$t+=e.encodingLength(_t[xt]);return $t}function encodeList(_t,e,$t,xt){for(let At=0;At<_t.length;At++)e.encode(_t[At],$t,xt),xt+=e.encode.bytes;return xt}function decodeList(_t,e,$t,xt){for(let At=0;At<_t.length;At++)_t[At]=e.decode($t,xt),xt+=e.decode.bytes;return xt}var DidDhtRegisteredDidType$2;(function(_t){_t[_t.Discoverable=0]="Discoverable",_t[_t.Organization=1]="Organization",_t[_t.Government=2]="Government",_t[_t.Corporation=3]="Corporation",_t[_t.LocalBusiness=4]="LocalBusiness",_t[_t.SoftwarePackage=5]="SoftwarePackage",_t[_t.WebApp=6]="WebApp",_t[_t.FinancialInstitution=7]="FinancialInstitution"})(DidDhtRegisteredDidType$2||(DidDhtRegisteredDidType$2={}));var DidDhtRegisteredKeyType$2;(function(_t){_t[_t.Ed25519=0]="Ed25519",_t[_t.secp256k1=1]="secp256k1",_t[_t.secp256r1=2]="secp256r1",_t[_t.X25519=3]="X25519"})(DidDhtRegisteredKeyType$2||(DidDhtRegisteredKeyType$2={}));var DidDhtVerificationRelationship$2;(function(_t){_t.authentication="auth",_t.assertionMethod="asm",_t.capabilityDelegation="del",_t.capabilityInvocation="inv",_t.keyAgreement="agm"})(DidDhtVerificationRelationship$2||(DidDhtVerificationRelationship$2={}));DidDhtRegisteredKeyType$2.Ed25519,DidDhtRegisteredKeyType$2.secp256k1,DidDhtRegisteredKeyType$2.secp256r1,DidDhtRegisteredKeyType$2.secp256r1,DidDhtRegisteredKeyType$2.secp256k1,DidDhtRegisteredKeyType$2.secp256r1,DidDhtRegisteredKeyType$2.X25519;DidDhtRegisteredKeyType$2.Ed25519+"",DidDhtRegisteredKeyType$2.secp256k1+"",DidDhtRegisteredKeyType$2.secp256r1+"",DidDhtRegisteredKeyType$2.X25519+"";const ErrorCode={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};class IonError extends Error{constructor(e,$t){super(`${e}: ${$t}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}class Encoder{static encode(e){return base64url.baseEncode(e)}static decodeAsBytes(e,$t){if(!Encoder.isBase64UrlString(e))throw new IonError(ErrorCode.EncodedStringIncorrectEncoding,`Given ${$t} must be base64url string.`);return base64url.baseDecode(e)}static decodeAsString(e,$t){const xt=Encoder.decodeAsBytes(e,$t);return Encoder.bytesToString(xt)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}}var OperationKeyType;(function(_t){_t.Public="public",_t.Private="private"})(OperationKeyType||(OperationKeyType={}));const OperationKeyType$1=OperationKeyType;class InputValidator{static validateEs256kOperationKey(e,$t){const xt=new Set(["kty","crv","x","y"]);$t===OperationKeyType$1.Private&&xt.add("d");for(const At in e)if(!xt.has(At))throw new IonError(ErrorCode.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${At}'.`);if(e.crv!=="secp256k1")throw new IonError(ErrorCode.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new IonError(ErrorCode.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new IonError(ErrorCode.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new IonError(ErrorCode.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if($t===OperationKeyType$1.Private&&(e.d===void 0||e.d.length!==43))throw new IonError(ErrorCode.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new IonError(ErrorCode.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Encoder.isBase64UrlString(e))throw new IonError(ErrorCode.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;const $t=new Set;for(const xt of e){if($t.has(xt))throw new IonError(ErrorCode.PublicKeyPurposeDuplicated,`Public key purpose '${xt}' already specified.`);$t.add(xt)}}}class IonSdkConfig{}IonSdkConfig.hashAlgorithmInMultihashCode=18;IonSdkConfig.maxCanonicalizedDeltaSizeInBytes=1e3;var canonicalize$1=function _t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?_t(e.toJSON()):Array.isArray(e)?`[${e.reduce((At,kt,Bt)=>`${At}${Bt===0?"":","}${_t(kt===void 0||typeof kt=="symbol"?null:kt)}`,"")}]`:`{${Object.keys(e).sort().reduce((xt,At)=>{if(e[At]===void 0||typeof e[At]=="symbol")return xt;const kt=xt.length===0?"":",";return`${xt}${kt}${_t(At)}:${_t(e[At])}`},"")}}`};const canonicalize$2=getDefaultExportFromCjs(canonicalize$1);class JsonCanonicalizer{static canonicalizeAsBytes(e){const $t=JsonCanonicalizer.removeAllUndefinedProperties(e),xt=canonicalize$2($t);return Encoder.stringToBytes(xt)}static removeAllUndefinedProperties(e){for(const $t in e)typeof e[$t]=="object"?JsonCanonicalizer.removeAllUndefinedProperties(e[$t]):e[$t]===void 0&&delete e[$t];return e}}var __awaiter$l=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Multihash{static hash(e,$t){return __awaiter$l(this,void 0,void 0,function*(){let xt;switch($t){case 18:xt=(yield sha256$4.digest(e)).bytes;break;default:throw new IonError(ErrorCode.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${$t} is not supported.`)}return xt})}static hashAsNonMultihashBytes(e,$t){return __awaiter$l(this,void 0,void 0,function*(){let xt;switch($t){case 18:xt=yield sha256$4.encode(e);break;default:throw new IonError(ErrorCode.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${$t} is not supported.`)}return xt})}static canonicalizeThenHashThenEncode(e,$t){return __awaiter$l(this,void 0,void 0,function*(){const xt=JsonCanonicalizer.canonicalizeAsBytes(e);return yield Multihash.hashThenEncode(xt,$t)})}static canonicalizeThenDoubleHashThenEncode(e,$t){return __awaiter$l(this,void 0,void 0,function*(){const xt=JsonCanonicalizer.canonicalizeAsBytes(e),At=yield Multihash.hashAsNonMultihashBytes(xt,$t);return yield Multihash.hashThenEncode(At,$t)})}static hashThenEncode(e,$t){return __awaiter$l(this,void 0,void 0,function*(){const xt=yield Multihash.hash(e,$t);return Encoder.encode(xt)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,$t){let xt;const At=Encoder.decodeAsBytes(e,$t);try{xt=decode$b(At)}catch{throw new IonError(ErrorCode.MultihashStringNotAMultihash,`Given ${$t} string '${e}' is not a multihash after decoding.`)}const kt=IonSdkConfig.hashAlgorithmInMultihashCode;if(kt!==xt.code)throw new IonError(ErrorCode.MultihashUnsupportedHashAlgorithm,`Given ${$t} uses unsupported multihash algorithm with code ${xt.code}, should use ${kt} or change IonSdkConfig to desired hashing algorithm.`)}}var OperationType;(function(_t){_t.Create="create",_t.Update="update",_t.Deactivate="deactivate",_t.Recover="recover"})(OperationType||(OperationType={}));const OperationType$1=OperationType;var PatchAction;(function(_t){_t.Replace="replace",_t.AddPublicKeys="add-public-keys",_t.RemovePublicKeys="remove-public-keys",_t.AddServices="add-services",_t.RemoveServices="remove-services"})(PatchAction||(PatchAction={}));const PatchAction$1=PatchAction;var __awaiter$k=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class IonRequest{static createCreateRequest(e){return __awaiter$k(this,void 0,void 0,function*(){const $t=e.recoveryKey,xt=e.updateKey,At=e.document.publicKeys,kt=e.document.services;InputValidator.validateEs256kOperationKey($t,OperationKeyType$1.Public),InputValidator.validateEs256kOperationKey(xt,OperationKeyType$1.Public),IonRequest.validateDidDocumentKeys(At),IonRequest.validateServices(kt);const Bt=IonSdkConfig.hashAlgorithmInMultihashCode,jt=[{action:PatchAction$1.Replace,document:e.document}],Lt={updateCommitment:yield Multihash.canonicalizeThenDoubleHashThenEncode(xt,Bt),patches:jt};IonRequest.validateDeltaSize(Lt);const Nt={deltaHash:yield Multihash.canonicalizeThenHashThenEncode(Lt,Bt),recoveryCommitment:yield Multihash.canonicalizeThenDoubleHashThenEncode($t,Bt)};return{type:OperationType$1.Create,suffixData:Nt,delta:Lt}})}static createDeactivateRequest(e){return __awaiter$k(this,void 0,void 0,function*(){IonRequest.validateDidSuffix(e.didSuffix),InputValidator.validateEs256kOperationKey(e.recoveryPublicKey,OperationKeyType$1.Public);const $t=IonSdkConfig.hashAlgorithmInMultihashCode,xt=yield Multihash.canonicalizeThenHashThenEncode(e.recoveryPublicKey,$t),At={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},kt=yield e.signer.sign({alg:"ES256K"},At);return{type:OperationType$1.Deactivate,didSuffix:e.didSuffix,revealValue:xt,signedData:kt}})}static createRecoverRequest(e){return __awaiter$k(this,void 0,void 0,function*(){IonRequest.validateDidSuffix(e.didSuffix),InputValidator.validateEs256kOperationKey(e.recoveryPublicKey,OperationKeyType$1.Public),InputValidator.validateEs256kOperationKey(e.nextRecoveryPublicKey,OperationKeyType$1.Public),InputValidator.validateEs256kOperationKey(e.nextUpdatePublicKey,OperationKeyType$1.Public),IonRequest.validateDidDocumentKeys(e.document.publicKeys),IonRequest.validateServices(e.document.services);const $t=IonSdkConfig.hashAlgorithmInMultihashCode,xt=yield Multihash.canonicalizeThenHashThenEncode(e.recoveryPublicKey,$t),At=[{action:PatchAction$1.Replace,document:e.document}],kt=yield Multihash.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,$t),Bt={patches:At,updateCommitment:kt},jt=yield Multihash.canonicalizeThenHashThenEncode(Bt,$t),Ut={recoveryCommitment:yield Multihash.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,$t),recoveryKey:e.recoveryPublicKey,deltaHash:jt},Nt=yield e.signer.sign({alg:"ES256K"},Ut);return{type:OperationType$1.Recover,didSuffix:e.didSuffix,revealValue:xt,delta:Bt,signedData:Nt}})}static createUpdateRequest(e){return __awaiter$k(this,void 0,void 0,function*(){if(IonRequest.validateDidSuffix(e.didSuffix),InputValidator.validateEs256kOperationKey(e.updatePublicKey,OperationKeyType$1.Public),InputValidator.validateEs256kOperationKey(e.nextUpdatePublicKey,OperationKeyType$1.Public),IonRequest.validateServices(e.servicesToAdd),IonRequest.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(const Vt of e.idsOfServicesToRemove)InputValidator.validateId(Vt);if(e.idsOfPublicKeysToRemove!==void 0)for(const Vt of e.idsOfPublicKeysToRemove)InputValidator.validateId(Vt);const $t=[],xt=e.servicesToAdd;if(xt!==void 0&&xt.length>0){const Vt={action:PatchAction$1.AddServices,services:xt};$t.push(Vt)}const At=e.idsOfServicesToRemove;if(At!==void 0&&At.length>0){const Vt={action:PatchAction$1.RemoveServices,ids:At};$t.push(Vt)}const kt=e.publicKeysToAdd;if(kt!==void 0&&kt.length>0){const Vt={action:PatchAction$1.AddPublicKeys,publicKeys:kt};$t.push(Vt)}const Bt=e.idsOfPublicKeysToRemove;if(Bt!==void 0&&Bt.length>0){const Vt={action:PatchAction$1.RemovePublicKeys,ids:Bt};$t.push(Vt)}const jt=IonSdkConfig.hashAlgorithmInMultihashCode,Lt=yield Multihash.canonicalizeThenHashThenEncode(e.updatePublicKey,jt),Ut=yield Multihash.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,jt),Nt={patches:$t,updateCommitment:Ut},qt=yield Multihash.canonicalizeThenHashThenEncode(Nt,jt),Kt={updateKey:e.updatePublicKey,deltaHash:qt},zt=yield e.signer.sign({alg:"ES256K"},Kt);return{type:OperationType$1.Update,didSuffix:e.didSuffix,revealValue:Lt,delta:Nt,signedData:zt}})}static validateDidSuffix(e){Multihash.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;const $t=new Set;for(const xt of e){if(Array.isArray(xt.publicKeyJwk))throw new IonError(ErrorCode.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(InputValidator.validateId(xt.id),$t.has(xt.id))throw new IonError(ErrorCode.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${xt.id}' already exists.`);$t.add(xt.id),InputValidator.validatePublicKeyPurposes(xt.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){const $t=new Set;for(const xt of e){if(IonRequest.validateService(xt),$t.has(xt.id))throw new IonError(ErrorCode.DidDocumentServiceIdDuplicated,"Service id has to be unique");$t.add(xt.id)}}}static validateService(e){InputValidator.validateId(e.id);const $t=30;if(e.type.length>$t){const xt=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${$t}.`;throw new IonError(ErrorCode.ServiceTypeTooLong,xt)}if(Array.isArray(e.serviceEndpoint)){const xt="Service endpoint value cannot be an array.";throw new IonError(ErrorCode.ServiceEndpointCannotBeAnArray,xt)}if(typeof e.serviceEndpoint=="string"&&uri_allExports.parse(e.serviceEndpoint).error!==void 0)throw new IonError(ErrorCode.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){const $t=JsonCanonicalizer.canonicalizeAsBytes(e);if($t.length>IonSdkConfig.maxCanonicalizedDeltaSizeInBytes){const xt=`Delta of ${$t.length} bytes exceeded limit of ${IonSdkConfig.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new IonError(ErrorCode.DeltaExceedsMaximumSize,xt)}}}var __awaiter$j=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class IonDid{static createLongFormDid(e){return __awaiter$j(this,void 0,void 0,function*(){const $t=yield IonRequest.createCreateRequest(e),xt=yield IonDid.computeDidUniqueSuffix($t.suffixData);let At;IonSdkConfig.network===void 0||IonSdkConfig.network==="mainnet"?At=`did:ion:${xt}`:At=`did:ion:${IonSdkConfig.network}:${xt}`;const kt={suffixData:$t.suffixData,delta:$t.delta},Bt=JsonCanonicalizer.canonicalizeAsBytes(kt),jt=Encoder.encode(Bt);return`${At}:${jt}`})}static computeDidUniqueSuffix(e){return __awaiter$j(this,void 0,void 0,function*(){const $t=JsonCanonicalizer.canonicalizeAsBytes(e),xt=yield Multihash.hash($t,IonSdkConfig.hashAlgorithmInMultihashCode);return Encoder.encode(xt)})}}var IonNetwork;(function(_t){_t.Mainnet="mainnet",_t.Testnet="test"})(IonNetwork||(IonNetwork={}));var IonPublicKeyPurpose;(function(_t){_t.Authentication="authentication",_t.AssertionMethod="assertionMethod",_t.CapabilityInvocation="capabilityInvocation",_t.CapabilityDelegation="capabilityDelegation",_t.KeyAgreement="keyAgreement"})(IonPublicKeyPurpose||(IonPublicKeyPurpose={}));var DidIonRegisteredKeyType$2;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidIonRegisteredKeyType$2||(DidIonRegisteredKeyType$2={}));DidIonRegisteredKeyType$2.Ed25519,DidIonRegisteredKeyType$2.secp256k1,DidIonRegisteredKeyType$2.secp256r1,DidIonRegisteredKeyType$2.secp256r1,DidIonRegisteredKeyType$2.secp256k1,DidIonRegisteredKeyType$2.secp256r1;var DidKeyRegisteredKeyType$2;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidKeyRegisteredKeyType$2||(DidKeyRegisteredKeyType$2={}));DidKeyRegisteredKeyType$2.Ed25519,DidKeyRegisteredKeyType$2.secp256k1,DidKeyRegisteredKeyType$2.secp256r1,DidKeyRegisteredKeyType$2.secp256r1,DidKeyRegisteredKeyType$2.secp256k1,DidKeyRegisteredKeyType$2.secp256r1,DidKeyRegisteredKeyType$2.X25519;var __await$2=function(_t){return this instanceof __await$2?(this.v=_t,this):new __await$2(_t)},__await$1=function(_t){return this instanceof __await$1?(this.v=_t,this):new __await$1(_t)},eventemitter3={exports:{}};(function(_t){var e=Object.prototype.hasOwnProperty,$t="~";function xt(){}Object.create&&(xt.prototype=Object.create(null),new xt().__proto__||($t=!1));function At(Lt,Ut,Nt){this.fn=Lt,this.context=Ut,this.once=Nt||!1}function kt(Lt,Ut,Nt,qt,Kt){if(typeof Nt!="function")throw new TypeError("The listener must be a function");var zt=new At(Nt,qt||Lt,Kt),Vt=$t?$t+Ut:Ut;return Lt._events[Vt]?Lt._events[Vt].fn?Lt._events[Vt]=[Lt._events[Vt],zt]:Lt._events[Vt].push(zt):(Lt._events[Vt]=zt,Lt._eventsCount++),Lt}function Bt(Lt,Ut){--Lt._eventsCount===0?Lt._events=new xt:delete Lt._events[Ut]}function jt(){this._events=new xt,this._eventsCount=0}jt.prototype.eventNames=function(){var Ut=[],Nt,qt;if(this._eventsCount===0)return Ut;for(qt in Nt=this._events)e.call(Nt,qt)&&Ut.push($t?qt.slice(1):qt);return Object.getOwnPropertySymbols?Ut.concat(Object.getOwnPropertySymbols(Nt)):Ut},jt.prototype.listeners=function(Ut){var Nt=$t?$t+Ut:Ut,qt=this._events[Nt];if(!qt)return[];if(qt.fn)return[qt.fn];for(var Kt=0,zt=qt.length,Vt=new Array(zt);Kt<zt;Kt++)Vt[Kt]=qt[Kt].fn;return Vt},jt.prototype.listenerCount=function(Ut){var Nt=$t?$t+Ut:Ut,qt=this._events[Nt];return qt?qt.fn?1:qt.length:0},jt.prototype.emit=function(Ut,Nt,qt,Kt,zt,Vt){var Ht=$t?$t+Ut:Ut;if(!this._events[Ht])return!1;var Jt=this._events[Ht],rr=arguments.length,Qt,Wt;if(Jt.fn){switch(Jt.once&&this.removeListener(Ut,Jt.fn,void 0,!0),rr){case 1:return Jt.fn.call(Jt.context),!0;case 2:return Jt.fn.call(Jt.context,Nt),!0;case 3:return Jt.fn.call(Jt.context,Nt,qt),!0;case 4:return Jt.fn.call(Jt.context,Nt,qt,Kt),!0;case 5:return Jt.fn.call(Jt.context,Nt,qt,Kt,zt),!0;case 6:return Jt.fn.call(Jt.context,Nt,qt,Kt,zt,Vt),!0}for(Wt=1,Qt=new Array(rr-1);Wt<rr;Wt++)Qt[Wt-1]=arguments[Wt];Jt.fn.apply(Jt.context,Qt)}else{var nr=Jt.length,yr;for(Wt=0;Wt<nr;Wt++)switch(Jt[Wt].once&&this.removeListener(Ut,Jt[Wt].fn,void 0,!0),rr){case 1:Jt[Wt].fn.call(Jt[Wt].context);break;case 2:Jt[Wt].fn.call(Jt[Wt].context,Nt);break;case 3:Jt[Wt].fn.call(Jt[Wt].context,Nt,qt);break;case 4:Jt[Wt].fn.call(Jt[Wt].context,Nt,qt,Kt);break;default:if(!Qt)for(yr=1,Qt=new Array(rr-1);yr<rr;yr++)Qt[yr-1]=arguments[yr];Jt[Wt].fn.apply(Jt[Wt].context,Qt)}}return!0},jt.prototype.on=function(Ut,Nt,qt){return kt(this,Ut,Nt,qt,!1)},jt.prototype.once=function(Ut,Nt,qt){return kt(this,Ut,Nt,qt,!0)},jt.prototype.removeListener=function(Ut,Nt,qt,Kt){var zt=$t?$t+Ut:Ut;if(!this._events[zt])return this;if(!Nt)return Bt(this,zt),this;var Vt=this._events[zt];if(Vt.fn)Vt.fn===Nt&&(!Kt||Vt.once)&&(!qt||Vt.context===qt)&&Bt(this,zt);else{for(var Ht=0,Jt=[],rr=Vt.length;Ht<rr;Ht++)(Vt[Ht].fn!==Nt||Kt&&!Vt[Ht].once||qt&&Vt[Ht].context!==qt)&&Jt.push(Vt[Ht]);Jt.length?this._events[zt]=Jt.length===1?Jt[0]:Jt:Bt(this,zt)}return this},jt.prototype.removeAllListeners=function(Ut){var Nt;return Ut?(Nt=$t?$t+Ut:Ut,this._events[Nt]&&Bt(this,Nt)):(this._events=new xt,this._eventsCount=0),this},jt.prototype.off=jt.prototype.removeListener,jt.prototype.addListener=jt.prototype.on,jt.prefixed=$t,jt.EventEmitter=jt,_t.exports=jt})(eventemitter3);var __await=function(_t){return this instanceof __await?(this.v=_t,this):new __await(_t)},DwnInterface;(function(_t){_t.MessagesQuery="MessagesQuery",_t.MessagesRead="MessagesRead",_t.MessagesSubscribe="MessagesSubscribe",_t.ProtocolsConfigure="ProtocolsConfigure",_t.ProtocolsQuery="ProtocolsQuery",_t.RecordsDelete="RecordsDelete",_t.RecordsQuery="RecordsQuery",_t.RecordsRead="RecordsRead",_t.RecordsSubscribe="RecordsSubscribe",_t.RecordsWrite="RecordsWrite"})(DwnInterface||(DwnInterface={}));DwnInterface.MessagesQuery+"",DwnInterface.MessagesRead+"",DwnInterface.MessagesSubscribe+"",DwnInterface.ProtocolsConfigure+"",DwnInterface.ProtocolsQuery+"",DwnInterface.RecordsDelete+"",DwnInterface.RecordsQuery+"",DwnInterface.RecordsRead+"",DwnInterface.RecordsSubscribe+"",DwnInterface.RecordsWrite+"";var DidVerificationRelationship$1;(function(_t){_t.authentication="authentication",_t.assertionMethod="assertionMethod",_t.keyAgreement="keyAgreement",_t.capabilityInvocation="capabilityInvocation",_t.capabilityDelegation="capabilityDelegation"})(DidVerificationRelationship$1||(DidVerificationRelationship$1={}));var DidErrorCode$1;(function(_t){_t.InvalidDid="invalidDid",_t.MethodNotSupported="methodNotSupported",_t.InternalError="internalError",_t.InvalidDidDocument="invalidDidDocument",_t.InvalidDidDocumentLength="invalidDidDocumentLength",_t.InvalidDidUrl="invalidDidUrl",_t.InvalidPreviousDidProof="invalidPreviousDidProof",_t.InvalidPublicKey="invalidPublicKey",_t.InvalidPublicKeyLength="invalidPublicKeyLength",_t.InvalidPublicKeyType="invalidPublicKeyType",_t.InvalidSignature="invalidSignature",_t.NotFound="notFound",_t.RepresentationNotSupported="representationNotSupported",_t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(DidErrorCode$1||(DidErrorCode$1={}));var DidDhtRegisteredDidType$1;(function(_t){_t[_t.Discoverable=0]="Discoverable",_t[_t.Organization=1]="Organization",_t[_t.Government=2]="Government",_t[_t.Corporation=3]="Corporation",_t[_t.LocalBusiness=4]="LocalBusiness",_t[_t.SoftwarePackage=5]="SoftwarePackage",_t[_t.WebApp=6]="WebApp",_t[_t.FinancialInstitution=7]="FinancialInstitution"})(DidDhtRegisteredDidType$1||(DidDhtRegisteredDidType$1={}));var DidDhtRegisteredKeyType$1;(function(_t){_t[_t.Ed25519=0]="Ed25519",_t[_t.secp256k1=1]="secp256k1",_t[_t.secp256r1=2]="secp256r1",_t[_t.X25519=3]="X25519"})(DidDhtRegisteredKeyType$1||(DidDhtRegisteredKeyType$1={}));var DidDhtVerificationRelationship$1;(function(_t){_t.authentication="auth",_t.assertionMethod="asm",_t.capabilityDelegation="del",_t.capabilityInvocation="inv",_t.keyAgreement="agm"})(DidDhtVerificationRelationship$1||(DidDhtVerificationRelationship$1={}));DidDhtRegisteredKeyType$1.Ed25519,DidDhtRegisteredKeyType$1.secp256k1,DidDhtRegisteredKeyType$1.secp256r1,DidDhtRegisteredKeyType$1.secp256r1,DidDhtRegisteredKeyType$1.secp256k1,DidDhtRegisteredKeyType$1.secp256r1,DidDhtRegisteredKeyType$1.X25519;DidDhtRegisteredKeyType$1.Ed25519+"",DidDhtRegisteredKeyType$1.secp256k1+"",DidDhtRegisteredKeyType$1.secp256r1+"",DidDhtRegisteredKeyType$1.X25519+"";var DidIonRegisteredKeyType$1;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidIonRegisteredKeyType$1||(DidIonRegisteredKeyType$1={}));DidIonRegisteredKeyType$1.Ed25519,DidIonRegisteredKeyType$1.secp256k1,DidIonRegisteredKeyType$1.secp256r1,DidIonRegisteredKeyType$1.secp256r1,DidIonRegisteredKeyType$1.secp256k1,DidIonRegisteredKeyType$1.secp256r1;var DidKeyRegisteredKeyType$1;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidKeyRegisteredKeyType$1||(DidKeyRegisteredKeyType$1={}));DidKeyRegisteredKeyType$1.Ed25519,DidKeyRegisteredKeyType$1.secp256k1,DidKeyRegisteredKeyType$1.secp256r1,DidKeyRegisteredKeyType$1.secp256r1,DidKeyRegisteredKeyType$1.secp256k1,DidKeyRegisteredKeyType$1.secp256r1,DidKeyRegisteredKeyType$1.X25519;var CryptoErrorCode;(function(_t){_t.AlgorithmNotSupported="algorithmNotSupported",_t.EncodingError="encodingError",_t.InvalidJwe="invalidJwe",_t.InvalidJwk="invalidJwk",_t.OperationNotSupported="operationNotSupported"})(CryptoErrorCode||(CryptoErrorCode={}));var DidInterface;(function(_t){_t.Create="Create",_t.Resolve="Resolve"})(DidInterface||(DidInterface={}));var lib={};Object.defineProperty(lib,"__esModule",{value:!0});lib.ReadableWebToNodeStream=void 0;const readable_stream_1=readableBrowserExports$1;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib.ReadableWebToNodeStream=ReadableWebToNodeStream;/*! micro-ed25519-hdkey - MIT License (c) 2022 Paul Miller (paulmillr.com) */utf8ToBytes$2("ed25519 seed");var JsonRpcErrorCodes;(function(_t){_t[_t.InvalidRequest=-32600]="InvalidRequest",_t[_t.MethodNotFound=-32601]="MethodNotFound",_t[_t.InvalidParams=-32602]="InvalidParams",_t[_t.InternalError=-32603]="InternalError",_t[_t.ParseError=-32700]="ParseError",_t[_t.TransportError=-32300]="TransportError",_t[_t.BadRequest=-50400]="BadRequest",_t[_t.Unauthorized=-50401]="Unauthorized",_t[_t.Forbidden=-50403]="Forbidden",_t[_t.Conflict=-50409]="Conflict"})(JsonRpcErrorCodes||(JsonRpcErrorCodes={}));var DidRpcMethod;(function(_t){_t.Create="did.create",_t.Resolve="did.resolve"})(DidRpcMethod||(DidRpcMethod={}));class SendCache{static check(e,$t){let xt=SendCache.cache.get(e);return xt?xt.has($t):!1}static set(e,$t){let xt=SendCache.cache.get(e)||new Set;if(SendCache.cache.delete(e),SendCache.cache.set(e,xt),this.cache.size>SendCache.sendCacheLimit){const At=SendCache.cache.keys().next().value;SendCache.cache.delete(At)}if(xt.delete($t),xt.add($t),xt.size>SendCache.sendCacheLimit){const At=xt.keys().next().value;xt.delete(At)}}}SendCache.cache=new Map;SendCache.sendCacheLimit=100;var DidVerificationRelationship;(function(_t){_t.authentication="authentication",_t.assertionMethod="assertionMethod",_t.keyAgreement="keyAgreement",_t.capabilityInvocation="capabilityInvocation",_t.capabilityDelegation="capabilityDelegation"})(DidVerificationRelationship||(DidVerificationRelationship={}));const EMPTY_DID_RESOLUTION_RESULT={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class Did{constructor({method:e,id:$t,path:xt,query:At,fragment:kt,params:Bt}){this.uri=`did:${e}:${$t}`,this.method=e,this.id=$t,this.path=xt,this.query=At,this.fragment=kt,this.params=Bt}static parse(e){if(!e)return null;const $t=Did.DID_URI_PATTERN.exec(e);if(!$t||!$t.groups)return null;const{method:xt,id:At,path:kt,query:Bt,fragment:jt}=$t.groups,Lt={uri:`did:${xt}:${At}`,method:xt,id:At};if(kt&&(Lt.path=kt),Bt&&(Lt.query=Bt.slice(1)),jt&&(Lt.fragment=jt.slice(1)),Bt){const Ut={},Nt=Bt.slice(1).split("&");for(const qt of Nt){const[Kt,zt]=qt.split("=");Ut[Kt]=zt}Lt.params=Ut}return Lt}}Did.METHOD_PATTERN="([a-z0-9]+)";Did.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Did.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Did.PCT_ENCODED_PATTERN})`;Did.METHOD_ID_PATTERN=`((?:${Did.ID_CHAR_PATTERN}*:)*(${Did.ID_CHAR_PATTERN}+))`;Did.PATH_PATTERN="(/[^#?]*)?";Did.QUERY_PATTERN="([?][^#]*)?";Did.FRAGMENT_PATTERN="(#.*)?";Did.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Did.METHOD_PATTERN}):(?<id>${Did.METHOD_ID_PATTERN})(?<path>${Did.PATH_PATTERN})(?<query>${Did.QUERY_PATTERN})(?<fragment>${Did.FRAGMENT_PATTERN})$`);class DidError extends Error{constructor(e,$t){super(`${e}: ${$t}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DidError)}}var DidErrorCode;(function(_t){_t.InvalidDid="invalidDid",_t.MethodNotSupported="methodNotSupported",_t.InternalError="internalError",_t.InvalidDidDocument="invalidDidDocument",_t.InvalidDidDocumentLength="invalidDidDocumentLength",_t.InvalidDidUrl="invalidDidUrl",_t.InvalidPreviousDidProof="invalidPreviousDidProof",_t.InvalidPublicKey="invalidPublicKey",_t.InvalidPublicKeyLength="invalidPublicKeyLength",_t.InvalidPublicKeyType="invalidPublicKeyType",_t.InvalidSignature="invalidSignature",_t.NotFound="notFound",_t.RepresentationNotSupported="representationNotSupported",_t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(DidErrorCode||(DidErrorCode={}));var __awaiter$i=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Sha256{static digest({data:e}){return __awaiter$i(this,void 0,void 0,function*(){return sha256(e)})}}class CryptoAlgorithm{}var __awaiter$h=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class Sha2Algorithm extends CryptoAlgorithm{digest({algorithm:e,data:$t}){return __awaiter$h(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield Sha256.digest({data:$t})}})}}function canonicalize(_t){const e=xt=>{if(xt!==null&&typeof xt=="object"&&!Array.isArray(xt)){const At=Object.keys(xt).sort(),kt={};for(const Bt of At)kt[Bt]=e(xt[Bt]);return kt}return xt},$t=e(_t);return JSON.stringify($t)}var __awaiter$g=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};const KEY_URI_PREFIX_JWK="urn:jwk:";function computeJwkThumbprint({jwk:_t}){return __awaiter$g(this,void 0,void 0,function*(){const e=_t.kty;let $t;if(e==="EC")$t={crv:_t.crv,kty:_t.kty,x:_t.x,y:_t.y};else if(e==="oct")$t={k:_t.k,kty:_t.kty};else if(e==="OKP")$t={crv:_t.crv,kty:_t.kty,x:_t.x};else if(e==="RSA")$t={e:_t.e,kty:_t.kty,n:_t.n};else throw new Error(`Unsupported key type: ${e}`);removeUndefinedProperties($t);const xt=canonicalize($t),At=Convert.string(xt).toUint8Array(),kt=yield Sha256.digest({data:At});return Convert.uint8Array(kt).toBase64Url()})}function isEcPrivateJwk(_t){return!(!_t||typeof _t!="object"||!("kty"in _t&&"crv"in _t&&"x"in _t&&"d"in _t)||_t.kty!=="EC"||typeof _t.d!="string"||typeof _t.x!="string")}function isEcPublicJwk(_t){return!(!_t||typeof _t!="object"||!("kty"in _t&&"crv"in _t&&"x"in _t)||"d"in _t||_t.kty!=="EC"||typeof _t.x!="string")}function isOkpPrivateJwk(_t){return!(!_t||typeof _t!="object"||!("kty"in _t&&"crv"in _t&&"x"in _t&&"d"in _t)||_t.kty!=="OKP"||typeof _t.d!="string"||typeof _t.x!="string")}function isOkpPublicJwk(_t){return!(!_t||typeof _t!="object"||"d"in _t||!("kty"in _t&&"crv"in _t&&"x"in _t)||_t.kty!=="OKP"||typeof _t.x!="string")}function isPrivateJwk(_t){if(!_t||typeof _t!="object")return!1;switch(_t.kty){case"EC":case"OKP":case"RSA":return"d"in _t;case"oct":return"k"in _t;default:return!1}}var __awaiter$f=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$4=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class Secp256k1{static adjustSignatureToLowS({signature:e}){return __awaiter$f(this,void 0,void 0,function*(){const $t=secp256k1.Signature.fromCompact(e);return $t.hasHighS()?$t.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){const $t=yield Secp256k1.getCurvePoint({keyBytes:e}),xt={kty:"EC",crv:"secp256k1",d:Convert.uint8Array(e).toBase64Url(),x:Convert.uint8Array($t.x).toBase64Url(),y:Convert.uint8Array($t.y).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static bytesToPublicKey({publicKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){const $t=yield Secp256k1.getCurvePoint({keyBytes:e}),xt={kty:"EC",crv:"secp256k1",x:Convert.uint8Array($t.x).toBase64Url(),y:Convert.uint8Array($t.y).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static compressPublicKey({publicKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){return secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return __awaiter$f(this,void 0,void 0,function*(){const $t=yield Secp256k1.privateKeyToBytes({privateKey:e}),xt=yield Secp256k1.getCurvePoint({keyBytes:$t}),At={kty:"EC",crv:"secp256k1",x:Convert.uint8Array(xt.x).toBase64Url(),y:Convert.uint8Array(xt.y).toBase64Url()};return At.kid=yield computeJwkThumbprint({jwk:At}),At})}static convertDerToCompactSignature({derSignature:e}){return __awaiter$f(this,void 0,void 0,function*(){return secp256k1.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){return secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return __awaiter$f(this,void 0,void 0,function*(){const e=secp256k1.utils.randomPrivateKey(),$t=yield Secp256k1.bytesToPrivateKey({privateKeyBytes:e});return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static getPublicKey({key:e}){var $t;return __awaiter$f(this,void 0,void 0,function*(){if(!(isEcPrivateJwk(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let xt=__rest$4(e,["d"]);return($t=xt.kid)!==null&&$t!==void 0||(xt.kid=yield computeJwkThumbprint({jwk:xt})),xt})}static privateKeyToBytes({privateKey:e}){return __awaiter$f(this,void 0,void 0,function*(){if(!isEcPrivateJwk(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Convert.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return __awaiter$f(this,void 0,void 0,function*(){if(!(isEcPublicJwk(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");const $t=new Uint8Array([4]),xt=Convert.base64Url(e.x).toUint8Array(),At=Convert.base64Url(e.y).toUint8Array();return new Uint8Array([...$t,...xt,...At])})}static sharedSecret({privateKeyA:e,publicKeyB:$t}){return __awaiter$f(this,void 0,void 0,function*(){if("x"in e&&"x"in $t&&e.x===$t.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const xt=yield Secp256k1.privateKeyToBytes({privateKey:e}),At=yield Secp256k1.publicKeyToBytes({publicKey:$t});return secp256k1.getSharedSecret(xt,At,!0).slice(1)})}static sign({data:e,key:$t}){return __awaiter$f(this,void 0,void 0,function*(){const xt=yield Secp256k1.privateKeyToBytes({privateKey:$t}),At=sha256(e);return secp256k1.sign(At,xt).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){return secp256k1.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){try{secp256k1.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:$t,data:xt}){return __awaiter$f(this,void 0,void 0,function*(){const At=yield Secp256k1.publicKeyToBytes({publicKey:e}),kt=sha256(xt);return secp256k1.verify($t,kt,At,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return __awaiter$f(this,void 0,void 0,function*(){e.byteLength===32&&(e=secp256k1.getPublicKey(e));const $t=secp256k1.ProjectivePoint.fromHex(e),xt=numberToBytesBE($t.x,32),At=numberToBytesBE($t.y,32);return{x:xt,y:At}})}}var __awaiter$e=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$3=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class Secp256r1{static adjustSignatureToLowS({signature:e}){return __awaiter$e(this,void 0,void 0,function*(){const $t=secp256r1.Signature.fromCompact(e);return $t.hasHighS()?$t.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){const $t=yield Secp256r1.getCurvePoint({keyBytes:e}),xt={kty:"EC",crv:"P-256",d:Convert.uint8Array(e).toBase64Url(),x:Convert.uint8Array($t.x).toBase64Url(),y:Convert.uint8Array($t.y).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static bytesToPublicKey({publicKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){const $t=yield Secp256r1.getCurvePoint({keyBytes:e}),xt={kty:"EC",crv:"P-256",x:Convert.uint8Array($t.x).toBase64Url(),y:Convert.uint8Array($t.y).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static compressPublicKey({publicKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){return secp256r1.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return __awaiter$e(this,void 0,void 0,function*(){const $t=yield Secp256r1.privateKeyToBytes({privateKey:e}),xt=yield Secp256r1.getCurvePoint({keyBytes:$t}),At={kty:"EC",crv:"P-256",x:Convert.uint8Array(xt.x).toBase64Url(),y:Convert.uint8Array(xt.y).toBase64Url()};return At.kid=yield computeJwkThumbprint({jwk:At}),At})}static convertDerToCompactSignature({derSignature:e}){return __awaiter$e(this,void 0,void 0,function*(){return secp256r1.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){return secp256r1.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return __awaiter$e(this,void 0,void 0,function*(){const e=secp256r1.utils.randomPrivateKey(),$t=yield Secp256r1.bytesToPrivateKey({privateKeyBytes:e});return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static getPublicKey({key:e}){var $t;return __awaiter$e(this,void 0,void 0,function*(){if(!(isEcPrivateJwk(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let xt=__rest$3(e,["d"]);return($t=xt.kid)!==null&&$t!==void 0||(xt.kid=yield computeJwkThumbprint({jwk:xt})),xt})}static privateKeyToBytes({privateKey:e}){return __awaiter$e(this,void 0,void 0,function*(){if(!isEcPrivateJwk(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Convert.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return __awaiter$e(this,void 0,void 0,function*(){if(!(isEcPublicJwk(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");const $t=new Uint8Array([4]),xt=Convert.base64Url(e.x).toUint8Array(),At=Convert.base64Url(e.y).toUint8Array();return new Uint8Array([...$t,...xt,...At])})}static sharedSecret({privateKeyA:e,publicKeyB:$t}){return __awaiter$e(this,void 0,void 0,function*(){if("x"in e&&"x"in $t&&e.x===$t.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const xt=yield Secp256r1.privateKeyToBytes({privateKey:e}),At=yield Secp256r1.publicKeyToBytes({publicKey:$t});return secp256r1.getSharedSecret(xt,At,!0).slice(1)})}static sign({data:e,key:$t}){return __awaiter$e(this,void 0,void 0,function*(){const xt=yield Secp256r1.privateKeyToBytes({privateKey:$t}),At=sha256(e);return secp256r1.sign(At,xt).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){return secp256r1.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){try{secp256r1.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:$t,data:xt}){return __awaiter$e(this,void 0,void 0,function*(){const At=yield Secp256r1.publicKeyToBytes({publicKey:e}),kt=sha256(xt);return secp256r1.verify($t,kt,At,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return __awaiter$e(this,void 0,void 0,function*(){e.byteLength===32&&(e=secp256r1.getPublicKey(e));const $t=secp256r1.ProjectivePoint.fromHex(e),xt=numberToBytesBE($t.x,32),At=numberToBytesBE($t.y,32);return{x:xt,y:At}})}}var __awaiter$d=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class EcdsaAlgorithm extends CryptoAlgorithm{computePublicKey({key:e}){return __awaiter$d(this,void 0,void 0,function*(){if(!isEcPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const $t=yield Secp256k1.computePublicKey({key:e});return $t.alg="ES256K",$t}case"P-256":{const $t=yield Secp256r1.computePublicKey({key:e});return $t.alg="ES256",$t}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return __awaiter$d(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{const $t=yield Secp256k1.generateKey();return $t.alg="ES256K",$t}case"ES256":case"secp256r1":{const $t=yield Secp256r1.generateKey();return $t.alg="ES256",$t}}})}getPublicKey({key:e}){return __awaiter$d(this,void 0,void 0,function*(){if(!isEcPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{const $t=yield Secp256k1.getPublicKey({key:e});return $t.alg="ES256K",$t}case"P-256":{const $t=yield Secp256r1.getPublicKey({key:e});return $t.alg="ES256",$t}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:$t}){return __awaiter$d(this,void 0,void 0,function*(){if(!isEcPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield Secp256k1.sign({key:e,data:$t});case"P-256":return yield Secp256r1.sign({key:e,data:$t});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:$t,data:xt}){return __awaiter$d(this,void 0,void 0,function*(){if(!isEcPublicJwk(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield Secp256k1.verify({key:e,signature:$t,data:xt});case"P-256":return yield Secp256r1.verify({key:e,signature:$t,data:xt});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}}var __awaiter$c=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$2=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class Ed25519{static bytesToPrivateKey({privateKeyBytes:e}){return __awaiter$c(this,void 0,void 0,function*(){const $t=ed25519.getPublicKey(e),xt={crv:"Ed25519",d:Convert.uint8Array(e).toBase64Url(),kty:"OKP",x:Convert.uint8Array($t).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static bytesToPublicKey({publicKeyBytes:e}){return __awaiter$c(this,void 0,void 0,function*(){const $t={kty:"OKP",crv:"Ed25519",x:Convert.uint8Array(e).toBase64Url()};return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static computePublicKey({key:e}){return __awaiter$c(this,void 0,void 0,function*(){const $t=yield Ed25519.privateKeyToBytes({privateKey:e}),xt=ed25519.getPublicKey($t),At={kty:"OKP",crv:"Ed25519",x:Convert.uint8Array(xt).toBase64Url()};return At.kid=yield computeJwkThumbprint({jwk:At}),At})}static convertPrivateKeyToX25519({privateKey:e}){return __awaiter$c(this,void 0,void 0,function*(){const $t=yield Ed25519.privateKeyToBytes({privateKey:e}),xt=edwardsToMontgomeryPriv($t),At=x25519.getPublicKey(xt),kt={kty:"OKP",crv:"X25519",d:Convert.uint8Array(xt).toBase64Url(),x:Convert.uint8Array(At).toBase64Url()};return kt.kid=yield computeJwkThumbprint({jwk:kt}),kt})}static convertPublicKeyToX25519({publicKey:e}){return __awaiter$c(this,void 0,void 0,function*(){const $t=yield Ed25519.publicKeyToBytes({publicKey:e});if(!(yield Ed25519.validatePublicKey({publicKeyBytes:$t})))throw new Error("Ed25519: Invalid public key.");const At=edwardsToMontgomeryPub($t),kt={kty:"OKP",crv:"X25519",x:Convert.uint8Array(At).toBase64Url()};return kt.kid=yield computeJwkThumbprint({jwk:kt}),kt})}static generateKey(){return __awaiter$c(this,void 0,void 0,function*(){const e=ed25519.utils.randomPrivateKey(),$t=yield Ed25519.bytesToPrivateKey({privateKeyBytes:e});return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static getPublicKey({key:e}){var $t;return __awaiter$c(this,void 0,void 0,function*(){if(!(isOkpPrivateJwk(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let xt=__rest$2(e,["d"]);return($t=xt.kid)!==null&&$t!==void 0||(xt.kid=yield computeJwkThumbprint({jwk:xt})),xt})}static privateKeyToBytes({privateKey:e}){return __awaiter$c(this,void 0,void 0,function*(){if(!isOkpPrivateJwk(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Convert.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return __awaiter$c(this,void 0,void 0,function*(){if(!isOkpPublicJwk(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Convert.base64Url(e.x).toUint8Array()})}static sign({key:e,data:$t}){return __awaiter$c(this,void 0,void 0,function*(){const xt=yield Ed25519.privateKeyToBytes({privateKey:e});return ed25519.sign($t,xt)})}static validatePublicKey({publicKeyBytes:e}){return __awaiter$c(this,void 0,void 0,function*(){try{ed25519.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:$t,data:xt}){return __awaiter$c(this,void 0,void 0,function*(){const At=yield Ed25519.publicKeyToBytes({publicKey:e});return ed25519.verify($t,xt,At)})}}var __awaiter$b=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class EdDsaAlgorithm extends CryptoAlgorithm{computePublicKey({key:e}){return __awaiter$b(this,void 0,void 0,function*(){if(!isOkpPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const $t=yield Ed25519.computePublicKey({key:e});return $t.alg="EdDSA",$t}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return __awaiter$b(this,void 0,void 0,function*(){switch(e){case"Ed25519":{const $t=yield Ed25519.generateKey();return $t.alg="EdDSA",$t}}})}getPublicKey({key:e}){return __awaiter$b(this,void 0,void 0,function*(){if(!isOkpPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{const $t=yield Ed25519.getPublicKey({key:e});return $t.alg="EdDSA",$t}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:$t}){return __awaiter$b(this,void 0,void 0,function*(){if(!isOkpPrivateJwk(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Ed25519.sign({key:e,data:$t});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:$t,data:xt}){return __awaiter$b(this,void 0,void 0,function*(){if(!isOkpPublicJwk(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Ed25519.verify({key:e,signature:$t,data:xt});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}}var __awaiter$a=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};const supportedAlgorithms={Ed25519:{implementation:EdDsaAlgorithm,names:["Ed25519"]},secp256k1:{implementation:EcdsaAlgorithm,names:["ES256K","secp256k1"]},secp256r1:{implementation:EcdsaAlgorithm,names:["ES256","secp256r1"]},"SHA-256":{implementation:Sha2Algorithm,names:["SHA-256"]}};class LocalKeyManager{constructor(e){var $t;this._algorithmInstances=new Map,this._keyStore=($t=e==null?void 0:e.keyStore)!==null&&$t!==void 0?$t:new MemoryStore}digest({algorithm:e,data:$t}){return __awaiter$a(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:$t})})}exportKey({keyUri:e}){return __awaiter$a(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return __awaiter$a(this,void 0,void 0,function*(){const xt=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if((xt==null?void 0:xt.kid)===void 0)throw new Error("Generated key is missing a required property: kid");const At=`${KEY_URI_PREFIX_JWK}${xt.kid}`;return yield this._keyStore.set(At,xt),At})}getKeyUri({key:e}){return __awaiter$a(this,void 0,void 0,function*(){const $t=yield computeJwkThumbprint({jwk:e});return`${KEY_URI_PREFIX_JWK}${$t}`})}getPublicKey({keyUri:e}){return __awaiter$a(this,void 0,void 0,function*(){const $t=yield this.getPrivateKey({keyUri:e}),xt=this.getAlgorithmName({key:$t});return yield this.getAlgorithm({algorithm:xt}).getPublicKey({key:$t})})}importKey({key:e}){var $t;return __awaiter$a(this,void 0,void 0,function*(){if(!isPrivateJwk(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const xt=structuredClone(e);($t=xt.kid)!==null&&$t!==void 0||(xt.kid=yield computeJwkThumbprint({jwk:xt}));const At=yield this.getKeyUri({key:xt});return yield this._keyStore.set(At,xt),At})}sign({keyUri:e,data:$t}){return __awaiter$a(this,void 0,void 0,function*(){const xt=yield this.getPrivateKey({keyUri:e}),At=this.getAlgorithmName({key:xt});return this.getAlgorithm({algorithm:At}).sign({data:$t,key:xt})})}verify({key:e,signature:$t,data:xt}){return __awaiter$a(this,void 0,void 0,function*(){const At=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:At}).verify({key:e,signature:$t,data:xt})})}getAlgorithm({algorithm:e}){var $t;const xt=($t=supportedAlgorithms[e])===null||$t===void 0?void 0:$t.implementation;if(!xt)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(xt)||this._algorithmInstances.set(xt,new xt),this._algorithmInstances.get(xt)}getAlgorithmName({key:e}){const $t=e.alg,xt=e.crv;for(const At in supportedAlgorithms){const kt=supportedAlgorithms[At];if($t&&kt.names.includes($t))return At;if(xt&&kt.names.includes(xt))return At}throw new Error(`Unable to determine algorithm based on provided input: alg=${$t}, crv=${xt}`)}getPrivateKey({keyUri:e}){return __awaiter$a(this,void 0,void 0,function*(){const $t=yield this._keyStore.get(e);if(!$t)throw new Error(`Key not found: ${e}`);return $t})}}function getJoseSignatureAlgorithmFromPublicKey(_t){const e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(_t.alg&&Object.values(e).includes(_t.alg))return _t.alg;if(_t.crv&&Object.keys(e).includes(_t.crv))return e[_t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${_t.alg}, crv=${_t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=_t=>new Uint32Array(_t.buffer,_t.byteOffset,Math.floor(_t.byteLength/4));function isBytes$1(_t){return _t instanceof Uint8Array||_t!=null&&typeof _t=="object"&&_t.constructor.name==="Uint8Array"}const isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(_t){if(typeof _t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof _t}`);return new Uint8Array(new TextEncoder().encode(_t))}function toBytes(_t){if(typeof _t=="string")_t=utf8ToBytes(_t);else if(isBytes$1(_t))_t=_t.slice();else throw new Error(`expected Uint8Array, got ${typeof _t}`);return _t}function ensureBytes(_t,e){if(!isBytes$1(_t))throw new Error("Uint8Array expected");if(_t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function isBytes(_t){return _t!=null&&typeof _t=="object"&&(_t instanceof Uint8Array||_t.constructor.name==="Uint8Array")}function bytes(_t,...e){if(!isBytes(_t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(_t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${_t.length}`)}function exists(_t,e=!0){if(_t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&_t.finished)throw new Error("Hash#digest() has already been called")}function output(_t,e){bytes(_t);const $t=e.outputLen;if(_t.length<$t)throw new Error(`digestInto() expects output buffer of length at least ${$t}`)}var __awaiter$9=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest$1=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};class X25519{static bytesToPrivateKey({privateKeyBytes:e}){return __awaiter$9(this,void 0,void 0,function*(){const $t=x25519.getPublicKey(e),xt={kty:"OKP",crv:"X25519",d:Convert.uint8Array(e).toBase64Url(),x:Convert.uint8Array($t).toBase64Url()};return xt.kid=yield computeJwkThumbprint({jwk:xt}),xt})}static bytesToPublicKey({publicKeyBytes:e}){return __awaiter$9(this,void 0,void 0,function*(){const $t={kty:"OKP",crv:"X25519",x:Convert.uint8Array(e).toBase64Url()};return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static computePublicKey({key:e}){return __awaiter$9(this,void 0,void 0,function*(){const $t=yield X25519.privateKeyToBytes({privateKey:e}),xt=x25519.getPublicKey($t),At={kty:"OKP",crv:"X25519",x:Convert.uint8Array(xt).toBase64Url()};return At.kid=yield computeJwkThumbprint({jwk:At}),At})}static generateKey(){return __awaiter$9(this,void 0,void 0,function*(){const e=x25519.utils.randomPrivateKey(),$t=yield X25519.bytesToPrivateKey({privateKeyBytes:e});return $t.kid=yield computeJwkThumbprint({jwk:$t}),$t})}static getPublicKey({key:e}){var $t;return __awaiter$9(this,void 0,void 0,function*(){if(!(isOkpPrivateJwk(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let xt=__rest$1(e,["d"]);return($t=xt.kid)!==null&&$t!==void 0||(xt.kid=yield computeJwkThumbprint({jwk:xt})),xt})}static privateKeyToBytes({privateKey:e}){return __awaiter$9(this,void 0,void 0,function*(){if(!isOkpPrivateJwk(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return Convert.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return __awaiter$9(this,void 0,void 0,function*(){if(!isOkpPublicJwk(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return Convert.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:$t}){return __awaiter$9(this,void 0,void 0,function*(){if("x"in e&&"x"in $t&&e.x===$t.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const xt=yield X25519.privateKeyToBytes({privateKey:e}),At=yield X25519.publicKeyToBytes({publicKey:$t});return x25519.getSharedSecret(xt,At)})}}const u8to16=(_t,e)=>_t[e++]&255|(_t[e++]&255)<<8;class Poly1305{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=toBytes(e),ensureBytes(e,32);const $t=u8to16(e,0),xt=u8to16(e,2),At=u8to16(e,4),kt=u8to16(e,6),Bt=u8to16(e,8),jt=u8to16(e,10),Lt=u8to16(e,12),Ut=u8to16(e,14);this.r[0]=$t&8191,this.r[1]=($t>>>13|xt<<3)&8191,this.r[2]=(xt>>>10|At<<6)&7939,this.r[3]=(At>>>7|kt<<9)&8191,this.r[4]=(kt>>>4|Bt<<12)&255,this.r[5]=Bt>>>1&8190,this.r[6]=(Bt>>>14|jt<<2)&8191,this.r[7]=(jt>>>11|Lt<<5)&8065,this.r[8]=(Lt>>>8|Ut<<8)&8191,this.r[9]=Ut>>>5&127;for(let Nt=0;Nt<8;Nt++)this.pad[Nt]=u8to16(e,16+2*Nt)}process(e,$t,xt=!1){const At=xt?0:2048,{h:kt,r:Bt}=this,jt=Bt[0],Lt=Bt[1],Ut=Bt[2],Nt=Bt[3],qt=Bt[4],Kt=Bt[5],zt=Bt[6],Vt=Bt[7],Ht=Bt[8],Jt=Bt[9],rr=u8to16(e,$t+0),Qt=u8to16(e,$t+2),Wt=u8to16(e,$t+4),nr=u8to16(e,$t+6),yr=u8to16(e,$t+8),vr=u8to16(e,$t+10),Ir=u8to16(e,$t+12),xr=u8to16(e,$t+14);let Or=kt[0]+(rr&8191),Nr=kt[1]+((rr>>>13|Qt<<3)&8191),kr=kt[2]+((Qt>>>10|Wt<<6)&8191),lr=kt[3]+((Wt>>>7|nr<<9)&8191),ir=kt[4]+((nr>>>4|yr<<12)&8191),Xt=kt[5]+(yr>>>1&8191),er=kt[6]+((yr>>>14|vr<<2)&8191),pr=kt[7]+((vr>>>11|Ir<<5)&8191),ur=kt[8]+((Ir>>>8|xr<<8)&8191),gr=kt[9]+(xr>>>5|At),ar=0,tr=ar+Or*jt+Nr*(5*Jt)+kr*(5*Ht)+lr*(5*Vt)+ir*(5*zt);ar=tr>>>13,tr&=8191,tr+=Xt*(5*Kt)+er*(5*qt)+pr*(5*Nt)+ur*(5*Ut)+gr*(5*Lt),ar+=tr>>>13,tr&=8191;let dr=ar+Or*Lt+Nr*jt+kr*(5*Jt)+lr*(5*Ht)+ir*(5*Vt);ar=dr>>>13,dr&=8191,dr+=Xt*(5*zt)+er*(5*Kt)+pr*(5*qt)+ur*(5*Nt)+gr*(5*Ut),ar+=dr>>>13,dr&=8191;let fr=ar+Or*Ut+Nr*Lt+kr*jt+lr*(5*Jt)+ir*(5*Ht);ar=fr>>>13,fr&=8191,fr+=Xt*(5*Vt)+er*(5*zt)+pr*(5*Kt)+ur*(5*qt)+gr*(5*Nt),ar+=fr>>>13,fr&=8191;let br=ar+Or*Nt+Nr*Ut+kr*Lt+lr*jt+ir*(5*Jt);ar=br>>>13,br&=8191,br+=Xt*(5*Ht)+er*(5*Vt)+pr*(5*zt)+ur*(5*Kt)+gr*(5*qt),ar+=br>>>13,br&=8191;let Sr=ar+Or*qt+Nr*Nt+kr*Ut+lr*Lt+ir*jt;ar=Sr>>>13,Sr&=8191,Sr+=Xt*(5*Jt)+er*(5*Ht)+pr*(5*Vt)+ur*(5*zt)+gr*(5*Kt),ar+=Sr>>>13,Sr&=8191;let Dr=ar+Or*Kt+Nr*qt+kr*Nt+lr*Ut+ir*Lt;ar=Dr>>>13,Dr&=8191,Dr+=Xt*jt+er*(5*Jt)+pr*(5*Ht)+ur*(5*Vt)+gr*(5*zt),ar+=Dr>>>13,Dr&=8191;let Er=ar+Or*zt+Nr*Kt+kr*qt+lr*Nt+ir*Ut;ar=Er>>>13,Er&=8191,Er+=Xt*Lt+er*jt+pr*(5*Jt)+ur*(5*Ht)+gr*(5*Vt),ar+=Er>>>13,Er&=8191;let wr=ar+Or*Vt+Nr*zt+kr*Kt+lr*qt+ir*Nt;ar=wr>>>13,wr&=8191,wr+=Xt*Ut+er*Lt+pr*jt+ur*(5*Jt)+gr*(5*Ht),ar+=wr>>>13,wr&=8191;let Tr=ar+Or*Ht+Nr*Vt+kr*zt+lr*Kt+ir*qt;ar=Tr>>>13,Tr&=8191,Tr+=Xt*Nt+er*Ut+pr*Lt+ur*jt+gr*(5*Jt),ar+=Tr>>>13,Tr&=8191;let Mr=ar+Or*Jt+Nr*Ht+kr*Vt+lr*zt+ir*Kt;ar=Mr>>>13,Mr&=8191,Mr+=Xt*qt+er*Nt+pr*Ut+ur*Lt+gr*jt,ar+=Mr>>>13,Mr&=8191,ar=(ar<<2)+ar|0,ar=ar+tr|0,tr=ar&8191,ar=ar>>>13,dr+=ar,kt[0]=tr,kt[1]=dr,kt[2]=fr,kt[3]=br,kt[4]=Sr,kt[5]=Dr,kt[6]=Er,kt[7]=wr,kt[8]=Tr,kt[9]=Mr}finalize(){const{h:e,pad:$t}=this,xt=new Uint16Array(10);let At=e[1]>>>13;e[1]&=8191;for(let jt=2;jt<10;jt++)e[jt]+=At,At=e[jt]>>>13,e[jt]&=8191;e[0]+=At*5,At=e[0]>>>13,e[0]&=8191,e[1]+=At,At=e[1]>>>13,e[1]&=8191,e[2]+=At,xt[0]=e[0]+5,At=xt[0]>>>13,xt[0]&=8191;for(let jt=1;jt<10;jt++)xt[jt]=e[jt]+At,At=xt[jt]>>>13,xt[jt]&=8191;xt[9]-=8192;let kt=(At^1)-1;for(let jt=0;jt<10;jt++)xt[jt]&=kt;kt=~kt;for(let jt=0;jt<10;jt++)e[jt]=e[jt]&kt|xt[jt];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let Bt=e[0]+$t[0];e[0]=Bt&65535;for(let jt=1;jt<8;jt++)Bt=(e[jt]+$t[jt]|0)+(Bt>>>16)|0,e[jt]=Bt&65535}update(e){exists(this);const{buffer:$t,blockLen:xt}=this;e=toBytes(e);const At=e.length;for(let kt=0;kt<At;){const Bt=Math.min(xt-this.pos,At-kt);if(Bt===xt){for(;xt<=At-kt;kt+=xt)this.process(e,kt);continue}$t.set(e.subarray(kt,kt+Bt),this.pos),this.pos+=Bt,kt+=Bt,this.pos===xt&&(this.process($t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){exists(this),output(e,this),this.finished=!0;const{buffer:$t,h:xt}=this;let{pos:At}=this;if(At){for($t[At++]=1;At<16;At++)$t[At]=0;this.process($t,0,!0)}this.finalize();let kt=0;for(let Bt=0;Bt<8;Bt++)e[kt++]=xt[Bt]>>>0,e[kt++]=xt[Bt]>>>8;return e}digest(){const{buffer:e,outputLen:$t}=this;this.digestInto(e);const xt=e.slice(0,$t);return this.destroy(),xt}}function wrapConstructorWithKey(_t){const e=(xt,At)=>_t(At).update(toBytes(xt)).digest(),$t=_t(new Uint8Array(32));return e.outputLen=$t.outputLen,e.blockLen=$t.blockLen,e.create=xt=>_t(xt),e}wrapConstructorWithKey(_t=>new Poly1305(_t));const sigma16=utf8ToBytes("expand 16-byte k"),sigma32=utf8ToBytes("expand 32-byte k");u32(sigma16);u32(sigma32);function extractDidFragment(_t){if(typeof _t=="string"&&_t.length!==0)return _t.split("#").pop()}function getVerificationMethods({didDocument:_t}){var e,$t;if(!_t)throw new TypeError("Required parameter missing: 'didDocument'");const xt=[];return xt.push(...($t=(e=_t.verificationMethod)===null||e===void 0?void 0:e.filter(isDidVerificationMethod))!==null&&$t!==void 0?$t:[]),Object.keys(DidVerificationRelationship).forEach(At=>{var kt,Bt;xt.push(...(Bt=(kt=_t[At])===null||kt===void 0?void 0:kt.filter(isDidVerificationMethod))!==null&&Bt!==void 0?Bt:[])}),xt}function getVerificationMethodTypes({didDocument:_t}){const $t=getVerificationMethods({didDocument:_t}).map(xt=>xt.type);return[...new Set($t)]}function getVerificationRelationshipsById({didDocument:_t,methodId:e}){const $t=[];return Object.keys(DidVerificationRelationship).forEach(xt=>{if(Array.isArray(_t[xt])){const At=_t[xt],kt=extractDidFragment(e);At.some(jt=>{const Lt=extractDidFragment(jt)===kt,Ut=isDidVerificationMethod(jt)&&extractDidFragment(jt.id)===kt;return Lt||Ut})&&$t.push(xt)}}),$t}function isDidVerificationMethod(_t){return!(!_t||typeof _t!="object"||_t===null||!("id"in _t&&"type"in _t&&"controller"in _t)||typeof _t.id!="string"||typeof _t.type!="string"||typeof _t.controller!="string")}function keyBytesToMultibaseId({keyBytes:_t,multicodecCode:e,multicodecName:$t}){const xt=Multicodec.addPrefix({code:e,data:_t,name:$t}),At=Convert.uint8Array(xt).toBase58Btc();return Convert.base58Btc(At).toMultibase()}function multibaseIdToKeyBytes({multibaseKeyId:_t}){try{const e=Convert.multibase(_t).toBase58Btc(),$t=Convert.base58Btc(e).toUint8Array(),{code:xt,data:At,name:kt}=Multicodec.removePrefix({prefixedData:$t});return{keyBytes:At,multicodecCode:xt,multicodecName:kt}}catch{throw new DidError(DidErrorCode.InvalidDid,`Invalid multibase identifier: ${_t}`)}}var __awaiter$8=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class BearerDid{constructor({uri:e,document:$t,metadata:xt,keyManager:At}){this.uri=e,this.document=$t,this.metadata=xt,this.keyManager=At}export(){return __awaiter$8(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){const $t=[];for(let xt of this.document.verificationMethod){if(!xt.publicKeyJwk)throw new Error(`Verification method '${xt.id}' does not contain a public key in JWK format`);const At=yield this.keyManager.getKeyUri({key:xt.publicKeyJwk}),kt=yield this.keyManager.exportKey({keyUri:At});$t.push(Object.assign({},kt))}e.privateKeys=$t}return e})}getSigner(e){return __awaiter$8(this,void 0,void 0,function*(){var $t;const xt=($t=this.document.verificationMethod)===null||$t===void 0?void 0:$t.find(Lt=>{var Ut,Nt;return extractDidFragment(Lt.id)===((Ut=extractDidFragment(e==null?void 0:e.methodId))!==null&&Ut!==void 0?Ut:extractDidFragment((Nt=this.document.assertionMethod)===null||Nt===void 0?void 0:Nt[0]))});if(!(xt&&xt.publicKeyJwk))throw new DidError(DidErrorCode.InternalError,"A verification method intended for signing could not be determined from the DID Document");const At=yield this.keyManager.getKeyUri({key:xt.publicKeyJwk}),kt=yield this.keyManager.getPublicKey({keyUri:At}),Bt=this.keyManager;return{algorithm:getJoseSignatureAlgorithmFromPublicKey(kt),keyId:xt.id,sign(Lt){return __awaiter$8(this,arguments,void 0,function*({data:Ut}){return yield Bt.sign({data:Ut,keyUri:At})})},verify(Lt){return __awaiter$8(this,arguments,void 0,function*({data:Ut,signature:Nt}){return yield Bt.verify({data:Ut,key:kt,signature:Nt})})}}})}static import(e){return __awaiter$8(this,arguments,void 0,function*({portableDid:$t,keyManager:xt=new LocalKeyManager}){var At;const kt=getVerificationMethods({didDocument:$t.document});if(kt.length===0)throw new DidError(DidErrorCode.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let jt of(At=$t.privateKeys)!==null&&At!==void 0?At:[])yield xt.importKey({key:jt});for(let jt of kt){if(!jt.publicKeyJwk)throw new Error(`Verification method '${jt.id}' does not contain a public key in JWK format`);const Lt=yield xt.getKeyUri({key:jt.publicKeyJwk});yield xt.getPublicKey({keyUri:Lt})}return new BearerDid({uri:$t.uri,document:$t.document,metadata:$t.metadata,keyManager:xt})})}}var __awaiter$7=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class DidMethod{static getSigningMethod(e){return __awaiter$7(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,$t){return __awaiter$7(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}}var __awaiter$6=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},__rest=function(_t,e){var $t={};for(var xt in _t)Object.prototype.hasOwnProperty.call(_t,xt)&&e.indexOf(xt)<0&&($t[xt]=_t[xt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var At=0,xt=Object.getOwnPropertySymbols(_t);At<xt.length;At++)e.indexOf(xt[At])<0&&Object.prototype.propertyIsEnumerable.call(_t,xt[At])&&($t[xt[At]]=_t[xt[At]]);return $t};const DEFAULT_GATEWAY_URI$1="https://diddht.tbddev.org",DID_DHT_SPECIFICATION_VERSION=0,DNS_RECORD_TTL=7200,PROPERTY_SEPARATOR=";",VALUE_SEPARATOR=",";var DidDhtRegisteredDidType;(function(_t){_t[_t.Discoverable=0]="Discoverable",_t[_t.Organization=1]="Organization",_t[_t.Government=2]="Government",_t[_t.Corporation=3]="Corporation",_t[_t.LocalBusiness=4]="LocalBusiness",_t[_t.SoftwarePackage=5]="SoftwarePackage",_t[_t.WebApp=6]="WebApp",_t[_t.FinancialInstitution=7]="FinancialInstitution"})(DidDhtRegisteredDidType||(DidDhtRegisteredDidType={}));var DidDhtRegisteredKeyType;(function(_t){_t[_t.Ed25519=0]="Ed25519",_t[_t.secp256k1=1]="secp256k1",_t[_t.secp256r1=2]="secp256r1",_t[_t.X25519=3]="X25519"})(DidDhtRegisteredKeyType||(DidDhtRegisteredKeyType={}));var DidDhtVerificationRelationship;(function(_t){_t.authentication="auth",_t.assertionMethod="asm",_t.capabilityDelegation="del",_t.capabilityInvocation="inv",_t.keyAgreement="agm"})(DidDhtVerificationRelationship||(DidDhtVerificationRelationship={}));const AlgorithmToKeyTypeMap$2={Ed25519:DidDhtRegisteredKeyType.Ed25519,ES256K:DidDhtRegisteredKeyType.secp256k1,ES256:DidDhtRegisteredKeyType.secp256r1,"P-256":DidDhtRegisteredKeyType.secp256r1,secp256k1:DidDhtRegisteredKeyType.secp256k1,secp256r1:DidDhtRegisteredKeyType.secp256r1,X25519:DidDhtRegisteredKeyType.X25519},KeyTypeToDefaultAlgorithmMap={[DidDhtRegisteredKeyType.Ed25519]:"Ed25519",[DidDhtRegisteredKeyType.secp256k1]:"ES256K",[DidDhtRegisteredKeyType.secp256r1]:"ES256",[DidDhtRegisteredKeyType.X25519]:"ECDH-ES+A256KW"};class DidDht extends DidMethod{static create(){return __awaiter$6(this,arguments,void 0,function*({keyManager:e=new LocalKeyManager,options:$t={}}={}){var xt,At,kt,Bt,jt,Lt,Ut,Nt,qt,Kt,zt;if(!((xt=$t.verificationMethods)===null||xt===void 0)&&xt.some(yr=>!(yr.algorithm in AlgorithmToKeyTypeMap$2)))throw new Error("One or more verification method algorithms are not supported");const Vt=(At=$t.verificationMethods)===null||At===void 0?void 0:At.filter(yr=>"id"in yr).map(yr=>yr.id);if(Vt&&Vt.length!==new Set(Vt).size)throw new Error("One or more verification method IDs are not unique");if(!((kt=$t.services)===null||kt===void 0)&&kt.some(yr=>!yr.id||!yr.type||!yr.serviceEndpoint))throw new Error("One or more services are missing required properties");const Ht=yield e.generateKey({algorithm:"Ed25519"}),Jt=yield e.getPublicKey({keyUri:Ht}),rr=yield DidDhtUtils.identityKeyToIdentifier({identityKey:Jt}),Qt=Object.assign(Object.assign({id:rr},$t.alsoKnownAs&&{alsoKnownAs:$t.alsoKnownAs}),$t.controllers&&{controller:$t.controllers}),Wt=[...(Bt=$t.verificationMethods)!==null&&Bt!==void 0?Bt:[]];Wt!=null&&Wt.some(yr=>{var vr;return((vr=yr.id)===null||vr===void 0?void 0:vr.split("#").pop())==="0"})||Wt.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const yr of Wt){const vr=yr.id&&yr.id.split("#").pop()==="0"?Ht:yield e.generateKey({algorithm:yr.algorithm}),Ir=yield e.getPublicKey({keyUri:vr});let xr=(Lt=(jt=yr.id)!==null&&jt!==void 0?jt:Ir.kid)!==null&&Lt!==void 0?Lt:yield computeJwkThumbprint({jwk:Ir});xr=`${rr}#${extractDidFragment(xr)}`,(Ut=Qt.verificationMethod)!==null&&Ut!==void 0||(Qt.verificationMethod=[]),Qt.verificationMethod.push({id:xr,type:"JsonWebKey",controller:(Nt=yr.controller)!==null&&Nt!==void 0?Nt:rr,publicKeyJwk:Ir});for(const Or of(qt=yr.purposes)!==null&&qt!==void 0?qt:[])Qt[Or]||(Qt[Or]=[]),Qt[Or].push(xr)}(Kt=$t.services)===null||Kt===void 0||Kt.forEach(yr=>{var vr;(vr=Qt.service)!==null&&vr!==void 0||(Qt.service=[]),yr.id=`${rr}#${yr.id.split("#").pop()}`,Qt.service.push(yr)});const nr=new BearerDid({uri:rr,document:Qt,metadata:Object.assign({published:!1},$t.types&&{types:$t.types}),keyManager:e});if(!((zt=$t.publish)!==null&&zt!==void 0)||zt){const yr=yield DidDht.publish({did:nr,gatewayUri:$t.gatewayUri});nr.metadata=yr.didDocumentMetadata}return nr})}static import(e){return __awaiter$6(this,arguments,void 0,function*({portableDid:$t,keyManager:xt=new LocalKeyManager}){var At;const kt=Did.parse($t.uri);if((kt==null?void 0:kt.method)!==DidDht.methodName)throw new DidError(DidErrorCode.MethodNotSupported,"Method not supported");const Bt=yield BearerDid.import({portableDid:$t,keyManager:xt});if(!(!((At=Bt.document.verificationMethod)===null||At===void 0)&&At.some(jt=>{var Lt;return((Lt=jt.id)===null||Lt===void 0?void 0:Lt.split("#").pop())==="0"})))throw new DidError(DidErrorCode.InvalidDidDocument,"DID document must contain an Identity Key");return Bt})}static getSigningMethod(e){return __awaiter$6(this,arguments,void 0,function*({didDocument:$t,methodId:xt="#0"}){var At;const kt=Did.parse($t.id);if(kt&&kt.method!==this.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${kt.method}`);const Bt=(At=$t.verificationMethod)===null||At===void 0?void 0:At.find(jt=>{var Lt,Ut;return extractDidFragment(jt.id)===((Lt=extractDidFragment(xt))!==null&&Lt!==void 0?Lt:extractDidFragment((Ut=$t.assertionMethod)===null||Ut===void 0?void 0:Ut[0]))});if(!(Bt&&Bt.publicKeyJwk))throw new DidError(DidErrorCode.InternalError,"A verification method intended for signing could not be determined from the DID Document");return Bt})}static publish(e){return __awaiter$6(this,arguments,void 0,function*({did:$t,gatewayUri:xt=DEFAULT_GATEWAY_URI$1}){return yield DidDhtDocument.put({did:$t,gatewayUri:xt})})}static resolve(e){return __awaiter$6(this,arguments,void 0,function*($t,xt={}){var At;const kt=(At=xt==null?void 0:xt.gatewayUri)!==null&&At!==void 0?At:DEFAULT_GATEWAY_URI$1;try{yield DidDhtUtils.identifierToIdentityKey({didUri:$t});const{didDocument:Bt,didDocumentMetadata:jt}=yield DidDhtDocument.get({didUri:$t,gatewayUri:kt});return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didDocument:Bt,didDocumentMetadata:jt})}catch(Bt){if(!(Bt instanceof DidError))throw new Error(Bt);return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:Object.assign({error:Bt.code},Bt.message&&{errorMessage:Bt.message})})}})}}DidDht.methodName="dht";class DidDhtDocument{static get(e){return __awaiter$6(this,arguments,void 0,function*({didUri:$t,gatewayUri:xt}){const At=DidDhtUtils.identifierToIdentityKeyBytes({didUri:$t}),kt=yield DidDhtDocument.pkarrGet({gatewayUri:xt,publicKeyBytes:At}),Bt=yield DidDhtUtils.parseBep44GetMessage({bep44Message:kt}),jt=yield DidDhtDocument.fromDnsPacket({didUri:$t,dnsPacket:Bt});return jt.didDocumentMetadata.versionId=kt.seq.toString(),jt})}static put(e){return __awaiter$6(this,arguments,void 0,function*({did:$t,gatewayUri:xt}){const At=yield DidDhtDocument.toDnsPacket({didDocument:$t.document,didMetadata:$t.metadata,authoritativeGatewayUris:[xt]}),kt=yield DidDhtUtils.createBep44PutMessage({dnsPacket:At,publicKeyBytes:DidDhtUtils.identifierToIdentityKeyBytes({didUri:$t.uri}),signer:yield $t.getSigner({methodId:"0"})}),Bt=yield DidDhtDocument.pkarrPut({gatewayUri:xt,bep44Message:kt});return{didDocument:$t.document,didDocumentMetadata:Object.assign(Object.assign({},$t.metadata),{published:Bt,versionId:kt.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return __awaiter$6(this,arguments,void 0,function*({gatewayUri:$t,publicKeyBytes:xt}){const At=Convert.uint8Array(xt).toBase32Z(),kt=new URL(At,$t).href;let Bt;try{if(Bt=yield fetch(kt,{method:"GET"}),!Bt.ok)throw new DidError(DidErrorCode.NotFound,`Pkarr record not found for: ${At}`)}catch(Ut){throw Ut instanceof DidError?Ut:new DidError(DidErrorCode.InternalError,`Failed to fetch Pkarr record: ${Ut.message}`)}const jt=yield Bt.arrayBuffer();if(!jt)throw new DidError(DidErrorCode.NotFound,`Pkarr record not found for: ${At}`);if(jt.byteLength<72)throw new DidError(DidErrorCode.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${jt.byteLength}`);if(jt.byteLength>1072)throw new DidError(DidErrorCode.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${jt.byteLength}`);return{k:xt,seq:Number(new DataView(jt).getBigUint64(64)),sig:new Uint8Array(jt,0,64),v:new Uint8Array(jt,72)}})}static pkarrPut(e){return __awaiter$6(this,arguments,void 0,function*({gatewayUri:$t,bep44Message:xt}){const At=Convert.uint8Array(xt.k).toBase32Z(),kt=new URL(At,$t).href,Bt=new Uint8Array(xt.v.length+72);Bt.set(xt.sig,0),new DataView(Bt.buffer).setBigUint64(xt.sig.length,BigInt(xt.seq)),Bt.set(xt.v,xt.sig.length+8);let jt;try{jt=yield fetch(kt,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:Bt})}catch(Lt){throw new DidError(DidErrorCode.InternalError,`Failed to put Pkarr record for identifier ${At}: ${Lt.message}`)}return jt.ok})}static fromDnsPacket(e){return __awaiter$6(this,arguments,void 0,function*({didUri:$t,dnsPacket:xt}){var At,kt,Bt;const jt={id:$t},Lt={published:!0},Ut=new Map;for(const Nt of(At=xt==null?void 0:xt.answers)!==null&&At!==void 0?At:[]){if(Nt.type!=="TXT")continue;const qt=Nt.name.split(".")[0].substring(1);switch(!0){case qt.startsWith("aka"):{const Kt=DidDhtUtils.parseTxtDataToString(Nt.data);jt.alsoKnownAs=Kt.split(VALUE_SEPARATOR);break}case qt.startsWith("cnt"):{const Kt=DidDhtUtils.parseTxtDataToString(Nt.data);jt.controller=Kt.includes(VALUE_SEPARATOR)?Kt.split(VALUE_SEPARATOR):Kt;break}case qt.startsWith("k"):{const{id:Kt,t:zt,k:Vt,c:Ht,a:Jt}=DidDhtUtils.parseTxtDataToObject(Nt.data),rr=Convert.base64Url(Vt).toUint8Array(),Qt=DidDhtRegisteredKeyType[Number(zt)];let Wt=yield DidDhtUtils.keyConverter(Qt).bytesToPublicKey({publicKeyBytes:rr});Wt.alg=Jt||KeyTypeToDefaultAlgorithmMap[Number(zt)];const nr=qt==="k0"?"0":Kt!==void 0?Kt:yield computeJwkThumbprint({jwk:Wt});(kt=jt.verificationMethod)!==null&&kt!==void 0||(jt.verificationMethod=[]);const yr=`${$t}#${nr}`;jt.verificationMethod.push({id:yr,type:"JsonWebKey",controller:Ht??$t,publicKeyJwk:Wt}),Ut.set(qt,yr);break}case qt.startsWith("s"):{const Kt=DidDhtUtils.parseTxtDataToObject(Nt.data),{id:zt,t:Vt,se:Ht}=Kt,Jt=__rest(Kt,["id","t","se"]),rr=Ht.includes(VALUE_SEPARATOR)?Ht.split(VALUE_SEPARATOR):[Ht],Qt=Object.fromEntries(Object.entries(Jt).map(([Wt,nr])=>[Wt,nr.includes(VALUE_SEPARATOR)?nr.split(VALUE_SEPARATOR):nr]));(Bt=jt.service)!==null&&Bt!==void 0||(jt.service=[]),jt.service.push(Object.assign(Object.assign({},Qt),{id:`${$t}#${zt}`,type:Vt,serviceEndpoint:rr}));break}case qt.startsWith("typ"):{const{id:Kt}=DidDhtUtils.parseTxtDataToObject(Nt.data);Lt.types=Kt.split(VALUE_SEPARATOR).map(zt=>Number(zt));break}case qt.startsWith("did"):{const Kt=Qt=>Qt.split(VALUE_SEPARATOR).map(Wt=>Ut.get(Wt)).filter(Wt=>typeof Wt=="string"),{auth:zt,asm:Vt,del:Ht,inv:Jt,agm:rr}=DidDhtUtils.parseTxtDataToObject(Nt.data);zt&&(jt.authentication=Kt(zt)),Vt&&(jt.assertionMethod=Kt(Vt)),Ht&&(jt.capabilityDelegation=Kt(Ht)),Jt&&(jt.capabilityInvocation=Kt(Jt)),rr&&(jt.keyAgreement=Kt(rr));break}}}return{didDocument:jt,didDocumentMetadata:Lt,didResolutionMetadata:{}}})}static toDnsPacket(e){return __awaiter$6(this,arguments,void 0,function*({didDocument:$t,didMetadata:xt,authoritativeGatewayUris:At,previousDidProof:kt}){var Bt,jt,Lt,Ut,Nt;const qt=[],Kt=[],zt=new Map,Vt=[],Ht=[];if(kt!==void 0){const{signature:Qt,previousDid:Wt}=kt;yield DidDhtUtils.validatePreviousDidProof({newDid:$t.id,previousDidProof:kt}),qt.push({type:"TXT",name:"_prv._did.",ttl:DNS_RECORD_TTL,data:`id=${Wt};s=${Qt}`})}if($t.alsoKnownAs&&qt.push({type:"TXT",name:"_aka._did.",ttl:DNS_RECORD_TTL,data:$t.alsoKnownAs.join(VALUE_SEPARATOR)}),$t.controller){const Qt=Array.isArray($t.controller)?$t.controller.join(VALUE_SEPARATOR):$t.controller;qt.push({type:"TXT",name:"_cnt._did.",ttl:DNS_RECORD_TTL,data:Qt})}for(const[Qt,Wt]of(jt=(Bt=$t.verificationMethod)===null||Bt===void 0?void 0:Bt.entries())!==null&&jt!==void 0?jt:[]){const nr=`k${Qt}`;Ht.push(nr);let yr=Wt.id.split("#").pop();zt.set(yr,nr);const vr=Wt.publicKeyJwk;if(!(vr!=null&&vr.crv&&vr.crv in AlgorithmToKeyTypeMap$2))throw new DidError(DidErrorCode.InvalidPublicKeyType,`Verification method '${Wt.id}' contains an unsupported key type: ${(Lt=vr==null?void 0:vr.crv)!==null&&Lt!==void 0?Lt:"undefined"}`);const Ir=DidDhtRegisteredKeyType[vr.crv],xr=yield DidDhtUtils.keyConverter(vr.crv).publicKeyToBytes({publicKey:vr}),Or=Convert.uint8Array(xr).toBase64Url(),Nr=[`t=${Ir}`,`k=${Or}`];yr!=="0"&&(yield computeJwkThumbprint({jwk:vr}))!==yr&&Nr.unshift(`id=${yr}`),vr.alg!==KeyTypeToDefaultAlgorithmMap[Ir]&&Nr.push(`a=${vr.alg}`),Wt.controller!==$t.id&&Nr.push(`c=${Wt.controller}`),qt.push({type:"TXT",name:`_${nr}._did.`,ttl:DNS_RECORD_TTL,data:Nr.join(PROPERTY_SEPARATOR)})}(Ut=$t.service)===null||Ut===void 0||Ut.forEach((Qt,Wt)=>{const nr=`s${Wt}`;Vt.push(nr);let{id:yr,type:vr,serviceEndpoint:Ir}=Qt,xr=__rest(Qt,["id","type","serviceEndpoint"]);yr=extractDidFragment(yr),Ir=Array.isArray(Ir)?Ir.join(","):Ir;const Nr=Object.entries(Object.assign({id:yr,t:vr,se:Ir},xr)).map(([lr,ir])=>`${lr}=${ir}`).join(PROPERTY_SEPARATOR),kr=DidDhtUtils.chunkDataIfNeeded(Nr);qt.push({type:"TXT",name:`_${nr}._did.`,ttl:DNS_RECORD_TTL,data:kr})});const Jt=[`v=${DID_DHT_SPECIFICATION_VERSION}`];if(Ht.length&&Jt.push(`vm=${Ht.join(VALUE_SEPARATOR)}`),Object.keys(DidVerificationRelationship).forEach(Qt=>{var Wt;const nr=(Wt=$t[Qt])===null||Wt===void 0?void 0:Wt.map(yr=>zt.get(yr.split("#").pop()));if(nr){const yr=DidDhtVerificationRelationship[Qt];Jt.push(`${yr}=${nr.join(VALUE_SEPARATOR)}`)}}),Vt.length&&Jt.push(`svc=${Vt.join(VALUE_SEPARATOR)}`),!((Nt=xt.types)===null||Nt===void 0)&&Nt.length){const Wt=xt.types.map(nr=>typeof nr=="string"?DidDhtRegisteredDidType[nr]:nr);qt.push({type:"TXT",name:"_typ._did.",ttl:DNS_RECORD_TTL,data:`id=${Wt.join(VALUE_SEPARATOR)}`})}qt.push({type:"TXT",name:"_did."+DidDhtDocument.getUniqueDidSuffix($t.id)+".",ttl:DNS_RECORD_TTL,data:Jt.join(PROPERTY_SEPARATOR)});for(const Qt of At||[])Kt.push({type:"NS",name:"_did."+DidDhtDocument.getUniqueDidSuffix($t.id)+".",ttl:DNS_RECORD_TTL,data:Qt+"."});return{id:0,type:"response",flags:AUTHORITATIVE_ANSWER,answers:[...qt,...Kt]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}}class DidDhtUtils{static createBep44PutMessage(e){return __awaiter$6(this,arguments,void 0,function*({dnsPacket:$t,publicKeyBytes:xt,signer:At}){const kt=Math.ceil(Date.now()/1e3),Bt=encode($t),jt=bencode.encode({seq:kt,v:Bt}).subarray(1,-1);if(jt.length>1e3)throw new DidError(DidErrorCode.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${jt.length} bytes`);const Lt=yield At.sign({data:jt});return{k:xt,seq:kt,sig:Lt,v:Bt}})}static identifierToIdentityKey(e){return __awaiter$6(this,arguments,void 0,function*({didUri:$t}){let xt=DidDhtUtils.identifierToIdentityKeyBytes({didUri:$t});return yield Ed25519.bytesToPublicKey({publicKeyBytes:xt})})}static identifierToIdentityKeyBytes({didUri:e}){const $t=Did.parse(e);if(!$t)throw new DidError(DidErrorCode.InvalidDid,`Invalid DID URI: ${e}`);if($t.method!==DidDht.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${$t.method}`);let xt;try{xt=Convert.base32Z($t.id).toUint8Array()}catch{throw new DidError(DidErrorCode.InvalidPublicKey,"Failed to decode method-specific identifier")}if(xt.length!==32)throw new DidError(DidErrorCode.InvalidPublicKeyLength,`Invalid public key length: ${xt.length}`);return xt}static identityKeyToIdentifier(e){return __awaiter$6(this,arguments,void 0,function*({identityKey:$t}){const xt=yield Ed25519.publicKeyToBytes({publicKey:$t}),At=Convert.uint8Array(xt).toBase32Z();return`did:${DidDht.methodName}:${At}`})}static keyConverter(e){const xt={Ed25519,"P-256":{publicKeyToBytes:At=>__awaiter$6(this,[At],void 0,function*({publicKey:kt}){const Bt=yield Secp256r1.publicKeyToBytes({publicKey:kt});return yield Secp256r1.compressPublicKey({publicKeyBytes:Bt})}),bytesToPublicKey:Secp256r1.bytesToPublicKey,privateKeyToBytes:Secp256r1.privateKeyToBytes,bytesToPrivateKey:Secp256r1.bytesToPrivateKey},secp256k1:{publicKeyToBytes:At=>__awaiter$6(this,[At],void 0,function*({publicKey:kt}){const Bt=yield Secp256k1.publicKeyToBytes({publicKey:kt});return yield Secp256k1.compressPublicKey({publicKeyBytes:Bt})}),bytesToPublicKey:Secp256k1.bytesToPublicKey,privateKeyToBytes:Secp256k1.privateKeyToBytes,bytesToPrivateKey:Secp256k1.bytesToPrivateKey},X25519}[e];if(!xt)throw new DidError(DidErrorCode.InvalidPublicKeyType,`Unsupported curve: ${e}`);return xt}static parseBep44GetMessage(e){return __awaiter$6(this,arguments,void 0,function*({bep44Message:$t}){const xt=yield Ed25519.bytesToPublicKey({publicKeyBytes:$t.k}),At=bencode.encode({seq:$t.seq,v:$t.v}).subarray(1,-1);if(!(yield Ed25519.verify({key:xt,signature:$t.sig,data:At})))throw new DidError(DidErrorCode.InvalidSignature,"Invalid signature for DHT BEP44 message");return decode($t.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(PROPERTY_SEPARATOR).reduce(($t,xt)=>{const[At,kt]=xt.split("=");return $t[At]=kt,$t},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return Convert.uint8Array(e).toString();if(Array.isArray(e))return e.map($t=>this.parseTxtDataToString($t)).join("");throw new DidError(DidErrorCode.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return __awaiter$6(this,arguments,void 0,function*({newDid:$t,previousDidProof:xt}){const At=yield DidDhtUtils.identifierToIdentityKey({didUri:xt.previousDid}),kt=DidDhtUtils.identifierToIdentityKeyBytes({didUri:$t}),Bt=Convert.base64Url(xt.signature).toUint8Array();if(!(yield Ed25519.verify({key:At,data:kt,signature:Bt})))throw new DidError(DidErrorCode.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;const $t=[];for(let xt=0;xt<e.length;xt+=255)$t.push(e.slice(xt,xt+255));return $t}}var __awaiter$5=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},DidIonRegisteredKeyType;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidIonRegisteredKeyType||(DidIonRegisteredKeyType={}));const AlgorithmToKeyTypeMap$1={Ed25519:DidIonRegisteredKeyType.Ed25519,ES256K:DidIonRegisteredKeyType.secp256k1,ES256:DidIonRegisteredKeyType.secp256r1,"P-256":DidIonRegisteredKeyType.secp256r1,secp256k1:DidIonRegisteredKeyType.secp256k1,secp256r1:DidIonRegisteredKeyType.secp256r1},DEFAULT_GATEWAY_URI="https://ion.tbd.engineering";class DidIon extends DidMethod{static create(){return __awaiter$5(this,arguments,void 0,function*({keyManager:e=new LocalKeyManager,options:$t={}}={}){var xt,At,kt,Bt,jt,Lt,Ut;if(!((xt=$t.verificationMethods)===null||xt===void 0)&&xt.some(yr=>!(yr.algorithm in AlgorithmToKeyTypeMap$1)))throw new Error("One or more verification method algorithms are not supported");const Nt=(At=$t.verificationMethods)===null||At===void 0?void 0:At.filter(yr=>"id"in yr).map(yr=>yr.id);if(Nt&&Nt.length!==new Set(Nt).size)throw new Error("One or more verification method IDs are not unique");if(!((kt=$t.services)===null||kt===void 0)&&kt.some(yr=>!yr.id||!yr.type||!yr.serviceEndpoint))throw new Error("One or more services are missing required properties");const qt={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},Kt=[];for(const yr of(Bt=$t.verificationMethods)!==null&&Bt!==void 0?Bt:[qt]){const vr=yield e.generateKey({algorithm:yr.algorithm}),Ir=yield e.getPublicKey({keyUri:vr});Kt.push({id:yr.id,publicKeyJwk:Ir,purposes:(jt=yr.purposes)!==null&&jt!==void 0?jt:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const zt=yield e.generateKey({algorithm:DidIonRegisteredKeyType.secp256k1}),Vt=yield e.getPublicKey({keyUri:zt}),Ht=yield e.generateKey({algorithm:DidIonRegisteredKeyType.secp256k1}),Jt=yield e.getPublicKey({keyUri:Ht}),rr=yield DidIonUtils.computeLongFormDidUri({recoveryKey:Vt,updateKey:Jt,services:(Lt=$t.services)!==null&&Lt!==void 0?Lt:[],verificationMethods:Kt}),{didDocument:Qt,didResolutionMetadata:Wt}=yield DidIon.resolve(rr,{gatewayUri:$t.gatewayUri});if(Qt===null)throw new Error(`Unable to resolve DID during creation: ${Wt==null?void 0:Wt.error}`);const nr=new BearerDid({uri:rr,document:Qt,metadata:{published:!1,canonicalId:rr.split(":",3).join(":"),recoveryKey:Vt,updateKey:Jt},keyManager:e});if(!((Ut=$t.publish)!==null&&Ut!==void 0)||Ut){const yr=yield DidIon.publish({did:nr,gatewayUri:$t.gatewayUri});nr.metadata=yr.didDocumentMetadata}return nr})}static getSigningMethod(e){return __awaiter$5(this,arguments,void 0,function*({didDocument:$t,methodId:xt}){var At;const kt=Did.parse($t.id);if(kt&&kt.method!==this.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${kt.method}`);const Bt=(At=$t.verificationMethod)===null||At===void 0?void 0:At.find(jt=>{var Lt;return jt.id===(xt??((Lt=$t.assertionMethod)===null||Lt===void 0?void 0:Lt[0]))});if(!(Bt&&Bt.publicKeyJwk))throw new DidError(DidErrorCode.InternalError,"A verification method intended for signing could not be determined from the DID Document");return Bt})}static import(e){return __awaiter$5(this,arguments,void 0,function*({portableDid:$t,keyManager:xt=new LocalKeyManager}){const At=Did.parse($t.uri);if((At==null?void 0:At.method)!==DidIon.methodName)throw new DidError(DidErrorCode.MethodNotSupported,"Method not supported");return yield BearerDid.import({portableDid:$t,keyManager:xt})})}static publish(e){return __awaiter$5(this,arguments,void 0,function*({did:$t,gatewayUri:xt=DEFAULT_GATEWAY_URI}){var At,kt,Bt;const jt=(kt=(At=$t.document.verificationMethod)===null||At===void 0?void 0:At.map(Nt=>({id:Nt.id,publicKeyJwk:Nt.publicKeyJwk,purposes:getVerificationRelationshipsById({didDocument:$t.document,methodId:Nt.id})})))!==null&&kt!==void 0?kt:[],Lt=yield DidIonUtils.createIonDocument({services:(Bt=$t.document.service)!==null&&Bt!==void 0?Bt:[],verificationMethods:jt}),Ut=yield DidIonUtils.constructCreateRequest({ionDocument:Lt,recoveryKey:$t.metadata.recoveryKey,updateKey:$t.metadata.updateKey});try{const Nt=DidIonUtils.appendPathToUrl({baseUrl:xt,path:"/operations"}),qt=yield fetch(Nt,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ut)});return{didDocument:$t.document,didDocumentMetadata:Object.assign(Object.assign({},$t.metadata),{published:qt.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:DidErrorCode.InternalError,errorMessage:`Failed to publish DID document for: ${$t.uri}`}}}})}static resolve(e){return __awaiter$5(this,arguments,void 0,function*($t,xt={}){var At,kt;const Bt=Did.parse($t);if(!Bt)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"invalidDid"}});if(Bt.method!==DidIon.methodName)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"methodNotSupported"}});const jt=(At=xt==null?void 0:xt.gatewayUri)!==null&&At!==void 0?At:DEFAULT_GATEWAY_URI;try{const Lt=DidIonUtils.appendPathToUrl({baseUrl:jt,path:`/identifiers/${$t}`}),Ut=yield fetch(Lt);if(!Ut.ok)throw new DidError(DidErrorCode.NotFound,`Unable to find DID document for: ${$t}`);const{didDocument:Nt,didDocumentMetadata:qt}=yield Ut.json();return Object.assign(Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),Nt&&{didDocument:Nt}),{didDocumentMetadata:Object.assign({published:(kt=qt==null?void 0:qt.method)===null||kt===void 0?void 0:kt.published},qt)})}catch(Lt){if(!(Lt instanceof DidError))throw new Error(Lt);return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:Object.assign({error:Lt.code},Lt.message&&{errorMessage:Lt.message})})}})}}DidIon.methodName="ion";class DidIonUtils{static appendPathToUrl({baseUrl:e,path:$t}){const xt=new URL(e);return xt.pathname=xt.pathname.endsWith("/")?xt.pathname:xt.pathname+"/",xt.pathname+=$t.startsWith("/")?$t.substring(1):$t,xt.toString()}static computeLongFormDidUri(e){return __awaiter$5(this,arguments,void 0,function*({recoveryKey:$t,updateKey:xt,services:At,verificationMethods:kt}){const Bt=yield DidIonUtils.createIonDocument({services:At,verificationMethods:kt}),jt=DidIonUtils.normalizeJwk($t),Lt=DidIonUtils.normalizeJwk(xt);return yield IonDid.createLongFormDid({document:Bt,recoveryKey:jt,updateKey:Lt})})}static constructCreateRequest(e){return __awaiter$5(this,arguments,void 0,function*({ionDocument:$t,recoveryKey:xt,updateKey:At}){return yield IonRequest.createCreateRequest({document:$t,recoveryKey:DidIonUtils.normalizeJwk(xt),updateKey:DidIonUtils.normalizeJwk(At)})})}static createIonDocument(e){return __awaiter$5(this,arguments,void 0,function*({services:$t,verificationMethods:xt}){var At,kt;const Bt=[];for(const Ut of xt){let Nt=(kt=(At=Ut.id)!==null&&At!==void 0?At:Ut.publicKeyJwk.kid)!==null&&kt!==void 0?kt:yield computeJwkThumbprint({jwk:Ut.publicKeyJwk});Nt=`${Nt.split("#").pop()}`;const qt={id:Nt,publicKeyJwk:DidIonUtils.normalizeJwk(Ut.publicKeyJwk),purposes:Ut.purposes,type:"JsonWebKey2020"};Bt.push(qt)}const jt=$t.map(Ut=>Object.assign(Object.assign({},Ut),{id:`${Ut.id.split("#").pop()}`}));return{publicKeys:Bt,services:jt}})}static normalizeJwk(e){const $t=e.kty;let xt;if($t==="EC")xt={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if($t==="oct")xt={k:e.k,kty:e.kty};else if($t==="OKP")xt={crv:e.crv,kty:e.kty,x:e.x};else if($t==="RSA")xt={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${$t}`);return xt}}var __awaiter$4=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class DidJwk extends DidMethod{static create(){return __awaiter$4(this,arguments,void 0,function*({keyManager:e=new LocalKeyManager,options:$t={}}={}){var xt,At,kt,Bt;if($t.algorithm&&$t.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if($t.verificationMethods&&$t.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const jt=(Bt=(xt=$t.algorithm)!==null&&xt!==void 0?xt:(kt=(At=$t.verificationMethods)===null||At===void 0?void 0:At[0])===null||kt===void 0?void 0:kt.algorithm)!==null&&Bt!==void 0?Bt:"Ed25519",Lt=yield e.generateKey({algorithm:jt}),Ut=yield e.getPublicKey({keyUri:Lt}),Nt=Convert.object(Ut).toBase64Url(),qt=`did:${DidJwk.methodName}:${Nt}`,zt=(yield DidJwk.resolve(qt)).didDocument;return new BearerDid({uri:qt,document:zt,metadata:{},keyManager:e})})}static getSigningMethod(e){return __awaiter$4(this,arguments,void 0,function*({didDocument:$t}){var xt;const At=Did.parse($t.id);if(At&&At.method!==this.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${At.method}`);const[kt]=(xt=$t.verificationMethod)!==null&&xt!==void 0?xt:[];if(!(kt&&kt.publicKeyJwk))throw new DidError(DidErrorCode.InternalError,"A verification method intended for signing could not be determined from the DID Document");return kt})}static import(e){return __awaiter$4(this,arguments,void 0,function*({portableDid:$t,keyManager:xt=new LocalKeyManager}){const At=Did.parse($t.uri);if((At==null?void 0:At.method)!==DidJwk.methodName)throw new DidError(DidErrorCode.MethodNotSupported,"Method not supported");const kt=yield BearerDid.import({portableDid:$t,keyManager:xt});if(kt.document.verificationMethod.length!==1)throw new DidError(DidErrorCode.InvalidDidDocument,"DID document must contain exactly one verification method");return kt})}static resolve(e,$t){return __awaiter$4(this,void 0,void 0,function*(){const xt=Did.parse(e);let At;try{At=Convert.base64Url(xt.id).toObject()}catch{}if(!xt||!At)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"invalidDid"}});if(xt.method!==DidJwk.methodName)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"methodNotSupported"}});const kt={"@context":["https://www.w3.org/ns/did/v1"],id:xt.uri},Bt=`${kt.id}#0`;switch(kt.verificationMethod=[{id:Bt,type:"JsonWebKey",controller:kt.id,publicKeyJwk:At}],kt.authentication=[Bt],kt.assertionMethod=[Bt],kt.capabilityInvocation=[Bt],kt.capabilityDelegation=[Bt],kt.keyAgreement=[Bt],At.use){case"sig":{delete kt.keyAgreement;break}case"enc":{delete kt.authentication,delete kt.assertionMethod,delete kt.capabilityInvocation,delete kt.capabilityDelegation;break}}return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didDocument:kt})})}}DidJwk.methodName="jwk";var __awaiter$3=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})},DidKeyRegisteredKeyType;(function(_t){_t.Ed25519="Ed25519",_t.secp256k1="secp256k1",_t.secp256r1="secp256r1",_t.X25519="X25519"})(DidKeyRegisteredKeyType||(DidKeyRegisteredKeyType={}));const DidKeyVerificationMethodType={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},AlgorithmToKeyTypeMap={Ed25519:DidKeyRegisteredKeyType.Ed25519,ES256K:DidKeyRegisteredKeyType.secp256k1,ES256:DidKeyRegisteredKeyType.secp256r1,"P-256":DidKeyRegisteredKeyType.secp256r1,secp256k1:DidKeyRegisteredKeyType.secp256k1,secp256r1:DidKeyRegisteredKeyType.secp256r1,X25519:DidKeyRegisteredKeyType.X25519};class DidKey extends DidMethod{static create(){return __awaiter$3(this,arguments,void 0,function*({keyManager:e=new LocalKeyManager,options:$t={}}={}){var xt,At,kt,Bt;if($t.algorithm&&$t.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if($t.verificationMethods&&$t.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");const jt=(Bt=(xt=$t.algorithm)!==null&&xt!==void 0?xt:(kt=(At=$t.verificationMethods)===null||At===void 0?void 0:At[0])===null||kt===void 0?void 0:kt.algorithm)!==null&&Bt!==void 0?Bt:"Ed25519",Lt=yield e.generateKey({algorithm:jt}),Ut=yield e.getPublicKey({keyUri:Lt}),Nt=yield DidKeyUtils.publicKeyToMultibaseId({publicKey:Ut}),qt=`did:${DidKey.methodName}:${Nt}`,zt=(yield DidKey.resolve(qt,$t)).didDocument;return new BearerDid({uri:qt,document:zt,metadata:{},keyManager:e})})}static getSigningMethod(e){return __awaiter$3(this,arguments,void 0,function*({didDocument:$t}){var xt;const At=Did.parse($t.id);if(At&&At.method!==this.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${At.method}`);const[kt]=$t.assertionMethod||[],Bt=(xt=$t.verificationMethod)===null||xt===void 0?void 0:xt.find(jt=>jt.id===kt);if(!(Bt&&Bt.publicKeyJwk))throw new DidError(DidErrorCode.InternalError,"A verification method intended for signing could not be determined from the DID Document");return Bt})}static import(e){return __awaiter$3(this,arguments,void 0,function*({portableDid:$t,keyManager:xt=new LocalKeyManager}){const At=Did.parse($t.uri);if((At==null?void 0:At.method)!==DidKey.methodName)throw new DidError(DidErrorCode.MethodNotSupported,"Method not supported");const kt=yield BearerDid.import({portableDid:$t,keyManager:xt});if(kt.document.verificationMethod.length!==1)throw new DidError(DidErrorCode.InvalidDidDocument,"DID document must contain exactly one verification method");return kt})}static resolve(e,$t){return __awaiter$3(this,void 0,void 0,function*(){try{const xt=yield DidKey.createDocument({didUri:e,options:$t});return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didDocument:xt})}catch(xt){if(!(xt instanceof DidError))throw new Error(xt);return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:Object.assign({error:xt.code},xt.message&&{errorMessage:xt.message})})}})}static createDocument(e){return __awaiter$3(this,arguments,void 0,function*({didUri:$t,options:xt={}}){const{defaultContext:At="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:kt=!1,enableExperimentalPublicKeyTypes:Bt=!1,publicKeyFormat:jt="JsonWebKey2020"}=xt,Lt={id:""},Ut=Did.parse($t);if(!Ut)throw new DidError(DidErrorCode.InvalidDid,`Invalid DID URI: ${$t}`);const Nt=Ut.id;if(Ut.method!==DidKey.methodName)throw new DidError(DidErrorCode.MethodNotSupported,`Method not supported: ${Ut.method}`);if(!DidKey.validateIdentifier(Ut))throw new DidError(DidErrorCode.InvalidDid,`Invalid DID URI: ${$t}`);const qt=yield DidKey.createSignatureMethod({didUri:$t,multibaseValue:Nt,options:{enableExperimentalPublicKeyTypes:Bt,publicKeyFormat:jt}});if(Lt.id=Ut.uri,Lt.verificationMethod=[qt],Lt.authentication=[qt.id],Lt.assertionMethod=[qt.id],Lt.capabilityInvocation=[qt.id],Lt.capabilityDelegation=[qt.id],kt===!0){const Vt=jt==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",Ht=yield this.createEncryptionMethod({didUri:$t,multibaseValue:Nt,options:{enableExperimentalPublicKeyTypes:Bt,publicKeyFormat:Vt}});Lt.verificationMethod.push(Ht),Lt.keyAgreement=[Ht.id]}const Kt=[At];return getVerificationMethodTypes({didDocument:Lt}).forEach(Vt=>{const Ht=DidKeyVerificationMethodType[Vt];Kt.push(Ht)}),Lt["@context"]=Kt,Lt})}static createEncryptionMethod(e){return __awaiter$3(this,arguments,void 0,function*({didUri:$t,multibaseValue:xt,options:At}){const{enableExperimentalPublicKeyTypes:kt,publicKeyFormat:Bt}=At,jt={id:"",type:"",controller:""},{keyBytes:Lt,multicodecCode:Ut}=yield DidKey.deriveEncryptionKey({multibaseValue:xt}),Nt=Lt.byteLength,qt=DidKeyUtils.MULTICODEC_PUBLIC_KEY_LENGTH[Ut];if(Nt!==qt)throw new DidError(DidErrorCode.InvalidPublicKeyLength,`Expected ${Nt} bytes. Actual: ${qt}`);const Kt=keyBytesToMultibaseId({keyBytes:Lt,multicodecCode:Ut});jt.id=`${$t}#${Kt}`;try{new URL(jt.id)}catch{throw new DidError(DidErrorCode.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(Bt in DidKeyVerificationMethodType))throw new DidError(DidErrorCode.UnsupportedPublicKeyType,`Unsupported format: ${Bt}`);if(kt===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(Bt))throw new DidError(DidErrorCode.InvalidPublicKeyType,`Specified '${Bt}' without setting enableExperimentalPublicKeyTypes to true.`);if(jt.type=Bt,jt.controller=$t,Bt==="X25519KeyAgreementKey2020"&&(jt.publicKeyMultibase=Kt),Bt==="JsonWebKey2020"){const{crv:Vt}=yield DidKeyUtils.multicodecToJwk({code:Ut});jt.publicKeyJwk=yield DidKeyUtils.keyConverter(Vt).bytesToPublicKey({publicKeyBytes:Lt})}return jt})}static createSignatureMethod(e){return __awaiter$3(this,arguments,void 0,function*({didUri:$t,multibaseValue:xt,options:At}){const{enableExperimentalPublicKeyTypes:kt,publicKeyFormat:Bt}=At,jt={id:"",type:"",controller:""},{keyBytes:Lt,multicodecCode:Ut,multicodecName:Nt}=multibaseIdToKeyBytes({multibaseKeyId:xt}),qt=Lt.byteLength,Kt=DidKeyUtils.MULTICODEC_PUBLIC_KEY_LENGTH[Ut];if(qt!==Kt)throw new DidError(DidErrorCode.InvalidPublicKeyLength,`Expected ${qt} bytes. Actual: ${Kt}`);let zt=!1;switch(Nt){case"secp256k1-pub":zt=yield Secp256k1.validatePublicKey({publicKeyBytes:Lt});break;case"ed25519-pub":zt=yield Ed25519.validatePublicKey({publicKeyBytes:Lt});break;case"x25519-pub":zt=!0;break}if(!zt)throw new DidError(DidErrorCode.InvalidPublicKey,"Invalid public key detected.");jt.id=`${$t}#${xt}`;try{new URL(jt.id)}catch{throw new DidError(DidErrorCode.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(Bt in DidKeyVerificationMethodType))throw new DidError(DidErrorCode.UnsupportedPublicKeyType,`Unsupported format: ${Bt}`);if(kt===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(Bt))throw new DidError(DidErrorCode.InvalidPublicKeyType,`Specified '${Bt}' without setting enableExperimentalPublicKeyTypes to true.`);if(jt.type=Bt,jt.controller=$t,Bt==="Ed25519VerificationKey2020"&&(jt.publicKeyMultibase=xt),Bt==="JsonWebKey2020"){const{crv:Ht}=yield DidKeyUtils.multicodecToJwk({code:Ut});jt.publicKeyJwk=yield DidKeyUtils.keyConverter(Ht).bytesToPublicKey({publicKeyBytes:Lt})}return jt})}static deriveEncryptionKey(e){return __awaiter$3(this,arguments,void 0,function*({multibaseValue:$t}){let xt={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:At,multicodecCode:kt}=multibaseIdToKeyBytes({multibaseKeyId:$t});if(kt===237){const Bt=yield DidKeyUtils.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:At}),jt=yield Ed25519.convertPublicKeyToX25519({publicKey:Bt});xt={keyBytes:yield DidKeyUtils.keyConverter("Ed25519").publicKeyToBytes({publicKey:jt}),multicodecCode:236}}return xt})}static validateIdentifier(e){const{method:$t,id:xt}=e,[At]=e.uri.split(":",1);return At==="did"&&$t==="key"&&Number("1")>0&&universalTypeOf(xt)==="String"&&xt.startsWith("z")}}DidKey.methodName="key";class DidKeyUtils{static jwkToMulticodec(e){return __awaiter$3(this,arguments,void 0,function*({jwk:$t}){const xt=[];$t.crv&&(xt.push($t.crv),$t.d?xt.push("private"):xt.push("public"));const At=xt.join(":"),kt=DidKeyUtils.JWK_TO_MULTICODEC[At];if(kt===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${At}'`);return{code:Multicodec.getCodeFromName({name:kt}),name:kt}})}static keyCompressor(e){const xt={"P-256":Secp256r1.compressPublicKey,secp256k1:Secp256k1.compressPublicKey}[e];if(!xt)throw new DidError(DidErrorCode.InvalidPublicKeyType,`Unsupported curve: ${e}`);return xt}static keyConverter(e){const xt={Ed25519,"P-256":Secp256r1,secp256k1:Secp256k1,X25519}[e];if(!xt)throw new DidError(DidErrorCode.InvalidPublicKeyType,`Unsupported curve: ${e}`);return xt}static multicodecToJwk(e){return __awaiter$3(this,arguments,void 0,function*({code:$t,name:xt}){if(!(xt?!$t:$t))throw new Error("Either 'name' or 'code' must be defined, but not both.");xt=xt===void 0?Multicodec.getNameFromCode({code:$t}):xt;const At=xt,kt=DidKeyUtils.MULTICODEC_TO_JWK[At];if(kt===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},kt)})}static publicKeyToMultibaseId(e){return __awaiter$3(this,arguments,void 0,function*({publicKey:$t}){var xt;if(!($t!=null&&$t.crv&&$t.crv in AlgorithmToKeyTypeMap))throw new DidError(DidErrorCode.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(xt=$t==null?void 0:$t.crv)!==null&&xt!==void 0?xt:"undefined"}`);let At=yield DidKeyUtils.keyConverter($t.crv).publicKeyToBytes({publicKey:$t});/^(secp256k1|P-256|P-384|P-521)$/.test($t.crv)&&(At=yield DidKeyUtils.keyCompressor($t.crv)({publicKeyBytes:At}));const{name:kt}=yield DidKeyUtils.jwkToMulticodec({jwk:$t});return keyBytesToMultibaseId({keyBytes:At,multicodecName:kt})})}}DidKeyUtils.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};DidKeyUtils.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};DidKeyUtils.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var __awaiter$2=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class DidWeb extends DidMethod{static resolve(e,$t){return __awaiter$2(this,void 0,void 0,function*(){const xt=Did.parse(e);if(!xt)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"invalidDid"}});if(xt.method!==DidWeb.methodName)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"methodNotSupported"}});let At=`https://${xt.id.replace(/:/g,"/")}`;At=decodeURIComponent(At);const kt=xt.id.includes(":")?`${At}/did.json`:`${At}/.well-known/did.json`;try{const Bt=yield fetch(kt);if(!Bt.ok)throw new Error("HTTP error status code returned");const jt=yield Bt.json();return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didDocument:jt})}catch{return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:"notFound"}})}})}}DidWeb.methodName="web";const DidResolverCacheNoop={get:function(_t){return null},set:function(_t,e){return null},delete:function(_t){return null},clear:function(){return null},close:function(){return null}};var __awaiter$1=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,e||[])).next())})};class UniversalResolver{constructor({cache:e,didResolvers:$t}){this.didResolvers=new Map,this.cache=e||DidResolverCacheNoop;for(const xt of $t)this.didResolvers.set(xt.methodName,xt)}resolve(e,$t){return __awaiter$1(this,void 0,void 0,function*(){const xt=Did.parse(e);if(!xt)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:DidErrorCode.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});const At=this.didResolvers.get(xt.method);if(!At)return Object.assign(Object.assign({},EMPTY_DID_RESOLUTION_RESULT),{didResolutionMetadata:{error:DidErrorCode.MethodNotSupported,errorMessage:`Method not supported: ${xt.method}`}});const kt=yield this.cache.get(xt.uri);if(kt)return kt;{const Bt=yield At.resolve(xt.uri,$t);return Bt.didResolutionMetadata.error||(yield this.cache.set(xt.uri,Bt)),Bt}})}dereference(e,$t){return __awaiter$1(this,void 0,void 0,function*(){const xt=Did.parse(e);if(!xt)return{dereferencingMetadata:{error:DidErrorCode.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:At,didResolutionMetadata:kt,didDocumentMetadata:Bt}=yield this.resolve(xt.uri);if(!At)return{dereferencingMetadata:{error:kt.error},contentStream:null,contentMetadata:{}};if(!xt.fragment||xt.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:At,contentMetadata:Bt};const{service:jt=[],verificationMethod:Lt=[]}=At,Ut=new Set([e,xt.fragment,`#${xt.fragment}`]);let Nt;for(let qt of Lt)if(Ut.has(qt.id)){Nt=qt;break}for(let qt of jt)if(Ut.has(qt.id)){Nt=qt;break}return Nt?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:Nt,contentMetadata:kt}:{dereferencingMetadata:{error:DidErrorCode.NotFound},contentStream:null,contentMetadata:{}}})}}var __awaiter=function(_t,e,$t,xt){function At(kt){return kt instanceof $t?kt:new $t(function(Bt){Bt(kt)})}return new($t||($t=Promise))(function(kt,Bt){function jt(Nt){try{Ut(xt.next(Nt))}catch(qt){Bt(qt)}}function Lt(Nt){try{Ut(xt.throw(Nt))}catch(qt){Bt(qt)}}function Ut(Nt){Nt.done?kt(Nt.value):At(Nt.value).then(jt,Lt)}Ut((xt=xt.apply(_t,[])).next())})};const DidResolver=new UniversalResolver({didResolvers:[DidDht,DidWeb]}),didUrlRegex=/^https?:\/\/dweb\/([^/]+)\/?(.*)?$/,httpToHttpsRegex=/^http:/,trailingSlashRegex=/\/$/;function importMetaIfSupported(){try{return new Function("return import.meta")()}catch{return}}function getDwnEndpoints(_t){var e,$t;return __awaiter(this,void 0,void 0,function*(){const{didDocument:xt}=yield DidResolver.resolve(_t);let At=($t=(e=xt==null?void 0:xt.service)===null||e===void 0?void 0:e.find(kt=>kt.type==="DecentralizedWebNode"))===null||$t===void 0?void 0:$t.serviceEndpoint;return(Array.isArray(At)?At:[At]).filter(kt=>kt.startsWith("http"))})}function handleEvent(_t,e,$t,xt){return __awaiter(this,void 0,void 0,function*(){const At=_t.request.url.replace(httpToHttpsRegex,"https:").replace(trailingSlashRegex,""),kt=yield caches.open("drl"),Bt=yield kt.match(At);if(Bt){if(!navigator.onLine)return Bt;const jt=yield xt==null?void 0:xt.onCacheCheck(_t,At);if(jt){const Lt=Bt.headers.get("dwn-cache-time");if(Lt&&Date.now()<Number(Lt)+(Number(jt.ttl)||0))return Bt}}try{if($t)return yield fetchResource(_t,e,At,$t,kt,xt);{const jt=yield DidResolver.resolve(e);return new Response(JSON.stringify(jt),{status:200,headers:{"Content-Type":"application/json"}})}}catch(jt){return jt instanceof Response?jt:(console.log(`Error in DID URL fetch: ${jt}`),new Response("DID URL fetch error",{status:500}))}})}function fetchResource(_t,e,$t,xt,At,kt){return __awaiter(this,void 0,void 0,function*(){const Bt=yield getDwnEndpoints(e);if(!(Bt!=null&&Bt.length))throw new Response("DWeb Node resolution failed: no valid endpoints found.",{status:530});for(const jt of Bt)try{const Lt=`${jt.replace(trailingSlashRegex,"")}/${e}/${xt}`,Ut=yield fetch(Lt,{headers:_t.request.headers});return Ut.ok?((yield kt==null?void 0:kt.onCacheCheck(_t,$t))&&cacheResponse($t,Lt,Ut,At),Ut):(console.log(`DWN endpoint error: ${Ut.status}`),new Response("DWeb Node request failed",{status:Ut.status}))}catch(Lt){return console.log(`DWN endpoint error: ${Lt}`),new Response("DWeb Node request failed: "+Lt,{status:500})}})}function cacheResponse(_t,e,$t,xt){return __awaiter(this,void 0,void 0,function*(){const At=$t.clone(),kt=new Headers(At.headers);kt.append("dwn-cache-time",Date.now().toString()),kt.append("dwn-composed-url",e);const Bt=new Response(At.body,{headers:kt});xt.put(_t,Bt)})}function installWorker(_t={}){var e,$t,xt;return __awaiter(this,void 0,void 0,function*(){const At=self;try{if(typeof ServiceWorkerGlobalScope<"u"&&At instanceof ServiceWorkerGlobalScope)At.skipWaiting(),At.addEventListener("activate",kt=>{kt.waitUntil(At.clients.claim())}),At.addEventListener("fetch",kt=>{const Bt=kt.request.url.match(didUrlRegex);Bt&&kt.respondWith(handleEvent(kt,Bt[1],Bt[2],_t))});else if(!((e=globalThis==null?void 0:globalThis.navigator)===null||e===void 0)&&e.serviceWorker){if(!(yield navigator.serviceWorker.getRegistration("/"))){const Bt=_t.path||(globalThis.document?($t=document==null?void 0:document.currentScript)===null||$t===void 0?void 0:$t.src:(xt=importMetaIfSupported())===null||xt===void 0?void 0:xt.url);Bt&&navigator.serviceWorker.register(Bt,{type:"module"}).catch(jt=>{console.error("DWeb networking feature installation failed: ",jt)})}}else throw new Error("DWeb networking features are not available for install in this environment")}catch(kt){console.error("Error in installing networking features:",kt)}})}const loaderStyles=`
  .drl-loading-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    color: #fff;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    z-index: 1000000;
  }

  .drl-loading-overlay > div {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .drl-loading-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
  }

    .drl-loading-spinner div {
      position: relative;
      width: 2em;
      height: 2em;
      margin: 0.1em 0.25em 0 0;
    }
    .drl-loading-spinner div::after,
    .drl-loading-spinner div::before {
      content: '';  
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 0.1em solid #FFF;
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      animation: drl-loading-spinner 2s linear infinite;
    }
    .drl-loading-spinner div::after {
      animation-delay: 1s;
    }

  .drl-loading-overlay span {
    --text-opacity: 2;
    display: flex;
    align-items: center;
    margin: 2em auto 0;
    padding: 0.2em 0.75em 0.25em;
    text-align: center;
    border-radius: 5em;
    background: rgba(255 255 255 / 8%);
    opacity: 0.8;
    transition: opacity 0.3s ease;
    cursor: pointer;
  }

    .drl-loading-overlay span:focus {
      opacity: 1;
    }

    .drl-loading-overlay span:hover {
      opacity: 1;
    }

    .drl-loading-overlay span::before {
      content: "✕ ";
      margin: 0 0.4em 0 0;
      color: red;
      font-size: 65%;
      font-weight: bold;
    }

    .drl-loading-overlay span::after {
      content: "stop";
      display: block;
      font-size: 60%;
      line-height: 0;
      color: rgba(255 255 255 / 60%);
    }

    .drl-loading-overlay.new-tab-overlay span::after {
      content: "close";
    }
  
  @keyframes drl-loading-spinner {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 0;
    }
  }
`,tabContent=`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading DRL...</title>
  <style>
    html, body {
      background-color: #151518;
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
    }
    ${loaderStyles}
  </style>
</head>
<body>
  <div class="drl-loading-overlay new-tab-overlay">
    <div class="drl-loading-spinner">
      <div></div>
      Loading DRL
    </div>
    <span onclick="window.close()" tabindex="0"></span>
  </div>
</body>
</html>
`;let elementsInjected=!1;function injectElements(){if(elementsInjected)return;const _t=document.createElement("style");_t.innerHTML=`
    ${loaderStyles}

    .drl-loading-overlay {
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    :root[drl-link-loading] .drl-loading-overlay {
      opacity: 1;
      pointer-events: all;
    }
  `,document.head.append(_t);let e=document.createElement("div");e.classList.add("drl-loading-overlay"),e.innerHTML=`
    <div class="drl-loading-spinner">
      <div></div>
      Loading DRL
    </div> 
    <span tabindex="0"></span>
  `,e.lastElementChild.addEventListener("click",cancelNavigation),document.body.prepend(e),elementsInjected=!0}function cancelNavigation(){document.documentElement.removeAttribute("drl-link-loading"),activeNavigation=null}let activeNavigation,linkFeaturesActive=!1;function addLinkFeatures(){linkFeaturesActive||(document.addEventListener("click",_t=>__awaiter(this,void 0,void 0,function*(){let e=_t.target.closest("a");if(e){let $t=e.href;const xt=$t.match(didUrlRegex);if(xt){let At=xt[1],kt=xt[2];const Bt=e.target==="_blank";_t.preventDefault();try{let jt;Bt?(jt=window.open("","_blank"),jt.document.write(tabContent)):(activeNavigation=kt,setTimeout(()=>document.documentElement.setAttribute("drl-link-loading",""),50));const Lt=yield getDwnEndpoints(At);if(!Lt.length)throw null;let Ut=`${Lt[0].replace(trailingSlashRegex,"")}/${At}/${kt}`;Bt?jt.closed||(jt.location.href=Ut):activeNavigation===kt&&(window.location.href=Ut)}catch{throw activeNavigation===kt&&cancelNavigation(),new Error(`DID endpoint resolution failed for the DRL: ${$t}`)}}}})),document.addEventListener("pointercancel",resetContextMenuTarget),document.addEventListener("pointerdown",_t=>__awaiter(this,void 0,void 0,function*(){var e;const $t=_t.composedPath()[0];if(_t.pointerType==="mouse"&&_t.button===2||_t.pointerType==="touch"&&_t.isPrimary){if(resetContextMenuTarget(),$t&&(!((e=$t==null?void 0:$t.src)===null||e===void 0)&&e.match(didUrlRegex))){contextMenuTarget=$t,$t.__src__=$t.src;const xt=$t.src.replace(httpToHttpsRegex,"https:").replace(trailingSlashRegex,""),Bt=(yield(yield caches.open("drl")).match(xt)).headers.get("dwn-composed-url");Bt&&($t.src=Bt),$t.addEventListener("pointerup",resetContextMenuTarget,{once:!0})}}else $t===contextMenuTarget&&resetContextMenuTarget()})),linkFeaturesActive=!0)}let contextMenuTarget;function resetContextMenuTarget(_t){return __awaiter(this,void 0,void 0,function*(){(_t==null?void 0:_t.type)==="pointerup"&&(yield new Promise(e=>requestAnimationFrame(e))),contextMenuTarget&&(contextMenuTarget.src=contextMenuTarget.__src__,delete contextMenuTarget.__src__,contextMenuTarget=null)})}function activatePolyfills(_t={}){_t.serviceWorker!==!1&&installWorker(_t),typeof window<"u"&&typeof window.document<"u"&&(_t.injectStyles!==!1&&(document.readyState!=="loading"?injectElements():document.addEventListener("DOMContentLoaded",injectElements,{once:!0})),_t.links!==!1&&addLinkFeatures())}precacheAndRoute(self.__WB_MANIFEST);cleanupOutdatedCaches();let allowlist;registerRoute(new NavigationRoute(createHandlerBoundToURL("index.html"),{allowlist}));self.skipWaiting();clientsClaim();activatePolyfills({onCacheCheck(_t,e){return{ttl:6e4*5}}})});export default $i();
